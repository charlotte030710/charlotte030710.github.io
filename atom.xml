<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æµ®ç”Ÿè‹¥æ¢¦</title>
  
  <subtitle>è€Œæµ®ç”Ÿè‹¥æ¢¦ï¼Œä¸ºæ¬¢å‡ ä½•ï¼Ÿ</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2025-09-22T04:31:18.134Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Charlotte</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ•°æ®ç»“æ„</title>
    <link href="http://example.com/2025/09/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    <id>http://example.com/2025/09/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</id>
    <published>2025-09-20T10:29:28.000Z</published>
    <updated>2025-09-22T04:31:18.134Z</updated>
    
    <content type="html"><![CDATA[<hr><h1 id="1-æ•°ç»„-Array"><a href="#1-æ•°ç»„-Array" class="headerlink" title="1. æ•°ç»„ (Array)"></a>1. æ•°ç»„ (Array)</h1><p><strong>ç‰¹ç‚¹</strong>ï¼šè¿ç»­å†…å­˜ï¼Œéšæœºè®¿é—® O(1)ï¼Œæ’å…¥&#x2F;åˆ é™¤ O(n)ã€‚</p><h3 id="å¸¸è§æ“ä½œ"><a href="#å¸¸è§æ“ä½œ" class="headerlink" title="å¸¸è§æ“ä½œ"></a>å¸¸è§æ“ä½œ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éå†</span></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) System.out.print(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥æ‰¾ï¼ˆçº¿æ€§æŸ¥æ‰¾ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] == target) <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥ï¼ˆæŒ‡å®šä½ç½®ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] insert(<span class="type">int</span>[] arr, <span class="type">int</span> pos, <span class="type">int</span> val) &#123;</span><br><span class="line">    <span class="type">int</span>[] newArr = <span class="keyword">new</span> <span class="title class_">int</span>[arr.length + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = <span class="number">0</span>; i &lt; newArr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == pos) newArr[i] = val;</span><br><span class="line">        <span class="keyword">else</span> newArr[i] = arr[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newArr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤ï¼ˆæŒ‡å®šä½ç½®ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] delete(<span class="type">int</span>[] arr, <span class="type">int</span> pos) &#123;</span><br><span class="line">    <span class="type">int</span>[] newArr = <span class="keyword">new</span> <span class="title class_">int</span>[arr.length - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == pos) <span class="keyword">continue</span>;</span><br><span class="line">        newArr[j++] = arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newArr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åè½¬</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reverse</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = arr.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> arr[i]; arr[i] = arr[j]; arr[j] = tmp;</span><br><span class="line">        i++; j--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="2-é“¾è¡¨-Linked-List"><a href="#2-é“¾è¡¨-Linked-List" class="headerlink" title="2. é“¾è¡¨ (Linked List)"></a>2. é“¾è¡¨ (Linked List)</h1><p><strong>ç‰¹ç‚¹</strong>ï¼šåŠ¨æ€å­˜å‚¨ï¼Œæ’å…¥&#x2F;åˆ é™¤ O(1)ï¼Œéšæœºè®¿é—® O(n)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    ListNode next;</span><br><span class="line">    ListNode(<span class="type">int</span> val) &#123; <span class="built_in">this</span>.val = val; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> head; p != <span class="literal">null</span>; p = p.next)</span><br><span class="line">        System.out.print(p.val + <span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥ï¼ˆå¤´æ’ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title function_">insertHead</span><span class="params">(ListNode head, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">node</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(val);</span><br><span class="line">    node.next = head;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥ï¼ˆæŒ‡å®šèŠ‚ç‚¹åï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">insertAfter</span><span class="params">(ListNode node, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(val);</span><br><span class="line">    newNode.next = node.next;</span><br><span class="line">    node.next = newNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤ï¼ˆæŒ‰å€¼ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title function_">delete</span><span class="params">(ListNode head, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (head.val == target) <span class="keyword">return</span> head.next;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="keyword">while</span> (p.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p.next.val == target) &#123;</span><br><span class="line">            p.next = p.next.next; <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åè½¬</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title function_">reverse</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> <span class="literal">null</span>, curr = head;</span><br><span class="line">    <span class="keyword">while</span> (curr != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">next</span> <span class="operator">=</span> curr.next;</span><br><span class="line">        curr.next = prev;</span><br><span class="line">        prev = curr;</span><br><span class="line">        curr = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> prev;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="3-æ ˆ-Stack"><a href="#3-æ ˆ-Stack" class="headerlink" title="3. æ ˆ (Stack)"></a>3. æ ˆ (Stack)</h1><p><strong>ç‰¹ç‚¹</strong>ï¼šLIFOï¼Œå¸¸ç”¨æ•°ç»„æˆ–é“¾è¡¨å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyStack</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> val)</span> &#123; list.addLast(val); &#125; <span class="comment">// å…¥æ ˆ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123; <span class="keyword">return</span> list.removeLast(); &#125;   <span class="comment">// å‡ºæ ˆ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123; <span class="keyword">return</span> list.getLast(); &#125;     <span class="comment">// æŸ¥çœ‹æ ˆé¡¶</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123; <span class="keyword">return</span> list.isEmpty(); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="4-é˜Ÿåˆ—-Queue"><a href="#4-é˜Ÿåˆ—-Queue" class="headerlink" title="4. é˜Ÿåˆ— (Queue)"></a>4. é˜Ÿåˆ— (Queue)</h1><p><strong>ç‰¹ç‚¹</strong>ï¼šFIFOï¼Œå¯ä»¥ç”¨é“¾è¡¨æˆ–å¾ªç¯æ•°ç»„å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyQueue</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">enqueue</span><span class="params">(<span class="type">int</span> val)</span> &#123; list.addLast(val); &#125; <span class="comment">// å…¥é˜Ÿ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dequeue</span><span class="params">()</span> &#123; <span class="keyword">return</span> list.removeFirst(); &#125; <span class="comment">// å‡ºé˜Ÿ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123; <span class="keyword">return</span> list.getFirst(); &#125;       <span class="comment">// æŸ¥çœ‹é˜Ÿé¦–</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123; <span class="keyword">return</span> list.isEmpty(); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åŒç«¯é˜Ÿåˆ— Deque</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Deque&lt;Integer&gt; deque = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">deque.addFirst(<span class="number">1</span>); <span class="comment">// å¤´æ’</span></span><br><span class="line">deque.addLast(<span class="number">2</span>);  <span class="comment">// å°¾æ’</span></span><br><span class="line">deque.removeFirst();</span><br><span class="line">deque.removeLast();</span><br></pre></td></tr></table></figure><hr><h1 id="5-æ ‘-Tree"><a href="#5-æ ‘-Tree" class="headerlink" title="5. æ ‘ (Tree)"></a>5. æ ‘ (Tree)</h1><p>ä»¥ <strong>äºŒå‰æ ‘</strong> ä¸ºä¾‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    TreeNode left, right;</span><br><span class="line">    TreeNode(<span class="type">int</span> val) &#123; <span class="built_in">this</span>.val = val; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰åºéå† (æ ¹-å·¦-å³)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">preorder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    System.out.print(root.val + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    preorder(root.left);</span><br><span class="line">    preorder(root.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­åºéå† (å·¦-æ ¹-å³)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">inorder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    inorder(root.left);</span><br><span class="line">    System.out.print(root.val + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    inorder(root.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ååºéå† (å·¦-å³-æ ¹)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">postorder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    postorder(root.left);</span><br><span class="line">    postorder(root.right);</span><br><span class="line">    System.out.print(root.val + <span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å±‚åºéå† (BFS)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">levelOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    Queue&lt;TreeNode&gt; q = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    q.add(root);</span><br><span class="line">    <span class="keyword">while</span> (!q.isEmpty()) &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> q.poll();</span><br><span class="line">        System.out.print(node.val + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (node.left != <span class="literal">null</span>) q.add(node.left);</span><br><span class="line">        <span class="keyword">if</span> (node.right != <span class="literal">null</span>) q.add(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="6-å †-Heap"><a href="#6-å †-Heap" class="headerlink" title="6. å † (Heap)"></a>6. å † (Heap)</h1><p>å¸¸ç”¨ <strong>æœ€å°å † &#x2F; æœ€å¤§å †</strong>ï¼Œä¸€èˆ¬ç”¨æ•°ç»„å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.PriorityQueue;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€å°å †</span></span><br><span class="line">PriorityQueue&lt;Integer&gt; minHeap = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;();</span><br><span class="line">minHeap.add(<span class="number">3</span>);</span><br><span class="line">minHeap.add(<span class="number">1</span>);</span><br><span class="line">minHeap.add(<span class="number">5</span>);</span><br><span class="line">System.out.println(minHeap.poll()); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€å¤§å †</span></span><br><span class="line">PriorityQueue&lt;Integer&gt; maxHeap = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a, b) -&gt; b - a);</span><br><span class="line">maxHeap.add(<span class="number">3</span>);</span><br><span class="line">maxHeap.add(<span class="number">1</span>);</span><br><span class="line">maxHeap.add(<span class="number">5</span>);</span><br><span class="line">System.out.println(maxHeap.poll()); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><hr><h1 id="7-å›¾-Graph"><a href="#7-å›¾-Graph" class="headerlink" title="7. å›¾ (Graph)"></a>7. å›¾ (Graph)</h1><p>å¸¸è§è¡¨ç¤ºï¼š<strong>é‚»æ¥è¡¨</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Graph</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;Integer, List&lt;Integer&gt;&gt; adj = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addEdge</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span> &#123;</span><br><span class="line">        adj.computeIfAbsent(u, k -&gt; <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;()).add(v);</span><br><span class="line">        adj.computeIfAbsent(v, k -&gt; <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;()).add(u); <span class="comment">// æ— å‘å›¾</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// BFS éå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">bfs</span><span class="params">(<span class="type">int</span> start)</span> &#123;</span><br><span class="line">        Set&lt;Integer&gt; visited = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        Queue&lt;Integer&gt; q = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        q.add(start);</span><br><span class="line">        visited.add(start);</span><br><span class="line">        <span class="keyword">while</span> (!q.isEmpty()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">node</span> <span class="operator">=</span> q.poll();</span><br><span class="line">            System.out.print(node + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> nei : adj.getOrDefault(node, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;())) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!visited.contains(nei)) &#123;</span><br><span class="line">                    visited.add(nei);</span><br><span class="line">                    q.add(nei);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// DFS éå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> start)</span> &#123;</span><br><span class="line">        Set&lt;Integer&gt; visited = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        dfsHelper(start, visited);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfsHelper</span><span class="params">(<span class="type">int</span> node, Set&lt;Integer&gt; visited)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (visited.contains(node)) <span class="keyword">return</span>;</span><br><span class="line">        visited.add(node);</span><br><span class="line">        System.out.print(node + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> nei : adj.getOrDefault(node, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;())) &#123;</span><br><span class="line">            dfsHelper(nei, visited);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;h1 id=&quot;1-æ•°ç»„-Array&quot;&gt;&lt;a href=&quot;#1-æ•°ç»„-Array&quot; class=&quot;headerlink&quot; title=&quot;1. æ•°ç»„ (Array)&quot;&gt;&lt;/a&gt;1. æ•°ç»„ (Array)&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šè¿ç»­å†…å­˜ï¼Œéšæœº</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„" scheme="http://example.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="ç®—æ³•" scheme="http://example.com/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ•°æ®ç»“æ„" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>å‘½ä»¤å¤§å…¨</title>
    <link href="http://example.com/2025/09/11/%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/"/>
    <id>http://example.com/2025/09/11/%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/</id>
    <published>2025-09-11T10:29:28.000Z</published>
    <updated>2025-09-16T05:22:31.602Z</updated>
    
    <content type="html"><![CDATA[<hr><h1 id="ğŸ“Œ-ä¸€ã€Linux-å¸¸è§å‘½ä»¤å¤§å…¨"><a href="#ğŸ“Œ-ä¸€ã€Linux-å¸¸è§å‘½ä»¤å¤§å…¨" class="headerlink" title="ğŸ“Œ ä¸€ã€Linux å¸¸è§å‘½ä»¤å¤§å…¨"></a>ğŸ“Œ ä¸€ã€Linux å¸¸è§å‘½ä»¤å¤§å…¨</h1><h3 id="ğŸ”¹-æ–‡ä»¶ä¸ç›®å½•æ“ä½œ"><a href="#ğŸ”¹-æ–‡ä»¶ä¸ç›®å½•æ“ä½œ" class="headerlink" title="ğŸ”¹ æ–‡ä»¶ä¸ç›®å½•æ“ä½œ"></a>ğŸ”¹ æ–‡ä»¶ä¸ç›®å½•æ“ä½œ</h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>ls</code></td><td>åˆ—å‡ºç›®å½•å†…å®¹</td><td><code>ls -al</code> æ˜¾ç¤ºéšè—æ–‡ä»¶å’Œè¯¦ç»†ä¿¡æ¯</td></tr><tr><td><code>pwd</code></td><td>æ˜¾ç¤ºå½“å‰ç›®å½•</td><td><code>pwd</code></td></tr><tr><td><code>cd</code></td><td>åˆ‡æ¢ç›®å½•</td><td><code>cd /usr/local</code></td></tr><tr><td><code>mkdir</code></td><td>åˆ›å»ºç›®å½•</td><td><code>mkdir -p /data/logs</code></td></tr><tr><td><code>rmdir</code></td><td>åˆ é™¤ç©ºç›®å½•</td><td><code>rmdir old</code></td></tr><tr><td><code>rm</code></td><td>åˆ é™¤æ–‡ä»¶&#x2F;ç›®å½•</td><td><code>rm -rf /tmp/test</code></td></tr><tr><td><code>cp</code></td><td>å¤åˆ¶æ–‡ä»¶&#x2F;ç›®å½•</td><td><code>cp a.txt /tmp/</code>ï¼Œ<code>cp -r dir1 dir2</code></td></tr><tr><td><code>mv</code></td><td>ç§»åŠ¨&#x2F;é‡å‘½å</td><td><code>mv old.txt new.txt</code></td></tr><tr><td><code>find</code></td><td>æŸ¥æ‰¾æ–‡ä»¶</td><td><code>find / -name &quot;*.log&quot;</code></td></tr><tr><td><code>locate</code></td><td>å¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶ï¼ˆéœ€ <code>updatedb</code>ï¼‰</td><td><code>locate nginx.conf</code></td></tr></tbody></table><hr><h3 id="ğŸ”¹-æ–‡ä»¶æŸ¥çœ‹ä¸ç¼–è¾‘"><a href="#ğŸ”¹-æ–‡ä»¶æŸ¥çœ‹ä¸ç¼–è¾‘" class="headerlink" title="ğŸ”¹ æ–‡ä»¶æŸ¥çœ‹ä¸ç¼–è¾‘"></a>ğŸ”¹ æ–‡ä»¶æŸ¥çœ‹ä¸ç¼–è¾‘</h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>cat</code></td><td>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</td><td><code>cat file.txt</code></td></tr><tr><td><code>tac</code></td><td>åå‘è¾“å‡º</td><td><code>tac file.txt</code></td></tr><tr><td><code>less</code></td><td>åˆ†é¡µæŸ¥çœ‹</td><td><code>less /var/log/syslog</code></td></tr><tr><td><code>head</code></td><td>æŸ¥çœ‹å‰ N è¡Œ</td><td><code>head -n 20 file.log</code></td></tr><tr><td><code>tail</code></td><td>æŸ¥çœ‹æœ«å°¾ N è¡Œ</td><td><code>tail -f app.log</code> å®æ—¶è·Ÿè¸ª</td></tr><tr><td><code>wc</code></td><td>ç»Ÿè®¡è¡Œã€å­—æ•°ã€å­—ç¬¦æ•°</td><td><code>wc -l file.txt</code></td></tr><tr><td><code>nano/vim</code></td><td>ç¼–è¾‘æ–‡ä»¶</td><td><code>vim nginx.conf</code></td></tr></tbody></table><hr><h3 id="ğŸ”¹-ç”¨æˆ·ä¸æƒé™"><a href="#ğŸ”¹-ç”¨æˆ·ä¸æƒé™" class="headerlink" title="ğŸ”¹ ç”¨æˆ·ä¸æƒé™"></a>ğŸ”¹ ç”¨æˆ·ä¸æƒé™</h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>whoami</code></td><td>å½“å‰ç”¨æˆ·</td><td><code>whoami</code></td></tr><tr><td><code>id</code></td><td>ç”¨æˆ· ID å’Œç»„ ID</td><td><code>id root</code></td></tr><tr><td><code>useradd</code></td><td>æ–°å»ºç”¨æˆ·</td><td><code>useradd -m testuser</code></td></tr><tr><td><code>passwd</code></td><td>ä¿®æ”¹å¯†ç </td><td><code>passwd testuser</code></td></tr><tr><td><code>su</code></td><td>åˆ‡æ¢ç”¨æˆ·</td><td><code>su - testuser</code></td></tr><tr><td><code>sudo</code></td><td>ä»¥ root æƒé™æ‰§è¡Œ</td><td><code>sudo apt update</code></td></tr><tr><td><code>chmod</code></td><td>ä¿®æ”¹æƒé™</td><td><code>chmod 755 file.sh</code></td></tr><tr><td><code>chown</code></td><td>ä¿®æ”¹å±ä¸»</td><td><code>chown user:group file.txt</code></td></tr></tbody></table><hr><h3 id="ğŸ”¹-ç³»ç»Ÿç®¡ç†"><a href="#ğŸ”¹-ç³»ç»Ÿç®¡ç†" class="headerlink" title="ğŸ”¹ ç³»ç»Ÿç®¡ç†"></a>ğŸ”¹ ç³»ç»Ÿç®¡ç†</h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>ps</code></td><td>æŸ¥çœ‹è¿›ç¨‹</td><td>&#96;ps -ef</td></tr><tr><td><code>top</code></td><td>å®æ—¶æŸ¥çœ‹è¿›ç¨‹</td><td><code>top</code></td></tr><tr><td><code>htop</code></td><td>é«˜çº§ topï¼ˆéœ€å®‰è£…ï¼‰</td><td><code>htop</code></td></tr><tr><td><code>kill</code></td><td>æ€è¿›ç¨‹</td><td><code>kill -9 1234</code></td></tr><tr><td><code>df -h</code></td><td>æŸ¥çœ‹ç£ç›˜ä½¿ç”¨</td><td><code>df -h</code></td></tr><tr><td><code>du -sh</code></td><td>æŸ¥çœ‹ç›®å½•å¤§å°</td><td><code>du -sh /var/log</code></td></tr><tr><td><code>free -h</code></td><td>æŸ¥çœ‹å†…å­˜ä½¿ç”¨</td><td><code>free -h</code></td></tr><tr><td><code>uptime</code></td><td>ç³»ç»Ÿè¿è¡Œæ—¶é•¿</td><td><code>uptime</code></td></tr><tr><td><code>uname -a</code></td><td>ç³»ç»Ÿä¿¡æ¯</td><td><code>uname -a</code></td></tr><tr><td><code>shutdown -h now</code></td><td>ç«‹åˆ»å…³æœº</td><td><code>shutdown -r now</code> é‡å¯</td></tr></tbody></table><hr><h3 id="ğŸ”¹-ç½‘ç»œç›¸å…³"><a href="#ğŸ”¹-ç½‘ç»œç›¸å…³" class="headerlink" title="ğŸ”¹ ç½‘ç»œç›¸å…³"></a>ğŸ”¹ ç½‘ç»œç›¸å…³</h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>ping</code></td><td>æµ‹è¯•ç½‘ç»œè¿é€š</td><td><code>ping www.baidu.com</code></td></tr><tr><td><code>curl</code></td><td>è¯·æ±‚ URL</td><td><code>curl -I https://www.baidu.com</code></td></tr><tr><td><code>wget</code></td><td>ä¸‹è½½æ–‡ä»¶</td><td><code>wget http://example.com/file.zip</code></td></tr><tr><td><code>netstat -tulnp</code></td><td>æŸ¥çœ‹ç«¯å£å ç”¨</td><td>&#96;netstat -tulnp</td></tr><tr><td><code>ss -lntp</code></td><td>æ›´å¿«çš„ç«¯å£æŸ¥è¯¢</td><td><code>ss -lntp</code></td></tr><tr><td><code>scp</code></td><td>è¿œç¨‹æ‹·è´æ–‡ä»¶</td><td><code>scp file.txt user@host:/path/</code></td></tr><tr><td><code>ssh</code></td><td>ç™»å½•è¿œç¨‹ä¸»æœº</td><td><code>ssh user@192.168.1.1</code></td></tr></tbody></table><hr><h1 id="ğŸ“Œ-äºŒã€MySQL-å¸¸è§å‘½ä»¤å¤§å…¨"><a href="#ğŸ“Œ-äºŒã€MySQL-å¸¸è§å‘½ä»¤å¤§å…¨" class="headerlink" title="ğŸ“Œ äºŒã€MySQL å¸¸è§å‘½ä»¤å¤§å…¨"></a>ğŸ“Œ äºŒã€MySQL å¸¸è§å‘½ä»¤å¤§å…¨</h1><h3 id="ğŸ”¹-ç™»å½•ä¸åŸºæœ¬æ“ä½œ"><a href="#ğŸ”¹-ç™»å½•ä¸åŸºæœ¬æ“ä½œ" class="headerlink" title="ğŸ”¹ ç™»å½•ä¸åŸºæœ¬æ“ä½œ"></a>ğŸ”¹ ç™»å½•ä¸åŸºæœ¬æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p               <span class="comment"># ç™»å½• MySQL</span></span><br><span class="line">mysql -h 127.0.0.1 -P 3306 -u root -p   <span class="comment"># æŒ‡å®šåœ°å€ç«¯å£</span></span><br><span class="line"><span class="built_in">exit</span>;                          <span class="comment"># é€€å‡º</span></span><br></pre></td></tr></table></figure><h3 id="ğŸ”¹-æ•°æ®åº“æ“ä½œ"><a href="#ğŸ”¹-æ•°æ®åº“æ“ä½œ" class="headerlink" title="ğŸ”¹ æ•°æ®åº“æ“ä½œ"></a>ğŸ”¹ æ•°æ®åº“æ“ä½œ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> DATABASES;                <span class="comment">-- æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE testdb;        <span class="comment">-- åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE testdb;          <span class="comment">-- åˆ é™¤æ•°æ®åº“</span></span><br><span class="line">USE testdb;                    <span class="comment">-- åˆ‡æ¢æ•°æ®åº“</span></span><br></pre></td></tr></table></figure><h3 id="ğŸ”¹-è¡¨æ“ä½œ"><a href="#ğŸ”¹-è¡¨æ“ä½œ" class="headerlink" title="ğŸ”¹ è¡¨æ“ä½œ"></a>ğŸ”¹ è¡¨æ“ä½œ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TABLES;                               <span class="comment">-- æŸ¥çœ‹è¡¨</span></span><br><span class="line"><span class="keyword">DESCRIBE</span> users;                            <span class="comment">-- æŸ¥çœ‹è¡¨ç»“æ„</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> users (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    age <span class="type">INT</span></span><br><span class="line">);                                         <span class="comment">-- åˆ›å»ºè¡¨</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> users;                          <span class="comment">-- åˆ é™¤è¡¨</span></span><br><span class="line"><span class="keyword">ALTER TABLE</span> users <span class="keyword">ADD</span> email <span class="type">VARCHAR</span>(<span class="number">100</span>);  <span class="comment">-- å¢åŠ åˆ—</span></span><br><span class="line"><span class="keyword">ALTER TABLE</span> users <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> email;       <span class="comment">-- åˆ é™¤åˆ—</span></span><br></pre></td></tr></table></figure><h3 id="ğŸ”¹-æ•°æ®æ“ä½œ-CRUD"><a href="#ğŸ”¹-æ•°æ®æ“ä½œ-CRUD" class="headerlink" title="ğŸ”¹ æ•°æ®æ“ä½œ (CRUD)"></a>ğŸ”¹ æ•°æ®æ“ä½œ (CRUD)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> users(name, age) <span class="keyword">VALUES</span>(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">20</span>);  <span class="comment">-- æ’å…¥</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users;                             <span class="comment">-- æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">SELECT</span> name, age <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> age <span class="operator">&gt;</span> <span class="number">18</span>;      <span class="comment">-- æ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">UPDATE</span> users <span class="keyword">SET</span> age <span class="operator">=</span> <span class="number">25</span> <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;Tom&#x27;</span>;    <span class="comment">-- æ›´æ–°</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;Tom&#x27;</span>;            <span class="comment">-- åˆ é™¤</span></span><br></pre></td></tr></table></figure><h3 id="ğŸ”¹-ç”¨æˆ·ä¸æƒé™-1"><a href="#ğŸ”¹-ç”¨æˆ·ä¸æƒé™-1" class="headerlink" title="ğŸ”¹ ç”¨æˆ·ä¸æƒé™"></a>ğŸ”¹ ç”¨æˆ·ä¸æƒé™</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;test&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>;       <span class="comment">-- åˆ›å»ºç”¨æˆ·</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> testdb.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;test&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;      <span class="comment">-- æˆæƒ</span></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> testdb.<span class="operator">*</span> <span class="keyword">FROM</span> <span class="string">&#x27;test&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;   <span class="comment">-- å›æ”¶æƒé™</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">&#x27;test&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;                                <span class="comment">-- åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">FLUSH PRIVILEGES;                                    <span class="comment">-- åˆ·æ–°æƒé™</span></span><br></pre></td></tr></table></figure><h3 id="ğŸ”¹-å¤‡ä»½ä¸æ¢å¤"><a href="#ğŸ”¹-å¤‡ä»½ä¸æ¢å¤" class="headerlink" title="ğŸ”¹ å¤‡ä»½ä¸æ¢å¤"></a>ğŸ”¹ å¤‡ä»½ä¸æ¢å¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u root -p testdb &gt; testdb.sql     <span class="comment"># å¯¼å‡ºæ•°æ®åº“</span></span><br><span class="line">mysqldump -u root -p --all-databases &gt; all.sql</span><br><span class="line">mysql -u root -p testdb &lt; testdb.sql         <span class="comment"># å¯¼å…¥æ•°æ®åº“</span></span><br></pre></td></tr></table></figure><hr><h1 id="ğŸ“Œ-ä¸‰ã€Git-å¸¸è§å‘½ä»¤å¤§å…¨"><a href="#ğŸ“Œ-ä¸‰ã€Git-å¸¸è§å‘½ä»¤å¤§å…¨" class="headerlink" title="ğŸ“Œ ä¸‰ã€Git å¸¸è§å‘½ä»¤å¤§å…¨"></a>ğŸ“Œ ä¸‰ã€Git å¸¸è§å‘½ä»¤å¤§å…¨</h1><h3 id="ğŸ”¹-åŸºç¡€é…ç½®"><a href="#ğŸ”¹-åŸºç¡€é…ç½®" class="headerlink" title="ğŸ”¹ åŸºç¡€é…ç½®"></a>ğŸ”¹ åŸºç¡€é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;YourName&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;you@example.com&quot;</span></span><br><span class="line">git config --list       <span class="comment"># æŸ¥çœ‹é…ç½®</span></span><br></pre></td></tr></table></figure><h3 id="ğŸ”¹-ä»“åº“æ“ä½œ"><a href="#ğŸ”¹-ä»“åº“æ“ä½œ" class="headerlink" title="ğŸ”¹ ä»“åº“æ“ä½œ"></a>ğŸ”¹ ä»“åº“æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git init                          <span class="comment"># åˆå§‹åŒ–ä»“åº“</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/xxx.git  <span class="comment"># å…‹éš†ä»“åº“</span></span><br><span class="line">git remote -v                     <span class="comment"># æŸ¥çœ‹è¿œç¨‹ä»“åº“</span></span><br><span class="line">git remote add origin git@github.com:xxx.git  <span class="comment"># æ·»åŠ è¿œç¨‹ä»“åº“</span></span><br></pre></td></tr></table></figure><h3 id="ğŸ”¹-æ–‡ä»¶æ“ä½œ"><a href="#ğŸ”¹-æ–‡ä»¶æ“ä½œ" class="headerlink" title="ğŸ”¹ æ–‡ä»¶æ“ä½œ"></a>ğŸ”¹ æ–‡ä»¶æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git status        <span class="comment"># æŸ¥çœ‹çŠ¶æ€</span></span><br><span class="line">git add file.txt  <span class="comment"># æ·»åŠ æ–‡ä»¶</span></span><br><span class="line">git add .         <span class="comment"># æ·»åŠ æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">git commit -m <span class="string">&quot;æè¿°&quot;</span>   <span class="comment"># æäº¤</span></span><br><span class="line">git diff          <span class="comment"># æŸ¥çœ‹ä¿®æ”¹</span></span><br><span class="line">git <span class="built_in">log</span>           <span class="comment"># æŸ¥çœ‹æäº¤å†å²</span></span><br><span class="line">git reset --hard HEAD^   <span class="comment"># å›é€€ä¸Šä¸€ä¸ªç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure><h3 id="ğŸ”¹-åˆ†æ”¯æ“ä½œ"><a href="#ğŸ”¹-åˆ†æ”¯æ“ä½œ" class="headerlink" title="ğŸ”¹ åˆ†æ”¯æ“ä½œ"></a>ğŸ”¹ åˆ†æ”¯æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git branch                  <span class="comment"># æŸ¥çœ‹åˆ†æ”¯</span></span><br><span class="line">git branch new-feature      <span class="comment"># æ–°å»ºåˆ†æ”¯</span></span><br><span class="line">git checkout new-feature    <span class="comment"># åˆ‡æ¢åˆ†æ”¯</span></span><br><span class="line">git checkout -b dev         <span class="comment"># æ–°å»ºå¹¶åˆ‡æ¢</span></span><br><span class="line">git merge dev               <span class="comment"># åˆå¹¶åˆ†æ”¯</span></span><br><span class="line">git branch -d dev           <span class="comment"># åˆ é™¤åˆ†æ”¯</span></span><br></pre></td></tr></table></figure><h3 id="ğŸ”¹-è¿œç¨‹ä»“åº“"><a href="#ğŸ”¹-è¿œç¨‹ä»“åº“" class="headerlink" title="ğŸ”¹ è¿œç¨‹ä»“åº“"></a>ğŸ”¹ è¿œç¨‹ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git pull origin main        <span class="comment"># æ‹‰å–ä»£ç </span></span><br><span class="line">git push origin main        <span class="comment"># æ¨é€ä»£ç </span></span><br><span class="line">git push -u origin main     <span class="comment"># å…³è”è¿œç¨‹åˆ†æ”¯å¹¶æ¨é€</span></span><br><span class="line">git fetch origin            <span class="comment"># è·å–æœ€æ–°åˆ†æ”¯ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><h3 id="ğŸ”¹-æ ‡ç­¾ç®¡ç†"><a href="#ğŸ”¹-æ ‡ç­¾ç®¡ç†" class="headerlink" title="ğŸ”¹ æ ‡ç­¾ç®¡ç†"></a>ğŸ”¹ æ ‡ç­¾ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git tag v1.0                        <span class="comment"># æ‰“æ ‡ç­¾</span></span><br><span class="line">git tag                             <span class="comment"># æŸ¥çœ‹æ ‡ç­¾</span></span><br><span class="line">git push origin v1.0                <span class="comment"># æ¨é€æ ‡ç­¾</span></span><br><span class="line">git push origin --tags              <span class="comment"># æ¨é€æ‰€æœ‰æ ‡ç­¾</span></span><br><span class="line">git tag -d v1.0                     <span class="comment"># åˆ é™¤æœ¬åœ°æ ‡ç­¾</span></span><br><span class="line">git push origin :refs/tags/v1.0     <span class="comment"># åˆ é™¤è¿œç¨‹æ ‡ç­¾</span></span><br></pre></td></tr></table></figure><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;h1 id=&quot;ğŸ“Œ-ä¸€ã€Linux-å¸¸è§å‘½ä»¤å¤§å…¨&quot;&gt;&lt;a href=&quot;#ğŸ“Œ-ä¸€ã€Linux-å¸¸è§å‘½ä»¤å¤§å…¨&quot; class=&quot;headerlink&quot; title=&quot;ğŸ“Œ ä¸€ã€Linux å¸¸è§å‘½ä»¤å¤§å…¨&quot;&gt;&lt;/a&gt;ğŸ“Œ ä¸€ã€Linux å¸¸è§å‘½ä»¤å¤§å…¨&lt;/h1&gt;&lt;h3 id=&quot;</summary>
      
    
    
    
    <category term="å‘½ä»¤" scheme="http://example.com/categories/%E5%91%BD%E4%BB%A4/"/>
    
    
    <category term="Mysql" scheme="http://example.com/tags/Mysql/"/>
    
    <category term="Linux" scheme="http://example.com/tags/Linux/"/>
    
    <category term="Git" scheme="http://example.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>åˆ†å¸ƒå¼</title>
    <link href="http://example.com/2025/09/11/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
    <id>http://example.com/2025/09/11/%E5%88%86%E5%B8%83%E5%BC%8F/</id>
    <published>2025-09-11T10:29:28.000Z</published>
    <updated>2025-09-16T05:17:13.884Z</updated>
    
    <content type="html"><![CDATA[<h4 id="1-Spring-Cloud-ä½“ç³»"><a href="#1-Spring-Cloud-ä½“ç³»" class="headerlink" title="1. Spring Cloud ä½“ç³»"></a><strong>1. Spring Cloud ä½“ç³»</strong></h4><h5 id="æ ¸å¿ƒæ€æƒ³"><a href="#æ ¸å¿ƒæ€æƒ³" class="headerlink" title="æ ¸å¿ƒæ€æƒ³"></a><strong>æ ¸å¿ƒæ€æƒ³</strong></h5><p>Spring Cloud å¹¶éä¸€ä¸ªå…¨æ–°çš„æ¡†æ¶ï¼Œè€Œæ˜¯ä¸€å¥—ç”¨äºæ„å»ºå¾®æœåŠ¡æ¶æ„çš„<strong>è§„èŒƒå’Œè§£å†³æ–¹æ¡ˆçš„é›†åˆ</strong>ã€‚å®ƒå·§å¦™åœ°åˆ©ç”¨äº† Spring Boot çš„è‡ªåŠ¨é…ç½®å’Œå¿«é€Ÿå¼€å‘ç‰¹æ€§ï¼Œå°†ä¸šç•Œç»è¿‡å¹¿æ³›éªŒè¯çš„ä¼˜ç§€å¾®æœåŠ¡ç»„ä»¶ï¼ˆå¦‚ Netflix OSSã€Alibaba Nacosã€HashiCorp Consul ç­‰ï¼‰è¿›è¡Œå°è£…å’Œé›†æˆï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç«™å¼çš„åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘å·¥å…·ç®±ï¼Œæ¶µç›–äº†æœåŠ¡æ²»ç†ã€é…ç½®ç®¡ç†ã€ç†”æ–­é™çº§ã€æ™ºèƒ½è·¯ç”±ã€æœåŠ¡è°ƒç”¨ç­‰æ–¹æ–¹é¢é¢ã€‚</p><h5 id="Netflix-OSS-å¸¸ç”¨ç»„ä»¶ï¼ˆéƒ¨åˆ†è¿›å…¥ç»´æŠ¤æ¨¡å¼ï¼‰"><a href="#Netflix-OSS-å¸¸ç”¨ç»„ä»¶ï¼ˆéƒ¨åˆ†è¿›å…¥ç»´æŠ¤æ¨¡å¼ï¼‰" class="headerlink" title="Netflix OSS å¸¸ç”¨ç»„ä»¶ï¼ˆéƒ¨åˆ†è¿›å…¥ç»´æŠ¤æ¨¡å¼ï¼‰"></a><strong>Netflix OSS å¸¸ç”¨ç»„ä»¶ï¼ˆéƒ¨åˆ†è¿›å…¥ç»´æŠ¤æ¨¡å¼ï¼‰</strong></h5><ul><li><strong>æœåŠ¡æ³¨å†Œä¸å‘ç° (Service Discovery): Eureka</strong><ul><li><strong>ä½œç”¨</strong>: æä¾›ä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚æ¯ä¸ªå¾®æœåŠ¡å¯åŠ¨æ—¶ï¼Œå°†è‡ªå·±çš„ç½‘ç»œåœ°å€ç­‰ä¿¡æ¯â€œæ³¨å†Œâ€åˆ° Eureka Serverã€‚å…¶ä»–æœåŠ¡ï¼ˆæ¶ˆè´¹è€…ï¼‰åˆ™ä» Eureka Server â€œå‘ç°â€å¹¶æ‹‰å–æ‰€éœ€æœåŠ¡æä¾›è€…çš„åœ°å€åˆ—è¡¨ï¼Œä»è€Œå®ç°æœåŠ¡é—´çš„åŠ¨æ€å¯»å€å’Œè°ƒç”¨ã€‚</li><li><strong>ä½¿ç”¨</strong>: æœåŠ¡ç«¯æ·»åŠ  <code>spring-cloud-starter-netflix-eureka-server</code> ä¾èµ–ï¼Œå¹¶ä½¿ç”¨ <code>@EnableEurekaServer</code> æ³¨è§£ã€‚å®¢æˆ·ç«¯æ·»åŠ  <code>spring-cloud-starter-netflix-eureka-client</code> ä¾èµ–ï¼Œå¹¶é…ç½® Eureka Server åœ°å€ã€‚</li></ul></li><li><strong>æœåŠ¡è°ƒç”¨ä¸è´Ÿè½½å‡è¡¡ (RPC &amp; Load Balancing): OpenFeign + Ribbon</strong><ul><li><strong>ä½œç”¨</strong>: Feign è®©è¿œç¨‹æœåŠ¡è°ƒç”¨å˜å¾—åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ç®€å•ã€‚å¼€å‘è€…åªéœ€å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œå¹¶ä½¿ç”¨ <code>@FeignClient</code> æ³¨è§£ï¼Œå³å¯å®Œæˆå¯¹è¿œç¨‹æœåŠ¡çš„è°ƒç”¨ã€‚Ribbonï¼ˆç°å·²è¢« Spring Cloud LoadBalancer æ›¿ä»£ï¼‰åˆ™æä¾›äº†å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡èƒ½åŠ›ï¼Œå½“ä» Eureka è·å–åˆ°å¤šä¸ªæœåŠ¡å®ä¾‹åœ°å€æ—¶ï¼ŒRibbon ä¼šæ ¹æ®é…ç½®çš„ç­–ç•¥ï¼ˆå¦‚è½®è¯¢ã€éšæœºï¼‰é€‰æ‹©ä¸€ä¸ªå®ä¾‹è¿›è¡Œè°ƒç”¨ã€‚</li><li><strong>ä½¿ç”¨</strong>: æ·»åŠ  <code>spring-cloud-starter-openfeign</code> ä¾èµ–ï¼Œåœ¨å¯åŠ¨ç±»ä¸ŠåŠ  <code>@EnableFeignClients</code>ï¼Œåˆ›å»ºæ¥å£å¹¶ä½¿ç”¨ <code>@FeignClient(&quot;service-name&quot;)</code> æ³¨è§£ã€‚</li></ul></li><li><strong>ç†”æ–­ä¸é™çº§ (Circuit Breaker): Hystrix</strong><ul><li><strong>ä½œç”¨</strong>: å½“æŸä¸ªä¸‹æ¸¸æœåŠ¡å‡ºç°æ•…éšœæˆ–å“åº”ç¼“æ…¢æ—¶ï¼Œä¸ºäº†é˜²æ­¢æ•…éšœåœ¨ç³»ç»Ÿä¸­è”“å»¶ï¼ˆå³â€œæœåŠ¡é›ªå´©â€ï¼‰ï¼Œç†”æ–­å™¨ä¼šå¿«é€Ÿå¤±è´¥ï¼Œæš‚æ—¶åˆ‡æ–­å¯¹è¯¥æœåŠ¡çš„è°ƒç”¨ã€‚åŒæ—¶ï¼Œå¯ä»¥æ‰§è¡Œä¸€ä¸ªé¢„å®šä¹‰çš„é™çº§é€»è¾‘ï¼ˆFallbackï¼‰ï¼Œä¾‹å¦‚è¿”å›ä¸€ä¸ªç¼“å­˜çš„ã€é»˜è®¤çš„æˆ–å‹å¥½çš„æç¤ºä¿¡æ¯ã€‚</li><li><strong>çŠ¶æ€</strong>: Hystrix å·²è¿›å…¥ç»´æŠ¤æ¨¡å¼ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ Resilience4j æˆ–å…¶ä»–æ›¿ä»£æ–¹æ¡ˆã€‚</li></ul></li><li><strong>API ç½‘å…³ (API Gateway): Zuul</strong><ul><li><strong>ä½œç”¨</strong>: ä½œä¸ºç³»ç»Ÿçš„ç»Ÿä¸€å…¥å£ï¼ŒAPI ç½‘å…³è´Ÿè´£è¯·æ±‚è·¯ç”±ã€åè®®è½¬æ¢ã€æƒé™æ ¡éªŒã€æµé‡æ§åˆ¶ã€æ—¥å¿—ç›‘æ§ç­‰ã€‚æ‰€æœ‰å¤–éƒ¨è¯·æ±‚éƒ½å…ˆç»è¿‡ç½‘å…³ï¼Œå†ç”±ç½‘å…³åˆ†å‘åˆ°åç«¯çš„å„ä¸ªå¾®æœåŠ¡ã€‚</li><li><strong>çŠ¶æ€</strong>: Zuul 1.x å·²è¿›å…¥ç»´æŠ¤æ¨¡å¼ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ Spring Cloud Gatewayã€‚</li></ul></li></ul><hr><h5 id="Spring-Cloud-Alibaba-è¯¦è§£"><a href="#Spring-Cloud-Alibaba-è¯¦è§£" class="headerlink" title="Spring Cloud Alibaba è¯¦è§£"></a><strong>Spring Cloud Alibaba è¯¦è§£</strong></h5><p>Spring Cloud Alibaba è‡´åŠ›äºæä¾›å¾®æœåŠ¡å¼€å‘çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œæ˜¯ Spring Cloud ä½“ç³»çš„é‡è¦å®ç°ã€‚å®ƒé›†æˆäº†é˜¿é‡Œå·´å·´å¼€æºçš„ä¼˜ç§€ç»„ä»¶ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ›´ç¬¦åˆå›½å†…æŠ€æœ¯ç”Ÿæ€çš„é€‰æ‹©ã€‚</p><ul><li><strong>æœåŠ¡æ³¨å†Œä¸å‘ç° &amp; åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ: Nacos</strong><ul><li><strong>ä½œç”¨</strong>: Nacos (Naming and Configuration Service) æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„å¹³å°ï¼Œå®Œç¾æ•´åˆäº†<strong>æœåŠ¡æ³¨å†Œå‘ç°</strong>å’Œ<strong>é…ç½®ç®¡ç†</strong>ä¸¤å¤§æ ¸å¿ƒåŠŸèƒ½ã€‚<ul><li><strong>æœåŠ¡å‘ç°</strong>: ä¸ Eureka ç±»ä¼¼ï¼Œæä¾›æœåŠ¡æ³¨å†Œã€å‘ç°å’Œå¥åº·æ£€æŸ¥ã€‚ä½† Nacos æ”¯æŒåŸºäº DNS å’Œ RPC çš„æœåŠ¡å‘ç°ï¼Œå¹¶æä¾›æ›´å®æ—¶çš„å¥åº·æ£€æŸ¥æœºåˆ¶ã€‚</li><li><strong>é…ç½®ç®¡ç†</strong>: å¯ä»¥ä½œä¸ºåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒï¼Œå¯¹æ‰€æœ‰å¾®æœåŠ¡çš„é…ç½®è¿›è¡Œé›†ä¸­åŒ–ç®¡ç†ã€‚æ”¯æŒé…ç½®çš„çƒ­æ›´æ–°ï¼Œå³ä¿®æ”¹é…ç½®åæ— éœ€é‡å¯æœåŠ¡å³å¯ç”Ÿæ•ˆã€‚è¿˜æ”¯æŒé…ç½®çš„ç‰ˆæœ¬ç®¡ç†ã€ç°åº¦å‘å¸ƒç­‰é«˜çº§åŠŸèƒ½ã€‚</li></ul></li><li><strong>ä½¿ç”¨</strong>:<ol><li>å¼•å…¥ <code>spring-cloud-starter-alibaba-nacos-discovery</code> å’Œ <code>spring-cloud-starter-alibaba-nacos-config</code> ä¾èµ–ã€‚</li><li>åœ¨ <code>bootstrap.properties</code> (æˆ– <code>.yml</code>) æ–‡ä»¶ä¸­é…ç½® Nacos æœåŠ¡å™¨åœ°å€å’Œåº”ç”¨åã€‚</li><li>ä½¿ç”¨ <code>@Value</code> æˆ– <code>@ConfigurationProperties</code> æ³¨è§£å³å¯åŠ¨æ€è·å–å’Œåˆ·æ–°é…ç½®ã€‚</li></ol></li></ul></li><li><strong>ç†”æ–­ã€é™çº§ä¸æµé‡æ§åˆ¶: Sentinel</strong><ul><li><strong>ä½œç”¨</strong>: Sentinel æ˜¯é¢å‘åˆ†å¸ƒå¼æœåŠ¡æ¶æ„çš„â€œæµé‡çš„å®ˆæŠ¤è€…â€ï¼Œä»¥æµé‡ä¸ºåˆ‡å…¥ç‚¹ï¼Œä»<strong>æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤</strong>ç­‰å¤šä¸ªç»´åº¦ä¿æŠ¤æœåŠ¡çš„ç¨³å®šæ€§ã€‚ç›¸è¾ƒäº Hystrixï¼ŒSentinel åŠŸèƒ½æ›´å¼ºå¤§ï¼Œæä¾›äº†å¯è§†åŒ–çš„ç›‘æ§å’Œé…ç½®å¹³å°ï¼Œå¹¶ä¸”æ”¯æŒçƒ­ç‚¹å‚æ•°é™æµç­‰ç²¾ç»†åŒ–æ§åˆ¶ã€‚</li><li><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>:<ul><li><strong>èµ„æº (Resource)</strong>: Sentinel ä¸­ä¸€åˆ‡çš†èµ„æºï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•ã€ä¸€æ®µä»£ç æˆ–ä¸€ä¸ªæœåŠ¡ URLã€‚</li><li><strong>è§„åˆ™ (Rule)</strong>: å®šä¹‰å¦‚ä½•ä¿æŠ¤èµ„æºï¼ŒåŒ…æ‹¬æµæ§è§„åˆ™ã€é™çº§è§„åˆ™ã€ç³»ç»Ÿä¿æŠ¤è§„åˆ™ç­‰ã€‚</li></ul></li><li><strong>ä½¿ç”¨</strong>:<ol><li>å¼•å…¥ <code>spring-cloud-starter-alibaba-sentinel</code> ä¾èµ–ã€‚</li><li>é…ç½® Sentinel æ§åˆ¶å°åœ°å€ã€‚</li><li>é€šè¿‡ <code>@SentinelResource</code> æ³¨è§£æ¥å®šä¹‰èµ„æºï¼Œå¹¶æŒ‡å®š Fallback (é™çº§é€»è¾‘) å’Œ BlockHandler (æµæ§&#x2F;ç†”æ–­é€»è¾‘)ã€‚</li></ol></li></ul></li><li><strong>åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ: Seata</strong><ul><li><strong>ä½œç”¨</strong>: Seata æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œæä¾›äº†é«˜æ€§èƒ½ä¸”æ˜“äºä½¿ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡æœåŠ¡ã€‚å®ƒæ”¯æŒå¤šç§äº‹åŠ¡æ¨¡å¼ï¼ŒåŒ…æ‹¬ ATï¼ˆè‡ªåŠ¨è¡¥å¿ï¼‰ã€TCCã€Saga å’Œ XA æ¨¡å¼ï¼Œæ—¨åœ¨è§£å†³å¾®æœåŠ¡æ¶æ„ä¸‹çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚</li><li><strong>ä½¿ç”¨</strong>: å¼•å…¥ <code>spring-cloud-starter-alibaba-seata</code> ä¾èµ–ï¼Œé…ç½® Seata Server åœ°å€ï¼Œå¹¶ä½¿ç”¨ <code>@GlobalTransactional</code> æ³¨è§£å¼€å¯å…¨å±€äº‹åŠ¡ã€‚</li></ul></li></ul><hr><h4 id="2-åˆ†å¸ƒå¼IDï¼šé›ªèŠ±ç®—æ³•ï¼ˆSnowflakeï¼‰"><a href="#2-åˆ†å¸ƒå¼IDï¼šé›ªèŠ±ç®—æ³•ï¼ˆSnowflakeï¼‰" class="headerlink" title="2. åˆ†å¸ƒå¼IDï¼šé›ªèŠ±ç®—æ³•ï¼ˆSnowflakeï¼‰"></a><strong>2. åˆ†å¸ƒå¼IDï¼šé›ªèŠ±ç®—æ³•ï¼ˆSnowflakeï¼‰</strong></h4><h5 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a><strong>åŸç†</strong></h5><p>Snowflake æ˜¯ Twitter å¼€æºçš„ä¸€ç§åˆ†å¸ƒå¼ ID ç”Ÿæˆç®—æ³•ï¼Œå®ƒèƒ½ç”Ÿæˆä¸€ä¸ª 64 ä½çš„ <code>long</code> å‹æ•°å­—ä½œä¸ºå…¨å±€å”¯ä¸€ IDã€‚è¿™ä¸ª 64 ä½çš„ ID ç”±å››éƒ¨åˆ†æ„æˆï¼š</p><ul><li><strong>1ä½ç¬¦å·ä½</strong>: æœ€é«˜ä½ï¼Œå›ºå®šä¸º0ï¼Œè¡¨ç¤ºæ­£æ•°ï¼Œæ— å®é™…æ„ä¹‰ã€‚</li><li><strong>41ä½æ—¶é—´æˆ³ (Timestamp)</strong>: ç²¾ç¡®åˆ°æ¯«ç§’çº§ï¼Œæ˜¯ <code>(å½“å‰æ—¶é—´æˆ³ - èµ·å§‹æ—¶é—´æˆ³)</code> çš„å·®å€¼ã€‚41ä½å¯ä»¥è¡¨ç¤º (241âˆ’1) æ¯«ç§’ï¼Œå¤§çº¦å¯ä»¥ä½¿ç”¨ 69 å¹´ã€‚</li><li><strong>10ä½å·¥ä½œæœºå™¨ID (Worker ID)</strong>: è¿™ 10 ä½å¯ä»¥è¢«çµæ´»åˆ’åˆ†ï¼Œä¾‹å¦‚å‰ 5 ä½ä»£è¡¨æ•°æ®ä¸­å¿ƒ ID (Datacenter ID)ï¼Œå 5 ä½ä»£è¡¨æœºå™¨ ID (Machine ID)ã€‚è¿™æ ·æ€»å…±å¯ä»¥æ”¯æŒ 210&#x3D;1024 å°æœºå™¨ã€‚</li><li><strong>12ä½åºåˆ—å· (Sequence)</strong>: è¡¨ç¤ºåœ¨åŒä¸€æ¯«ç§’å†…ï¼ŒåŒä¸€å°æœºå™¨ä¸Šç”Ÿæˆçš„ ID åºåˆ—å·ã€‚12ä½æ„å‘³ç€æ¯å°æœºå™¨æ¯æ¯«ç§’å¯ä»¥ç”Ÿæˆ 212&#x3D;4096 ä¸ªä¸åŒçš„ IDã€‚</li></ul><h5 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a><strong>ä¼˜ç‚¹</strong></h5><ul><li><strong>å…¨å±€å”¯ä¸€</strong>: é€šè¿‡æ—¶é—´æˆ³ã€æœºå™¨ ID å’Œåºåˆ—å·çš„ç»„åˆï¼Œå¯ä»¥ä¿è¯åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„ ID å”¯ä¸€æ€§ã€‚</li><li><strong>è¶‹åŠ¿é€’å¢</strong>: ç”±äºæ—¶é—´æˆ³åœ¨é«˜ä½ï¼Œæ‰€ä»¥ç”Ÿæˆçš„ ID æ•´ä½“ä¸Šæ˜¯æŒ‰æ—¶é—´è¶‹åŠ¿é€’å¢çš„ï¼Œè¿™å¯¹äºæ•°æ®åº“ç´¢å¼•ï¼ˆç‰¹åˆ«æ˜¯ B+æ ‘ï¼‰éå¸¸å‹å¥½ï¼Œå¯ä»¥å‡å°‘é¡µåˆ†è£‚ï¼Œæé«˜æ’å…¥æ€§èƒ½ã€‚</li><li><strong>é«˜æ€§èƒ½</strong>: ID åœ¨æœ¬åœ°ç”Ÿæˆï¼Œä¸ä¾èµ–ä»»ä½•å¤–éƒ¨æœåŠ¡ï¼ˆå¦‚æ•°æ®åº“æˆ– Redisï¼‰ï¼Œç”Ÿæˆæ•ˆç‡æé«˜ã€‚</li><li><strong>é«˜å¯ç”¨</strong>: ç®—æ³•æœ¬èº«ä¸ä¾èµ–ç½‘ç»œï¼Œéƒ¨ç½²ç®€å•ï¼Œå…·æœ‰å¾ˆé«˜çš„å¯ç”¨æ€§ã€‚</li></ul><h5 id="é¢è¯•é¢˜ï¼šâ€œé›ªèŠ±ç®—æ³•æœ‰æ—¶é’Ÿå›æ‹¨é—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Ÿâ€"><a href="#é¢è¯•é¢˜ï¼šâ€œé›ªèŠ±ç®—æ³•æœ‰æ—¶é’Ÿå›æ‹¨é—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Ÿâ€" class="headerlink" title="é¢è¯•é¢˜ï¼šâ€œé›ªèŠ±ç®—æ³•æœ‰æ—¶é’Ÿå›æ‹¨é—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Ÿâ€"></a><strong>é¢è¯•é¢˜ï¼šâ€œé›ªèŠ±ç®—æ³•æœ‰æ—¶é’Ÿå›æ‹¨é—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Ÿâ€</strong></h5><p>å›ç­”è¦ç‚¹:</p><p>æ—¶é’Ÿå›æ‹¨æ˜¯æŒ‡æœåŠ¡å™¨æ—¶é—´è¢«åŒæ­¥åˆ°ä¸€ä¸ªè¿‡å»çš„æ—¶é—´ç‚¹ã€‚å¦‚æœç®—æ³•ä¸åšå¤„ç†ï¼Œå¯èƒ½ä¼šç”Ÿæˆé‡å¤çš„ IDã€‚è§£å†³æ–¹æ¡ˆé€šå¸¸æ˜¯ï¼šåœ¨ç”Ÿæˆ ID æ—¶ï¼Œè®°å½•ä¸Šä¸€æ¬¡ç”Ÿæˆ ID æ—¶æ‰€ä½¿ç”¨çš„æ—¶é—´æˆ³ã€‚å½“å‘ç°å½“å‰æ—¶é—´æˆ³å°äºä¸Šæ¬¡è®°å½•çš„æ—¶é—´æˆ³æ—¶ï¼Œå°±æ„å‘³ç€å‘ç”Ÿäº†æ—¶é’Ÿå›æ‹¨ã€‚</p><ul><li><strong>æ–¹æ¡ˆä¸€ï¼ˆæ‹’ç»æœåŠ¡ï¼‰</strong>: ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œæ‹’ç»ç”Ÿæˆ IDï¼Œç­‰å¾…æ—¶é’Ÿæ¢å¤æ­£å¸¸ã€‚è¿™ç§æ–¹æ¡ˆç®€å•ï¼Œä½†ä¼šæš‚æ—¶å½±å“å¯ç”¨æ€§ï¼Œé€‚åˆå¯¹ ID è¿ç»­æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯ã€‚</li><li><strong>æ–¹æ¡ˆäºŒï¼ˆç­‰å¾…è¿½èµ¶ï¼‰</strong>: å¦‚æœå›æ‹¨å¹…åº¦å¾ˆå°ï¼ˆæ¯”å¦‚å‡ æ¯«ç§’ï¼‰ï¼Œç¨‹åºå¯ä»¥ <code>while(currentTime &lt; lastTimestamp)</code> è¿™æ ·è‡ªæ—‹ç­‰å¾…ï¼Œç›´åˆ°å½“å‰æ—¶é—´è¿½èµ¶ä¸Šä¸Šæ¬¡çš„æ—¶é—´æˆ³ã€‚è¿™ä¼šé€ æˆçŸ­æš‚çš„çº¿ç¨‹é˜»å¡ã€‚</li><li><strong>æ–¹æ¡ˆä¸‰ï¼ˆä½¿ç”¨å¤‡ç”¨ä½ï¼‰</strong>: ä¸€äº›æ”¹è¿›ç‰ˆçš„é›ªèŠ±ç®—æ³•ä¼šé¢„ç•™å‡ ä½ä½œä¸ºæ‰©å±•ä½ï¼Œå½“å‘ç”Ÿæ—¶é’Ÿå›æ‹¨æ—¶ï¼Œåœ¨è¿™å‡ ä½ä¸Šåšè‡ªå¢ï¼Œä»è€Œåœ¨çŸ­æ—¶é—´å›æ‹¨å†…ä»èƒ½ç”Ÿæˆä¸åŒçš„ IDã€‚ï¼ˆè¿™ç§æ–¹æ¡ˆå®ç°è¾ƒä¸ºå¤æ‚ï¼‰</li><li><strong>ä¸šç•Œå®è·µï¼ˆç¾å›¢ Leafï¼‰</strong>: åœ¨å‘ç”Ÿæ—¶é’Ÿå›æ‹¨æ—¶ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ç§å¤‡ç”¨ ID ç”Ÿæˆç­–ç•¥ï¼ˆå¦‚å·æ®µæ¨¡å¼ï¼‰ï¼Œæˆ–è€…ç›´æ¥æŠ¥é”™ã€‚</li></ul><hr><h4 id="3-RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰"><a href="#3-RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰" class="headerlink" title="3. RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰"></a><strong>3. RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰</strong></h4><h5 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†"></a><strong>åŸç†</strong></h5><p>RBAC (Role-Based Access Control) æ˜¯ä¸€ç§ä¸»æµä¸”çµæ´»çš„æƒé™ç®¡ç†æ¨¡å‹ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯åœ¨ <strong>ç”¨æˆ· (User)</strong> å’Œ <strong>æƒé™ (Permission)</strong> ä¹‹é—´å¼•å…¥ä¸€ä¸ªä¸­é—´å±‚â€”â€”<strong>è§’è‰² (Role)</strong>ã€‚æƒé™ä¸å†ç›´æ¥æˆäºˆç”¨æˆ·ï¼Œè€Œæ˜¯æˆäºˆè§’è‰²ï¼›ç„¶åå°†è§’è‰²åˆ†é…ç»™ç”¨æˆ·ã€‚è¿™æ ·ï¼Œç”¨æˆ·ä¸æƒé™å®ç°äº†è§£è€¦ï¼Œå½“éœ€è¦ä¿®æ”¹å¤§é‡ç”¨æˆ·çš„æƒé™æ—¶ï¼Œåªéœ€ä¿®æ”¹ä»–ä»¬å…±åŒæ‹¥æœ‰çš„è§’è‰²çš„æƒé™å³å¯ï¼Œæå¤§åœ°ç®€åŒ–äº†æƒé™ç®¡ç†å’Œç»´æŠ¤ã€‚</p><h5 id="æ ¸å¿ƒä¸‰è¦ç´ "><a href="#æ ¸å¿ƒä¸‰è¦ç´ " class="headerlink" title="æ ¸å¿ƒä¸‰è¦ç´ "></a><strong>æ ¸å¿ƒä¸‰è¦ç´ </strong></h5><ul><li><strong>ç”¨æˆ· (User)</strong>: ç³»ç»Ÿæ“ä½œçš„ä¸»ä½“ã€‚</li><li><strong>è§’è‰² (Role)</strong>: æƒé™çš„é›†åˆï¼Œä»£è¡¨äº†ä¸€ç»„ç‰¹å®šçš„èŒè´£æˆ–èº«ä»½ï¼Œå¦‚â€œç®¡ç†å‘˜â€ã€â€œæ–‡ç« ç¼–è¾‘â€ã€â€œæ™®é€šä¼šå‘˜â€ã€‚</li><li><strong>æƒé™ (Permission)</strong>: å¯¹ç³»ç»Ÿä¸­ç‰¹å®šèµ„æºè¿›è¡Œç‰¹å®šæ“ä½œçš„è®¸å¯ã€‚é€šå¸¸ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºï¼Œå¦‚ <code>user:create</code>ã€<code>order:delete</code>ã€<code>article:publish</code>ã€‚</li></ul><h5 id="é¢è¯•é¢˜ï¼šâ€œè¯·è®¾è®¡ä¸€ä¸ª-RBAC-æƒé™ç®¡ç†ç³»ç»Ÿçš„æ•°æ®åº“è¡¨ç»“æ„ã€‚â€"><a href="#é¢è¯•é¢˜ï¼šâ€œè¯·è®¾è®¡ä¸€ä¸ª-RBAC-æƒé™ç®¡ç†ç³»ç»Ÿçš„æ•°æ®åº“è¡¨ç»“æ„ã€‚â€" class="headerlink" title="é¢è¯•é¢˜ï¼šâ€œè¯·è®¾è®¡ä¸€ä¸ª RBAC æƒé™ç®¡ç†ç³»ç»Ÿçš„æ•°æ®åº“è¡¨ç»“æ„ã€‚â€"></a><strong>é¢è¯•é¢˜ï¼šâ€œè¯·è®¾è®¡ä¸€ä¸ª RBAC æƒé™ç®¡ç†ç³»ç»Ÿçš„æ•°æ®åº“è¡¨ç»“æ„ã€‚â€</strong></h5><p>å›ç­”è¦ç‚¹:</p><p>ä¸€ä¸ªåŸºç¡€çš„ RBAC æ¨¡å‹è‡³å°‘éœ€è¦äº”å¼ è¡¨ï¼š</p><ul><li><strong>ç”¨æˆ·è¡¨ (t_user)</strong>: å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€‚<ul><li><code>user_id</code> (ä¸»é”®), <code>username</code>, <code>password</code>, â€¦</li></ul></li><li><strong>è§’è‰²è¡¨ (t_role)</strong>: å­˜å‚¨è§’è‰²ä¿¡æ¯ã€‚<ul><li><code>role_id</code> (ä¸»é”®), <code>role_name</code> (è§’è‰²å, å¦‚â€ç®¡ç†å‘˜â€), <code>role_key</code> (è§’è‰²æ ‡è¯†, å¦‚â€adminâ€), â€¦</li></ul></li><li><strong>æƒé™è¡¨ (t_permission)</strong>: å­˜å‚¨å…·ä½“çš„æƒé™ç‚¹ä¿¡æ¯ã€‚<ul><li><code>permission_id</code> (ä¸»é”®), <code>permission_name</code> (æƒé™åç§°, å¦‚â€œæ–°å¢ç”¨æˆ·â€), <code>permission_code</code> (æƒé™æ ‡è¯†, å¦‚ <code>user:add</code>), <code>parent_id</code> (ç”¨äºèœå•å±‚çº§), â€¦</li></ul></li><li><strong>ç”¨æˆ·-è§’è‰²å…³è”è¡¨ (t_user_role)</strong>: å­˜å‚¨ç”¨æˆ·å’Œè§’è‰²çš„å¤šå¯¹å¤šå…³ç³»ã€‚<ul><li><code>user_id</code> (å¤–é”®), <code>role_id</code> (å¤–é”®)ã€‚(ä¸»é”®æ˜¯ <code>user_id</code> å’Œ <code>role_id</code> çš„è”åˆä¸»é”®)</li></ul></li><li><strong>è§’è‰²-æƒé™å…³è”è¡¨ (t_role_permission)</strong>: å­˜å‚¨è§’è‰²å’Œæƒé™çš„å¤šå¯¹å¤šå…³ç³»ã€‚<ul><li><code>role_id</code> (å¤–é”®), <code>permission_id</code> (å¤–é”®)ã€‚(ä¸»é”®æ˜¯ <code>role_id</code> å’Œ <code>permission_id</code> çš„è”åˆä¸»é”®)</li></ul></li></ul><hr><h4 id="4-Redis-è¿›é˜¶è¯¦è§£"><a href="#4-Redis-è¿›é˜¶è¯¦è§£" class="headerlink" title="4. Redis è¿›é˜¶è¯¦è§£"></a><strong>4. Redis è¿›é˜¶è¯¦è§£</strong></h4><h5 id="æ ¸å¿ƒç‰¹ç‚¹"><a href="#æ ¸å¿ƒç‰¹ç‚¹" class="headerlink" title="æ ¸å¿ƒç‰¹ç‚¹"></a><strong>æ ¸å¿ƒç‰¹ç‚¹</strong></h5><ul><li><strong>åŸºäºå†…å­˜</strong>: Redis æ˜¯ä¸€ä¸ªå†…å­˜æ•°æ®ç»“æ„å­˜å‚¨ç³»ç»Ÿï¼Œæ‰€æœ‰æ•°æ®éƒ½å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤è¯»å†™é€Ÿåº¦æå¿«ã€‚</li><li><strong>å•çº¿ç¨‹æ¨¡å‹</strong>: Redis çš„æ ¸å¿ƒç½‘ç»œæ¨¡å‹å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚æ˜¯å•çº¿ç¨‹çš„ã€‚è¿™é¿å…äº†å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œé”ç«äº‰å¸¦æ¥çš„å¼€é”€ã€‚ï¼ˆæ³¨æ„ï¼šRedis 6.0 ä¹‹åå¼•å…¥äº†å¤šçº¿ç¨‹æ¥å¤„ç† I&#x2F;Oï¼Œä½†æ‰§è¡Œå‘½ä»¤çš„æ ¸å¿ƒä»ç„¶æ˜¯å•çº¿ç¨‹ï¼‰ã€‚</li><li><strong>IOå¤šè·¯å¤ç”¨</strong>: å•çº¿ç¨‹èƒ½å®ç°é«˜æ€§èƒ½çš„å…³é”®åœ¨äºå®ƒä½¿ç”¨äº† IO å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼ˆå¦‚ Linux ä¸‹çš„ epollï¼‰ã€‚è¯¥æŠ€æœ¯å…è®¸å•ä¸ªçº¿ç¨‹åŒæ—¶ç›‘å¬å¤šä¸ªç½‘ç»œè¿æ¥ä¸Šçš„ IO äº‹ä»¶ï¼Œå½“æŸä¸ªè¿æ¥å‡†å¤‡å¥½è¯»æˆ–å†™æ—¶ï¼Œæ‰å»å¤„ç†å®ƒï¼Œæå¤§åœ°æé«˜äº†å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</li><li><strong>ä¸°å¯Œçš„æ•°æ®ç±»å‹</strong>: æ”¯æŒ String, Hash, List, Set, Sorted Set, Bitmap, HyperLogLog, GEO ç­‰å¤šç§æ•°æ®ç»“æ„ã€‚</li></ul><h5 id="ç¼“å­˜ä¸‰å¤§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"><a href="#ç¼“å­˜ä¸‰å¤§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ç¼“å­˜ä¸‰å¤§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"></a><strong>ç¼“å­˜ä¸‰å¤§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</strong></h5><ul><li><strong>ç¼“å­˜ç©¿é€</strong>:<ul><li><strong>é—®é¢˜</strong>: å®¢æˆ·ç«¯æŸ¥è¯¢ä¸€ä¸ªæ•°æ®åº“å’Œç¼“å­˜ä¸­<strong>éƒ½</strong>ä¸å­˜åœ¨çš„æ•°æ®ã€‚è¿™å¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½ä¼šç»•è¿‡ç¼“å­˜ï¼Œç›´æ¥æ‰“åˆ°æ•°æ®åº“ä¸Šï¼Œå½“æœ‰å¤§é‡æ­¤ç±»è¯·æ±‚æ—¶ï¼Œä¼šç»™æ•°æ®åº“å¸¦æ¥å·¨å¤§å‹åŠ›ã€‚</li><li><strong>è§£å†³</strong>:<ol><li><strong>ç¼“å­˜ç©ºå¯¹è±¡</strong>: å½“ä»æ•°æ®åº“æŸ¥è¯¢ä¸åˆ°æ•°æ®æ—¶ï¼Œä¹Ÿåœ¨ç¼“å­˜ä¸­å­˜å…¥ä¸€ä¸ªç‰¹æ®Šçš„ç©ºå€¼ï¼ˆå¦‚ <code>null</code> æˆ–ç‰¹å®šå­—ç¬¦ä¸²ï¼‰ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªè¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ã€‚</li><li><strong>å¸ƒéš†è¿‡æ»¤å™¨ (Bloom Filter)</strong>: åœ¨è®¿é—®ç¼“å­˜ä¹‹å‰ï¼Œå…ˆé€šè¿‡å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­ key æ˜¯å¦<strong>å¯èƒ½</strong>å­˜åœ¨ã€‚å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥é«˜æ•ˆåœ°åˆ¤æ–­ä¸€ä¸ªå…ƒç´ <strong>ä¸€å®šä¸å­˜åœ¨</strong>ï¼Œä»è€Œåœ¨ç¬¬ä¸€å±‚å°±æ‹¦æˆªæ‰å¤§é‡æ— æ•ˆè¯·æ±‚ã€‚</li></ol></li></ul></li><li><strong>ç¼“å­˜å‡»ç©¿</strong>:<ul><li><strong>é—®é¢˜</strong>: æŸä¸ª<strong>çƒ­ç‚¹ Key</strong> åœ¨æŸä¸€æ—¶åˆ»çªç„¶å¤±æ•ˆï¼Œè€Œæ­¤æ—¶æ°å¥½æœ‰å¤§é‡çš„å¹¶å‘è¯·æ±‚è®¿é—®è¿™ä¸ª Keyï¼Œè¿™äº›è¯·æ±‚ä¼šåŒæ—¶ç©¿é€ç¼“å­˜ï¼Œç›´æ¥æ‰“åˆ°æ•°æ®åº“ä¸Šï¼Œå¯èƒ½å¯¼è‡´æ•°æ®åº“ç¬é—´å´©æºƒã€‚</li><li><strong>è§£å†³</strong>:<ol><li><strong>è®¾ç½®çƒ­ç‚¹ Key æ°¸ä¸è¿‡æœŸ</strong>: å¯¹äºä¸€äº›è®¿é—®æå…¶é¢‘ç¹ä¸”æ•°æ®ç›¸å¯¹å›ºå®šçš„çƒ­ç‚¹æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œé€šè¿‡åå°ä»»åŠ¡å®šæ—¶æ›´æ–°ã€‚</li><li><strong>ä½¿ç”¨åˆ†å¸ƒå¼é”</strong>: åœ¨æŸ¥è¯¢æ•°æ®åº“ä¹‹å‰ï¼Œå…ˆè·å–ä¸€ä¸ªè¯¥ Key å¯¹åº”çš„åˆ†å¸ƒå¼é”ã€‚åªæœ‰ç¬¬ä¸€ä¸ªè·å–åˆ°é”çš„çº¿ç¨‹æ‰èƒ½å»æŸ¥è¯¢æ•°æ®åº“å¹¶å›å†™ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹åˆ™ç­‰å¾…æˆ–ç›´æ¥è¿”å›ã€‚</li></ol></li></ul></li><li><strong>ç¼“å­˜é›ªå´©</strong>:<ul><li><strong>é—®é¢˜</strong>: å¤§é‡çš„ç¼“å­˜ Key åœ¨<strong>åŒä¸€æ—¶é—´é›†ä¸­å¤±æ•ˆ</strong>ï¼ˆä¾‹å¦‚ï¼Œåœ¨åº”ç”¨å¯åŠ¨æ—¶ç¼“å­˜äº†å¤§é‡æ•°æ®ï¼Œå¹¶è®¾ç½®äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼‰ï¼Œå¯¼è‡´æ‰€æœ‰è¯·æ±‚éƒ½ç¬é—´æ¶Œå‘æ•°æ®åº“ï¼Œé€ æˆæ•°æ®åº“å‹åŠ›å‰§å¢ç”šè‡³å®•æœºã€‚</li><li><strong>è§£å†³</strong>:<ol><li><strong>è¿‡æœŸæ—¶é—´åŠ éšæœºå€¼</strong>: åœ¨è®¾ç½®ç¼“å­˜çš„è¿‡æœŸæ—¶é—´æ—¶ï¼Œåœ¨ä¸€ä¸ªåŸºç¡€æ—¶é—´ä¸Šå¢åŠ ä¸€ä¸ªéšæœºæ•°ï¼Œä½¿å¾— Key çš„å¤±æ•ˆæ—¶é—´ç‚¹å°½å¯èƒ½åˆ†æ•£ã€‚</li><li><strong>å¤šçº§ç¼“å­˜</strong>: å»ºç«‹å¤šçº§ç¼“å­˜ä½“ç³»ï¼Œå¦‚ Nginx ç¼“å­˜ + Redis ç¼“å­˜ + JVM æœ¬åœ°ç¼“å­˜ï¼ˆCaffeine&#x2F;Guava Cacheï¼‰ã€‚</li><li><strong>ç†”æ–­é™çº§</strong>: ä½¿ç”¨ Hystrix æˆ– Sentinel ç­‰ç»„ä»¶ï¼Œå½“æ£€æµ‹åˆ°æ•°æ®åº“å‹åŠ›è¿‡å¤§æ—¶ï¼Œè¿›è¡Œç†”æ–­æˆ–é™çº§å¤„ç†ï¼Œæš‚æ—¶ä¸è®¿é—®æ•°æ®åº“ï¼Œè¿”å›ä¸€ä¸ªé»˜è®¤å€¼æˆ–æç¤ºä¿¡æ¯ã€‚</li></ol></li></ul></li></ul><hr><h4 id="5-æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰"><a href="#5-æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰" class="headerlink" title="5. æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰"></a><strong>5. æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰</strong></h4><h5 id="æ ¸å¿ƒä½œç”¨"><a href="#æ ¸å¿ƒä½œç”¨" class="headerlink" title="æ ¸å¿ƒä½œç”¨"></a><strong>æ ¸å¿ƒä½œç”¨</strong></h5><ul><li><strong>å¼‚æ­¥ (Asynchronous)</strong>: å°†è€—æ—¶çš„æ“ä½œï¼ˆå¦‚å‘é€é‚®ä»¶ã€ç”ŸæˆæŠ¥è¡¨ï¼‰ä½œä¸ºæ¶ˆæ¯æ”¾å…¥ MQï¼Œä¸»æµç¨‹å¯ä»¥ç«‹å³è¿”å›ï¼Œæ— éœ€ç­‰å¾…è¿™äº›æ“ä½œå®Œæˆï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å“åº”é€Ÿåº¦å’Œååé‡ã€‚</li><li><strong>è§£è€¦ (Decoupling)</strong>: ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´é€šè¿‡ MQ è¿›è¡Œé€šä¿¡ï¼Œæ— éœ€ç›´æ¥ç›¸äº’ä¾èµ–ã€‚ä»»ä½•ä¸€æ–¹çš„ä¿®æ”¹ã€å®•æœºæˆ–å‡çº§éƒ½ä¸ä¼šå½±å“åˆ°å¦ä¸€æ–¹ï¼Œå¢å¼ºäº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li><li><strong>å‰Šå³° (Peak Shaving)</strong>: åœ¨ç§’æ€ã€å¤§ä¿ƒç­‰é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå°†ç¬æ—¶æ¶Œå…¥çš„å¤§é‡è¯·æ±‚æš‚å­˜åœ¨ MQ ä¸­ï¼Œä¸‹æ¸¸çš„æ¶ˆè´¹è€…ç³»ç»Ÿå¯ä»¥æŒ‰ç…§è‡ªå·±çš„å¤„ç†èƒ½åŠ›ï¼Œå¹³ç¨³åœ°ä» MQ ä¸­æ‹‰å–å¹¶å¤„ç†è¯·æ±‚ï¼Œé¿å…äº†æµé‡æ´ªå³°ç›´æ¥å†²å®ä¸‹æ¸¸æœåŠ¡ã€‚</li></ul><h5 id="é¢è¯•é¢˜ï¼šâ€œè¯·åˆ—ä¸¾ä½ ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ—¶å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œå¹¶ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚â€"><a href="#é¢è¯•é¢˜ï¼šâ€œè¯·åˆ—ä¸¾ä½ ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ—¶å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œå¹¶ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚â€" class="headerlink" title="é¢è¯•é¢˜ï¼šâ€œè¯·åˆ—ä¸¾ä½ ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ—¶å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œå¹¶ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚â€"></a><strong>é¢è¯•é¢˜ï¼šâ€œè¯·åˆ—ä¸¾ä½ ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ—¶å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œå¹¶ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚â€</strong></h5><p><strong>å›ç­”è¦ç‚¹</strong>:</p><ul><li><strong>æ¶ˆæ¯ä¸¢å¤± (Message Loss)</strong>:<ul><li><strong>é—®é¢˜</strong>: æ¶ˆæ¯ä»ç”Ÿäº§è€…å‘å‡ºåï¼Œç”±äºç½‘ç»œæˆ– MQ æœåŠ¡æ•…éšœï¼Œæœªèƒ½æˆåŠŸåˆ°è¾¾æ¶ˆè´¹è€…ã€‚</li><li><strong>è§£å†³</strong>:<ol><li><strong>ç”Ÿäº§è€…ç«¯</strong>: å¼€å¯ç”Ÿäº§è€…çš„ <code>confirm</code> æˆ– <code>ack</code> æœºåˆ¶ï¼Œç¡®ä¿æ¶ˆæ¯è¢« MQ æˆåŠŸæ¥æ”¶ã€‚å¦‚æœå‘é€å¤±è´¥ï¼Œå¯ä»¥è¿›è¡Œé‡è¯•ã€‚</li><li><strong>MQ æœåŠ¡ç«¯</strong>: å¯¹æ¶ˆæ¯è¿›è¡ŒæŒä¹…åŒ–ï¼Œé˜²æ­¢ MQ å®•æœºå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ï¼ˆå¦‚ RabbitMQ çš„æŒä¹…åŒ–é˜Ÿåˆ—å’Œæ¶ˆæ¯ï¼ŒKafka çš„ç£ç›˜å­˜å‚¨ï¼‰ã€‚</li><li><strong>æ¶ˆè´¹è€…ç«¯</strong>: æ¶ˆè´¹è€…åœ¨å¤„ç†å®Œä¸šåŠ¡é€»è¾‘åï¼Œå†å‘ MQ å‘é€ç¡®è®¤åº”ç­”ï¼ˆ<code>ack</code>ï¼‰ã€‚å¦‚æœå¤„ç†è¿‡ç¨‹ä¸­æ¶ˆè´¹è€…å®•æœºï¼ŒMQ æ²¡æœ‰æ”¶åˆ° <code>ack</code>ï¼Œä¼šå°†è¯¥æ¶ˆæ¯é‡æ–°æŠ•é€’ç»™å…¶ä»–æ¶ˆè´¹è€…ã€‚</li></ol></li></ul></li><li><strong>é‡å¤æ¶ˆè´¹ (Duplicate Consumption)</strong>:<ul><li><strong>é—®é¢˜</strong>: ç”±äºç½‘ç»œæŠ–åŠ¨ã€æ¶ˆè´¹è€… <code>ack</code> è¶…æ—¶ç­‰åŸå› ï¼ŒMQ å¯èƒ½ä¼šé‡å¤æŠ•é€’åŒä¸€æ¡æ¶ˆæ¯ã€‚</li><li><strong>è§£å†³</strong>: æ ¸å¿ƒæ˜¯ä¿è¯æ¶ˆè´¹é€»è¾‘çš„<strong>å¹‚ç­‰æ€§ (Idempotence)</strong>ã€‚å³å¤šæ¬¡æ‰§è¡ŒåŒä¸€ä¸ªæ“ä½œï¼Œç»“æœéƒ½æ˜¯ç›¸åŒçš„ã€‚å®ç°æ–¹å¼æœ‰ï¼š<ol><li>åœ¨æ•°æ®åº“ä¸­ä¸ºä¸šåŠ¡æ“ä½œåˆ›å»ºä¸€ä¸ª<strong>å”¯ä¸€é”®</strong>ï¼Œæ¯æ¬¡æ“ä½œå‰å…ˆæ£€æŸ¥è¯¥å”¯ä¸€é”®æ˜¯å¦å­˜åœ¨ã€‚</li><li>ä½¿ç”¨ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„<strong>ä¸šåŠ¡ ID</strong>ï¼ˆå¦‚è®¢å•å·ï¼‰ï¼Œåœ¨å¤„ç†æ¶ˆæ¯å‰ï¼Œå…ˆæŸ¥è¯¢è¿™ä¸ª ID æ˜¯å¦å·²ç»è¢«å¤„ç†è¿‡ï¼ˆä¾‹å¦‚ï¼Œå­˜å…¥ Redis Set æˆ–æ•°æ®åº“ï¼‰ã€‚</li></ol></li></ul></li><li><strong>æ¶ˆæ¯å †ç§¯ (Message Backlog)</strong>:<ul><li><strong>é—®é¢˜</strong>: ç”Ÿäº§è€…çš„ç”Ÿäº§é€Ÿåº¦è¿œå¤§äºæ¶ˆè´¹è€…çš„æ¶ˆè´¹é€Ÿåº¦ï¼Œå¯¼è‡´å¤§é‡æ¶ˆæ¯åœ¨ MQ ä¸­ç§¯å‹ï¼Œå ç”¨èµ„æºå¹¶å¯èƒ½å¯¼è‡´æ¶ˆæ¯è¶…æ—¶ä¸¢å¤±ã€‚</li><li><strong>è§£å†³</strong>:<ol><li><strong>æ°´å¹³æ‰©å±•æ¶ˆè´¹è€…</strong>: å¢åŠ æ¶ˆè´¹è€…å®ä¾‹çš„æ•°é‡ï¼Œå¹¶è¡Œå¤„ç†æ¶ˆæ¯ã€‚è¿™æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚</li><li><strong>ä¼˜åŒ–æ¶ˆè´¹é€»è¾‘</strong>: æ£€æŸ¥æ¶ˆè´¹è€…ä»£ç ï¼Œçœ‹æ˜¯å¦æœ‰å¯ä»¥ä¼˜åŒ–çš„æ…¢æ“ä½œï¼ˆå¦‚ I&#x2F;O å¯†é›†å‹æ“ä½œï¼‰ã€‚</li><li><strong>æ¶ˆæ¯åˆ†ç‰‡&#x2F;åˆ†åŒº</strong>: å¯¹ Topic è¿›è¡Œåˆ†åŒºï¼ˆPartitioningï¼‰ï¼Œè®©ä¸åŒçš„æ¶ˆè´¹è€…ç»„å¤„ç†ä¸åŒçš„åˆ†åŒºï¼Œæé«˜å¹¶å‘åº¦ã€‚</li><li><strong>å¢åŠ é¢„è­¦ç›‘æ§</strong>: å¯¹æ¶ˆæ¯å †ç§¯æ•°é‡è®¾ç½®é˜ˆå€¼ï¼Œè¾¾åˆ°é˜ˆå€¼æ—¶åŠæ—¶å‘Šè­¦ï¼Œäººå·¥ä»‹å…¥ã€‚</li></ol></li></ul></li></ul><hr><h4 id="6-åˆ†å¸ƒå¼é”è¯¦è§£"><a href="#6-åˆ†å¸ƒå¼é”è¯¦è§£" class="headerlink" title="6. åˆ†å¸ƒå¼é”è¯¦è§£"></a><strong>6. åˆ†å¸ƒå¼é”è¯¦è§£</strong></h4><h5 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a><strong>ä½œç”¨</strong></h5><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿç¯å¢ƒä¸‹ï¼Œå¤šä¸ªè¿›ç¨‹æˆ–æœåŠ¡å™¨ä¸Šçš„å¤šä¸ªçº¿ç¨‹éœ€è¦è®¿é—®åŒä¸€ä¸ªå…±äº«èµ„æºæ—¶ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œæ“ä½œçš„åŸå­æ€§ï¼Œéœ€è¦ä¸€ç§æœºåˆ¶æ¥ç¡®ä¿åœ¨åŒä¸€æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½å¤ŸæŒæœ‰é”å¹¶è®¿é—®è¯¥èµ„æºã€‚</p><h5 id="å®ç°æ–¹æ¡ˆå¯¹æ¯”"><a href="#å®ç°æ–¹æ¡ˆå¯¹æ¯”" class="headerlink" title="å®ç°æ–¹æ¡ˆå¯¹æ¯”"></a><strong>å®ç°æ–¹æ¡ˆå¯¹æ¯”</strong></h5><table><thead><tr><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>åŸºäºæ•°æ®åº“</strong></td><td>å®ç°ç®€å•ï¼Œç›´æ¥åˆ©ç”¨æ•°æ®åº“ï¼ˆå¦‚å”¯ä¸€ç´¢å¼•ã€æ‚²è§‚é” <code>for update</code>ï¼‰ã€‚</td><td>æ€§èƒ½å¼€é”€å¤§ï¼Œæœ‰é”åº“é”è¡¨çš„é£é™©ï¼Œä¸å¯é‡å…¥ï¼Œä¸æ˜¯é˜»å¡é”ï¼Œæ•°æ®åº“å•ç‚¹æ•…éšœé—®é¢˜ã€‚</td><td>å¹¶å‘åº¦ä¸é«˜çš„ç®€å•åœºæ™¯ã€‚</td></tr><tr><td><strong>åŸºäº ZooKeeper</strong></td><td>å¯é æ€§é«˜ï¼Œå¤©ç„¶æ”¯æŒé˜»å¡é”å’Œå¯é‡å…¥ï¼Œè§£å†³æ­»é”é—®é¢˜ï¼ˆä¸´æ—¶èŠ‚ç‚¹ï¼‰ï¼Œæ— é”è¿‡æœŸé—®é¢˜ï¼Œæ”¯æŒå…¬å¹³é”ã€‚</td><td>æ€§èƒ½ä¸å¦‚ Redisï¼Œå®ç°å¤æ‚ï¼Œä¾èµ– ZK é›†ç¾¤ã€‚</td><td>å¯¹å¯é æ€§è¦æ±‚æé«˜ï¼Œä¸”èƒ½å®¹å¿ä¸€å®šæ€§èƒ½æŸè€—çš„åœºæ™¯ï¼Œå¦‚åˆ†å¸ƒå¼åè°ƒã€‚</td></tr><tr><td><strong>åŸºäº Redis</strong></td><td>æ€§èƒ½æé«˜ï¼Œå®ç°ç›¸å¯¹ç®€å•ï¼Œæœ‰æˆç†Ÿçš„æ¡†æ¶ (Redisson) å¯ç”¨ã€‚</td><td>å¯é æ€§ç›¸å¯¹ ZK ç¨å·®ï¼Œéœ€è¦å¤„ç†é”è¿‡æœŸå’Œä¸šåŠ¡æœªæ‰§è¡Œå®Œçš„é—®é¢˜ï¼Œéå…¬å¹³é”ã€‚</td><td>äº’è”ç½‘é«˜å¹¶å‘ã€å¯¹æ€§èƒ½è¦æ±‚é«˜çš„ç»å¤§å¤šæ•°åœºæ™¯ã€‚</td></tr></tbody></table><h5 id="åŸºäº-Redis-çš„å®ç°è¿›é˜¶"><a href="#åŸºäº-Redis-çš„å®ç°è¿›é˜¶" class="headerlink" title="åŸºäº Redis çš„å®ç°è¿›é˜¶"></a><strong>åŸºäº Redis çš„å®ç°è¿›é˜¶</strong></h5><ul><li><p>åŠ é”çš„æ­£ç¡®å§¿åŠ¿:</p><p>ä½¿ç”¨ SET key value NX EX time å‘½ä»¤ã€‚</p><ul><li><p><code>SET key value</code>: è®¾ç½®é”®å€¼ã€‚<code>value</code> é€šå¸¸æ˜¯ä¸€ä¸ªå”¯ä¸€çš„éšæœºå­—ç¬¦ä¸²ï¼ˆå¦‚ UUIDï¼‰ï¼Œç”¨äºæ ‡è¯†é”çš„æŒæœ‰è€…ã€‚</p></li><li><p><code>NX</code>: (if Not eXists)ï¼Œç¡®ä¿åªæœ‰åœ¨ key ä¸å­˜åœ¨æ—¶æ‰èƒ½è®¾ç½®æˆåŠŸï¼Œå®ç°äº†â€œåŠ é”â€çš„åŸå­æ€§ã€‚</p></li><li><p>EX time: è®¾ç½®ä¸€ä¸ªè‡ªåŠ¨è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé˜²æ­¢å› å®¢æˆ·ç«¯å®•æœºè€Œå¯¼è‡´æ­»é”ã€‚</p><p>è¿™ä¸‰ä¸ªå‚æ•°å¿…é¡»åœ¨ä¸€ä¸ªå‘½ä»¤ä¸­æ‰§è¡Œï¼Œä¿è¯åŸå­æ€§ã€‚</p></li></ul></li><li><p><strong>è§£é”çš„æ­£ç¡®å§¿åŠ¿ï¼šLua è„šæœ¬</strong></p><ul><li><p><strong>ä¸ºä»€ä¹ˆéœ€è¦ Lua</strong>: è§£é”æ“ä½œåŒ…å«â€œåˆ¤æ–­â€å’Œâ€œåˆ é™¤â€ä¸¤æ­¥ï¼š1. <code>GET</code> é”çš„ <code>value</code>ï¼Œåˆ¤æ–­æ˜¯å¦ä¸è‡ªå·±åŠ é”æ—¶è®¾ç½®çš„éšæœºå­—ç¬¦ä¸²ç›¸ç­‰ã€‚2. å¦‚æœç›¸ç­‰ï¼Œåˆ™ <code>DEL</code> é”ã€‚å¦‚æœä¸ç”¨ Lua è„šæœ¬ï¼Œåœ¨æ‰§è¡Œå®Œç¬¬ä¸€æ­¥åï¼Œè‹¥è¯¥çº¿ç¨‹é˜»å¡ï¼Œæ­¤æ—¶é”æ°å¥½è¿‡æœŸï¼Œå¦ä¸€ä¸ªçº¿ç¨‹è·å–äº†é”ï¼Œé‚£ä¹ˆå½“åŸçº¿ç¨‹æ¢å¤æ‰§è¡Œç¬¬äºŒæ­¥æ—¶ï¼Œå°±ä¼š<strong>è¯¯åˆ æ‰æ–°çº¿ç¨‹çš„é”</strong>ã€‚</p></li><li><p><strong>Lua è„šæœ¬ç¤ºä¾‹</strong>:</p><p>Lua</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- è„šæœ¬æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šKEYS[1] æ˜¯é”çš„ keyï¼ŒARGV[1] æ˜¯åŠ é”æ—¶è®¾ç½®çš„å”¯ä¸€å€¼</span><br><span class="line">if redis.call(&#x27;get&#x27;, KEYS[1]) == ARGV[1] then</span><br><span class="line">    return redis.call(&#x27;del&#x27;, KEYS[1])</span><br><span class="line">else</span><br><span class="line">    return 0</span><br><span class="line">end</span><br></pre></td></tr></table></figure></li></ul><p>Lua è„šæœ¬å¯ä»¥ç¡®ä¿å¤šä¸ªå‘½ä»¤åœ¨ Redis æœåŠ¡ç«¯è¢«åŸå­æ€§åœ°æ‰§è¡Œï¼Œæœç»äº†ä¸Šè¿°é—®é¢˜ã€‚</p></li><li><p><strong>Redis ä¹è§‚é”ï¼šWATCH å‘½ä»¤</strong></p><ul><li><p><strong>ä½œç”¨</strong>: <code>WATCH</code> å‘½ä»¤å¯ä»¥ç›‘è§†ä¸€ä¸ªæˆ–å¤šä¸ª keyï¼Œå¦‚æœåœ¨äº‹åŠ¡ <code>EXEC</code> æ‰§è¡Œä¹‹å‰ï¼Œä»»ä½•ä¸€ä¸ªè¢«ç›‘è§†çš„ key è¢«å…¶ä»–å‘½ä»¤ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆæ•´ä¸ªäº‹åŠ¡å°†è¢«å–æ¶ˆï¼Œ<code>EXEC</code> è¿”å› <code>nil</code>ã€‚</p></li><li><p><strong>åŸç†</strong>: è¿™æ˜¯ä¸€ç§<strong>æ£€æŸ¥åè®¾ç½® (Check-And-Set, CAS)</strong> çš„å®ç°ã€‚å®ƒä¸æ˜¯çœŸæ­£çš„åŠ é”ï¼Œè€Œæ˜¯åœ¨æ›´æ–°æ•°æ®æ—¶æ£€æŸ¥æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹è¿‡ã€‚</p></li><li><p><strong>ä½¿ç”¨åœºæ™¯</strong>: é€‚ç”¨äº<strong>è¯»å¤šå†™å°‘</strong>çš„å¹¶å‘åœºæ™¯ï¼Œå¯ä»¥å‡å°‘é”çš„å¼€é”€ã€‚ä¾‹å¦‚ï¼Œæ›´æ–°å•†å“åº“å­˜ã€‚</p><ol><li><p><code>WATCH stock_key</code> &#x2F;&#x2F; ç›‘è§†åº“å­˜</p></li><li><p><code>current_stock = GET stock_key</code> &#x2F;&#x2F; è·å–å½“å‰åº“å­˜</p></li><li><p>(åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­åˆ¤æ–­ <code>current_stock</code> æ˜¯å¦è¶³å¤Ÿ)</p></li><li><p><code>MULTI</code> &#x2F;&#x2F; å¼€å¯äº‹åŠ¡</p></li><li><p><code>SET stock_key new_stock</code> &#x2F;&#x2F; å‡†å¤‡æ›´æ–°åº“å­˜</p></li><li><p>EXEC &#x2F;&#x2F; æ‰§è¡Œäº‹åŠ¡</p><p>å¦‚æœä» WATCH åˆ° EXEC ä¹‹é—´ stock_key è¢«å…¶ä»–å®¢æˆ·ç«¯ä¿®æ”¹ï¼ŒEXEC å°†å¤±è´¥ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯éœ€è¦é‡è¯•æ•´ä¸ªæ“ä½œã€‚</p></li></ol></li></ul></li></ul><h5 id="é¢è¯•é¢˜ï¼šâ€œRedis-åˆ†å¸ƒå¼é”é”è¿‡æœŸäº†ä½†ä¸šåŠ¡æ²¡æ‰§è¡Œå®Œæ€ä¹ˆåŠï¼Ÿâ€"><a href="#é¢è¯•é¢˜ï¼šâ€œRedis-åˆ†å¸ƒå¼é”é”è¿‡æœŸäº†ä½†ä¸šåŠ¡æ²¡æ‰§è¡Œå®Œæ€ä¹ˆåŠï¼Ÿâ€" class="headerlink" title="é¢è¯•é¢˜ï¼šâ€œRedis åˆ†å¸ƒå¼é”é”è¿‡æœŸäº†ä½†ä¸šåŠ¡æ²¡æ‰§è¡Œå®Œæ€ä¹ˆåŠï¼Ÿâ€"></a><strong>é¢è¯•é¢˜ï¼šâ€œRedis åˆ†å¸ƒå¼é”é”è¿‡æœŸäº†ä½†ä¸šåŠ¡æ²¡æ‰§è¡Œå®Œæ€ä¹ˆåŠï¼Ÿâ€</strong></h5><p>å›ç­”è¦ç‚¹:</p><p>è¿™æ˜¯åˆ†å¸ƒå¼é”çš„ä¸€ä¸ªç»å…¸é—®é¢˜ï¼Œè¢«ç§°ä¸ºé”çš„è¶…æ—¶ç»­æœŸé—®é¢˜ã€‚</p><ul><li><strong>é—®é¢˜æ ¹æº</strong>: æˆ‘ä»¬ç»™é”è®¾ç½®äº†ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œæ¯”å¦‚ 30 ç§’ï¼Œä½†ä¸šåŠ¡æ‰§è¡Œäº† 35 ç§’ã€‚åœ¨ç¬¬ 30 ç§’æ—¶é”ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œå…¶ä»–çº¿ç¨‹å°±èƒ½è·å–åˆ°é”ï¼Œå¯¼è‡´å¹¶å‘é—®é¢˜ã€‚</li><li><strong>è§£å†³æ–¹æ¡ˆï¼šâ€œçœ‹é—¨ç‹—â€(Watchdog)æœºåˆ¶</strong>ã€‚<ul><li><strong>åŸç†</strong>: æ¯”å¦‚ Java ä¸­çš„ Redisson æ¡†æ¶å°±å†…ç½®äº†çœ‹é—¨ç‹—ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è·å–é”æˆåŠŸåï¼ŒRedisson ä¼šå¯åŠ¨ä¸€ä¸ªåå°çº¿ç¨‹ï¼ˆçœ‹é—¨ç‹—ï¼‰ï¼Œå®šæœŸï¼ˆä¾‹å¦‚æ¯ 10 ç§’ï¼‰æ£€æŸ¥è¯¥çº¿ç¨‹æ˜¯å¦è¿˜æŒæœ‰é”ã€‚å¦‚æœæŒæœ‰ï¼Œå¹¶ä¸”ä¸šåŠ¡ä»åœ¨æ‰§è¡Œï¼Œçœ‹é—¨ç‹—å°±ä¼šè‡ªåŠ¨ä¸ºè¿™ä¸ªé”<strong>å»¶é•¿è¿‡æœŸæ—¶é—´</strong>ï¼ˆç»­æœŸï¼‰ï¼Œæ¯”å¦‚å†ç»­ 30 ç§’ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šä¸€ç›´æŒç»­ï¼Œç›´åˆ°ä¸šåŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œçº¿ç¨‹ä¸»åŠ¨é‡Šæ”¾é”ï¼Œçœ‹é—¨ç‹—æ‰ä¼šåœæ­¢ã€‚</li><li><strong>æ€»ç»“</strong>: çœ‹é—¨ç‹—æœºåˆ¶é€šè¿‡åå°çº¿ç¨‹è‡ªåŠ¨ç»­æœŸï¼Œç¡®ä¿äº†åœ¨ä¸šåŠ¡æ‰§è¡Œå®Œæˆä¹‹å‰ï¼Œé”ä¸ä¼šå› ä¸ºè¶…æ—¶è€Œæå‰é‡Šæ”¾ï¼Œä»è€Œä¿è¯äº†é”çš„å¯é æ€§ã€‚</li></ul></li></ul><hr><h4 id="7-åˆ†å¸ƒå¼äº‹åŠ¡è¯¦è§£"><a href="#7-åˆ†å¸ƒå¼äº‹åŠ¡è¯¦è§£" class="headerlink" title="7. åˆ†å¸ƒå¼äº‹åŠ¡è¯¦è§£"></a><strong>7. åˆ†å¸ƒå¼äº‹åŠ¡è¯¦è§£</strong></h4><h5 id="ä½œç”¨-1"><a href="#ä½œç”¨-1" class="headerlink" title="ä½œç”¨"></a><strong>ä½œç”¨</strong></h5><p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€ä¸ªä¸šåŠ¡æ“ä½œå¯èƒ½éœ€è¦è°ƒç”¨å¤šä¸ªç‹¬ç«‹çš„æœåŠ¡æ¥å…±åŒå®Œæˆï¼ˆä¾‹å¦‚ï¼Œç”µå•†ä¸‹å•æ“ä½œéœ€è¦è°ƒç”¨è®¢å•æœåŠ¡ã€åº“å­˜æœåŠ¡ã€ç§¯åˆ†æœåŠ¡ï¼‰ã€‚åˆ†å¸ƒå¼äº‹åŠ¡æ—¨åœ¨ä¿è¯è¿™äº›è·¨æœåŠ¡çš„æ•°æ®åº“æ“ä½œèƒ½å¤Ÿéµå¾ª ACID åŸåˆ™ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼Œä»¥ç¡®ä¿æ•°æ®çš„<strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ã€‚</p><h5 id="è§£å†³æ–¹æ¡ˆæ·±å…¥åˆ†æ"><a href="#è§£å†³æ–¹æ¡ˆæ·±å…¥åˆ†æ" class="headerlink" title="è§£å†³æ–¹æ¡ˆæ·±å…¥åˆ†æ"></a><strong>è§£å†³æ–¹æ¡ˆæ·±å…¥åˆ†æ</strong></h5><ul><li><strong>XA (2PC&#x2F;3PC)</strong>: ä¸¤é˜¶æ®µ&#x2F;ä¸‰é˜¶æ®µæäº¤åè®®ã€‚<ul><li><strong>è§’è‰²</strong>: äº‹åŠ¡ç®¡ç†å™¨ (Transaction Manager, TM) å’Œ èµ„æºç®¡ç†å™¨ (Resource Manager, RM)ã€‚</li><li><strong>æµç¨‹ (2PC)</strong>:<ol><li><strong>å‡†å¤‡é˜¶æ®µ (Prepare)</strong>: TM é€šçŸ¥æ‰€æœ‰ RM å‡†å¤‡æäº¤ï¼ŒRM æ‰§è¡Œæœ¬åœ°äº‹åŠ¡å¹¶é”å®šèµ„æºï¼Œä½†ä¸æäº¤ï¼Œç„¶åå‘ TM æŠ¥å‘Šå‡†å¤‡å°±ç»ªã€‚</li><li><strong>æäº¤&#x2F;å›æ»šé˜¶æ®µ (Commit&#x2F;Rollback)</strong>: å¦‚æœæ‰€æœ‰ RM éƒ½å‡†å¤‡å°±ç»ªï¼ŒTM é€šçŸ¥æ‰€æœ‰ RM æäº¤ï¼›å¦åˆ™ï¼Œé€šçŸ¥æ‰€æœ‰ RM å›æ»šã€‚</li></ol></li><li><strong>è¯„ä»·</strong>: æ˜¯ä¸€ç§<strong>å¼ºä¸€è‡´æ€§</strong>çš„æ–¹æ¡ˆï¼Œä½†åè®®å¤æ‚ï¼Œæ€§èƒ½å·®ï¼ŒåŒæ­¥é˜»å¡æ¨¡å‹ä¼šé•¿æ—¶é—´é”å®šèµ„æºï¼Œä¸”åè°ƒå™¨å­˜åœ¨å•ç‚¹æ•…éšœé£é™©ï¼Œåœ¨äº’è”ç½‘é«˜å¹¶å‘åœºæ™¯ä¸‹<strong>å¾ˆå°‘ä½¿ç”¨</strong>ã€‚</li></ul></li><li><strong>TCC (Try-Confirm-Cancel)</strong>: è¡¥å¿å‹äº‹åŠ¡ã€‚<ul><li><strong>æ ¸å¿ƒ</strong>: æ˜¯ä¸€ç§<strong>ä¸šåŠ¡å±‚é¢</strong>çš„æŸ”æ€§äº‹åŠ¡æ–¹æ¡ˆï¼Œå¯¹ä»£ç ä¾µå…¥æ€§å¼ºã€‚</li><li><strong>æµç¨‹</strong>:<ol><li><strong>Try</strong>: å¯¹ä¸šåŠ¡èµ„æºè¿›è¡Œ<strong>æ£€æŸ¥å’Œé¢„ç•™</strong>ã€‚ä¾‹å¦‚ï¼Œæ‰£å‡åº“å­˜æ“ä½œï¼ŒTry é˜¶æ®µæ˜¯å†»ç»“åº“å­˜ã€‚</li><li><strong>Confirm</strong>: å¦‚æœæ‰€æœ‰æœåŠ¡çš„ Try é˜¶æ®µéƒ½æˆåŠŸï¼Œåˆ™æ‰§è¡Œæ‰€æœ‰æœåŠ¡çš„ <strong>Confirm</strong> æ“ä½œï¼ŒçœŸæ­£å®Œæˆä¸šåŠ¡ã€‚ä¾‹å¦‚ï¼Œå°†å†»ç»“çš„åº“å­˜çœŸå®æ‰£å‡ã€‚</li><li><strong>Cancel</strong>: å¦‚æœä»»ä½•ä¸€ä¸ªæœåŠ¡çš„ Try é˜¶æ®µå¤±è´¥ï¼Œåˆ™æ‰§è¡Œæ‰€æœ‰å·²æˆåŠŸæœåŠ¡çš„ <strong>Cancel</strong> æ“ä½œï¼Œé‡Šæ”¾é¢„ç•™çš„èµ„æºã€‚ä¾‹å¦‚ï¼Œè§£å†»ä¹‹å‰è¢«å†»ç»“çš„åº“å­˜ã€‚</li></ol></li><li><strong>è¯„ä»·</strong>: æ€§èƒ½è¾ƒå¥½ï¼Œæ•°æ®ä¸€è‡´æ€§é«˜äºå¯é æ¶ˆæ¯æ–¹æ¡ˆã€‚ä½†å¼€å‘æˆæœ¬æé«˜ï¼Œéœ€è¦ä¸ºæ¯ä¸ªæ“ä½œéƒ½ç¼–å†™ Try, Confirm, Cancel ä¸‰ä¸ªå¹‚ç­‰çš„æ–¹æ³•ã€‚</li></ul></li><li><strong>Saga æ¨¡å¼</strong>: é•¿äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚<ul><li><strong>æ ¸å¿ƒ</strong>: å°†ä¸€ä¸ªå¤§çš„åˆ†å¸ƒå¼äº‹åŠ¡æ‹†åˆ†æˆå¤šä¸ª<strong>æœ¬åœ°äº‹åŠ¡</strong>ï¼Œæ¯ä¸ªæœ¬åœ°äº‹åŠ¡éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„<strong>è¡¥å¿æ“ä½œ</strong>ã€‚</li><li><strong>æµç¨‹</strong>:<ul><li><strong>æ­£å‘æ‰§è¡Œ</strong>: Saga åè°ƒå™¨æŒ‰é¡ºåºè°ƒç”¨ T1, T2, T3â€¦Tnã€‚</li><li><strong>åå‘è¡¥å¿</strong>: å¦‚æœ Ti å¤±è´¥ï¼ŒSaga ä¼šæŒ‰ç›¸åé¡ºåºè°ƒç”¨å‰é¢å·²æˆåŠŸäº‹åŠ¡çš„è¡¥å¿æ“ä½œ C(i-1)â€¦C2, C1ï¼Œè¿›è¡Œå›æ»šã€‚</li></ul></li><li><strong>ä¸ TCC å¯¹æ¯”</strong>:<ul><li>TCC æœ‰èµ„æº<strong>é¢„ç•™</strong>é˜¶æ®µï¼Œé”èµ„æºæ—¶é—´é•¿ï¼›Saga æ²¡æœ‰é¢„ç•™ï¼Œç›´æ¥æäº¤æœ¬åœ°äº‹åŠ¡ï¼Œé”èµ„æºæ—¶é—´çŸ­ã€‚</li><li>TCC çš„è¡¥å¿æ˜¯<strong>é€†å‘æ“ä½œ</strong> (Cancel)ï¼›Saga çš„è¡¥å¿æ˜¯<strong>åå‘æ“ä½œ</strong>ã€‚</li></ul></li><li><strong>è¯„ä»·</strong>: é€‚åˆäºä¸šåŠ¡æµç¨‹é•¿ã€éœ€è¦ä¿è¯æœ€ç»ˆä¸€è‡´æ€§çš„åœºæ™¯ã€‚åŒæ ·å¯¹ä»£ç æœ‰ä¾µå…¥æ€§ï¼Œéœ€è¦è®¾è®¡å¥½æ¯ä¸ªå­äº‹åŠ¡çš„è¡¥å¿é€»è¾‘ã€‚</li></ul></li><li><strong>åŸºäºå¯é æ¶ˆæ¯çš„æœ€ç»ˆä¸€è‡´æ€§ (å¸¸ç”¨)</strong>:<ul><li><strong>æ ¸å¿ƒ</strong>: è¿™æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­<strong>æœ€å¸¸ç”¨</strong>çš„æŸ”æ€§äº‹åŠ¡æ–¹æ¡ˆã€‚</li><li><strong>åŸç†</strong>: æœåŠ¡ A åœ¨æ‰§è¡Œå®Œæœ¬åœ°äº‹åŠ¡åï¼Œå‘é€ä¸€æ¡æ¶ˆæ¯åˆ° MQã€‚æœåŠ¡ B è®¢é˜…è¯¥æ¶ˆæ¯ï¼Œæ¶ˆè´¹æ¶ˆæ¯å¹¶æ‰§è¡Œè‡ªå·±çš„æœ¬åœ°äº‹åŠ¡ã€‚</li><li><strong>å…³é”®é—®é¢˜</strong>: å¦‚ä½•ä¿è¯<strong>æœ¬åœ°äº‹åŠ¡æ‰§è¡Œ</strong>å’Œ<strong>æ¶ˆæ¯å‘é€</strong>çš„åŸå­æ€§ï¼Ÿ<ul><li><strong>äº‹åŠ¡æ¶ˆæ¯ (RocketMQ æ”¯æŒ)</strong>: ç”Ÿäº§è€…å…ˆå‘é€ä¸€æ¡â€œåŠæ¶ˆæ¯â€åˆ° MQï¼ŒMQ æ”¶åˆ°åä¸æŠ•é€’ã€‚ç„¶åç”Ÿäº§è€…æ‰§è¡Œæœ¬åœ°äº‹åŠ¡ã€‚å¦‚æœäº‹åŠ¡æˆåŠŸï¼Œåˆ™å‘ MQ å‘é€ç¡®è®¤ï¼ŒMQ æŠ•é€’è¯¥æ¶ˆæ¯ï¼›å¦‚æœäº‹åŠ¡å¤±è´¥ï¼Œåˆ™é€šçŸ¥ MQ åˆ é™¤è¯¥åŠæ¶ˆæ¯ã€‚</li><li><strong>æœ¬åœ°æ¶ˆæ¯è¡¨</strong>: ä¸šåŠ¡æ“ä½œå’Œâ€œå¾…å‘é€æ¶ˆæ¯â€è®°å½•åœ¨åŒä¸€æœ¬åœ°äº‹åŠ¡ä¸­ã€‚ä¸€ä¸ªåå°ä»»åŠ¡å®šæ—¶æ‰«æè¿™å¼ è¡¨ï¼Œå°†æ¶ˆæ¯å‘é€åˆ° MQï¼Œå‘é€æˆåŠŸåæ›´æ–°è¡¨çŠ¶æ€ã€‚</li></ul></li><li><strong>è¯„ä»·</strong>: å®ç°äº†æœåŠ¡é—´çš„è§£è€¦ï¼Œæ€§èƒ½é«˜ï¼Œååé‡å¤§ã€‚ä½†å®ƒä¸ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œåªä¿è¯<strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼Œå­˜åœ¨ä¸€ä¸ªçŸ­æš‚çš„æ•°æ®ä¸ä¸€è‡´çŠ¶æ€çª—å£ã€‚éœ€è¦å¤„ç†å¥½æ¶ˆæ¯çš„å¯é æŠ•é€’å’Œå¹‚ç­‰æ¶ˆè´¹é—®é¢˜ã€‚</li></ul></li></ul><h3 id="Lua-è„šæœ¬è¯¦è§£-åœ¨-Redis-ä¸­çš„åº”ç”¨"><a href="#Lua-è„šæœ¬è¯¦è§£-åœ¨-Redis-ä¸­çš„åº”ç”¨" class="headerlink" title="Lua è„šæœ¬è¯¦è§£ (åœ¨ Redis ä¸­çš„åº”ç”¨)"></a><strong>Lua è„šæœ¬è¯¦è§£ (åœ¨ Redis ä¸­çš„åº”ç”¨)</strong></h3><h4 id="1-Lua-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-Lua-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. Lua æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>1. Lua æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h4><p>Lua æ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰©å±•çš„è„šæœ¬è¯­è¨€ï¼Œè¢«è®¾è®¡ç”¨äºåµŒå…¥åˆ°å…¶ä»–åº”ç”¨ç¨‹åºä¸­ï¼Œä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½ã€‚å®ƒä»¥å…¶ç®€æ´çš„è¯­æ³•ã€é«˜æ•ˆçš„æ‰§è¡Œæ€§èƒ½å’Œæå°çš„å†…å­˜å ç”¨è€Œé—»åã€‚</p><p>åœ¨ Redis çš„ä¸Šä¸‹æ–‡ä¸­ï¼ŒLua è„šæœ¬æä¾›äº†ä¸€ç§åœ¨ Redis æœåŠ¡å™¨ç«¯æ‰§è¡Œå¤æ‚é€»è¾‘çš„å¼ºå¤§èƒ½åŠ›ã€‚</p><h4 id="2-ä¸ºä»€ä¹ˆ-Redis-è¦æ”¯æŒ-Lua-è„šæœ¬ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆ-Redis-è¦æ”¯æŒ-Lua-è„šæœ¬ï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆ Redis è¦æ”¯æŒ Lua è„šæœ¬ï¼Ÿ"></a><strong>2. ä¸ºä»€ä¹ˆ Redis è¦æ”¯æŒ Lua è„šæœ¬ï¼Ÿ</strong></h4><ul><li><strong>åŸå­æ€§ (Atomicity)</strong>: è¿™æ˜¯åœ¨ Redis ä¸­ä½¿ç”¨ Lua æœ€æ ¸å¿ƒçš„åŸå› ã€‚Redis ä¼šå°†æ•´ä¸ª Lua è„šæœ¬ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å‘½ä»¤æ¥æ‰§è¡Œï¼Œ<strong>åœ¨è„šæœ¬æ‰§è¡ŒæœŸé—´ï¼Œä¸ä¼šæœ‰å…¶ä»–å®¢æˆ·ç«¯çš„å‘½ä»¤è¢«æ’å…¥æ‰§è¡Œ</strong>ã€‚è¿™å®Œç¾åœ°è§£å†³äº†éœ€è¦ç»„åˆå¤šä¸ª Redis å‘½ä»¤æ‰èƒ½å®Œæˆä¸€ä¸ªä¸šåŠ¡é€»è¾‘æ—¶ï¼Œå¯èƒ½å‡ºç°çš„ç«æ€æ¡ä»¶é—®é¢˜ã€‚ä¾‹å¦‚å‰é¢æåˆ°çš„â€œåˆ¤æ–­é”å¹¶åˆ é™¤é”â€çš„æ“ä½œï¼Œå¦‚æœåˆ†ä¸¤æ­¥æ‰§è¡Œï¼Œå°±ä¸æ˜¯åŸå­çš„ï¼Œè€Œå°è£…åœ¨ Lua è„šæœ¬ä¸­å°±æ˜¯åŸå­çš„ã€‚</li><li><strong>å‡å°‘ç½‘ç»œå¼€é”€</strong>: å¯¹äºéœ€è¦å¤šæ¬¡ä¸ Redis äº¤äº’çš„å¤æ‚æ“ä½œï¼Œå¯ä»¥å°†æ‰€æœ‰é€»è¾‘å°è£…åœ¨ä¸€ä¸ª Lua è„šæœ¬ä¸­ï¼Œä¸€æ¬¡æ€§å‘é€ç»™ Redis æœåŠ¡å™¨ã€‚å®¢æˆ·ç«¯åªéœ€å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œè€Œä¸æ˜¯å¤šæ¬¡ï¼Œè¿™æ˜¾è‘—å‡å°‘äº†å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œå¾€è¿”æ—¶é—´ï¼ˆRTTï¼‰ï¼Œæå‡äº†æ€§èƒ½ã€‚</li><li><strong>ä»£ç å¤ç”¨</strong>: ç¼–å†™å¥½çš„ Lua è„šæœ¬å¯ä»¥è¢«ç¼“å­˜ï¼ˆé€šè¿‡ <code>SCRIPT LOAD</code> å‘½ä»¤ç”Ÿæˆä¸€ä¸ª SHA1 æ ¡éªŒå’Œï¼‰ï¼Œä¹‹åå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è¿™ä¸ªç®€çŸ­çš„ SHA1 æ ¡éªŒå’Œï¼ˆä½¿ç”¨ <code>EVALSHA</code> å‘½ä»¤ï¼‰æ¥è°ƒç”¨è„šæœ¬ï¼Œé¿å…äº†æ¯æ¬¡éƒ½å‘é€å®Œæ•´çš„è„šæœ¬å†…å®¹ã€‚</li></ul><h4 id="3-å¦‚ä½•åœ¨-Redis-ä¸­ä½¿ç”¨-Lua-è„šæœ¬ï¼Ÿ"><a href="#3-å¦‚ä½•åœ¨-Redis-ä¸­ä½¿ç”¨-Lua-è„šæœ¬ï¼Ÿ" class="headerlink" title="3. å¦‚ä½•åœ¨ Redis ä¸­ä½¿ç”¨ Lua è„šæœ¬ï¼Ÿ"></a><strong>3. å¦‚ä½•åœ¨ Redis ä¸­ä½¿ç”¨ Lua è„šæœ¬ï¼Ÿ</strong></h4><p>é€šè¿‡ EVAL æˆ– EVALSHA å‘½ä»¤æ¥æ‰§è¡Œã€‚</p><p>EVAL script numkeys key [key â€¦] arg [arg â€¦]</p><ul><li><code>script</code>: è¦æ‰§è¡Œçš„ Lua è„šæœ¬å­—ç¬¦ä¸²ã€‚</li><li><code>numkeys</code>: åé¢è·Ÿçš„ <code>key</code> å‚æ•°çš„æ•°é‡ã€‚è¿™æœ‰åŠ©äº Redis æ­£ç¡®åœ°å°†å‚æ•°åŒºåˆ†ä¸ºé”®åï¼ˆ<code>KEYS</code>ï¼‰å’Œæ™®é€šå‚æ•°ï¼ˆ<code>ARGV</code>ï¼‰ï¼Œè¿™å¯¹äº Redis Cluster æ¨¡å¼ä¸‹çš„è·¯ç”±è‡³å…³é‡è¦ã€‚</li><li><code>key [key ...]</code>ï¼šè„šæœ¬ä¸­è¦æ“ä½œçš„ Redis é”®ï¼Œåœ¨ Lua è„šæœ¬ä¸­å¯ä»¥é€šè¿‡å…¨å±€å˜é‡ <code>KEYS</code> tableï¼ˆä¾‹å¦‚ <code>KEYS[1]</code>ï¼‰æ¥è®¿é—®ã€‚</li><li><code>arg [arg ...]</code>ï¼šä¼ é€’ç»™è„šæœ¬çš„é¢å¤–å‚æ•°ï¼Œåœ¨ Lua è„šæœ¬ä¸­å¯ä»¥é€šè¿‡å…¨å±€å˜é‡ <code>ARGV</code> tableï¼ˆä¾‹å¦‚ <code>ARGV[1]</code>ï¼‰æ¥è®¿é—®ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼šå®ç°ä¸€ä¸ªå®‰å…¨çš„åº“å­˜æ‰£å‡</strong></p><p>Lua</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- è„šæœ¬é€»è¾‘ï¼šæ£€æŸ¥åº“å­˜æ˜¯å¦å……è¶³ï¼Œå¦‚æœå……è¶³åˆ™æ‰£å‡å¹¶è¿”å›1ï¼Œå¦åˆ™è¿”å›0</span><br><span class="line">-- KEYS[1]: åº“å­˜çš„ keyï¼Œä¾‹å¦‚ &quot;product:1001:stock&quot;</span><br><span class="line">-- ARGV[1]: æœ¬æ¬¡è¦æ‰£å‡çš„æ•°é‡</span><br><span class="line"></span><br><span class="line">local stock = tonumber(redis.call(&#x27;get&#x27;, KEYS[1]))</span><br><span class="line">local quantity = tonumber(ARGV[1])</span><br><span class="line"></span><br><span class="line">if stock &gt;= quantity then</span><br><span class="line">    redis.call(&#x27;decrby&#x27;, KEYS[1], quantity)</span><br><span class="line">    return 1</span><br><span class="line">else</span><br><span class="line">    return 0</span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè„šæœ¬ä¿è¯äº†â€œè¯»å–åº“å­˜â€å’Œâ€œæ‰£å‡åº“å­˜â€ä¸¤ä¸ªæ“ä½œçš„åŸå­æ€§ï¼Œé¿å…äº†åœ¨é«˜å¹¶å‘ä¸‹è¶…å–çš„é—®é¢˜ã€‚</p><hr><h3 id="Token-è®¤è¯æœºåˆ¶è¯¦è§£"><a href="#Token-è®¤è¯æœºåˆ¶è¯¦è§£" class="headerlink" title="Token è®¤è¯æœºåˆ¶è¯¦è§£"></a><strong>Token è®¤è¯æœºåˆ¶è¯¦è§£</strong></h3><h4 id="1-Token-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-Token-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. Token æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>1. Token æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h4><p>Tokenï¼ˆä»¤ç‰Œï¼‰æ˜¯åœ¨æœåŠ¡ç«¯ç”Ÿæˆçš„ä¸€ä¸²åŠ å¯†å­—ç¬¦ä¸²ï¼Œä½œä¸ºå®¢æˆ·ç«¯è¿›è¡Œè¯·æ±‚çš„ä¸€ä¸ªâ€œå‡­è¯â€ã€‚å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šç”Ÿæˆä¸€ä¸ª Token å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ä¹‹åï¼Œå®¢æˆ·ç«¯åœ¨æ¯æ¬¡è¯·æ±‚éœ€è¦èº«ä»½è®¤è¯çš„æ¥å£æ—¶ï¼Œéƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ï¼ˆé€šå¸¸æ˜¯ <code>Authorization</code> å­—æ®µï¼‰ä¸­æºå¸¦è¿™ä¸ª Tokenã€‚æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šéªŒè¯ Token çš„æœ‰æ•ˆæ€§ï¼Œå¦‚æœéªŒè¯é€šè¿‡ï¼Œåˆ™å¤„ç†è¯¥è¯·æ±‚ï¼›å¦åˆ™ï¼Œæ‹’ç»è¯¥è¯·æ±‚ã€‚</p><p>ä¸€ä¸ªå…¸å‹çš„ Token æ˜¯ <strong>JWT (JSON Web Token)</strong>ï¼Œå®ƒç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œç”¨ <code>.</code> åˆ†éš”ï¼š</p><ul><li><strong>Header (å¤´éƒ¨)</strong>: åŒ…å«äº†ä»¤ç‰Œçš„ç±»å‹ï¼ˆ<code>typ</code>ï¼Œå³ JWTï¼‰å’Œæ‰€ä½¿ç”¨çš„ç­¾åç®—æ³•ï¼ˆ<code>alg</code>ï¼Œå¦‚ HMAC SHA256 æˆ– RSAï¼‰ã€‚</li><li><strong>Payload (è´Ÿè½½)</strong>: åŒ…å«äº†â€œå£°æ˜ (claims)â€ï¼Œæ˜¯å­˜æ”¾å®é™…éœ€è¦ä¼ é€’çš„æ•°æ®çš„åœ°æ–¹ã€‚ä¾‹å¦‚ç”¨æˆ·IDï¼ˆ<code>sub</code>ï¼‰ã€ç­¾å‘æ—¶é—´ï¼ˆ<code>iat</code>ï¼‰ã€è¿‡æœŸæ—¶é—´ï¼ˆ<code>exp</code>ï¼‰ä»¥åŠå…¶ä»–è‡ªå®šä¹‰çš„ç”¨æˆ·ä¿¡æ¯ã€‚<strong>æ³¨æ„ï¼šPayload éƒ¨åˆ†æ˜¯ Base64 ç¼–ç çš„ï¼Œå¹¶éåŠ å¯†ï¼Œå› æ­¤ä¸åº”å­˜æ”¾æ•æ„Ÿä¿¡æ¯ã€‚</strong></li><li><strong>Signature (ç­¾å)</strong>: å¯¹å‰ä¸¤éƒ¨åˆ†ï¼ˆHeader å’Œ Payloadï¼‰ä½¿ç”¨æŒ‡å®šçš„ç®—æ³•å’Œå­˜å‚¨åœ¨æœåŠ¡ç«¯çš„å¯†é’¥ï¼ˆsecretï¼‰è¿›è¡Œç­¾åã€‚è¿™ä¸ªç­¾åçš„ä½œç”¨æ˜¯<strong>é˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹</strong>ã€‚æœåŠ¡ç«¯æ”¶åˆ° Token åï¼Œä¼šç”¨åŒæ ·çš„ç®—æ³•å’Œå¯†é’¥é‡æ–°è®¡ç®—ç­¾åï¼Œå¹¶ä¸ Token ä¸­çš„ç­¾åè¿›è¡Œæ¯”å¯¹ï¼Œè‹¥ä¸€è‡´ï¼Œåˆ™è¯´æ˜ Token æœªè¢«ç¯¡æ”¹ä¸”æ˜¯å¯ä¿¡çš„ã€‚</li></ul><h4 id="2-Token-è®¤è¯åŸç†ï¼ˆå·¥ä½œæµç¨‹ï¼‰"><a href="#2-Token-è®¤è¯åŸç†ï¼ˆå·¥ä½œæµç¨‹ï¼‰" class="headerlink" title="2. Token è®¤è¯åŸç†ï¼ˆå·¥ä½œæµç¨‹ï¼‰"></a><strong>2. Token è®¤è¯åŸç†ï¼ˆå·¥ä½œæµç¨‹ï¼‰</strong></h4><ol><li><strong>ç™»å½•</strong>: ç”¨æˆ·ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç å‘èµ·ç™»å½•è¯·æ±‚ã€‚</li><li><strong>éªŒè¯</strong>: æœåŠ¡ç«¯éªŒè¯ç”¨æˆ·çš„å‡­æ®æ˜¯å¦æ­£ç¡®ã€‚</li><li><strong>ç­¾å‘ Token</strong>: éªŒè¯æˆåŠŸåï¼ŒæœåŠ¡ç«¯æ ¹æ®ç”¨æˆ·IDã€è§’è‰²ç­‰ä¿¡æ¯ï¼Œç»“åˆå¯†é’¥ï¼ˆsecretï¼‰ï¼Œç”Ÿæˆä¸€ä¸ª Tokenã€‚</li><li><strong>è¿”å› Token</strong>: æœåŠ¡ç«¯å°†ç”Ÿæˆçš„ Token è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li><li><strong>å­˜å‚¨ Token</strong>: å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ã€Appï¼‰å°† Token å­˜å‚¨èµ·æ¥ï¼Œé€šå¸¸æ”¾åœ¨ <code>localStorage</code>ã€<code>sessionStorage</code> æˆ– <code>HttpOnly</code> çš„ Cookie ä¸­ã€‚</li><li><strong>æºå¸¦ Token è¯·æ±‚</strong>: å®¢æˆ·ç«¯åœ¨åç»­æ¯æ¬¡è¯·æ±‚å—ä¿æŠ¤çš„ API æ—¶ï¼Œéƒ½ä¼šåœ¨ HTTP è¯·æ±‚å¤´çš„ <code>Authorization</code> å­—æ®µä¸­é™„ä¸Š Tokenï¼Œæ ¼å¼é€šå¸¸ä¸º <code>Bearer &lt;token&gt;</code>ã€‚</li><li><strong>éªŒè¯ Token</strong>: æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚åï¼Œä»è¯·æ±‚å¤´ä¸­è§£æå‡º Tokenï¼Œç„¶åï¼š<ul><li>éªŒè¯ç­¾åæ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ Token æœªè¢«ç¯¡æ”¹ã€‚</li><li>æ£€æŸ¥ Token æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ï¼ˆ<code>exp</code> å£°æ˜ï¼‰ã€‚</li><li>å¦‚æœéªŒè¯é€šè¿‡ï¼Œåˆ™ä» Payload ä¸­è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œæ‰§è¡Œä¸šåŠ¡é€»è¾‘å¹¶è¿”å›ç»“æœã€‚</li><li>å¦‚æœéªŒè¯å¤±è´¥ï¼Œåˆ™è¿”å› <code>401 Unauthorized</code> é”™è¯¯ã€‚</li></ul></li></ol><h4 id="3-ä¸ºä»€ä¹ˆä½¿ç”¨-Tokenï¼Ÿï¼ˆä¸-Session-çš„åŒºåˆ«ï¼‰"><a href="#3-ä¸ºä»€ä¹ˆä½¿ç”¨-Tokenï¼Ÿï¼ˆä¸-Session-çš„åŒºåˆ«ï¼‰" class="headerlink" title="3. ä¸ºä»€ä¹ˆä½¿ç”¨ Tokenï¼Ÿï¼ˆä¸ Session çš„åŒºåˆ«ï¼‰"></a><strong>3. ä¸ºä»€ä¹ˆä½¿ç”¨ Tokenï¼Ÿï¼ˆä¸ Session çš„åŒºåˆ«ï¼‰</strong></h4><p>åœ¨ Web å¼€å‘æ—©æœŸï¼Œ<code>Session-Cookie</code> æœºåˆ¶æ˜¯ä¸»æµã€‚æœåŠ¡ç«¯åœ¨ç”¨æˆ·ç™»å½•ååˆ›å»ºä¸€ä¸ª Session å¯¹è±¡å­˜å‚¨åœ¨å†…å­˜æˆ– Redis ä¸­ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª Session IDï¼Œé€šè¿‡ Cookie è¿”å›ç»™æµè§ˆå™¨ã€‚æµè§ˆå™¨åç»­è¯·æ±‚ä¼šè‡ªåŠ¨å¸¦ä¸Šè¿™ä¸ª Session IDï¼ŒæœåŠ¡ç«¯æ ¹æ® ID æ‰¾åˆ°å¯¹åº”çš„ Session ä¿¡æ¯æ¥è¯†åˆ«ç”¨æˆ·ã€‚</p><p><strong>Token æœºåˆ¶ç›¸æ¯” Session æœºåˆ¶ï¼Œæ ¸å¿ƒä¼˜åŠ¿åœ¨äºâ€œæ— çŠ¶æ€æ€§ (Statelessness)â€</strong>ï¼Œè¿™å¸¦æ¥äº†ä»¥ä¸‹å¥½å¤„ï¼š</p><table><thead><tr><th>ç‰¹æ€§å¯¹æ¯”</th><th>Session æœºåˆ¶</th><th>Token æœºåˆ¶</th><th>ä¼˜åŠ¿è¯´æ˜</th></tr></thead><tbody><tr><td><strong>çŠ¶æ€å­˜å‚¨</strong></td><td><strong>æœ‰çŠ¶æ€ (Stateful)</strong>ã€‚Session ä¿¡æ¯éœ€å­˜å‚¨åœ¨æœåŠ¡ç«¯ã€‚</td><td><strong>æ— çŠ¶æ€ (Stateless)</strong>ã€‚ç”¨æˆ·ä¿¡æ¯åŒ…å«åœ¨ Token çš„ Payload ä¸­ï¼ŒæœåŠ¡ç«¯æ— éœ€å­˜å‚¨ã€‚</td><td><strong>å‡è½»æœåŠ¡ç«¯å‹åŠ›</strong>ã€‚æœåŠ¡ç«¯ä¸éœ€è¦ä¸ºæ¯ä¸ªåœ¨çº¿ç”¨æˆ·ç»´æŠ¤ä¸€ä¸ª Session å¯¹è±¡ã€‚</td></tr><tr><td><strong>å¯æ‰©å±•æ€§</strong></td><td><strong>å·®</strong>ã€‚åœ¨åˆ†å¸ƒå¼æˆ–é›†ç¾¤ç¯å¢ƒä¸‹ï¼Œéœ€è¦è§£å†³ Session å…±äº«é—®é¢˜ï¼ˆå¦‚ Session Stickyã€Session Replicationã€é›†ä¸­å­˜å‚¨ï¼‰ã€‚</td><td><strong>å¥½</strong>ã€‚ç”±äºæœåŠ¡ç«¯ä¸å­˜å‚¨çŠ¶æ€ï¼Œä»»ä½•ä¸€å°æœåŠ¡å™¨åªè¦æœ‰ç›¸åŒçš„å¯†é’¥ï¼Œå°±èƒ½éªŒè¯ Tokenï¼Œå¤©ç„¶é€‚åˆåˆ†å¸ƒå¼å’Œå¾®æœåŠ¡æ¶æ„ã€‚</td><td><strong>è½»æ¾å®ç°æ°´å¹³æ‰©å±•</strong>ã€‚å¢åŠ æœåŠ¡å™¨èŠ‚ç‚¹æ— éœ€é¢å¤–é…ç½® Session å…±äº«ã€‚</td></tr><tr><td><strong>è·¨åŸŸæ”¯æŒ</strong></td><td><strong>æœ‰é™</strong>ã€‚åŸºäº Cookie çš„ Session æœºåˆ¶åœ¨è·¨åŸŸï¼ˆCORSï¼‰åœºæ™¯ä¸‹å¤„ç†èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚</td><td><strong>ä¼˜ç§€</strong>ã€‚Token å¯ä»¥é€šè¿‡ HTTP è¯·æ±‚å¤´å‘é€ï¼Œä¸å—åŒæºç­–ç•¥é™åˆ¶ï¼Œéå¸¸é€‚åˆå‰åç«¯åˆ†ç¦»å’Œè·¨åŸŸ API è°ƒç”¨ã€‚</td><td><strong>é€‚åº”ç°ä»£æ¶æ„</strong>ã€‚å®Œç¾æ”¯æŒ SPAï¼ˆå•é¡µåº”ç”¨ï¼‰ã€ç§»åŠ¨ App ç­‰å¤šç§å®¢æˆ·ç«¯ã€‚</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>ä¾èµ– Cookie æœºåˆ¶ï¼Œå¯èƒ½é­å— CSRF æ”»å‡»ã€‚</td><td>å¦‚æœ Token å­˜å‚¨åœ¨ <code>localStorage</code>ï¼Œå¯èƒ½é­å— XSS æ”»å‡»ã€‚éœ€è¦ç»¼åˆè€ƒè™‘å­˜å‚¨æ–¹å¼ã€‚</td><td>ä¸¤è€…å„æœ‰å®‰å…¨é£é™©ç‚¹ï¼Œéœ€é…åˆå…¶ä»–å®‰å…¨ç­–ç•¥ã€‚Token æœºåˆ¶ä¸ä¾èµ– Cookieï¼Œæ›´çµæ´»ã€‚</td></tr><tr><td><strong>é€‚ç”¨æ€§</strong></td><td>é€‚åˆä¼ ç»Ÿçš„ã€ä¸€ä½“åŒ–çš„ Web åº”ç”¨ã€‚</td><td>é€‚åˆç°ä»£çš„ã€åˆ†å¸ƒå¼çš„ã€è·¨ç»ˆç«¯çš„ï¼ˆWeb, Mobile, IoTï¼‰åº”ç”¨æ¶æ„ã€‚</td><td>Token æ›´å…·é€šç”¨æ€§å’Œå‰ç»æ€§ã€‚</td></tr></tbody></table><h4 id="4-åŒä»¤ç‰Œç­–ç•¥-Access-Token-Refresh-Token"><a href="#4-åŒä»¤ç‰Œç­–ç•¥-Access-Token-Refresh-Token" class="headerlink" title="4. åŒä»¤ç‰Œç­–ç•¥ (Access Token + Refresh Token)"></a><strong>4. åŒä»¤ç‰Œç­–ç•¥ (Access Token + Refresh Token)</strong></h4><ul><li><strong>Q: ä¸ºä»€ä¹ˆä¸ç”¨å•ä¸ª Tokenï¼Ÿ</strong><ul><li><strong>å¦‚æœ Token æœ‰æ•ˆæœŸå¾ˆé•¿ï¼ˆå¦‚ä¸€ä¸ªæœˆï¼‰</strong>: å®‰å…¨é£é™©é«˜ã€‚ä¸€æ—¦ Token åœ¨æ­¤æœŸé—´è¢«çªƒå–ï¼Œæ”»å‡»è€…å¯ä»¥é•¿æ—¶é—´å†’å……ç”¨æˆ·èº«ä»½è¿›è¡Œæ“ä½œã€‚</li><li><strong>å¦‚æœ Token æœ‰æ•ˆæœŸå¾ˆçŸ­ï¼ˆå¦‚ 15 åˆ†é’Ÿï¼‰</strong>: ç”¨æˆ·ä½“éªŒå·®ã€‚ç”¨æˆ·éœ€è¦é¢‘ç¹åœ°é‡æ–°ç™»å½•ï¼Œè¿™æ˜¯æ— æ³•æ¥å—çš„ã€‚</li></ul></li><li><strong>A: åŒä»¤ç‰Œç­–ç•¥åº”è¿è€Œç”Ÿï¼Œå®Œç¾å¹³è¡¡äº†å®‰å…¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</strong><ul><li><strong>Access Token (è®¿é—®ä»¤ç‰Œ)</strong>: å®ƒçš„æœ‰æ•ˆæœŸ<strong>éå¸¸çŸ­</strong>ï¼ˆå¦‚ 15 åˆ†é’Ÿåˆ° 1 å°æ—¶ï¼‰ã€‚å®ƒè¢«ç”¨äºè®¿é—®å—ä¿æŠ¤çš„èµ„æºï¼Œç”±äºå…¶ç”Ÿå‘½å‘¨æœŸçŸ­ï¼Œå³ä½¿è¢«çªƒå–ï¼Œæ”»å‡»è€…èƒ½é€ æˆçš„å±å®³ä¹Ÿæœ‰é™ã€‚</li><li><strong>Refresh Token (åˆ·æ–°ä»¤ç‰Œ)</strong>: å®ƒçš„æœ‰æ•ˆæœŸ<strong>å¾ˆé•¿</strong>ï¼ˆå¦‚ 7 å¤©æˆ– 30 å¤©ï¼‰ã€‚å®ƒçš„<strong>å”¯ä¸€ä½œç”¨</strong>æ˜¯ç”¨æ¥è·å–æ–°çš„ Access Tokenã€‚Refresh Token æœ¬èº«ä¸åŒ…å«ä»»ä½•æƒé™ä¿¡æ¯ï¼Œä¸èƒ½ç”¨äºç›´æ¥è®¿é—® APIã€‚</li></ul></li><li><strong>åŒä»¤ç‰Œå·¥ä½œæµç¨‹ï¼ˆé™é»˜åˆ·æ–°ï¼‰</strong><ol><li><strong>é¦–æ¬¡ç™»å½•</strong>: ç”¨æˆ·ç™»å½•æˆåŠŸï¼ŒæœåŠ¡ç«¯è¿”å›ä¸€ä¸ªçŸ­æœŸçš„ <code>Access Token</code> å’Œä¸€ä¸ªé•¿æœŸçš„ <code>Refresh Token</code>ã€‚å®¢æˆ·ç«¯å°†ä¸¤è€…éƒ½å­˜å‚¨èµ·æ¥ã€‚</li><li><strong>æ­£å¸¸è®¿é—®</strong>: å®¢æˆ·ç«¯ä½¿ç”¨ <code>Access Token</code> è®¿é—® APIã€‚æœåŠ¡ç«¯éªŒè¯ <code>Access Token</code> é€šè¿‡ï¼Œè¿”å›æ•°æ®ã€‚</li><li><strong>Access Token è¿‡æœŸ</strong>: å®¢æˆ·ç«¯å†æ¬¡ä½¿ç”¨è¿‡æœŸçš„ <code>Access Token</code> è®¿é—® APIï¼ŒæœåŠ¡ç«¯è¿”å› <code>401 Unauthorized</code> é”™è¯¯ï¼Œå¹¶å¯èƒ½å¸¦ä¸Šä¸€ä¸ªç‰¹å®šé”™è¯¯ç ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯æ˜¯â€œä»¤ç‰Œè¿‡æœŸâ€è€Œéâ€œæ— æ•ˆä»¤ç‰Œâ€ã€‚</li><li><strong>é™é»˜åˆ·æ–°</strong>: å®¢æˆ·ç«¯çš„è¯·æ±‚æ‹¦æˆªå™¨æ•è·åˆ°è¿™ä¸ª <code>401</code> é”™è¯¯åï¼Œ<strong>ä¸ä¼šç«‹å³è·³è½¬åˆ°ç™»å½•é¡µ</strong>ã€‚è€Œæ˜¯è‡ªåŠ¨å‘èµ·ä¸€ä¸ªç‰¹æ®Šçš„è¯·æ±‚ï¼Œæºå¸¦é‚£ä¸ªé•¿æœŸçš„ <code>Refresh Token</code> å»è®¿é—®ä¸€ä¸ªä¸“é—¨çš„åˆ·æ–°æ¥å£ï¼ˆå¦‚ <code>/api/token/refresh</code>ï¼‰ã€‚</li><li><strong>ç­¾å‘æ–°ä»¤ç‰Œ</strong>: æœåŠ¡ç«¯éªŒè¯ <code>Refresh Token</code> çš„æœ‰æ•ˆæ€§ï¼ˆé€šå¸¸ä¼šå°†å…¶å­˜å‚¨åœ¨ Redis æˆ–æ•°æ®åº“ä¸­è¿›è¡Œæ¯”å¯¹ï¼Œä»¥å®ç°å¼ºåˆ¶ä¸‹çº¿åŠŸèƒ½ï¼‰ã€‚å¦‚æœéªŒè¯é€šè¿‡ï¼Œå°±ç”Ÿæˆä¸€ä¸ª<strong>æ–°çš„ Access Token</strong>ï¼ˆæœ‰æ—¶ä¹Ÿä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ <code>Refresh Token</code>ï¼Œè¿™è¢«ç§°ä¸ºåˆ·æ–°ä»¤ç‰Œæ»šåŠ¨ç­–ç•¥ï¼‰å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li><li><strong>é‡è¯•è¯·æ±‚</strong>: å®¢æˆ·ç«¯æ”¶åˆ°æ–°çš„ <code>Access Token</code> åï¼Œç”¨å®ƒæ›¿æ¢æ‰æœ¬åœ°æ—§çš„ <code>Access Token</code>ï¼Œç„¶å<strong>è‡ªåŠ¨é‡æ–°å‘é€åˆšæ‰å› ä»¤ç‰Œè¿‡æœŸè€Œå¤±è´¥çš„é‚£ä¸ªè¯·æ±‚</strong>ã€‚</li><li><strong>æ— æ„Ÿä½“éªŒ</strong>: æ•´ä¸ªè¿‡ç¨‹å¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ï¼Œç”¨æˆ·æ„Ÿè§‰ä¸åˆ°ä»¤ç‰Œå·²ç»è¿‡æœŸå¹¶è¢«åˆ·æ–°ï¼Œå®ç°äº†â€œé™é»˜åˆ·æ–°â€ï¼Œä½“éªŒéå¸¸æµç•…ã€‚</li><li><strong>Refresh Token è¿‡æœŸ</strong>: å¦‚æœ <code>Refresh Token</code> ä¹Ÿè¿‡æœŸäº†ï¼Œé‚£ä¹ˆåˆ·æ–°æ¥å£ä¼šè¿”å›é”™è¯¯ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯æ‰ä¼šçœŸæ­£æ¸…é™¤ç”¨æˆ·å‡­è¯å¹¶å¼•å¯¼ç”¨æˆ·é‡æ–°ç™»å½•ã€‚</li></ol></li></ul><h4 id="5-Token-ç›¸å…³åœºæ™¯ä¸é¢è¯•é¢˜"><a href="#5-Token-ç›¸å…³åœºæ™¯ä¸é¢è¯•é¢˜" class="headerlink" title="5. Token ç›¸å…³åœºæ™¯ä¸é¢è¯•é¢˜"></a><strong>5. Token ç›¸å…³åœºæ™¯ä¸é¢è¯•é¢˜</strong></h4><ul><li><strong>é¢è¯•é¢˜ 1ï¼šâ€œToken åº”è¯¥å­˜å‚¨åœ¨å“ªé‡Œï¼ŸlocalStorageã€sessionStorage è¿˜æ˜¯ Cookieï¼Ÿâ€</strong><ul><li><strong>å›ç­”è¦ç‚¹</strong>:<ul><li><strong>localStorage&#x2F;sessionStorage</strong>:<ul><li><strong>ä¼˜ç‚¹</strong>: æ–¹ä¾¿ JavaScript ç›´æ¥è¯»å†™ï¼Œå®¹é‡è¾ƒå¤§ï¼ˆ5MBï¼‰ã€‚</li><li><strong>ç¼ºç‚¹</strong>: å®¹æ˜“å—åˆ° <strong>XSS (è·¨ç«™è„šæœ¬æ”»å‡»)</strong>ã€‚å¦‚æœç½‘ç«™å­˜åœ¨ XSS æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥æ‰§è¡Œ JS ä»£ç ç›´æ¥çªƒå–å­˜å‚¨åœ¨å…¶ä¸­çš„ Tokenã€‚</li></ul></li><li><strong>Cookie (HttpOnly)</strong>:<ul><li><strong>ä¼˜ç‚¹</strong>: è®¾ç½®ä¸º <code>HttpOnly</code> åï¼ŒJavaScript å°†æ— æ³•è¯»å†™è¯¥ Cookieï¼Œå¯ä»¥æœ‰æ•ˆ<strong>é˜²å¾¡ XSS æ”»å‡»</strong>ã€‚æµè§ˆå™¨ä¼šè‡ªåŠ¨åœ¨åŒåŸŸè¯·æ±‚ä¸­æºå¸¦å®ƒã€‚</li><li><strong>ç¼ºç‚¹</strong>: å®¹æ˜“å—åˆ° <strong>CSRF (è·¨ç«™è¯·æ±‚ä¼ªé€ )</strong> æ”»å‡»ã€‚æ”»å‡»è€…å¯ä»¥è¯±å¯¼ç”¨æˆ·ç‚¹å‡»æ¶æ„é“¾æ¥ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¸¦ä¸Šç”¨æˆ·çš„ Cookie å»è¯·æ±‚ä½ çš„ç½‘ç«™ï¼Œæ‰§è¡Œéç”¨æˆ·æœ¬æ„çš„æ“ä½œã€‚éœ€è¦é…åˆ Anti-CSRF Token ç­‰æœºåˆ¶æ¥é˜²å¾¡ã€‚å®¹é‡è¾ƒå°ï¼ˆ4KBï¼‰ã€‚</li></ul></li><li><strong>æœ€ä½³å®è·µ&#x2F;ç»“è®º</strong>: æ²¡æœ‰ç»å¯¹å®Œç¾çš„é€‰æ‹©ï¼Œéœ€è¦æƒè¡¡ã€‚<ul><li><strong>é«˜å®‰å…¨æ€§æ–¹æ¡ˆ</strong>: å°† <code>Refresh Token</code> å­˜å‚¨åœ¨ <code>HttpOnly</code> çš„ Cookie ä¸­ï¼ˆé˜²æ­¢ XSSï¼‰ï¼Œå°† <code>Access Token</code> å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ˆå˜é‡é‡Œï¼Œé¡µé¢åˆ·æ–°ä¸¢å¤±ï¼‰æˆ– <code>sessionStorage</code> ä¸­ã€‚åŒæ—¶ï¼Œåç«¯æ¥å£å¿…é¡»å®æ–½ CSRF é˜²å¾¡ç­–ç•¥ã€‚</li><li><strong>ä¸»æµå®è·µæ–¹æ¡ˆ (å‰åç«¯åˆ†ç¦»)</strong>: å°† Token å­˜å‚¨åœ¨ <code>localStorage</code> ä¸­ï¼Œå¹¶åœ¨ <code>Authorization</code> è¯·æ±‚å¤´ä¸­æºå¸¦ã€‚åŒæ—¶ï¼Œå‰ç«¯å¿…é¡»ä¸¥æ ¼åšå¥½è¾“å…¥è¿‡æ»¤å’Œå†…å®¹è½¬ä¹‰ï¼Œå°½æœ€å¤§åŠªåŠ›é˜²æ­¢ XSS æ¼æ´çš„å‡ºç°ã€‚</li></ul></li></ul></li></ul></li><li><strong>é¢è¯•é¢˜ 2ï¼šâ€œç”¨æˆ·ç‚¹å‡»â€œé€€å‡ºç™»å½•â€æ—¶ï¼ŒToken å¦‚ä½•å¤±æ•ˆï¼Ÿâ€</strong><ul><li><strong>å›ç­”è¦ç‚¹</strong>:<ul><li><strong>å¯¹äºæ— çŠ¶æ€çš„ JWT</strong>: ç”±äºæ‰€æœ‰ä¿¡æ¯éƒ½åœ¨ Token è‡ªèº«ï¼ŒæœåŠ¡ç«¯æ— æ³•ä¸»åŠ¨è®©å…¶å¤±æ•ˆã€‚å› æ­¤ï¼Œâ€œé€€å‡ºç™»å½•â€ä¸»è¦æ˜¯ä¸€ä¸ª<strong>å®¢æˆ·ç«¯è¡Œä¸º</strong>ã€‚<ul><li><strong>å®¢æˆ·ç«¯</strong>: åªéœ€ä» <code>localStorage</code> æˆ–å…¶ä»–å­˜å‚¨ä½ç½®æ¸…é™¤ Token å³å¯ã€‚ç”¨æˆ·å°†æ— æ³•å†å‘èµ·è®¤è¯è¯·æ±‚ã€‚</li></ul></li><li><strong>å¦‚ä½•å®ç°æœåŠ¡ç«¯å¼ºåˆ¶ä¸‹çº¿ï¼Ÿ</strong>: å¦‚æœéœ€è¦å®ç°â€œè¸¢äººä¸‹çº¿â€æˆ–â€œä¿®æ”¹å¯†ç åæ‰€æœ‰è®¾å¤‡å¼ºåˆ¶ä¸‹çº¿â€çš„åŠŸèƒ½ï¼Œå°±å¿…é¡»æ‰“ç ´çº¯ç²¹çš„æ— çŠ¶æ€ã€‚<ul><li><strong>é»‘åå•æœºåˆ¶</strong>: æœåŠ¡ç«¯å¯ä»¥å»ºç«‹ä¸€ä¸ª Token é»‘åå•ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ Redis Setï¼‰ã€‚å½“ç”¨æˆ·é€€å‡ºç™»å½•æ—¶ï¼Œå°†è¯¥ Token çš„ <code>jti</code> (JWT ID) æˆ–æ•´ä¸ª Token æ”¾å…¥é»‘åå•ï¼Œå¹¶è®¾ç½®ä¸ Token å‰©ä½™æœ‰æ•ˆæœŸç›¸åŒçš„è¿‡æœŸæ—¶é—´ã€‚åœ¨æ¯æ¬¡éªŒè¯ Token æ—¶ï¼Œé™¤äº†å¸¸è§„éªŒè¯ï¼Œè¿˜éœ€æ£€æŸ¥è¯¥ Token æ˜¯å¦åœ¨é»‘åå•ä¸­ã€‚</li><li><strong>åŸºäº Refresh Token</strong>: åœ¨åŒä»¤ç‰Œæ¨¡å¼ä¸‹ï¼Œé€€å‡ºç™»å½•æ—¶åªéœ€è®©æœåŠ¡ç«¯çš„ <code>Refresh Token</code> å¤±æ•ˆï¼ˆä¾‹å¦‚ï¼Œä» Redis ä¸­åˆ é™¤ï¼‰ã€‚è¿™æ ·ç”¨æˆ·å°±æ— æ³•å†è·å–æ–°çš„ <code>Access Token</code>ï¼Œå½“æ—§çš„ <code>Access Token</code> è¿‡æœŸåï¼Œè‡ªç„¶å°±ä¸‹çº¿äº†ã€‚</li></ul></li></ul></li></ul></li><li><strong>é¢è¯•é¢˜ 3ï¼šâ€œè¯·ä½ è®¾è®¡ä¸€ä¸ªæ”¯æŒ Web ç«¯å’Œ App ç«¯ç»Ÿä¸€ç™»å½•çš„è®¤è¯ç³»ç»Ÿã€‚â€</strong><ul><li><strong>å›ç­”è¦ç‚¹</strong>:<ul><li>è¿™æ­£æ˜¯ Token è®¤è¯æœºåˆ¶çš„å…¸å‹åº”ç”¨åœºæ™¯ã€‚æˆ‘ä¼šé‡‡ç”¨åŸºäº <strong>OAuth 2.0&#x2F;OIDC</strong> æˆ–è‡ªå®šä¹‰çš„**åŒä»¤ç‰Œï¼ˆAccess&#x2F;Refresh Tokenï¼‰**æ–¹æ¡ˆã€‚</li><li><strong>ç»Ÿä¸€è®¤è¯ä¸­å¿ƒ (UAC)</strong>: å»ºç«‹ä¸€ä¸ªç‹¬ç«‹çš„è®¤è¯æœåŠ¡ï¼Œè´Ÿè´£å¤„ç†æ‰€æœ‰å®¢æˆ·ç«¯ï¼ˆWeb, iOS, Androidï¼‰çš„ç™»å½•ã€æ³¨å†Œã€Token ç­¾å‘å’Œåˆ·æ–°ã€‚</li><li><strong>API ç½‘å…³</strong>: æ‰€æœ‰ä¸šåŠ¡è¯·æ±‚éƒ½é€šè¿‡ API ç½‘å…³ã€‚ç½‘å…³çš„æ ¸å¿ƒèŒè´£ä¹‹ä¸€å°±æ˜¯<strong>ç»Ÿä¸€é‰´æƒ</strong>ã€‚å®ƒä¼šæ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼Œè§£æ <code>Authorization</code> å¤´ä¸­çš„ <code>Access Token</code>ï¼Œè°ƒç”¨è®¤è¯ä¸­å¿ƒæˆ–è‡ªè¡ŒéªŒè¯ Token çš„æœ‰æ•ˆæ€§ã€‚éªŒè¯é€šè¿‡åï¼Œå¯ä»¥å°†è§£æå‡ºçš„ç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·IDï¼‰é™„åŠ åˆ°è¯·æ±‚å¤´ä¸­ï¼Œå†è½¬å‘ç»™åç«¯çš„ä¸šåŠ¡å¾®æœåŠ¡ã€‚</li><li><strong>ä¸šåŠ¡å¾®æœåŠ¡</strong>: ä¸šåŠ¡å¾®æœåŠ¡æœ¬èº«<strong>ä¸å†å…³å¿ƒ Token çš„éªŒè¯ç»†èŠ‚</strong>ï¼Œå®ƒä»¬ä¿¡ä»»æ¥è‡ªç½‘å…³çš„è¯·æ±‚ï¼Œç›´æ¥ä»è¯·æ±‚å¤´ä¸­è·å–ç”¨æˆ·ä¿¡æ¯è¿›è¡Œä¸šåŠ¡å¤„ç†ï¼Œå®ç°äº†ä¸šåŠ¡ä¸è®¤è¯çš„è§£è€¦ã€‚</li><li><strong>æµç¨‹</strong>:<ol><li>Web&#x2F;App å®¢æˆ·ç«¯å¼•å¯¼ç”¨æˆ·åˆ°è®¤è¯ä¸­å¿ƒè¿›è¡Œç™»å½•ã€‚</li><li>ç™»å½•æˆåŠŸåï¼Œè®¤è¯ä¸­å¿ƒè¿”å› <code>Access Token</code> å’Œ <code>Refresh Token</code>ã€‚</li><li>å®¢æˆ·ç«¯ä¿å­˜ä»¤ç‰Œï¼Œåç»­è®¿é—®ä¸šåŠ¡ API æ—¶ï¼Œåœ¨è¯·æ±‚å¤´æºå¸¦ <code>Access Token</code>ã€‚</li><li>API ç½‘å…³æ‹¦æˆªè¯·æ±‚ï¼ŒéªŒè¯ <code>Access Token</code>ã€‚</li><li><code>Access Token</code> è¿‡æœŸåï¼Œå®¢æˆ·ç«¯ä½¿ç”¨ <code>Refresh Token</code> å‘è®¤è¯ä¸­å¿ƒç”³è¯·æ–°ä»¤ç‰Œã€‚</li></ol></li><li>è¿™ä¸ªæ¶æ„å…·æœ‰é«˜å†…èšã€ä½è€¦åˆã€å¯æ‰©å±•æ€§å¼ºã€å®‰å…¨æ€§é«˜çš„ä¼˜ç‚¹ã€‚</li></ul></li></ul></li></ul><h1 id="Redis-è¯¦ç»†æŠ€æœ¯è§£æ"><a href="#Redis-è¯¦ç»†æŠ€æœ¯è§£æ" class="headerlink" title="Redis è¯¦ç»†æŠ€æœ¯è§£æ"></a>Redis è¯¦ç»†æŠ€æœ¯è§£æ</h1><h2 id="Redis-æ ¸å¿ƒæ¶æ„ä¸åŸç†"><a href="#Redis-æ ¸å¿ƒæ¶æ„ä¸åŸç†" class="headerlink" title="Redis æ ¸å¿ƒæ¶æ„ä¸åŸç†"></a>Redis æ ¸å¿ƒæ¶æ„ä¸åŸç†</h2><h3 id="å†…å­˜æ¨¡å‹ä¸æ•°æ®ç»“æ„"><a href="#å†…å­˜æ¨¡å‹ä¸æ•°æ®ç»“æ„" class="headerlink" title="å†…å­˜æ¨¡å‹ä¸æ•°æ®ç»“æ„"></a>å†…å­˜æ¨¡å‹ä¸æ•°æ®ç»“æ„</h3><p>Redisé‡‡ç”¨åŸºäºå†…å­˜çš„å­˜å‚¨æ¶æ„ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨RAMä¸­ï¼Œè¿™æ˜¯å…¶é«˜æ€§èƒ½çš„æ ¹æœ¬åŸå› ã€‚Redisä½¿ç”¨äº†å¤šç§åº•å±‚æ•°æ®ç»“æ„æ¥å®ç°ä¸Šå±‚çš„æŠ½è±¡æ•°æ®ç±»å‹ï¼š</p><p><strong>SDSï¼ˆSimple Dynamic Stringï¼‰</strong> Redisæ²¡æœ‰ç›´æ¥ä½¿ç”¨Cè¯­è¨€çš„å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯æ„å»ºäº†SDSã€‚SDSåœ¨å­—ç¬¦ä¸²å¤´éƒ¨è®°å½•äº†é•¿åº¦ä¿¡æ¯ï¼Œé¿å…äº†strlençš„O(n)å¤æ‚åº¦ï¼ŒåŒæ—¶é¢„åˆ†é…ç©ºé—´å‡å°‘å†…å­˜é‡åˆ†é…æ¬¡æ•°ã€‚</p><p><strong>è·³è·ƒè¡¨ï¼ˆSkip Listï¼‰</strong> æœ‰åºé›†åˆçš„åº•å±‚å®ç°ä¹‹ä¸€ï¼Œæ˜¯ä¸€ç§éšæœºåŒ–çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡å¤šå±‚é“¾è¡¨å®ç°O(log N)çš„æŸ¥æ‰¾å¤æ‚åº¦ã€‚ç›¸æ¯”çº¢é»‘æ ‘ï¼Œè·³è·ƒè¡¨å®ç°æ›´ç®€å•ï¼Œä¸”æ”¯æŒèŒƒå›´æŸ¥è¯¢ã€‚</p><p><strong>å‹ç¼©åˆ—è¡¨ï¼ˆZiplistï¼‰</strong> å½“å“ˆå¸Œã€åˆ—è¡¨ã€æœ‰åºé›†åˆå…ƒç´ è¾ƒå°‘æ—¶ä½¿ç”¨çš„ç´§å‡‘å­˜å‚¨ç»“æ„ï¼Œæ‰€æœ‰å…ƒç´ å­˜å‚¨åœ¨ä¸€å—è¿ç»­å†…å­˜ä¸­ï¼ŒèŠ‚çœå†…å­˜ä½†æ’å…¥åˆ é™¤æ•ˆç‡è¾ƒä½ã€‚</p><p><strong>å­—å…¸ï¼ˆDictï¼‰</strong> Redisçš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œä½¿ç”¨å¼€æ”¾å¯»å€æ³•è§£å†³å“ˆå¸Œå†²çªï¼Œæ”¯æŒæ¸è¿›å¼rehashã€‚å½“è´Ÿè½½å› å­è¿‡é«˜æ—¶ï¼Œä¼šåˆ›å»ºæ–°çš„å“ˆå¸Œè¡¨å¹¶é€æ­¥è¿ç§»æ•°æ®ã€‚</p><h3 id="å•çº¿ç¨‹æ¨¡å‹ä¸äº‹ä»¶å¾ªç¯"><a href="#å•çº¿ç¨‹æ¨¡å‹ä¸äº‹ä»¶å¾ªç¯" class="headerlink" title="å•çº¿ç¨‹æ¨¡å‹ä¸äº‹ä»¶å¾ªç¯"></a>å•çº¿ç¨‹æ¨¡å‹ä¸äº‹ä»¶å¾ªç¯</h3><p>Redis 6.0ä¹‹å‰é‡‡ç”¨å•çº¿ç¨‹æ¨¡å‹å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼Œé€šè¿‡I&#x2F;Oå¤šè·¯å¤ç”¨ï¼ˆepoll&#x2F;kqueueï¼‰å®ç°é«˜å¹¶å‘ã€‚å•çº¿ç¨‹é¿å…äº†çº¿ç¨‹åˆ‡æ¢å¼€é”€å’Œå¹¶å‘æ§åˆ¶é—®é¢˜ï¼Œä½†ä¹Ÿé™åˆ¶äº†CPUåˆ©ç”¨ç‡ã€‚</p><p><strong>äº‹ä»¶å¾ªç¯æœºåˆ¶</strong> Redisä½¿ç”¨Reactoræ¨¡å¼çš„äº‹ä»¶å¾ªç¯ï¼Œåˆ†ä¸ºæ–‡ä»¶äº‹ä»¶å’Œæ—¶é—´äº‹ä»¶ï¼š</p><ul><li>æ–‡ä»¶äº‹ä»¶ï¼šå¤„ç†å®¢æˆ·ç«¯è¿æ¥ã€è¯»å†™è¯·æ±‚</li><li>æ—¶é—´äº‹ä»¶ï¼šå¤„ç†å®šæ—¶ä»»åŠ¡ï¼Œå¦‚è¿‡æœŸé”®åˆ é™¤ã€æŒä¹…åŒ–ç­‰</li></ul><p>Redis 6.0å¼•å…¥äº†å¤šçº¿ç¨‹I&#x2F;Oï¼Œä½†å‘½ä»¤æ‰§è¡Œä»æ˜¯å•çº¿ç¨‹ï¼Œå¤šçº¿ç¨‹åªç”¨äºç½‘ç»œI&#x2F;Oæ“ä½œçš„è¯»å†™ï¼Œè¿™æ ·æ—¢æé«˜äº†ç½‘ç»œå¤„ç†èƒ½åŠ›ï¼Œåˆä¿æŒäº†æ•°æ®æ“ä½œçš„åŸå­æ€§ã€‚</p><h2 id="æ•°æ®ç±»å‹è¯¦è§£ä¸åº”ç”¨åœºæ™¯"><a href="#æ•°æ®ç±»å‹è¯¦è§£ä¸åº”ç”¨åœºæ™¯" class="headerlink" title="æ•°æ®ç±»å‹è¯¦è§£ä¸åº”ç”¨åœºæ™¯"></a>æ•°æ®ç±»å‹è¯¦è§£ä¸åº”ç”¨åœºæ™¯</h2><h3 id="Stringç±»å‹"><a href="#Stringç±»å‹" class="headerlink" title="Stringç±»å‹"></a>Stringç±»å‹</h3><p>Stringæ˜¯Redisæœ€åŸºç¡€çš„æ•°æ®ç±»å‹ï¼Œåº•å±‚å¯ä»¥æ˜¯SDSã€æ•´æ•°æˆ–æµ®ç‚¹æ•°ã€‚</p><p><strong>å¸¸ç”¨å‘½ä»¤</strong>ï¼šSETã€GETã€INCRã€DECRã€APPENDã€GETRANGE <strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>ç¼“å­˜ï¼šå­˜å‚¨ç”¨æˆ·ä¼šè¯ã€é…ç½®ä¿¡æ¯</li><li>è®¡æ•°å™¨ï¼šç½‘ç«™è®¿é—®é‡ã€ç‚¹èµæ•°ï¼ˆINCRåŸå­æ€§ä¿è¯ï¼‰</li><li>åˆ†å¸ƒå¼é”ï¼šSET key value NX EX seconds</li><li>é™æµï¼šç»“åˆEXPIREå®ç°æ»‘åŠ¨çª—å£é™æµ</li></ul><h3 id="Hashç±»å‹"><a href="#Hashç±»å‹" class="headerlink" title="Hashç±»å‹"></a>Hashç±»å‹</h3><p>Hashç±»å‹é€‚åˆå­˜å‚¨å¯¹è±¡ï¼Œé¿å…äº†å°†å¯¹è±¡åºåˆ—åŒ–ä¸ºJSONå­—ç¬¦ä¸²çš„å¼€é”€ã€‚</p><p><strong>åº•å±‚å®ç°</strong>ï¼šå…ƒç´ è¾ƒå°‘æ—¶ä½¿ç”¨ziplistï¼Œå…ƒç´ è¾ƒå¤šæ—¶ä½¿ç”¨hashtable <strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼šHSET user:1001 name â€œå¼ ä¸‰â€ age 25</li><li>è´­ç‰©è½¦ï¼šHSET cart:1001 product:123 2</li><li>é…ç½®ç®¡ç†ï¼šåˆ†ç±»å­˜å‚¨ä¸åŒæ¨¡å—çš„é…ç½®</li></ul><h3 id="Listç±»å‹"><a href="#Listç±»å‹" class="headerlink" title="Listç±»å‹"></a>Listç±»å‹</h3><p>Listæ˜¯åŒå‘é“¾è¡¨å®ç°ï¼Œæ”¯æŒåœ¨ä¸¤ç«¯è¿›è¡ŒO(1)çš„æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚</p><p><strong>å¸¸ç”¨å‘½ä»¤</strong>ï¼šLPUSHã€RPUSHã€LPOPã€RPOPã€LRANGEã€BLPOP <strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>æ¶ˆæ¯é˜Ÿåˆ—ï¼šç”Ÿäº§è€…LPUSHï¼Œæ¶ˆè´¹è€…BRPOPå®ç°é˜»å¡é˜Ÿåˆ—</li><li>æœ€æ–°åˆ—è¡¨ï¼šæœ‹å‹åœˆåŠ¨æ€ã€å•†å“è¯„è®º</li><li>æ ˆå’Œé˜Ÿåˆ—ï¼šLPUSH+LPOPå®ç°æ ˆï¼ŒLPUSH+RPOPå®ç°é˜Ÿåˆ—</li></ul><h3 id="Setç±»å‹"><a href="#Setç±»å‹" class="headerlink" title="Setç±»å‹"></a>Setç±»å‹</h3><p>Setæ˜¯æ— åºé›†åˆï¼Œå…ƒç´ å”¯ä¸€ï¼Œåº•å±‚ä½¿ç”¨hashtableæˆ–intsetå®ç°ã€‚</p><p><strong>é›†åˆè¿ç®—</strong>ï¼šSINTERï¼ˆäº¤é›†ï¼‰ã€SUNIONï¼ˆå¹¶é›†ï¼‰ã€SDIFFï¼ˆå·®é›†ï¼‰ <strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>å»é‡ï¼šç»Ÿè®¡ç½‘ç«™ç‹¬ç«‹è®¿å®¢</li><li>ç¤¾äº¤å…³ç³»ï¼šå…±åŒå¥½å‹ã€æ¨èç”¨æˆ·</li><li>æ ‡ç­¾ç³»ç»Ÿï¼šç”¨æˆ·æ ‡ç­¾ã€æ–‡ç« åˆ†ç±»</li><li>æŠ½å¥–ç³»ç»Ÿï¼šSRANDMEMBERéšæœºæŠ½å–</li></ul><h3 id="Sorted-Setç±»å‹"><a href="#Sorted-Setç±»å‹" class="headerlink" title="Sorted Setç±»å‹"></a>Sorted Setç±»å‹</h3><p>æœ‰åºé›†åˆï¼Œæ¯ä¸ªå…ƒç´ å…³è”ä¸€ä¸ªåˆ†æ•°ï¼ŒæŒ‰åˆ†æ•°æ’åºã€‚åº•å±‚ä½¿ç”¨è·³è·ƒè¡¨å’Œå“ˆå¸Œè¡¨ã€‚</p><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>æ’è¡Œæ¦œï¼šæ¸¸æˆç§¯åˆ†ã€çƒ­æœæ¦œ</li><li>å»¶æ—¶é˜Ÿåˆ—ï¼šåˆ†æ•°ä¸ºæ‰§è¡Œæ—¶é—´æˆ³</li><li>èŒƒå›´æŸ¥è¯¢ï¼šæŒ‰æ—¶é—´ã€æŒ‰åˆ†æ•°èŒƒå›´è·å–æ•°æ®</li></ul><h2 id="æŒä¹…åŒ–æœºåˆ¶æ·±åº¦è§£æ"><a href="#æŒä¹…åŒ–æœºåˆ¶æ·±åº¦è§£æ" class="headerlink" title="æŒä¹…åŒ–æœºåˆ¶æ·±åº¦è§£æ"></a>æŒä¹…åŒ–æœºåˆ¶æ·±åº¦è§£æ</h2><h3 id="RDBæŒä¹…åŒ–"><a href="#RDBæŒä¹…åŒ–" class="headerlink" title="RDBæŒä¹…åŒ–"></a>RDBæŒä¹…åŒ–</h3><p>RDBé€šè¿‡forkå­è¿›ç¨‹ï¼Œå°†å†…å­˜æ•°æ®å¿«ç…§å†™å…¥ç£ç›˜ã€‚</p><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li>æ–‡ä»¶ç´§å‡‘ï¼Œé€‚åˆå¤‡ä»½å’Œç¾éš¾æ¢å¤</li><li>æ¢å¤é€Ÿåº¦å¿«</li><li>å¯¹Redisæ€§èƒ½å½±å“å°ï¼ˆå­è¿›ç¨‹æ“ä½œï¼‰</li></ul><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>æ•°æ®ä¸¢å¤±é£é™©ï¼šä¸¤æ¬¡å¿«ç…§é—´çš„æ•°æ®å¯èƒ½ä¸¢å¤±</li><li>forkè¿‡ç¨‹ä¼šé˜»å¡ä¸»è¿›ç¨‹</li><li>å¤§æ•°æ®é›†forkè€—æ—¶è¾ƒé•¿</li></ul><p><strong>è§¦å‘æ¡ä»¶</strong>ï¼š</p><ul><li>æ‰‹åŠ¨æ‰§è¡ŒSAVEæˆ–BGSAVEå‘½ä»¤</li><li>é…ç½®è‡ªåŠ¨è§¦å‘ï¼šsave 900 1ï¼ˆ900ç§’å†…è‡³å°‘1ä¸ªé”®æ”¹å˜ï¼‰</li><li>ä¸»ä»å¤åˆ¶æ—¶è‡ªåŠ¨ç”ŸæˆRDB</li></ul><h3 id="AOFæŒä¹…åŒ–"><a href="#AOFæŒä¹…åŒ–" class="headerlink" title="AOFæŒä¹…åŒ–"></a>AOFæŒä¹…åŒ–</h3><p>AOFè®°å½•æ¯ä¸ªå†™å‘½ä»¤ï¼Œé€šè¿‡é‡æ”¾å‘½ä»¤æ¢å¤æ•°æ®ã€‚</p><p><strong>å†™å…¥æ—¶æœº</strong>ï¼š</p><ul><li>alwaysï¼šæ¯ä¸ªå†™å‘½ä»¤ç«‹å³åŒæ­¥ï¼Œå®‰å…¨ä½†æ€§èƒ½ä½</li><li>everysecï¼šæ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼Œå¹³è¡¡å®‰å…¨æ€§å’Œæ€§èƒ½</li><li>noï¼šç”±æ“ä½œç³»ç»Ÿå†³å®šåŒæ­¥æ—¶æœºï¼Œæ€§èƒ½é«˜ä½†å®‰å…¨æ€§ä½</li></ul><p><strong>AOFé‡å†™</strong>ï¼š AOFæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼ŒRedisæä¾›é‡å†™æœºåˆ¶ä¼˜åŒ–ï¼š</p><ul><li>éå†å†…å­˜æ•°æ®ï¼Œç”¨æœ€å°‘å‘½ä»¤é‡å»ºAOFæ–‡ä»¶</li><li>é‡å†™æœŸé—´çš„æ–°å‘½ä»¤å†™å…¥AOFé‡å†™ç¼“å†²åŒº</li><li>åŸå­æ€§æ›¿æ¢æ—§AOFæ–‡ä»¶</li></ul><p><strong>æ··åˆæŒä¹…åŒ–</strong>ï¼š Redis 4.0å¼•å…¥RDB+AOFæ··åˆæ¨¡å¼ï¼Œé‡å†™æ—¶ä»¥RDBæ ¼å¼å†™å…¥åŸºç¡€æ•°æ®ï¼Œå¢é‡å‘½ä»¤ä»¥AOFæ ¼å¼è¿½åŠ ï¼Œå…¼é¡¾äº†æ¢å¤é€Ÿåº¦å’Œæ•°æ®å®‰å…¨ã€‚</p><h2 id="ç¼“å­˜é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"><a href="#ç¼“å­˜é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ç¼“å­˜é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"></a>ç¼“å­˜é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2><h3 id="ç¼“å­˜ç©¿é€"><a href="#ç¼“å­˜ç©¿é€" class="headerlink" title="ç¼“å­˜ç©¿é€"></a>ç¼“å­˜ç©¿é€</h3><p>æŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®ï¼Œç¼“å­˜æ— æ³•ç”Ÿæ•ˆï¼Œè¯·æ±‚ç›´è¾¾æ•°æ®åº“ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li><strong>ç©ºå€¼ç¼“å­˜</strong>ï¼šæŸ¥è¯¢ç»“æœä¸ºç©ºæ—¶ä¹Ÿç¼“å­˜ï¼Œè®¾ç½®è¾ƒçŸ­è¿‡æœŸæ—¶é—´</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (data == null) &#123;</span><br><span class="line">    redis.setex(key, 60, &quot;null&quot;);  // ç¼“å­˜ç©ºå€¼60ç§’</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼šé¢„å…ˆå°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®å“ˆå¸Œåˆ°ä½æ•°ç»„</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BloomFilter&lt;String&gt; filter = BloomFilter.create(Funnels.stringFunnel(Charset.defaultCharset()), 1000000, 0.01);</span><br><span class="line">// æŸ¥è¯¢å‰å…ˆæ£€æŸ¥å¸ƒéš†è¿‡æ»¤å™¨</span><br><span class="line">if (!filter.mightContain(key)) &#123;</span><br><span class="line">    return null;  // ä¸€å®šä¸å­˜åœ¨</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><strong>å‚æ•°æ ¡éªŒ</strong>ï¼šåœ¨APIå±‚é¢è¿›è¡Œå‚æ•°åˆæ³•æ€§æ ¡éªŒ</li></ol><h3 id="ç¼“å­˜å‡»ç©¿"><a href="#ç¼“å­˜å‡»ç©¿" class="headerlink" title="ç¼“å­˜å‡»ç©¿"></a>ç¼“å­˜å‡»ç©¿</h3><p>çƒ­ç‚¹æ•°æ®è¿‡æœŸç¬é—´ï¼Œå¤§é‡å¹¶å‘è¯·æ±‚å‡»ç©¿ç¼“å­˜ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li><strong>äº’æ–¥é”</strong>ï¼šåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®åº“å¹¶é‡å»ºç¼“å­˜</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public String getData(String key) &#123;</span><br><span class="line">    String data = redis.get(key);</span><br><span class="line">    if (data == null) &#123;</span><br><span class="line">        String lockKey = &quot;lock:&quot; + key;</span><br><span class="line">        if (redis.setnx(lockKey, &quot;1&quot;, 10)) &#123;  // è·å–é”</span><br><span class="line">            try &#123;</span><br><span class="line">                data = database.query(key);  // æŸ¥è¯¢æ•°æ®åº“</span><br><span class="line">                redis.setex(key, 3600, data);  // é‡å»ºç¼“å­˜</span><br><span class="line">            &#125; finally &#123;</span><br><span class="line">                redis.del(lockKey);  // é‡Šæ”¾é”</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            Thread.sleep(50);  // ç­‰å¾…å…¶ä»–çº¿ç¨‹é‡å»ºç¼“å­˜</span><br><span class="line">            return getData(key);  // é€’å½’é‡è¯•</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><strong>çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ</strong>ï¼šé€»è¾‘ä¸Šè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œç‰©ç†ä¸Šä¸è¿‡æœŸï¼Œå¼‚æ­¥æ›´æ–°</li><li><strong>é¢„çƒ­æœºåˆ¶</strong>ï¼šç³»ç»Ÿå¯åŠ¨æ—¶é¢„å…ˆåŠ è½½çƒ­ç‚¹æ•°æ®</li><li><strong>äºŒçº§ç¼“å­˜</strong>ï¼šL1ç¼“å­˜è¿‡æœŸåï¼Œå…ˆè¿”å›L2ç¼“å­˜æ•°æ®ï¼Œå¼‚æ­¥æ›´æ–°L1</li></ol><h3 id="ç¼“å­˜é›ªå´©"><a href="#ç¼“å­˜é›ªå´©" class="headerlink" title="ç¼“å­˜é›ªå´©"></a>ç¼“å­˜é›ªå´©</h3><p>å¤§é‡ç¼“å­˜åŒæ—¶è¿‡æœŸæˆ–Rediså®•æœºï¼Œè¯·æ±‚æ¶Œå‘æ•°æ®åº“ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li><strong>è¿‡æœŸæ—¶é—´éšæœºåŒ–</strong>ï¼šé¿å…åŒæ—¶è¿‡æœŸ</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int randomExpire = baseExpire + new Random().nextInt(300);  // åŸºç¡€æ—¶é—´+éšæœºæ—¶é—´</span><br><span class="line">redis.setex(key, randomExpire, data);</span><br></pre></td></tr></table></figure><ol><li><strong>å¤šçº§ç¼“å­˜æ¶æ„</strong>ï¼š<ul><li>L1ï¼šæœ¬åœ°ç¼“å­˜ï¼ˆå¦‚Caffeineï¼‰</li><li>L2ï¼šRedisåˆ†å¸ƒå¼ç¼“å­˜</li><li>L3ï¼šæ•°æ®åº“</li></ul></li><li><strong>é™æµé™çº§</strong>ï¼šä½¿ç”¨Sentinelã€Hystrixç­‰ç»„ä»¶</li><li><strong>Redisé«˜å¯ç”¨</strong>ï¼šä¸»ä»å¤åˆ¶ã€å“¨å…µæ¨¡å¼ã€é›†ç¾¤éƒ¨ç½²</li></ol><h3 id="ç¼“å­˜é¢„çƒ­"><a href="#ç¼“å­˜é¢„çƒ­" class="headerlink" title="ç¼“å­˜é¢„çƒ­"></a>ç¼“å­˜é¢„çƒ­</h3><p>ç³»ç»Ÿå¯åŠ¨æ—¶é¢„å…ˆåŠ è½½çƒ­ç‚¹æ•°æ®åˆ°ç¼“å­˜ã€‚</p><p><strong>å®ç°æ–¹å¼</strong>ï¼š</p><ol><li><strong>å®šæ—¶ä»»åŠ¡é¢„çƒ­</strong>ï¼šå‡Œæ™¨ä½å³°æœŸæ‰§è¡Œ</li><li><strong>æ‰‹åŠ¨é¢„çƒ­</strong>ï¼šç®¡ç†åå°è§¦å‘é¢„çƒ­ä»»åŠ¡</li><li><strong>å®æ—¶é¢„çƒ­</strong>ï¼šç›‘æ§ç³»ç»Ÿå‘ç°çƒ­ç‚¹æ•°æ®è‡ªåŠ¨é¢„çƒ­</li></ol><h2 id="æ•°æ®ä¸€è‡´æ€§ä¿è¯"><a href="#æ•°æ®ä¸€è‡´æ€§ä¿è¯" class="headerlink" title="æ•°æ®ä¸€è‡´æ€§ä¿è¯"></a>æ•°æ®ä¸€è‡´æ€§ä¿è¯</h2><h3 id="Cache-Asideæ¨¡å¼ï¼ˆæ—è·¯ç¼“å­˜ï¼‰"><a href="#Cache-Asideæ¨¡å¼ï¼ˆæ—è·¯ç¼“å­˜ï¼‰" class="headerlink" title="Cache Asideæ¨¡å¼ï¼ˆæ—è·¯ç¼“å­˜ï¼‰"></a>Cache Asideæ¨¡å¼ï¼ˆæ—è·¯ç¼“å­˜ï¼‰</h3><p>åº”ç”¨ç¨‹åºè´Ÿè´£ç»´æŠ¤ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§ã€‚</p><p><strong>è¯»æ“ä½œ</strong>ï¼š</p><ol><li>å…ˆè¯»ç¼“å­˜ï¼Œå‘½ä¸­åˆ™è¿”å›</li><li>ç¼“å­˜ä¸å‘½ä¸­ï¼ŒæŸ¥è¯¢æ•°æ®åº“</li><li>å°†æ•°æ®å†™å…¥ç¼“å­˜å¹¶è¿”å›</li></ol><p><strong>å†™æ“ä½œ</strong>ï¼š</p><ol><li>å…ˆæ›´æ–°æ•°æ®åº“</li><li>åˆ é™¤ç¼“å­˜ï¼ˆè®©ä¸‹æ¬¡è¯»å–æ—¶é‡æ–°åŠ è½½ï¼‰</li></ol><p><strong>ä¸ºä»€ä¹ˆæ˜¯åˆ é™¤è€Œä¸æ˜¯æ›´æ–°ç¼“å­˜ï¼Ÿ</strong></p><ul><li>æ›´æ–°ç¼“å­˜å¯èƒ½å­˜åœ¨å¹¶å‘é—®é¢˜</li><li>å¤æ‚æŸ¥è¯¢çš„ç¼“å­˜æ›´æ–°æˆæœ¬é«˜</li><li>åˆ é™¤ç¼“å­˜æ›´ç®€å•å¯é </li></ul><h3 id="å»¶æ—¶åŒåˆ ç­–ç•¥"><a href="#å»¶æ—¶åŒåˆ ç­–ç•¥" class="headerlink" title="å»¶æ—¶åŒåˆ ç­–ç•¥"></a>å»¶æ—¶åŒåˆ ç­–ç•¥</h3><p>è§£å†³è¯»å†™å¹¶å‘å¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚</p><p><strong>å®ç°æ­¥éª¤</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public void updateData(String key, Object data) &#123;</span><br><span class="line">    // 1. åˆ é™¤ç¼“å­˜</span><br><span class="line">    redis.del(key);</span><br><span class="line">    </span><br><span class="line">    // 2. æ›´æ–°æ•°æ®åº“</span><br><span class="line">    database.update(data);</span><br><span class="line">    </span><br><span class="line">    // 3. å»¶æ—¶åˆ é™¤ç¼“å­˜ï¼ˆå¼‚æ­¥ï¼‰</span><br><span class="line">    CompletableFuture.runAsync(() -&gt; &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(500);  // å»¶æ—¶500ms</span><br><span class="line">            redis.del(key);     // å†æ¬¡åˆ é™¤ç¼“å­˜</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            log.error(&quot;å»¶æ—¶åˆ é™¤ç¼“å­˜å¤±è´¥&quot;, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å»¶æ—¶æ—¶é—´è®¾ç½®</strong>ï¼šé€šå¸¸ä¸ºä¸»ä»åŒæ­¥æ—¶é—´ + è¯»æ•°æ®åº“æ—¶é—´ + å‡ åæ¯«ç§’</p><h3 id="åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æœ€ç»ˆä¸€è‡´æ€§"><a href="#åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æœ€ç»ˆä¸€è‡´æ€§" class="headerlink" title="åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æœ€ç»ˆä¸€è‡´æ€§"></a>åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æœ€ç»ˆä¸€è‡´æ€§</h3><p>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†ç¼“å­˜æ›´æ–°ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</p><p><strong>å®ç°æµç¨‹</strong>ï¼š</p><ol><li>æ›´æ–°æ•°æ®åº“ï¼Œå‘é€æ¶ˆæ¯åˆ°é˜Ÿåˆ—</li><li>æ¶ˆæ¯æ¶ˆè´¹è€…åˆ é™¤ç›¸å…³ç¼“å­˜</li><li>æ¶ˆè´¹å¤±è´¥æ—¶é‡è¯•ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// å‘é€ç¼“å­˜åˆ é™¤æ¶ˆæ¯</span><br><span class="line">@Transactional</span><br><span class="line">public void updateUser(User user) &#123;</span><br><span class="line">    userDao.update(user);  // æ›´æ–°æ•°æ®åº“</span><br><span class="line">    </span><br><span class="line">    // å‘é€ç¼“å­˜åˆ é™¤æ¶ˆæ¯ï¼ˆäº‹åŠ¡æäº¤åå‘é€ï¼‰</span><br><span class="line">    TransactionSynchronizationManager.registerSynchronization(</span><br><span class="line">        new TransactionSynchronizationAdapter() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void afterCommit() &#123;</span><br><span class="line">                cacheDeleteMQ.send(&quot;user:&quot; + user.getId());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆ"><a href="#åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆ" class="headerlink" title="åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆ"></a>åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆ</h3><p>å¯¹äºå¼ºä¸€è‡´æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡ã€‚</p><p><strong>2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰</strong>ï¼š</p><ul><li>å‡†å¤‡é˜¶æ®µï¼šåè°ƒè€…è¯¢é—®å‚ä¸è€…æ˜¯å¦å‡†å¤‡å¥½</li><li>æäº¤é˜¶æ®µï¼šæ‰€æœ‰å‚ä¸è€…éƒ½å‡†å¤‡å¥½åˆ™æäº¤ï¼Œå¦åˆ™å›æ»š</li></ul><p><strong>TCCï¼ˆTry-Confirm-Cancelï¼‰</strong>ï¼š</p><ul><li>Tryï¼šå°è¯•æ‰§è¡Œï¼Œé¢„ç•™èµ„æº</li><li>Confirmï¼šç¡®è®¤æäº¤</li><li>Cancelï¼šå–æ¶ˆæ‰§è¡Œï¼Œé‡Šæ”¾èµ„æº</li></ul><h2 id="åˆ†å¸ƒå¼é”å®ç°"><a href="#åˆ†å¸ƒå¼é”å®ç°" class="headerlink" title="åˆ†å¸ƒå¼é”å®ç°"></a>åˆ†å¸ƒå¼é”å®ç°</h2><h3 id="åŸºäºSETå‘½ä»¤çš„åˆ†å¸ƒå¼é”"><a href="#åŸºäºSETå‘½ä»¤çš„åˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäºSETå‘½ä»¤çš„åˆ†å¸ƒå¼é”"></a>åŸºäºSETå‘½ä»¤çš„åˆ†å¸ƒå¼é”</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class RedisDistributedLock &#123;</span><br><span class="line">    private Jedis jedis;</span><br><span class="line">    </span><br><span class="line">    public boolean tryLock(String lockKey, String requestId, int expireTime) &#123;</span><br><span class="line">        String result = jedis.set(lockKey, requestId, &quot;NX&quot;, &quot;PX&quot;, expireTime);</span><br><span class="line">        return &quot;OK&quot;.equals(result);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public boolean releaseLock(String lockKey, String requestId) &#123;</span><br><span class="line">        String script = &quot;if redis.call(&#x27;get&#x27;, KEYS[1]) == ARGV[1] then &quot; +</span><br><span class="line">                       &quot;return redis.call(&#x27;del&#x27;, KEYS[1]) else return 0 end&quot;;</span><br><span class="line">        Object result = jedis.eval(script, Collections.singletonList(lockKey),</span><br><span class="line">                                 Collections.singletonList(requestId));</span><br><span class="line">        return &quot;1&quot;.equals(result.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">String lockKey = &quot;lock:user:1001&quot;;</span><br><span class="line">String requestId = UUID.randomUUID().toString();</span><br><span class="line"></span><br><span class="line">if (tryLock(lockKey, requestId, 30000)) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        // æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span><br><span class="line">        doSomething();</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        releaseLock(lockKey, requestId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Redlockç®—æ³•"><a href="#Redlockç®—æ³•" class="headerlink" title="Redlockç®—æ³•"></a>Redlockç®—æ³•</h3><p>ä¸ºäº†è§£å†³å•ç‚¹æ•…éšœé—®é¢˜ï¼ŒRediså®˜æ–¹æå‡ºäº†Redlockç®—æ³•ã€‚</p><p><strong>ç®—æ³•æ­¥éª¤</strong>ï¼š</p><ol><li>è·å–å½“å‰æ—¶é—´æˆ³</li><li>ä¾æ¬¡å‘Nä¸ªRediså®ä¾‹ç”³è¯·é”</li><li>å¦‚æœåœ¨å¤§å¤šæ•°å®ä¾‹ï¼ˆN&#x2F;2+1ï¼‰ä¸Šè·å–é”æˆåŠŸï¼Œä¸”æ€»è€—æ—¶å°äºé”è¶…æ—¶æ—¶é—´ï¼Œåˆ™è®¤ä¸ºè·å–é”æˆåŠŸ</li><li>é”çš„æœ‰æ•ˆæ—¶é—´ &#x3D; åˆå§‹æœ‰æ•ˆæ—¶é—´ - è·å–é”æ¶ˆè€—çš„æ—¶é—´</li><li>é‡Šæ”¾é”æ—¶ï¼Œå‘æ‰€æœ‰Rediså®ä¾‹å‘é€é‡Šæ”¾å‘½ä»¤</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class Redlock &#123;</span><br><span class="line">    private List&lt;Jedis&gt; jedisInstances;</span><br><span class="line">    </span><br><span class="line">    public boolean lock(String resource, int ttl) &#123;</span><br><span class="line">        int quorum = jedisInstances.size() / 2 + 1;</span><br><span class="line">        int successCount = 0;</span><br><span class="line">        long startTime = System.currentTimeMillis();</span><br><span class="line">        </span><br><span class="line">        for (Jedis jedis : jedisInstances) &#123;</span><br><span class="line">            if (lockInstance(jedis, resource, ttl)) &#123;</span><br><span class="line">                successCount++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        long elapsedTime = System.currentTimeMillis() - startTime;</span><br><span class="line">        if (successCount &gt;= quorum &amp;&amp; elapsedTime &lt; ttl) &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            unlock(resource);  // é‡Šæ”¾å·²è·å–çš„é”</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é”çš„é—®é¢˜ä¸ä¼˜åŒ–"><a href="#é”çš„é—®é¢˜ä¸ä¼˜åŒ–" class="headerlink" title="é”çš„é—®é¢˜ä¸ä¼˜åŒ–"></a>é”çš„é—®é¢˜ä¸ä¼˜åŒ–</h3><p><strong>é”è¶…æ—¶é—®é¢˜</strong>ï¼š ä¸šåŠ¡æ‰§è¡Œæ—¶é—´è¶…è¿‡é”è¶…æ—¶æ—¶é—´ï¼Œé”è‡ªåŠ¨é‡Šæ”¾ï¼Œå¯èƒ½å¯¼è‡´å¹¶å‘é—®é¢˜ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li><strong>çœ‹é—¨ç‹—æœºåˆ¶</strong>ï¼šå®šæ—¶ç»­æœŸé”çš„è¿‡æœŸæ—¶é—´</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class WatchDog &#123;</span><br><span class="line">    private ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);</span><br><span class="line">    </span><br><span class="line">    public void startWatchDog(String lockKey, String requestId) &#123;</span><br><span class="line">        scheduler.scheduleAtFixedRate(() -&gt; &#123;</span><br><span class="line">            // ç»­æœŸé”</span><br><span class="line">            String script = &quot;if redis.call(&#x27;get&#x27;, KEYS[1]) == ARGV[1] then &quot; +</span><br><span class="line">                           &quot;return redis.call(&#x27;expire&#x27;, KEYS[1], ARGV[2]) else return 0 end&quot;;</span><br><span class="line">            jedis.eval(script, Arrays.asList(lockKey), </span><br><span class="line">                      Arrays.asList(requestId, &quot;30&quot;));</span><br><span class="line">        &#125;, 10, 10, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><strong>åˆç†è¯„ä¼°ä¸šåŠ¡æ‰§è¡Œæ—¶é—´</strong>ï¼šè®¾ç½®è¶³å¤Ÿçš„é”è¶…æ—¶æ—¶é—´</li></ol><p><strong>é”ç«äº‰æ¿€çƒˆé—®é¢˜</strong>ï¼š å¤§é‡çº¿ç¨‹ç«äº‰åŒä¸€æŠŠé”ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li><strong>åˆ†æ®µé”</strong>ï¼šå°†èµ„æºåˆ†æ®µï¼Œå‡å°‘é”ç«äº‰</li><li><strong>é˜Ÿåˆ—é”</strong>ï¼šä½¿ç”¨Listå®ç°å…¬å¹³é”</li><li><strong>è‡ªæ—‹é”ä¼˜åŒ–</strong>ï¼šé€‚å½“çš„é€€é¿ç®—æ³•</li></ol><h2 id="æ‚²è§‚é”ä¸ä¹è§‚é”"><a href="#æ‚²è§‚é”ä¸ä¹è§‚é”" class="headerlink" title="æ‚²è§‚é”ä¸ä¹è§‚é”"></a>æ‚²è§‚é”ä¸ä¹è§‚é”</h2><h3 id="æ‚²è§‚é”"><a href="#æ‚²è§‚é”" class="headerlink" title="æ‚²è§‚é”"></a>æ‚²è§‚é”</h3><p>å‡è®¾ä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œåœ¨æ“ä½œæ•°æ®å‰å…ˆè·å–é”ã€‚</p><p><strong>Rediså®ç°</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// ä½¿ç”¨Redisåˆ†å¸ƒå¼é”å®ç°æ‚²è§‚é”</span><br><span class="line">public void updateWithPessimisticLock(String userId, int amount) &#123;</span><br><span class="line">    String lockKey = &quot;lock:account:&quot; + userId;</span><br><span class="line">    String requestId = UUID.randomUUID().toString();</span><br><span class="line">    </span><br><span class="line">    if (tryLock(lockKey, requestId, 30000)) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            // æŸ¥è¯¢è´¦æˆ·ä½™é¢</span><br><span class="line">            int balance = getBalance(userId);</span><br><span class="line">            if (balance &gt;= amount) &#123;</span><br><span class="line">                // æ‰£å‡ä½™é¢</span><br><span class="line">                updateBalance(userId, balance - amount);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                throw new InsufficientBalanceException();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            releaseLock(lockKey, requestId);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        throw new LockAcquisitionException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="headerlink" title="ä¹è§‚é”"></a>ä¹è§‚é”</h3><p>å‡è®¾ä¸ä¼šå‘ç”Ÿå†²çªï¼Œåœ¨æ›´æ–°æ—¶æ£€æŸ¥æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹ã€‚</p><p><strong>åŸºäºç‰ˆæœ¬å·çš„ä¹è§‚é”</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public boolean updateWithOptimisticLock(String userId, int amount, int expectedVersion) &#123;</span><br><span class="line">    // ä½¿ç”¨Luaè„šæœ¬ä¿è¯åŸå­æ€§</span><br><span class="line">    String script = </span><br><span class="line">        &quot;local current = redis.call(&#x27;hmget&#x27;, KEYS[1], &#x27;balance&#x27;, &#x27;version&#x27;) &quot; +</span><br><span class="line">        &quot;if current[2] == ARGV[2] then &quot; +</span><br><span class="line">        &quot;  if tonumber(current[1]) &gt;= tonumber(ARGV[1]) then &quot; +</span><br><span class="line">        &quot;    redis.call(&#x27;hmset&#x27;, KEYS[1], &#x27;balance&#x27;, current[1] - ARGV[1], &#x27;version&#x27;, current[2] + 1) &quot; +</span><br><span class="line">        &quot;    return 1 &quot; +</span><br><span class="line">        &quot;  else &quot; +</span><br><span class="line">        &quot;    return -1 &quot; +  // ä½™é¢ä¸è¶³</span><br><span class="line">        &quot;  end &quot; +</span><br><span class="line">        &quot;else &quot; +</span><br><span class="line">        &quot;  return 0 &quot; +     // ç‰ˆæœ¬å·ä¸åŒ¹é…</span><br><span class="line">        &quot;end&quot;;</span><br><span class="line">    </span><br><span class="line">    String key = &quot;account:&quot; + userId;</span><br><span class="line">    Object result = jedis.eval(script, Arrays.asList(key), </span><br><span class="line">                              Arrays.asList(String.valueOf(amount), String.valueOf(expectedVersion)));</span><br><span class="line">    </span><br><span class="line">    int code = ((Long) result).intValue();</span><br><span class="line">    if (code == 1) &#123;</span><br><span class="line">        return true;  // æ›´æ–°æˆåŠŸ</span><br><span class="line">    &#125; else if (code == 0) &#123;</span><br><span class="line">        throw new OptimisticLockException(&quot;æ•°æ®å·²è¢«ä¿®æ”¹&quot;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        throw new InsufficientBalanceException(&quot;ä½™é¢ä¸è¶³&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åŸºäºCASçš„ä¹è§‚é”</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public void updateWithCAS(String key, Function&lt;String, String&gt; updater) &#123;</span><br><span class="line">    while (true) &#123;</span><br><span class="line">        // 1. è·å–å½“å‰å€¼</span><br><span class="line">        String currentValue = redis.get(key);</span><br><span class="line">        </span><br><span class="line">        // 2. è®¡ç®—æ–°å€¼</span><br><span class="line">        String newValue = updater.apply(currentValue);</span><br><span class="line">        </span><br><span class="line">        // 3. CASæ›´æ–°</span><br><span class="line">        String script = &quot;if redis.call(&#x27;get&#x27;, KEYS[1]) == ARGV[1] then &quot; +</span><br><span class="line">                       &quot;return redis.call(&#x27;set&#x27;, KEYS[1], ARGV[2]) else return nil end&quot;;</span><br><span class="line">        Object result = redis.eval(script, Arrays.asList(key), </span><br><span class="line">                                  Arrays.asList(currentValue, newValue));</span><br><span class="line">        </span><br><span class="line">        if (result != null) &#123;</span><br><span class="line">            break;  // æ›´æ–°æˆåŠŸ</span><br><span class="line">        &#125;</span><br><span class="line">        // æ›´æ–°å¤±è´¥ï¼Œé‡è¯•</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‚²è§‚é”-vs-ä¹è§‚é”é€‰æ‹©"><a href="#æ‚²è§‚é”-vs-ä¹è§‚é”é€‰æ‹©" class="headerlink" title="æ‚²è§‚é” vs ä¹è§‚é”é€‰æ‹©"></a>æ‚²è§‚é” vs ä¹è§‚é”é€‰æ‹©</h3><p><strong>æ‚²è§‚é”é€‚ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>å†™æ“ä½œé¢‘ç¹ï¼Œå†²çªæ¦‚ç‡é«˜</li><li>ä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œé‡è¯•æˆæœ¬é«˜</li><li>å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä¸¥æ ¼</li></ul><p><strong>ä¹è§‚é”é€‚ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>è¯»å¤šå†™å°‘ï¼Œå†²çªæ¦‚ç‡ä½</li><li>ä¸šåŠ¡é€»è¾‘ç®€å•ï¼Œé‡è¯•æˆæœ¬ä½</li><li>å¯¹æ€§èƒ½è¦æ±‚é«˜</li></ul><h2 id="é«˜å¯ç”¨æ¶æ„"><a href="#é«˜å¯ç”¨æ¶æ„" class="headerlink" title="é«˜å¯ç”¨æ¶æ„"></a>é«˜å¯ç”¨æ¶æ„</h2><h3 id="ä¸»ä»å¤åˆ¶"><a href="#ä¸»ä»å¤åˆ¶" class="headerlink" title="ä¸»ä»å¤åˆ¶"></a>ä¸»ä»å¤åˆ¶</h3><p>Masterè´Ÿè´£å†™æ“ä½œï¼ŒSlaveè´Ÿè´£è¯»æ“ä½œï¼Œé€šè¿‡å¤åˆ¶å®ç°æ•°æ®åŒæ­¥ã€‚</p><p><strong>å¤åˆ¶åŸç†</strong>ï¼š</p><ol><li>Slaveå‘Masterå‘é€PSYNCå‘½ä»¤</li><li>Masteræ‰§è¡ŒBGSAVEç”ŸæˆRDBæ–‡ä»¶</li><li>Masterå°†RDBæ–‡ä»¶å‘é€ç»™Slave</li><li>Slaveè½½å…¥RDBæ–‡ä»¶</li><li>Masterå°†ç¼“å†²åŒºçš„å†™å‘½ä»¤å‘é€ç»™Slave</li><li>åç»­å†™å‘½ä»¤å®æ—¶åŒæ­¥</li></ol><p><strong>éƒ¨åˆ†é‡åŒæ­¥</strong>ï¼š ç½‘ç»œæ–­è¿åï¼ŒSlaveåªéœ€è¦åŒæ­¥æ–­è¿æœŸé—´çš„å‘½ä»¤ï¼Œè€Œä¸æ˜¯å®Œæ•´é‡åŒæ­¥ã€‚</p><h3 id="å“¨å…µæ¨¡å¼ï¼ˆSentinelï¼‰"><a href="#å“¨å…µæ¨¡å¼ï¼ˆSentinelï¼‰" class="headerlink" title="å“¨å…µæ¨¡å¼ï¼ˆSentinelï¼‰"></a>å“¨å…µæ¨¡å¼ï¼ˆSentinelï¼‰</h3><p>å“¨å…µè´Ÿè´£ç›‘æ§MasterçŠ¶æ€ï¼Œåœ¨Masteræ•…éšœæ—¶è‡ªåŠ¨è¿›è¡Œæ•…éšœè½¬ç§»ã€‚</p><p><strong>å“¨å…µèŒè´£</strong>ï¼š</p><ul><li>ç›‘æ§ï¼šå®šæœŸping Masterå’ŒSlave</li><li>é€šçŸ¥ï¼šæ•…éšœæ—¶é€šçŸ¥ç®¡ç†å‘˜å’Œå®¢æˆ·ç«¯</li><li>æ•…éšœè½¬ç§»ï¼šè‡ªåŠ¨å°†Slaveæå‡ä¸ºæ–°Master</li><li>é…ç½®ç®¡ç†ï¼šä¸ºå®¢æˆ·ç«¯æä¾›æœåŠ¡å‘ç°</li></ul><p><strong>æ•…éšœè½¬ç§»æµç¨‹</strong>ï¼š</p><ol><li>å“¨å…µå‘ç°Masterä¸‹çº¿ï¼ˆä¸»è§‚ä¸‹çº¿ï¼‰</li><li>å¤šä¸ªå“¨å…µç¡®è®¤Masterä¸‹çº¿ï¼ˆå®¢è§‚ä¸‹çº¿ï¼‰</li><li>é€‰ä¸¾é¢†å¯¼å“¨å…µæ‰§è¡Œæ•…éšœè½¬ç§»</li><li>é€‰æ‹©åˆé€‚çš„Slaveä½œä¸ºæ–°Master</li><li>ä¿®æ”¹å…¶ä»–Slaveçš„é…ç½®æŒ‡å‘æ–°Master</li><li>é€šçŸ¥å®¢æˆ·ç«¯Masteråœ°å€å˜æ›´</li></ol><h3 id="é›†ç¾¤æ¨¡å¼ï¼ˆClusterï¼‰"><a href="#é›†ç¾¤æ¨¡å¼ï¼ˆClusterï¼‰" class="headerlink" title="é›†ç¾¤æ¨¡å¼ï¼ˆClusterï¼‰"></a>é›†ç¾¤æ¨¡å¼ï¼ˆClusterï¼‰</h3><p>Redis Clusteré€šè¿‡åˆ†ç‰‡å®ç°æ¨ªå‘æ‰©å±•å’Œé«˜å¯ç”¨ã€‚</p><p><strong>åˆ†ç‰‡ç®—æ³•</strong>ï¼š ä½¿ç”¨CRC16ç®—æ³•è®¡ç®—keyçš„å“ˆå¸Œå€¼ï¼Œç„¶åå¯¹16384å–æ¨¡å¾—åˆ°æ§½ä½å·ã€‚</p><p><strong>èŠ‚ç‚¹é€šä¿¡</strong>ï¼š ä½¿ç”¨Gossipåè®®åœ¨èŠ‚ç‚¹é—´äº¤æ¢çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬èŠ‚ç‚¹ä¸Šçº¿&#x2F;ä¸‹çº¿ã€æ§½ä½åˆ†é…ç­‰ã€‚</p><p><strong>æ•…éšœè½¬ç§»</strong>ï¼š å½“MasterèŠ‚ç‚¹æ•…éšœæ—¶ï¼Œå…¶Slaveè‡ªåŠ¨æå‡ä¸ºæ–°Masterï¼Œè¿‡ç¨‹å¯¹å®¢æˆ·ç«¯é€æ˜ã€‚</p><p><strong>æ•°æ®è¿ç§»</strong>ï¼š é›†ç¾¤æ‰©å®¹æ—¶ï¼Œéœ€è¦å°†éƒ¨åˆ†æ§½ä½ä»ç°æœ‰èŠ‚ç‚¹è¿ç§»åˆ°æ–°èŠ‚ç‚¹ã€‚</p><h2 id="æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–"><a href="#æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–"></a>æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–</h2><h3 id="æ…¢æŸ¥è¯¢æ—¥å¿—"><a href="#æ…¢æŸ¥è¯¢æ—¥å¿—" class="headerlink" title="æ…¢æŸ¥è¯¢æ—¥å¿—"></a>æ…¢æŸ¥è¯¢æ—¥å¿—</h3><p>Redisæä¾›æ…¢æŸ¥è¯¢æ—¥å¿—åŠŸèƒ½ï¼Œè®°å½•æ‰§è¡Œæ—¶é—´è¶…è¿‡é˜ˆå€¼çš„å‘½ä»¤ã€‚</p><p><strong>é…ç½®å‚æ•°</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">slowlog-log-slower-than 10000  # è¶…è¿‡10æ¯«ç§’è®°å½•</span><br><span class="line">slowlog-max-len 128           # æœ€å¤šä¿å­˜128æ¡è®°å½•</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹æ…¢æŸ¥è¯¢</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SLOWLOG GET 10  # è·å–æœ€è¿‘10æ¡æ…¢æŸ¥è¯¢</span><br></pre></td></tr></table></figure><h3 id="å†…å­˜åˆ†æ"><a href="#å†…å­˜åˆ†æ" class="headerlink" title="å†…å­˜åˆ†æ"></a>å†…å­˜åˆ†æ</h3><p>ä½¿ç”¨MEMORYå‘½ä»¤åˆ†æå†…å­˜ä½¿ç”¨æƒ…å†µã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MEMORY USAGE key         # æŸ¥çœ‹keyå ç”¨å†…å­˜</span><br><span class="line">MEMORY STATS            # æŸ¥çœ‹å†…å­˜ç»Ÿè®¡ä¿¡æ¯</span><br><span class="line">MEMORY DOCTOR           # å†…å­˜ä½¿ç”¨å»ºè®®</span><br></pre></td></tr></table></figure><h3 id="æ€§èƒ½ä¼˜åŒ–å»ºè®®"><a href="#æ€§èƒ½ä¼˜åŒ–å»ºè®®" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–å»ºè®®"></a>æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3><p><strong>é¿å…å¤§key</strong>ï¼š</p><ul><li>å•ä¸ªkeyçš„valueä¸è¦è¶…è¿‡10KB</li><li>é›†åˆç±»å‹å…ƒç´ æ•°é‡æ§åˆ¶åœ¨åˆç†èŒƒå›´</li><li>ä½¿ç”¨SCANä»£æ›¿KEYSå‘½ä»¤</li></ul><p><strong>åˆç†ä½¿ç”¨æ•°æ®ç»“æ„</strong>ï¼š</p><ul><li>å°å¯¹è±¡ä½¿ç”¨Hashè€Œä¸æ˜¯å¤šä¸ªString</li><li>åˆç†è®¾ç½®ziplistç­‰å‹ç¼©ç»“æ„çš„é˜ˆå€¼</li><li>ä½¿ç”¨ä½å›¾(bitmap)å­˜å‚¨å¸ƒå°”ç±»å‹å¤§æ•°æ®é›†</li></ul><p><strong>ç½‘ç»œä¼˜åŒ–</strong>ï¼š</p><ul><li>ä½¿ç”¨Pipelineæ‰¹é‡æ“ä½œ</li><li>åˆç†è®¾ç½®å®¢æˆ·ç«¯è¿æ¥æ± </li><li>å¯ç”¨TCP_NODELAYé€‰é¡¹</li></ul><p><strong>æŒä¹…åŒ–ä¼˜åŒ–</strong>ï¼š</p><ul><li>æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©RDBæˆ–AOF</li><li>åˆç†é…ç½®è‡ªåŠ¨ä¿å­˜æ¡ä»¶</li><li>åœ¨ä»èŠ‚ç‚¹ä¸Šè¿›è¡ŒæŒä¹…åŒ–æ“ä½œ</li></ul><p>è¿™äº›è¯¦ç»†çš„æŠ€æœ¯ç‚¹æ¶µç›–äº†Redisçš„æ ¸å¿ƒæ¦‚å¿µã€å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆå’Œå®é™…åº”ç”¨åœºæ™¯ï¼Œæ˜¯RedisæŠ€æœ¯é¢è¯•çš„é‡è¦è€ƒæŸ¥å†…å®¹ã€‚æŒæ¡è¿™äº›çŸ¥è¯†ç‚¹å¹¶èƒ½ç»“åˆå®é™…é¡¹ç›®ç»éªŒè¿›è¡Œè¯´æ˜ï¼Œå°†å¤§å¤§æé«˜é¢è¯•é€šè¿‡ç‡ã€‚</p><h2 id="å†…å­˜ç®¡ç†ä¸æ·˜æ±°æœºåˆ¶"><a href="#å†…å­˜ç®¡ç†ä¸æ·˜æ±°æœºåˆ¶" class="headerlink" title="å†…å­˜ç®¡ç†ä¸æ·˜æ±°æœºåˆ¶"></a>å†…å­˜ç®¡ç†ä¸æ·˜æ±°æœºåˆ¶</h2><h3 id="å†…å­˜æ·˜æ±°ç­–ç•¥è¯¦è§£"><a href="#å†…å­˜æ·˜æ±°ç­–ç•¥è¯¦è§£" class="headerlink" title="å†…å­˜æ·˜æ±°ç­–ç•¥è¯¦è§£"></a>å†…å­˜æ·˜æ±°ç­–ç•¥è¯¦è§£</h3><p>å½“Rediså†…å­˜ä½¿ç”¨è¾¾åˆ°maxmemoryé™åˆ¶æ—¶ï¼Œä¼šæ ¹æ®é…ç½®çš„ç­–ç•¥æ·˜æ±°æ•°æ®ã€‚</p><p><strong>8ç§æ·˜æ±°ç­–ç•¥</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># é’ˆå¯¹æ‰€æœ‰key</span><br><span class="line">noeviction          # ä¸æ·˜æ±°ï¼Œå†™å…¥è¿”å›é”™è¯¯</span><br><span class="line">allkeys-lru         # æ‰€æœ‰keyä¸­æ·˜æ±°æœ€è¿‘æœ€å°‘ä½¿ç”¨</span><br><span class="line">allkeys-lfu         # æ‰€æœ‰keyä¸­æ·˜æ±°æœ€å°‘é¢‘ç‡ä½¿ç”¨</span><br><span class="line">allkeys-random      # æ‰€æœ‰keyä¸­éšæœºæ·˜æ±°</span><br><span class="line"></span><br><span class="line"># é’ˆå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„key</span><br><span class="line">volatile-lru        # è¿‡æœŸkeyä¸­æ·˜æ±°æœ€è¿‘æœ€å°‘ä½¿ç”¨</span><br><span class="line">volatile-lfu        # è¿‡æœŸkeyä¸­æ·˜æ±°æœ€å°‘é¢‘ç‡ä½¿ç”¨</span><br><span class="line">volatile-random     # è¿‡æœŸkeyä¸­éšæœºæ·˜æ±°</span><br><span class="line">volatile-ttl        # è¿‡æœŸkeyä¸­æ·˜æ±°å³å°†è¿‡æœŸçš„</span><br></pre></td></tr></table></figure><p><strong>LRU vs LFU å®ç°ç»†èŠ‚</strong>ï¼š Redisçš„LRUå¹¶éä¸¥æ ¼çš„LRUï¼Œè€Œæ˜¯è¿‘ä¼¼LRUç®—æ³•ï¼š</p><ul><li>æ¯ä¸ªkeyéƒ½æœ‰24ä½çš„æ—¶é’Ÿå­—æ®µè®°å½•è®¿é—®æ—¶é—´</li><li>æ·˜æ±°æ—¶éšæœºé‡‡æ ·5ä¸ªkeyï¼ˆå¯é…ç½®ï¼‰ï¼Œé€‰æ‹©æ—¶é’Ÿå€¼æœ€å°çš„</li></ul><p>LFUç®—æ³•ç»´æŠ¤è®¿é—®é¢‘ç‡ï¼š</p><ul><li>é«˜16ä½å­˜å‚¨ä¸Šæ¬¡è®¿é—®æ—¶é—´</li><li>ä½8ä½å­˜å‚¨è®¿é—®é¢‘ç‡è®¡æ•°å™¨</li><li>è®¡æ•°å™¨é‡‡ç”¨æ¦‚ç‡æ€§é€’å¢ï¼Œé¿å…é¢‘ç‡æ— é™å¢é•¿</li></ul><h3 id="å†…å­˜ç¢ç‰‡é—®é¢˜"><a href="#å†…å­˜ç¢ç‰‡é—®é¢˜" class="headerlink" title="å†…å­˜ç¢ç‰‡é—®é¢˜"></a>å†…å­˜ç¢ç‰‡é—®é¢˜</h3><p><strong>äº§ç”ŸåŸå› </strong>ï¼š</p><ul><li>é¢‘ç¹çš„æ•°æ®æ›´æ–°å¯¼è‡´å†…å­˜åˆ†é…&#x2F;é‡Šæ”¾</li><li>Redisä½¿ç”¨jemallocå†…å­˜åˆ†é…å™¨ï¼Œå­˜åœ¨å†…å­˜å¯¹é½</li><li>åˆ é™¤å¤§keyåç•™ä¸‹å†…å­˜ç©ºæ´</li></ul><p><strong>æ£€æµ‹æ–¹æ³•</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INFO memory</span><br><span class="line"># å…³æ³¨ mem_fragmentation_ratio æŒ‡æ ‡</span><br><span class="line"># æ¯”å€¼ &gt; 1.5 è¡¨ç¤ºç¢ç‰‡è¾ƒå¤š</span><br><span class="line"># æ¯”å€¼ &lt; 1 è¡¨ç¤ºä½¿ç”¨äº†swapï¼Œæ€§èƒ½ä¸¥é‡ä¸‹é™</span><br></pre></td></tr></table></figure><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li><strong>å†…å­˜æ•´ç†</strong>ï¼ˆRedis 4.0+ï¼‰ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CONFIG SET activedefrag yes        # å¼€å¯è‡ªåŠ¨æ•´ç†</span><br><span class="line">CONFIG SET active-defrag-threshold-lower 10  # ç¢ç‰‡ç‡è¶…è¿‡10%å¯åŠ¨</span><br><span class="line">MEMORY PURGE                       # æ‰‹åŠ¨è§¦å‘æ•´ç†</span><br></pre></td></tr></table></figure><ol><li><strong>é‡å¯Redis</strong>ï¼šæœ€å½»åº•ä½†å½±å“æœåŠ¡å¯ç”¨æ€§</li><li><strong>ä¼˜åŒ–æ•°æ®ç»“æ„</strong>ï¼šå‡å°‘å°å¯¹è±¡ï¼Œä½¿ç”¨Hashå­˜å‚¨ç›¸å…³æ•°æ®</li></ol><h2 id="è¿‡æœŸç­–ç•¥ä¸åˆ é™¤æœºåˆ¶"><a href="#è¿‡æœŸç­–ç•¥ä¸åˆ é™¤æœºåˆ¶" class="headerlink" title="è¿‡æœŸç­–ç•¥ä¸åˆ é™¤æœºåˆ¶"></a>è¿‡æœŸç­–ç•¥ä¸åˆ é™¤æœºåˆ¶</h2><h3 id="ä¸‰ç§è¿‡æœŸåˆ é™¤ç­–ç•¥"><a href="#ä¸‰ç§è¿‡æœŸåˆ é™¤ç­–ç•¥" class="headerlink" title="ä¸‰ç§è¿‡æœŸåˆ é™¤ç­–ç•¥"></a>ä¸‰ç§è¿‡æœŸåˆ é™¤ç­–ç•¥</h3><p><strong>å®šæ—¶åˆ é™¤</strong>ï¼šè®¾ç½®è¿‡æœŸæ—¶é—´æ—¶åˆ›å»ºå®šæ—¶å™¨ï¼Œåˆ°æœŸç«‹å³åˆ é™¤</p><ul><li>ä¼˜ç‚¹ï¼šåŠæ—¶é‡Šæ”¾å†…å­˜</li><li>ç¼ºç‚¹ï¼šæ¶ˆè€—CPUèµ„æºåˆ›å»ºå’Œç®¡ç†å®šæ—¶å™¨</li></ul><p><strong>æƒ°æ€§åˆ é™¤</strong>ï¼šè®¿é—®keyæ—¶æ£€æŸ¥æ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸåˆ™åˆ é™¤</p><ul><li>ä¼˜ç‚¹ï¼šCPUå‹å¥½ï¼Œåªåœ¨å¿…è¦æ—¶åˆ é™¤</li><li>ç¼ºç‚¹ï¼šå†…å­˜ä¸å‹å¥½ï¼Œè¿‡æœŸkeyå¯èƒ½é•¿æœŸå ç”¨å†…å­˜</li></ul><p><strong>å®šæœŸåˆ é™¤</strong>ï¼šå®šæœŸéšæœºæ£€æŸ¥éƒ¨åˆ†keyï¼Œåˆ é™¤è¿‡æœŸçš„</p><ul><li>Redisçš„å®é™…ç­–ç•¥ï¼Œå¹³è¡¡CPUå’Œå†…å­˜ä½¿ç”¨</li></ul><h3 id="Redisè¿‡æœŸåˆ é™¤å®ç°"><a href="#Redisè¿‡æœŸåˆ é™¤å®ç°" class="headerlink" title="Redisè¿‡æœŸåˆ é™¤å®ç°"></a>Redisè¿‡æœŸåˆ é™¤å®ç°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">// ç®€åŒ–çš„è¿‡æœŸåˆ é™¤é€»è¾‘</span><br><span class="line">void activeExpireCycle(int type) &#123;</span><br><span class="line">    static int current_db = 0;</span><br><span class="line">    static int timelimit_exit = 0;</span><br><span class="line">    </span><br><span class="line">    for (int i = 0; i &lt; server.dbnum; i++) &#123;</span><br><span class="line">        redisDb *db = server.db + current_db % server.dbnum;</span><br><span class="line">        </span><br><span class="line">        int iteration = 0;</span><br><span class="line">        while (iteration &lt; 20) &#123;  // æœ€å¤šæ£€æŸ¥20ä¸ªkey</span><br><span class="line">            long sampled = 0, expired = 0;</span><br><span class="line">            </span><br><span class="line">            // éšæœºé€‰æ‹©keyæ£€æŸ¥è¿‡æœŸ</span><br><span class="line">            for (int i = 0; i &lt; 20; i++) &#123;</span><br><span class="line">                dictEntry *de = dictGetRandomKey(db-&gt;expires);</span><br><span class="line">                if (de == NULL) break;</span><br><span class="line">                </span><br><span class="line">                sampled++;</span><br><span class="line">                if (keyIsExpired(db, de)) &#123;</span><br><span class="line">                    deleteExpiredKey(db, de);</span><br><span class="line">                    expired++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            // å¦‚æœè¿‡æœŸæ¯”ä¾‹è¶…è¿‡25%ï¼Œç»§ç»­ä¸‹è½®æ£€æŸ¥</span><br><span class="line">            if (expired &gt; 5) iteration++;</span><br><span class="line">            else break;</span><br><span class="line">        &#125;</span><br><span class="line">        current_db++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®ç»“æ„åº•å±‚å®ç°æ·±åº¦è§£æ"><a href="#æ•°æ®ç»“æ„åº•å±‚å®ç°æ·±åº¦è§£æ" class="headerlink" title="æ•°æ®ç»“æ„åº•å±‚å®ç°æ·±åº¦è§£æ"></a>æ•°æ®ç»“æ„åº•å±‚å®ç°æ·±åº¦è§£æ</h2><h3 id="å‹ç¼©åˆ—è¡¨ï¼ˆZipListï¼‰æ¼”è¿›"><a href="#å‹ç¼©åˆ—è¡¨ï¼ˆZipListï¼‰æ¼”è¿›" class="headerlink" title="å‹ç¼©åˆ—è¡¨ï¼ˆZipListï¼‰æ¼”è¿›"></a>å‹ç¼©åˆ—è¡¨ï¼ˆZipListï¼‰æ¼”è¿›</h3><p>Redis 7.0ç”¨ListPackæ›¿ä»£äº†ZipListï¼Œè§£å†³äº†çº§è”æ›´æ–°é—®é¢˜ã€‚</p><p><strong>ZipListé—®é¢˜</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// ZipListç»“æ„å¯¼è‡´çš„çº§è”æ›´æ–°</span><br><span class="line">// å½“æ’å…¥å…ƒç´ å¯¼è‡´æŸä¸ªentryçš„é•¿åº¦æ”¹å˜æ—¶</span><br><span class="line">// å¯èƒ½å¼•èµ·åç»­æ‰€æœ‰entryçš„é‡æ–°ç¼–ç </span><br></pre></td></tr></table></figure><p><strong>ListPackä¼˜åŠ¿</strong>ï¼š</p><ul><li>æ¯ä¸ªå…ƒç´ ç‹¬ç«‹ç¼–ç ï¼Œé¿å…çº§è”æ›´æ–°</li><li>æ”¯æŒä»å°¾éƒ¨éå†ï¼Œæé«˜æŸäº›æ“ä½œæ•ˆç‡</li></ul><h3 id="å­—å…¸æ‰©å®¹ä¸rehash"><a href="#å­—å…¸æ‰©å®¹ä¸rehash" class="headerlink" title="å­—å…¸æ‰©å®¹ä¸rehash"></a>å­—å…¸æ‰©å®¹ä¸rehash</h3><p>Rediså­—å…¸ä½¿ç”¨å¢é‡å¼rehashé¿å…é˜»å¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">// æ¸è¿›å¼rehashå®ç°</span><br><span class="line">int dictRehash(dict *d, int n) &#123;</span><br><span class="line">    int empty_visits = n * 10;</span><br><span class="line">    </span><br><span class="line">    if (!dictIsRehashing(d)) return 0;</span><br><span class="line">    </span><br><span class="line">    while (n-- &amp;&amp; d-&gt;ht[0].used != 0) &#123;</span><br><span class="line">        // è·³è¿‡ç©ºæ¡¶</span><br><span class="line">        while (d-&gt;ht[0].table[d-&gt;rehashidx] == NULL) &#123;</span><br><span class="line">            d-&gt;rehashidx++;</span><br><span class="line">            if (--empty_visits == 0) return 1;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // è¿ç§»æ¡¶ä¸­æ‰€æœ‰å…ƒç´ </span><br><span class="line">        dictEntry *de = d-&gt;ht[0].table[d-&gt;rehashidx];</span><br><span class="line">        while (de) &#123;</span><br><span class="line">            dictEntry *nextde = de-&gt;next;</span><br><span class="line">            unsigned int h = dictHashKey(d, de-&gt;key) &amp; d-&gt;ht[1].sizemask;</span><br><span class="line">            de-&gt;next = d-&gt;ht[1].table[h];</span><br><span class="line">            d-&gt;ht[1].table[h] = de;</span><br><span class="line">            d-&gt;ht[0].used--;</span><br><span class="line">            d-&gt;ht[1].used++;</span><br><span class="line">            de = nextde;</span><br><span class="line">        &#125;</span><br><span class="line">        d-&gt;ht[0].table[d-&gt;rehashidx] = NULL;</span><br><span class="line">        d-&gt;rehashidx++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç½‘ç»œæ¨¡å‹ä¸æ€§èƒ½ä¼˜åŒ–"><a href="#ç½‘ç»œæ¨¡å‹ä¸æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="ç½‘ç»œæ¨¡å‹ä¸æ€§èƒ½ä¼˜åŒ–"></a>ç½‘ç»œæ¨¡å‹ä¸æ€§èƒ½ä¼˜åŒ–</h2><h3 id="Redis-6-0-å¤šçº¿ç¨‹I-O"><a href="#Redis-6-0-å¤šçº¿ç¨‹I-O" class="headerlink" title="Redis 6.0 å¤šçº¿ç¨‹I&#x2F;O"></a>Redis 6.0 å¤šçº¿ç¨‹I&#x2F;O</h3><p>å¤šçº¿ç¨‹åªç”¨äºç½‘ç»œI&#x2F;Oï¼Œå‘½ä»¤æ‰§è¡Œä»æ˜¯å•çº¿ç¨‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// å¤šçº¿ç¨‹I/Oå¤„ç†æµç¨‹</span><br><span class="line">void *IOThreadMain(void *myid) &#123;</span><br><span class="line">    while (1) &#123;</span><br><span class="line">        // ç­‰å¾…ä¸»çº¿ç¨‹åˆ†é…ä»»åŠ¡</span><br><span class="line">        pthread_mutex_lock(&amp;io_threads_mutex[id]);</span><br><span class="line">        </span><br><span class="line">        while (io_threads_list[id] &amp;&amp; io_threads_pending[id] == 0) &#123;</span><br><span class="line">            pthread_cond_wait(&amp;io_threads_cond[id], &amp;io_threads_mutex[id]);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // å¤„ç†è¯»å†™ä»»åŠ¡</span><br><span class="line">        listNode *ln;</span><br><span class="line">        listIter li;</span><br><span class="line">        listRewind(io_threads_list[id], &amp;li);</span><br><span class="line">        </span><br><span class="line">        while ((ln = listNext(&amp;li))) &#123;</span><br><span class="line">            client *c = listNodeValue(ln);</span><br><span class="line">            if (io_threads_op == IO_THREADS_OP_WRITE) &#123;</span><br><span class="line">                writeToClient(c, 0);</span><br><span class="line">            &#125; else if (io_threads_op == IO_THREADS_OP_READ) &#123;</span><br><span class="line">                readQueryFromClient(c-&gt;conn);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        io_threads_pending[id] = 0;</span><br><span class="line">        pthread_mutex_unlock(&amp;io_threads_mutex[id]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯è¿æ¥ç®¡ç†"><a href="#å®¢æˆ·ç«¯è¿æ¥ç®¡ç†" class="headerlink" title="å®¢æˆ·ç«¯è¿æ¥ç®¡ç†"></a>å®¢æˆ·ç«¯è¿æ¥ç®¡ç†</h3><p><strong>è¿æ¥æ± é…ç½®ä¼˜åŒ–</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// Jedisè¿æ¥æ± é…ç½®</span><br><span class="line">JedisPoolConfig config = new JedisPoolConfig();</span><br><span class="line">config.setMaxTotal(200);                    // æœ€å¤§è¿æ¥æ•°</span><br><span class="line">config.setMaxIdle(50);                      // æœ€å¤§ç©ºé—²è¿æ¥</span><br><span class="line">config.setMinIdle(10);                      // æœ€å°ç©ºé—²è¿æ¥</span><br><span class="line">config.setTestOnBorrow(true);               // è·å–è¿æ¥æ—¶æµ‹è¯•</span><br><span class="line">config.setTestOnReturn(true);               // å½’è¿˜è¿æ¥æ—¶æµ‹è¯•</span><br><span class="line">config.setTestWhileIdle(true);              // ç©ºé—²æ—¶æµ‹è¯•</span><br><span class="line">config.setTimeBetweenEvictionRunsMillis(30000);  // æ£€æŸ¥é—´éš”</span><br><span class="line">config.setNumTestsPerEvictionRun(10);       // æ¯æ¬¡æ£€æŸ¥è¿æ¥æ•°</span><br><span class="line">config.setMinEvictableIdleTimeMillis(60000);     // æœ€å°ç©ºé—²æ—¶é—´</span><br><span class="line"></span><br><span class="line">JedisPool pool = new JedisPool(config, &quot;localhost&quot;, 6379);</span><br></pre></td></tr></table></figure><p><strong>Pipelineä¼˜åŒ–</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// Pipelineæ‰¹é‡æ“ä½œ</span><br><span class="line">public void batchSet(Map&lt;String, String&gt; data) &#123;</span><br><span class="line">    try (Jedis jedis = pool.getResource()) &#123;</span><br><span class="line">        Pipeline pipeline = jedis.pipelined();</span><br><span class="line">        </span><br><span class="line">        for (Map.Entry&lt;String, String&gt; entry : data.entrySet()) &#123;</span><br><span class="line">            pipeline.set(entry.getKey(), entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        List&lt;Object&gt; results = pipeline.syncAndReturnAll();</span><br><span class="line">        // å¤„ç†ç»“æœ</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é«˜çº§æ•°æ®ç±»å‹ä¸åº”ç”¨"><a href="#é«˜çº§æ•°æ®ç±»å‹ä¸åº”ç”¨" class="headerlink" title="é«˜çº§æ•°æ®ç±»å‹ä¸åº”ç”¨"></a>é«˜çº§æ•°æ®ç±»å‹ä¸åº”ç”¨</h2><h3 id="HyperLogLog"><a href="#HyperLogLog" class="headerlink" title="HyperLogLog"></a>HyperLogLog</h3><p>ç”¨äºåŸºæ•°ç»Ÿè®¡ï¼Œå ç”¨å†…å­˜å›ºå®šï¼ˆ12KBï¼‰ï¼Œè¯¯å·®ç‡0.81%ã€‚</p><p><strong>å®ç°åŸç†</strong>ï¼š</p><ul><li>åŸºäºæ¦‚ç‡ç®—æ³•ï¼Œé€šè¿‡è§‚å¯Ÿéšæœºæ•°çš„æœ€å¤§å‰å¯¼é›¶ä¸ªæ•°ä¼°ç®—åŸºæ•°</li><li>ä½¿ç”¨è°ƒå’Œå¹³å‡æ•°å‡å°‘è¯¯å·®</li><li>é€‚ç”¨äºUVç»Ÿè®¡ç­‰åœºæ™¯</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ç½‘ç«™UVç»Ÿè®¡</span><br><span class="line">PFADD uv:20230815 user1 user2 user3</span><br><span class="line">PFCOUNT uv:20230815                    # è·å–UVæ•°é‡</span><br><span class="line">PFMERGE uv:week uv:20230815 uv:20230816  # åˆå¹¶å¤šæ—¥æ•°æ®</span><br></pre></td></tr></table></figure><h3 id="å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆRedis-Moduleï¼‰"><a href="#å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆRedis-Moduleï¼‰" class="headerlink" title="å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆRedis Moduleï¼‰"></a>å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆRedis Moduleï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Rediså¸ƒéš†è¿‡æ»¤å™¨æ¨¡å—</span><br><span class="line">BF.RESERVE myfilter 0.01 1000000       # åˆ›å»ºè¿‡æ»¤å™¨ï¼Œè¯¯æŠ¥ç‡0.01%ï¼Œé¢„æœŸå…ƒç´ 100ä¸‡</span><br><span class="line">BF.ADD myfilter &quot;user123&quot;              # æ·»åŠ å…ƒç´ </span><br><span class="line">BF.EXISTS myfilter &quot;user123&quot;           # æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</span><br><span class="line">BF.MADD myfilter item1 item2 item3     # æ‰¹é‡æ·»åŠ </span><br><span class="line">BF.MEXISTS myfilter item1 item2 item3  # æ‰¹é‡æ£€æŸ¥</span><br></pre></td></tr></table></figure><h3 id="Geoåœ°ç†ä½ç½®"><a href="#Geoåœ°ç†ä½ç½®" class="headerlink" title="Geoåœ°ç†ä½ç½®"></a>Geoåœ°ç†ä½ç½®</h3><p>åŸºäºSorted Setå®ç°ï¼Œä½¿ç”¨GeoHashç®—æ³•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># æ·»åŠ åœ°ç†ä½ç½®</span><br><span class="line">GEOADD cities 116.397128 39.916527 &quot;åŒ—äº¬&quot; 121.473701 31.230416 &quot;ä¸Šæµ·&quot;</span><br><span class="line"></span><br><span class="line"># è®¡ç®—è·ç¦»</span><br><span class="line">GEODIST cities &quot;åŒ—äº¬&quot; &quot;ä¸Šæµ·&quot; km</span><br><span class="line"></span><br><span class="line"># èŒƒå›´æŸ¥è¯¢</span><br><span class="line">GEORADIUS cities 116.397128 39.916527 1000 km WITHDIST WITHCOORD</span><br><span class="line"></span><br><span class="line"># æ ¹æ®æˆå‘˜æŸ¥è¯¢</span><br><span class="line">GEORADIUSBYMEMBER cities &quot;åŒ—äº¬&quot; 1000 km</span><br></pre></td></tr></table></figure><h2 id="å®‰å…¨æ€§é—®é¢˜ä¸é˜²æŠ¤"><a href="#å®‰å…¨æ€§é—®é¢˜ä¸é˜²æŠ¤" class="headerlink" title="å®‰å…¨æ€§é—®é¢˜ä¸é˜²æŠ¤"></a>å®‰å…¨æ€§é—®é¢˜ä¸é˜²æŠ¤</h2><h3 id="å¸¸è§å®‰å…¨æ¼æ´"><a href="#å¸¸è§å®‰å…¨æ¼æ´" class="headerlink" title="å¸¸è§å®‰å…¨æ¼æ´"></a>å¸¸è§å®‰å…¨æ¼æ´</h3><p><strong>å‘½ä»¤æ³¨å…¥</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// é”™è¯¯åšæ³•ï¼šç›´æ¥æ‹¼æ¥ç”¨æˆ·è¾“å…¥</span><br><span class="line">String key = &quot;user:&quot; + userInput;  // userInputå¯èƒ½åŒ…å«æ¶æ„å‘½ä»¤</span><br><span class="line">jedis.eval(&quot;return redis.call(&#x27;get&#x27;, &#x27;&quot; + key + &quot;&#x27;)&quot;, 0);</span><br><span class="line"></span><br><span class="line">// æ­£ç¡®åšæ³•ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢</span><br><span class="line">jedis.eval(&quot;return redis.call(&#x27;get&#x27;, KEYS[1])&quot;, 1, key);</span><br></pre></td></tr></table></figure><p><strong>æœªæˆæƒè®¿é—®</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># redis.confå®‰å…¨é…ç½®</span><br><span class="line">bind 127.0.0.1                        # ç»‘å®šæŒ‡å®šIP</span><br><span class="line">requirepass your_password              # è®¾ç½®å¯†ç </span><br><span class="line">protected-mode yes                     # å¼€å¯ä¿æŠ¤æ¨¡å¼</span><br><span class="line">port 0                                # ç¦ç”¨é»˜è®¤ç«¯å£</span><br><span class="line">port 6380                             # ä½¿ç”¨éæ ‡å‡†ç«¯å£</span><br></pre></td></tr></table></figure><p><strong>å±é™©å‘½ä»¤ç¦ç”¨</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># é‡å‘½åå±é™©å‘½ä»¤</span><br><span class="line">rename-command FLUSHDB &quot;&quot;             # ç¦ç”¨FLUSHDB</span><br><span class="line">rename-command FLUSHALL &quot;&quot;            # ç¦ç”¨FLUSHALL</span><br><span class="line">rename-command SHUTDOWN &quot;REDIS_SHUTDOWN&quot;  # é‡å‘½åSHUTDOWN</span><br><span class="line">rename-command CONFIG &quot;REDIS_CONFIG&quot;   # é‡å‘½åCONFIG</span><br></pre></td></tr></table></figure><h3 id="ACLè®¿é—®æ§åˆ¶ï¼ˆRedis-6-0-ï¼‰"><a href="#ACLè®¿é—®æ§åˆ¶ï¼ˆRedis-6-0-ï¼‰" class="headerlink" title="ACLè®¿é—®æ§åˆ¶ï¼ˆRedis 6.0+ï¼‰"></a>ACLè®¿é—®æ§åˆ¶ï¼ˆRedis 6.0+ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºç”¨æˆ·</span><br><span class="line">ACL SETUSER alice on &gt;password123 ~cached:* +get +set</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹ç”¨æˆ·æƒé™</span><br><span class="line">ACL LIST</span><br><span class="line"></span><br><span class="line"># åˆ é™¤ç”¨æˆ·</span><br><span class="line">ACL DELUSER alice</span><br><span class="line"></span><br><span class="line"># æ£€æŸ¥æƒé™</span><br><span class="line">AUTH alice password123</span><br></pre></td></tr></table></figure><h2 id="ç›‘æ§ä¸è¿ç»´"><a href="#ç›‘æ§ä¸è¿ç»´" class="headerlink" title="ç›‘æ§ä¸è¿ç»´"></a>ç›‘æ§ä¸è¿ç»´</h2><h3 id="å…³é”®ç›‘æ§æŒ‡æ ‡"><a href="#å…³é”®ç›‘æ§æŒ‡æ ‡" class="headerlink" title="å…³é”®ç›‘æ§æŒ‡æ ‡"></a>å…³é”®ç›‘æ§æŒ‡æ ‡</h3><p><strong>æ€§èƒ½æŒ‡æ ‡</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># é€šè¿‡INFOå‘½ä»¤è·å–</span><br><span class="line">INFO stats</span><br><span class="line"># å…³æ³¨æŒ‡æ ‡ï¼š</span><br><span class="line"># - instantaneous_ops_per_sec: QPS</span><br><span class="line"># - keyspace_hits/keyspace_misses: å‘½ä¸­ç‡</span><br><span class="line"># - used_cpu_sys/used_cpu_user: CPUä½¿ç”¨ç‡</span><br><span class="line"># - connected_clients: è¿æ¥æ•°</span><br><span class="line"># - blocked_clients: é˜»å¡è¿æ¥æ•°</span><br></pre></td></tr></table></figure><p><strong>å†…å­˜æŒ‡æ ‡</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INFO memory</span><br><span class="line"># å…³æ³¨æŒ‡æ ‡ï¼š</span><br><span class="line"># - used_memory: å·²ä½¿ç”¨å†…å­˜</span><br><span class="line"># - used_memory_rss: ç‰©ç†å†…å­˜å ç”¨</span><br><span class="line"># - mem_fragmentation_ratio: å†…å­˜ç¢ç‰‡ç‡</span><br><span class="line"># - used_memory_peak: å†…å­˜ä½¿ç”¨å³°å€¼</span><br></pre></td></tr></table></figure><p><strong>æŒä¹…åŒ–æŒ‡æ ‡</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INFO persistence</span><br><span class="line"># å…³æ³¨æŒ‡æ ‡ï¼š</span><br><span class="line"># - rdb_last_save_time: æœ€åRDBä¿å­˜æ—¶é—´</span><br><span class="line"># - aof_last_rewrite_time_sec: AOFé‡å†™è€—æ—¶</span><br><span class="line"># - aof_current_size: AOFæ–‡ä»¶å¤§å°</span><br></pre></td></tr></table></figure><h3 id="æ•…éšœæ’æŸ¥å¸¸ç”¨å‘½ä»¤"><a href="#æ•…éšœæ’æŸ¥å¸¸ç”¨å‘½ä»¤" class="headerlink" title="æ•…éšœæ’æŸ¥å¸¸ç”¨å‘½ä»¤"></a>æ•…éšœæ’æŸ¥å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># å®¢æˆ·ç«¯è¿æ¥ä¿¡æ¯</span><br><span class="line">CLIENT LIST</span><br><span class="line">CLIENT INFO</span><br><span class="line"></span><br><span class="line"># æ…¢æŸ¥è¯¢åˆ†æ</span><br><span class="line">SLOWLOG GET 10</span><br><span class="line">CONFIG GET slowlog-log-slower-than</span><br><span class="line"></span><br><span class="line"># å¤§keyæŸ¥æ‰¾</span><br><span class="line">MEMORY USAGE keyname</span><br><span class="line">redis-cli --bigkeys</span><br><span class="line"></span><br><span class="line"># çƒ­ç‚¹keyåˆ†æ</span><br><span class="line">redis-cli --hotkeys</span><br><span class="line"></span><br><span class="line"># å»¶è¿Ÿç›‘æ§</span><br><span class="line">LATENCY HISTORY command</span><br><span class="line">CONFIG SET latency-monitor-threshold 100</span><br></pre></td></tr></table></figure><h2 id="ç‰¹æ®Šåº”ç”¨åœºæ™¯"><a href="#ç‰¹æ®Šåº”ç”¨åœºæ™¯" class="headerlink" title="ç‰¹æ®Šåº”ç”¨åœºæ™¯"></a>ç‰¹æ®Šåº”ç”¨åœºæ™¯</h2><h3 id="åˆ†å¸ƒå¼é™æµ"><a href="#åˆ†å¸ƒå¼é™æµ" class="headerlink" title="åˆ†å¸ƒå¼é™æµ"></a>åˆ†å¸ƒå¼é™æµ</h3><p><strong>å›ºå®šçª—å£é™æµ</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class RedisRateLimiter &#123;</span><br><span class="line">    public boolean isAllowed(String key, int limit, int window) &#123;</span><br><span class="line">        long current = System.currentTimeMillis() / 1000 / window;</span><br><span class="line">        String windowKey = key + &quot;:&quot; + current;</span><br><span class="line">        </span><br><span class="line">        String script = </span><br><span class="line">            &quot;local count = redis.call(&#x27;incr&#x27;, KEYS[1]) &quot; +</span><br><span class="line">            &quot;if count == 1 then &quot; +</span><br><span class="line">            &quot;  redis.call(&#x27;expire&#x27;, KEYS[1], ARGV[1]) &quot; +</span><br><span class="line">            &quot;end &quot; +</span><br><span class="line">            &quot;return count&quot;;</span><br><span class="line">            </span><br><span class="line">        Long count = (Long) jedis.eval(script, Arrays.asList(windowKey), </span><br><span class="line">                                      Arrays.asList(String.valueOf(window)));</span><br><span class="line">        </span><br><span class="line">        return count &lt;= limit;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ»‘åŠ¨çª—å£é™æµ</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public boolean slidingWindowLimit(String key, int limit, int window) &#123;</span><br><span class="line">    long now = System.currentTimeMillis();</span><br><span class="line">    long windowStart = now - window * 1000;</span><br><span class="line">    </span><br><span class="line">    String script = </span><br><span class="line">        &quot;redis.call(&#x27;zremrangebyscore&#x27;, KEYS[1], 0, ARGV[1]) &quot; +</span><br><span class="line">        &quot;local count = redis.call(&#x27;zcard&#x27;, KEYS[1]) &quot; +</span><br><span class="line">        &quot;if count &lt; tonumber(ARGV[2]) then &quot; +</span><br><span class="line">        &quot;  redis.call(&#x27;zadd&#x27;, KEYS[1], ARGV[3], ARGV[3]) &quot; +</span><br><span class="line">        &quot;  redis.call(&#x27;expire&#x27;, KEYS[1], ARGV[4]) &quot; +</span><br><span class="line">        &quot;  return 1 &quot; +</span><br><span class="line">        &quot;else &quot; +</span><br><span class="line">        &quot;  return 0 &quot; +</span><br><span class="line">        &quot;end&quot;;</span><br><span class="line">    </span><br><span class="line">    Long result = (Long) jedis.eval(script, Arrays.asList(key),</span><br><span class="line">        Arrays.asList(String.valueOf(windowStart), String.valueOf(limit),</span><br><span class="line">                     String.valueOf(now), String.valueOf(window)));</span><br><span class="line">    </span><br><span class="line">    return result == 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ†å¸ƒå¼Session"><a href="#åˆ†å¸ƒå¼Session" class="headerlink" title="åˆ†å¸ƒå¼Session"></a>åˆ†å¸ƒå¼Session</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class RedisSessionManager &#123;</span><br><span class="line">    </span><br><span class="line">    @Autowired</span><br><span class="line">    private RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line">    </span><br><span class="line">    public void createSession(String sessionId, String userId, int timeout) &#123;</span><br><span class="line">        String key = &quot;session:&quot; + sessionId;</span><br><span class="line">        Map&lt;String, Object&gt; sessionData = new HashMap&lt;&gt;();</span><br><span class="line">        sessionData.put(&quot;userId&quot;, userId);</span><br><span class="line">        sessionData.put(&quot;createTime&quot;, System.currentTimeMillis());</span><br><span class="line">        </span><br><span class="line">        redisTemplate.opsForHash().putAll(key, sessionData);</span><br><span class="line">        redisTemplate.expire(key, timeout, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public boolean isValidSession(String sessionId) &#123;</span><br><span class="line">        String key = &quot;session:&quot; + sessionId;</span><br><span class="line">        return redisTemplate.hasKey(key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void renewSession(String sessionId, int timeout) &#123;</span><br><span class="line">        String key = &quot;session:&quot; + sessionId;</span><br><span class="line">        if (redisTemplate.hasKey(key)) &#123;</span><br><span class="line">            redisTemplate.expire(key, timeout, TimeUnit.SECONDS);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¶ˆæ¯é˜Ÿåˆ—å®ç°"><a href="#æ¶ˆæ¯é˜Ÿåˆ—å®ç°" class="headerlink" title="æ¶ˆæ¯é˜Ÿåˆ—å®ç°"></a>æ¶ˆæ¯é˜Ÿåˆ—å®ç°</h3><p><strong>åŸºäºListçš„ç®€å•é˜Ÿåˆ—</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class RedisQueue &#123;</span><br><span class="line">    // ç”Ÿäº§è€…</span><br><span class="line">    public void produce(String queue, String message) &#123;</span><br><span class="line">        jedis.lpush(queue, message);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // æ¶ˆè´¹è€…ï¼ˆé˜»å¡å¼ï¼‰</span><br><span class="line">    public String consume(String queue, int timeout) &#123;</span><br><span class="line">        List&lt;String&gt; result = jedis.brpop(timeout, queue);</span><br><span class="line">        return result != null ? result.get(1) : null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åŸºäºStreamçš„æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼ˆRedis 5.0+ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># ç”Ÿäº§æ¶ˆæ¯</span><br><span class="line">XADD mystream * field1 value1 field2 value2</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºæ¶ˆè´¹è€…ç»„</span><br><span class="line">XGROUP CREATE mystream mygroup $ MKSTREAM</span><br><span class="line"></span><br><span class="line"># æ¶ˆè´¹æ¶ˆæ¯</span><br><span class="line">XREADGROUP GROUP mygroup consumer1 COUNT 10 STREAMS mystream &gt;</span><br><span class="line"></span><br><span class="line"># ç¡®è®¤æ¶ˆæ¯</span><br><span class="line">XACK mystream mygroup message_id</span><br></pre></td></tr></table></figure><h3 id="å»¶æ—¶é˜Ÿåˆ—"><a href="#å»¶æ—¶é˜Ÿåˆ—" class="headerlink" title="å»¶æ—¶é˜Ÿåˆ—"></a>å»¶æ—¶é˜Ÿåˆ—</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public class RedisDelayQueue &#123;</span><br><span class="line">    </span><br><span class="line">    public void addDelayTask(String task, long delayTime) &#123;</span><br><span class="line">        long executeTime = System.currentTimeMillis() + delayTime;</span><br><span class="line">        jedis.zadd(&quot;delay_queue&quot;, executeTime, task);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public List&lt;String&gt; getReadyTasks() &#123;</span><br><span class="line">        long now = System.currentTimeMillis();</span><br><span class="line">        Set&lt;String&gt; tasks = jedis.zrangeByScore(&quot;delay_queue&quot;, 0, now);</span><br><span class="line">        </span><br><span class="line">        if (!tasks.isEmpty()) &#123;</span><br><span class="line">            // åŸå­æ€§åˆ é™¤å·²è·å–çš„ä»»åŠ¡</span><br><span class="line">            String script = </span><br><span class="line">                &quot;local tasks = redis.call(&#x27;zrangebyscore&#x27;, KEYS[1], 0, ARGV[1]) &quot; +</span><br><span class="line">                &quot;if #tasks &gt; 0 then &quot; +</span><br><span class="line">                &quot;  redis.call(&#x27;zremrangebyscore&#x27;, KEYS[1], 0, ARGV[1]) &quot; +</span><br><span class="line">                &quot;end &quot; +</span><br><span class="line">                &quot;return tasks&quot;;</span><br><span class="line">            </span><br><span class="line">            @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">            List&lt;String&gt; result = (List&lt;String&gt;) jedis.eval(script, </span><br><span class="line">                Arrays.asList(&quot;delay_queue&quot;), Arrays.asList(String.valueOf(now)));</span><br><span class="line">            return result;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return Collections.emptyList();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€§èƒ½è°ƒä¼˜æŠ€å·§"><a href="#æ€§èƒ½è°ƒä¼˜æŠ€å·§" class="headerlink" title="æ€§èƒ½è°ƒä¼˜æŠ€å·§"></a>æ€§èƒ½è°ƒä¼˜æŠ€å·§</h2><h3 id="å†…å­˜ä¼˜åŒ–"><a href="#å†…å­˜ä¼˜åŒ–" class="headerlink" title="å†…å­˜ä¼˜åŒ–"></a>å†…å­˜ä¼˜åŒ–</h3><p><strong>ä½¿ç”¨Hashå­˜å‚¨å°å¯¹è±¡</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// ä¸æ¨èï¼šä¸ºæ¯ä¸ªç”¨æˆ·å­—æ®µå•ç‹¬è®¾ç½®key</span><br><span class="line">jedis.set(&quot;user:1001:name&quot;, &quot;å¼ ä¸‰&quot;);</span><br><span class="line">jedis.set(&quot;user:1001:age&quot;, &quot;25&quot;);</span><br><span class="line">jedis.set(&quot;user:1001:email&quot;, &quot;zhang@example.com&quot;);</span><br><span class="line"></span><br><span class="line">// æ¨èï¼šä½¿ç”¨Hashå­˜å‚¨</span><br><span class="line">jedis.hset(&quot;user:1001&quot;, &quot;name&quot;, &quot;å¼ ä¸‰&quot;);</span><br><span class="line">jedis.hset(&quot;user:1001&quot;, &quot;age&quot;, &quot;25&quot;);</span><br><span class="line">jedis.hset(&quot;user:1001&quot;, &quot;email&quot;, &quot;zhang@example.com&quot;);</span><br></pre></td></tr></table></figure><p><strong>åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// é¿å…åŒæ—¶è¿‡æœŸå¯¼è‡´é›ªå´©</span><br><span class="line">int baseExpire = 3600;  // 1å°æ—¶</span><br><span class="line">int randomExpire = baseExpire + new Random().nextInt(300);  // å¢åŠ 0-5åˆ†é’Ÿéšæœºæ—¶é—´</span><br><span class="line">jedis.setex(key, randomExpire, value);</span><br></pre></td></tr></table></figure><h3 id="ç½‘ç»œä¼˜åŒ–"><a href="#ç½‘ç»œä¼˜åŒ–" class="headerlink" title="ç½‘ç»œä¼˜åŒ–"></a>ç½‘ç»œä¼˜åŒ–</h3><p><strong>æ‰¹é‡æ“ä½œä¼˜åŒ–</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// ä½¿ç”¨Pipeline</span><br><span class="line">Pipeline pipeline = jedis.pipelined();</span><br><span class="line">for (int i = 0; i &lt; 1000; i++) &#123;</span><br><span class="line">    pipeline.set(&quot;key&quot; + i, &quot;value&quot; + i);</span><br><span class="line">&#125;</span><br><span class="line">pipeline.sync();</span><br><span class="line"></span><br><span class="line">// æˆ–ä½¿ç”¨åŸç”Ÿæ‰¹é‡å‘½ä»¤</span><br><span class="line">Map&lt;String, String&gt; batch = new HashMap&lt;&gt;();</span><br><span class="line">// ... å¡«å……æ•°æ®</span><br><span class="line">jedis.mset(flattenMap(batch));</span><br></pre></td></tr></table></figure><h3 id="CPUä¼˜åŒ–"><a href="#CPUä¼˜åŒ–" class="headerlink" title="CPUä¼˜åŒ–"></a>CPUä¼˜åŒ–</h3><p><strong>Luaè„šæœ¬å‡å°‘ç½‘ç»œå¾€è¿”</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- åŸå­æ€§å¢åŠ åº“å­˜</span><br><span class="line">local current = redis.call(&#x27;get&#x27;, KEYS[1])</span><br><span class="line">if current == false then</span><br><span class="line">    return -1  -- keyä¸å­˜åœ¨</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">current = tonumber(current)</span><br><span class="line">if current &gt;= tonumber(ARGV[1]) then</span><br><span class="line">    redis.call(&#x27;decrby&#x27;, KEYS[1], ARGV[1])</span><br><span class="line">    return current - tonumber(ARGV[1])</span><br><span class="line">else</span><br><span class="line">    return -2  -- åº“å­˜ä¸è¶³</span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>ä½ å¥½ï¼Œæˆ‘å¾ˆä¹æ„ä¸ºä½ è¯¦ç»†è®²è§£ Redisã€‚</p><p>Redis æ˜¯ä¸€ä¸ªå¼€æºçš„ã€åŸºäºå†…å­˜çš„ã€é«˜æ€§èƒ½çš„é”®å€¼å­˜å‚¨ç³»ç»Ÿã€‚å®ƒé€šå¸¸è¢«ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚Redis æ”¯æŒå¤šç§æ•°æ®ç»“æ„ï¼Œå¦‚å­—ç¬¦ä¸²ã€å“ˆå¸Œã€åˆ—è¡¨ã€é›†åˆå’Œæœ‰åºé›†åˆï¼Œè¿™ä½¿å¾—å®ƒåœ¨å„ç§åº”ç”¨åœºæ™¯ä¸­éƒ½éå¸¸çµæ´»ã€‚</p><h3 id="Redis-çš„æ ¸å¿ƒç‰¹ç‚¹"><a href="#Redis-çš„æ ¸å¿ƒç‰¹ç‚¹" class="headerlink" title="Redis çš„æ ¸å¿ƒç‰¹ç‚¹"></a>Redis çš„æ ¸å¿ƒç‰¹ç‚¹</h3><hr><ul><li><strong>é«˜æ€§èƒ½</strong>: Redis çš„æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤è¯»å†™é€Ÿåº¦éå¸¸å¿«ã€‚é€šå¸¸ï¼Œå•ä¸ª Redis å®ä¾‹æ¯ç§’èƒ½å¤„ç†è¶…è¿‡ 10 ä¸‡æ¬¡è¯»å†™æ“ä½œã€‚</li><li><strong>ä¸°å¯Œçš„æ•°æ®ç»“æ„</strong>: Redis ä¸ä»…ä»…æ˜¯ç®€å•çš„é”®å€¼å­˜å‚¨ï¼Œå®ƒæ”¯æŒå¤šç§å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œè¿™è®©å®ƒèƒ½æ»¡è¶³æ›´å¹¿æ³›çš„åº”ç”¨éœ€æ±‚ã€‚</li><li><strong>æŒä¹…åŒ–</strong>: è™½ç„¶ Redis æ˜¯åŸºäºå†…å­˜çš„ï¼Œä½†å®ƒæä¾›äº†ä¸¤ç§ä¸åŒçš„æŒä¹…åŒ–æ–¹å¼ï¼Œå¯ä»¥å°†æ•°æ®ä»å†…å­˜ä¸­ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œä»¥é˜²æ­¢æœåŠ¡å™¨é‡å¯åæ•°æ®ä¸¢å¤±ã€‚</li><li><strong>åŸå­æ€§</strong>: Redis çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ã€‚è¿™æ„å‘³ç€ä¸€ä¸ªå‘½ä»¤è¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆæ ¹æœ¬ä¸æ‰§è¡Œï¼Œä¸­é—´ä¸ä¼šè¢«æ‰“æ–­ï¼Œè¿™åœ¨å¤šå®¢æˆ·ç«¯å¹¶å‘è®¿é—®æ—¶å°¤å…¶é‡è¦ã€‚</li><li><strong>ä¸»ä»å¤åˆ¶</strong>: Redis æ”¯æŒä¸»ä»å¤åˆ¶ï¼Œå¯ä»¥å°†æ•°æ®ä»ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰åŒæ­¥åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªä»èŠ‚ç‚¹ï¼ˆSlaveï¼‰ï¼Œä»è€Œå®ç°æ•°æ®çš„å¤‡ä»½å’Œè¯»å†™åˆ†ç¦»ï¼Œæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ‰©å±•æ€§ã€‚</li><li><strong>é«˜å¯ç”¨æ€§ä¸é›†ç¾¤</strong>: Redis æä¾›äº† Sentinelï¼ˆå“¨å…µï¼‰å’Œ Clusterï¼ˆé›†ç¾¤ï¼‰ä¸¤ç§æ–¹æ¡ˆï¼Œæ¥ä¿è¯ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§å’Œæ‰©å±•æ€§ã€‚</li></ul><h3 id="Redis-çš„æ•°æ®ç»“æ„è¯¦è§£"><a href="#Redis-çš„æ•°æ®ç»“æ„è¯¦è§£" class="headerlink" title="Redis çš„æ•°æ®ç»“æ„è¯¦è§£"></a>Redis çš„æ•°æ®ç»“æ„è¯¦è§£</h3><hr><p>è¿™æ˜¯ Redis æœ€æœ‰ç‰¹è‰²çš„åœ°æ–¹ï¼Œç†è§£è¿™äº›æ•°æ®ç»“æ„æ˜¯æŒæ¡ Redis çš„å…³é”®ã€‚</p><h4 id="1-String-å­—ç¬¦ä¸²"><a href="#1-String-å­—ç¬¦ä¸²" class="headerlink" title="1. String (å­—ç¬¦ä¸²)"></a>1. String (å­—ç¬¦ä¸²)</h4><ul><li><strong>æœ€åŸºæœ¬çš„æ•°æ®ç»“æ„</strong>ï¼Œå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ã€æ•°å­—æˆ–äºŒè¿›åˆ¶æ•°æ®ã€‚ä¸€ä¸ªé”®æœ€å¤šå¯ä»¥å­˜å‚¨ 512MB çš„å€¼ã€‚</li><li><strong>å¸¸ç”¨å‘½ä»¤</strong>:<ul><li><code>SET key value</code>: è®¾ç½®é”®å€¼å¯¹ã€‚</li><li><code>GET key</code>: è·å–é”®å¯¹åº”çš„å€¼ã€‚</li><li><code>INCR key</code>: å°†é”®å¯¹åº”çš„å€¼åŠ  1ï¼Œå¸¸ç”¨äºè®¡æ•°å™¨ã€‚</li><li><code>MSET key1 value1 key2 value2</code>: åŒæ—¶è®¾ç½®å¤šä¸ªé”®å€¼å¯¹ã€‚</li><li><code>MGET key1 key2</code>: åŒæ—¶è·å–å¤šä¸ªé”®çš„å€¼ã€‚</li></ul></li><li><strong>åº”ç”¨åœºæ™¯</strong>: ç¼“å­˜ã€è®¡æ•°å™¨ã€åˆ†å¸ƒå¼é”ç­‰ã€‚</li></ul><h4 id="2-Hash-å“ˆå¸Œ"><a href="#2-Hash-å“ˆå¸Œ" class="headerlink" title="2. Hash (å“ˆå¸Œ)"></a>2. Hash (å“ˆå¸Œ)</h4><ul><li><strong>ç±»ä¼¼äºä¸€ä¸ªé”®å€¼å¯¹çš„é›†åˆ</strong>ã€‚ä¸€ä¸ªå“ˆå¸Œé”®å¯ä»¥å­˜å‚¨å¤šä¸ªå­—æ®µï¼ˆfieldï¼‰å’Œå¯¹åº”çš„å€¼ï¼ˆvalueï¼‰ï¼Œéå¸¸é€‚åˆå­˜å‚¨å¯¹è±¡ã€‚</li><li><strong>å¸¸ç”¨å‘½ä»¤</strong>:<ul><li><code>HSET key field value</code>: è®¾ç½®å“ˆå¸Œé”®ä¸­ä¸€ä¸ªå­—æ®µçš„å€¼ã€‚</li><li><code>HGET key field</code>: è·å–å“ˆå¸Œé”®ä¸­ä¸€ä¸ªå­—æ®µçš„å€¼ã€‚</li><li><code>HGETALL key</code>: è·å–å“ˆå¸Œé”®ä¸­æ‰€æœ‰çš„å­—æ®µå’Œå€¼ã€‚</li><li><code>HMSET key field1 value1 field2 value2</code>: åŒæ—¶è®¾ç½®å¤šä¸ªå­—æ®µã€‚</li><li><code>HDEL key field1 field2</code>: åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µã€‚</li></ul></li><li><strong>åº”ç”¨åœºæ™¯</strong>: å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚<code>user:100</code>ä½œä¸ºé”®ï¼Œ<code>name</code>ã€<code>age</code>ã€<code>city</code>ä½œä¸ºå­—æ®µï¼‰ï¼Œå•†å“ä¿¡æ¯ç­‰ã€‚</li></ul><h4 id="3-List-åˆ—è¡¨"><a href="#3-List-åˆ—è¡¨" class="headerlink" title="3. List (åˆ—è¡¨)"></a>3. List (åˆ—è¡¨)</h4><ul><li><strong>ä¸€ä¸ªæœ‰åºçš„ã€å¯ä»¥é‡å¤çš„å­—ç¬¦ä¸²é›†åˆ</strong>ã€‚å¯ä»¥ä»åˆ—è¡¨çš„å¤´éƒ¨æˆ–å°¾éƒ¨æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚</li><li><strong>å¸¸ç”¨å‘½ä»¤</strong>:<ul><li><code>LPUSH key value1 value2</code>: ä»åˆ—è¡¨çš„å¤´éƒ¨æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ã€‚</li><li><code>RPUSH key value1 value2</code>: ä»åˆ—è¡¨çš„å°¾éƒ¨æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ã€‚</li><li><code>LPOP key</code>: ä»åˆ—è¡¨çš„å¤´éƒ¨ç§»é™¤å¹¶è¿”å›ä¸€ä¸ªå€¼ã€‚</li><li><code>RPOP key</code>: ä»åˆ—è¡¨çš„å°¾éƒ¨ç§»é™¤å¹¶è¿”å›ä¸€ä¸ªå€¼ã€‚</li><li><code>LRANGE key start stop</code>: è·å–åˆ—è¡¨ä¸­æŒ‡å®šèŒƒå›´çš„å…ƒç´ ã€‚</li></ul></li><li><strong>åº”ç”¨åœºæ™¯</strong>: æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆé˜Ÿåˆ—ã€æ ˆï¼‰ã€æœ€æ–°æ–‡ç« åˆ—è¡¨ã€å†å²è®°å½•ç­‰ã€‚</li></ul><h4 id="4-Set-é›†åˆ"><a href="#4-Set-é›†åˆ" class="headerlink" title="4. Set (é›†åˆ)"></a>4. Set (é›†åˆ)</h4><ul><li><strong>ä¸€ä¸ªæ— åºçš„ã€ä¸é‡å¤çš„å­—ç¬¦ä¸²é›†åˆ</strong>ã€‚é›†åˆæä¾›äº†äº¤é›†ã€å¹¶é›†å’Œå·®é›†ç­‰æ“ä½œã€‚</li><li><strong>å¸¸ç”¨å‘½ä»¤</strong>:<ul><li><code>SADD key member1 member2</code>: å‘é›†åˆä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ã€‚</li><li><code>SMEMBERS key</code>: è·å–é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜ã€‚</li><li><code>SISMEMBER key member</code>: åˆ¤æ–­ä¸€ä¸ªæˆå‘˜æ˜¯å¦åœ¨é›†åˆä¸­ã€‚</li><li><code>SINTER key1 key2</code>: æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤é›†ã€‚</li><li><code>SUNION key1 key2</code>: æ±‚ä¸¤ä¸ªé›†åˆçš„å¹¶é›†ã€‚</li></ul></li><li><strong>åº”ç”¨åœºæ™¯</strong>: ç¤¾äº¤ç½‘ç»œä¸­çš„å…±åŒå¥½å‹ã€æ ‡ç­¾ç³»ç»Ÿã€å»é‡ç­‰ã€‚</li></ul><h4 id="5-Sorted-Set-æœ‰åºé›†åˆ"><a href="#5-Sorted-Set-æœ‰åºé›†åˆ" class="headerlink" title="5. Sorted Set (æœ‰åºé›†åˆ)"></a>5. Sorted Set (æœ‰åºé›†åˆ)</h4><ul><li><strong>å’Œé›†åˆç±»ä¼¼ï¼Œä½†æ¯ä¸ªæˆå‘˜éƒ½ä¼šå…³è”ä¸€ä¸ªåˆ†æ•°ï¼ˆscoreï¼‰</strong>ã€‚é€šè¿‡è¿™ä¸ªåˆ†æ•°ï¼Œå¯ä»¥å¯¹é›†åˆä¸­çš„æˆå‘˜è¿›è¡Œæ’åºã€‚åˆ†æ•°å¯ä»¥é‡å¤ï¼Œä½†æˆå‘˜å¿…é¡»å”¯ä¸€ã€‚</li><li><strong>å¸¸ç”¨å‘½ä»¤</strong>:<ul><li><code>ZADD key score1 member1 score2 member2</code>: å‘æœ‰åºé›†åˆä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå¸¦åˆ†æ•°çš„æˆå‘˜ã€‚</li><li><code>ZRANGE key start stop</code>: æŒ‰åˆ†æ•°ä»å°åˆ°å¤§æ’åºï¼Œè·å–æŒ‡å®šèŒƒå›´çš„æˆå‘˜ã€‚</li><li><code>ZREVRANGE key start stop</code>: æŒ‰åˆ†æ•°ä»å¤§åˆ°å°æ’åºï¼Œè·å–æŒ‡å®šèŒƒå›´çš„æˆå‘˜ã€‚</li><li><code>ZSCORE key member</code>: è·å–ä¸€ä¸ªæˆå‘˜çš„åˆ†æ•°ã€‚</li><li><code>ZINCRBY key increment member</code>: ç»™æŒ‡å®šæˆå‘˜çš„åˆ†æ•°å¢åŠ æŒ‡å®šå€¼ã€‚</li></ul></li><li><strong>åº”ç”¨åœºæ™¯</strong>: æ’è¡Œæ¦œï¼ˆæ¸¸æˆåˆ†æ•°ã€çƒ­ç‚¹æ–°é—»ï¼‰ã€å¸¦æƒé‡çš„ä»»åŠ¡é˜Ÿåˆ—ç­‰ã€‚</li></ul><h3 id="Redis-çš„æŒä¹…åŒ–æœºåˆ¶"><a href="#Redis-çš„æŒä¹…åŒ–æœºåˆ¶" class="headerlink" title="Redis çš„æŒä¹…åŒ–æœºåˆ¶"></a>Redis çš„æŒä¹…åŒ–æœºåˆ¶</h3><hr><p>Redis æä¾›äº†ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼Œå¯ä»¥å°†æ•°æ®ä»å†…å­˜ä¿å­˜åˆ°ç¡¬ç›˜ï¼Œç¡®ä¿æ•°æ®ä¸ä¼šå› ä¸ºæœåŠ¡é‡å¯è€Œä¸¢å¤±ã€‚</p><h4 id="1-RDB-Redis-Database"><a href="#1-RDB-Redis-Database" class="headerlink" title="1. RDB (Redis Database)"></a>1. RDB (Redis Database)</h4><ul><li><strong>å¿«ç…§æ–¹å¼</strong>ã€‚å®ƒä¼šåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…ï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®å¿«ç…§å†™å…¥åˆ°ç£ç›˜ä¸Šä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼ˆ<code>dump.rdb</code>ï¼‰ã€‚</li><li><strong>ä¼˜ç‚¹</strong>: RDB æ–‡ä»¶æ˜¯ä¸€ä¸ªéå¸¸ç´§å‡‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œéå¸¸é€‚åˆå¤‡ä»½å’Œç¾éš¾æ¢å¤ã€‚</li><li><strong>ç¼ºç‚¹</strong>: æ¯æ¬¡ä¿å­˜éƒ½ä¼šä¸¢å¤±ä»ä¸Šæ¬¡å¿«ç…§åˆ°ç°åœ¨ä¹‹é—´çš„æ•°æ®ã€‚</li></ul><h4 id="2-AOF-Append-Only-File"><a href="#2-AOF-Append-Only-File" class="headerlink" title="2. AOF (Append Only File)"></a>2. AOF (Append Only File)</h4><ul><li><strong>æ—¥å¿—æ–¹å¼</strong>ã€‚å®ƒä¼šè®°å½•æ¯ä¸€æ¬¡å¯¹ Redis æ•°æ®åº“çš„å†™æ“ä½œå‘½ä»¤ï¼Œå¹¶ä»¥è¿½åŠ ï¼ˆappendï¼‰çš„æ–¹å¼å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚å½“ Redis é‡å¯æ—¶ï¼Œä¼šé‡æ–°æ‰§è¡Œ AOF æ–‡ä»¶ä¸­çš„å‘½ä»¤æ¥æ¢å¤æ•°æ®ã€‚</li><li><strong>ä¼˜ç‚¹</strong>: æ•°æ®ä¸¢å¤±é£é™©ä½ï¼Œå¯ä»¥é…ç½®ä¸ºæ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼Œæˆ–è€…æ¯æ‰§è¡Œä¸€ä¸ªå‘½ä»¤å°±åŒæ­¥ä¸€æ¬¡ã€‚</li><li><strong>ç¼ºç‚¹</strong>: AOF æ–‡ä»¶é€šå¸¸æ¯” RDB æ–‡ä»¶å¤§ï¼Œä¸”æ¢å¤é€Ÿåº¦å¯èƒ½è¾ƒæ…¢ã€‚</li></ul><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¼š<strong>åŒæ—¶ä½¿ç”¨ RDB å’Œ AOF</strong>ï¼Œä»¥è·å¾—æ›´é«˜çš„å¯é æ€§ã€‚</p><h3 id="Redis-çš„é«˜å¯ç”¨æ€§"><a href="#Redis-çš„é«˜å¯ç”¨æ€§" class="headerlink" title="Redis çš„é«˜å¯ç”¨æ€§"></a>Redis çš„é«˜å¯ç”¨æ€§</h3><hr><h4 id="1-ä¸»ä»å¤åˆ¶-Replication"><a href="#1-ä¸»ä»å¤åˆ¶-Replication" class="headerlink" title="1. ä¸»ä»å¤åˆ¶ (Replication)"></a>1. ä¸»ä»å¤åˆ¶ (Replication)</h4><ul><li><strong>åŸºæœ¬åŸç†</strong>: å°†ä¸€ä¸ª Redis å®ä¾‹ï¼ˆä¸»èŠ‚ç‚¹ï¼‰çš„æ•°æ®å¤åˆ¶åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–å®ä¾‹ï¼ˆä»èŠ‚ç‚¹ï¼‰ã€‚ä»èŠ‚ç‚¹çš„æ•°æ®æ˜¯ä¸»èŠ‚ç‚¹çš„å®Œæ•´å‰¯æœ¬ã€‚</li><li><strong>ä½œç”¨</strong>:<ul><li><strong>æ•°æ®å¤‡ä»½</strong>: ä»èŠ‚ç‚¹å¯ä»¥ä½œä¸ºæ•°æ®çš„çƒ­å¤‡ä»½ã€‚</li><li><strong>è¯»å†™åˆ†ç¦»</strong>: å¤§å¤šæ•°è¯»æ“ä½œå¯ä»¥åˆ†æµåˆ°ä»èŠ‚ç‚¹ä¸Šï¼Œå‡è½»ä¸»èŠ‚ç‚¹çš„å‹åŠ›ã€‚</li></ul></li></ul><h4 id="2-Sentinel-å“¨å…µ"><a href="#2-Sentinel-å“¨å…µ" class="headerlink" title="2. Sentinel (å“¨å…µ)"></a>2. Sentinel (å“¨å…µ)</h4><ul><li><strong>ä½œç”¨</strong>: è‡ªåŠ¨åŒ–ç®¡ç†ä¸»ä»å¤åˆ¶é›†ç¾¤ã€‚å®ƒæ˜¯ä¸€ä¸ªç›‘æ§ç³»ç»Ÿï¼Œå¯ä»¥ç›‘æ§ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</li><li><strong>æ ¸å¿ƒåŠŸèƒ½</strong>:<ul><li><strong>ç›‘æ§</strong>: ä¸æ–­æ£€æŸ¥ä¸»ä»èŠ‚ç‚¹æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</li><li><strong>é€šçŸ¥</strong>: å½“æŸä¸ª Redis å®ä¾‹å‡ºç°é—®é¢˜æ—¶ï¼Œä¼šå‘é€é€šçŸ¥ã€‚</li><li><strong>æ•…éšœè½¬ç§»</strong>: å¦‚æœä¸»èŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼ŒSentinel ä¼šè‡ªåŠ¨ä»å‰©ä¸‹çš„ä»èŠ‚ç‚¹ä¸­é€‰ä¸¾ä¸€ä¸ªæ–°çš„ä¸»èŠ‚ç‚¹ï¼Œå¹¶è®©å…¶ä»–ä»èŠ‚ç‚¹åˆ‡æ¢åˆ°è¿™ä¸ªæ–°çš„ä¸»èŠ‚ç‚¹ä¸Šï¼Œä»è€Œå®ç°é«˜å¯ç”¨ã€‚</li></ul></li></ul><h4 id="3-Redis-Cluster-é›†ç¾¤"><a href="#3-Redis-Cluster-é›†ç¾¤" class="headerlink" title="3. Redis Cluster (é›†ç¾¤)"></a>3. Redis Cluster (é›†ç¾¤)</h4><ul><li><strong>ä½œç”¨</strong>: è§£å†³ Redis å•æœºå†…å­˜å®¹é‡å’Œå¹¶å‘é‡çš„ç“¶é¢ˆé—®é¢˜ã€‚å®ƒå°†æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªèŠ‚ç‚¹åªè´Ÿè´£å­˜å‚¨éƒ¨åˆ†æ•°æ®ã€‚</li><li><strong>æ ¸å¿ƒåŠŸèƒ½</strong>:<ul><li><strong>æ•°æ®åˆ†ç‰‡</strong>: è‡ªåŠ¨å°†æ•°æ®åˆ†å¸ƒåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šã€‚</li><li><strong>é«˜å¯ç”¨æ€§</strong>: å³ä½¿éƒ¨åˆ†èŠ‚ç‚¹å®•æœºï¼Œé›†ç¾¤ä¹Ÿèƒ½ç»§ç»­æ­£å¸¸å·¥ä½œã€‚</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;1-Spring-Cloud-ä½“ç³»&quot;&gt;&lt;a href=&quot;#1-Spring-Cloud-ä½“ç³»&quot; class=&quot;headerlink&quot; title=&quot;1. Spring Cloud ä½“ç³»&quot;&gt;&lt;/a&gt;&lt;strong&gt;1. Spring Cloud ä½“ç³»&lt;/strong</summary>
      
    
    
    
    <category term="java" scheme="http://example.com/categories/java/"/>
    
    
    <category term="java" scheme="http://example.com/tags/java/"/>
    
    <category term="åˆ†å¸ƒå¼å¾®æœåŠ¡" scheme="http://example.com/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>æ€»ç»“</title>
    <link href="http://example.com/2025/09/11/%E6%80%BB%E7%BB%93/"/>
    <id>http://example.com/2025/09/11/%E6%80%BB%E7%BB%93/</id>
    <published>2025-09-11T10:29:28.000Z</published>
    <updated>2025-09-21T09:32:27.816Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-ç½‘ç»œ"><a href="#1-ç½‘ç»œ" class="headerlink" title="1.ç½‘ç»œ"></a>1.ç½‘ç»œ</h1><h3 id="1-OSIä¸ƒå±‚æ¨¡å‹"><a href="#1-OSIä¸ƒå±‚æ¨¡å‹" class="headerlink" title="1.OSIä¸ƒå±‚æ¨¡å‹"></a>1.OSIä¸ƒå±‚æ¨¡å‹</h3><p>ç‰©ç†å±‚ </p><p>æ•°æ®é“¾è·¯å±‚</p><p>ç½‘ç»œå±‚ ip</p><p>ä¼ è¾“å±‚ tcp&#x2F;udp</p><p>ä¼šè¯å±‚</p><p>è¡¨ç¤ºå±‚ unicode ssl </p><p>åº”ç”¨å±‚ http https dns</p><p>å®é™…ä¸­ä½¿ç”¨TCP&#x2F;IPå››å±‚æ¨¡å‹ </p><p>ç½‘ç»œæ¥å£å±‚</p><p>ç½‘ç»œå±‚ </p><p>ä¼ è¾“å±‚</p><p>åº”ç”¨å±‚</p><h3 id="2-ä¸‰æ¬¡æ¡æ‰‹"><a href="#2-ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="2.ä¸‰æ¬¡æ¡æ‰‹"></a>2.ä¸‰æ¬¡æ¡æ‰‹</h3><ol><li>å®¢æˆ·ç«¯å‘é€ SYNï¼Œå‘ŠçŸ¥åˆå§‹åºåˆ—å·ã€‚</li><li>æœåŠ¡å™¨è¿”å› SYN-ACKï¼Œç¡®è®¤æ”¶åˆ° SYN å¹¶å‘ŠçŸ¥è‡ªèº«åºåˆ—å·ã€‚</li><li>å®¢æˆ·ç«¯ ACK ç¡®è®¤ï¼ŒåŒæ–¹ ESTABLISHEDã€‚</li></ol><h3 id="3-å››æ¬¡æŒ¥æ‰‹"><a href="#3-å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="3.å››æ¬¡æŒ¥æ‰‹"></a>3.å››æ¬¡æŒ¥æ‰‹</h3><ol><li>ä¸»åŠ¨æ–¹ FINï¼Œå…³é—­å‘é€ã€‚</li><li>è¢«åŠ¨æ–¹ ACKï¼Œç¡®è®¤ã€‚</li><li>è¢«åŠ¨æ–¹ FINï¼Œå…³é—­å‘é€ã€‚</li><li>ä¸»åŠ¨æ–¹ ACKï¼Œè¿›å…¥ TIME_WAITï¼Œç­‰å¾… 2MSLã€‚</li></ol><h2 id="2-Linux"><a href="#2-Linux" class="headerlink" title="2.Linux"></a>2.Linux</h2><h2 id="3-Mysql"><a href="#3-Mysql" class="headerlink" title="3.Mysql"></a>3.Mysql</h2><h3 id="1-æ…¢æŸ¥è¯¢"><a href="#1-æ…¢æŸ¥è¯¢" class="headerlink" title="1.æ…¢æŸ¥è¯¢"></a>1.æ…¢æŸ¥è¯¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM table_name WHERE condition;</span><br></pre></td></tr></table></figure><h3 id="EXPLAIN-æ ¸å¿ƒå­—æ®µè§£æ"><a href="#EXPLAIN-æ ¸å¿ƒå­—æ®µè§£æ" class="headerlink" title="EXPLAIN æ ¸å¿ƒå­—æ®µè§£æ"></a>EXPLAIN æ ¸å¿ƒå­—æ®µè§£æ</h3><table><thead><tr><th>å­—æ®µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>æŸ¥è¯¢åºåˆ—å·ï¼Œè¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼›ç›¸åŒ id æŒ‰é¡ºåºæ‰§è¡Œã€‚</td></tr><tr><td>select_type</td><td>æŸ¥è¯¢ç±»å‹ï¼šSIMPLE, PRIMARY, SUBQUERY, DEPENDENT SUBQUERY, UNION, DERIVED ç­‰ã€‚</td></tr><tr><td>table</td><td>æ­£åœ¨è®¿é—®çš„è¡¨åã€‚</td></tr><tr><td>partitions</td><td>åŒ¹é…çš„åˆ†åŒºä¿¡æ¯ï¼ˆå¦‚æœæœ‰åˆ†åŒºè¡¨ï¼‰ã€‚</td></tr><tr><td>type</td><td>è¿æ¥ç±»å‹&#x2F;è®¿é—®æ–¹å¼ï¼Œæ€§èƒ½ä»å¥½åˆ°å·®ï¼šsystem â†’ const â†’ eq_ref â†’ ref â†’ range â†’ index â†’ ALLã€‚</td></tr><tr><td>possible_keys</td><td>æŸ¥è¯¢å¯èƒ½ä½¿ç”¨çš„ç´¢å¼•ã€‚</td></tr><tr><td>key</td><td>å®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼ŒNULL è¡¨ç¤ºæœªä½¿ç”¨ç´¢å¼•ã€‚</td></tr><tr><td>key_len</td><td>ä½¿ç”¨çš„ç´¢å¼•é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰ï¼Œè¶ŠçŸ­è¶Šå¥½ã€‚</td></tr><tr><td>ref</td><td>è¡¨ç¤ºç´¢å¼•åˆ—ä¸å“ªä¸ªåˆ—æˆ–å¸¸é‡è¿›è¡Œæ¯”è¾ƒã€‚</td></tr><tr><td>rows</td><td>MySQL ä¼°è®¡è¦æ‰«æçš„è¡Œæ•°ï¼Œè¶Šå°‘è¶Šå¥½ã€‚</td></tr><tr><td>filtered</td><td>WHERE æ¡ä»¶è¿‡æ»¤è¡Œçš„ç™¾åˆ†æ¯”ï¼Œè¶Šé«˜è¶Šå¥½ã€‚</td></tr><tr><td>Extra</td><td>é¢å¤–ä¿¡æ¯ï¼Œé‡è¦ä¼˜åŒ–æŒ‡æ ‡ï¼š- <code>Using filesort</code>ï¼šéœ€è¦é¢å¤–æ’åºã€‚- <code>Using temporary</code>ï¼šéœ€è¦ä¸´æ—¶è¡¨å¤„ç†ã€‚- <code>Using index</code>ï¼šä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼ŒæŸ¥è¯¢æ•ˆç‡é«˜ã€‚- <code>Using where</code>ï¼šä½¿ç”¨ WHERE æ¡ä»¶è¿‡æ»¤ã€‚- <code>Using index condition</code>ï¼šç´¢å¼•æ¡ä»¶ä¸‹æ¨ï¼ˆICPï¼‰ã€‚- <code>Using join buffer</code>ï¼šè¿æ¥æŸ¥è¯¢æœªç”¨ç´¢å¼•ï¼Œä½¿ç”¨ç¼“å­˜ä¼˜åŒ–ã€‚</td></tr></tbody></table><hr><h3 id="type-ç±»å‹è¯´æ˜ï¼ˆè®¿é—®æ–¹å¼ï¼‰"><a href="#type-ç±»å‹è¯´æ˜ï¼ˆè®¿é—®æ–¹å¼ï¼‰" class="headerlink" title="type ç±»å‹è¯´æ˜ï¼ˆè®¿é—®æ–¹å¼ï¼‰"></a>type ç±»å‹è¯´æ˜ï¼ˆè®¿é—®æ–¹å¼ï¼‰</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">system</span>  : è¡¨ä¸­åªæœ‰ä¸€è¡Œè®°å½•ï¼Œæ€§èƒ½æé«˜</span><br><span class="line">const   : é€šè¿‡ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•æŸ¥æ‰¾ï¼Œæœ€å¤šä¸€è¡Œ</span><br><span class="line">eq_ref   : å¯¹å‰è¡¨æ¯è¡Œç»„åˆè¯»å–ä¸€è¡Œï¼Œç”¨äºä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•è¿æ¥</span><br><span class="line"><span class="keyword">ref</span>      : éå”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥æ‰¾ï¼Œå¯èƒ½å¤šè¡Œ</span><br><span class="line"><span class="keyword">range</span>    : èŒƒå›´æŸ¥æ‰¾ï¼Œä½¿ç”¨ç´¢å¼•</span><br><span class="line">index    : å…¨ç´¢å¼•æ‰«æï¼Œä¼˜äºå…¨è¡¨æ‰«æ</span><br><span class="line"><span class="keyword">ALL</span>      : å…¨è¡¨æ‰«æï¼Œæ€§èƒ½æœ€å·®</span><br></pre></td></tr></table></figure><h3 id="2-ç´¢å¼•"><a href="#2-ç´¢å¼•" class="headerlink" title="2.ç´¢å¼•"></a>2.ç´¢å¼•</h3><h4 id="2-1ç´¢å¼•çš„æ¦‚å¿µ"><a href="#2-1ç´¢å¼•çš„æ¦‚å¿µ" class="headerlink" title="2.1ç´¢å¼•çš„æ¦‚å¿µ"></a>2.1ç´¢å¼•çš„æ¦‚å¿µ</h4><p>ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºæå‡æŸ¥è¯¢åˆ°æ•ˆç‡</p><h4 id="2-2ç´¢å¼•çš„å…·ä½“ç»“æ„"><a href="#2-2ç´¢å¼•çš„å…·ä½“ç»“æ„" class="headerlink" title="2.2ç´¢å¼•çš„å…·ä½“ç»“æ„"></a>2.2ç´¢å¼•çš„å…·ä½“ç»“æ„</h4><p>B+æ ‘ </p><p>B+æ ‘çš„ç‰¹ç‚¹æ˜¯</p><p>æ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½æœ‰æŒ‡é’ˆç›¸äº’æŒ‡å‘</p><p>æ¯ä¸ªéå¶å­èŠ‚ç‚¹çš„æ•°æ®éƒ½åœ¨å¶å­èŠ‚ç‚¹å†—ä½™ä¸€ä»½</p><h4 id="2-3ç´¢å¼•çš„åˆ†ç±»"><a href="#2-3ç´¢å¼•çš„åˆ†ç±»" class="headerlink" title="2.3ç´¢å¼•çš„åˆ†ç±»"></a>2.3ç´¢å¼•çš„åˆ†ç±»</h4><h3 id="3-äº‹åŠ¡"><a href="#3-äº‹åŠ¡" class="headerlink" title="3.äº‹åŠ¡"></a>3.äº‹åŠ¡</h3><h4 id="3-1-äº‹åŠ¡çš„ç‰¹æ€§"><a href="#3-1-äº‹åŠ¡çš„ç‰¹æ€§" class="headerlink" title="3.1 äº‹åŠ¡çš„ç‰¹æ€§"></a>3.1 äº‹åŠ¡çš„ç‰¹æ€§</h4><h4 id="3-2-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#3-2-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="headerlink" title="3.2 äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"></a>3.2 äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h4><h3 id="4-å­˜å‚¨å¼•æ“"><a href="#4-å­˜å‚¨å¼•æ“" class="headerlink" title="4.å­˜å‚¨å¼•æ“"></a>4.å­˜å‚¨å¼•æ“</h3><h4 id=""><a href="#" class="headerlink" title=""></a></h4>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-ç½‘ç»œ&quot;&gt;&lt;a href=&quot;#1-ç½‘ç»œ&quot; class=&quot;headerlink&quot; title=&quot;1.ç½‘ç»œ&quot;&gt;&lt;/a&gt;1.ç½‘ç»œ&lt;/h1&gt;&lt;h3 id=&quot;1-OSIä¸ƒå±‚æ¨¡å‹&quot;&gt;&lt;a href=&quot;#1-OSIä¸ƒå±‚æ¨¡å‹&quot; class=&quot;headerlink&quot; title=</summary>
      
    
    
    
    <category term="æœªåˆ†ç±»" scheme="http://example.com/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"/>
    
    
    <category term="Hexo, Markdown" scheme="http://example.com/tags/Hexo-Markdown/"/>
    
  </entry>
  
  <entry>
    <title>web</title>
    <link href="http://example.com/2025/09/11/web/"/>
    <id>http://example.com/2025/09/11/web/</id>
    <published>2025-09-11T10:29:28.000Z</published>
    <updated>2025-09-16T05:16:12.451Z</updated>
    
    <content type="html"><![CDATA[<p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æ·±å…¥åˆ° HTTP åè®®çš„åº•å±‚ï¼Œå…¨é¢è§£å‰–å®ƒçš„å·¥ä½œåŸç†ã€è¯·æ±‚-å“åº”æ¨¡å‹ã€ä»¥åŠå„ä¸ªç»„æˆéƒ¨åˆ†ã€‚</p><hr><h3 id="ä¸€ã€HTTP-åè®®æ¦‚è¿°"><a href="#ä¸€ã€HTTP-åè®®æ¦‚è¿°" class="headerlink" title="ä¸€ã€HTTP åè®®æ¦‚è¿°"></a>ä¸€ã€HTTP åè®®æ¦‚è¿°</h3><p>HTTPï¼ˆHypertext Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯åº”ç”¨å±‚åè®®ï¼Œå®ƒå®šä¹‰äº† Web å®¢æˆ·ç«¯ï¼ˆå¦‚æµè§ˆå™¨ï¼‰å’Œ Web æœåŠ¡å™¨ä¹‹é—´äº¤æ¢æ•°æ®çš„è§„åˆ™ã€‚å®ƒçš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯<strong>æ— çŠ¶æ€ï¼ˆStatelessï¼‰</strong>ï¼Œè¿™æ„å‘³ç€æœåŠ¡å™¨ä¸ä¼šä¿å­˜å®¢æˆ·ç«¯çš„ä»»ä½•ä¿¡æ¯ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚</p><hr><h3 id="äºŒã€HTTP-è¯·æ±‚ï¼ˆRequestï¼‰"><a href="#äºŒã€HTTP-è¯·æ±‚ï¼ˆRequestï¼‰" class="headerlink" title="äºŒã€HTTP è¯·æ±‚ï¼ˆRequestï¼‰"></a>äºŒã€HTTP è¯·æ±‚ï¼ˆRequestï¼‰</h3><p>ä¸€ä¸ªå®Œæ•´çš„ HTTP è¯·æ±‚ç”±å››éƒ¨åˆ†ç»„æˆï¼š</p><h4 id="1-è¯·æ±‚è¡Œï¼ˆRequest-Lineï¼‰"><a href="#1-è¯·æ±‚è¡Œï¼ˆRequest-Lineï¼‰" class="headerlink" title="1. è¯·æ±‚è¡Œï¼ˆRequest Lineï¼‰"></a>1. è¯·æ±‚è¡Œï¼ˆRequest Lineï¼‰</h4><p>è¿™æ˜¯è¯·æ±‚çš„ç¬¬ä¸€è¡Œï¼Œå®ƒå®šä¹‰äº†è¯·æ±‚çš„åŸºæœ¬ä¿¡æ¯ã€‚</p><ul><li><strong>è¯·æ±‚æ–¹æ³•ï¼ˆMethodï¼‰</strong>ï¼šå¦‚ <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code> ç­‰ï¼Œè¡¨ç¤ºå¯¹èµ„æºçš„æ“ä½œç±»å‹ã€‚</li><li><strong>è¯·æ±‚ URL (URI)</strong>ï¼šèµ„æºçš„åœ°å€ã€‚</li><li><strong>HTTP åè®®ç‰ˆæœ¬</strong>ï¼šå¦‚ <code>HTTP/1.1</code>, <code>HTTP/2.0</code>ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><p>GET &#x2F;index.html HTTP&#x2F;1.1</p><h4 id="2-è¯·æ±‚å¤´ï¼ˆRequest-Headersï¼‰"><a href="#2-è¯·æ±‚å¤´ï¼ˆRequest-Headersï¼‰" class="headerlink" title="2. è¯·æ±‚å¤´ï¼ˆRequest Headersï¼‰"></a>2. è¯·æ±‚å¤´ï¼ˆRequest Headersï¼‰</h4><p>è¯·æ±‚å¤´æä¾›äº†å…³äºå®¢æˆ·ç«¯ã€è¯·æ±‚ä½“å’Œä¸€äº›å…¶ä»–å…ƒæ•°æ®çš„ä¿¡æ¯ã€‚å®ƒä»¬ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜åœ¨ã€‚</p><ul><li><strong>Host</strong>ï¼šæŒ‡å®šè¯·æ±‚çš„ç›®æ ‡æœåŠ¡å™¨çš„åŸŸåå’Œç«¯å£å·ã€‚</li><li><strong>User-Agent</strong>ï¼šå®¢æˆ·ç«¯çš„è½¯ä»¶ç±»å‹å’Œç‰ˆæœ¬ï¼Œå¦‚æµè§ˆå™¨ä¿¡æ¯ã€‚</li><li><strong>Accept</strong>ï¼šå®¢æˆ·ç«¯èƒ½å¤Ÿå¤„ç†çš„åª’ä½“ç±»å‹ï¼Œå‘Šè¯‰æœåŠ¡å™¨å¸Œæœ›è¿”å›ä»€ä¹ˆæ ¼å¼çš„æ•°æ®ï¼ˆå¦‚ <code>application/json</code>, <code>text/html</code>ï¼‰ã€‚</li><li><strong>Content-Type</strong>ï¼š<strong>è¯·æ±‚ä½“</strong>ä¸­çš„æ•°æ®ç±»å‹ï¼Œåªåœ¨æœ‰è¯·æ±‚ä½“æ—¶ä½¿ç”¨ï¼ˆå¦‚ <code>POST</code>ï¼‰ã€‚å¸¸è§çš„æœ‰ï¼š<ul><li><code>application/x-www-form-urlencoded</code>ï¼šé»˜è®¤ç¼–ç ï¼Œç”¨äºæäº¤è¡¨å•æ•°æ®ã€‚</li><li><code>multipart/form-data</code>ï¼šç”¨äºä¸Šä¼ æ–‡ä»¶ã€‚</li><li><code>application/json</code>ï¼šç”¨äºå‰åç«¯åˆ†ç¦»ï¼Œæäº¤ JSON æ•°æ®ã€‚</li></ul></li><li><strong>Content-Length</strong>ï¼šè¯·æ±‚ä½“çš„é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰ã€‚</li><li><strong>Cookie</strong>ï¼šå®¢æˆ·ç«¯å­˜å‚¨çš„ Cookie ä¿¡æ¯ï¼Œç”¨äºä¼šè¯ç®¡ç†ã€‚</li><li><strong>Authorization</strong>ï¼šç”¨äºèº«ä»½è®¤è¯ï¼Œå¦‚æºå¸¦ Bearer Tokenã€‚</li><li><strong>Referer</strong>ï¼šè¯·æ±‚ä»å“ªä¸ªé¡µé¢è·³è½¬è€Œæ¥ã€‚</li></ul><h4 id="3-ç©ºè¡Œ"><a href="#3-ç©ºè¡Œ" class="headerlink" title="3. ç©ºè¡Œ"></a>3. ç©ºè¡Œ</h4><p>ä¸€ä¸ªç©ºè¡Œç”¨äºåˆ†éš”è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ã€‚</p><h4 id="4-è¯·æ±‚ä½“ï¼ˆRequest-Bodyï¼‰"><a href="#4-è¯·æ±‚ä½“ï¼ˆRequest-Bodyï¼‰" class="headerlink" title="4. è¯·æ±‚ä½“ï¼ˆRequest Bodyï¼‰"></a>4. è¯·æ±‚ä½“ï¼ˆRequest Bodyï¼‰</h4><p>è¯·æ±‚ä½“åŒ…å«å®¢æˆ·ç«¯æäº¤ç»™æœåŠ¡å™¨çš„æ•°æ®ï¼Œé€šå¸¸ç”¨äº <code>POST</code>ã€<code>PUT</code> ç­‰è¯·æ±‚ã€‚GET è¯·æ±‚é€šå¸¸æ²¡æœ‰è¯·æ±‚ä½“ã€‚</p><hr><h3 id="ä¸‰ã€HTTP-å“åº”ï¼ˆResponseï¼‰"><a href="#ä¸‰ã€HTTP-å“åº”ï¼ˆResponseï¼‰" class="headerlink" title="ä¸‰ã€HTTP å“åº”ï¼ˆResponseï¼‰"></a>ä¸‰ã€HTTP å“åº”ï¼ˆResponseï¼‰</h3><p>ä¸€ä¸ªå®Œæ•´çš„ HTTP å“åº”ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><h4 id="1-çŠ¶æ€è¡Œï¼ˆStatus-Lineï¼‰"><a href="#1-çŠ¶æ€è¡Œï¼ˆStatus-Lineï¼‰" class="headerlink" title="1. çŠ¶æ€è¡Œï¼ˆStatus Lineï¼‰"></a>1. çŠ¶æ€è¡Œï¼ˆStatus Lineï¼‰</h4><p>è¿™æ˜¯å“åº”çš„ç¬¬ä¸€è¡Œï¼Œå®šä¹‰äº†å“åº”çš„åŸºæœ¬ä¿¡æ¯ã€‚</p><ul><li><strong>HTTP åè®®ç‰ˆæœ¬</strong>ï¼šå¦‚ <code>HTTP/1.1</code>ã€‚</li><li><strong>çŠ¶æ€ç ï¼ˆStatus Codeï¼‰</strong>ï¼šä¸‰ä½æ•°å­—ï¼Œè¡¨ç¤ºè¯·æ±‚ç»“æœã€‚</li><li><strong>çŠ¶æ€ä¿¡æ¯ï¼ˆReason Phraseï¼‰</strong>ï¼šå¯¹çŠ¶æ€ç çš„ç®€çŸ­æè¿°ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><p>HTTP&#x2F;1.1 200 OK</p><h4 id="2-å“åº”å¤´ï¼ˆResponse-Headersï¼‰"><a href="#2-å“åº”å¤´ï¼ˆResponse-Headersï¼‰" class="headerlink" title="2. å“åº”å¤´ï¼ˆResponse Headersï¼‰"></a>2. å“åº”å¤´ï¼ˆResponse Headersï¼‰</h4><p>å“åº”å¤´æä¾›äº†å…³äºæœåŠ¡å™¨ã€å“åº”ä½“å’Œä¼šè¯çš„å…ƒæ•°æ®ä¿¡æ¯ã€‚</p><ul><li><strong>Content-Type</strong>ï¼š<strong>å“åº”ä½“</strong>çš„æ•°æ®ç±»å‹ã€‚</li><li><strong>Content-Length</strong>ï¼šå“åº”ä½“çš„é•¿åº¦ã€‚</li><li><strong>Set-Cookie</strong>ï¼šæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€ Cookieï¼Œç”¨äºå­˜å‚¨ä¼šè¯ ID ç­‰ä¿¡æ¯ã€‚</li><li><strong>Location</strong>ï¼šç”¨äºé‡å®šå‘ï¼ŒæŒ‡å®šæ–°çš„ URLã€‚</li><li><strong>Cache-Control</strong>ï¼šæ§åˆ¶æµè§ˆå™¨ç¼“å­˜è¡Œä¸ºã€‚</li></ul><h4 id="3-ç©ºè¡Œ-1"><a href="#3-ç©ºè¡Œ-1" class="headerlink" title="3. ç©ºè¡Œ"></a>3. ç©ºè¡Œ</h4><p>ä¸€ä¸ªç©ºè¡Œç”¨äºåˆ†éš”å“åº”å¤´å’Œå“åº”ä½“ã€‚</p><h4 id="4-å“åº”ä½“ï¼ˆResponse-Bodyï¼‰"><a href="#4-å“åº”ä½“ï¼ˆResponse-Bodyï¼‰" class="headerlink" title="4. å“åº”ä½“ï¼ˆResponse Bodyï¼‰"></a>4. å“åº”ä½“ï¼ˆResponse Bodyï¼‰</h4><p>å“åº”ä½“åŒ…å«äº†æœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯çš„å®é™…æ•°æ®ï¼Œå¦‚ HTML ç½‘é¡µå†…å®¹ã€JSON æ•°æ®æˆ–å›¾ç‰‡ç­‰ã€‚</p><hr><h3 id="å››ã€HTTP-æ–¹æ³•çš„å¹‚ç­‰æ€§ä¸å®‰å…¨æ€§"><a href="#å››ã€HTTP-æ–¹æ³•çš„å¹‚ç­‰æ€§ä¸å®‰å…¨æ€§" class="headerlink" title="å››ã€HTTP æ–¹æ³•çš„å¹‚ç­‰æ€§ä¸å®‰å…¨æ€§"></a>å››ã€HTTP æ–¹æ³•çš„å¹‚ç­‰æ€§ä¸å®‰å…¨æ€§</h3><ul><li><strong>å®‰å…¨æ€§</strong>ï¼šæŒ‡è¯·æ±‚æ–¹æ³•ä¸ä¼šå¯¹æœåŠ¡å™¨ä¸Šçš„èµ„æºçŠ¶æ€äº§ç”Ÿä¿®æ”¹ã€‚<code>GET</code> å’Œ <code>HEAD</code> æ–¹æ³•æ˜¯å®‰å…¨çš„ã€‚</li><li><strong>å¹‚ç­‰æ€§</strong>ï¼šæŒ‡è¯·æ±‚æ–¹æ³•é‡å¤æ‰§è¡Œå¤šæ¬¡ï¼Œå¯¹æœåŠ¡å™¨ä¸Šçš„èµ„æºçŠ¶æ€äº§ç”Ÿçš„å½±å“ä¸æ‰§è¡Œä¸€æ¬¡çš„å½±å“ç›¸åŒã€‚<ul><li><strong>å¹‚ç­‰æ–¹æ³•</strong>ï¼š<code>GET</code>, <code>HEAD</code>, <code>PUT</code>, <code>DELETE</code>ã€‚</li><li><strong>éå¹‚ç­‰æ–¹æ³•</strong>ï¼š<code>POST</code>ã€‚</li></ul></li></ul><table><thead><tr><th>æ–¹æ³•</th><th>å®‰å…¨æ€§</th><th>å¹‚ç­‰æ€§</th><th>å…¸å‹ç”¨é€”</th></tr></thead><tbody><tr><td><strong>GET</strong></td><td>æ˜¯</td><td>æ˜¯</td><td>è·å–èµ„æº</td></tr><tr><td><strong>POST</strong></td><td>å¦</td><td>å¦</td><td>åˆ›å»ºèµ„æº</td></tr><tr><td><strong>PUT</strong></td><td>å¦</td><td>æ˜¯</td><td>æ›´æ–°æˆ–æ›¿æ¢èµ„æº</td></tr><tr><td><strong>DELETE</strong></td><td>å¦</td><td>æ˜¯</td><td>åˆ é™¤èµ„æº</td></tr></tbody></table><hr><h3 id="äº”ã€HTTP-çš„ä¼šè¯ç®¡ç†ï¼šCookie"><a href="#äº”ã€HTTP-çš„ä¼šè¯ç®¡ç†ï¼šCookie" class="headerlink" title="äº”ã€HTTP çš„ä¼šè¯ç®¡ç†ï¼šCookie"></a>äº”ã€HTTP çš„ä¼šè¯ç®¡ç†ï¼šCookie</h3><p>HTTP æœ¬èº«æ˜¯æ— çŠ¶æ€çš„ï¼Œä½†ä¸ºäº†è·Ÿè¸ªç”¨æˆ·ï¼Œå¼•å…¥äº† Cookieã€‚</p><ol><li><strong>åˆ›å»º</strong>ï¼šæœåŠ¡å™¨é€šè¿‡å“åº”å¤´ <code>Set-Cookie</code> å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª Cookieã€‚</li><li><strong>å­˜å‚¨</strong>ï¼šæµè§ˆå™¨æ¥æ”¶åˆ° <code>Set-Cookie</code> åï¼Œä¼šå°†å…¶å­˜å‚¨åœ¨æœ¬åœ°ã€‚</li><li><strong>æºå¸¦</strong>ï¼šä¹‹åï¼Œæ¯æ¬¡å¯¹åŒä¸€åŸŸåå‘èµ·è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨éƒ½ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚å¤´ <code>Cookie</code> ä¸­å¸¦ä¸Šè¿™ä¸ª Cookieã€‚</li></ol><p>é€šè¿‡åœ¨ Cookie ä¸­å­˜å‚¨ä¸€ä¸ª SessionIDï¼ŒæœåŠ¡å™¨å°±å¯ä»¥åœ¨åç»­è¯·æ±‚ä¸­æ‰¾åˆ°å¯¹åº”çš„ä¼šè¯æ•°æ®ï¼Œä»è€Œå®ç°çŠ¶æ€ç®¡ç†ã€‚</p><hr><h3 id="å…­ã€HTTP-1-1-ä¸-HTTP-2-çš„åŒºåˆ«"><a href="#å…­ã€HTTP-1-1-ä¸-HTTP-2-çš„åŒºåˆ«" class="headerlink" title="å…­ã€HTTP&#x2F;1.1 ä¸ HTTP&#x2F;2 çš„åŒºåˆ«"></a>å…­ã€HTTP&#x2F;1.1 ä¸ HTTP&#x2F;2 çš„åŒºåˆ«</h3><ul><li><strong>å¤šè·¯å¤ç”¨ï¼ˆMultiplexingï¼‰</strong>ï¼šHTTP&#x2F;2 å…è®¸åœ¨<strong>ä¸€ä¸ª TCP è¿æ¥</strong>ä¸ŠåŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œè§£å†³äº† HTTP&#x2F;1.1 é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ï¼Œæ˜¾è‘—æé«˜äº†æ€§èƒ½ã€‚</li><li><strong>å¤´éƒ¨å‹ç¼©ï¼ˆHeader Compressionï¼‰</strong>ï¼šHTTP&#x2F;2 ä½¿ç”¨ HPACK ç®—æ³•å‹ç¼©è¯·æ±‚å’Œå“åº”å¤´ï¼Œå‡å°‘äº†æ•°æ®ä¼ è¾“é‡ã€‚</li><li><strong>æœåŠ¡å™¨æ¨é€ï¼ˆServer Pushï¼‰</strong>ï¼šæœåŠ¡å™¨å¯ä»¥åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œä¸»åŠ¨æ¨é€å…¶ä»–å®ƒè®¤ä¸ºå®¢æˆ·ç«¯å¯èƒ½éœ€è¦çš„èµ„æºï¼Œå‡å°‘äº†å®¢æˆ·ç«¯çš„è¯·æ±‚æ¬¡æ•°ã€‚</li><li><strong>äºŒè¿›åˆ¶åˆ†å¸§ï¼ˆBinary Framingï¼‰</strong>ï¼šHTTP&#x2F;2 å°†æ‰€æœ‰ä¼ è¾“ä¿¡æ¯åˆ†å‰²æˆæ›´å°çš„æ¶ˆæ¯å’Œå¸§ï¼Œå¹¶é‡‡ç”¨äºŒè¿›åˆ¶ç¼–ç ï¼Œä½¿å¾—è§£ææ›´é«˜æ•ˆã€‚</li></ul><p>å¥½çš„ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†è¡¥å…… <strong>HTTP&#x2F;1.0</strong> çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¹¶å¯¹æ•´ä¸ª HTTP åè®®æ—è¿›è¡Œå…¨é¢çš„å¯¹æ¯”å’Œæ·±å…¥è§£æã€‚</p><hr><h3 id="ä¸€ã€HTTP-åè®®æ—æ¼”å˜ï¼šä»-1-0-åˆ°-2-0"><a href="#ä¸€ã€HTTP-åè®®æ—æ¼”å˜ï¼šä»-1-0-åˆ°-2-0" class="headerlink" title="ä¸€ã€HTTP åè®®æ—æ¼”å˜ï¼šä» 1.0 åˆ° 2.0"></a>ä¸€ã€HTTP åè®®æ—æ¼”å˜ï¼šä» 1.0 åˆ° 2.0</h3><h4 id="HTTP-1-0"><a href="#HTTP-1-0" class="headerlink" title="HTTP&#x2F;1.0"></a>HTTP&#x2F;1.0</h4><p>HTTP&#x2F;1.0 æ˜¯ HTTP åè®®çš„æ—©æœŸç‰ˆæœ¬ï¼Œå®ƒçš„è®¾è®¡ç›¸å¯¹ç®€å•ï¼Œä¸»è¦ç”¨äºæ»¡è¶³åŸºæœ¬çš„ç½‘é¡µæµè§ˆéœ€æ±‚ã€‚</p><ul><li><strong>æ ¸å¿ƒç‰¹ç‚¹ï¼š</strong><ul><li><strong>éæŒä¹…è¿æ¥ï¼ˆNon-persistent Connectionï¼‰</strong>ï¼šè¿™æ˜¯ HTTP&#x2F;1.0 æœ€æ˜¾è‘—çš„ç‰¹ç‚¹ã€‚æ¯è¿›è¡Œä¸€æ¬¡ HTTP è¯·æ±‚-å“åº”ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å°±ä¼šå»ºç«‹ä¸€ä¸ªæ–°çš„ <strong>TCP è¿æ¥</strong>ï¼Œå¹¶åœ¨è¯·æ±‚å®Œæˆåç«‹å³æ–­å¼€ã€‚<ul><li><strong>ç¼ºç‚¹</strong>ï¼šæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ç»è¿‡ TCP ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹ï¼Œè¿™å¸¦æ¥äº†å·¨å¤§çš„æ€§èƒ½å¼€é”€ã€‚å¦‚æœä¸€ä¸ªç½‘é¡µåŒ…å«å¤šä¸ªå›¾ç‰‡ã€CSS æˆ– JavaScript æ–‡ä»¶ï¼Œæµè§ˆå™¨éœ€è¦ä¸ºæ¯ä¸ªæ–‡ä»¶å•ç‹¬å»ºç«‹å’Œæ–­å¼€è¿æ¥ï¼Œå¯¼è‡´é¡µé¢åŠ è½½é€Ÿåº¦æ…¢ã€‚</li></ul></li><li><strong>æ— ä¸»æœºå¤´ï¼ˆNo Host Headerï¼‰</strong>ï¼šè¯·æ±‚å¤´ä¸­æ²¡æœ‰ <code>Host</code> å­—æ®µã€‚è¿™æ„å‘³ç€ä¸€ä¸ª IP åœ°å€åªèƒ½å¯¹åº”ä¸€ä¸ªåŸŸåã€‚å¦‚æœæœåŠ¡å™¨ä¸Šæœ‰å¤šä¸ªç½‘ç«™ï¼Œå°±æ— æ³•é€šè¿‡ IP åœ°å€æ¥åŒºåˆ†å®ƒä»¬ï¼Œè¿™åœ¨è™šæ‹Ÿä¸»æœºæ—¶ä»£æ˜¯ä¸ªå¤§é—®é¢˜ã€‚</li><li><strong>ä¸æ”¯æŒç®¡çº¿åŒ–ï¼ˆPipeliningï¼‰</strong>ï¼šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚åï¼Œå¿…é¡»ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ï¼Œæ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚</li></ul></li></ul><h4 id="HTTP-1-1"><a href="#HTTP-1-1" class="headerlink" title="HTTP&#x2F;1.1"></a>HTTP&#x2F;1.1</h4><p>HTTP&#x2F;1.1 åè®®æ˜¯å¯¹ 1.0 çš„é‡å¤§æ”¹è¿›ï¼Œè§£å†³äº†å…¶å¤§éƒ¨åˆ†æ€§èƒ½ç“¶é¢ˆã€‚</p><ul><li><strong>æ ¸å¿ƒç‰¹ç‚¹ï¼š</strong><ul><li><strong>æŒä¹…è¿æ¥ï¼ˆPersistent Connectionï¼‰</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒHTTP&#x2F;1.1 ä¼šåœ¨ä¸€æ¬¡è¯·æ±‚-å“åº”ä¹‹å<strong>ä¿æŒ TCP è¿æ¥ä¸æ–­å¼€</strong>ã€‚å®¢æˆ·ç«¯å¯ä»¥ç»§ç»­åœ¨è¿™ä¸ªè¿æ¥ä¸Šå‘é€åç»­è¯·æ±‚ã€‚<ul><li><strong>ä¼˜ç‚¹</strong>ï¼šæ˜¾è‘—å‡å°‘äº† TCP è¿æ¥çš„å»ºç«‹å’Œæ–­å¼€å¼€é”€ï¼Œæé«˜äº†é¡µé¢åŠ è½½é€Ÿåº¦ã€‚è¿™ä¸ªç‰¹æ€§ä¹Ÿç§°ä¸ºâ€œKeep-Aliveâ€ã€‚</li></ul></li><li><strong>æ”¯æŒä¸»æœºå¤´ï¼ˆHost Headerï¼‰</strong>ï¼šè¯·æ±‚å¤´ä¸­å¼•å…¥äº† <code>Host</code> å­—æ®µï¼Œå…è®¸åœ¨åŒä¸€ä¸ª IP åœ°å€ä¸Šéƒ¨ç½²å¤šä¸ªè™šæ‹Ÿä¸»æœºï¼ˆåŸŸåï¼‰ã€‚</li><li><strong>æ”¯æŒç®¡çº¿åŒ–ï¼ˆPipeliningï¼‰</strong>ï¼šå®¢æˆ·ç«¯å¯ä»¥åœ¨æ”¶åˆ°ä¸Šä¸€ä¸ªå“åº”ä¹‹å‰ï¼Œè¿ç»­å‘é€å¤šä¸ªè¯·æ±‚ã€‚<ul><li><strong>ç¼ºç‚¹</strong>ï¼šè™½ç„¶æé«˜äº†æ•ˆç‡ï¼Œä½†å­˜åœ¨**é˜Ÿå¤´é˜»å¡ï¼ˆHead-of-Line Blockingï¼‰**é—®é¢˜ã€‚å¦‚æœç¬¬ä¸€ä¸ªè¯·æ±‚å¤„ç†æ—¶é—´å¾ˆé•¿ï¼Œåé¢çš„è¯·æ±‚å³ä½¿å·²ç»å¤„ç†å®Œæˆï¼Œä¹Ÿå¿…é¡»ç­‰å¾…å®ƒçš„å“åº”ï¼Œå¯¼è‡´æ•´ä¸ªè¿æ¥çš„æ•ˆç‡é™ä½ã€‚</li></ul></li><li><strong>å¼•å…¥ç¼“å­˜æœºåˆ¶</strong>ï¼šé€šè¿‡ <code>Cache-Control</code>, <code>ETag</code>, <code>If-None-Match</code> ç­‰è¯·æ±‚å¤´ï¼ŒHTTP&#x2F;1.1 æä¾›äº†æ›´å®Œå–„çš„ç¼“å­˜æœºåˆ¶ï¼Œå‡å°‘äº†ä¸å¿…è¦çš„è¯·æ±‚ã€‚</li></ul></li></ul><h4 id="HTTP-2-0"><a href="#HTTP-2-0" class="headerlink" title="HTTP&#x2F;2.0"></a>HTTP&#x2F;2.0</h4><p>HTTP&#x2F;2.0 æ˜¯ä¸ºäº†è§£å†³ HTTP&#x2F;1.1 åœ¨ç§»åŠ¨äº’è”ç½‘å’Œé«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ€§èƒ½é—®é¢˜è€Œè®¾è®¡çš„ã€‚å®ƒä¸æ˜¯å¯¹ HTTP&#x2F;1.1 çš„ç®€å•å‡çº§ï¼Œè€Œæ˜¯å¯¹åè®®åº•å±‚è¿›è¡Œäº†é‡æ„ã€‚</p><ul><li><strong>æ ¸å¿ƒç‰¹ç‚¹ï¼š</strong><ul><li><strong>å¤šè·¯å¤ç”¨ï¼ˆMultiplexingï¼‰</strong>ï¼šè¿™æ˜¯ HTTP&#x2F;2 çš„æ ¸å¿ƒã€‚å®ƒå…è®¸åœ¨<strong>ä¸€ä¸ª TCP è¿æ¥</strong>ä¸ŠåŒæ—¶å¤„ç†å¤šä¸ª HTTP è¯·æ±‚å’Œå“åº”ã€‚<ul><li><strong>å¦‚ä½•å®ç°ï¼Ÿ</strong>ï¼šHTTP&#x2F;2 å°†æ‰€æœ‰æ•°æ®æµï¼ˆStreamï¼‰åˆ†å‰²æˆæ›´å°çš„äºŒè¿›åˆ¶å¸§ï¼ˆFrameï¼‰ï¼Œæ¯ä¸ªå¸§éƒ½å¸¦æœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚è¿™æ ·ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥åœ¨åŒä¸€ä¸ªè¿æ¥ä¸Šäº¤é”™å‘é€å’Œæ¥æ”¶å¸§ï¼Œç„¶åæ ¹æ®æ ‡è¯†ç¬¦é‡æ–°ç»„è£…ï¼Œä»è€Œå½»åº•è§£å†³äº† HTTP&#x2F;1.1 çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚</li></ul></li><li><strong>å¤´éƒ¨å‹ç¼©ï¼ˆHeader Compressionï¼‰</strong>ï¼šHTTP&#x2F;2 ä½¿ç”¨ HPACK ç®—æ³•æ¥å‹ç¼©è¯·æ±‚å’Œå“åº”å¤´ï¼Œå°¤å…¶æ˜¯å¯¹äºé‡å¤å‘é€çš„å­—æ®µï¼Œå¤§å¤§å‡å°‘äº†æ•°æ®ä¼ è¾“é‡ã€‚</li><li><strong>æœåŠ¡å™¨æ¨é€ï¼ˆServer Pushï¼‰</strong>ï¼šæœåŠ¡å™¨å¯ä»¥åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªèµ„æºï¼ˆå¦‚ HTML é¡µé¢ï¼‰æ—¶ï¼Œä¸»åŠ¨æ¨é€å…¶ä»–å®ƒè®¤ä¸ºå®¢æˆ·ç«¯å¯èƒ½éœ€è¦çš„èµ„æºï¼ˆå¦‚ CSS å’Œ JS æ–‡ä»¶ï¼‰ï¼Œè€Œæ— éœ€å®¢æˆ·ç«¯æ˜¾å¼è¯·æ±‚ï¼Œè¿›ä¸€æ­¥æé«˜äº†åŠ è½½é€Ÿåº¦ã€‚</li><li><strong>äºŒè¿›åˆ¶åè®®</strong>ï¼šHTTP&#x2F;2 æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶åè®®ï¼Œè€Œä¸æ˜¯æ–‡æœ¬åè®®ï¼Œè§£ææ›´é«˜æ•ˆã€æ›´ä¸å®¹æ˜“å‡ºé”™ã€‚</li></ul></li></ul><hr><h3 id="äºŒã€HTTP-åè®®ç‰ˆæœ¬å¯¹æ¯”æ€»ç»“"><a href="#äºŒã€HTTP-åè®®ç‰ˆæœ¬å¯¹æ¯”æ€»ç»“" class="headerlink" title="äºŒã€HTTP åè®®ç‰ˆæœ¬å¯¹æ¯”æ€»ç»“"></a>äºŒã€HTTP åè®®ç‰ˆæœ¬å¯¹æ¯”æ€»ç»“</h3><p>ç†è§£ HTTP åè®®çš„æ¼”å˜å†ç¨‹ï¼Œèƒ½è®©ä½ æ›´æ·±åˆ»åœ°ä½“ä¼šåˆ° Web æ€§èƒ½ä¼˜åŒ–çš„æ–¹å‘ï¼Œä»¥åŠç°ä»£ Web æ¡†æ¶å¦‚ä½•åˆ©ç”¨è¿™äº›åº•å±‚åè®®ç‰¹æ€§æ¥æä¾›æ›´é«˜æ•ˆçš„æœåŠ¡ã€‚</p><table><thead><tr><th>ç‰¹æ€§</th><th>HTTP&#x2F;1.0</th><th>HTTP&#x2F;1.1</th><th>HTTP&#x2F;2.0</th></tr></thead><tbody><tr><td><strong>TCP è¿æ¥</strong></td><td>éæŒä¹…è¿æ¥</td><td>é»˜è®¤æŒä¹…è¿æ¥</td><td>å•ä¸ª TCP è¿æ¥å¤šè·¯å¤ç”¨</td></tr><tr><td><strong>æ€§èƒ½ç“¶é¢ˆ</strong></td><td>å¤šæ¬¡æ¡æ‰‹æŒ¥æ‰‹å¼€é”€</td><td>é˜Ÿå¤´é˜»å¡</td><td>æ— </td></tr><tr><td><strong>ä¸»æœºå¤´</strong></td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ (<code>Host</code> Header)</td><td>æ”¯æŒ</td></tr><tr><td><strong>å¹¶å‘è¯·æ±‚</strong></td><td>ä¸²è¡Œï¼ˆä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªè¿æ¥ï¼‰</td><td>ä¸²è¡Œï¼ˆä¸€ä¸ªè¿æ¥ä¸€ä¸ªè¯·æ±‚ï¼‰</td><td>å¹¶è¡Œï¼ˆä¸€ä¸ªè¿æ¥å¤šä¸ªè¯·æ±‚ï¼‰</td></tr><tr><td><strong>æ•°æ®æ ¼å¼</strong></td><td>æ–‡æœ¬åè®®</td><td>æ–‡æœ¬åè®®</td><td>äºŒè¿›åˆ¶åè®®</td></tr><tr><td><strong>å¤´éƒ¨</strong></td><td>æ— å‹ç¼©</td><td>æ— å‹ç¼©</td><td>HPACK ç®—æ³•å‹ç¼©</td></tr><tr><td><strong>æœåŠ¡å™¨æ¨é€</strong></td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr></tbody></table><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æŠŠæ‰€æœ‰å…³äº Servlet çš„çŸ¥è¯†ç‚¹æ•´åˆåœ¨ä¸€èµ·ï¼Œè¿›è¡Œä¸€æ¬¡æœ€å…¨é¢ã€æœ€æ·±å…¥çš„å‰–æã€‚æˆ‘ä»¬å°†ä»åŸºç¡€æ¦‚å¿µå¼€å§‹ï¼Œé€æ­¥æ·±å…¥åˆ°å®ƒçš„ç”Ÿå‘½å‘¨æœŸã€é…ç½®ã€æ ¸å¿ƒæ–¹æ³•ä»¥åŠä¸ Servlet è§„èŒƒç›¸å…³çš„å…¶ä»–é‡è¦ç»„ä»¶ã€‚</p><hr><h3 id="Servlet-æ¦‚è¿°ï¼šJava-Web-çš„æ ¸å¿ƒåŸºçŸ³"><a href="#Servlet-æ¦‚è¿°ï¼šJava-Web-çš„æ ¸å¿ƒåŸºçŸ³" class="headerlink" title="Servlet æ¦‚è¿°ï¼šJava Web çš„æ ¸å¿ƒåŸºçŸ³"></a>Servlet æ¦‚è¿°ï¼šJava Web çš„æ ¸å¿ƒåŸºçŸ³</h3><p><strong>Servlet</strong> æ˜¯ Java EE è§„èŒƒä¸­çš„ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„ Java ç¨‹åºï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚å’Œç”ŸæˆåŠ¨æ€å“åº”ã€‚ä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯æ‰€æœ‰ Java Web æ¡†æ¶ï¼ˆå¦‚ Spring MVCï¼‰çš„åº•å±‚å¼•æ“ã€‚</p><p><strong>å®ƒçš„æ ¸å¿ƒä½œç”¨</strong>æ˜¯ä½œä¸ºå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å’Œ Java åº”ç”¨ç¨‹åºä¹‹é—´çš„â€œæ¡¥æ¢â€ã€‚Servlet å®¹å™¨ï¼ˆå¦‚ Tomcatã€Jettyï¼‰è´Ÿè´£ç›‘å¬ç½‘ç»œè¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚åˆ†å‘ç»™ç›¸åº”çš„ Servlet è¿›è¡Œå¤„ç†ã€‚</p><h3 id="Servlet-çš„ç”Ÿå‘½å‘¨æœŸï¼šç”±å®¹å™¨ä¸¥æ ¼ç®¡ç†"><a href="#Servlet-çš„ç”Ÿå‘½å‘¨æœŸï¼šç”±å®¹å™¨ä¸¥æ ¼ç®¡ç†" class="headerlink" title="Servlet çš„ç”Ÿå‘½å‘¨æœŸï¼šç”±å®¹å™¨ä¸¥æ ¼ç®¡ç†"></a>Servlet çš„ç”Ÿå‘½å‘¨æœŸï¼šç”±å®¹å™¨ä¸¥æ ¼ç®¡ç†</h3><p>ä¸€ä¸ª Servlet çš„ç”Ÿå‘½å‘¨æœŸç”± Servlet å®¹å™¨ä¸¥æ ¼ç®¡ç†ï¼Œé€šå¸¸åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p><ol><li><strong>åˆå§‹åŒ–ï¼ˆInitializationï¼‰</strong><ul><li><strong>æ—¶æœº</strong>ï¼šå½“ Servlet å®¹å™¨ç¬¬ä¸€æ¬¡åŠ è½½ Servlet ç±»å¹¶åˆ›å»ºå…¶å®ä¾‹åï¼Œç«‹å³è°ƒç”¨ <code>init()</code> æ–¹æ³•ã€‚</li><li><strong>ç‰¹æ€§</strong>ï¼šè¿™ä¸ªæ–¹æ³•<strong>åªæ‰§è¡Œä¸€æ¬¡</strong>ï¼Œé€šå¸¸ç”¨äºåŠ è½½é…ç½®æ–‡ä»¶ã€å»ºç«‹æ•°æ®åº“è¿æ¥æ± ç­‰ä¸€æ¬¡æ€§ã€è€—æ—¶çš„ä»»åŠ¡ã€‚å¦‚æœ <code>init()</code> æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼ŒServlet å°†æ— æ³•æä¾›æœåŠ¡ã€‚</li></ul></li><li><strong>æœåŠ¡ï¼ˆServicingï¼‰</strong><ul><li><strong>æ—¶æœº</strong>ï¼šæ¯å½“ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œå®¹å™¨ä¼šä¸ºè¯¥è¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œå¹¶è°ƒç”¨ <code>service()</code> æ–¹æ³•ã€‚</li><li><strong>ç‰¹æ€§</strong>ï¼š<code>service()</code> æ–¹æ³•æ˜¯ Servlet çš„æ ¸å¿ƒï¼Œå®ƒä¼šæ ¹æ®è¯·æ±‚ç±»å‹ï¼ˆå¦‚ GETã€POSTï¼‰è‡ªåŠ¨è°ƒç”¨ç›¸åº”çš„ <code>doGet()</code>ã€<code>doPost()</code> ç­‰æ–¹æ³•ã€‚ç”±äºæ­¤æ–¹æ³•ä¼šè¢«å¤šä¸ªçº¿ç¨‹å¹¶å‘è°ƒç”¨ï¼Œå› æ­¤è®¿é—®å…±äº«èµ„æºæ—¶å¿…é¡»æ³¨æ„<strong>çº¿ç¨‹å®‰å…¨</strong>ã€‚</li></ul></li><li><strong>é”€æ¯ï¼ˆDestructionï¼‰</strong><ul><li><strong>æ—¶æœº</strong>ï¼šå½“ Servlet å®¹å™¨å…³é—­æˆ–å†³å®šå¸è½½æŸä¸ª Servlet æ—¶ï¼Œä¼šè°ƒç”¨å…¶ <code>destroy()</code> æ–¹æ³•ã€‚</li><li><strong>ç‰¹æ€§</strong>ï¼šè¿™ä¸ªæ–¹æ³•ä¹Ÿ<strong>åªæ‰§è¡Œä¸€æ¬¡</strong>ï¼Œç”¨äºé‡Šæ”¾èµ„æºï¼Œå¦‚å…³é—­æ•°æ®åº“è¿æ¥æˆ–æ–‡ä»¶æµã€‚</li></ul></li></ol><h3 id="Servlet-çš„é…ç½®å’Œéƒ¨ç½²ï¼šä¸¤ç§ä¸»è¦æ–¹å¼"><a href="#Servlet-çš„é…ç½®å’Œéƒ¨ç½²ï¼šä¸¤ç§ä¸»è¦æ–¹å¼" class="headerlink" title="Servlet çš„é…ç½®å’Œéƒ¨ç½²ï¼šä¸¤ç§ä¸»è¦æ–¹å¼"></a>Servlet çš„é…ç½®å’Œéƒ¨ç½²ï¼šä¸¤ç§ä¸»è¦æ–¹å¼</h3><p>ä¸ºäº†è®©å®¹å™¨çŸ¥é“å¦‚ä½•åŠ è½½å’Œæ˜ å°„ Servletï¼Œä½ éœ€è¦è¿›è¡Œé…ç½®ã€‚</p><ol><li><strong>web.xml é…ç½®ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰</strong><ul><li>åœ¨ <code>web.xml</code> æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ <code>&lt;servlet&gt;</code> æ ‡ç­¾å®šä¹‰ Servlet ç±»ï¼Œå¹¶ä½¿ç”¨ <code>&lt;servlet-mapping&gt;</code> æ ‡ç­¾å°†å®ƒæ˜ å°„åˆ°ä¸€ä¸ª URL è·¯å¾„ã€‚</li><li><strong>ä¼˜ç‚¹</strong>ï¼šé…ç½®é›†ä¸­ï¼Œæ˜“äºç®¡ç†ã€‚</li><li><strong>ç¼ºç‚¹</strong>ï¼šå¦‚æœ Servlet å¾ˆå¤šï¼Œ<code>web.xml</code> æ–‡ä»¶ä¼šå˜å¾—éå¸¸åºå¤§ã€‚</li></ul></li><li><strong>æ³¨è§£é…ç½®ï¼ˆç°ä»£æ–¹å¼ï¼‰</strong><ul><li>ä» Servlet 3.0 è§„èŒƒå¼€å§‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>@WebServlet</code> æ³¨è§£æ¥ç®€åŒ–é…ç½®ã€‚åªéœ€åœ¨ä½ çš„ Servlet ç±»ä¸Šæ·»åŠ  <code>@WebServlet(&quot;/path&quot;)</code> æ³¨è§£ï¼Œå®¹å™¨å°±ä¼šè‡ªåŠ¨è¯†åˆ«å’Œé…ç½®å®ƒã€‚</li><li><strong>ä¼˜ç‚¹</strong>ï¼šé…ç½®ç®€å•ï¼Œä»£ç å’Œé…ç½®åœ¨ä¸€èµ·ï¼Œæé«˜äº†å¯è¯»æ€§ã€‚</li></ul></li></ol><h3 id="Servlet-çš„æ ¸å¿ƒæ–¹æ³•ï¼šå¤„ç†è¯·æ±‚å’Œå“åº”"><a href="#Servlet-çš„æ ¸å¿ƒæ–¹æ³•ï¼šå¤„ç†è¯·æ±‚å’Œå“åº”" class="headerlink" title="Servlet çš„æ ¸å¿ƒæ–¹æ³•ï¼šå¤„ç†è¯·æ±‚å’Œå“åº”"></a>Servlet çš„æ ¸å¿ƒæ–¹æ³•ï¼šå¤„ç†è¯·æ±‚å’Œå“åº”</h3><p>æ‰€æœ‰ Servlet éƒ½åº”è¯¥å®ç° <code>javax.servlet.Servlet</code> æ¥å£ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬æ›´å¸¸ç»§æ‰¿ <code>javax.servlet.http.HttpServlet</code>ï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´æ–¹ä¾¿çš„ HTTP è¯·æ±‚å¤„ç†æ–¹æ³•ã€‚</p><ul><li><code>service(HttpServletRequest req, HttpServletResponse res)</code>ï¼šè¿™æ˜¯æ ¸å¿ƒæœåŠ¡æ–¹æ³•ï¼Œç”±å®¹å™¨è°ƒç”¨ã€‚å®ƒä¼šæ ¹æ®è¯·æ±‚çš„ HTTP æ–¹æ³•ï¼ˆGETã€POSTã€PUT ç­‰ï¼‰æ¥è°ƒç”¨ç›¸åº”çš„ <code>doGet()</code>ã€<code>doPost()</code> ç­‰æ–¹æ³•ã€‚</li><li><code>doGet(HttpServletRequest req, HttpServletResponse res)</code>ï¼šå¤„ç†æ‰€æœ‰ GET è¯·æ±‚ã€‚</li><li><code>doPost(HttpServletRequest req, HttpServletResponse res)</code>ï¼šå¤„ç†æ‰€æœ‰ POST è¯·æ±‚ã€‚</li><li><code>doPut(HttpServletRequest req, HttpServletResponse res)</code>ï¼šå¤„ç†æ‰€æœ‰ PUT è¯·æ±‚ã€‚</li><li><code>doDelete(HttpServletRequest req, HttpServletResponse res)</code>ï¼šå¤„ç†æ‰€æœ‰ DELETE è¯·æ±‚ã€‚</li></ul><p>åœ¨è¿™äº›æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ <code>req</code> (è¯·æ±‚) å’Œ <code>res</code> (å“åº”) å¯¹è±¡æ¥ä¸å®¢æˆ·ç«¯è¿›è¡Œäº¤äº’ã€‚</p><h3 id="Servlet-çš„è¯·æ±‚å’Œå“åº”å¤„ç†ï¼šä¸å®¢æˆ·ç«¯äº¤äº’"><a href="#Servlet-çš„è¯·æ±‚å’Œå“åº”å¤„ç†ï¼šä¸å®¢æˆ·ç«¯äº¤äº’" class="headerlink" title="Servlet çš„è¯·æ±‚å’Œå“åº”å¤„ç†ï¼šä¸å®¢æˆ·ç«¯äº¤äº’"></a>Servlet çš„è¯·æ±‚å’Œå“åº”å¤„ç†ï¼šä¸å®¢æˆ·ç«¯äº¤äº’</h3><ul><li><strong>è·å–è¯·æ±‚å‚æ•°</strong><ul><li><code>req.getParameter(&quot;paramName&quot;)</code>ï¼šè·å–å•ä¸ªå‚æ•°å€¼ã€‚</li><li><code>req.getParameterValues(&quot;paramName&quot;)</code>ï¼šè·å–å…·æœ‰ç›¸åŒåç§°çš„å¤šä¸ªå‚æ•°å€¼ï¼ˆå¦‚å¤é€‰æ¡†ï¼‰ã€‚</li></ul></li><li><strong>è®¾ç½®å“åº”å¤´</strong><ul><li><code>res.setContentType(&quot;text/html;charset=UTF-8&quot;)</code>ï¼šè®¾ç½®å“åº”çš„å†…å®¹ç±»å‹å’Œå­—ç¬¦ç¼–ç ã€‚</li><li><code>res.setHeader(&quot;HeaderName&quot;, &quot;HeaderValue&quot;)</code>ï¼šè®¾ç½®è‡ªå®šä¹‰å“åº”å¤´ã€‚</li></ul></li><li><strong>å†™å…¥å“åº”å†…å®¹</strong><ul><li><code>res.getWriter()</code>ï¼šè·å–ä¸€ä¸ª <code>PrintWriter</code>ï¼Œç”¨äºå‘å®¢æˆ·ç«¯å‘é€æ–‡æœ¬å“åº”ã€‚</li><li><code>res.getOutputStream()</code>ï¼šè·å–ä¸€ä¸ª <code>ServletOutputStream</code>ï¼Œç”¨äºå‘å®¢æˆ·ç«¯å‘é€äºŒè¿›åˆ¶å“åº”ï¼ˆå¦‚å›¾ç‰‡ã€æ–‡ä»¶ï¼‰ã€‚</li></ul></li></ul><h3 id="Servlet-çš„æ ¸å¿ƒç»„ä»¶ä¸ä½œç”¨åŸŸ"><a href="#Servlet-çš„æ ¸å¿ƒç»„ä»¶ä¸ä½œç”¨åŸŸ" class="headerlink" title="Servlet çš„æ ¸å¿ƒç»„ä»¶ä¸ä½œç”¨åŸŸ"></a>Servlet çš„æ ¸å¿ƒç»„ä»¶ä¸ä½œç”¨åŸŸ</h3><p>ç†è§£ Servlet è§„èŒƒä¸­çš„è¿™äº›ç»„ä»¶ï¼Œèƒ½å¸®åŠ©ä½ æ›´åˆç†åœ°ç®¡ç†æ•°æ®å’Œèµ„æºã€‚</p><ol><li><strong>ServletContext (åº”ç”¨ä¸Šä¸‹æ–‡)</strong><ul><li><strong>ä½œç”¨</strong>ï¼šä»£è¡¨æ•´ä¸ª Web åº”ç”¨ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸åº”ç”¨ç›¸åŒã€‚</li><li><strong>ä½œç”¨åŸŸ</strong>ï¼šæ•°æ®åœ¨æ‰€æœ‰ Servletã€JSP å’Œ Filter ä¹‹é—´<strong>å…±äº«</strong>ã€‚</li><li><strong>ç”¨é€”</strong>ï¼šå­˜å‚¨å…¨å±€é…ç½®å’Œå…±äº«æ•°æ®ã€‚</li></ul></li><li><strong>ServletConfig (é…ç½®å¯¹è±¡)</strong><ul><li><strong>ä½œç”¨</strong>ï¼šä»£è¡¨ä¸€ä¸ª Servlet ç‹¬æœ‰çš„é…ç½®ã€‚</li><li><strong>ä½œç”¨åŸŸ</strong>ï¼šä»…åœ¨å®ƒæ‰€å…³è”çš„ Servlet å†…éƒ¨æœ‰æ•ˆã€‚</li><li><strong>ç”¨é€”</strong>ï¼šè·å–ç‰¹å®š Servlet çš„åˆå§‹åŒ–å‚æ•°ã€‚</li></ul></li><li><strong>å››å¤§ä½œç”¨åŸŸ</strong><ul><li><strong>PageContext (é¡µé¢ä½œç”¨åŸŸ)</strong>ï¼šä»…åœ¨ JSP é¡µé¢å†…æœ‰æ•ˆã€‚</li><li><strong>HttpServletRequest (è¯·æ±‚ä½œç”¨åŸŸ)</strong>ï¼šåœ¨ä¸€æ¬¡å®Œæ•´çš„è¯·æ±‚-å“åº”å‘¨æœŸå†…æœ‰æ•ˆï¼Œå³ä½¿è¯·æ±‚è¢«è½¬å‘ï¼Œæ•°æ®ä¾ç„¶å¯è§ã€‚</li><li><strong>HttpSession (ä¼šè¯ä½œç”¨åŸŸ)</strong>ï¼šåœ¨åŒä¸€ä¸ªæµè§ˆå™¨ä¼šè¯ä¸­æœ‰æ•ˆï¼Œç”¨äºå­˜å‚¨ç”¨æˆ·ç‰¹å®šæ•°æ®ã€‚</li><li><strong>ServletContext (åº”ç”¨ä½œç”¨åŸŸ)</strong>ï¼šåœ¨æ•´ä¸ª Web åº”ç”¨ä¸­éƒ½æœ‰æ•ˆï¼Œç”¨äºå­˜å‚¨å…¨å±€æ•°æ®ã€‚</li></ul></li></ol><p>å¥½çš„ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†ã€æ·±å…¥åœ°èŠèŠ Web å¼€å‘ä¸­è‡³å…³é‡è¦çš„ä¸¤ä¸ªæ¦‚å¿µï¼šCookie å’Œ Sessionã€‚å®ƒä»¬æ˜¯è§£å†³ HTTP æ— çŠ¶æ€é—®é¢˜çš„æ ¸å¿ƒæ–¹æ¡ˆï¼Œä½†å·¥ä½œæœºåˆ¶å’Œåº”ç”¨åœºæ™¯å´å¤§ä¸ç›¸åŒã€‚</p><hr><h3 id="Cookieï¼šå®¢æˆ·ç«¯çš„â€œå°çº¸æ¡â€"><a href="#Cookieï¼šå®¢æˆ·ç«¯çš„â€œå°çº¸æ¡â€" class="headerlink" title="Cookieï¼šå®¢æˆ·ç«¯çš„â€œå°çº¸æ¡â€"></a>Cookieï¼šå®¢æˆ·ç«¯çš„â€œå°çº¸æ¡â€</h3><p><strong>Cookie</strong> æ˜¯æœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨å¹¶å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„ä¸€å°æ®µæ–‡æœ¬ä¿¡æ¯ã€‚æµè§ˆå™¨åœ¨ä¸‹æ¬¡è®¿é—®åŒä¸€æœåŠ¡å™¨æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¯¥ Cookie åŒ…å«åœ¨è¯·æ±‚ä¸­å‘é€å›å»ã€‚</p><h4 id="æ ¸å¿ƒå·¥ä½œæœºåˆ¶"><a href="#æ ¸å¿ƒå·¥ä½œæœºåˆ¶" class="headerlink" title="æ ¸å¿ƒå·¥ä½œæœºåˆ¶"></a>æ ¸å¿ƒå·¥ä½œæœºåˆ¶</h4><ol><li><p>æœåŠ¡å™¨åˆ›å»º Cookieï¼š</p><p>å½“ç”¨æˆ·é¦–æ¬¡è®¿é—®ç½‘ç«™æ—¶ï¼ŒæœåŠ¡å™¨åœ¨å“åº”å¤´ï¼ˆResponse Headerï¼‰ä¸­æ·»åŠ ä¸€ä¸ª Set-Cookie å­—æ®µã€‚</p><p>æ¯”å¦‚ï¼šSet-Cookie: JSESSIONID&#x3D;abcde12345; Path&#x3D;&#x2F;; HttpOnly</p></li><li><p>æµè§ˆå™¨ä¿å­˜ Cookieï¼š</p><p>æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”åï¼Œä¼šè§£æ Set-Cookie å¤´ï¼Œå¹¶å°†è¯¥ä¿¡æ¯ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨åœ¨æœ¬åœ°ã€‚</p></li><li><p>æµè§ˆå™¨å‘é€ Cookieï¼š</p><p>åœ¨åç»­çš„è¯·æ±‚ä¸­ï¼Œåªè¦è¯·æ±‚çš„åŸŸåå’Œè·¯å¾„ä¸ Cookie çš„è®¾ç½®ç›¸ç¬¦ï¼Œæµè§ˆå™¨å°±ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚å¤´ï¼ˆRequest Headerï¼‰ä¸­æ·»åŠ  Cookie å­—æ®µï¼Œå°†å­˜å‚¨çš„ Cookie ä¿¡æ¯å‘é€ç»™æœåŠ¡å™¨ã€‚</p><p>æ¯”å¦‚ï¼šCookie: JSESSIONID&#x3D;abcde12345</p></li></ol><h4 id="Cookie-çš„ä¼˜ç¼ºç‚¹"><a href="#Cookie-çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="Cookie çš„ä¼˜ç¼ºç‚¹"></a>Cookie çš„ä¼˜ç¼ºç‚¹</h4><ul><li><strong>ä¼˜ç‚¹</strong>ï¼š<ul><li><strong>å‡è½»æœåŠ¡å™¨å‹åŠ›</strong>ï¼šæ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨ä¸éœ€è¦ä¸ºæ¯ä¸ªç”¨æˆ·ç»´æŠ¤çŠ¶æ€ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡è®¿é—®ã€‚</li><li><strong>å¯æ‰©å±•æ€§å¼º</strong>ï¼šæ— çŠ¶æ€ï¼Œå¤©ç„¶é€‚åˆåˆ†å¸ƒå¼æ¶æ„ã€‚</li></ul></li><li><strong>ç¼ºç‚¹</strong>ï¼š<ul><li><strong>å®‰å…¨æ€§å·®</strong>ï¼šæ•°æ®ä»¥æ˜æ–‡å½¢å¼å­˜å‚¨ï¼Œå®¹æ˜“è¢«çªƒå–å’Œç¯¡æ”¹ã€‚</li><li><strong>å®¹é‡é™åˆ¶</strong>ï¼šå•ä¸ª Cookie çš„å¤§å°é€šå¸¸ä¸è¶…è¿‡ 4KBï¼Œä¸”ä¸€ä¸ªåŸŸåä¸‹çš„ Cookie æ€»æ•°ä¹Ÿæœ‰é™åˆ¶ã€‚</li><li><strong>ç”¨æˆ·å¯ç¦ç”¨</strong>ï¼šå¦‚æœç”¨æˆ·ç¦ç”¨äº†æµè§ˆå™¨ Cookie åŠŸèƒ½ï¼Œç›¸å…³åŠŸèƒ½å°†æ— æ³•ä½¿ç”¨ã€‚</li></ul></li></ul><hr><h3 id="Sessionï¼šæœåŠ¡å™¨çš„â€œä¸ªäººæ¡£æ¡ˆâ€"><a href="#Sessionï¼šæœåŠ¡å™¨çš„â€œä¸ªäººæ¡£æ¡ˆâ€" class="headerlink" title="Sessionï¼šæœåŠ¡å™¨çš„â€œä¸ªäººæ¡£æ¡ˆâ€"></a>Sessionï¼šæœåŠ¡å™¨çš„â€œä¸ªäººæ¡£æ¡ˆâ€</h3><p><strong>Session</strong> æ˜¯æœåŠ¡å™¨ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºçš„ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå­˜å‚¨ç‰¹å®šç”¨æˆ·çš„ä¼šè¯æ•°æ®ã€‚å®ƒå°†ç”¨æˆ·çš„çŠ¶æ€ä¿¡æ¯ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå”¯ä¸€çš„ <strong>Session ID</strong> æ¥è¯†åˆ«ä¸åŒçš„ç”¨æˆ·ã€‚</p><h4 id="æ ¸å¿ƒå·¥ä½œæœºåˆ¶-1"><a href="#æ ¸å¿ƒå·¥ä½œæœºåˆ¶-1" class="headerlink" title="æ ¸å¿ƒå·¥ä½œæœºåˆ¶"></a>æ ¸å¿ƒå·¥ä½œæœºåˆ¶</h4><ol><li><p>æœåŠ¡å™¨åˆ›å»º Sessionï¼š</p><p>å½“ç”¨æˆ·é¦–æ¬¡è®¿é—® Web åº”ç”¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šåˆ›å»ºä¸€ä¸ª HttpSession å¯¹è±¡ï¼Œå¹¶ä¸ºå…¶åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ Session IDã€‚</p></li><li><p>ä¼ é€’ Session IDï¼š</p><p>æœåŠ¡å™¨å°†è¿™ä¸ª Session ID ä»¥ Cookie çš„å½¢å¼å‘é€ç»™æµè§ˆå™¨ï¼ˆè¿™ä¸ª Cookie é€šå¸¸å« JSESSIONIDï¼‰ã€‚</p><ul><li>å¦‚æœæµè§ˆå™¨ç¦ç”¨äº† Cookieï¼ŒæœåŠ¡å™¨å¯ä»¥é€šè¿‡ <strong>URL é‡å†™</strong>çš„æ–¹å¼ï¼Œå°† Session ID é™„åŠ åˆ°æ¯ä¸ª URL çš„æœ«å°¾ï¼Œä¾‹å¦‚ï¼š<code>.../index.jsp;jsessionid=abcde12345</code>ã€‚</li></ul></li><li><p>æœåŠ¡å™¨ç»´æŠ¤ Sessionï¼š</p><p>Session ID ä¼ é€’åˆ°å®¢æˆ·ç«¯åï¼ŒæœåŠ¡å™¨ä¼šåœ¨å†…å­˜ä¸­æˆ–æŒä¹…åŒ–å­˜å‚¨ä¸­ä¿å­˜è¿™ä¸ª HttpSession å¯¹è±¡åŠå…¶æ•°æ®ã€‚</p></li><li><p>è¯†åˆ«ç”¨æˆ·ï¼š</p><p>åç»­çš„è¯·æ±‚ä¸­ï¼Œæµè§ˆå™¨éƒ½ä¼šå¸¦ç€åŒ…å« Session ID çš„ Cookieã€‚æœåŠ¡å™¨é€šè¿‡è¿™ä¸ª ID å°±èƒ½ä»å†…å­˜ä¸­æ‰¾åˆ°å¯¹åº”çš„ HttpSession å¯¹è±¡ï¼Œä»è€Œè·å–è¯¥ç”¨æˆ·çš„çŠ¶æ€ä¿¡æ¯ã€‚</p></li></ol><h4 id="Session-çš„ä¼˜ç¼ºç‚¹"><a href="#Session-çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="Session çš„ä¼˜ç¼ºç‚¹"></a>Session çš„ä¼˜ç¼ºç‚¹</h4><ul><li><strong>ä¼˜ç‚¹</strong>ï¼š<ul><li><strong>å®‰å…¨æ€§é«˜</strong>ï¼šæ ¸å¿ƒæ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯åªä¼ é€’ä¸€ä¸ªæ— æ³•çŒœè§£çš„ IDã€‚</li><li><strong>å®¹é‡å¤§</strong>ï¼šå­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œç†è®ºä¸Šæ²¡æœ‰å¤§å°é™åˆ¶ã€‚</li></ul></li><li><strong>ç¼ºç‚¹</strong>ï¼š<ul><li><strong>å ç”¨æœåŠ¡å™¨èµ„æº</strong>ï¼šæ¯ä¸ªæ´»è·ƒçš„ Session éƒ½ä¼šå ç”¨æœåŠ¡å™¨å†…å­˜ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å¯èƒ½æˆä¸ºç“¶é¢ˆã€‚</li><li><strong>åˆ†å¸ƒå¼æŒ‘æˆ˜</strong>ï¼šåœ¨å¤šå°æœåŠ¡å™¨ç»„æˆçš„é›†ç¾¤ç¯å¢ƒä¸­ï¼Œéœ€è¦é¢å¤–çš„æœºåˆ¶ï¼ˆå¦‚ Session å…±äº«æˆ–ç²˜æ€§ä¼šè¯ï¼‰æ¥ç¡®ä¿ç”¨æˆ·çš„è¯·æ±‚æ€»æ˜¯è¢«è½¬å‘åˆ°åŒä¸€ä¸ª Session æ‰€åœ¨çš„æœåŠ¡å™¨ï¼Œæˆ–è€…æ‰€æœ‰æœåŠ¡å™¨éƒ½èƒ½è®¿é—®åˆ° Session æ•°æ®ã€‚</li></ul></li></ul><hr><h3 id="Cookie-ä¸-Session-çš„å¯¹æ¯”æ€»ç»“"><a href="#Cookie-ä¸-Session-çš„å¯¹æ¯”æ€»ç»“" class="headerlink" title="Cookie ä¸ Session çš„å¯¹æ¯”æ€»ç»“"></a>Cookie ä¸ Session çš„å¯¹æ¯”æ€»ç»“</h3><table><thead><tr><th>ç‰¹æ€§</th><th>Cookie</th><th>Session</th></tr></thead><tbody><tr><td><strong>æ•°æ®å­˜å‚¨ä½ç½®</strong></td><td>å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰</td><td>æœåŠ¡å™¨ç«¯</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>è¾ƒä½ï¼Œæ˜“è¢«ç¯¡æ”¹</td><td>è¾ƒé«˜ï¼Œæ•°æ®å®‰å…¨</td></tr><tr><td><strong>æ•°æ®å®¹é‡</strong></td><td>è¾ƒå°ï¼ˆ~4KBï¼‰</td><td>è¾ƒå¤§ï¼Œæ— æ˜æ˜¾é™åˆ¶</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>è½»é‡ï¼Œä¸å ç”¨æœåŠ¡å™¨èµ„æº</td><td>å ç”¨æœåŠ¡å™¨å†…å­˜ï¼Œå¯èƒ½å½±å“æ€§èƒ½</td></tr><tr><td><strong>å¯æ‰©å±•æ€§</strong></td><td>å¤©ç„¶æ— çŠ¶æ€ï¼Œæ˜“äºæ‰©å±•</td><td>åˆ†å¸ƒå¼ç¯å¢ƒä¸‹éœ€è¦é¢å¤–é…ç½®</td></tr><tr><td><strong>ä¸»è¦ç”¨é€”</strong></td><td>è´­ç‰©è½¦ã€ç”¨æˆ·åå¥½ã€è½»é‡çº§çŠ¶æ€</td><td>ç™»å½•çŠ¶æ€ã€æƒé™éªŒè¯ã€æ•æ„Ÿæ•°æ®</td></tr></tbody></table><p>å¥½çš„ï¼Œæˆ‘å·²å°† GET å’Œ POST è¯·æ±‚çš„æ‰€æœ‰æ ¸å¿ƒåŒºåˆ«æ•´ç†æˆä¸€ä¸ªç®€æ´æ˜äº†çš„è¡¨æ ¼ï¼Œå¹¶è¡¥å……äº†æ›´å¤šç»†èŠ‚ï¼Œä½¿å…¶æ›´å…¨é¢ã€‚</p><h3 id="GET-å’Œ-POST-è¯·æ±‚çš„å…¨é¢å¯¹æ¯”"><a href="#GET-å’Œ-POST-è¯·æ±‚çš„å…¨é¢å¯¹æ¯”" class="headerlink" title="GET å’Œ POST è¯·æ±‚çš„å…¨é¢å¯¹æ¯”"></a>GET å’Œ POST è¯·æ±‚çš„å…¨é¢å¯¹æ¯”</h3><table><thead><tr><th>ç‰¹æ€§</th><th>GET è¯·æ±‚</th><th>POST è¯·æ±‚</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td><strong>åŸºæœ¬ä½œç”¨</strong></td><td>ä»æœåŠ¡å™¨<strong>è·å–</strong>èµ„æº</td><td>å‘æœåŠ¡å™¨<strong>æäº¤</strong>æ•°æ®ï¼Œé€šå¸¸ç”¨äº<strong>åˆ›å»º</strong>èµ„æºã€‚</td><td>è¯­ä¹‰ä¸åŒæ˜¯æ‰€æœ‰åŒºåˆ«çš„æ ¹æœ¬ã€‚</td></tr><tr><td><strong>ä¼ å‚æ–¹å¼</strong></td><td>å‚æ•°é™„åŠ åœ¨ URL ä¸­</td><td>å‚æ•°æ”¾åœ¨è¯·æ±‚ä½“ï¼ˆRequest Bodyï¼‰ä¸­</td><td>GET å‚æ•°å¯è§ï¼ŒPOST å‚æ•°éšè—ã€‚</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td><strong>ä¸å®‰å…¨</strong>ï¼ŒURL æš´éœ²</td><td><strong>ç›¸å¯¹å®‰å…¨</strong>ï¼Œå‚æ•°éšè—åœ¨è¯·æ±‚ä½“ä¸­</td><td>è¿™é‡Œçš„â€œå®‰å…¨â€æŒ‡æ•°æ®ä¸è¢«æš´éœ²ã€‚</td></tr><tr><td><strong>å¹‚ç­‰æ€§</strong></td><td><strong>æ˜¯</strong>ï¼ˆå¤šæ¬¡æ‰§è¡Œç»“æœç›¸åŒï¼‰</td><td><strong>å¦</strong>ï¼ˆå¤šæ¬¡æ‰§è¡Œå¯èƒ½äº§ç”Ÿæ–°èµ„æºï¼‰</td><td>å¹‚ç­‰æ€§æ˜¯ RESTful è®¾è®¡çš„å…³é”®åŸåˆ™ã€‚</td></tr><tr><td><strong>æµè§ˆå™¨è¡Œä¸º</strong></td><td>å›é€€æ— å®³ï¼Œå¯è¢«è®°å½•åœ¨å†å²ã€æ”¶è—ä¸ºä¹¦ç­¾ã€‚</td><td>å›é€€æ—¶é€šå¸¸ä¼šæç¤ºé‡æ–°æäº¤ï¼Œä¸è®°å½•åœ¨å†å²ã€ä¸å¯æ”¶è—ã€‚</td><td>é˜²æ­¢æ„å¤–æäº¤å¯¼è‡´æ•°æ®é‡å¤ã€‚</td></tr><tr><td><strong>ç¼“å­˜</strong></td><td><strong>å¯ä»¥è¢«ç¼“å­˜</strong></td><td><strong>ä¸ä¼šè¢«ç¼“å­˜</strong></td><td>ç¼“å­˜èƒ½æé«˜æ€§èƒ½ï¼Œä½†ä»…é™äºåªè¯»æ“ä½œã€‚</td></tr><tr><td><strong>ä¼ è¾“æ•°æ®é‡</strong></td><td>æœ‰é•¿åº¦é™åˆ¶ï¼ˆURLé•¿åº¦é™åˆ¶ï¼‰</td><td>æ— é•¿åº¦é™åˆ¶ï¼ˆå–å†³äºæœåŠ¡å™¨é…ç½®ï¼‰</td><td>GET ä¸é€‚åˆä¼ è¾“å¤§é‡æ•°æ®ã€‚</td></tr><tr><td><strong>æ•°æ®ç¼–ç </strong></td><td>åªæ”¯æŒ URL ç¼–ç </td><td>æ”¯æŒå¤šç§ç¼–ç ï¼ˆå¦‚<code>application/json</code>ï¼‰</td><td>POST çµæ´»æ€§é«˜ï¼Œé€‚åˆå„ç§æ•°æ®ç±»å‹ã€‚</td></tr><tr><td><strong>å‘é€æ–‡ä»¶</strong></td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ (<code>multipart/form-data</code>)</td><td>æ–‡ä»¶å¿…é¡»é€šè¿‡è¯·æ±‚ä½“ä¼ è¾“ã€‚</td></tr><tr><td><strong>HTTP æŠ¥æ–‡</strong></td><td>æ— è¯·æ±‚ä½“</td><td>æœ‰è¯·æ±‚ä½“</td><td>GET è¯·æ±‚æŠ¥æ–‡æ›´å°ï¼Œæ›´è½»é‡ã€‚</td></tr><tr><td><strong>TCP&#x2F;IP åè®®</strong></td><td>ä¸€æ¬¡æ€§å‘é€æ‰€æœ‰æ•°æ®åŒ…</td><td>æµè§ˆå™¨é€šå¸¸ä¼šå…ˆå‘é€è¯·æ±‚å¤´ï¼ŒæœåŠ¡å™¨å“åº” 100-continue åå†å‘é€è¯·æ±‚ä½“</td><td>POST çš„åˆ†æ­¥å‘é€æœºåˆ¶å¯ä»¥é¿å…å‘é€ä¸å¿…è¦çš„æ•°æ®ã€‚</td></tr></tbody></table><p>å¥½çš„ï¼Œæˆ‘ä»¬å°†ä»¥ Servlet çš„è¯¦ç»†å‰–ææ–¹å¼ï¼Œå…¨é¢ã€æ·±å…¥åœ°ä»‹ç» WebSocketã€‚æˆ‘ä»¬å°†ä»å®ƒçš„æ¦‚å¿µã€ç”Ÿå‘½å‘¨æœŸã€æ ¸å¿ƒ APIï¼Œåˆ°å®ƒä¸ HTTP çš„åŒºåˆ«ä»¥åŠåœ¨ç°ä»£ Web ä¸­çš„åº”ç”¨ï¼Œè¿›è¡Œç³»ç»Ÿæ€§çš„æ¢³ç†ã€‚</p><hr><h3 id="WebSocket-æ¦‚è¿°ï¼šWeb-é€šä¿¡çš„é©å‘½"><a href="#WebSocket-æ¦‚è¿°ï¼šWeb-é€šä¿¡çš„é©å‘½" class="headerlink" title="WebSocket æ¦‚è¿°ï¼šWeb é€šä¿¡çš„é©å‘½"></a>WebSocket æ¦‚è¿°ï¼šWeb é€šä¿¡çš„é©å‘½</h3><p><strong>WebSocket</strong> åè®®æ˜¯ HTML5 å¼€å§‹æä¾›çš„ä¸€ç§åœ¨å•ä¸ª TCP è¿æ¥ä¸Šè¿›è¡Œ<strong>å…¨åŒå·¥é€šä¿¡</strong>çš„åè®®ã€‚ä¸ä¼ ç»Ÿçš„ HTTP åè®®ä¸åŒï¼Œå®ƒæ‰“ç ´äº†è¯·æ±‚-å“åº”çš„å•å‘æ¨¡å¼ï¼Œä½¿å¾—å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥<strong>å®æ—¶åœ°åŒå‘è‡ªç”±ä¼ è¾“æ•°æ®</strong>ã€‚</p><p><strong>å®ƒçš„æ ¸å¿ƒä½œç”¨</strong>æ˜¯è§£å†³ Web åº”ç”¨ä¸­<strong>å®æ—¶é€šä¿¡</strong>çš„éœ€æ±‚ï¼Œä¾‹å¦‚ï¼šèŠå¤©åº”ç”¨ã€åœ¨çº¿æ¸¸æˆã€è‚¡ç¥¨è¡Œæƒ…ã€å®æ—¶åä½œå·¥å…·ç­‰ã€‚å®ƒæå¤§åœ°å‡å°‘äº†ç½‘ç»œå¼€é”€ï¼Œæé«˜äº†é€šä¿¡æ•ˆç‡ã€‚</p><h3 id="WebSocket-çš„æ ¸å¿ƒå·¥ä½œåŸç†"><a href="#WebSocket-çš„æ ¸å¿ƒå·¥ä½œåŸç†" class="headerlink" title="WebSocket çš„æ ¸å¿ƒå·¥ä½œåŸç†"></a>WebSocket çš„æ ¸å¿ƒå·¥ä½œåŸç†</h3><p>è¦ç†è§£ WebSocketï¼Œå¿…é¡»é¦–å…ˆç†è§£å®ƒä¸ HTTP çš„å…³ç³»ã€‚</p><ol><li><strong>åŸºäº HTTP çš„æ¡æ‰‹ï¼ˆHandshakeï¼‰</strong>ï¼š<ul><li>WebSocket çš„è¿æ¥å»ºç«‹è¿‡ç¨‹æ˜¯åŸºäº HTTP åè®®çš„ã€‚</li><li>å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªç‰¹æ®Šçš„ HTTP è¯·æ±‚ï¼Œå…¶ä¸­åŒ…å« <code>Upgrade: websocket</code> å’Œ <code>Connection: Upgrade</code> è¯·æ±‚å¤´ï¼Œå‘æœåŠ¡å™¨è¯·æ±‚å°† HTTP åè®®å‡çº§åˆ° WebSocket åè®®ã€‚</li><li>è¿™æ˜¯ä¸€ä¸ª**â€œæ¡æ‰‹â€**è¿‡ç¨‹ã€‚</li></ul></li><li><strong>åè®®å‡çº§ä¸æŒä¹…è¿æ¥</strong>ï¼š<ul><li>å¦‚æœæœåŠ¡å™¨æ”¯æŒ WebSocketï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªç‰¹æ®Šçš„ HTTP å“åº”ï¼ˆçŠ¶æ€ç  <code>101 Switching Protocols</code>ï¼‰ã€‚</li><li>æ¡æ‰‹æˆåŠŸåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ TCP è¿æ¥å°†<strong>ä¿æŒæ‰“å¼€çŠ¶æ€</strong>ã€‚</li><li>è¿™æ—¶ï¼Œåè®®å°±ä» HTTP å‡çº§åˆ°äº† WebSocketï¼ŒåŒæ–¹å¯ä»¥åœ¨è¿™ä¸ª<strong>æŒä¹…çš„ TCP è¿æ¥</strong>ä¸Šè‡ªç”±åœ°åŒå‘å‘é€æ•°æ®ï¼Œè€Œæ— éœ€å†è¿›è¡Œ HTTP å¤´éƒ¨å¼€é”€ã€‚</li></ul></li><li><strong>æ•°æ®å¸§ä¼ è¾“</strong>ï¼š<ul><li>WebSocket åè®®å®šä¹‰äº†**æ•°æ®å¸§ï¼ˆData Framesï¼‰**çš„æ¦‚å¿µã€‚å®ƒå°†æ•°æ®åˆ†å‰²æˆæ›´å°ã€æ›´è½»é‡çº§çš„å¸§ï¼Œè€Œä¸æ˜¯åƒ HTTP é‚£æ ·å‘é€æ•´ä¸ªæŠ¥æ–‡ã€‚</li><li>è¿™æ ·ï¼Œå³ä½¿ä¼ è¾“å°‘é‡æ•°æ®ï¼Œä¹Ÿä¸ä¼šæœ‰å¾ˆå¤§çš„åè®®å¼€é”€ï¼Œéå¸¸é€‚åˆå®æ—¶é€šä¿¡ã€‚</li></ul></li></ol><h3 id="WebSocket-çš„ç”Ÿå‘½å‘¨æœŸï¼šäº‹ä»¶é©±åŠ¨æ¨¡å‹"><a href="#WebSocket-çš„ç”Ÿå‘½å‘¨æœŸï¼šäº‹ä»¶é©±åŠ¨æ¨¡å‹" class="headerlink" title="WebSocket çš„ç”Ÿå‘½å‘¨æœŸï¼šäº‹ä»¶é©±åŠ¨æ¨¡å‹"></a>WebSocket çš„ç”Ÿå‘½å‘¨æœŸï¼šäº‹ä»¶é©±åŠ¨æ¨¡å‹</h3><p>WebSocket çš„ç”Ÿå‘½å‘¨æœŸç”±å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å…±åŒç»´æŠ¤ï¼Œç”±ä¸€ç³»åˆ—äº‹ä»¶é©±åŠ¨ï¼š</p><h4 id="1-è¿æ¥å»ºç«‹ï¼ˆConnection-Establishmentï¼‰"><a href="#1-è¿æ¥å»ºç«‹ï¼ˆConnection-Establishmentï¼‰" class="headerlink" title="1. è¿æ¥å»ºç«‹ï¼ˆConnection Establishmentï¼‰"></a>1. è¿æ¥å»ºç«‹ï¼ˆConnection Establishmentï¼‰</h4><ul><li><strong>å®¢æˆ·ç«¯</strong>ï¼šé€šè¿‡ <code>new WebSocket(url)</code> å»ºç«‹è¿æ¥ã€‚</li><li><strong>æœåŠ¡å™¨</strong>ï¼šå½“å®¢æˆ·ç«¯å‘é€æ¡æ‰‹è¯·æ±‚åï¼ŒæœåŠ¡å™¨å¤„ç†å¹¶æ¥å—è¿æ¥ï¼Œæ­¤æ—¶è§¦å‘ <code>onopen</code> äº‹ä»¶ã€‚</li></ul><h4 id="2-æ•°æ®ä¼ è¾“ï¼ˆData-Transmissionï¼‰"><a href="#2-æ•°æ®ä¼ è¾“ï¼ˆData-Transmissionï¼‰" class="headerlink" title="2. æ•°æ®ä¼ è¾“ï¼ˆData Transmissionï¼‰"></a>2. æ•°æ®ä¼ è¾“ï¼ˆData Transmissionï¼‰</h4><ul><li><strong>å‘é€</strong>ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥é€šè¿‡å„è‡ªçš„ <code>send()</code> æ–¹æ³•å‘å¯¹æ–¹å‘é€æ•°æ®ã€‚</li><li><strong>æ¥æ”¶</strong>ï¼šå½“ä¸€æ–¹æ¥æ”¶åˆ°æ•°æ®æ—¶ï¼Œä¼šè§¦å‘ <code>onmessage</code> äº‹ä»¶ã€‚</li></ul><h4 id="3-è¿æ¥å…³é—­ï¼ˆConnection-Closeï¼‰"><a href="#3-è¿æ¥å…³é—­ï¼ˆConnection-Closeï¼‰" class="headerlink" title="3. è¿æ¥å…³é—­ï¼ˆConnection Closeï¼‰"></a>3. è¿æ¥å…³é—­ï¼ˆConnection Closeï¼‰</h4><ul><li><strong>ä¸»åŠ¨å…³é—­</strong>ï¼šå®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨å¯ä»¥è°ƒç”¨ <code>close()</code> æ–¹æ³•ä¸»åŠ¨å…³é—­è¿æ¥ã€‚</li><li><strong>å¼‚å¸¸å…³é—­</strong>ï¼šè¿æ¥å¯èƒ½å› ç½‘ç»œæ•…éšœã€å¿ƒè·³è¶…æ—¶ç­‰åŸå› æ„å¤–å…³é—­ã€‚</li><li><strong>äº‹ä»¶</strong>ï¼šæ— è®ºæ˜¯ä¸»åŠ¨è¿˜æ˜¯è¢«åŠ¨ï¼Œè¿æ¥å…³é—­æ—¶éƒ½ä¼šè§¦å‘ <code>onclose</code> äº‹ä»¶ã€‚</li></ul><h3 id="WebSocket-çš„æ ¸å¿ƒ-APIï¼ˆä»¥-JavaScript-ä¸ºä¾‹ï¼‰"><a href="#WebSocket-çš„æ ¸å¿ƒ-APIï¼ˆä»¥-JavaScript-ä¸ºä¾‹ï¼‰" class="headerlink" title="WebSocket çš„æ ¸å¿ƒ APIï¼ˆä»¥ JavaScript ä¸ºä¾‹ï¼‰"></a>WebSocket çš„æ ¸å¿ƒ APIï¼ˆä»¥ JavaScript ä¸ºä¾‹ï¼‰</h3><p>WebSocket çš„ API è®¾è®¡éå¸¸ç®€æ´ï¼Œä¸»è¦åŸºäºäº‹ä»¶ç›‘å¬å’Œæ–¹æ³•è°ƒç”¨ã€‚</p><ul><li><strong>new WebSocket(url)</strong>ï¼šåˆ›å»ºä¸€ä¸ª WebSocket å®¢æˆ·ç«¯å®ä¾‹ã€‚</li><li><strong>websocket.onopen</strong>ï¼šè¿æ¥æˆåŠŸå»ºç«‹æ—¶è§¦å‘ã€‚</li><li><strong>websocket.onmessage &#x3D; function(event)</strong>ï¼šæ¥æ”¶åˆ°æœåŠ¡å™¨æ•°æ®æ—¶è§¦å‘ï¼Œæ•°æ®åœ¨ <code>event.data</code> ä¸­ã€‚</li><li><strong>websocket.onerror</strong>ï¼šè¿æ¥å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ã€‚</li><li><strong>websocket.onclose</strong>ï¼šè¿æ¥å…³é—­æ—¶è§¦å‘ã€‚</li><li><strong>websocket.send(data)</strong>ï¼šå‘æœåŠ¡å™¨å‘é€æ•°æ®ã€‚</li><li><strong>websocket.close()</strong>ï¼šå…³é—­è¿æ¥ã€‚</li></ul><h3 id="WebSocket-ä¸-HTTP-çš„æœ¬è´¨åŒºåˆ«"><a href="#WebSocket-ä¸-HTTP-çš„æœ¬è´¨åŒºåˆ«" class="headerlink" title="WebSocket ä¸ HTTP çš„æœ¬è´¨åŒºåˆ«"></a>WebSocket ä¸ HTTP çš„æœ¬è´¨åŒºåˆ«</h3><table><thead><tr><th>ç‰¹æ€§</th><th>HTTP</th><th>WebSocket</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td><strong>é€šä¿¡æ¨¡å¼</strong></td><td><strong>å•å‘</strong>ï¼ˆè¯·æ±‚-å“åº”ï¼‰</td><td><strong>åŒå‘</strong>ï¼ˆå…¨åŒå·¥ï¼‰</td><td>HTTP å®¢æˆ·ç«¯å¿…é¡»å…ˆå‘è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ‰èƒ½å“åº”ã€‚</td></tr><tr><td><strong>è¿æ¥çŠ¶æ€</strong></td><td><strong>æ— çŠ¶æ€</strong>ï¼ŒçŸ­è¿æ¥</td><td><strong>æœ‰çŠ¶æ€</strong>ï¼Œé•¿è¿æ¥</td><td>HTTP æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦é‡æ–°å»ºç«‹è¿æ¥ã€‚</td></tr><tr><td><strong>åè®®å¼€é”€</strong></td><td><strong>å¤§</strong>ï¼ˆæ¯æ¬¡è¯·æ±‚éƒ½æºå¸¦å¤´éƒ¨ï¼‰</td><td><strong>å°</strong>ï¼ˆæ¡æ‰‹ååªä¼ è¾“æ•°æ®å¸§ï¼‰</td><td>HTTP é€‚åˆä¼ è¾“å¤§æ–‡ä»¶ï¼ŒWebSocket é€‚åˆå°æ•°æ®é¢‘ç¹ä¼ è¾“ã€‚</td></tr><tr><td><strong>æœåŠ¡å™¨ä¸»åŠ¨æ€§</strong></td><td><strong>è¢«åŠ¨</strong>ï¼ˆæ— æ³•ä¸»åŠ¨æ¨é€ï¼‰</td><td><strong>ä¸»åŠ¨</strong>ï¼ˆå¯éšæ—¶æ¨é€æ•°æ®ï¼‰</td><td>WebSocket è§£å†³äº† HTTP çš„â€œæœåŠ¡å™¨æ¨â€éš¾é¢˜ã€‚</td></tr><tr><td><strong>åº”ç”¨åœºæ™¯</strong></td><td>ç½‘é¡µæµè§ˆã€API è°ƒç”¨ã€æ–‡ä»¶ä¸‹è½½</td><td>èŠå¤©ã€æ¸¸æˆã€å®æ—¶æ•°æ®æ›´æ–°</td><td></td></tr></tbody></table><h3 id="WebSocket-åœ¨ç°ä»£-Java-Web-ä¸­çš„åº”ç”¨"><a href="#WebSocket-åœ¨ç°ä»£-Java-Web-ä¸­çš„åº”ç”¨" class="headerlink" title="WebSocket åœ¨ç°ä»£ Java Web ä¸­çš„åº”ç”¨"></a>WebSocket åœ¨ç°ä»£ Java Web ä¸­çš„åº”ç”¨</h3><p>åœ¨ Java åç«¯ï¼ŒWebSocket é€šå¸¸ç”±ä¸“é—¨çš„æ¡†æ¶æˆ–å®¹å™¨æ¥å®ç°ï¼Œå¦‚ï¼š</p><ul><li><strong>JavaEE 7+ çš„ WebSocket API</strong>ï¼šæä¾›äº† <code>javax.websocket</code> åŒ…ï¼Œå¯ä»¥ç›´æ¥åœ¨ Servlet å®¹å™¨ä¸­å¼€å‘ WebSocket åº”ç”¨ã€‚</li><li><strong>Spring Framework</strong>ï¼šæä¾›äº†å¼ºå¤§çš„ WebSocket æ”¯æŒï¼Œé›†æˆäº† STOMPï¼ˆSimple Text Oriented Messaging Protocolï¼‰åè®®ï¼Œç®€åŒ–äº†æ¶ˆæ¯è·¯ç”±å’Œç®¡ç†ã€‚</li></ul><p>åœ¨è¿™äº›æ¡†æ¶ä¸­ï¼Œä½ é€šå¸¸ä¼šå®šä¹‰ä¸€ä¸ª WebSocket ç«¯ç‚¹ï¼ˆEndpointï¼‰ï¼Œç±»ä¼¼äº Servletï¼Œå®ƒè´Ÿè´£å¤„ç†è¿æ¥çš„å»ºç«‹ã€æ¶ˆæ¯çš„æ¥æ”¶å’Œå‘é€ã€ä»¥åŠè¿æ¥çš„å…³é—­ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼ŒWebSocket æ˜¯ HTTP åè®®åœ¨å®æ—¶é€šä¿¡é¢†åŸŸçš„æœ‰åŠ›è¡¥å……ã€‚å®ƒé€šè¿‡ä¸€æ¬¡æ€§çš„æ¡æ‰‹å»ºç«‹ä¸€ä¸ªæŒä¹…çš„åŒå‘é€šé“ï¼Œæå¤§åœ°æé«˜äº† Web åº”ç”¨çš„äº¤äº’æ€§å’Œæ•ˆç‡ï¼Œæ˜¯ç°ä»£ Web æ¶æ„ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚</p><p>å¥½çš„ï¼Œä¸ºäº†æ›´å¥½åœ°ç†è§£ WebSocket çš„å·¥ä½œåŸç†ï¼Œæˆ‘å°†æä¾›å‡ ä¸ªå…·ä½“çš„åº”ç”¨åœºæ™¯å’Œç›¸åº”çš„ä»£ç ç¤ºä¾‹ã€‚è¿™äº›ç¤ºä¾‹å°†æ¶µç›–å®¢æˆ·ç«¯ï¼ˆJavaScriptï¼‰å’ŒæœåŠ¡å™¨ç«¯ï¼ˆJava&#x2F;Spring Bootï¼‰çš„ä»£ç ï¼Œä»¥ä¾¿ä½ èƒ½å¤Ÿå®Œæ•´åœ°çœ‹åˆ°åŒå‘é€šä¿¡æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p><hr><h3 id="ç¤ºä¾‹ä¸€ï¼šå®æ—¶èŠå¤©åº”ç”¨"><a href="#ç¤ºä¾‹ä¸€ï¼šå®æ—¶èŠå¤©åº”ç”¨" class="headerlink" title="ç¤ºä¾‹ä¸€ï¼šå®æ—¶èŠå¤©åº”ç”¨"></a>ç¤ºä¾‹ä¸€ï¼šå®æ—¶èŠå¤©åº”ç”¨</h3><p>è¿™æ˜¯ WebSocket æœ€ç»å…¸çš„ç”¨ä¾‹ã€‚</p><h4 id="åº”ç”¨åœºæ™¯ï¼š"><a href="#åº”ç”¨åœºæ™¯ï¼š" class="headerlink" title="åº”ç”¨åœºæ™¯ï¼š"></a><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</h4><p>å¤šä¸ªç”¨æˆ·è¿æ¥åˆ°èŠå¤©å®¤ï¼Œå½“ä¸€ä¸ªç”¨æˆ·å‘é€æ¶ˆæ¯æ—¶ï¼ŒæœåŠ¡å™¨å°†è¯¥æ¶ˆæ¯å®æ—¶å¹¿æ’­ç»™æ‰€æœ‰å…¶ä»–åœ¨çº¿ç”¨æˆ·ã€‚</p><h4 id="æ ¸å¿ƒé€»è¾‘ï¼š"><a href="#æ ¸å¿ƒé€»è¾‘ï¼š" class="headerlink" title="æ ¸å¿ƒé€»è¾‘ï¼š"></a><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š</h4><ul><li><strong>å®¢æˆ·ç«¯</strong>ï¼šå½“ç”¨æˆ·åœ¨è¾“å…¥æ¡†ä¸­æŒ‰ä¸‹å›è½¦ï¼ŒJavaScript å°†æ¶ˆæ¯é€šè¿‡ WebSocket è¿æ¥å‘é€ç»™æœåŠ¡å™¨ã€‚</li><li><strong>æœåŠ¡å™¨</strong>ï¼šæ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œéå†æ‰€æœ‰å·²è¿æ¥çš„ WebSocket ä¼šè¯ï¼Œå°†æ¶ˆæ¯é€ä¸€å‘é€ç»™æ¯ä¸ªä¼šè¯ã€‚</li></ul><h4 id="ä»£ç ç¤ºä¾‹ï¼š"><a href="#ä»£ç ç¤ºä¾‹ï¼š" class="headerlink" title="ä»£ç ç¤ºä¾‹ï¼š"></a><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</h4><p><strong>1. å®¢æˆ·ç«¯ (JavaScript)</strong></p><p>JavaScript</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿æ¥ WebSocket æœåŠ¡å™¨</span></span><br><span class="line"><span class="type">const</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&#x27;ws://localhost:8080/chat&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬è¿æ¥æˆåŠŸäº‹ä»¶</span></span><br><span class="line">socket.onopen = function(event) &#123;</span><br><span class="line">  console.log(<span class="string">&quot;WebSocketè¿æ¥å·²å»ºç«‹&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬æ¥æ”¶æ¶ˆæ¯äº‹ä»¶</span></span><br><span class="line">socket.onmessage = function(event) &#123;</span><br><span class="line">  <span class="type">const</span> <span class="variable">message</span> <span class="operator">=</span> event.data;</span><br><span class="line">  <span class="type">const</span> <span class="variable">chatBox</span> <span class="operator">=</span> document.getElementById(<span class="string">&#x27;chat-box&#x27;</span>);</span><br><span class="line">  chatBox.innerHTML += `&lt;p&gt;$&#123;message&#125;&lt;/p&gt;`; <span class="comment">// å°†æ¶ˆæ¯æ·»åŠ åˆ°èŠå¤©æ¡†</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬è¿æ¥å…³é—­äº‹ä»¶</span></span><br><span class="line">socket.onclose = function(event) &#123;</span><br><span class="line">  console.log(<span class="string">&quot;WebSocketè¿æ¥å·²å…³é—­&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬é”™è¯¯äº‹ä»¶</span></span><br><span class="line">socket.onerror = function(event) &#123;</span><br><span class="line">  console.log(<span class="string">&quot;WebSocketå‘ç”Ÿé”™è¯¯:&quot;</span>, event);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘é€æ¶ˆæ¯å‡½æ•°</span></span><br><span class="line">function <span class="title function_">sendMessage</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">const</span> <span class="variable">input</span> <span class="operator">=</span> document.getElementById(<span class="string">&#x27;message-input&#x27;</span>);</span><br><span class="line">  <span class="type">const</span> <span class="variable">message</span> <span class="operator">=</span> input.value;</span><br><span class="line">  <span class="keyword">if</span> (message) &#123;</span><br><span class="line">    socket.send(message); <span class="comment">// é€šè¿‡ WebSocket å‘é€æ¶ˆæ¯</span></span><br><span class="line">    input.value = <span class="string">&#x27;&#x27;</span>; <span class="comment">// æ¸…ç©ºè¾“å…¥æ¡†</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šå›è½¦äº‹ä»¶</span></span><br><span class="line">document.getElementById(<span class="string">&#x27;message-input&#x27;</span>).addEventListener(<span class="string">&#x27;keypress&#x27;</span>, function(e) &#123;</span><br><span class="line">  <span class="keyword">if</span> (e.key === <span class="string">&#x27;Enter&#x27;</span>) &#123;</span><br><span class="line">    sendMessage();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>2. æœåŠ¡å™¨ç«¯ (Java&#x2F;Spring Boot)</strong></p><p>Java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> javax.websocket.*;</span><br><span class="line"><span class="keyword">import</span> javax.websocket.server.ServerEndpoint;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CopyOnWriteArraySet;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ServerEndpoint(&quot;/chat&quot;)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatWebSocketEndpoint</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­˜å‚¨æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯ä¼šè¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> CopyOnWriteArraySet&lt;Session&gt; sessions = <span class="keyword">new</span> <span class="title class_">CopyOnWriteArraySet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“å®¢æˆ·ç«¯è¿æ¥æˆåŠŸæ—¶è°ƒç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnOpen</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onOpen</span><span class="params">(Session session)</span> &#123;</span><br><span class="line">        sessions.add(session); <span class="comment">// æ·»åŠ æ–°ä¼šè¯</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ–°è¿æ¥ï¼š&quot;</span> + session.getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯æ—¶è°ƒç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnMessage</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onMessage</span><span class="params">(String message, Session session)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ”¶åˆ°æ¶ˆæ¯ï¼š&quot;</span> + message + <span class="string">&quot; æ¥è‡ªï¼š&quot;</span> + session.getId());</span><br><span class="line">        <span class="comment">// éå†æ‰€æœ‰ä¼šè¯ï¼Œå¹¿æ’­æ¶ˆæ¯</span></span><br><span class="line">        sessions.forEach(s -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                s.getBasicRemote().sendText(message);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“è¿æ¥å…³é—­æ—¶è°ƒç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnClose</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClose</span><span class="params">(Session session)</span> &#123;</span><br><span class="line">        sessions.remove(session); <span class="comment">// ç§»é™¤ä¼šè¯</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è¿æ¥å…³é—­ï¼š&quot;</span> + session.getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnError</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Session session, Throwable throwable)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿æ¥å‘ç”Ÿé”™è¯¯ï¼š&quot;</span> + session.getId());</span><br><span class="line">        throwable.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ç¤ºä¾‹äºŒï¼šå®æ—¶è‚¡ç¥¨è¡Œæƒ…æˆ–æ•°æ®çœ‹æ¿"><a href="#ç¤ºä¾‹äºŒï¼šå®æ—¶è‚¡ç¥¨è¡Œæƒ…æˆ–æ•°æ®çœ‹æ¿" class="headerlink" title="ç¤ºä¾‹äºŒï¼šå®æ—¶è‚¡ç¥¨è¡Œæƒ…æˆ–æ•°æ®çœ‹æ¿"></a>ç¤ºä¾‹äºŒï¼šå®æ—¶è‚¡ç¥¨è¡Œæƒ…æˆ–æ•°æ®çœ‹æ¿</h3><h4 id="åº”ç”¨åœºæ™¯ï¼š-1"><a href="#åº”ç”¨åœºæ™¯ï¼š-1" class="headerlink" title="åº”ç”¨åœºæ™¯ï¼š"></a><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</h4><p>å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å®šæœŸæˆ–åœ¨æ•°æ®æ›´æ–°æ—¶ï¼Œå‘æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯æ¨é€æœ€æ–°çš„è‚¡ç¥¨ä»·æ ¼æˆ–ç›‘æ§æ•°æ®ã€‚</p><h4 id="æ ¸å¿ƒé€»è¾‘ï¼š-1"><a href="#æ ¸å¿ƒé€»è¾‘ï¼š-1" class="headerlink" title="æ ¸å¿ƒé€»è¾‘ï¼š"></a><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š</h4><ul><li><strong>å®¢æˆ·ç«¯</strong>ï¼šåªç›‘å¬ <code>onmessage</code> äº‹ä»¶ï¼Œè¢«åŠ¨æ¥æ”¶æœåŠ¡å™¨æ¨é€çš„æ•°æ®ã€‚</li><li><strong>æœåŠ¡å™¨</strong>ï¼šåœ¨åå°å¯åŠ¨ä¸€ä¸ªå®šæ—¶ä»»åŠ¡æˆ–æ•°æ®ç›‘å¬å™¨ã€‚å½“æ•°æ®å˜åŒ–æ—¶ï¼Œä¸»åŠ¨é€šè¿‡ WebSocket è¿æ¥å°†æ–°æ•°æ®å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li></ul><h4 id="ä»£ç ç¤ºä¾‹ï¼š-1"><a href="#ä»£ç ç¤ºä¾‹ï¼š-1" class="headerlink" title="ä»£ç ç¤ºä¾‹ï¼š"></a><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</h4><p><strong>1. å®¢æˆ·ç«¯ (JavaScript)</strong></p><p>JavaScript</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&#x27;ws://localhost:8080/stock&#x27;</span>);</span><br><span class="line"></span><br><span class="line">socket.onopen = function(event) &#123;</span><br><span class="line">  console.log(<span class="string">&quot;è‚¡ç¥¨è¡Œæƒ…è¿æ¥å·²å»ºç«‹&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">socket.onmessage = function(event) &#123;</span><br><span class="line">  <span class="comment">// å‡è®¾æœåŠ¡å™¨å‘é€çš„æ˜¯JSONæ ¼å¼çš„è‚¡ç¥¨æ•°æ®</span></span><br><span class="line">  <span class="type">const</span> <span class="variable">stockData</span> <span class="operator">=</span> JSON.parse(event.data);</span><br><span class="line">  <span class="type">const</span> <span class="variable">stockPriceElement</span> <span class="operator">=</span> document.getElementById(<span class="string">&#x27;stock-price&#x27;</span>);</span><br><span class="line">  stockPriceElement.innerText = `å½“å‰ä»·æ ¼: $&#123;stockData.price&#125;`;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ— éœ€ sendMessage å‡½æ•°ï¼Œå› ä¸ºæ˜¯å•å‘è¢«åŠ¨æ¥æ”¶</span></span><br></pre></td></tr></table></figure><p><strong>2. æœåŠ¡å™¨ç«¯ (Java&#x2F;Spring Boot)</strong></p><p>Java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Scheduled;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> javax.websocket.*;</span><br><span class="line"><span class="keyword">import</span> javax.websocket.server.ServerEndpoint;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CopyOnWriteArraySet;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ServerEndpoint(&quot;/stock&quot;)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StockWebSocketEndpoint</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> CopyOnWriteArraySet&lt;Session&gt; sessions = <span class="keyword">new</span> <span class="title class_">CopyOnWriteArraySet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnOpen</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onOpen</span><span class="params">(Session session)</span> &#123;</span><br><span class="line">        sessions.add(session);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–°è‚¡ç¥¨è¡Œæƒ…è®¢é˜…è€…ï¼š&quot;</span> + session.getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnClose</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClose</span><span class="params">(Session session)</span> &#123;</span><br><span class="line">        sessions.remove(session);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‡è®¾è¿™æ˜¯ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯éš”5ç§’å‘æ‰€æœ‰å®¢æˆ·ç«¯æ¨é€æ•°æ®</span></span><br><span class="line">    <span class="meta">@Scheduled(fixedRate = 5000)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushStockData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿè·å–æœ€æ–°è‚¡ç¥¨ä»·æ ¼</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">price</span> <span class="operator">=</span> Math.random() * <span class="number">100</span> + <span class="number">100</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;price\&quot;: &quot;</span> + String.format(<span class="string">&quot;%.2f&quot;</span>, price) + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†æ‰€æœ‰ä¼šè¯ï¼Œæ¨é€æ•°æ®</span></span><br><span class="line">        sessions.forEach(session -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (session.isOpen()) &#123;</span><br><span class="line">                    session.getBasicRemote().sendText(json);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªä¾‹å­æ¸…æ¥šåœ°å±•ç¤ºäº† WebSocket å¦‚ä½•é€šè¿‡<strong>æŒä¹…è¿æ¥</strong>å’Œ<strong>åŒå‘é€šä¿¡</strong>æ¥è§£å†³å®æ—¶åº”ç”¨ä¸­çš„æ ¸å¿ƒç—›ç‚¹ã€‚</p><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬è¯¦ç»†ã€æ¸…æ™°åœ°è§£é‡Š<strong>é™æ€èµ„æº</strong>å’Œ<strong>åŠ¨æ€èµ„æº</strong>çš„æ¦‚å¿µï¼Œä»¥åŠä¸ºä»€ä¹ˆæŸäº›æœåŠ¡å™¨æˆ–å·¥å…·åªèƒ½å¤„ç†é™æ€èµ„æºã€‚</p><hr><h3 id="ä¸€ã€é™æ€èµ„æº-Static-Resources"><a href="#ä¸€ã€é™æ€èµ„æº-Static-Resources" class="headerlink" title="ä¸€ã€é™æ€èµ„æº (Static Resources)"></a>ä¸€ã€é™æ€èµ„æº (Static Resources)</h3><h4 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><p><strong>é™æ€èµ„æº</strong>æ˜¯æŒ‡åœ¨æœåŠ¡å™¨ç«¯<strong>ä¸éœ€è¦ç»è¿‡ä»»ä½•å¤„ç†æˆ–è®¡ç®—</strong>ï¼Œå°±èƒ½ç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯çš„èµ„æºã€‚å®ƒä»¬çš„<strong>å†…å®¹æ˜¯å›ºå®šä¸å˜</strong>çš„ï¼Œæ— è®ºä½•æ—¶ã€è¢«è°è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ã€‚</p><h4 id="å¸¸è§ç±»å‹"><a href="#å¸¸è§ç±»å‹" class="headerlink" title="å¸¸è§ç±»å‹"></a>å¸¸è§ç±»å‹</h4><ul><li><strong>HTML æ–‡ä»¶</strong> (<code>.html</code>)ï¼šçº¯ HTML ä»£ç ï¼Œæµè§ˆå™¨ç›´æ¥æ¸²æŸ“ã€‚</li><li><strong>CSS æ ·å¼è¡¨</strong> (<code>.css</code>)ï¼šå®šä¹‰ç½‘é¡µæ ·å¼ã€‚</li><li><strong>JavaScript è„šæœ¬</strong> (<code>.js</code>)ï¼šç”¨äºç½‘é¡µäº¤äº’ã€‚</li><li><strong>å›¾ç‰‡</strong> (<code>.jpg</code>, <code>.png</code>, <code>.gif</code>)ï¼šå›¾åƒæ–‡ä»¶ã€‚</li><li><strong>å­—ä½“æ–‡ä»¶</strong> (<code>.woff</code>, <code>.ttf</code>)ï¼šç½‘é¡µå­—ä½“ã€‚</li><li><strong>è§†é¢‘</strong> (<code>.mp4</code>, <code>.webm</code>)ï¼šè§†é¢‘æ–‡ä»¶ã€‚</li></ul><h4 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h4><ol><li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨è¯·æ±‚ä¸€ä¸ª URLï¼Œä¾‹å¦‚ <code>http://example.com/styles.css</code>ã€‚</li><li>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ï¼Œç›´æ¥ä»<strong>æ–‡ä»¶ç³»ç»Ÿ</strong>ä¸­æ‰¾åˆ°åä¸º <code>styles.css</code> çš„æ–‡ä»¶ã€‚</li><li>æœåŠ¡å™¨å°† <code>styles.css</code> çš„å†…å®¹åŸå°ä¸åŠ¨åœ°è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ol><h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li><strong>é«˜æ•ˆ</strong>ï¼šæ— éœ€æœåŠ¡å™¨è®¡ç®—ï¼Œç›´æ¥è¯»å–æ–‡ä»¶ï¼Œå“åº”é€Ÿåº¦æå¿«ã€‚</li><li><strong>å¯ç¼“å­˜</strong>ï¼šç”±äºå†…å®¹ä¸å˜ï¼Œæµè§ˆå™¨ã€ä»£ç†æœåŠ¡å™¨éƒ½å¯ä»¥å¯¹é™æ€èµ„æºè¿›è¡Œç¼“å­˜ï¼Œè¿›ä¸€æ­¥å‡å°‘ç½‘ç»œä¼ è¾“ã€‚</li><li><strong>éƒ¨ç½²ç®€å•</strong>ï¼šåªéœ€å°†æ–‡ä»¶æ”¾åœ¨æœåŠ¡å™¨çš„ç‰¹å®šç›®å½•ä¸‹å³å¯ã€‚</li></ul><h3 id="äºŒã€åŠ¨æ€èµ„æº-Dynamic-Resources"><a href="#äºŒã€åŠ¨æ€èµ„æº-Dynamic-Resources" class="headerlink" title="äºŒã€åŠ¨æ€èµ„æº (Dynamic Resources)"></a>äºŒã€åŠ¨æ€èµ„æº (Dynamic Resources)</h3><h4 id="æ¦‚å¿µ-1"><a href="#æ¦‚å¿µ-1" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><p><strong>åŠ¨æ€èµ„æº</strong>æ˜¯æŒ‡æœåŠ¡å™¨ç«¯<strong>éœ€è¦ç»è¿‡å¤„ç†ã€è®¡ç®—æˆ–æŸ¥è¯¢æ•°æ®åº“</strong>ï¼Œæ‰èƒ½ç”Ÿæˆå¹¶è¿”å›ç»™å®¢æˆ·ç«¯çš„èµ„æºã€‚å®ƒä»¬çš„å†…å®¹æ˜¯<strong>å¯å˜</strong>çš„ï¼Œä¸åŒçš„è¯·æ±‚ã€ä¸åŒçš„æ—¶é—´ï¼Œè¿”å›çš„å†…å®¹å¯èƒ½ä¸åŒã€‚</p><h4 id="å¸¸è§ç±»å‹-1"><a href="#å¸¸è§ç±»å‹-1" class="headerlink" title="å¸¸è§ç±»å‹"></a>å¸¸è§ç±»å‹</h4><ul><li><strong>Servlet&#x2F;JSP</strong>ï¼šJava åç«¯é€šè¿‡ Servlet æˆ– JSP åŠ¨æ€ç”Ÿæˆ HTMLã€‚</li><li><strong>PHP è„šæœ¬</strong> (<code>.php</code>)ï¼šPHP åç«¯ç”Ÿæˆ HTMLã€‚</li><li><strong>Python&#x2F;Django è§†å›¾</strong>ï¼šPython åç«¯å¤„ç†è¯·æ±‚å¹¶è¿”å›æ•°æ®ã€‚</li><li><strong>RESTful API</strong>ï¼šè¿”å› JSONã€XML ç­‰æ ¼å¼çš„æ•°æ®ã€‚</li></ul><h4 id="å·¥ä½œæµç¨‹-1"><a href="#å·¥ä½œæµç¨‹-1" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h4><ol><li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨è¯·æ±‚ä¸€ä¸ª URLï¼Œä¾‹å¦‚ <code>http://example.com/user/profile?id=123</code>ã€‚</li><li>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ï¼Œå°†è¯·æ±‚è½¬å‘ç»™<strong>åç«¯ç¨‹åº</strong>ï¼ˆå¦‚ Servlet å®¹å™¨ï¼‰ã€‚</li><li>åç«¯ç¨‹åºæ¥æ”¶è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚å‚æ•° <code>id=123</code> æŸ¥è¯¢æ•°æ®åº“ï¼Œè·å–è¯¥ç”¨æˆ·çš„ä¿¡æ¯ã€‚</li><li>åç«¯ç¨‹åºå°†æ•°æ®æ¸²æŸ“åˆ° HTML æ¨¡æ¿ä¸­ï¼Œæˆ–è€…å°†æ•°æ®å°è£…æˆ JSON æ ¼å¼ã€‚</li><li>åç«¯ç¨‹åºå°†<strong>åŠ¨æ€ç”Ÿæˆçš„å†…å®¹</strong>ä½œä¸ºå“åº”è¿”å›ç»™æœåŠ¡å™¨ã€‚</li><li>æœåŠ¡å™¨å°†è¯¥å“åº”å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li></ol><h4 id="ç‰¹ç‚¹-1"><a href="#ç‰¹ç‚¹-1" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li><strong>çµæ´»</strong>ï¼šå¯ä»¥æ ¹æ®ä¸šåŠ¡é€»è¾‘ç”Ÿæˆä¸ªæ€§åŒ–å†…å®¹ã€‚</li><li><strong>æ¶ˆè€—èµ„æº</strong>ï¼šéœ€è¦æ¶ˆè€— CPUã€å†…å­˜ã€æ•°æ®åº“è¿æ¥ç­‰èµ„æºè¿›è¡Œè®¡ç®—ã€‚</li><li><strong>ä¸å¯ç›´æ¥ç¼“å­˜</strong>ï¼šç”±äºå†…å®¹å¯å˜ï¼Œé€šå¸¸æ— æ³•åƒé™æ€èµ„æºé‚£æ ·ç›´æ¥ç¼“å­˜ã€‚</li></ul><h3 id="ä¸‰ã€æ˜¯ä»€ä¹ˆä¸œè¥¿åªèƒ½è§£æé™æ€èµ„æºï¼Ÿ"><a href="#ä¸‰ã€æ˜¯ä»€ä¹ˆä¸œè¥¿åªèƒ½è§£æé™æ€èµ„æºï¼Ÿ" class="headerlink" title="ä¸‰ã€æ˜¯ä»€ä¹ˆä¸œè¥¿åªèƒ½è§£æé™æ€èµ„æºï¼Ÿ"></a>ä¸‰ã€æ˜¯ä»€ä¹ˆä¸œè¥¿åªèƒ½è§£æé™æ€èµ„æºï¼Ÿ</h3><p>è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒåœ¨äº**â€œè§£æâ€<strong>è¿™ä¸ªè¯ã€‚èƒ½â€œè§£æâ€é™æ€èµ„æºçš„ï¼Œé€šå¸¸æŒ‡çš„æ˜¯</strong>Web æœåŠ¡å™¨**ã€‚</p><ul><li><strong>Web æœåŠ¡å™¨</strong>ï¼šä¸€ç§è½¯ä»¶ï¼Œå®ƒçš„ä¸»è¦èŒè´£æ˜¯å¤„ç† HTTP è¯·æ±‚å¹¶è¿”å›æ–‡ä»¶ã€‚</li></ul><h4 id="1-çº¯é™æ€-Web-æœåŠ¡å™¨-Static-Web-Server"><a href="#1-çº¯é™æ€-Web-æœåŠ¡å™¨-Static-Web-Server" class="headerlink" title="1. çº¯é™æ€ Web æœåŠ¡å™¨ (Static Web Server)"></a>1. çº¯é™æ€ Web æœåŠ¡å™¨ (Static Web Server)</h4><p><strong>è¿™ç±»æœåŠ¡å™¨çš„æ ¸å¿ƒåŠŸèƒ½å°±æ˜¯æä¾›é™æ€æ–‡ä»¶æœåŠ¡ã€‚</strong> å®ƒä»¬åªçŸ¥é“å¦‚ä½•æ ¹æ® URL è·¯å¾„ï¼Œå»æ–‡ä»¶ç³»ç»Ÿæ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼Œç„¶åè¿”å›ã€‚</p><ul><li><strong>å·¥ä½œåŸç†</strong>ï¼šå®ƒä»¬æ²¡æœ‰å†…ç½®çš„åç«¯è¯­è¨€è§£æå™¨ï¼ˆå¦‚ Java è™šæ‹Ÿæœºã€PHP è§£é‡Šå™¨ï¼‰ã€‚å½“å®ƒä»¬æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œåªä¼šå°† URL æ˜ å°„åˆ°æ–‡ä»¶ç›®å½•ã€‚å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œå°±è¿”å›ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œå°±è¿”å› 404 é”™è¯¯ã€‚</li><li><strong>ä»£è¡¨</strong>ï¼š<strong>Nginx</strong>ï¼ˆä½œä¸ºåå‘ä»£ç†æˆ–é™æ€æ–‡ä»¶æœåŠ¡å™¨æ—¶ï¼‰ã€<strong>Apache HTTP Server</strong>ï¼ˆä½œä¸ºé™æ€æ–‡ä»¶æœåŠ¡å™¨æ—¶ï¼‰ã€‚</li></ul><p><strong>ä¸ºä»€ä¹ˆå®ƒä»¬ä¸èƒ½è§£æåŠ¨æ€èµ„æºï¼Ÿ</strong></p><p>å› ä¸ºå®ƒä»¬<strong>ä¸å…·å¤‡</strong>æ‰§è¡Œåç«¯ä»£ç çš„èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œå½“ Nginx æ”¶åˆ°ä¸€ä¸ªå¯¹ <code>.jsp</code> æ–‡ä»¶çš„è¯·æ±‚æ—¶ï¼Œå®ƒä¸çŸ¥é“å¦‚ä½•è¿è¡Œ Java ä»£ç æ¥ç”Ÿæˆ HTMLã€‚å®ƒåªä¼šæŠŠ <code>.jsp</code> æ–‡ä»¶å½“ä½œä¸€ä¸ªæ™®é€šçš„æ–‡æœ¬æ–‡ä»¶è¿”å›ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨ä¹Ÿæ— æ³•æ­£ç¡®åœ°è§£æã€‚</p><h4 id="2-åŠ¨æ€-Web-æœåŠ¡å™¨-Dynamic-Web-Server"><a href="#2-åŠ¨æ€-Web-æœåŠ¡å™¨-Dynamic-Web-Server" class="headerlink" title="2. åŠ¨æ€ Web æœåŠ¡å™¨ (Dynamic Web Server)"></a>2. åŠ¨æ€ Web æœåŠ¡å™¨ (Dynamic Web Server)</h4><p>è¿™ç±»æœåŠ¡å™¨é€šå¸¸è¢«ç§°ä¸º <strong>â€œåº”ç”¨æœåŠ¡å™¨â€</strong>ï¼Œå®ƒä»¬åœ¨ Web æœåŠ¡å™¨çš„åŠŸèƒ½ä¸Šï¼Œ<strong>å†…ç½®äº†åç«¯è¯­è¨€çš„è¿è¡Œç¯å¢ƒ</strong>ã€‚</p><ul><li><strong>å·¥ä½œåŸç†</strong>ï¼š<ul><li>å½“å®ƒä»¬æ”¶åˆ°é™æ€èµ„æºè¯·æ±‚æ—¶ï¼Œè¡Œä¸ºä¸é™æ€æœåŠ¡å™¨ç›¸åŒï¼šç›´æ¥è¿”å›æ–‡ä»¶ã€‚</li><li>å½“å®ƒä»¬æ”¶åˆ°åŠ¨æ€èµ„æºè¯·æ±‚æ—¶ï¼Œä¼šå°†è¯·æ±‚è½¬å‘ç»™å†…ç½®çš„<strong>åç«¯ç¨‹åºè¿è¡Œç¯å¢ƒ</strong>ã€‚ä¾‹å¦‚ï¼ŒTomcat ä¼šå°† <code>.jsp</code> æ–‡ä»¶äº¤ç»™ JSP å¼•æ“æ¥ç¼–è¯‘å’Œæ‰§è¡Œã€‚</li></ul></li><li><strong>ä»£è¡¨</strong>ï¼š<strong>Apache Tomcat</strong>ã€<strong>Jetty</strong>ã€‚</li></ul><p>å› æ­¤ï¼Œåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡‡ç”¨<strong>åŠ¨é™åˆ†ç¦»</strong>çš„æ¶æ„ï¼š</p><ul><li><strong>é™æ€èµ„æº</strong>ï¼ˆ<code>index.html</code>ã€<code>style.css</code> ç­‰ï¼‰äº¤ç»™ <strong>Nginx</strong> è¿™æ ·çš„é«˜æ•ˆé™æ€æœåŠ¡å™¨å¤„ç†ã€‚</li><li><strong>åŠ¨æ€èµ„æº</strong>ï¼ˆ<code>api/user</code>, <code>.jsp</code> ç­‰ï¼‰äº¤ç»™ <strong>Tomcat</strong> è¿™æ ·çš„åº”ç”¨æœåŠ¡å™¨å¤„ç†ã€‚</li></ul><p>è¿™æ ·åšçš„ç›®çš„æ˜¯ï¼Œè®©ä¸“ä¸šçš„å·¥å…·åšä¸“ä¸šçš„äº‹ï¼šNginx æ“…é•¿é«˜å¹¶å‘çš„é™æ€æ–‡ä»¶æœåŠ¡ï¼Œè€Œ Tomcat åˆ™ä¸“æ³¨äºå¤æ‚çš„åŠ¨æ€ä¸šåŠ¡é€»è¾‘ã€‚</p><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æ¥ç³»ç»Ÿã€å…¨é¢åœ°æ¢³ç†å‰ç«¯çš„æ ¸å¿ƒçŸ¥è¯†ï¼Œè¿™ä¸ä»…æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆçš„å¿…å¤‡æŠ€èƒ½ï¼Œä¹Ÿæ˜¯åç«¯å¼€å‘è€…ç†è§£æ•´ä¸ª Web åº”ç”¨æ¶æ„çš„å…³é”®ã€‚</p><h3 id="ä¸€ã€åŸºç¡€ä¸‰å‰‘å®¢ï¼šæ„å»ºç½‘é¡µçš„åŸºçŸ³"><a href="#ä¸€ã€åŸºç¡€ä¸‰å‰‘å®¢ï¼šæ„å»ºç½‘é¡µçš„åŸºçŸ³" class="headerlink" title="ä¸€ã€åŸºç¡€ä¸‰å‰‘å®¢ï¼šæ„å»ºç½‘é¡µçš„åŸºçŸ³"></a>ä¸€ã€åŸºç¡€ä¸‰å‰‘å®¢ï¼šæ„å»ºç½‘é¡µçš„åŸºçŸ³</h3><p>è¿™ä¸‰è€…æ˜¯æ‰€æœ‰å‰ç«¯æŠ€æœ¯çš„åŸºç¡€ï¼Œå°±åƒå»ºç­‘çš„é’¢ç­‹ã€æ°´æ³¥å’Œæ°´ç”µã€‚</p><h4 id="1-HTML-HyperText-Markup-Language"><a href="#1-HTML-HyperText-Markup-Language" class="headerlink" title="1. HTML (HyperText Markup Language)"></a>1. HTML (HyperText Markup Language)</h4><ul><li><strong>æ˜¯ä»€ä¹ˆ</strong>ï¼šè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œç”¨äº<strong>å®šä¹‰ç½‘é¡µçš„ç»“æ„å’Œå†…å®¹</strong>ã€‚å®ƒç”±ä¸€ç³»åˆ—æ ‡ç­¾ï¼ˆtagï¼‰ç»„æˆï¼Œè¿™äº›æ ‡ç­¾å‘Šè¯‰æµè§ˆå™¨å¦‚ä½•ç»„ç»‡é¡µé¢å†…å®¹ï¼Œå¦‚æ®µè½ã€æ ‡é¢˜ã€å›¾ç‰‡ã€é“¾æ¥ç­‰ã€‚</li><li><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼š<ul><li><strong>æ ‡ç­¾ï¼ˆTagsï¼‰</strong>ï¼šå¦‚ <code>&lt;p&gt;</code> (æ®µè½), <code>&lt;h1&gt;</code> (ä¸€çº§æ ‡é¢˜), <code>&lt;img&gt;</code> (å›¾ç‰‡), <code>&lt;a&gt;</code> (è¶…é“¾æ¥)ã€‚</li><li><strong>å…ƒç´ ï¼ˆElementsï¼‰</strong>ï¼šç”±å¼€å§‹æ ‡ç­¾ã€å†…å®¹å’Œç»“æŸæ ‡ç­¾ç»„æˆï¼Œä¾‹å¦‚ <code>&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚&lt;/p&gt;</code>ã€‚</li><li><strong>å±æ€§ï¼ˆAttributesï¼‰</strong>ï¼šæä¾›å…³äºå…ƒç´ çš„é¢å¤–ä¿¡æ¯ï¼Œå¦‚ <code>&lt;img src=&quot;image.jpg&quot; alt=&quot;æè¿°&quot;&gt;</code> ä¸­çš„ <code>src</code> å’Œ <code>alt</code>ã€‚</li><li><strong>è¯­ä¹‰åŒ–ï¼ˆSemantic HTMLï¼‰</strong>ï¼šä½¿ç”¨æ°å½“çš„æ ‡ç­¾æ¥è¡¨è¾¾å†…å®¹çš„å«ä¹‰ï¼Œå¦‚ <code>&lt;header&gt;</code>, <code>&lt;nav&gt;</code>, <code>&lt;article&gt;</code>, <code>&lt;footer&gt;</code>ï¼Œè¿™æœ‰åŠ©äºæœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰å’Œæ— éšœç¢è®¿é—®ã€‚</li></ul></li></ul><h4 id="2-CSS-Cascading-Style-Sheets"><a href="#2-CSS-Cascading-Style-Sheets" class="headerlink" title="2. CSS (Cascading Style Sheets)"></a>2. CSS (Cascading Style Sheets)</h4><ul><li><strong>æ˜¯ä»€ä¹ˆ</strong>ï¼šå±‚å æ ·å¼è¡¨ï¼Œç”¨äº<strong>å®šä¹‰ç½‘é¡µçš„æ ·å¼å’Œè¡¨ç°</strong>ã€‚å®ƒå‘Šè¯‰æµè§ˆå™¨å¦‚ä½•æ˜¾ç¤º HTML å…ƒç´ ï¼Œå¦‚é¢œè‰²ã€å­—ä½“ã€å¸ƒå±€ã€å¤§å°ç­‰ã€‚</li><li><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼š<ul><li><strong>é€‰æ‹©å™¨ï¼ˆSelectorsï¼‰</strong>ï¼šç”¨äºé€‰ä¸­è¦åº”ç”¨æ ·å¼çš„ HTML å…ƒç´ ï¼Œå¦‚ <code>h1</code> (æ ‡ç­¾é€‰æ‹©å™¨), <code>.my-class</code> (ç±»é€‰æ‹©å™¨), <code>#my-id</code> (ID é€‰æ‹©å™¨)ã€‚</li><li><strong>ç›’æ¨¡å‹ï¼ˆBox Modelï¼‰</strong>ï¼šæ¯ä¸ª HTML å…ƒç´ éƒ½è¢«è§†ä¸ºä¸€ä¸ªçŸ©å½¢ç›’å­ï¼ŒåŒ…å« <code>content</code>ï¼ˆå†…å®¹ï¼‰ã€<code>padding</code>ï¼ˆå†…è¾¹è·ï¼‰ã€<code>border</code>ï¼ˆè¾¹æ¡†ï¼‰å’Œ <code>margin</code>ï¼ˆå¤–è¾¹è·ï¼‰ã€‚</li><li><strong>å¸ƒå±€ï¼ˆLayoutï¼‰</strong>ï¼š<ul><li><strong>ä¼ ç»Ÿå¸ƒå±€</strong>ï¼š<code>float</code>, <code>position</code>, <code>display</code>ã€‚</li><li><strong>ç°ä»£å¸ƒå±€</strong>ï¼š<strong>Flexbox</strong> (å¼¹æ€§ç›’å­ï¼Œç”¨äºä¸€ç»´å¸ƒå±€) å’Œ <strong>Grid</strong> (ç½‘æ ¼ç³»ç»Ÿï¼Œç”¨äºäºŒç»´å¸ƒå±€)ã€‚è¿™ä¸¤ç§æ˜¯ç›®å‰æœ€ä¸»æµçš„å¸ƒå±€æ–¹å¼ã€‚</li></ul></li><li><strong>å“åº”å¼è®¾è®¡ï¼ˆResponsive Designï¼‰</strong>ï¼šä½¿ç”¨ <code>@media</code> æŸ¥è¯¢æ¥æ ¹æ®è®¾å¤‡å±å¹•å¤§å°è°ƒæ•´æ ·å¼ï¼Œä½¿ç½‘é¡µåœ¨ä¸åŒè®¾å¤‡ä¸Šéƒ½èƒ½è‰¯å¥½æ˜¾ç¤ºã€‚</li></ul></li></ul><h4 id="3-JavaScript-JS"><a href="#3-JavaScript-JS" class="headerlink" title="3. JavaScript (JS)"></a>3. JavaScript (JS)</h4><ul><li><strong>æ˜¯ä»€ä¹ˆ</strong>ï¼šä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œç”¨äº<strong>å®ç°ç½‘é¡µçš„åŠ¨æ€è¡Œä¸ºå’Œäº¤äº’</strong>ã€‚å®ƒå¯ä»¥æ“ä½œ HTML å’Œ CSSï¼Œå¤„ç†ç”¨æˆ·äº‹ä»¶ï¼Œå¹¶ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚</li><li><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼š<ul><li><strong>DOM (Document Object Model) æ“ä½œ</strong>ï¼šé€šè¿‡ <code>document</code> å¯¹è±¡ï¼ŒJS å¯ä»¥è·å–ã€ä¿®æ”¹ã€æ·»åŠ æˆ–åˆ é™¤é¡µé¢ä¸Šçš„ HTML å…ƒç´ ã€‚ä¾‹å¦‚ <code>document.getElementById(&#39;myId&#39;)</code>ã€‚</li><li><strong>äº‹ä»¶å¤„ç†ï¼ˆEvent Handlingï¼‰</strong>ï¼šå“åº”ç”¨æˆ·çš„è¡Œä¸ºï¼Œå¦‚ç‚¹å‡»ã€è¾“å…¥ã€é¼ æ ‡ç§»åŠ¨ç­‰ã€‚ä¾‹å¦‚ <code>element.addEventListener(&#39;click&#39;, function() &#123; ... &#125;)</code>ã€‚</li><li><strong>å¼‚æ­¥ç¼–ç¨‹ï¼ˆAsynchronous Programmingï¼‰</strong>ï¼šå¤„ç†è€—æ—¶æ“ä½œï¼Œå¦‚ç½‘ç»œè¯·æ±‚ã€‚<ul><li><strong>Callback (å›è°ƒå‡½æ•°)</strong>ï¼šä¼ ç»Ÿæ–¹å¼ã€‚</li><li><strong>Promise</strong>ï¼šES6 å¼•å…¥ï¼Œè§£å†³äº†å›è°ƒåœ°ç‹±é—®é¢˜ã€‚</li><li><strong>async&#x2F;await</strong>ï¼šåŸºäº <code>Promise</code> çš„è¯­æ³•ç³–ï¼Œä½¿å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼Œæ›´æ˜“è¯»ã€‚</li></ul></li><li><strong>AJAX (Asynchronous JavaScript and XML)</strong>ï¼šåœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œä¸æœåŠ¡å™¨è¿›è¡Œå¼‚æ­¥é€šä¿¡ã€‚ç°ä»£åº”ç”¨ä¸­é€šå¸¸ä½¿ç”¨ <code>fetch()</code> API æˆ– <code>Axios</code> åº“æ¥å‘é€ JSON æ•°æ®ã€‚</li></ul></li></ul><hr><h3 id="äºŒã€ç°ä»£å‰ç«¯æ¡†æ¶ï¼šæå‡å¼€å‘æ•ˆç‡"><a href="#äºŒã€ç°ä»£å‰ç«¯æ¡†æ¶ï¼šæå‡å¼€å‘æ•ˆç‡" class="headerlink" title="äºŒã€ç°ä»£å‰ç«¯æ¡†æ¶ï¼šæå‡å¼€å‘æ•ˆç‡"></a>äºŒã€ç°ä»£å‰ç«¯æ¡†æ¶ï¼šæå‡å¼€å‘æ•ˆç‡</h3><p>ä¸ºäº†å¤„ç†æ—¥ç›Šå¤æ‚çš„ Web åº”ç”¨ï¼Œå¼€å‘è€…é€šå¸¸ä¼šä½¿ç”¨ä»¥ä¸‹æ¡†æ¶ã€‚</p><ul><li><strong>React</strong>ï¼šç”± Facebook å¼€å‘ï¼Œ<strong>ç»„ä»¶åŒ–</strong>ã€<strong>å£°æ˜å¼</strong>çš„ UI åº“ã€‚<ul><li><strong>æ ¸å¿ƒ</strong>ï¼š<strong>ç»„ä»¶ï¼ˆComponentsï¼‰</strong>ï¼Œå°† UI æ‹†åˆ†æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„éƒ¨åˆ†ã€‚</li><li><strong>å·¥ä½œåŸç†</strong>ï¼šä½¿ç”¨<strong>è™šæ‹Ÿ DOM (Virtual DOM)</strong>ï¼Œåœ¨å†…å­˜ä¸­è¿›è¡Œè®¡ç®—ï¼Œç„¶ååªæ›´æ–°å®é™…æ”¹å˜çš„éƒ¨åˆ†ï¼Œæé«˜äº†æ€§èƒ½ã€‚</li><li><strong>ç”Ÿæ€</strong>ï¼šåºå¤§è€Œæ´»è·ƒï¼Œæœ‰æˆç†Ÿçš„çŠ¶æ€ç®¡ç†ï¼ˆRedux, Zustandï¼‰ã€è·¯ç”±ï¼ˆReact Routerï¼‰ç­‰è§£å†³æ–¹æ¡ˆã€‚</li></ul></li><li><strong>Vue.js</strong>ï¼šç”±å°¤é›¨æºªå¼€å‘ï¼Œæ˜“å­¦æ˜“ç”¨ï¼Œ<strong>æ¸è¿›å¼</strong>æ¡†æ¶ã€‚<ul><li><strong>æ ¸å¿ƒ</strong>ï¼š<strong>å“åº”å¼æ•°æ®ç»‘å®š</strong>ï¼Œæ•°æ®æ”¹å˜ï¼Œè§†å›¾è‡ªåŠ¨æ›´æ–°ã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼šä¸Šæ‰‹å¿«ï¼Œæ–‡æ¡£å‹å¥½ï¼Œç¤¾åŒºç”Ÿæ€å®Œå–„ã€‚</li></ul></li><li><strong>Angular</strong>ï¼šç”± Google å¼€å‘ï¼Œ<strong>å…¨èƒ½å‹</strong>æ¡†æ¶ã€‚<ul><li><strong>æ ¸å¿ƒ</strong>ï¼šæä¾›äº†å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬è·¯ç”±ã€ä¾èµ–æ³¨å…¥ã€çŠ¶æ€ç®¡ç†ç­‰ã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼šé€‚åˆå¤§å‹ä¼ä¸šçº§åº”ç”¨ï¼Œå­¦ä¹ æ›²çº¿ç›¸å¯¹é™¡å³­ã€‚</li></ul></li></ul><hr><h3 id="ä¸‰ã€å·¥ç¨‹åŒ–ï¼šé«˜æ•ˆåä½œå’Œè‡ªåŠ¨åŒ–"><a href="#ä¸‰ã€å·¥ç¨‹åŒ–ï¼šé«˜æ•ˆåä½œå’Œè‡ªåŠ¨åŒ–" class="headerlink" title="ä¸‰ã€å·¥ç¨‹åŒ–ï¼šé«˜æ•ˆåä½œå’Œè‡ªåŠ¨åŒ–"></a>ä¸‰ã€å·¥ç¨‹åŒ–ï¼šé«˜æ•ˆåä½œå’Œè‡ªåŠ¨åŒ–</h3><p>ç°ä»£å‰ç«¯å¼€å‘å·²ç»ä¸ä»…ä»…æ˜¯å†™ä»£ç ï¼Œè¿˜éœ€è¦ä½¿ç”¨ä¸€ç³»åˆ—å·¥å…·æ¥æé«˜æ•ˆç‡ã€‚</p><ul><li><strong>åŒ…ç®¡ç†å™¨</strong>ï¼š<code>npm</code>, <code>yarn</code>, <code>pnpm</code>ã€‚ç”¨äºç®¡ç†é¡¹ç›®ä¾èµ–ã€‚</li><li><strong>æ„å»ºå·¥å…·</strong>ï¼š<ul><li><strong>Webpack</strong>ï¼šå°†å¤šä¸ªæ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œå¹¶èƒ½å¤„ç†èµ„æºä¾èµ–ã€ä»£ç å‹ç¼©ç­‰ã€‚</li><li><strong>Vite</strong>ï¼šåŸºäº ES Modules çš„æ–°ä¸€ä»£æ„å»ºå·¥å…·ï¼Œå¼€å‘æ¨¡å¼ä¸‹é€Ÿåº¦æå¿«ã€‚</li></ul></li><li><strong>è½¬è¯‘å·¥å…·</strong>ï¼š<strong>Babel</strong>ã€‚å°† ES6+ çš„ä»£ç è½¬è¯‘ä¸ºæµè§ˆå™¨å…¼å®¹çš„ ES5 ä»£ç ã€‚</li><li><strong>ä»£ç è§„èŒƒ</strong>ï¼š<strong>ESLint</strong> (ä»£ç é£æ ¼æ£€æŸ¥), <strong>Prettier</strong> (ä»£ç æ ¼å¼åŒ–)ã€‚</li><li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼š<strong>Git</strong>ã€‚ç”¨äºå›¢é˜Ÿåä½œå’Œä»£ç ç‰ˆæœ¬ç®¡ç†ã€‚</li></ul><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬è¯¦ç»†ã€å…¨é¢åœ°ä»‹ç» CSS é€‰æ‹©å™¨ã€‚é€‰æ‹©å™¨æ˜¯ CSS çš„æ ¸å¿ƒï¼ŒæŒæ¡å®ƒæ‰èƒ½ç²¾ç¡®åœ°æ§åˆ¶ç½‘é¡µæ ·å¼ã€‚æˆ‘ä»¬å°†ä»åŸºç¡€åˆ°é«˜çº§ï¼Œç³»ç»Ÿåœ°æ¢³ç†ä¸åŒç±»å‹çš„é€‰æ‹©å™¨åŠå…¶ç”¨æ³•ã€‚</p><hr><h3 id="ä¸€ã€åŸºç¡€é€‰æ‹©å™¨-Basic-Selectors"><a href="#ä¸€ã€åŸºç¡€é€‰æ‹©å™¨-Basic-Selectors" class="headerlink" title="ä¸€ã€åŸºç¡€é€‰æ‹©å™¨ (Basic Selectors)"></a>ä¸€ã€åŸºç¡€é€‰æ‹©å™¨ (Basic Selectors)</h3><p>è¿™äº›æ˜¯ CSS ä¸­æœ€ç®€å•ã€æœ€å¸¸ç”¨çš„é€‰æ‹©å™¨ï¼Œç”¨äºç›´æ¥é€‰ä¸­å…ƒç´ ã€‚</p><h4 id="1-å…ƒç´ é€‰æ‹©å™¨-Type-Selector"><a href="#1-å…ƒç´ é€‰æ‹©å™¨-Type-Selector" class="headerlink" title="1. å…ƒç´ é€‰æ‹©å™¨ (Type Selector)"></a>1. å…ƒç´ é€‰æ‹©å™¨ (Type Selector)</h4><ul><li><strong>ä½œç”¨</strong>ï¼šæ ¹æ®å…ƒç´ çš„æ ‡ç­¾åæ¥é€‰æ‹©å…ƒç´ ã€‚</li><li><strong>è¯­æ³•</strong>ï¼š<code>element_name &#123; ... &#125;</code></li><li><strong>ç¤ºä¾‹</strong>ï¼š<ul><li><code>p &#123; color: blue; &#125;</code>ï¼šé€‰ä¸­æ‰€æœ‰ <code>&lt;p&gt;</code> å…ƒç´ ã€‚</li><li><code>h1 &#123; font-size: 24px; &#125;</code>ï¼šé€‰ä¸­æ‰€æœ‰ <code>&lt;h1&gt;</code> å…ƒç´ ã€‚</li></ul></li></ul><h4 id="2-ç±»é€‰æ‹©å™¨-Class-Selector"><a href="#2-ç±»é€‰æ‹©å™¨-Class-Selector" class="headerlink" title="2. ç±»é€‰æ‹©å™¨ (Class Selector)"></a>2. ç±»é€‰æ‹©å™¨ (Class Selector)</h4><ul><li><strong>ä½œç”¨</strong>ï¼šæ ¹æ®å…ƒç´ çš„ <code>class</code> å±æ€§æ¥é€‰æ‹©å…ƒç´ ã€‚</li><li><strong>è¯­æ³•</strong>ï¼š<code>.class_name &#123; ... &#125;</code></li><li><strong>ç‰¹ç‚¹</strong>ï¼šä¸€ä¸ªå…ƒç´ å¯ä»¥æœ‰å¤šä¸ªç±»åï¼Œç±»åå¯ä»¥é‡å¤ä½¿ç”¨ï¼Œéå¸¸çµæ´»ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<ul><li><code>.highlight &#123; background-color: yellow; &#125;</code>ï¼šé€‰ä¸­æ‰€æœ‰ <code>class</code> å±æ€§ä¸­åŒ…å« <code>highlight</code> çš„å…ƒç´ ã€‚</li></ul></li></ul><h4 id="3-ID-é€‰æ‹©å™¨-ID-Selector"><a href="#3-ID-é€‰æ‹©å™¨-ID-Selector" class="headerlink" title="3. ID é€‰æ‹©å™¨ (ID Selector)"></a>3. ID é€‰æ‹©å™¨ (ID Selector)</h4><ul><li><strong>ä½œç”¨</strong>ï¼šæ ¹æ®å…ƒç´ çš„ <code>id</code> å±æ€§æ¥é€‰æ‹©å…ƒç´ ã€‚</li><li><strong>è¯­æ³•</strong>ï¼š<code>#id_name &#123; ... &#125;</code></li><li><strong>ç‰¹ç‚¹</strong>ï¼šåœ¨ HTML æ–‡æ¡£ä¸­ï¼Œä¸€ä¸ª <code>id</code> å±æ€§çš„å€¼å¿…é¡»æ˜¯<strong>å”¯ä¸€çš„</strong>ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<ul><li><code>#header &#123; height: 100px; &#125;</code>ï¼šé€‰ä¸­ <code>id</code> ä¸º <code>header</code> çš„å”¯ä¸€å…ƒç´ ã€‚</li></ul></li></ul><h4 id="4-é€šç”¨é€‰æ‹©å™¨-Universal-Selector"><a href="#4-é€šç”¨é€‰æ‹©å™¨-Universal-Selector" class="headerlink" title="4. é€šç”¨é€‰æ‹©å™¨ (Universal Selector)"></a>4. é€šç”¨é€‰æ‹©å™¨ (Universal Selector)</h4><ul><li><strong>ä½œç”¨</strong>ï¼šé€‰æ‹©é¡µé¢ä¸Šçš„æ‰€æœ‰å…ƒç´ ã€‚</li><li><strong>è¯­æ³•</strong>ï¼š<code>* &#123; ... &#125;</code></li><li><strong>ç¤ºä¾‹</strong>ï¼š<ul><li><code>* &#123; margin: 0; padding: 0; &#125;</code>ï¼šæ¸…é™¤æ‰€æœ‰å…ƒç´ çš„é»˜è®¤å¤–è¾¹è·å’Œå†…è¾¹è·ï¼Œå¸¸ç”¨äº CSS é‡ç½®ã€‚</li></ul></li></ul><hr><h3 id="äºŒã€ç»„åˆé€‰æ‹©å™¨-Combinators"><a href="#äºŒã€ç»„åˆé€‰æ‹©å™¨-Combinators" class="headerlink" title="äºŒã€ç»„åˆé€‰æ‹©å™¨ (Combinators)"></a>äºŒã€ç»„åˆé€‰æ‹©å™¨ (Combinators)</h3><p>è¿™äº›é€‰æ‹©å™¨ç”¨äºæ ¹æ®å…ƒç´ ä¹‹é—´çš„å…³ç³»æ¥é€‰æ‹©å…ƒç´ ï¼Œå¦‚çˆ¶å­å…³ç³»ã€å…„å¼Ÿå…³ç³»ç­‰ã€‚</p><h4 id="1-åä»£é€‰æ‹©å™¨-Descendant-Selector"><a href="#1-åä»£é€‰æ‹©å™¨-Descendant-Selector" class="headerlink" title="1. åä»£é€‰æ‹©å™¨ (Descendant Selector)"></a>1. åä»£é€‰æ‹©å™¨ (Descendant Selector)</h4><ul><li><strong>ä½œç”¨</strong>ï¼šé€‰æ‹©æŸä¸ªå…ƒç´ å†…éƒ¨çš„<strong>æ‰€æœ‰</strong>åä»£å…ƒç´ ï¼ˆåŒ…æ‹¬å­å…ƒç´ ã€å­™å­å…ƒç´ ç­‰ï¼‰ã€‚</li><li><strong>è¯­æ³•</strong>ï¼š<code>ancestor descendant &#123; ... &#125;</code>ï¼Œç”¨<strong>ç©ºæ ¼</strong>åˆ†éš”ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<ul><li><code>ul li &#123; list-style-type: none; &#125;</code>ï¼šé€‰ä¸­æ‰€æœ‰ <code>&lt;ul&gt;</code> å†…éƒ¨çš„ <code>&lt;li&gt;</code> å…ƒç´ ã€‚</li></ul></li></ul><h4 id="2-å­é€‰æ‹©å™¨-Child-Selector"><a href="#2-å­é€‰æ‹©å™¨-Child-Selector" class="headerlink" title="2. å­é€‰æ‹©å™¨ (Child Selector)"></a>2. å­é€‰æ‹©å™¨ (Child Selector)</h4><ul><li><strong>ä½œç”¨</strong>ï¼šé€‰æ‹©æŸä¸ªå…ƒç´ çš„<strong>ç›´æ¥å­å…ƒç´ </strong>ã€‚</li><li><strong>è¯­æ³•</strong>ï¼š<code>parent &gt; child &#123; ... &#125;</code>ï¼Œç”¨ <code>&gt;</code> åˆ†éš”ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<ul><li><code>ul &gt; li &#123; list-style-type: none; &#125;</code>ï¼šåªé€‰ä¸­ <code>&lt;ul&gt;</code> çš„ç›´æ¥å­å…ƒç´  <code>&lt;li&gt;</code>ã€‚</li><li><strong>åŒºåˆ«</strong>ï¼šä¸åä»£é€‰æ‹©å™¨ç›¸æ¯”ï¼Œæ›´åŠ ç²¾ç¡®ï¼Œæ€§èƒ½ä¹Ÿæ›´å¥½ã€‚</li></ul></li></ul><h4 id="3-ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨-Adjacent-Sibling-Selector"><a href="#3-ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨-Adjacent-Sibling-Selector" class="headerlink" title="3. ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨ (Adjacent Sibling Selector)"></a>3. ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨ (Adjacent Sibling Selector)</h4><ul><li><strong>ä½œç”¨</strong>ï¼šé€‰æ‹©ç´§æ¥åœ¨å¦ä¸€ä¸ªå…ƒç´ åé¢çš„<strong>å…„å¼Ÿå…ƒç´ </strong>ã€‚</li><li><strong>è¯­æ³•</strong>ï¼š<code>element + adjacent_element &#123; ... &#125;</code>ï¼Œç”¨ <code>+</code> åˆ†éš”ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<ul><li><code>h1 + p &#123; margin-top: 0; &#125;</code>ï¼šé€‰ä¸­ç´§è·Ÿåœ¨ <code>&lt;h1&gt;</code> åçš„ç¬¬ä¸€ä¸ª <code>&lt;p&gt;</code> å…ƒç´ ã€‚</li></ul></li></ul><h4 id="4-é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨-General-Sibling-Selector"><a href="#4-é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨-General-Sibling-Selector" class="headerlink" title="4. é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨ (General Sibling Selector)"></a>4. é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨ (General Sibling Selector)</h4><ul><li><strong>ä½œç”¨</strong>ï¼šé€‰æ‹©æŸä¸ªå…ƒç´ åé¢<strong>æ‰€æœ‰</strong>çš„å…„å¼Ÿå…ƒç´ ï¼ˆä¸é™äºç´§é‚»çš„ï¼‰ã€‚</li><li><strong>è¯­æ³•</strong>ï¼š<code>element ~ sibling &#123; ... &#125;</code>ï¼Œç”¨ <code>~</code> åˆ†éš”ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<ul><li><code>h1 ~ p &#123; margin-top: 0; &#125;</code>ï¼šé€‰ä¸­ <code>&lt;h1&gt;</code> åçš„æ‰€æœ‰ <code>&lt;p&gt;</code> å…ƒç´ ã€‚</li></ul></li></ul><hr><h3 id="ä¸‰ã€å±æ€§é€‰æ‹©å™¨-Attribute-Selectors"><a href="#ä¸‰ã€å±æ€§é€‰æ‹©å™¨-Attribute-Selectors" class="headerlink" title="ä¸‰ã€å±æ€§é€‰æ‹©å™¨ (Attribute Selectors)"></a>ä¸‰ã€å±æ€§é€‰æ‹©å™¨ (Attribute Selectors)</h3><p>è¿™äº›é€‰æ‹©å™¨æ ¹æ®å…ƒç´ çš„å±æ€§åŠå…¶å€¼æ¥é€‰æ‹©å…ƒç´ ã€‚</p><ul><li><strong>[attribute]</strong>ï¼šé€‰æ‹©å…·æœ‰è¯¥å±æ€§çš„å…ƒç´ ã€‚<ul><li><code>[title] &#123; ... &#125;</code>ï¼šé€‰ä¸­æ‰€æœ‰å…·æœ‰ <code>title</code> å±æ€§çš„å…ƒç´ ã€‚</li></ul></li><li><strong>[attribute&#x3D;â€valueâ€]</strong>ï¼šé€‰æ‹©å…·æœ‰ç‰¹å®šå±æ€§å’Œå€¼çš„å…ƒç´ ã€‚<ul><li><code>input[type=&quot;text&quot;] &#123; ... &#125;</code>ï¼šé€‰ä¸­æ‰€æœ‰ <code>type</code> å±æ€§å€¼ä¸º <code>text</code> çš„ <code>&lt;input&gt;</code> å…ƒç´ ã€‚</li></ul></li><li><strong>[attribute~&#x3D;â€valueâ€]</strong>ï¼šé€‰æ‹©å±æ€§å€¼ä¸­åŒ…å«ç‰¹å®š<strong>ç‹¬ç«‹å•è¯</strong>çš„å…ƒç´ ã€‚<ul><li><code>[class~=&quot;box&quot;] &#123; ... &#125;</code>ï¼šé€‰ä¸­æ‰€æœ‰ <code>class</code> å±æ€§ä¸­åŒ…å« <code>box</code> è¿™ä¸ªç‹¬ç«‹å•è¯çš„å…ƒç´ ï¼ˆå¦‚ <code>class=&quot;card box&quot;</code>ï¼‰ã€‚</li></ul></li><li><strong>[attribute|&#x3D;â€valueâ€]</strong>ï¼šé€‰æ‹©å±æ€§å€¼ä»¥ç‰¹å®šå­—ç¬¦ä¸²å¼€å¤´ï¼ˆåè·Ÿè¿å­—ç¬¦ <code>-</code>ï¼‰çš„å…ƒç´ ã€‚<ul><li><code>[lang|=&quot;en&quot;] &#123; ... &#125;</code>ï¼šé€‰ä¸­ <code>lang</code> å±æ€§å€¼ä¸º <code>en</code> æˆ– <code>en-us</code> ç­‰çš„å…ƒç´ ã€‚</li></ul></li><li><strong>[attribute^&#x3D;â€valueâ€]</strong>ï¼šé€‰æ‹©å±æ€§å€¼ä»¥ç‰¹å®šå­—ç¬¦ä¸²å¼€å¤´çš„å…ƒç´ ã€‚<ul><li><code>a[href^=&quot;https&quot;] &#123; ... &#125;</code>ï¼šé€‰ä¸­æ‰€æœ‰ <code>href</code> å±æ€§ä»¥ <code>https</code> å¼€å¤´çš„ <code>&lt;a&gt;</code> å…ƒç´ ã€‚</li></ul></li><li><strong>[attribute$&#x3D;â€valueâ€]</strong>ï¼šé€‰æ‹©å±æ€§å€¼ä»¥ç‰¹å®šå­—ç¬¦ä¸²ç»“å°¾çš„å…ƒç´ ã€‚<ul><li><code>img[src$=&quot;.png&quot;] &#123; ... &#125;</code>ï¼šé€‰ä¸­æ‰€æœ‰ <code>src</code> å±æ€§ä»¥ <code>.png</code> ç»“å°¾çš„ <code>&lt;img&gt;</code> å…ƒç´ ã€‚</li></ul></li><li><strong>[attribute*&#x3D;â€valueâ€]</strong>ï¼šé€‰æ‹©å±æ€§å€¼ä¸­åŒ…å«ç‰¹å®šå­—ç¬¦ä¸²çš„å…ƒç´ ã€‚<ul><li><code>[title*=&quot;hello&quot;] &#123; ... &#125;</code>ï¼šé€‰ä¸­æ‰€æœ‰ <code>title</code> å±æ€§å€¼ä¸­åŒ…å« <code>hello</code> çš„å…ƒç´ ã€‚</li></ul></li></ul><hr><h3 id="å››ã€ä¼ªç±»é€‰æ‹©å™¨-Pseudo-class-Selectors"><a href="#å››ã€ä¼ªç±»é€‰æ‹©å™¨-Pseudo-class-Selectors" class="headerlink" title="å››ã€ä¼ªç±»é€‰æ‹©å™¨ (Pseudo-class Selectors)"></a>å››ã€ä¼ªç±»é€‰æ‹©å™¨ (Pseudo-class Selectors)</h3><p>ä¼ªç±»ç”¨äºé€‰æ‹©å…ƒç´ çš„<strong>ç‰¹å®šçŠ¶æ€</strong>ã€‚</p><ul><li><strong>a:link</strong>ï¼šæœªè®¿é—®çš„é“¾æ¥ã€‚</li><li><strong>a:visited</strong>ï¼šå·²è®¿é—®çš„é“¾æ¥ã€‚</li><li><strong>a:hover</strong>ï¼šé¼ æ ‡æ‚¬åœåœ¨å…ƒç´ ä¸Šã€‚</li><li><strong>a:active</strong>ï¼šå…ƒç´ è¢«ç‚¹å‡»æ—¶ã€‚</li><li><strong>element:focus</strong>ï¼šå…ƒç´ è·å¾—ç„¦ç‚¹æ—¶ï¼ˆå¸¸ç”¨äºè¡¨å•ï¼‰ã€‚</li><li><strong>:nth-child(n)</strong>ï¼šé€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„ç¬¬ n ä¸ªå­å…ƒç´ ã€‚</li><li><strong>:first-child</strong>ï¼šé€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚</li><li><strong>:last-child</strong>ï¼šé€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„æœ€åä¸€ä¸ªå­å…ƒç´ ã€‚</li><li><strong>:not(selector)</strong>ï¼šé€‰æ‹©ä¸åŒ¹é…æŒ‡å®šé€‰æ‹©å™¨çš„å…ƒç´ ã€‚</li><li><strong>:empty</strong>ï¼šé€‰æ‹©æ²¡æœ‰å­å…ƒç´ æˆ–æ–‡æœ¬å†…å®¹çš„å…ƒç´ ã€‚</li></ul><hr><h3 id="äº”ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨-Pseudo-element-Selectors"><a href="#äº”ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨-Pseudo-element-Selectors" class="headerlink" title="äº”ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨ (Pseudo-element Selectors)"></a>äº”ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨ (Pseudo-element Selectors)</h3><p>ä¼ªå…ƒç´ ç”¨äºé€‰æ‹©å…ƒç´ çš„<strong>ç‰¹å®šéƒ¨åˆ†</strong>ã€‚</p><ul><li><strong>::first-line</strong>ï¼šé€‰æ‹©å…ƒç´ çš„ç¬¬ä¸€è¡Œã€‚</li><li><strong>::first-letter</strong>ï¼šé€‰æ‹©å…ƒç´ çš„é¦–ä¸ªå­—æ¯ã€‚</li><li><strong>::before</strong>ï¼šåœ¨å…ƒç´ çš„å†…å®¹å‰é¢æ’å…¥ç”Ÿæˆçš„å†…å®¹ã€‚</li><li><strong>::after</strong>ï¼šåœ¨å…ƒç´ çš„å†…å®¹åé¢æ’å…¥ç”Ÿæˆçš„å†…å®¹ã€‚</li></ul><hr><h3 id="ä¼˜å…ˆçº§ä¸å±‚å "><a href="#ä¼˜å…ˆçº§ä¸å±‚å " class="headerlink" title="ä¼˜å…ˆçº§ä¸å±‚å "></a>ä¼˜å…ˆçº§ä¸å±‚å </h3><p>å½“å¤šä¸ªé€‰æ‹©å™¨é€‰ä¸­åŒä¸€ä¸ªå…ƒç´ å¹¶åº”ç”¨ä¸åŒçš„æ ·å¼æ—¶ï¼Œæµè§ˆå™¨ä¼šæ ¹æ®**ä¼˜å…ˆçº§ï¼ˆSpecificityï¼‰**æ¥å†³å®šæœ€ç»ˆæ ·å¼ã€‚</p><ul><li><strong>ä¼˜å…ˆçº§è®¡ç®—</strong>ï¼š<ul><li><code>!important</code>ï¼šæœ€é«˜ä¼˜å…ˆçº§ã€‚</li><li><strong>è¡Œå†…æ ·å¼</strong>ï¼š1000</li><li><strong>ID é€‰æ‹©å™¨</strong>ï¼š100</li><li><strong>ç±»ã€å±æ€§ã€ä¼ªç±»é€‰æ‹©å™¨</strong>ï¼š10</li><li><strong>å…ƒç´ ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨</strong>ï¼š1</li><li><strong>é€šç”¨é€‰æ‹©å™¨</strong>ï¼š0</li></ul></li><li><strong>ä¸¾ä¾‹</strong>ï¼š<ul><li><code>p &#123; color: red; &#125;</code>ï¼ˆä¼˜å…ˆçº§ 1ï¼‰</li><li><code>.highlight &#123; color: blue; &#125;</code>ï¼ˆä¼˜å…ˆçº§ 10ï¼‰</li><li><code>#main p &#123; color: green; &#125;</code>ï¼ˆä¼˜å…ˆçº§ 101ï¼‰</li></ul></li></ul><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå³ä½¿ <code>p</code> çš„æ ·å¼æœ€å…ˆå£°æ˜ï¼Œä½† <code>main p</code> çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå› æ­¤ <code>&lt;p id=&quot;main&quot;&gt;</code> çš„å­—ä½“é¢œè‰²æœ€ç»ˆä¼šæ˜¯ç»¿è‰²ã€‚</p><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æ¥å…¨é¢ã€æ·±å…¥åœ°ä»‹ç» Mavenï¼Œå¹¶å‰–æä¸€äº›å…³é”®ç»†èŠ‚ä»¥åŠé¢è¯•ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ã€‚</p><hr><h3 id="ä¸€ã€Maven-æ ¸å¿ƒæ¦‚å¿µ"><a href="#ä¸€ã€Maven-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ä¸€ã€Maven æ ¸å¿ƒæ¦‚å¿µ"></a>ä¸€ã€Maven æ ¸å¿ƒæ¦‚å¿µ</h3><h4 id="1-ä»€ä¹ˆæ˜¯-Mavenï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯-Mavenï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ Mavenï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯ Mavenï¼Ÿ</h4><p>Maven æ˜¯ä¸€ä¸ª<strong>é¡¹ç›®ç®¡ç†å’Œæ„å»ºè‡ªåŠ¨åŒ–å·¥å…·</strong>ã€‚å®ƒæä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„ã€ç»Ÿä¸€çš„æ„å»ºç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä¾èµ–äºä¸€ä¸ª<strong>ä¸­å¤®ä»“åº“</strong>æ¥ç®¡ç†é¡¹ç›®æ‰€éœ€çš„ä¾èµ–ã€‚</p><p>å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯**â€œçº¦å®šä¼˜äºé…ç½®â€ï¼ˆConvention over Configurationï¼‰**ï¼Œè¿™æ„å‘³ç€å®ƒæœ‰ä¸€å¥—é»˜è®¤çš„é¡¹ç›®ç›®å½•ç»“æ„å’Œæ„å»ºæµç¨‹ã€‚åªè¦ä½ éµå¾ªè¿™äº›çº¦å®šï¼Œå°±å¯ä»¥ç”¨å¾ˆå°‘çš„é…ç½®å®Œæˆå¤æ‚çš„æ„å»ºä»»åŠ¡ã€‚</p><h4 id="2-ä¸ºä»€ä¹ˆéœ€è¦-Mavenï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆéœ€è¦-Mavenï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆéœ€è¦ Mavenï¼Ÿ"></a>2. ä¸ºä»€ä¹ˆéœ€è¦ Mavenï¼Ÿ</h4><p>åœ¨ Maven å‡ºç°ä¹‹å‰ï¼ŒJava é¡¹ç›®çš„æ„å»ºéå¸¸æ··ä¹±ï¼š</p><ul><li><strong>é¡¹ç›®ç»“æ„ä¸ç»Ÿä¸€</strong>ï¼šæ¯ä¸ªé¡¹ç›®éƒ½æœ‰è‡ªå·±çš„ç›®å½•ç»“æ„ï¼Œæ–°æˆå‘˜éœ€è¦èŠ±æ—¶é—´ç†Ÿæ‚‰ã€‚</li><li><strong>ä¾èµ–ç®¡ç†æ··ä¹±</strong>ï¼šéœ€è¦æ‰‹åŠ¨ä¸‹è½½æ‰€æœ‰ JAR åŒ…ï¼Œå¹¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼Œéå¸¸å®¹æ˜“å‡ºé”™ã€‚</li><li><strong>æ„å»ºè¿‡ç¨‹ä¸ç»Ÿä¸€</strong>ï¼šç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ç­‰æ“ä½œéœ€è¦æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬ï¼Œæ•ˆç‡ä½ä¸‹ã€‚</li></ul><p>Maven é€šè¿‡<strong>æ ‡å‡†åŒ–</strong>è§£å†³äº†è¿™äº›é—®é¢˜ï¼š</p><ul><li><strong>æ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„</strong>ï¼šæ‰€æœ‰ Maven é¡¹ç›®éƒ½éµå¾ªç›¸åŒçš„ç›®å½•ç»“æ„ï¼Œå¦‚ <code>src/main/java</code>ã€<code>src/test/java</code> ç­‰ã€‚</li><li><strong>ç»Ÿä¸€çš„ä¾èµ–ç®¡ç†</strong>ï¼šé€šè¿‡åœ¨ <code>pom.xml</code> ä¸­å£°æ˜ä¾èµ–ï¼ŒMaven ä¼šè‡ªåŠ¨ä»ä»“åº“ä¸‹è½½å¹¶ç®¡ç†ã€‚</li><li><strong>æ ‡å‡†åŒ–çš„æ„å»ºç”Ÿå‘½å‘¨æœŸ</strong>ï¼šå®šä¹‰äº†ä¸€ç³»åˆ—æ ‡å‡†çš„æ„å»ºé˜¶æ®µï¼ˆå¦‚ <code>compile</code>, <code>test</code>, <code>package</code>ï¼‰ï¼Œå¯ä»¥ä¸€é”®æ‰§è¡Œã€‚</li></ul><hr><h3 id="äºŒã€Maven-çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†"><a href="#äºŒã€Maven-çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†" class="headerlink" title="äºŒã€Maven çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†"></a>äºŒã€Maven çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†</h3><h4 id="1-POM-Project-Object-Model"><a href="#1-POM-Project-Object-Model" class="headerlink" title="1. POM (Project Object Model)"></a>1. POM (Project Object Model)</h4><ul><li><strong>æ¦‚å¿µ</strong>ï¼š<code>pom.xml</code> æ–‡ä»¶æ˜¯ Maven é¡¹ç›®çš„<strong>æ ¸å¿ƒé…ç½®æ–‡ä»¶</strong>ã€‚å®ƒå®šä¹‰äº†é¡¹ç›®çš„å…ƒæ•°æ®ã€ä¾èµ–ã€æ’ä»¶ã€æ„å»ºé…ç½®ç­‰æ‰€æœ‰ä¿¡æ¯ã€‚</li><li><strong>é‡è¦æ ‡ç­¾</strong>ï¼š<ul><li><code>&lt;project&gt;</code>ï¼šæ ¹å…ƒç´ ã€‚</li><li><code>&lt;groupId&gt;</code>, <code>&lt;artifactId&gt;</code>, <code>&lt;version&gt;</code>ï¼šé¡¹ç›®çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œé€šå¸¸ç§°ä¸º <strong>GAV åæ ‡</strong>ã€‚</li><li><code>&lt;packaging&gt;</code>ï¼šæ‰“åŒ…ç±»å‹ï¼Œå¦‚ <code>jar</code>, <code>war</code>, <code>pom</code>ã€‚</li><li><code>&lt;dependencies&gt;</code>ï¼šå®šä¹‰é¡¹ç›®æ‰€éœ€çš„ä¾èµ–ã€‚</li><li><code>&lt;parent&gt;</code>ï¼šç»§æ‰¿çˆ¶ POMï¼Œå®ç°ä¾èµ–çš„ç»Ÿä¸€ç®¡ç†ã€‚</li><li><code>&lt;build&gt;</code>ï¼šå®šä¹‰æ„å»ºè¿‡ç¨‹ï¼Œå¦‚æ’ä»¶é…ç½®ã€‚</li></ul></li></ul><h4 id="2-ä¾èµ–ç®¡ç†-Dependency-Management"><a href="#2-ä¾èµ–ç®¡ç†-Dependency-Management" class="headerlink" title="2. ä¾èµ–ç®¡ç† (Dependency Management)"></a>2. ä¾èµ–ç®¡ç† (Dependency Management)</h4><ul><li><strong>æ¦‚å¿µ</strong>ï¼šé€šè¿‡åœ¨ <code>&lt;dependencies&gt;</code> ä¸­å®šä¹‰ GAV åæ ‡ï¼ŒMaven ä¼šè‡ªåŠ¨ä»æœ¬åœ°æˆ–è¿œç¨‹ä»“åº“ä¸‹è½½ä¾èµ–ã€‚</li><li><strong>ä¼ é€’æ€§ä¾èµ–</strong>ï¼šå¦‚æœä½ çš„é¡¹ç›®ä¾èµ– Aï¼ŒA åˆä¾èµ– Bï¼ŒMaven ä¼šè‡ªåŠ¨å°† B ä¹Ÿä¸‹è½½ä¸‹æ¥ã€‚è¿™æ˜¯å…¶å¼ºå¤§çš„åœ°æ–¹ï¼Œä½†æœ‰æ—¶ä¹Ÿå¯èƒ½å¯¼è‡´ç‰ˆæœ¬å†²çªã€‚</li><li><strong><dependencyManagement></strong>ï¼šè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ ‡ç­¾ï¼Œé€šå¸¸åœ¨<strong>çˆ¶ POM</strong> ä¸­ä½¿ç”¨ã€‚å®ƒåªå®šä¹‰ä¾èµ–çš„ç‰ˆæœ¬ï¼Œä½†<strong>ä¸å®é™…å¼•å…¥</strong>ã€‚å­é¡¹ç›®ç»§æ‰¿åï¼Œåªéœ€å£°æ˜ <code>&lt;artifactId&gt;</code> å’Œ <code>&lt;groupId&gt;</code>ï¼Œç‰ˆæœ¬å·ä¼šè‡ªåŠ¨ç»§æ‰¿ï¼Œè¿™èƒ½ç¡®ä¿æ•´ä¸ªé¡¹ç›®æ‰€æœ‰æ¨¡å—çš„ä¾èµ–ç‰ˆæœ¬ä¸€è‡´ã€‚</li></ul><h4 id="3-ä»“åº“-Repositories"><a href="#3-ä»“åº“-Repositories" class="headerlink" title="3. ä»“åº“ (Repositories)"></a>3. ä»“åº“ (Repositories)</h4><p>Maven ä»“åº“æ˜¯ç”¨æ¥å­˜æ”¾æ‰€æœ‰ä¾èµ– JAR åŒ…çš„åœ°æ–¹ã€‚å®ƒåˆ†ä¸ºä¸‰ç§ï¼š</p><ul><li><strong>æœ¬åœ°ä»“åº“ (Local Repository)</strong>ï¼š<code>~/.m2/repository</code>ï¼Œé¦–æ¬¡ä¸‹è½½çš„ä¾èµ–ä¼šå­˜æ”¾åœ¨è¿™é‡Œï¼Œåç»­æ„å»ºæ—¶ä¼šä¼˜å…ˆä»è¿™é‡Œè¯»å–ã€‚</li><li><strong>è¿œç¨‹ä»“åº“ (Remote Repository)</strong>ï¼š<ul><li><strong>ä¸­å¤®ä»“åº“ (Central Repository)</strong>ï¼šMaven å®˜æ–¹ç»´æŠ¤çš„å…¬å…±ä»“åº“ï¼ŒåŒ…å«äº†ç»å¤§å¤šæ•°å¸¸ç”¨çš„å¼€æºåº“ã€‚</li><li><strong>ç§æœ (Private Repository)</strong>ï¼šä¼ä¸šå†…éƒ¨æ­å»ºçš„ä»“åº“ï¼Œç”¨äºå­˜æ”¾å…¬å¸å†…éƒ¨çš„ JAR åŒ…æˆ–ä½œä¸ºä¸­å¤®ä»“åº“çš„ä»£ç†ï¼ŒåŠ å¿«ä¸‹è½½é€Ÿåº¦ã€‚</li></ul></li></ul><h4 id="4-ç”Ÿå‘½å‘¨æœŸä¸é˜¶æ®µ-Lifecycle-Phases"><a href="#4-ç”Ÿå‘½å‘¨æœŸä¸é˜¶æ®µ-Lifecycle-Phases" class="headerlink" title="4. ç”Ÿå‘½å‘¨æœŸä¸é˜¶æ®µ (Lifecycle &amp; Phases)"></a>4. ç”Ÿå‘½å‘¨æœŸä¸é˜¶æ®µ (Lifecycle &amp; Phases)</h4><p>Maven æœ‰ä¸€å¥—æ ‡å‡†çš„æ„å»ºç”Ÿå‘½å‘¨æœŸï¼Œåˆ†ä¸ºä¸‰ä¸ªï¼š</p><ul><li><strong>clean</strong>ï¼šæ¸…ç†é¡¹ç›®ã€‚<ul><li><code>clean</code>ï¼šåˆ é™¤ <code>target</code> ç›®å½•ã€‚</li></ul></li><li><strong>default</strong>ï¼šæ„å»ºé¡¹ç›®ã€‚<ul><li><code>validate</code></li><li><code>compile</code>ï¼šç¼–è¯‘æºä»£ç ã€‚</li><li><code>test</code>ï¼šè¿è¡Œæµ‹è¯•ã€‚</li><li><code>package</code>ï¼šæ‰“åŒ…ã€‚</li><li><code>install</code>ï¼šå®‰è£…åˆ°æœ¬åœ°ä»“åº“ã€‚</li><li><code>deploy</code>ï¼šéƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“ã€‚</li></ul></li><li><strong>site</strong>ï¼šç”Ÿæˆé¡¹ç›®ç«™ç‚¹ã€‚</li></ul><p><strong>é‡è¦è§„åˆ™</strong>ï¼šæ‰§è¡ŒæŸä¸ªé˜¶æ®µæ—¶ï¼Œå®ƒä¹‹å‰çš„æ‰€æœ‰é˜¶æ®µéƒ½ä¼šæŒ‰é¡ºåºæ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œ<code>mvn package</code> ä¼šè‡ªåŠ¨æ‰§è¡Œ <code>compile</code> å’Œ <code>test</code>ã€‚</p><hr><h3 id="ä¸‰ã€é¢è¯•å¸¸è§é—®é¢˜ä¸å›ç­”æŠ€å·§"><a href="#ä¸‰ã€é¢è¯•å¸¸è§é—®é¢˜ä¸å›ç­”æŠ€å·§" class="headerlink" title="ä¸‰ã€é¢è¯•å¸¸è§é—®é¢˜ä¸å›ç­”æŠ€å·§"></a>ä¸‰ã€é¢è¯•å¸¸è§é—®é¢˜ä¸å›ç­”æŠ€å·§</h3><h4 id="1-Maven-çš„-GAV-åæ ‡æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#1-Maven-çš„-GAV-åæ ‡æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="1. Maven çš„ GAV åæ ‡æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>1. Maven çš„ GAV åæ ‡æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h4><ul><li><strong>å›ç­”</strong>ï¼šGAV åæ ‡æ˜¯ Maven é¡¹ç›®çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”± <code>&lt;groupId&gt;</code>, <code>&lt;artifactId&gt;</code>, å’Œ <code>&lt;version&gt;</code> ä¸‰ä¸ªå…ƒç´ ç»„æˆã€‚</li><li><strong>ä½œç”¨</strong>ï¼š<ul><li><strong>å”¯ä¸€æ€§</strong>ï¼šç¡®ä¿æ¯ä¸ªé¡¹ç›®å’Œæ¯ä¸ªç‰ˆæœ¬çš„ä¾èµ–åœ¨ä»“åº“ä¸­éƒ½æ˜¯å”¯ä¸€çš„ã€‚</li><li><strong>å®šä½</strong>ï¼šMaven é€šè¿‡ GAV åæ ‡æ¥æŸ¥æ‰¾å’Œä¸‹è½½ä¾èµ–ã€‚</li><li><strong>ä¼ é€’æ€§</strong>ï¼šåœ¨ä¼ é€’æ€§ä¾èµ–ä¸­ï¼Œé€šè¿‡ GAV åæ ‡æ¥è¯†åˆ«å’Œå¤„ç†ä¾èµ–å…³ç³»ã€‚</li></ul></li></ul><h4 id="2-å’Œ-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#2-å’Œ-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="2. &lt;dependencyManagement&gt; å’Œ &lt;dependencies&gt; æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>2. <code>&lt;dependencyManagement&gt;</code> å’Œ <code>&lt;dependencies&gt;</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><ul><li><strong>å›ç­”</strong>ï¼šè¿™æ˜¯é¢è¯•é«˜é¢‘é—®é¢˜ï¼Œéœ€è¦æ¸…æ™°åœ°è¯´æ˜ä¸¤è€…çš„èŒè´£ã€‚</li><li><strong><dependencies></strong>ï¼š<strong>å®é™…å¼•å…¥</strong>ä¾èµ–ã€‚å®ƒç”¨äºåœ¨å½“å‰é¡¹ç›®ä¸­æ·»åŠ ä¸€ä¸ªå…·ä½“çš„ä¾èµ–ï¼ŒMaven ä¼šç«‹å³ä¸‹è½½å¹¶ä½¿ç”¨å®ƒã€‚</li><li><strong><dependencyManagement></strong>ï¼š<strong>åªå®šä¹‰ç‰ˆæœ¬</strong>ã€‚å®ƒåªå£°æ˜ä¾èµ–çš„ç‰ˆæœ¬ï¼Œä½†<strong>ä¸å®é™…å¼•å…¥</strong>ã€‚å…¶ä¸»è¦ç›®çš„æ˜¯<strong>ç»Ÿä¸€ç®¡ç†å­æ¨¡å—çš„ä¾èµ–ç‰ˆæœ¬</strong>ã€‚å­æ¨¡å—ç»§æ‰¿çˆ¶ POM åï¼Œåªéœ€åœ¨è‡ªå·±çš„ <code>&lt;dependencies&gt;</code> ä¸­å£°æ˜ <code>&lt;groupId&gt;</code> å’Œ <code>&lt;artifactId&gt;</code>ï¼Œç‰ˆæœ¬å·ä¼šè‡ªåŠ¨ä»çˆ¶ POM ä¸­ç»§æ‰¿ï¼Œè¿™é¿å…äº†ç‰ˆæœ¬ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</li></ul><h4 id="3-ä»€ä¹ˆæ˜¯-Maven-çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿmvn-install-å’Œ-mvn-deploy-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#3-ä»€ä¹ˆæ˜¯-Maven-çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿmvn-install-å’Œ-mvn-deploy-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="3. ä»€ä¹ˆæ˜¯ Maven çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿmvn install å’Œ mvn deploy æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>3. ä»€ä¹ˆæ˜¯ Maven çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ<code>mvn install</code> å’Œ <code>mvn deploy</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><ul><li><strong>å›ç­”</strong>ï¼š</li><li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šMaven æœ‰ä¸‰ä¸ªæ ‡å‡†çš„ç”Ÿå‘½å‘¨æœŸï¼š<code>clean</code>ã€<code>default</code> å’Œ <code>site</code>ã€‚å…¶ä¸­ <code>default</code> åŒ…å«äº†ä»ç¼–è¯‘åˆ°éƒ¨ç½²çš„æ‰€æœ‰é˜¶æ®µã€‚</li><li><strong>mvn install</strong>ï¼šæ‰§è¡Œ <code>default</code> ç”Ÿå‘½å‘¨æœŸåˆ° <code>install</code> é˜¶æ®µã€‚å®ƒä¼šå°†é¡¹ç›®æ‰“åŒ…ï¼Œå¹¶å®‰è£…åˆ°<strong>æœ¬åœ°ä»“åº“</strong>ã€‚è¿™æ ·ï¼Œå…¶ä»–æœ¬åœ°é¡¹ç›®å°±å¯ä»¥ä¾èµ–è¿™ä¸ªåŒ…ã€‚</li><li><strong>mvn deploy</strong>ï¼šæ‰§è¡Œ <code>default</code> ç”Ÿå‘½å‘¨æœŸåˆ° <code>deploy</code> é˜¶æ®µã€‚å®ƒä¼šå°†é¡¹ç›®æ‰“åŒ…ï¼Œå¹¶éƒ¨ç½²åˆ°<strong>è¿œç¨‹ä»“åº“</strong>ï¼ˆç§æœæˆ–ä¸­å¤®ä»“åº“ï¼‰ã€‚è¿™ä½¿å¾—å…¶ä»–å›¢é˜Ÿæˆå‘˜æˆ–é¡¹ç›®å¯ä»¥ä»è¿œç¨‹ä»“åº“è·å–å¹¶ä½¿ç”¨è¿™ä¸ªåŒ…ã€‚</li></ul><h4 id="4-Maven-ä¾èµ–å†²çªå¦‚ä½•è§£å†³ï¼Ÿ"><a href="#4-Maven-ä¾èµ–å†²çªå¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="4. Maven ä¾èµ–å†²çªå¦‚ä½•è§£å†³ï¼Ÿ"></a>4. Maven ä¾èµ–å†²çªå¦‚ä½•è§£å†³ï¼Ÿ</h4><ul><li><strong>å›ç­”</strong>ï¼šå½“å¤šä¸ªä¾èµ–é—´æ¥å¼•å…¥äº†åŒä¸€ä¸ªåº“çš„ä¸åŒç‰ˆæœ¬æ—¶ï¼Œå°±ä¼šå‘ç”Ÿä¾èµ–å†²çªã€‚</li><li><strong>è§£å†³ç­–ç•¥</strong>ï¼š<ul><li><strong>ä¾èµ–è°ƒè§£ï¼ˆDependency Mediationï¼‰</strong>ï¼šMaven çš„é»˜è®¤è§„åˆ™æ˜¯â€œ<strong>è·¯å¾„æœ€çŸ­è€…ä¼˜å…ˆ</strong>â€ã€‚å³åœ¨ä¾èµ–æ ‘ä¸­ï¼Œè·¯å¾„æœ€çŸ­çš„é‚£ä¸ªç‰ˆæœ¬ä¼šè¢«é€‰ä¸­ã€‚</li><li><strong>æ‰‹åŠ¨æ’é™¤ï¼ˆExclusionï¼‰</strong>ï¼šå¦‚æœé»˜è®¤è§„åˆ™ä¸èƒ½è§£å†³é—®é¢˜ï¼Œå¯ä»¥åœ¨ <code>&lt;dependency&gt;</code> æ ‡ç­¾å†…ä½¿ç”¨ <code>&lt;exclusions&gt;</code> æ ‡ç­¾æ‰‹åŠ¨æ’é™¤æœ‰é—®é¢˜çš„ä¼ é€’æ€§ä¾èµ–ã€‚</li><li><strong>æ‰‹åŠ¨å¼•å…¥ï¼ˆDeclarationï¼‰</strong>ï¼šåœ¨ <code>&lt;dependencies&gt;</code> ä¸­æ˜ç¡®å£°æ˜éœ€è¦ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚Maven çš„å¦ä¸€ä¸ªè§„åˆ™æ˜¯â€œ<strong>æœ€è¿‘å£°æ˜è€…ä¼˜å…ˆ</strong>â€ï¼Œå³å¦‚æœä¸¤ä¸ªä¾èµ–è·¯å¾„é•¿åº¦ç›¸åŒï¼Œå…ˆå£°æ˜çš„é‚£ä¸ªä¼šè¢«ä½¿ç”¨ã€‚ä½†æ›´å¥½çš„åšæ³•æ˜¯ç›´æ¥åœ¨çˆ¶ POM çš„ <code>&lt;dependencyManagement&gt;</code> ä¸­ç»Ÿä¸€ç‰ˆæœ¬ã€‚</li></ul></li></ul><p>å¥½çš„ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†æ¢³ç†ä½ æä¾›çš„è¿™ä»½å…³äºä¼šè¯æŠ€æœ¯çš„ç¬”è®°ï¼Œå¹¶æŒ‰ç…§ä½ è¦æ±‚çš„é€»è¾‘ï¼Œä»¥ä¸€ç§æ›´æ¸…æ™°ã€æ›´ä¸“ä¸šçš„é¢è¯•å›ç­”æˆ–æŠ€æœ¯è®²è§£çš„æ–¹å¼è¿›è¡Œé‡æ–°ç»„ç»‡å’Œè¡¥å……ã€‚</p><hr><h3 id="ä¸€ã€ä¼šè¯æŠ€æœ¯æ¦‚è¿°ï¼šè§£å†³-HTTP-æ— çŠ¶æ€é—®é¢˜"><a href="#ä¸€ã€ä¼šè¯æŠ€æœ¯æ¦‚è¿°ï¼šè§£å†³-HTTP-æ— çŠ¶æ€é—®é¢˜" class="headerlink" title="ä¸€ã€ä¼šè¯æŠ€æœ¯æ¦‚è¿°ï¼šè§£å†³ HTTP æ— çŠ¶æ€é—®é¢˜"></a>ä¸€ã€ä¼šè¯æŠ€æœ¯æ¦‚è¿°ï¼šè§£å†³ HTTP æ— çŠ¶æ€é—®é¢˜</h3><p>HTTP åè®®æœ¬èº«æ˜¯æ— çŠ¶æ€çš„ï¼Œå®ƒä¸è®°å¾—ä¸Šä¸€æ¬¡è¯·æ±‚çš„ä»»ä½•ä¿¡æ¯ã€‚ä¸ºäº†åœ¨å¤šæ¬¡è¯·æ±‚ä¹‹é—´å…±äº«æ•°æ®å¹¶è¯†åˆ«ç”¨æˆ·ï¼Œå¼•å…¥äº†ä¸¤ç§æ ¸å¿ƒçš„ä¼šè¯æŠ€æœ¯ï¼šå®¢æˆ·ç«¯ä¼šè¯ï¼ˆCookieï¼‰å’ŒæœåŠ¡å™¨ç«¯ä¼šè¯ï¼ˆSessionï¼‰ã€‚</p><h3 id="äºŒã€å®¢æˆ·ç«¯ä¼šè¯ï¼šCookie"><a href="#äºŒã€å®¢æˆ·ç«¯ä¼šè¯ï¼šCookie" class="headerlink" title="äºŒã€å®¢æˆ·ç«¯ä¼šè¯ï¼šCookie"></a>äºŒã€å®¢æˆ·ç«¯ä¼šè¯ï¼šCookie</h3><p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šCookie æ˜¯æœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨å¹¶å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„ä¸€å°æ®µæ–‡æœ¬ä¿¡æ¯ã€‚æµè§ˆå™¨åœ¨ä¸‹æ¬¡è®¿é—®åŒä¸€æœåŠ¡å™¨æ—¶ä¼šè‡ªåŠ¨å°†è¯¥ Cookie æºå¸¦åœ¨è¯·æ±‚ä¸­ã€‚</p><h4 id="1-å…³äº-Cookie-çš„å‡ ä¸ªå¸¸è§é—®é¢˜"><a href="#1-å…³äº-Cookie-çš„å‡ ä¸ªå¸¸è§é—®é¢˜" class="headerlink" title="1. å…³äº Cookie çš„å‡ ä¸ªå¸¸è§é—®é¢˜"></a>1. å…³äº Cookie çš„å‡ ä¸ªå¸¸è§é—®é¢˜</h4><ul><li><strong>ä¸€æ¬¡è¯·æ±‚å“åº”å¯ä»¥å‘é€å¤šä¸ª Cookie å—ï¼Ÿ</strong><ul><li><strong>å›ç­”</strong>ï¼š<strong>å¯ä»¥</strong>ã€‚æœåŠ¡å™¨å¯ä»¥åœ¨ä¸€ä¸ªå“åº”ä¸­é€šè¿‡å¤šä¸ª <code>Set-Cookie</code> å“åº”å¤´æ¥è®¾ç½®å¤šä¸ª Cookieã€‚æµè§ˆå™¨ä¼šåˆ†åˆ«å­˜å‚¨è¿™äº› Cookieï¼Œå¹¶åœ¨åç»­è¯·æ±‚ä¸­å°†å®ƒä»¬å…¨éƒ¨å‘é€ç»™æœåŠ¡å™¨ã€‚</li></ul></li><li><strong>Cookie æ”¯æŒä¸­æ–‡ä¼ è¾“å—ï¼Ÿ</strong><ul><li><strong>å›ç­”</strong>ï¼š<strong>åœ¨å¤§å¤šæ•°ç°ä»£æœåŠ¡å™¨å’Œæµè§ˆå™¨ä¸­éƒ½æ”¯æŒã€‚</strong> åœ¨æ—©æœŸçš„ Servlet å®¹å™¨ï¼ˆå¦‚ Tomcat 8.0 ä¹‹å‰ï¼‰ï¼ŒCookie ä¸èƒ½ç›´æ¥å­˜å‚¨ä¸­æ–‡ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œ URL ç¼–ç ï¼ˆ<code>URLEncoder</code>ï¼‰å’Œè§£ç ï¼ˆ<code>URLDecoder</code>ï¼‰ã€‚<strong>åœ¨ Tomcat 8.0 åŠä»¥åç‰ˆæœ¬</strong>ï¼Œå®¹å™¨é»˜è®¤æ”¯æŒ UTF-8 ç¼–ç ï¼Œå¯ä»¥ç›´æ¥å­˜å‚¨ä¸­æ–‡ã€‚</li></ul></li><li><strong>Cookie çš„è¿‡æœŸæ—¶é—´å¦‚ä½•è®¾ç½®ï¼Ÿ</strong><ul><li><strong>å›ç­”</strong>ï¼šé€šè¿‡ <code>response.addCookie(cookie)</code> æ–¹æ³•ï¼Œå¹¶è°ƒç”¨ <code>cookie.setMaxAge(int expiry)</code> æ–¹æ³•æ¥è®¾ç½®ã€‚<ul><li><code>expiry &gt; 0</code>ï¼šè¡¨ç¤º Cookie å°†è¢«<strong>æŒä¹…åŒ–</strong>åˆ°å®¢æˆ·ç«¯ç¡¬ç›˜ï¼Œæœ‰æ•ˆæœŸä¸º <code>expiry</code> ç§’ã€‚å³ä½¿æµè§ˆå™¨å…³é—­ï¼ŒCookie ä¾ç„¶å­˜åœ¨ï¼Œç›´åˆ°è¿‡æœŸã€‚</li><li><code>expiry = 0</code>ï¼šè¡¨ç¤º<strong>ç«‹å³åˆ é™¤</strong>è¯¥ Cookieã€‚å¸¸ç”¨äºé€€å‡ºç™»å½•åŠŸèƒ½ã€‚</li><li><code>expiry &lt; 0</code>ï¼š<strong>é»˜è®¤å€¼</strong>ã€‚è¡¨ç¤º Cookie åªåœ¨å†…å­˜ä¸­å­˜åœ¨ï¼Œå½“<strong>æµè§ˆå™¨å…³é—­æ—¶</strong>ï¼Œè¯¥ Cookie å°±ä¼šè¢«åˆ é™¤ã€‚</li></ul></li></ul></li></ul><h4 id="2-Cookie-çš„ç‰¹ç‚¹"><a href="#2-Cookie-çš„ç‰¹ç‚¹" class="headerlink" title="2. Cookie çš„ç‰¹ç‚¹"></a>2. Cookie çš„ç‰¹ç‚¹</h4><ul><li><strong>å­˜å‚¨ä½ç½®</strong>ï¼šå­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ã€‚</li><li><strong>å¤§å°é™åˆ¶</strong>ï¼šå•ä¸ª Cookie æœ€å¤§çº¦ 4KBã€‚</li><li><strong>æ•°é‡é™åˆ¶</strong>ï¼šä¸€ä¸ªæœåŠ¡å™¨æœ€å¤šå¯ä»¥å‘ä¸€ä¸ªæµè§ˆå™¨ä¿å­˜ 20 ä¸ª Cookieï¼Œä¸€ä¸ªæµè§ˆå™¨æœ€å¤šå¯ä»¥ä¿å­˜ 300 ä¸ª Cookieï¼ˆè¿™äº›æ˜¯æ—©æœŸçš„è§„èŒƒï¼Œç°ä»£æµè§ˆå™¨å·²æ”¾å®½ï¼Œä½†ä»æœ‰é™åˆ¶ï¼‰ã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šæ•°æ®ä»¥æ˜æ–‡å½¢å¼å­˜å‚¨ï¼Œä¸”å®¹æ˜“è¢«ç”¨æˆ·ä¿®æ”¹ï¼Œå®‰å…¨æ€§è¾ƒå·®ã€‚</li></ul><h4 id="3-Cookie-æ¡ˆä¾‹ï¼šè·å–ä¸Šä¸€æ¬¡è®¿é—®æ—¶é—´"><a href="#3-Cookie-æ¡ˆä¾‹ï¼šè·å–ä¸Šä¸€æ¬¡è®¿é—®æ—¶é—´" class="headerlink" title="3. Cookie æ¡ˆä¾‹ï¼šè·å–ä¸Šä¸€æ¬¡è®¿é—®æ—¶é—´"></a>3. Cookie æ¡ˆä¾‹ï¼šè·å–ä¸Šä¸€æ¬¡è®¿é—®æ—¶é—´</h4><p>è¿™ä¸ªæ¡ˆä¾‹æ˜¯ç»å…¸çš„ Cookie ç”¨æ³•ã€‚</p><ul><li><strong>é¦–æ¬¡è®¿é—®</strong>ï¼šæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚ï¼Œåˆ¤æ–­ Cookie ä¸­æ²¡æœ‰è®°å½•ä¸Šæ¬¡è®¿é—®æ—¶é—´ã€‚æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„ Cookieï¼Œå­˜å‚¨å½“å‰æ—¶é—´ï¼Œå¹¶å°†å…¶å‘é€ç»™æµè§ˆå™¨ã€‚</li><li><strong>å†æ¬¡è®¿é—®</strong>ï¼šæµè§ˆå™¨è‡ªåŠ¨å°†ä¸Šæ¬¡å­˜å‚¨çš„ Cookie å‘é€ç»™æœåŠ¡å™¨ã€‚æœåŠ¡å™¨è¯»å– Cookieï¼Œè·å–ä¸Šæ¬¡è®¿é—®æ—¶é—´ï¼Œå¹¶å°†å…¶æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚ç„¶åï¼ŒæœåŠ¡å™¨å¯ä»¥æ›´æ–° Cookie çš„æ—¶é—´ï¼Œå†æ¬¡å‘é€ç»™æµè§ˆå™¨ã€‚</li></ul><h3 id="ä¸‰ã€æœåŠ¡å™¨ç«¯ä¼šè¯ï¼šHttpSession"><a href="#ä¸‰ã€æœåŠ¡å™¨ç«¯ä¼šè¯ï¼šHttpSession" class="headerlink" title="ä¸‰ã€æœåŠ¡å™¨ç«¯ä¼šè¯ï¼šHttpSession"></a>ä¸‰ã€æœåŠ¡å™¨ç«¯ä¼šè¯ï¼šHttpSession</h3><p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šSession æ˜¯æœåŠ¡å™¨ç«¯ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ›å»ºçš„ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºåœ¨ä¸€æ¬¡ä¼šè¯çš„å¤šä¸ªè¯·æ±‚ä¹‹é—´å­˜å‚¨å’Œå…±äº«æ•°æ®ã€‚</p><h4 id="1-Session-çš„å¿«é€Ÿä½¿ç”¨"><a href="#1-Session-çš„å¿«é€Ÿä½¿ç”¨" class="headerlink" title="1. Session çš„å¿«é€Ÿä½¿ç”¨"></a>1. Session çš„å¿«é€Ÿä½¿ç”¨</h4><ul><li><strong>è·å–å¯¹è±¡</strong>ï¼šé€šè¿‡ <code>HttpServletRequest</code> å¯¹è±¡çš„ <code>getSession()</code> æ–¹æ³•æ¥è·å– <code>HttpSession</code> å¯¹è±¡ã€‚</li><li><strong>ä½¿ç”¨å¯¹è±¡ï¼ˆåŸŸå¯¹è±¡ï¼‰</strong>ï¼šSession æ˜¯ä¸€ä¸ª<strong>åŸŸå¯¹è±¡</strong>ï¼Œæä¾›äº†ä»¥ä¸‹æ–¹æ³•ï¼š<ul><li><code>void setAttribute(String name, Object value)</code>ï¼šå°†æ•°æ®ä»¥é”®å€¼å¯¹å½¢å¼å­˜å‚¨åˆ° Session ä¸­ã€‚</li><li><code>Object getAttribute(String name)</code>ï¼šæ ¹æ®é”®åè·å–å­˜å‚¨çš„æ•°æ®ã€‚</li><li><code>void removeAttribute(String name)</code>ï¼šæ ¹æ®é”®ååˆ é™¤å­˜å‚¨çš„æ•°æ®ã€‚</li></ul></li></ul><h4 id="2-Session-çš„å¤±æ•ˆæ—¶é—´"><a href="#2-Session-çš„å¤±æ•ˆæ—¶é—´" class="headerlink" title="2. Session çš„å¤±æ•ˆæ—¶é—´"></a>2. Session çš„å¤±æ•ˆæ—¶é—´</h4><ul><li><p><strong>æœåŠ¡å™¨å…³é—­</strong>ï¼šå½“æœåŠ¡å™¨å…³é—­æ—¶ï¼Œæ‰€æœ‰ Session å¯¹è±¡éƒ½ä¼šè¢«é”€æ¯ã€‚</p></li><li><p><strong>æ‰‹åŠ¨å¤±æ•ˆ</strong>ï¼šè°ƒç”¨ <code>session.invalidate()</code> æ–¹æ³•ï¼Œå¯ä»¥ç«‹å³å¼ºåˆ¶ Session å¤±æ•ˆã€‚å¸¸ç”¨äºç”¨æˆ·é€€å‡ºç™»å½•ã€‚</p></li><li><p><strong>é»˜è®¤å¤±æ•ˆæ—¶é—´</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒSession æœ‰ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œé€šå¸¸æ˜¯ 30 åˆ†é’Ÿã€‚å¦‚æœå®¢æˆ·ç«¯åœ¨ 30 åˆ†é’Ÿå†…æ²¡æœ‰å‘æœåŠ¡å™¨å‘é€ä»»ä½•è¯·æ±‚ï¼ŒSession å°±ä¼šè‡ªåŠ¨å¤±æ•ˆã€‚è¿™ä¸ªæ—¶é—´å¯ä»¥åœ¨ <code>web.xml</code> ä¸­é…ç½®ã€‚</p></li><li><p>å¯¹çš„ ğŸ‘ï¼Œåœ¨ **Java Web åº”ç”¨ï¼ˆServlet å®¹å™¨ï¼Œæ¯”å¦‚ Tomcatï¼‰**é‡Œï¼Œ<code>Session</code> çš„é»˜è®¤å¤±æ•ˆæ—¶é—´é€šå¸¸æ˜¯ <strong>30 åˆ†é’Ÿ</strong>ã€‚</p><p>è¦ä¿®æ”¹å®ƒï¼Œå¯ä»¥åœ¨ <code>web.xml</code> ä¸­é…ç½® <code>&lt;session-config&gt;</code>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- session è¿‡æœŸæ—¶é—´è®¾ç½®ï¼ˆå•ä½ï¼šåˆ†é’Ÿï¼‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>60<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p>ğŸ“Œ è¯´æ˜ï¼š</p><ul><li><code>60</code> è¡¨ç¤º Session åœ¨ <strong>60 åˆ†é’Ÿ</strong>æ— è¯·æ±‚æ—¶ä¼šè‡ªåŠ¨å¤±æ•ˆã€‚</li><li>é»˜è®¤å€¼æ˜¯ <strong>30</strong> åˆ†é’Ÿï¼Œå¦‚æœä¸é…ç½®ï¼Œå°±èµ°é»˜è®¤ã€‚</li><li>è¿™ä¸ªé…ç½®å¯¹æ‰€æœ‰ç”¨æˆ· Session éƒ½ç”Ÿæ•ˆã€‚</li></ul><h3 id="ğŸ”§-åœ¨ä»£ç é‡ŒåŠ¨æ€è®¾ç½®ï¼ˆå•ä¸ª-Sessionï¼‰"><a href="#ğŸ”§-åœ¨ä»£ç é‡ŒåŠ¨æ€è®¾ç½®ï¼ˆå•ä¸ª-Sessionï¼‰" class="headerlink" title="ğŸ”§ åœ¨ä»£ç é‡ŒåŠ¨æ€è®¾ç½®ï¼ˆå•ä¸ª Sessionï¼‰"></a>ğŸ”§ åœ¨ä»£ç é‡ŒåŠ¨æ€è®¾ç½®ï¼ˆå•ä¸ª Sessionï¼‰</h3><p>é™¤äº†åœ¨ <code>web.xml</code> é‡Œå…¨å±€é…ç½®ï¼Œè¿˜å¯ä»¥é’ˆå¯¹æŸä¸ªç”¨æˆ·çš„ Session åŠ¨æ€ä¿®æ”¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">session.setMaxInactiveInterval(<span class="number">120</span> * <span class="number">60</span>); <span class="comment">// å•ä½ï¼šç§’ï¼Œè¿™é‡Œæ˜¯ 2 å°æ—¶</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="ğŸ”§-ç‰¹æ®Šæƒ…å†µ"><a href="#ğŸ”§-ç‰¹æ®Šæƒ…å†µ" class="headerlink" title="ğŸ”§ ç‰¹æ®Šæƒ…å†µ"></a>ğŸ”§ ç‰¹æ®Šæƒ…å†µ</h3><ul><li>å¦‚æœ <code>session-timeout</code> è®¾ç½®ä¸º <strong>0</strong> â†’ Session æ°¸ä¸è¶…æ—¶ï¼ˆå±é™© âš ï¸ï¼Œå®¹æ˜“å¯¼è‡´å†…å­˜æ³„éœ²ï¼‰ã€‚</li><li>å¦‚æœè®¾ç½®ä¸º <strong>è´Ÿæ•°</strong>ï¼ˆå¦‚ -1ï¼‰ â†’ è¡¨ç¤º Session ä»…åœ¨æµè§ˆå™¨å…³é—­æ—¶é”€æ¯ï¼ˆæœ‰äº›å®¹å™¨æ”¯æŒï¼Œæœ‰äº›ä¸æ”¯æŒã€‚</li></ul><h4 id="3-Session-çš„ç‰¹ç‚¹"><a href="#3-Session-çš„ç‰¹ç‚¹" class="headerlink" title="3. Session çš„ç‰¹ç‚¹"></a>3. Session çš„ç‰¹ç‚¹</h4><ul><li><strong>å­˜å‚¨ä½ç½®</strong>ï¼šå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ã€‚</li><li><strong>å¤§å°é™åˆ¶</strong>ï¼šå¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹ã€ä»»æ„å¤§å°çš„æ•°æ®ï¼ˆå—é™äºæœåŠ¡å™¨å†…å­˜ï¼‰ã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šç”±äºæ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯åªä¼ é€’ä¸€ä¸ª Session IDï¼Œå®‰å…¨æ€§ç›¸å¯¹è¾ƒé«˜ã€‚</li></ul><h4 id="4-é¢è¯•é¢˜ï¼šCookie-å’Œ-Session-çš„åŒºåˆ«ï¼Ÿ"><a href="#4-é¢è¯•é¢˜ï¼šCookie-å’Œ-Session-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="4. é¢è¯•é¢˜ï¼šCookie å’Œ Session çš„åŒºåˆ«ï¼Ÿ"></a>4. é¢è¯•é¢˜ï¼šCookie å’Œ Session çš„åŒºåˆ«ï¼Ÿ</h4><ul><li><strong>å­˜å‚¨ä½ç½®</strong>ï¼šCookie å­˜å‚¨åœ¨<strong>å®¢æˆ·ç«¯</strong>ï¼ŒSession å­˜å‚¨åœ¨<strong>æœåŠ¡å™¨ç«¯</strong>ã€‚</li><li><strong>æ•°æ®å¤§å°</strong>ï¼šCookie çš„å¤§å°<strong>æœ‰é™åˆ¶</strong>ï¼ˆçº¦ 4KBï¼‰ï¼ŒSession çš„å¤§å°<strong>æ²¡æœ‰é™åˆ¶</strong>ã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šSession <strong>ç›¸å¯¹å®‰å…¨</strong>ï¼ŒCookie <strong>ç›¸å¯¹ä¸å®‰å…¨</strong>ã€‚å› ä¸º Session ID éš¾ä»¥è¢«çŒœæµ‹ï¼Œè€Œ Cookie å­˜å‚¨çš„æ•°æ®æ˜¯æ˜æ–‡ã€‚</li><li><strong>æœåŠ¡å™¨å¼€é”€</strong>ï¼šSession ä¼šå ç”¨æœåŠ¡å™¨å†…å­˜ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼›è€Œ Cookie ä¸å ç”¨æœåŠ¡å™¨èµ„æºã€‚</li></ul><h3 id="å››ã€Servlet-ä¸‰å¤§åŸŸå¯¹è±¡çš„å…³ç³»ï¼ˆæŒ‰ç…§ä½ çš„é€»è¾‘ï¼‰"><a href="#å››ã€Servlet-ä¸‰å¤§åŸŸå¯¹è±¡çš„å…³ç³»ï¼ˆæŒ‰ç…§ä½ çš„é€»è¾‘ï¼‰" class="headerlink" title="å››ã€Servlet ä¸‰å¤§åŸŸå¯¹è±¡çš„å…³ç³»ï¼ˆæŒ‰ç…§ä½ çš„é€»è¾‘ï¼‰"></a>å››ã€Servlet ä¸‰å¤§åŸŸå¯¹è±¡çš„å…³ç³»ï¼ˆæŒ‰ç…§ä½ çš„é€»è¾‘ï¼‰</h3><p><strong>åŸŸå¯¹è±¡</strong>ï¼ˆScope Objectï¼‰æ˜¯æŒ‡é‚£äº›å¯ä»¥ç”¨æ¥åœ¨ä¸åŒç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®çš„å¯¹è±¡ã€‚Servlet è§„èŒƒæä¾›äº†ä¸‰ä¸ªè¿™æ ·çš„å¯¹è±¡ï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸä¸åŒï¼Œä»è€Œå†³å®šäº†æ•°æ®çš„å…±äº«èŒƒå›´ã€‚</p><ul><li><strong>request åŸŸ</strong>ï¼šç”Ÿå‘½å‘¨æœŸæœ€çŸ­ã€‚æ•°æ®åªèƒ½åœ¨<strong>ä¸€æ¬¡è¯·æ±‚-å“åº”</strong>çš„å‘¨æœŸå†…å…±äº«ã€‚å³ä½¿è¯·æ±‚è¢«è½¬å‘ï¼ˆforwardï¼‰ï¼Œæ•°æ®ä¹Ÿä¾ç„¶å¯è§ã€‚</li><li><strong>session åŸŸ</strong>ï¼šç”Ÿå‘½å‘¨æœŸä¸­ç­‰ã€‚æ•°æ®å¯ä»¥åœ¨<strong>ä¸€æ¬¡ä¼šè¯</strong>ï¼ˆå¤šä¸ªè¯·æ±‚ï¼‰ä¹‹é—´å…±äº«ã€‚åªè¦æµè§ˆå™¨ä¸å…³é—­ï¼Œä¸” Session æœªè¶…æ—¶æˆ–å¤±æ•ˆï¼Œæ•°æ®å°±ä¸€ç›´å­˜åœ¨ã€‚</li><li><strong>servletContext åŸŸ</strong>ï¼šç”Ÿå‘½å‘¨æœŸæœ€é•¿ã€‚æ•°æ®å¯ä»¥åœ¨<strong>æ•´ä¸ª Web åº”ç”¨</strong>ä¸­å…±äº«ã€‚ä» Web åº”ç”¨å¯åŠ¨åˆ°å…³é—­ï¼Œæ•°æ®éƒ½ä¸€ç›´å­˜åœ¨ã€‚</li></ul><p><strong>ä¸‰å¤§åŸŸå¯¹è±¡ä¹‹é—´çš„å…³ç³»æ˜¯åŒ…å«å…³ç³»ï¼Œå³ request &lt; session &lt; servletContextã€‚</strong></p><ul><li><strong>request åŒ…å«äº session</strong>ï¼šä¸€ä¸ª Session ä¸­å¯ä»¥æœ‰å¤šä¸ªè¯·æ±‚ã€‚</li><li><strong>session åŒ…å«äº servletContext</strong>ï¼šä¸€ä¸ª Web åº”ç”¨ï¼ˆServletContextï¼‰ä¸­å¯ä»¥æœ‰å¤šä¸ª Sessionã€‚</li></ul><p>è¿™ä¸ªå…³ç³»å›¾æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒä»¬å„è‡ªçš„ç”Ÿå‘½å‘¨æœŸå’Œæ•°æ®å…±äº«èŒƒå›´ï¼Œæ˜¯ç†è§£ Servlet åŸŸå¯¹è±¡çš„å…³é”®ã€‚</p><p>å•Šå“ˆï½ä½ è¿™ä¸ªåœºæ™¯å°±æ˜¯ <strong>åŒä¸€ä¸ªåº“çš„ä¸¤ä¸ªç‰ˆæœ¬å¿…é¡»å…±å­˜</strong>ï¼Œå…¸å‹çš„ â€œæ·±åº¦ JAR hellâ€ ğŸš¨ã€‚<br> æ¯”å¦‚ï¼š</p><ul><li>ä½ çš„ç³»ç»Ÿç”¨åˆ° <strong>è€ç‰ˆæœ¬ log4j</strong>ï¼Œ</li><li>ä½†æŸä¸ªç¬¬ä¸‰æ–¹åº“ç¡¬æ€§ä¾èµ– <strong>æ–°ç‰ˆæœ¬ log4j</strong>ã€‚</li></ul><p>è¿™æ—¶å€™å¦‚æœæ”¾åˆ°åŒä¸€ä¸ª classpath é‡Œï¼Œè‚¯å®šä¼šå†²çªã€‚è§£å†³æ€è·¯ä¸»è¦æœ‰ä¸‰ç±»ï¼š</p><hr><h2 id="âœ…-ä¸¤ä¸ªç‰ˆæœ¬-JAR-å…±å­˜çš„è§£å†³æ–¹æ¡ˆ"><a href="#âœ…-ä¸¤ä¸ªç‰ˆæœ¬-JAR-å…±å­˜çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="âœ… ä¸¤ä¸ªç‰ˆæœ¬ JAR å…±å­˜çš„è§£å†³æ–¹æ¡ˆ"></a>âœ… ä¸¤ä¸ªç‰ˆæœ¬ JAR å…±å­˜çš„è§£å†³æ–¹æ¡ˆ</h2><h3 id="1-ClassLoader-éš”ç¦»ï¼ˆæ¨èæ–¹å¼ï¼‰"><a href="#1-ClassLoader-éš”ç¦»ï¼ˆæ¨èæ–¹å¼ï¼‰" class="headerlink" title="1. ClassLoader éš”ç¦»ï¼ˆæ¨èæ–¹å¼ï¼‰"></a>1. <strong>ClassLoader éš”ç¦»</strong>ï¼ˆæ¨èæ–¹å¼ï¼‰</h3><p>åˆ©ç”¨ <strong>ä¸åŒçš„ç±»åŠ è½½å™¨</strong> æ¥éš”ç¦»ä¸¤ä¸ªç‰ˆæœ¬çš„ä¾èµ–ï¼Œè®©å®ƒä»¬äº’ä¸å¹²æ‰°ã€‚</p><ul><li><p><strong>Web å®¹å™¨éš”ç¦»</strong>ï¼š</p><ul><li>æŠŠä¸€ä¸ªç‰ˆæœ¬æ”¾åœ¨ <code>WEB-INF/lib</code>ï¼Œå¦ä¸€ä¸ªæ”¾åœ¨å…¨å±€ <code>lib/ext</code>ã€‚</li><li>é€šè¿‡ parent-first &#x2F; parent-last ç­–ç•¥æ§åˆ¶åŠ è½½ã€‚</li></ul></li><li><p><strong>è‡ªå®šä¹‰ ClassLoader</strong>ï¼š</p><ul><li><p>ç”¨ <code>URLClassLoader</code> æŒ‡å®šä¸åŒç‰ˆæœ¬ JAR çš„è·¯å¾„ã€‚</p></li><li><p>å“ªä¸ªæ¨¡å—éœ€è¦å“ªä¸ªç‰ˆæœ¬ï¼Œå°±ç”¨å“ªä¸ª ClassLoaderã€‚</p></li><li><p>ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">URLClassLoader loaderV1 = new URLClassLoader(</span><br><span class="line">    new URL[]&#123; new File(&quot;lib/lib-old.jar&quot;).toURI().toURL() &#125;,</span><br><span class="line">    null // ä¸å§”æ‰˜çˆ¶åŠ è½½å™¨</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">URLClassLoader loaderV2 = new URLClassLoader(</span><br><span class="line">    new URL[]&#123; new File(&quot;lib/lib-new.jar&quot;).toURI().toURL() &#125;,</span><br><span class="line">    null</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">Class&lt;?&gt; clazz1 = loaderV1.loadClass(&quot;com.example.MyClass&quot;);</span><br><span class="line">Class&lt;?&gt; clazz2 = loaderV2.loadClass(&quot;com.example.MyClass&quot;);</span><br></pre></td></tr></table></figure></li></ul></li></ul><p>ğŸ‘‰ OSGiã€Spring Boot çš„ <strong>ClassLoader å±‚çº§</strong>å°±æ˜¯ç”¨è¿™ç§æ–¹æ³•è§£å†³å¤šç‰ˆæœ¬ä¾èµ–çš„ã€‚</p><hr><h3 id="2-åŒ…é‡å®šä½ï¼ˆShading-Relocationï¼‰"><a href="#2-åŒ…é‡å®šä½ï¼ˆShading-Relocationï¼‰" class="headerlink" title="2. åŒ…é‡å®šä½ï¼ˆShading &#x2F; Relocationï¼‰"></a>2. <strong>åŒ…é‡å®šä½ï¼ˆShading &#x2F; Relocationï¼‰</strong></h3><p>æŠŠå…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬çš„åŒ…è·¯å¾„ <strong>æ”¹å</strong>ï¼Œè®© JVM è®¤ä¸ºå®ƒæ˜¯å®Œå…¨ä¸åŒçš„ç±»åº“ã€‚</p><ul><li><p>å·¥å…·ï¼š</p><ul><li><code>jarjar</code></li><li>Maven Shadeï¼ˆå³ä½¿ä½ ä¸ç”¨ Mavenï¼Œä¹Ÿå¯ä»¥å•ç‹¬è·‘æ’ä»¶ï¼‰</li><li>Gradle Shadow</li></ul></li><li><p>åŸç†ï¼šè‡ªåŠ¨æŠŠ <code>org.apache.commons</code> æ”¹æˆ <code>myproject.shaded.org.apache.commons</code>ã€‚</p></li><li><p>ç¤ºä¾‹ï¼ˆJarJar è§„åˆ™ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rule org.apache.log4j.** com.myapp.shaded.log4j.@1</span><br></pre></td></tr></table></figure></li></ul><p>è¿™æ ·ï¼Œé¡¹ç›®å°±èƒ½åŒæ—¶ç”¨ <code>log4j-1.2</code> å’Œ <code>log4j-2.x</code>ã€‚</p><hr><h3 id="3-æœåŠ¡è§£è€¦-æ¨¡å—åŒ–"><a href="#3-æœåŠ¡è§£è€¦-æ¨¡å—åŒ–" class="headerlink" title="3. æœåŠ¡è§£è€¦ &#x2F; æ¨¡å—åŒ–"></a>3. <strong>æœåŠ¡è§£è€¦ &#x2F; æ¨¡å—åŒ–</strong></h3><p>å¦‚æœä¸¤ä¸ªç‰ˆæœ¬éƒ½è¦åœ¨ <strong>åŒä¸€ä¸ª JVM é‡Œç”¨</strong>ï¼Œä½† ClassLoader å¤ªéº»çƒ¦ï¼š</p><ul><li><strong>æ‹†åˆ†æˆå¾®æœåŠ¡ &#x2F; å­è¿›ç¨‹</strong>ï¼Œè®©ä¸åŒè¿›ç¨‹ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ä¾èµ–ã€‚</li><li>æˆ–è€…åœ¨ <strong>Java 9+ æ¨¡å—ç³»ç»Ÿ (JPMS)</strong> ä¸‹ï¼Œç»™ä¸åŒæ¨¡å—å£°æ˜ä¸åŒä¾èµ–ï¼Œé¿å…ç›´æ¥å†²çªã€‚</li></ul><hr><h2 id="ğŸš€-å®é™…å»ºè®®"><a href="#ğŸš€-å®é™…å»ºè®®" class="headerlink" title="ğŸš€ å®é™…å»ºè®®"></a>ğŸš€ å®é™…å»ºè®®</h2><ul><li>å¦‚æœä½ æ˜¯ <strong>è‡ªå·±å¼€å‘çš„é¡¹ç›®</strong> â†’ ç”¨ <strong>åŒ…é‡å®šä½</strong> æ¯”è¾ƒç®€å•ã€‚</li><li>å¦‚æœæ˜¯ <strong>æ’ä»¶å¼ç³»ç»Ÿ &#x2F; å®¹å™¨è¿è¡Œ</strong> â†’ ç”¨ <strong>ClassLoader éš”ç¦»</strong>ã€‚</li><li>å¦‚æœæ˜¯ <strong>é‡é‡çº§ç³»ç»Ÿ</strong>ï¼ˆæ¯”å¦‚éœ€è¦ä¸åŒç‰ˆæœ¬çš„ JDBC é©±åŠ¨ï¼‰ â†’ æ‹†è¿›ç¨‹æ›´å¹²å‡€ã€‚</li></ul><hr><p>è¦ä¸è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ª <strong>æœ€å°å¯è¿è¡Œçš„ Java Demo</strong>ï¼ˆä¸¤ä¸ªç‰ˆæœ¬ JAR åŒæ—¶è¿è¡Œï¼Œé€šè¿‡ ClassLoader éš”ç¦»ï¼‰ï¼Ÿè¿™æ ·ä½ å¯ä»¥ç›´æ¥è·‘èµ·æ¥çœ‹çœ‹æ•ˆæœã€‚</p><p>å¥½çš„ï¼Œæˆ‘å°†æ ¹æ®æ‚¨æä¾›çš„è¿™ä»½è¯¦å°½çš„ç¬”è®°ï¼Œä»¥æ›´ä¸“ä¸šã€æ›´ç³»ç»Ÿçš„æ–¹å¼ï¼Œå¯¹å…¶è¿›è¡Œé‡æ–°ç»„ç»‡ã€è¡¥å……å’Œæ·±å…¥è§£æï¼Œä½¿å…¶æˆä¸ºä¸€ä»½é«˜è´¨é‡çš„æŠ€æœ¯è®²è§£æˆ–é¢è¯•å›ç­”ã€‚</p><hr><h3 id="ä¸€ã€CSS-é€‰æ‹©å™¨æ¦‚è¿°ï¼šç²¾å‡†å®šä½ç½‘é¡µå…ƒç´ "><a href="#ä¸€ã€CSS-é€‰æ‹©å™¨æ¦‚è¿°ï¼šç²¾å‡†å®šä½ç½‘é¡µå…ƒç´ " class="headerlink" title="ä¸€ã€CSS é€‰æ‹©å™¨æ¦‚è¿°ï¼šç²¾å‡†å®šä½ç½‘é¡µå…ƒç´ "></a>ä¸€ã€CSS é€‰æ‹©å™¨æ¦‚è¿°ï¼šç²¾å‡†å®šä½ç½‘é¡µå…ƒç´ </h3><p><strong>é€‰æ‹©å™¨</strong>æ˜¯ CSS çš„æ ¸å¿ƒï¼Œå®ƒç”¨äº<strong>ç²¾ç¡®åœ°é€‰æ‹© HTML æ–‡æ¡£ä¸­çš„å…ƒç´ </strong>ï¼Œå¹¶ä¸ºå…¶åº”ç”¨æ ·å¼ã€‚æŒæ¡ä¸åŒç±»å‹çš„é€‰æ‹©å™¨åŠå…¶ç»„åˆï¼Œæ˜¯é«˜æ•ˆç¼–å†™ CSS ä»£ç çš„å…³é”®ã€‚</p><h3 id="äºŒã€åŸºç¡€é€‰æ‹©å™¨-Basic-Selectors"><a href="#äºŒã€åŸºç¡€é€‰æ‹©å™¨-Basic-Selectors" class="headerlink" title="äºŒã€åŸºç¡€é€‰æ‹©å™¨ (Basic Selectors)"></a>äºŒã€åŸºç¡€é€‰æ‹©å™¨ (Basic Selectors)</h3><p>åŸºç¡€é€‰æ‹©å™¨ç”¨äºæ ¹æ®æœ€åŸºæœ¬çš„å±æ€§ï¼ˆæ ‡ç­¾ã€ç±»ã€IDï¼‰æ¥é€‰æ‹©å…ƒç´ ã€‚</p><h4 id="1-æ ‡ç­¾é€‰æ‹©å™¨-Type-Selector"><a href="#1-æ ‡ç­¾é€‰æ‹©å™¨-Type-Selector" class="headerlink" title="1. æ ‡ç­¾é€‰æ‹©å™¨ (Type Selector)"></a>1. æ ‡ç­¾é€‰æ‹©å™¨ (Type Selector)</h4><ul><li><p><strong>åŸç†</strong>ï¼šæ ¹æ®å…ƒç´ çš„<strong>æ ‡ç­¾åç§°</strong>æ¥åŒ¹é…ã€‚</p></li><li><p><strong>ä¼˜ç‚¹</strong>ï¼šç®€å•ã€ç›´æ¥ï¼Œå¯ä»¥ä¸€æ¬¡æ€§é€‰ä¸­æ‰€æœ‰åŒç±»å‹çš„å…ƒç´ ã€‚</p></li><li><p><strong>ç¼ºç‚¹</strong>ï¼šè¿‡äºç¬¼ç»Ÿï¼Œæ— æ³•å¯¹ä¸ªåˆ«å…ƒç´ è¿›è¡Œç²¾ç¡®æ§åˆ¶ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p>CSS</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div &#123; color: red; &#125; /* æ‰€æœ‰&lt;div&gt;æ ‡ç­¾çš„å­—ä½“é¢œè‰²éƒ½ä¸ºçº¢è‰² */</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-ç±»é€‰æ‹©å™¨-Class-Selector-1"><a href="#2-ç±»é€‰æ‹©å™¨-Class-Selector-1" class="headerlink" title="2. ç±»é€‰æ‹©å™¨ (Class Selector)"></a>2. ç±»é€‰æ‹©å™¨ (Class Selector)</h4><ul><li><p><strong>åŸç†</strong>ï¼šæ ¹æ®å…ƒç´ çš„ <code>class</code> å±æ€§å€¼æ¥åŒ¹é…ã€‚</p></li><li><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li><strong>é«˜åº¦å¤ç”¨</strong>ï¼šå¯ä»¥åœ¨å¤šä¸ªå…ƒç´ ä¸Šä½¿ç”¨åŒä¸€ä¸ªç±»åã€‚</li><li><strong>çµæ´»</strong>ï¼šä¸€ä¸ªå…ƒç´ å¯ä»¥æ‹¥æœ‰å¤šä¸ªç±»åï¼Œç”¨ç©ºæ ¼åˆ†éš”ã€‚</li></ul></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p>CSS</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.cl1 &#123; color: red; &#125; /* æ‰€æœ‰classå±æ€§åŒ…å«cl1çš„å…ƒç´ ï¼Œå­—ä½“é¢œè‰²ä¸ºçº¢è‰² */</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-ID-é€‰æ‹©å™¨-ID-Selector-1"><a href="#3-ID-é€‰æ‹©å™¨-ID-Selector-1" class="headerlink" title="3. ID é€‰æ‹©å™¨ (ID Selector)"></a>3. ID é€‰æ‹©å™¨ (ID Selector)</h4><ul><li><p><strong>åŸç†</strong>ï¼šæ ¹æ®å…ƒç´ çš„ <code>id</code> å±æ€§å€¼æ¥åŒ¹é…ã€‚</p></li><li><p><strong>ä¼˜ç‚¹</strong>ï¼š<strong>å”¯ä¸€æ€§</strong>ï¼Œç²¾ç¡®åœ°é€‰ä¸­æ–‡æ¡£ä¸­å”¯ä¸€çš„å…ƒç´ ã€‚</p></li><li><p><strong>ç¼ºç‚¹</strong>ï¼šä¸å…·å¤ç”¨æ€§ï¼Œä¸€ä¸ª ID åœ¨æ–‡æ¡£ä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p>CSS</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#p1 &#123; color: red; &#125; /* idä¸ºp1çš„å”¯ä¸€å…ƒç´ ï¼Œå­—ä½“é¢œè‰²ä¸ºçº¢è‰² */</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-é€šé…ç¬¦é€‰æ‹©å™¨-Universal-Selector"><a href="#4-é€šé…ç¬¦é€‰æ‹©å™¨-Universal-Selector" class="headerlink" title="4. é€šé…ç¬¦é€‰æ‹©å™¨ (Universal Selector)"></a>4. é€šé…ç¬¦é€‰æ‹©å™¨ (Universal Selector)</h4><ul><li><p><strong>åŸç†</strong>ï¼šåŒ¹é…æ–‡æ¡£ä¸­<strong>æ‰€æœ‰</strong>çš„å…ƒç´ ã€‚</p></li><li><p><strong>ä¼˜ç‚¹</strong>ï¼šå¯ä»¥å¿«é€Ÿè®¾ç½®å…¨å±€æ ·å¼ï¼Œå¸¸ç”¨äºé‡ç½®æµè§ˆå™¨é»˜è®¤æ ·å¼ã€‚</p></li><li><p><strong>ç¼ºç‚¹</strong>ï¼šæ€§èƒ½å¼€é”€å¤§ï¼Œå› ä¸ºæµè§ˆå™¨éœ€è¦éå†æ‰€æœ‰å…ƒç´ ï¼Œåº”è°¨æ…ä½¿ç”¨ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p>CSS</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* &#123; margin: 0; padding: 0; &#125; /* æ¸…é™¤æ‰€æœ‰å…ƒç´ çš„å†…å¤–è¾¹è· */</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="ä¸‰ã€ç»„åˆé€‰æ‹©å™¨-Combinators"><a href="#ä¸‰ã€ç»„åˆé€‰æ‹©å™¨-Combinators" class="headerlink" title="ä¸‰ã€ç»„åˆé€‰æ‹©å™¨ (Combinators)"></a>ä¸‰ã€ç»„åˆé€‰æ‹©å™¨ (Combinators)</h3><p>ç»„åˆé€‰æ‹©å™¨é€šè¿‡ç¬¦å·è¿æ¥å¤šä¸ªé€‰æ‹©å™¨ï¼Œæ ¹æ®å…ƒç´ ä¹‹é—´çš„å…³ç³»æ¥åŒ¹é…ã€‚</p><h4 id="1-äº¤é›†é€‰æ‹©å™¨-Intersection-Selector"><a href="#1-äº¤é›†é€‰æ‹©å™¨-Intersection-Selector" class="headerlink" title="1. äº¤é›†é€‰æ‹©å™¨ (Intersection Selector)"></a>1. äº¤é›†é€‰æ‹©å™¨ (Intersection Selector)</h4><ul><li><p><strong>åŸç†</strong>ï¼šåŒæ—¶æ»¡è¶³å¤šä¸ªé€‰æ‹©å™¨æ¡ä»¶çš„å…ƒç´ ã€‚</p></li><li><p><strong>è¯­æ³•</strong>ï¼š<code>selector1selector2 &#123; ... &#125;</code>ï¼Œä¸­é—´<strong>æ²¡æœ‰ç©ºæ ¼</strong>ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p>CSS</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div.cl1 &#123; color: red; &#125; /* æ—¢æ˜¯&lt;div&gt;æ ‡ç­¾ï¼Œåˆæ‹¥æœ‰cl1è¿™ä¸ªclassçš„å…ƒç´  */</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-å¹¶é›†é€‰æ‹©å™¨-Union-Selector"><a href="#2-å¹¶é›†é€‰æ‹©å™¨-Union-Selector" class="headerlink" title="2. å¹¶é›†é€‰æ‹©å™¨ (Union Selector)"></a>2. å¹¶é›†é€‰æ‹©å™¨ (Union Selector)</h4><ul><li><p><strong>åŸç†</strong>ï¼šåŒ¹é…æ‰€æœ‰æ»¡è¶³å…¶ä¸­ä»»æ„ä¸€ä¸ªé€‰æ‹©å™¨æ¡ä»¶çš„å…ƒç´ ã€‚</p></li><li><p><strong>è¯­æ³•</strong>ï¼š<code>selector1, selector2 &#123; ... &#125;</code>ï¼Œä»¥<strong>é€—å·</strong>åˆ†éš”ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p>CSS</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a, p &#123; color: red; &#125; /* æ‰€æœ‰&lt;a&gt;æ ‡ç­¾å’Œæ‰€æœ‰&lt;p&gt;æ ‡ç­¾çš„å­—ä½“é¢œè‰²éƒ½ä¸ºçº¢è‰² */</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-å­é€‰æ‹©å™¨-Child-Selector"><a href="#3-å­é€‰æ‹©å™¨-Child-Selector" class="headerlink" title="3. å­é€‰æ‹©å™¨ (Child Selector)"></a>3. å­é€‰æ‹©å™¨ (Child Selector)</h4><ul><li><p><strong>åŸç†</strong>ï¼šåŒ¹é…<strong>ç›´æ¥</strong>å­å…ƒç´ ã€‚</p></li><li><p><strong>è¯­æ³•</strong>ï¼š<code>parent &gt; child &#123; ... &#125;</code>ï¼Œä»¥ <code>&gt;</code> ç¬¦å·åˆ†éš”ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p>CSS</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#outer &gt; span &#123; color: red; &#125; /* åªé€‰ä¸­idä¸ºouterçš„&lt;div&gt;çš„ç›´æ¥å­å…ƒç´ &lt;span&gt; */</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-åä»£é€‰æ‹©å™¨-Descendant-Selector"><a href="#4-åä»£é€‰æ‹©å™¨-Descendant-Selector" class="headerlink" title="4. åä»£é€‰æ‹©å™¨ (Descendant Selector)"></a>4. åä»£é€‰æ‹©å™¨ (Descendant Selector)</h4><ul><li><p><strong>åŸç†</strong>ï¼šåŒ¹é…æ‰€æœ‰ä½äºç¥–å…ˆå…ƒç´ å†…éƒ¨çš„<strong>æ‰€æœ‰åä»£</strong>å…ƒç´ ã€‚</p></li><li><p><strong>è¯­æ³•</strong>ï¼š<code>ancestor descendant &#123; ... &#125;</code>ï¼Œä»¥<strong>ç©ºæ ¼</strong>åˆ†éš”ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p>CSS</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#outer span &#123; color: red; &#125; /* é€‰ä¸­idä¸ºouterçš„&lt;div&gt;å†…éƒ¨çš„æ‰€æœ‰&lt;span&gt;ï¼Œæ— è®ºåµŒå¥—å¤šæ·± */</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="å››ã€å±æ€§é€‰æ‹©å™¨-Attribute-Selectors"><a href="#å››ã€å±æ€§é€‰æ‹©å™¨-Attribute-Selectors" class="headerlink" title="å››ã€å±æ€§é€‰æ‹©å™¨ (Attribute Selectors)"></a>å››ã€å±æ€§é€‰æ‹©å™¨ (Attribute Selectors)</h3><p>å±æ€§é€‰æ‹©å™¨æ ¹æ®å…ƒç´ çš„å±æ€§åŠå…¶å€¼æ¥åŒ¹é…ã€‚</p><ul><li><strong>[attribute]</strong>ï¼šåŒ¹é…å…·æœ‰è¯¥å±æ€§çš„å…ƒç´ ã€‚<ul><li>ç¤ºä¾‹ï¼š<code>[class]</code> åŒ¹é…æ‰€æœ‰å…·æœ‰ <code>class</code> å±æ€§çš„å…ƒç´ ã€‚</li></ul></li><li><strong>[attribute&#x3D;â€valueâ€]</strong>ï¼šåŒ¹é…å±æ€§å€¼å®Œå…¨ç›¸ç­‰çš„å…ƒç´ ã€‚<ul><li>ç¤ºä¾‹ï¼š<code>[type=&quot;text&quot;]</code> åŒ¹é… <code>type</code> å±æ€§å€¼æ°å¥½ä¸º <code>&quot;text&quot;</code> çš„å…ƒç´ ã€‚</li></ul></li><li><strong>[attribute~&#x3D;â€valueâ€]</strong>ï¼šåŒ¹é…å±æ€§å€¼ä¸­åŒ…å«è¯¥<strong>ç‹¬ç«‹å•è¯</strong>çš„å…ƒç´ ã€‚</li><li><strong>[attribute^&#x3D;â€valueâ€]</strong>ï¼šåŒ¹é…å±æ€§å€¼ä»¥è¯¥å­—ç¬¦ä¸²<strong>å¼€å¤´</strong>çš„å…ƒç´ ã€‚</li><li><strong>[attribute$&#x3D;â€valueâ€]</strong>ï¼šåŒ¹é…å±æ€§å€¼ä»¥è¯¥å­—ç¬¦ä¸²<strong>ç»“å°¾</strong>çš„å…ƒç´ ã€‚</li><li><strong>[attribute*&#x3D;â€valueâ€]</strong>ï¼šåŒ¹é…å±æ€§å€¼ä¸­åŒ…å«è¯¥å­—ç¬¦ä¸²çš„<strong>ä»»æ„ä½ç½®</strong>çš„å…ƒç´ ã€‚</li></ul><hr><h3 id="äº”ã€ä¼ªç±»ä¸ä¼ªå…ƒç´ é€‰æ‹©å™¨-Pseudo-class-Pseudo-element-Selectors"><a href="#äº”ã€ä¼ªç±»ä¸ä¼ªå…ƒç´ é€‰æ‹©å™¨-Pseudo-class-Pseudo-element-Selectors" class="headerlink" title="äº”ã€ä¼ªç±»ä¸ä¼ªå…ƒç´ é€‰æ‹©å™¨ (Pseudo-class &amp; Pseudo-element Selectors)"></a>äº”ã€ä¼ªç±»ä¸ä¼ªå…ƒç´ é€‰æ‹©å™¨ (Pseudo-class &amp; Pseudo-element Selectors)</h3><ul><li><strong>ä¼ªç±»</strong>ï¼šç”¨<strong>ä¸€ä¸ªå†’å· :</strong>ï¼Œè¡¨ç¤ºå…ƒç´ åœ¨<strong>ç‰¹å®šçŠ¶æ€</strong>ä¸‹çš„æ ·å¼ã€‚<ul><li><strong>:link</strong>ï¼šæœªè®¿é—®çš„é“¾æ¥ã€‚</li><li><strong>:visited</strong>ï¼šå·²è®¿é—®çš„é“¾æ¥ã€‚</li><li><strong>:hover</strong>ï¼šé¼ æ ‡æ‚¬åœçŠ¶æ€ã€‚</li><li><strong>:active</strong>ï¼šè¢«ç‚¹å‡»çŠ¶æ€ã€‚</li><li><strong>:focus</strong>ï¼šè·å¾—ç„¦ç‚¹çŠ¶æ€ï¼ˆå¸¸ç”¨äºè¡¨å•ï¼‰ã€‚</li></ul></li><li><strong>ä¼ªå…ƒç´ </strong>ï¼šç”¨<strong>ä¸¤ä¸ªå†’å· ::</strong>ï¼Œè¡¨ç¤ºå…ƒç´ çš„<strong>ç‰¹å®šéƒ¨åˆ†</strong>ã€‚<ul><li><strong>::before</strong> å’Œ <strong>::after</strong>ï¼šåœ¨å…ƒç´ å†…å®¹çš„å‰åæ’å…¥å†…å®¹ã€‚</li><li><strong>::first-line</strong>ï¼šå…ƒç´ çš„æ–‡æœ¬ç¬¬ä¸€è¡Œã€‚</li><li><strong>::first-letter</strong>ï¼šå…ƒç´ çš„æ–‡æœ¬ç¬¬ä¸€ä¸ªå­—æ¯ã€‚</li></ul></li></ul><hr><h3 id="å…­ã€é€‰æ‹©å™¨ä¼˜å…ˆçº§-Specificity"><a href="#å…­ã€é€‰æ‹©å™¨ä¼˜å…ˆçº§-Specificity" class="headerlink" title="å…­ã€é€‰æ‹©å™¨ä¼˜å…ˆçº§ (Specificity)"></a>å…­ã€é€‰æ‹©å™¨ä¼˜å…ˆçº§ (Specificity)</h3><p>è¿™æ˜¯ CSS çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå†³å®šäº†å½“å¤šä¸ªè§„åˆ™åº”ç”¨åˆ°åŒä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå“ªä¸€ä¸ªä¼šç”Ÿæ•ˆã€‚</p><ul><li><strong>è®¡ç®—è§„åˆ™</strong>ï¼šä¼˜å…ˆçº§ç”±<strong>é€‰æ‹©å™¨çš„ç±»å‹</strong>å’Œ<strong>æ•°é‡</strong>å†³å®šã€‚<ol><li><strong>è¡Œå†…æ ·å¼</strong>ï¼šä¼˜å…ˆçº§æœ€é«˜ï¼Œä¸º <code>1000</code>ã€‚</li><li><strong>ID é€‰æ‹©å™¨</strong>ï¼šä¼˜å…ˆçº§ä¸º <code>100</code>ã€‚</li><li><strong>ç±»ã€å±æ€§ã€ä¼ªç±»é€‰æ‹©å™¨</strong>ï¼šä¼˜å…ˆçº§ä¸º <code>10</code>ã€‚</li><li><strong>å…ƒç´ ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨</strong>ï¼šä¼˜å…ˆçº§ä¸º <code>1</code>ã€‚</li><li><strong>é€šç”¨é€‰æ‹©å™¨ *</strong>ï¼šä¼˜å…ˆçº§ä¸º <code>0</code>ã€‚</li></ol></li><li><strong>!important</strong>ï¼šæœ€é«˜ä¼˜å…ˆçº§ï¼Œä½†ä¼šç ´åå±‚å æœºåˆ¶ï¼Œåº”<strong>é¿å…ä½¿ç”¨</strong>ã€‚</li></ul><p>å¦‚ä½•è®¡ç®—ï¼š</p><p>å°†æ¯ä¸ªé€‰æ‹©å™¨çš„ä¼˜å…ˆçº§æ•°å­—ç›¸åŠ ï¼Œå¾—åˆ°ä¸€ä¸ªæœ€ç»ˆçš„æƒé‡å€¼ã€‚æƒé‡å€¼è¶Šé«˜çš„è§„åˆ™è¶Šä¼˜å…ˆã€‚</p><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>p</code>ï¼šæƒé‡ <code>1</code>ã€‚</li><li><code>.cl1</code>ï¼šæƒé‡ <code>10</code>ã€‚</li><li><code>div.cl1</code>ï¼šæƒé‡ <code>1 + 10 = 11</code>ã€‚</li><li><code>#p1</code>ï¼šæƒé‡ <code>100</code>ã€‚</li><li><code>#outer span</code>ï¼šæƒé‡ <code>100 + 1 = 101</code>ã€‚</li></ul></li></ul><p><strong>!important</strong> ä¼šå‡Œé©¾äºæ‰€æœ‰è¿™äº›è§„åˆ™ä¹‹ä¸Šã€‚å½“ä½ é‡åˆ°æ ·å¼ä¸ç”Ÿæ•ˆçš„é—®é¢˜æ—¶ï¼Œé¦–å…ˆè¦æ£€æŸ¥ä¼˜å…ˆçº§ï¼Œå…¶æ¬¡æ˜¯æ˜¯å¦æœ‰ <code>!important</code> çš„å­˜åœ¨ã€‚</p><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æ¥è¯¦ç»†ã€æ·±å…¥åœ°è§£é‡Š <strong>BOM</strong> å’Œ <strong>DOM</strong> è¿™ä¸¤ä¸ª JavaScript åœ¨æµè§ˆå™¨ä¸­æ“ä½œç½‘é¡µçš„æ ¸å¿ƒæ¦‚å¿µã€‚</p><hr><h3 id="BOM-Browser-Object-Model"><a href="#BOM-Browser-Object-Model" class="headerlink" title="BOM (Browser Object Model)"></a>BOM (Browser Object Model)</h3><h4 id="1-æ¦‚å¿µ"><a href="#1-æ¦‚å¿µ" class="headerlink" title="1. æ¦‚å¿µ"></a>1. æ¦‚å¿µ</h4><p><strong>BOM</strong>ï¼Œå³<strong>æµè§ˆå™¨å¯¹è±¡æ¨¡å‹</strong>ï¼Œæ˜¯ JavaScript ç”¨äº<strong>æ“ä½œæµè§ˆå™¨çª—å£</strong>çš„ä¸€å¥— APIã€‚å®ƒæ²¡æœ‰ç»Ÿä¸€çš„æ ‡å‡†ï¼Œè€Œæ˜¯ç”±å„ä¸ªæµè§ˆå™¨å‚å•†å„è‡ªå®ç°çš„ã€‚BOM çš„æ ¸å¿ƒæ˜¯ <code>window</code> å¯¹è±¡ï¼Œå®ƒæ—¢ä»£è¡¨äº†æµè§ˆå™¨çª—å£æœ¬èº«ï¼Œä¹Ÿæ˜¯ JavaScript å…¨å±€ä½œç”¨åŸŸçš„å”¯ä¸€å¯¹è±¡ã€‚</p><h4 id="2-BOM-çš„æ ¸å¿ƒå¯¹è±¡ä¸åŠŸèƒ½"><a href="#2-BOM-çš„æ ¸å¿ƒå¯¹è±¡ä¸åŠŸèƒ½" class="headerlink" title="2. BOM çš„æ ¸å¿ƒå¯¹è±¡ä¸åŠŸèƒ½"></a>2. BOM çš„æ ¸å¿ƒå¯¹è±¡ä¸åŠŸèƒ½</h4><p>BOM æä¾›äº†ä»¥ä¸‹å…³é”®å¯¹è±¡ï¼Œç”¨äºä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’ï¼š</p><ul><li><strong>window å¯¹è±¡</strong>ï¼š<ul><li><strong>å…¨å±€å¯¹è±¡</strong>ï¼š<code>window</code> æ˜¯ JavaScript çš„å…¨å±€å¯¹è±¡ï¼Œæ‰€æœ‰å…¨å±€å˜é‡å’Œå‡½æ•°éƒ½æ˜¯ <code>window</code> å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚</li><li><strong>çª—å£æ§åˆ¶</strong>ï¼š<code>window.open()</code> (æ‰“å¼€æ–°çª—å£), <code>window.close()</code> (å…³é—­å½“å‰çª—å£)ã€‚</li><li><strong>å®šæ—¶å™¨</strong>ï¼š<code>setTimeout()</code> å’Œ <code>setInterval()</code>ï¼Œç”¨äºå»¶è¿Ÿæˆ–é‡å¤æ‰§è¡Œä»£ç ã€‚</li><li><strong>å¯¼èˆªä¸ä½ç½®</strong>ï¼š<code>window.location</code>ï¼Œç”¨äºè·å–å’Œä¿®æ”¹å½“å‰é¡µé¢çš„ URLã€‚</li></ul></li><li><strong>location å¯¹è±¡</strong>ï¼š<ul><li><strong>URL ä¿¡æ¯</strong>ï¼šæä¾›äº†å½“å‰ URL çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ <code>location.href</code> (å®Œæ•´ URL), <code>location.protocol</code> (åè®®), <code>location.hostname</code> (ä¸»æœºå), <code>location.pathname</code> (è·¯å¾„)ã€‚</li><li><strong>é¡µé¢è·³è½¬</strong>ï¼š<code>location.href = &#39;new_url&#39;</code> æˆ– <code>location.assign(&#39;new_url&#39;)</code> (æœ‰å†å²è®°å½•), <code>location.replace(&#39;new_url&#39;)</code> (ä¸ç•™å†å²è®°å½•), <code>location.reload()</code> (åˆ·æ–°é¡µé¢)ã€‚</li></ul></li><li><strong>history å¯¹è±¡</strong>ï¼š<ul><li><strong>å†å²è®°å½•</strong>ï¼šæä¾›äº†å¯¹æµè§ˆå™¨å†å²è®°å½•çš„è®¿é—®ã€‚</li><li><strong>å¯¼èˆª</strong>ï¼š<code>history.back()</code> (åé€€), <code>history.forward()</code> (å‰è¿›), <code>history.go(n)</code> (å‰è¿›æˆ–åé€€ n é¡µ)ã€‚</li></ul></li><li><strong>navigator å¯¹è±¡</strong>ï¼š<ul><li><strong>æµè§ˆå™¨ä¿¡æ¯</strong>ï¼šæä¾›äº†å…³äºæµè§ˆå™¨æœ¬èº«çš„ä¿¡æ¯ï¼Œå¦‚ <code>navigator.userAgent</code> (ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²), <code>navigator.platform</code> (æ“ä½œç³»ç»Ÿ), <code>navigator.onLine</code> (æ˜¯å¦åœ¨çº¿)ã€‚</li></ul></li><li><strong>screen å¯¹è±¡</strong>ï¼š<ul><li><strong>å±å¹•ä¿¡æ¯</strong>ï¼šæä¾›äº†å…³äºç”¨æˆ·å±å¹•çš„ä¿¡æ¯ï¼Œå¦‚ <code>screen.width</code> (å±å¹•å®½åº¦), <code>screen.height</code> (å±å¹•é«˜åº¦)ã€‚</li></ul></li></ul><h4 id="3-BOM-çš„ç‰¹ç‚¹"><a href="#3-BOM-çš„ç‰¹ç‚¹" class="headerlink" title="3. BOM çš„ç‰¹ç‚¹"></a>3. BOM çš„ç‰¹ç‚¹</h4><ul><li><strong>æ²¡æœ‰æ ‡å‡†</strong>ï¼šBOM æ²¡æœ‰ W3C çš„æ­£å¼æ ‡å‡†ï¼Œä¸åŒæµè§ˆå™¨å¯èƒ½åœ¨å®ç°ä¸Šå­˜åœ¨å·®å¼‚ã€‚</li><li><strong>ä»¥ window ä¸ºæ ¸å¿ƒ</strong>ï¼šæ‰€æœ‰ BOM å¯¹è±¡éƒ½æ˜¯ <code>window</code> å¯¹è±¡çš„å±æ€§ã€‚</li></ul><hr><h3 id="DOM-Document-Object-Model"><a href="#DOM-Document-Object-Model" class="headerlink" title="DOM (Document Object Model)"></a>DOM (Document Object Model)</h3><h4 id="1-æ¦‚å¿µ-1"><a href="#1-æ¦‚å¿µ-1" class="headerlink" title="1. æ¦‚å¿µ"></a>1. æ¦‚å¿µ</h4><p><strong>DOM</strong>ï¼Œå³<strong>æ–‡æ¡£å¯¹è±¡æ¨¡å‹</strong>ï¼Œæ˜¯ JavaScript ç”¨äº<strong>æ“ä½œ HTML æˆ– XML æ–‡æ¡£</strong>çš„ä¸€å¥— APIã€‚å®ƒå°†æ•´ä¸ª HTML æ–‡æ¡£è§£æä¸ºä¸€ä¸ª<strong>æ ‘å½¢ç»“æ„</strong>ï¼Œæ¯ä¸ª HTML æ ‡ç­¾ã€å±æ€§å’Œæ–‡æœ¬éƒ½æˆä¸ºäº†æ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆNodeï¼‰ã€‚DOM æ˜¯ä¸€ä¸ªç”± W3C åˆ¶å®šçš„æ ‡å‡†ã€‚</p><h4 id="2-DOM-çš„æ ¸å¿ƒå¯¹è±¡ä¸åŠŸèƒ½"><a href="#2-DOM-çš„æ ¸å¿ƒå¯¹è±¡ä¸åŠŸèƒ½" class="headerlink" title="2. DOM çš„æ ¸å¿ƒå¯¹è±¡ä¸åŠŸèƒ½"></a>2. DOM çš„æ ¸å¿ƒå¯¹è±¡ä¸åŠŸèƒ½</h4><p>DOM çš„æ ¸å¿ƒæ˜¯ <code>document</code> å¯¹è±¡ï¼Œå®ƒæ˜¯æ•´ä¸ªæ–‡æ¡£çš„å…¥å£ã€‚</p><ul><li><strong>document å¯¹è±¡</strong>ï¼š<ul><li><strong>DOM æ ‘çš„æ ¹èŠ‚ç‚¹</strong>ï¼šä»£è¡¨æ•´ä¸ª HTML æ–‡æ¡£ã€‚</li><li><strong>å…ƒç´ è·å–</strong>ï¼šæä¾›äº†å¤šç§æ–¹æ³•æ¥è·å–é¡µé¢ä¸Šçš„å…ƒç´ ï¼š<ul><li><code>document.getElementById(&#39;id&#39;)</code>ï¼šé€šè¿‡ ID è·å–å•ä¸ªå…ƒç´ ã€‚</li><li><code>document.getElementsByClassName(&#39;class&#39;)</code>ï¼šé€šè¿‡ç±»åè·å–å…ƒç´ é›†åˆã€‚</li><li><code>document.getElementsByTagName(&#39;tag&#39;)</code>ï¼šé€šè¿‡æ ‡ç­¾åè·å–å…ƒç´ é›†åˆã€‚</li><li><code>document.querySelector(&#39;css_selector&#39;)</code>ï¼šé€šè¿‡ CSS é€‰æ‹©å™¨è·å–ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ã€‚</li><li><code>document.querySelectorAll(&#39;css_selector&#39;)</code>ï¼šé€šè¿‡ CSS é€‰æ‹©å™¨è·å–æ‰€æœ‰åŒ¹é…çš„å…ƒç´ ã€‚</li></ul></li></ul></li><li><strong>å…ƒç´ èŠ‚ç‚¹ï¼ˆElement Nodesï¼‰</strong>ï¼š<ul><li><strong>æ“ä½œå…ƒç´ </strong>ï¼šæä¾›äº†æ“ä½œ HTML å…ƒç´ çš„æ–¹æ³•å’Œå±æ€§ï¼š<ul><li><code>element.innerHTML</code>ï¼šè·å–æˆ–è®¾ç½®å…ƒç´ çš„ HTML å†…å®¹ã€‚</li><li><code>element.style.color</code>ï¼šä¿®æ”¹å…ƒç´ çš„è¡Œå†…æ ·å¼ã€‚</li><li><code>element.setAttribute(&#39;attr&#39;, &#39;val&#39;)</code>ï¼šè®¾ç½®å…ƒç´ çš„å±æ€§ã€‚</li><li><code>element.addEventListener(&#39;event&#39;, handler)</code>ï¼šæ·»åŠ äº‹ä»¶ç›‘å¬å™¨ã€‚</li></ul></li></ul></li><li><strong>DOM æ ‘æ“ä½œ</strong>ï¼š<ul><li><strong>åˆ›å»º</strong>ï¼š<code>document.createElement(&#39;tag&#39;)</code> (åˆ›å»ºæ–°å…ƒç´ )ã€‚</li><li><strong>æ·»åŠ </strong>ï¼š<code>parent.appendChild(child)</code> (æ·»åŠ å­å…ƒç´ )ã€‚</li><li><strong>åˆ é™¤</strong>ï¼š<code>parent.removeChild(child)</code> (åˆ é™¤å­å…ƒç´ )ã€‚</li><li><strong>æ›¿æ¢</strong>ï¼š<code>parent.replaceChild(newChild, oldChild)</code> (æ›¿æ¢å­å…ƒç´ )ã€‚</li></ul></li></ul><h4 id="3-DOM-çš„ç‰¹ç‚¹"><a href="#3-DOM-çš„ç‰¹ç‚¹" class="headerlink" title="3. DOM çš„ç‰¹ç‚¹"></a>3. DOM çš„ç‰¹ç‚¹</h4><ul><li><strong>æœ‰æ ‡å‡†</strong>ï¼šDOM æ˜¯ç”± W3C åˆ¶å®šçš„æ ‡å‡†ï¼Œå› æ­¤åœ¨ä¸åŒæµè§ˆå™¨ä¸­çš„å®ç°å·®å¼‚è¾ƒå°ã€‚</li><li><strong>æ ‘å½¢ç»“æ„</strong>ï¼šå°† HTML æ–‡æ¡£æŠ½è±¡ä¸ºæ ‘å½¢ç»“æ„ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼åƒæ“ä½œæ ‘ä¸€æ ·æ“ä½œç½‘é¡µã€‚</li></ul><hr><h3 id="BOM-å’Œ-DOM-çš„æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»"><a href="#BOM-å’Œ-DOM-çš„æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»" class="headerlink" title="BOM å’Œ DOM çš„æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»"></a>BOM å’Œ DOM çš„æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»</h3><table><thead><tr><th>ç‰¹æ€§</th><th>BOM (Browser Object Model)</th><th>DOM (Document Object Model)</th></tr></thead><tbody><tr><td><strong>ä¸»è¦åŠŸèƒ½</strong></td><td><strong>æ“ä½œæµè§ˆå™¨çª—å£</strong></td><td><strong>æ“ä½œç½‘é¡µæ–‡æ¡£å†…å®¹</strong></td></tr><tr><td><strong>æ ¸å¿ƒå¯¹è±¡</strong></td><td><code>window</code></td><td><code>document</code></td></tr><tr><td><strong>æ ‡å‡†åŒ–</strong></td><td>æ— ç»Ÿä¸€æ ‡å‡†ï¼ˆå„æµè§ˆå™¨å®ç°ä¸åŒï¼‰</td><td>æœ‰ W3C æ ‡å‡†</td></tr><tr><td><strong>å±‚çº§å…³ç³»</strong></td><td><code>window</code> åŒ…å«äº† <code>location</code>, <code>history</code>, <code>navigator</code> ç­‰ï¼Œ<strong>ä¹ŸåŒ…å«äº† document å¯¹è±¡</strong>ã€‚</td><td><code>document</code> åŒ…å«äº† HTML å…ƒç´ çš„æ ‘å½¢ç»“æ„ã€‚</td></tr></tbody></table><p>å®ƒä»¬çš„å…³ç³»ï¼š</p><p>BOM æ˜¯ DOM çš„è¶…é›†ã€‚window å¯¹è±¡æ˜¯æ‰€æœ‰ JavaScript å¯¹è±¡çš„å…¨å±€å¯¹è±¡ï¼Œå®ƒåŒ…å«äº† document å¯¹è±¡ã€‚æ¢å¥è¯è¯´ï¼Œwindow.document å°±æ˜¯ documentã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ document å¯¹è±¡æ¥æ“ä½œç½‘é¡µæ—¶ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡ window å¯¹è±¡æ¥è®¿é—®çš„ã€‚</p><p>è¿™ä¸ªå…³ç³»å¯ä»¥ç†è§£ä¸ºï¼š</p><p>window -&gt; æµè§ˆå™¨çª—å£</p><p>document -&gt; çª—å£ä¸­åŠ è½½çš„æ–‡æ¡£</p><p>æŒæ¡ BOM å’Œ DOM æ˜¯æˆä¸ºä¸€ä¸ªåˆæ ¼å‰ç«¯å·¥ç¨‹å¸ˆçš„åŸºç¡€ï¼Œå®ƒä»¬æ˜¯ JavaScript é©±åŠ¨ Web é¡µé¢äº¤äº’çš„ä¸¤ä¸ªæœ€é‡è¦çš„å·¥å…·ã€‚</p><p>å¥½çš„ï¼Œæˆ‘å°†æ ¹æ®æ‚¨æä¾›çš„è¿™ä»½ JS å­¦ä¹ ç¬”è®°ï¼Œä»¥ä¸€ç§æ›´æ·±å…¥ã€æ›´æ¡ç†åŒ–çš„æ–¹å¼ï¼Œé€ä¸€è¿›è¡Œè¯¦ç»†çš„å±•å¼€å’Œè¡¥å……ã€‚è¿™ä¸ä»…æ˜¯å¯¹çŸ¥è¯†ç‚¹çš„æ¢³ç†ï¼Œä¹ŸåŒ…å«äº†å…¶èƒŒåçš„åŸç†å’Œä¸€äº›è¿›é˜¶ç”¨æ³•ï¼Œä½¿å…¶æ›´å…·é¢è¯•å’Œå®æˆ˜ä»·å€¼ã€‚</p><hr><h3 id="ä¸€ã€JavaScript-ä¸­çš„æ•°æ®ç±»å‹"><a href="#ä¸€ã€JavaScript-ä¸­çš„æ•°æ®ç±»å‹" class="headerlink" title="ä¸€ã€JavaScript ä¸­çš„æ•°æ®ç±»å‹"></a>ä¸€ã€JavaScript ä¸­çš„æ•°æ®ç±»å‹</h3><h4 id="1-åŸºç¡€æ•°æ®ç±»å‹ï¼ˆåŸå§‹æ•°æ®ç±»å‹ï¼‰"><a href="#1-åŸºç¡€æ•°æ®ç±»å‹ï¼ˆåŸå§‹æ•°æ®ç±»å‹ï¼‰" class="headerlink" title="1. åŸºç¡€æ•°æ®ç±»å‹ï¼ˆåŸå§‹æ•°æ®ç±»å‹ï¼‰"></a>1. åŸºç¡€æ•°æ®ç±»å‹ï¼ˆåŸå§‹æ•°æ®ç±»å‹ï¼‰</h4><ul><li><p><strong>number ç±»å‹</strong>ï¼š</p><ul><li><strong>æ·±å…¥</strong>ï¼šJS é‡‡ç”¨ IEEE 754 æ ‡å‡†çš„åŒç²¾åº¦ 64 ä½æµ®ç‚¹æ•°æ¥è¡¨ç¤ºæ‰€æœ‰æ•°å­—ã€‚è¿™æ„å‘³ç€å®ƒ<strong>æ²¡æœ‰å•ç‹¬çš„æ•´æ•°ç±»å‹</strong>ï¼Œæ‰€æœ‰æ•°å­—éƒ½æ˜¯æµ®ç‚¹æ•°ã€‚</li><li><code>NaN</code> (Not a Number)ï¼šè¡¨ç¤ºéæ•°å­—å€¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>typeof NaN</code> ç»“æœæ˜¯ <code>number</code>ã€‚<code>NaN</code> ä¸ç­‰äºè‡ªèº«ï¼Œ<code>NaN === NaN</code> ç»“æœä¸º <code>false</code>ã€‚</li><li><code>Infinity</code>ï¼šè¡¨ç¤ºæ­£æ— ç©·å¤§ï¼Œ<code>+Infinity</code> å’Œ <code>-Infinity</code> åˆ†åˆ«è¡¨ç¤ºæ­£è´Ÿæ— ç©·å¤§ã€‚</li><li><code>0.1 + 0.2 !== 0.3</code>ï¼šç”±äºæµ®ç‚¹æ•°è¡¨ç¤ºçš„ç²¾åº¦é—®é¢˜ï¼Œè¿™ä¸ªç»å…¸é—®é¢˜éœ€è¦æ³¨æ„ã€‚</li></ul></li><li><p><strong>boolean ç±»å‹</strong>ï¼š</p><ul><li><strong>æ·±å…¥</strong>ï¼š<code>true</code> å’Œ <code>false</code>ã€‚åœ¨æ¡ä»¶åˆ¤æ–­ä¸­ï¼Œæ‰€æœ‰æ•°æ®ç±»å‹éƒ½ä¼šè¢«éšå¼è½¬æ¢ä¸ºå¸ƒå°”å€¼ã€‚</li></ul></li><li><p><strong>undefined ç±»å‹</strong>ï¼š</p><ul><li><strong>æ·±å…¥</strong>ï¼šè¡¨ç¤ºä¸€ä¸ª<strong>æœªå®šä¹‰</strong>çš„å˜é‡æˆ–å˜é‡<strong>æœªè¢«èµ‹å€¼</strong>ã€‚<code>typeof undefined</code> ç»“æœä¸º <code>undefined</code>ã€‚å®ƒæ˜¯ä¸€ä¸ªå€¼ä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹ã€‚</li><li><code>null</code>ï¼šä¸ <code>undefined</code> çš„åŒºåˆ«åœ¨äºï¼Œ<code>null</code> æ˜¯ä¸€ç§<strong>æ„å›¾</strong>ï¼Œè¡¨ç¤ºå˜é‡è¢«æ˜¾å¼åœ°èµ‹äºˆäº†â€œç©ºâ€å€¼ã€‚<code>typeof null</code> ç»“æœä¸º <code>object</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªå†å²é—ç•™çš„ bugã€‚</li></ul></li><li><p><strong>string ç±»å‹</strong>ï¼š</p><ul><li><p><strong>æ·±å…¥</strong>ï¼šJS ä¸­<strong>æ²¡æœ‰å­—ç¬¦ç±»å‹</strong>ã€‚å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½ä¿®æ”¹ã€‚</p></li><li><p><strong>åå¼•å·ï¼ˆ     ï¼‰</strong>ï¼šES6 å¼•å…¥ï¼Œæ”¯æŒ<strong>æ¨¡æ¿å­—é¢é‡</strong>ã€‚å®ƒå…è®¸åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡å’Œè¡¨è¾¾å¼ï¼Œå¹¶æ”¯æŒå¤šè¡Œä¹¦å†™ï¼Œæå¤§æå‡äº†å­—ç¬¦ä¸²æ‹¼æ¥çš„ä¾¿åˆ©æ€§ã€‚</p><p>JavaScript</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const name = &quot;å¼ ä¸‰&quot;;</span><br><span class="line">console.log(`ä½ å¥½ï¼Œæˆ‘çš„åå­—æ˜¯$&#123;name&#125;ã€‚`);</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="2-æ•°æ®ç±»å‹è½¬æ¢"><a href="#2-æ•°æ®ç±»å‹è½¬æ¢" class="headerlink" title="2. æ•°æ®ç±»å‹è½¬æ¢"></a>2. æ•°æ®ç±»å‹è½¬æ¢</h4><ul><li><p><strong>è½¬æ¢ä¸º number</strong>ï¼š<code>Number(value)</code></p><ul><li><strong>æ·±å…¥</strong>ï¼šä¼šå°è¯•å°†å‚æ•°è½¬æ¢ä¸ºæ•°å­—ã€‚éæ•°å­—å­—ç¬¦ä¸²ä¼šè¿”å› <code>NaN</code>ã€‚<code>null</code> è½¬ä¸º <code>0</code>ï¼Œ<code>undefined</code> è½¬ä¸º <code>NaN</code>ã€‚</li></ul></li><li><p><strong>è½¬æ¢ä¸º boolean</strong>ï¼š<code>Boolean(value)</code></p><ul><li><strong>æ·±å…¥</strong>ï¼šæ‰€æœ‰èƒ½è¢«è½¬æ¢ä¸º <code>false</code> çš„å€¼è¢«ç§°ä¸º<strong>å‡å€¼ï¼ˆFalsy Valueï¼‰</strong>ã€‚</li><li><strong>å‡å€¼åˆ—è¡¨</strong>ï¼š<code>0</code>, <code>-0</code>, <code>null</code>, <code>false</code>, <code>NaN</code>, <code>undefined</code>, <code>&#39;&#39;</code> (ç©ºå­—ç¬¦ä¸²)ã€‚</li><li><strong>çœŸå€¼ï¼ˆTruthy Valueï¼‰</strong>ï¼šé™¤ä¸Šè¿°å‡å€¼å¤–ï¼Œæ‰€æœ‰å€¼éƒ½æ˜¯çœŸå€¼ï¼ŒåŒ…æ‹¬ç©ºæ•°ç»„ <code>[]</code> å’Œç©ºå¯¹è±¡ <code>&#123;&#125;</code>ã€‚</li></ul></li><li><p><strong>è½¬æ¢ä¸º string</strong>ï¼š<code>String(value)</code> æˆ– <code>value + &#39;&#39;</code></p><ul><li><strong>æ·±å…¥</strong>ï¼š<code>value + &#39;&#39;</code> æ˜¯æœ€å¸¸ç”¨çš„æŠ€å·§ï¼Œåˆ©ç”¨äº† JS çš„éšå¼ç±»å‹è½¬æ¢ã€‚</li></ul></li><li><p><strong>parseInt å’Œ parseFloat</strong>ï¼š</p><ul><li><p><strong>æ·±å…¥</strong>ï¼šè¿™ä¸¤ä¸ªå‡½æ•°ä¸“é—¨ç”¨äºä»<strong>å­—ç¬¦ä¸²å¼€å¤´</strong>è§£æå‡ºæ•°å­—ã€‚</p></li><li><p><code>parseInt</code>ï¼šè§£æ<strong>æ•´æ•°</strong>ã€‚é‡åˆ°ç¬¬ä¸€ä¸ªéæ•°å­—å­—ç¬¦å°±åœæ­¢è§£æã€‚</p><p>JavaScript</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">parseInt(&quot;100px&quot;); // 100</span><br><span class="line">parseInt(&quot;a100&quot;);  // NaN</span><br></pre></td></tr></table></figure></li><li><p><code>parseFloat</code>ï¼šè§£æ<strong>æµ®ç‚¹æ•°</strong>ã€‚é‡åˆ°ç¬¬ä¸€ä¸ªéæ•°å­—å­—ç¬¦ï¼ˆé™¤äº†å°æ•°ç‚¹ï¼‰å°±åœæ­¢è§£æã€‚</p></li></ul></li></ul><h3 id="äºŒã€JavaScript-ä¸­çš„å¼¹å‡ºæ¡†"><a href="#äºŒã€JavaScript-ä¸­çš„å¼¹å‡ºæ¡†" class="headerlink" title="äºŒã€JavaScript ä¸­çš„å¼¹å‡ºæ¡†"></a>äºŒã€JavaScript ä¸­çš„å¼¹å‡ºæ¡†</h3><p>è¿™äº›æ˜¯æµè§ˆå™¨æä¾›çš„ BOM APIã€‚</p><ul><li><code>alert(message)</code>ï¼š<strong>è­¦å‘Šæ¡†</strong>ã€‚é˜»å¡å¼ï¼Œæ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯ï¼Œä¸è¿”å›ä»»ä½•å€¼ã€‚</li><li><code>prompt(message, default_value)</code>ï¼š<strong>è¯¢é—®æ¡†</strong>ã€‚è¿”å›ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœç‚¹å‡»â€œå–æ¶ˆâ€åˆ™è¿”å› <code>null</code>ã€‚</li><li><code>confirm(message)</code>ï¼š<strong>ç¡®è®¤æ¡†</strong>ã€‚è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨æˆ·ç‚¹å‡»â€œç¡®å®šâ€è¿”å› <code>true</code>ï¼Œç‚¹å‡»â€œå–æ¶ˆâ€è¿”å› <code>false</code>ã€‚</li></ul><h3 id="ä¸‰ã€æ¡ä»¶è¿ç®—ç¬¦ï¼š-å’Œ"><a href="#ä¸‰ã€æ¡ä»¶è¿ç®—ç¬¦ï¼š-å’Œ" class="headerlink" title="ä¸‰ã€æ¡ä»¶è¿ç®—ç¬¦ï¼š== å’Œ ==="></a>ä¸‰ã€æ¡ä»¶è¿ç®—ç¬¦ï¼š<code>==</code> å’Œ <code>===</code></h3><ul><li><p><strong>&#x3D;&#x3D;ï¼ˆå®½æ¾ç›¸ç­‰ï¼‰</strong>ï¼šåªæ¯”è¾ƒ<strong>å€¼</strong>ï¼Œä¸æ¯”è¾ƒç±»å‹ã€‚å®ƒåœ¨æ¯”è¾ƒå‰ä¼šè¿›è¡Œ<strong>éšå¼ç±»å‹è½¬æ¢</strong>ã€‚</p><p>JavaScript</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5 == &quot;5&quot;;     // true</span><br><span class="line">null == undefined; // true</span><br></pre></td></tr></table></figure></li><li><p><strong>&#x3D;&#x3D;&#x3D;ï¼ˆä¸¥æ ¼ç›¸ç­‰ï¼‰</strong>ï¼šæ—¢æ¯”è¾ƒ<strong>å€¼</strong>ï¼Œä¹Ÿæ¯”è¾ƒ<strong>ç±»å‹</strong>ã€‚ä¸ä¼šè¿›è¡Œç±»å‹è½¬æ¢ã€‚</p><p>JavaScript</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5 === &quot;5&quot;;    // false</span><br><span class="line">null === undefined; // false</span><br></pre></td></tr></table></figure></li><li><p><strong>é¢è¯•å»ºè®®</strong>ï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œ<strong>å¼ºçƒˆå»ºè®®ä½¿ç”¨ &#x3D;&#x3D;&#x3D;</strong>ï¼Œä»¥é¿å…ä¸å¿…è¦çš„ç±»å‹è½¬æ¢å¸¦æ¥çš„ bugã€‚</p></li></ul><h3 id="å››ã€å­—ç¬¦ä¸²å’Œæ•°ç»„"><a href="#å››ã€å­—ç¬¦ä¸²å’Œæ•°ç»„" class="headerlink" title="å››ã€å­—ç¬¦ä¸²å’Œæ•°ç»„"></a>å››ã€å­—ç¬¦ä¸²å’Œæ•°ç»„</h3><ul><li><strong>å­—ç¬¦ä¸²</strong>ï¼š<ul><li><strong>æ·±å…¥</strong>ï¼š<code>string</code> æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œæ‹¥æœ‰ <code>length</code> å±æ€§å’Œè®¸å¤šæ–¹æ³•ï¼ˆå¦‚ <code>split()</code>, <code>slice()</code>, <code>indexOf()</code> ç­‰ï¼‰ï¼Œä½†å®ƒ<strong>ä¸å¯å˜</strong>ã€‚</li></ul></li><li><strong>æ•°ç»„</strong>ï¼š<ul><li><strong>ç‰¹ç‚¹</strong>ï¼š<ol><li><strong>åŠ¨æ€é•¿åº¦</strong>ï¼šJS æ•°ç»„çš„é•¿åº¦æ˜¯å¯å˜çš„ï¼Œä½ å¯ä»¥éšæ—¶æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚</li><li><strong>å¼‚æ„æ€§</strong>ï¼šä¸€ä¸ªæ•°ç»„å¯ä»¥å­˜æ”¾ä¸åŒæ•°æ®ç±»å‹çš„å…ƒç´ ï¼Œå¦‚ <code>[1, &quot;hello&quot;, true]</code>ã€‚</li></ol></li><li><strong>æ–¹æ³•</strong>ï¼š<ul><li><code>push()</code>, <code>pop()</code>ï¼šåœ¨æ•°ç»„<strong>æœ«å°¾</strong>æ·»åŠ å’Œåˆ é™¤ã€‚</li><li><code>unshift()</code>, <code>shift()</code>ï¼šåœ¨æ•°ç»„<strong>å¼€å¤´</strong>æ·»åŠ å’Œåˆ é™¤ã€‚</li><li><code>splice()</code>ï¼šåŠŸèƒ½å¼ºå¤§çš„æ–¹æ³•ï¼Œç”¨äºåˆ é™¤ã€æ›¿æ¢æˆ–æ·»åŠ å…ƒç´ ã€‚</li><li><code>forEach()</code>, <code>map()</code>, <code>filter()</code>ï¼šå¸¸ç”¨çš„éå†æ–¹æ³•ã€‚</li></ul></li></ul></li></ul><h3 id="äº”ã€å‡½æ•°å’Œå¯¹è±¡"><a href="#äº”ã€å‡½æ•°å’Œå¯¹è±¡" class="headerlink" title="äº”ã€å‡½æ•°å’Œå¯¹è±¡"></a>äº”ã€å‡½æ•°å’Œå¯¹è±¡</h3><ul><li><strong>å‡½æ•°</strong>ï¼š<ul><li><strong>æ·±å…¥</strong>ï¼šåœ¨ JS ä¸­ï¼Œå‡½æ•°æ˜¯<strong>ä¸€ç­‰å…¬æ°‘ï¼ˆFirst-Class Citizensï¼‰</strong>ã€‚è¿™æ„å‘³ç€å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ã€ä½œä¸ºè¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™å˜é‡ã€‚</li></ul></li><li><strong>å¯¹è±¡</strong>ï¼š<ul><li><strong>æ·±å…¥</strong>ï¼šJS å¯¹è±¡æ˜¯<strong>é”®å€¼å¯¹</strong>çš„é›†åˆã€‚é”®æ˜¯å­—ç¬¦ä¸²ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</li><li><strong>è®¿é—®å±æ€§</strong>ï¼š<ul><li>ç‚¹è¯­æ³•ï¼š<code>obj.prop</code>ã€‚</li><li>ä¸­æ‹¬å·è¯­æ³•ï¼š<code>obj[&#39;prop&#39;]</code>ã€‚åè€…é€‚ç”¨äºé”®ååŒ…å«ç‰¹æ®Šå­—ç¬¦æˆ–åŠ¨æ€é”®åçš„æƒ…å†µã€‚</li></ul></li></ul></li></ul><h3 id="å…­ã€å®šæ—¶å™¨"><a href="#å…­ã€å®šæ—¶å™¨" class="headerlink" title="å…­ã€å®šæ—¶å™¨"></a>å…­ã€å®šæ—¶å™¨</h3><ul><li><strong>setTimeout(callback, delay)</strong>ï¼š<ul><li><strong>ç”¨é€”</strong>ï¼šåªæ‰§è¡Œ<strong>ä¸€æ¬¡</strong>ã€‚</li><li><strong>æ·±å…¥</strong>ï¼š<code>delay</code> å‚æ•°æ˜¯<strong>æœ€å°å»¶è¿Ÿæ—¶é—´</strong>ã€‚ç”±äº JS æ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æœä¸»çº¿ç¨‹è¢«é˜»å¡ï¼Œ<code>callback</code> çš„æ‰§è¡Œä¼šå»¶è¿Ÿã€‚</li></ul></li><li><strong>setInterval(callback, delay)</strong>ï¼š<ul><li><strong>ç”¨é€”</strong>ï¼š<strong>é‡å¤</strong>æ‰§è¡Œã€‚</li><li><strong>æ·±å…¥</strong>ï¼šæ¯æ¬¡æ‰§è¡Œå®Œå›è°ƒå‡½æ•°åï¼Œ<code>setInterval</code> éƒ½ä¼šå°†ä¸‹ä¸€ä¸ªå›è°ƒä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ã€‚</li></ul></li></ul><h3 id="ä¸ƒã€ES6-æ–°ç‰¹æ€§ï¼ˆé‡è¦ï¼‰"><a href="#ä¸ƒã€ES6-æ–°ç‰¹æ€§ï¼ˆé‡è¦ï¼‰" class="headerlink" title="ä¸ƒã€ES6 æ–°ç‰¹æ€§ï¼ˆé‡è¦ï¼‰"></a>ä¸ƒã€ES6 æ–°ç‰¹æ€§ï¼ˆé‡è¦ï¼‰</h3><ul><li><strong>let å’Œ const</strong>ï¼š<ul><li><strong>var çš„é—®é¢˜</strong>ï¼šå…¨å±€ä½œç”¨åŸŸï¼Œå¯ä»¥è¢«é‡å¤å£°æ˜ï¼Œæœ‰å˜é‡æå‡ã€‚</li><li><strong>let</strong>ï¼š<strong>å—çº§ä½œç”¨åŸŸ</strong>ï¼ˆ<code>&#123;&#125;</code> å†…ï¼‰ï¼Œä¸èƒ½é‡å¤å£°æ˜ï¼Œæ²¡æœ‰å˜é‡æå‡ã€‚</li><li><strong>const</strong>ï¼š<strong>å—çº§ä½œç”¨åŸŸ</strong>ï¼Œç”¨äºå£°æ˜<strong>å¸¸é‡</strong>ã€‚ä¸€æ—¦å£°æ˜ï¼Œå…¶å¼•ç”¨åœ°å€ä¸èƒ½æ”¹å˜ã€‚</li></ul></li><li><strong>å­—ç¬¦ä¸²æ¨¡æ¿å­—é¢é‡</strong>ï¼šä½¿ç”¨åå¼•å·ï¼ˆ<code>     </code>ï¼‰åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²å’ŒåµŒå…¥å˜é‡ã€‚</li><li><strong>ç®­å¤´å‡½æ•°</strong>ï¼š<ul><li><strong>è¯­æ³•</strong>ï¼š<code>const func = (param) =&gt; &#123; ... &#125;</code>ã€‚</li><li><strong>this æŒ‡å‘</strong>ï¼šç®­å¤´å‡½æ•°<strong>æ²¡æœ‰è‡ªå·±çš„ this</strong>ï¼Œå®ƒä¼šæ•è·å…¶æ‰€åœ¨ä¸Šä¸‹æ–‡çš„ <code>this</code> å€¼ã€‚è¿™è§£å†³äº†ä¼ ç»Ÿå‡½æ•°ä¸­ <code>this</code> ç»‘å®šå¤æ‚çš„é—®é¢˜ã€‚</li></ul></li><li><strong>å¯å˜å‚æ•°</strong>ï¼š<code>...args</code>ï¼Œç”¨äºå‡½æ•°æ¥æ”¶ä¸ç¡®å®šæ•°é‡çš„å‚æ•°ã€‚</li></ul><h3 id="å…«ã€DOM"><a href="#å…«ã€DOM" class="headerlink" title="å…«ã€DOM"></a>å…«ã€DOM</h3><ul><li><strong>ä»€ä¹ˆæ˜¯ DOM</strong>ï¼š<ul><li><strong>æ·±å…¥</strong>ï¼šDOM æ˜¯æµè§ˆå™¨å°† HTML æ–‡æ¡£è§£æåç”Ÿæˆçš„<strong>æ ‘å½¢ç»“æ„</strong>ï¼Œæ˜¯ JavaScript æ“ä½œç½‘é¡µçš„æ¥å£ã€‚HTML æ–‡ä»¶æ˜¯æ–‡æœ¬ï¼ŒDOM æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥è¢« JS ç¼–ç¨‹æ§åˆ¶ã€‚</li></ul></li><li><strong>DOM æ“ä½œ</strong>ï¼š<ul><li><strong>è·å–æ ‡ç­¾å¯¹è±¡</strong>ï¼š<ul><li><code>document.getElementById()</code></li><li><code>document.getElementsByClassName()</code></li><li><code>document.querySelector()</code> (æ›´å¸¸ç”¨)</li></ul></li><li><strong>æ“ä½œå±æ€§</strong>ï¼š<ul><li><code>element.attribute = &#39;...&#39;</code> (ä¾‹å¦‚ <code>element.style.color = &#39;red&#39;</code>)</li><li><code>element.setAttribute(&#39;attr&#39;, &#39;value&#39;)</code></li></ul></li><li><strong>æ“ä½œå†…å®¹</strong>ï¼š<ul><li><code>element.innerHTML</code>ï¼šè·å–æˆ–è®¾ç½®å…ƒç´ çš„ HTML å†…å®¹ï¼ˆåŒ…æ‹¬å­æ ‡ç­¾ï¼‰ã€‚</li><li><code>element.textContent</code>ï¼šè·å–æˆ–è®¾ç½®å…ƒç´ çš„æ–‡æœ¬å†…å®¹ï¼ˆä¸å« HTMLï¼‰ã€‚</li></ul></li></ul></li></ul><p>å¥½çš„ï¼Œæˆ‘å°†æ ¹æ®æ‚¨æä¾›çš„è¿™ä»½è¯¦å°½çš„ Web æŠ€æœ¯ç¬”è®°ï¼Œä»¥ä¸€ç§æ›´ä¸“ä¸šã€æ›´ç³»ç»Ÿçš„æ–¹å¼ï¼Œå¯¹å…¶è¿›è¡Œé‡æ–°ç»„ç»‡ã€è¡¥å……å’Œæ·±å…¥è§£æï¼Œä½¿å…¶æˆä¸ºä¸€ä»½é«˜è´¨é‡çš„æŠ€æœ¯è®²è§£æˆ–é¢è¯•å›ç­”ã€‚</p><hr><h3 id="ä¸€ã€Web-æ¶æ„ä¸ç½‘ç»œåŸºç¡€"><a href="#ä¸€ã€Web-æ¶æ„ä¸ç½‘ç»œåŸºç¡€" class="headerlink" title="ä¸€ã€Web æ¶æ„ä¸ç½‘ç»œåŸºç¡€"></a>ä¸€ã€Web æ¶æ„ä¸ç½‘ç»œåŸºç¡€</h3><h4 id="1-å¸¸è§çš„è½¯ä»¶æ¶æ„"><a href="#1-å¸¸è§çš„è½¯ä»¶æ¶æ„" class="headerlink" title="1. å¸¸è§çš„è½¯ä»¶æ¶æ„"></a>1. å¸¸è§çš„è½¯ä»¶æ¶æ„</h4><ul><li><strong>B&#x2F;S æ¶æ„ (Browser&#x2F;Server)</strong>ï¼š<ul><li><strong>æ¦‚å¿µ</strong>ï¼šæµè§ˆå™¨å’ŒæœåŠ¡å™¨æ¶æ„ã€‚å®¢æˆ·ç«¯åªéœ€å®‰è£…ä¸€ä¸ªé€šç”¨çš„æµè§ˆå™¨ï¼Œä¸šåŠ¡é€»è¾‘å’Œæ•°æ®éƒ½å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ã€‚</li><li><strong>ä¼˜ç‚¹</strong>ï¼šæ˜“äºç»´æŠ¤å’Œå‡çº§ï¼Œè·¨å¹³å°æ€§å¥½ã€‚</li><li><strong>ç¼ºç‚¹</strong>ï¼šå¯¹ç½‘ç»œä¾èµ–æ€§å¼ºï¼Œç”¨æˆ·ä½“éªŒå¯èƒ½ä¸å¦‚ C&#x2F;S æ¶æ„ã€‚</li></ul></li><li><strong>C&#x2F;S æ¶æ„ (Client&#x2F;Server)</strong>ï¼š<ul><li><strong>æ¦‚å¿µ</strong>ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ¶æ„ã€‚å®¢æˆ·ç«¯éœ€è¦å®‰è£…ä¸“ç”¨çš„åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚æ¡Œé¢ QQã€å¾®ä¿¡ç­‰ã€‚</li><li><strong>ä¼˜ç‚¹</strong>ï¼šç”¨æˆ·ä½“éªŒå¥½ï¼Œå“åº”é€Ÿåº¦å¿«ï¼Œå¯ä»¥ç¦»çº¿ä½¿ç”¨ã€‚</li><li><strong>ç¼ºç‚¹</strong>ï¼šç»´æŠ¤å’Œå‡çº§å¤æ‚ï¼Œéœ€è¦ä¸ºä¸åŒå¹³å°å¼€å‘ä¸åŒç‰ˆæœ¬ã€‚</li></ul></li></ul><h4 id="2-ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ "><a href="#2-ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ " class="headerlink" title="2. ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ "></a>2. ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ </h4><p>è¿™æ˜¯æ‰€æœ‰ç½‘ç»œé€šä¿¡çš„åŸºç¡€ï¼Œç†è§£è¿™ä¸‰ç‚¹è‡³å…³é‡è¦ã€‚</p><ul><li><strong>IP åœ°å€</strong>ï¼šè®¾å¤‡åœ¨ç½‘ç»œä¸Šçš„å”¯ä¸€æ ‡è¯†ï¼Œç±»ä¼¼äºä½ çš„å®¶åº­ä½å€ã€‚å®ƒç”¨äºåœ¨ç½‘ç»œä¸­å®šä½åˆ°ä¸€å°å…·ä½“çš„è®¡ç®—æœºã€‚</li><li><strong>ç«¯å£å·</strong>ï¼šåº”ç”¨ç¨‹åºåœ¨è®¡ç®—æœºä¸Šçš„å”¯ä¸€æ ‡è¯†ï¼Œç±»ä¼¼äºä½ å®¶é‡Œçš„ç”µè¯å·ç æˆ–é—¨ç‰Œå·ã€‚ä¸€å°è®¡ç®—æœºä¸Šå¯ä»¥è¿è¡Œå¤šä¸ªåº”ç”¨ç¨‹åºï¼Œç«¯å£å·ç”¨äºåŒºåˆ†å®ƒä»¬ã€‚</li><li><strong>åè®®</strong>ï¼šé€šä¿¡è§„åˆ™ã€‚å°±åƒäººä¸äººäº¤æµéœ€è¦éµå¾ªå…±åŒçš„è¯­è¨€ä¸€æ ·ï¼Œç½‘ç»œè®¾å¤‡ä¹‹é—´é€šä¿¡ä¹Ÿéœ€è¦éµå¾ªç‰¹å®šçš„åè®®ï¼Œå¦‚ HTTPã€FTPã€TCP ç­‰ã€‚</li></ul><h4 id="3-èµ„æºçš„åˆ†ç±»"><a href="#3-èµ„æºçš„åˆ†ç±»" class="headerlink" title="3. èµ„æºçš„åˆ†ç±»"></a>3. èµ„æºçš„åˆ†ç±»</h4><ul><li><strong>é™æ€èµ„æº</strong>ï¼š<ul><li><strong>ç‰¹ç‚¹</strong>ï¼šå†…å®¹å›ºå®šï¼Œæ— éœ€æœåŠ¡å™¨ç«¯å¤„ç†ï¼Œå¯ç”±æµè§ˆå™¨ç›´æ¥è§£æã€‚</li><li><strong>åŸç†</strong>ï¼šå½“æµè§ˆå™¨è¯·æ±‚é™æ€èµ„æºæ—¶ï¼ŒWeb æœåŠ¡å™¨ç›´æ¥ä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–æ–‡ä»¶å¹¶è¿”å›ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼šHTMLã€CSSã€JSã€å›¾ç‰‡ç­‰ã€‚</li></ul></li><li><strong>åŠ¨æ€èµ„æº</strong>ï¼š<ul><li><strong>ç‰¹ç‚¹</strong>ï¼šå†…å®¹åŠ¨æ€ç”Ÿæˆï¼Œéœ€è¦æœåŠ¡å™¨ç«¯å¤„ç†åæ‰èƒ½è¿”å›ç»™æµè§ˆå™¨ã€‚</li><li><strong>åŸç†</strong>ï¼šå½“æµè§ˆå™¨è¯·æ±‚åŠ¨æ€èµ„æºæ—¶ï¼ŒWeb æœåŠ¡å™¨å°†è¯·æ±‚äº¤ç»™<strong>åå°ç¨‹åº</strong>ï¼ˆå¦‚ Servlet å®¹å™¨ï¼‰ï¼Œåå°ç¨‹åºæ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œç”Ÿæˆé™æ€å†…å®¹ï¼ˆå¦‚ HTMLã€JSON ç­‰ï¼‰ï¼Œç„¶åè¿”å›ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å†è¿”å›ç»™æµè§ˆå™¨ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼šServletã€JSPã€PHPã€ASP ç­‰ã€‚</li></ul></li></ul><h3 id="äºŒã€Web-æœåŠ¡å™¨"><a href="#äºŒã€Web-æœåŠ¡å™¨" class="headerlink" title="äºŒã€Web æœåŠ¡å™¨"></a>äºŒã€Web æœåŠ¡å™¨</h3><h4 id="1-ä½œç”¨"><a href="#1-ä½œç”¨" class="headerlink" title="1. ä½œç”¨"></a>1. ä½œç”¨</h4><p>Web æœåŠ¡å™¨ï¼ˆä¹Ÿç§°ä¸º <strong>Web å®¹å™¨</strong>ï¼‰æ˜¯ä¸€ä¸ªè½¯ä»¶ï¼Œå®ƒè´Ÿè´£å¤„ç† HTTP è¯·æ±‚ï¼Œå¹¶æä¾›é™æ€èµ„æºå’ŒåŠ¨æ€èµ„æºã€‚å®ƒä¸ºåŠ¨æ€èµ„æºï¼ˆå¦‚ Servletï¼‰æä¾›äº†ä¸€ä¸ªè¿è¡Œç¯å¢ƒã€‚</p><h4 id="2-å¸¸è§çš„-Web-æœåŠ¡å™¨"><a href="#2-å¸¸è§çš„-Web-æœåŠ¡å™¨" class="headerlink" title="2. å¸¸è§çš„ Web æœåŠ¡å™¨"></a>2. å¸¸è§çš„ Web æœåŠ¡å™¨</h4><ul><li><strong>Tomcat</strong>ï¼šApache åŸºé‡‘ç»„ç»‡å¼€å‘ï¼Œ<strong>ä¸­å°å‹çš„ JavaEE æœåŠ¡å™¨</strong>ï¼Œ<strong>å…è´¹</strong>ä¸”å¼€æºã€‚å®ƒæ˜¯ä¸€ä¸ª<strong>Servlet å®¹å™¨</strong>ï¼Œèƒ½å¤Ÿè¿è¡Œ Servlet å’Œ JSPã€‚</li><li><strong>WebSphere</strong>ï¼šIBM å…¬å¸å¼€å‘ï¼Œ<strong>å¤§å‹çš„ JavaEE æœåŠ¡å™¨</strong>ï¼Œ<strong>æ”¶è´¹</strong>ã€‚åŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒå®Œæ•´çš„ JavaEE è§„èŒƒã€‚</li><li><strong>WebLogic</strong>ï¼šOracle å…¬å¸å¼€å‘ï¼Œ<strong>å¤§å‹çš„ JavaEE æœåŠ¡å™¨</strong>ï¼Œ<strong>æ”¶è´¹</strong>ã€‚</li><li><strong>JBoss&#x2F;WildFly</strong>ï¼šå¼€æºï¼Œä½†å…¶å•†ä¸šç‰ˆæ”¶è´¹ã€‚</li></ul><h3 id="ä¸‰ã€Tomcat-çš„ä½¿ç”¨ä¸é…ç½®"><a href="#ä¸‰ã€Tomcat-çš„ä½¿ç”¨ä¸é…ç½®" class="headerlink" title="ä¸‰ã€Tomcat çš„ä½¿ç”¨ä¸é…ç½®"></a>ä¸‰ã€Tomcat çš„ä½¿ç”¨ä¸é…ç½®</h3><ul><li><strong>å®‰è£…ä¸å¯åŠ¨</strong>ï¼šTomcat æ˜¯å…å®‰è£…çš„ï¼Œè§£å‹å³å¯ã€‚å¯åŠ¨å‰éœ€è¦é…ç½® <code>JAVA_HOME</code> ç¯å¢ƒå˜é‡ã€‚å¯åŠ¨åï¼Œé»˜è®¤ç›‘å¬ <code>8080</code> ç«¯å£ã€‚</li><li><strong>ç«¯å£å·ä¿®æ”¹</strong>ï¼š<ul><li><strong>é¢è¯•é¢˜</strong>ï¼šä¿®æ”¹ Tomcat ç«¯å£å·åœ¨å“ªä¸ªæ–‡ä»¶ï¼Ÿ</li><li><strong>å›ç­”</strong>ï¼šåœ¨ Tomcat çš„ <code>conf</code> ç›®å½•ä¸‹çš„ <code>server.xml</code> æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹ <code>&lt;Connector&gt;</code> æ ‡ç­¾çš„ <code>port</code> å±æ€§ã€‚</li><li><strong>æ³¨æ„</strong>ï¼šHTTP åè®®çš„é»˜è®¤ç«¯å£å·æ˜¯ <code>80</code>ã€‚å¦‚æœå°† Tomcat ç«¯å£å·æ”¹ä¸º <code>80</code>ï¼Œé‚£ä¹ˆè®¿é—®æ—¶å°±å¯ä»¥çœç•¥ç«¯å£å·ï¼Œä¾‹å¦‚ <code>http://localhost/</code>ã€‚</li></ul></li><li><strong>é¡¹ç›®éƒ¨ç½²</strong>ï¼š<ul><li><strong>é™æ€é¡¹ç›®</strong>ï¼šå°† HTMLã€CSSã€JS ç­‰æ–‡ä»¶ç›´æ¥æ”¾åˆ° <code>webapps</code> ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹ä¸­ã€‚</li><li><strong>åŠ¨æ€é¡¹ç›®</strong>ï¼šå°†åŒ…å« <code>WEB-INF</code> æ–‡ä»¶å¤¹çš„æ•´ä¸ªé¡¹ç›®ç›®å½•æ”¾åˆ° <code>webapps</code> ç›®å½•ä¸‹ã€‚</li><li><strong>WEB-INF</strong>ï¼šè¿™æ˜¯åŠ¨æ€é¡¹ç›®çš„æ ¸å¿ƒç›®å½•ï¼Œå…·æœ‰ç‰¹æ®Šä½œç”¨ï¼Œå¤–éƒ¨æ— æ³•ç›´æ¥é€šè¿‡ URL è®¿é—®è¯¥ç›®å½•ä¸‹çš„èµ„æºï¼Œä¿è¯äº†é¡¹ç›®çš„å®‰å…¨æ€§ã€‚<ul><li><code>classes</code>ï¼šå­˜æ”¾æ‰€æœ‰ç¼–è¯‘åçš„ <code>.class</code> å­—èŠ‚ç æ–‡ä»¶ã€‚</li><li><code>lib</code>ï¼šå­˜æ”¾é¡¹ç›®ä¾èµ–çš„ç¬¬ä¸‰æ–¹ <code>.jar</code> åŒ…ã€‚</li><li><code>web.xml</code>ï¼šWeb é¡¹ç›®çš„<strong>æ ¸å¿ƒé…ç½®æ–‡ä»¶</strong>ï¼Œç”¨äºé…ç½® Servletã€ç›‘å¬å™¨ã€è¿‡æ»¤å™¨ç­‰ã€‚</li></ul></li></ul></li></ul><h3 id="å››ã€Servlet-æ·±å…¥è§£æ"><a href="#å››ã€Servlet-æ·±å…¥è§£æ" class="headerlink" title="å››ã€Servlet æ·±å…¥è§£æ"></a>å››ã€Servlet æ·±å…¥è§£æ</h3><h4 id="1-Servlet-çš„æ¦‚å¿µå’Œæœ¬è´¨"><a href="#1-Servlet-çš„æ¦‚å¿µå’Œæœ¬è´¨" class="headerlink" title="1. Servlet çš„æ¦‚å¿µå’Œæœ¬è´¨"></a>1. Servlet çš„æ¦‚å¿µå’Œæœ¬è´¨</h4><ul><li><strong>æ¦‚å¿µ</strong>ï¼šServlet æ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„ Java ç¨‹åºï¼Œç”¨äºå¤„ç†å®¢æˆ·ç«¯è¯·æ±‚å¹¶ç”ŸæˆåŠ¨æ€å“åº”ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºï¼Œ<strong>å¿…é¡»éƒ¨ç½²åˆ°æ”¯æŒ Servlet çš„å®¹å™¨ä¸­</strong>ï¼ˆå¦‚ Tomcatï¼‰æ‰èƒ½è¿è¡Œã€‚</li><li><strong>æœ¬è´¨</strong>ï¼šServlet çš„æœ¬è´¨æ˜¯ä¸€ä¸ª<strong>æ¥å£</strong>ã€‚æ‰€æœ‰è‡ªå®šä¹‰çš„ Servlet ç±»éƒ½å¿…é¡»<strong>å®ç° javax.servlet.Servlet æ¥å£</strong>ã€‚</li></ul><h4 id="2-Servlet-çš„æ‰§è¡ŒåŸç†ï¼ˆè¯¦ç»†è§£é‡Šï¼‰"><a href="#2-Servlet-çš„æ‰§è¡ŒåŸç†ï¼ˆè¯¦ç»†è§£é‡Šï¼‰" class="headerlink" title="2. Servlet çš„æ‰§è¡ŒåŸç†ï¼ˆè¯¦ç»†è§£é‡Šï¼‰"></a>2. Servlet çš„æ‰§è¡ŒåŸç†ï¼ˆè¯¦ç»†è§£é‡Šï¼‰</h4><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„é¢è¯•ç‚¹ï¼Œéœ€è¦ä»è¯·æ±‚-å“åº”çš„æ•´ä¸ªæµç¨‹æ¥è¯¦ç»†é˜è¿°ã€‚</p><ol><li><strong>å®¢æˆ·ç«¯è¯·æ±‚</strong>ï¼šç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ URLï¼Œå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ª HTTP è¯·æ±‚ã€‚</li><li><strong>Web æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚</strong>ï¼šWeb æœåŠ¡å™¨ï¼ˆTomcatï¼‰æ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ã€‚</li><li><strong>Servlet å®¹å™¨å¤„ç†</strong>ï¼šTomcat ä¼šæ ¹æ®è¯·æ±‚ URLï¼Œåœ¨ <code>web.xml</code> æˆ–é€šè¿‡æ³¨è§£ï¼ˆå¦‚ <code>@WebServlet</code>ï¼‰æŸ¥æ‰¾åŒ¹é…çš„ Servletã€‚</li><li><strong>Servlet å®ä¾‹åˆ›å»º</strong>ï¼š<ul><li>å¦‚æœæ˜¯<strong>ç¬¬ä¸€æ¬¡</strong>è®¿é—®è¯¥ Servletï¼ŒServlet å®¹å™¨ä¼šåˆ›å»ºä¸€ä¸ªè¯¥ Servlet çš„å®ä¾‹ã€‚</li><li><strong>é¢è¯•ç‚¹</strong>ï¼šServlet æ˜¯<strong>å•ä¾‹çš„</strong>ï¼Œä¸€ä¸ª Servlet åœ¨å®¹å™¨ä¸­åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ã€‚</li></ul></li><li><strong>init() æ–¹æ³•æ‰§è¡Œ</strong>ï¼š<ul><li>åœ¨ Servlet å®ä¾‹åˆ›å»ºåï¼Œå®¹å™¨ä¼šç«‹å³è°ƒç”¨å®ƒçš„ <code>init()</code> æ–¹æ³•ã€‚</li><li><code>init()</code> æ–¹æ³•åªåœ¨ Servlet çš„<strong>ç”Ÿå‘½å‘¨æœŸä¸­æ‰§è¡Œä¸€æ¬¡</strong>ï¼Œç”¨äºå®Œæˆä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œå¦‚åŠ è½½é…ç½®æ–‡ä»¶ã€æ•°æ®åº“è¿æ¥ç­‰ã€‚</li></ul></li><li><strong>service() æ–¹æ³•æ‰§è¡Œ</strong>ï¼š<ul><li>æ¯æ¬¡å®¢æˆ·ç«¯è¯·æ±‚è¯¥ Servlet æ—¶ï¼Œå®¹å™¨éƒ½ä¼šè°ƒç”¨å®ƒçš„ <code>service()</code> æ–¹æ³•ã€‚</li><li><code>service()</code> æ–¹æ³•æ ¹æ®è¯·æ±‚çš„ HTTP æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ï¼Œå°†è¯·æ±‚åˆ†å‘ç»™ç›¸åº”çš„ <code>doGet()</code> æˆ– <code>doPost()</code> æ–¹æ³•ã€‚</li><li><strong>é¢è¯•ç‚¹</strong>ï¼š<code>service()</code> æ–¹æ³•æ˜¯å¤„ç†è¯·æ±‚çš„æ ¸å¿ƒæ–¹æ³•ï¼Œå®ƒæ˜¯<strong>å¤šçº¿ç¨‹çš„</strong>ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½ä¼šåœ¨æ–°çº¿ç¨‹ä¸­æ‰§è¡Œ <code>service()</code> æ–¹æ³•ã€‚</li></ul></li><li><strong>destroy() æ–¹æ³•æ‰§è¡Œ</strong>ï¼š<ul><li>å½“ Servlet å®¹å™¨å…³é—­ï¼Œæˆ–è€…å†³å®šå¸è½½è¯¥ Servlet æ—¶ï¼Œä¼šè°ƒç”¨å…¶ <code>destroy()</code> æ–¹æ³•ã€‚</li><li><code>destroy()</code> æ–¹æ³•ä¹Ÿåªæ‰§è¡Œä¸€æ¬¡ï¼Œç”¨äºé‡Šæ”¾èµ„æºï¼Œå¦‚å…³é—­æ•°æ®åº“è¿æ¥æ± ã€‚</li></ul></li></ol><p><strong>æ€»ç»“</strong>ï¼šServlet çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ï¼š<strong>åˆ›å»ºå®ä¾‹</strong> -&gt; <strong>è°ƒç”¨ init()</strong> (åªä¸€æ¬¡) -&gt; <strong>è°ƒç”¨ service()</strong> (å¤šæ¬¡) -&gt; <strong>è°ƒç”¨ destroy()</strong> (åªä¸€æ¬¡) -&gt; <strong>é”€æ¯å®ä¾‹</strong>ã€‚</p><p>å¥½çš„ï¼Œæˆ‘ä»¬æ¥å°†â€œç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ â€è¿™ä¸€éƒ¨åˆ†è¿›è¡Œæ›´æ·±å…¥ã€æ›´è¯¦ç»†çš„å±•å¼€ï¼Œå¹¶è¡¥å……å¸¸è§åº”ç”¨çš„é»˜è®¤ç«¯å£å·ï¼Œä½¿å…¶æ›´å…·å®ç”¨æ€§å’Œé¢è¯•ä»·å€¼ã€‚</p><hr><h3 id="ä¸€ã€ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ ï¼šæ·±å…¥è§£æ"><a href="#ä¸€ã€ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ ï¼šæ·±å…¥è§£æ" class="headerlink" title="ä¸€ã€ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ ï¼šæ·±å…¥è§£æ"></a>ä¸€ã€ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ ï¼šæ·±å…¥è§£æ</h3><p>ç½‘ç»œç¼–ç¨‹çš„æœ¬è´¨å°±æ˜¯è®©ä¸åŒçš„è®¡ç®—æœºä¸Šçš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿè¿›è¡Œé€šä¿¡ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œå¿…é¡»è§£å†³ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</p><ol><li><strong>æ‰¾åˆ°å¯¹æ–¹è®¡ç®—æœº</strong>ï¼šIP åœ°å€</li><li><strong>æ‰¾åˆ°å¯¹æ–¹è®¡ç®—æœºä¸Šçš„åº”ç”¨ç¨‹åº</strong>ï¼šç«¯å£å·</li><li><strong>ä»¥ä»€ä¹ˆæ ·çš„è§„åˆ™è¿›è¡Œé€šä¿¡</strong>ï¼šåè®®</li></ol><p>è¿™ä¸‰è€…ç¼ºä¸€ä¸å¯ã€‚</p><h4 id="1-IP-åœ°å€-Internet-Protocol-Address"><a href="#1-IP-åœ°å€-Internet-Protocol-Address" class="headerlink" title="1. IP åœ°å€ (Internet Protocol Address)"></a>1. IP åœ°å€ (Internet Protocol Address)</h4><ul><li><strong>æ¦‚å¿µ</strong>ï¼šIP åœ°å€æ˜¯åˆ†é…ç»™è¿æ¥åˆ°ç½‘ç»œä¸­çš„è®¾å¤‡ï¼ˆå¦‚è®¡ç®—æœºã€æ‰‹æœºã€æœåŠ¡å™¨ï¼‰çš„ä¸€ä¸²æ•°å­—æ ‡è¯†ã€‚</li><li><strong>ä½œç”¨</strong>ï¼šå®ƒç”¨äº<strong>å”¯ä¸€åœ°æ ‡è¯†ç½‘ç»œä¸Šçš„ä¸€ä¸ªè®¾å¤‡</strong>ã€‚æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­ä¼ è¾“æ—¶ï¼Œå°±æ˜¯æ ¹æ® IP åœ°å€æ¥è·¯ç”±å’Œå¯»å€çš„ã€‚</li><li><strong>ç‰ˆæœ¬</strong>ï¼š<ul><li><strong>IPv4</strong>ï¼šç”± 32 ä½äºŒè¿›åˆ¶æ•°ç»„æˆï¼Œé€šå¸¸è¡¨ç¤ºä¸ºå››ä¸ªåè¿›åˆ¶æ•°ï¼Œç”¨ç‚¹åˆ†éš”ï¼ˆä¾‹å¦‚ <code>192.168.1.1</code>ï¼‰ã€‚ç”±äºåœ°å€èµ„æºæ¯ç«­ï¼Œç°åœ¨å·²ç»ä¸å¤Ÿç”¨ã€‚</li><li><strong>IPv6</strong>ï¼šç”± 128 ä½äºŒè¿›åˆ¶æ•°ç»„æˆï¼Œåœ°å€ç©ºé—´å·¨å¤§ï¼Œè¶³ä»¥æ»¡è¶³æœªæ¥éœ€æ±‚ã€‚</li></ul></li><li><strong>ç±»å‹</strong>ï¼š<ul><li><strong>å…¬ç½‘ IP</strong>ï¼šåœ¨äº’è”ç½‘ä¸Šæ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ã€‚</li><li><strong>å†…ç½‘ IP</strong>ï¼šåœ¨å±€åŸŸç½‘å†…æ˜¯å”¯ä¸€çš„ï¼Œä¸èƒ½ç›´æ¥åœ¨äº’è”ç½‘ä¸Šè®¿é—®ã€‚ä¾‹å¦‚ <code>192.168.x.x</code>ã€<code>10.x.x.x</code>ã€‚</li></ul></li></ul><h4 id="2-ç«¯å£å·-Port-Number"><a href="#2-ç«¯å£å·-Port-Number" class="headerlink" title="2. ç«¯å£å· (Port Number)"></a>2. ç«¯å£å· (Port Number)</h4><ul><li><strong>æ¦‚å¿µ</strong>ï¼šç«¯å£å·æ˜¯ç”¨äº<strong>åŒºåˆ†ä¸€å°è®¡ç®—æœºä¸Šä¸åŒåº”ç”¨ç¨‹åº</strong>çš„æ•°å­—æ ‡è¯†ã€‚å®ƒçš„èŒƒå›´æ˜¯ä» <code>0</code> åˆ° <code>65535</code>ã€‚</li><li><strong>ä½œç”¨</strong>ï¼šå½“ä¸€ä¸ªæ•°æ®åŒ…åˆ°è¾¾ä¸€å°è®¡ç®—æœºæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæ£€æŸ¥å…¶ç›®çš„ç«¯å£å·ï¼Œç„¶åå°†æ•°æ®åŒ…äº¤ç»™ç›‘å¬è¯¥ç«¯å£å·çš„ç›¸åº”åº”ç”¨ç¨‹åºã€‚</li><li><strong>ä¸ IP åœ°å€çš„å…³ç³»</strong>ï¼šIP åœ°å€è§£å†³äº†â€œæ•°æ®åŒ…å‘é€åˆ°å“ªå°è®¡ç®—æœºâ€çš„é—®é¢˜ï¼Œè€Œç«¯å£å·åˆ™è§£å†³äº†â€œæ•°æ®åŒ…å‘é€åˆ°è¿™å°è®¡ç®—æœºä¸Šçš„å“ªä¸ªåº”ç”¨ç¨‹åºâ€çš„é—®é¢˜ã€‚ä¸¤è€…ç»“åˆèµ·æ¥æ‰èƒ½å”¯ä¸€ç¡®å®šä¸€ä¸ªç½‘ç»œè¿æ¥çš„ç«¯ç‚¹ã€‚</li></ul><h4 id="3-åè®®-Protocol"><a href="#3-åè®®-Protocol" class="headerlink" title="3. åè®® (Protocol)"></a>3. åè®® (Protocol)</h4><ul><li><strong>æ¦‚å¿µ</strong>ï¼šåè®®æ˜¯ç½‘ç»œé€šä¿¡ä¸­<strong>æ•°æ®ä¼ è¾“çš„è§„åˆ™å’Œçº¦å®š</strong>ã€‚å®ƒå®šä¹‰äº†æ•°æ®å¦‚ä½•æ‰“åŒ…ã€ä¼ è¾“ã€è·¯ç”±å’Œæ¥æ”¶ã€‚</li><li><strong>ä½œç”¨</strong>ï¼šç¡®ä¿é€šä¿¡åŒæ–¹èƒ½å¤Ÿç†è§£å½¼æ­¤å‘é€çš„æ•°æ®ã€‚æ²¡æœ‰åè®®ï¼Œæ•°æ®åŒ…å°±æ˜¯ä¸€å †æ— æ„ä¹‰çš„å­—èŠ‚ã€‚</li><li><strong>åˆ†å±‚</strong>ï¼šç½‘ç»œåè®®é€šå¸¸æ˜¯åˆ†å±‚çš„ï¼Œæœ€ç»å…¸çš„æ˜¯ <strong>TCP&#x2F;IP åè®®æ ˆ</strong>ã€‚<ul><li><strong>åº”ç”¨å±‚</strong>ï¼š<strong>å†³å®šæ•°æ®å†…å®¹</strong>ï¼Œå¦‚ HTTPã€FTPã€SMTPã€‚</li><li><strong>ä¼ è¾“å±‚</strong>ï¼š<strong>å†³å®šæ•°æ®å¦‚ä½•ä¼ è¾“</strong>ï¼Œå¦‚ TCP å’Œ UDPã€‚<ul><li><strong>TCP (Transmission Control Protocol)</strong>ï¼šé¢å‘è¿æ¥ã€å¯é ã€æœ‰åºã€‚é€‚ç”¨äºå¯¹æ•°æ®å®Œæ•´æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼Œå¦‚æ–‡ä»¶ä¼ è¾“ã€ç½‘é¡µæµè§ˆã€‚</li><li><strong>UDP (User Datagram Protocol)</strong>ï¼šæ— è¿æ¥ã€ä¸å¯é ã€é€Ÿåº¦å¿«ã€‚é€‚ç”¨äºå¯¹å®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼Œå¦‚åœ¨çº¿è§†é¢‘ã€æ¸¸æˆã€‚</li></ul></li><li><strong>ç½‘ç»œå±‚</strong>ï¼š<strong>å†³å®šæ•°æ®å¦‚ä½•è·¯ç”±</strong>ï¼Œå¦‚ IP åè®®ã€‚</li><li><strong>æ•°æ®é“¾è·¯å±‚&#x2F;ç‰©ç†å±‚</strong>ï¼šè´Ÿè´£ç‰©ç†è®¾å¤‡çš„é€šä¿¡ã€‚</li></ul></li></ul><hr><h3 id="äºŒã€å¸¸è§åº”ç”¨çš„é»˜è®¤ç«¯å£å·"><a href="#äºŒã€å¸¸è§åº”ç”¨çš„é»˜è®¤ç«¯å£å·" class="headerlink" title="äºŒã€å¸¸è§åº”ç”¨çš„é»˜è®¤ç«¯å£å·"></a>äºŒã€å¸¸è§åº”ç”¨çš„é»˜è®¤ç«¯å£å·</h3><p>äº†è§£è¿™äº›é»˜è®¤ç«¯å£å·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ç½‘ç»œåè®®å’ŒæœåŠ¡ã€‚</p><ul><li><strong>Web æœåŠ¡</strong><ul><li><strong>HTTP</strong> (HyperText Transfer Protocol)ï¼š<strong>80</strong></li><li><strong>HTTPS</strong> (HTTP Secure)ï¼š<strong>443</strong></li><li><strong>Tomcat</strong> (é»˜è®¤)ï¼š<strong>8080</strong></li><li><strong>WebLogic</strong> (é»˜è®¤)ï¼š<strong>7001</strong></li></ul></li><li><strong>æ–‡ä»¶ä¼ è¾“</strong><ul><li><strong>FTP</strong> (File Transfer Protocol)ï¼š<strong>21</strong> (æ§åˆ¶è¿æ¥)</li><li><strong>SFTP</strong> (SSH File Transfer Protocol)ï¼š<strong>22</strong></li></ul></li><li><strong>è¿œç¨‹ç™»å½•ä¸ç®¡ç†</strong><ul><li><strong>SSH</strong> (Secure Shell)ï¼š<strong>22</strong></li><li><strong>Telnet</strong>ï¼š<strong>23</strong></li><li><strong>RDP</strong> (Remote Desktop Protocol)ï¼š<strong>3389</strong></li></ul></li><li><strong>æ•°æ®åº“æœåŠ¡</strong><ul><li><strong>MySQL</strong>ï¼š<strong>3306</strong></li><li><strong>PostgreSQL</strong>ï¼š<strong>5432</strong></li><li><strong>SQL Server</strong>ï¼š<strong>1433</strong></li><li><strong>Oracle</strong>ï¼š<strong>1521</strong></li></ul></li><li><strong>é‚®ä»¶æœåŠ¡</strong><ul><li><strong>SMTP</strong> (Simple Mail Transfer Protocol)ï¼š<strong>25</strong> (å‘é€é‚®ä»¶)</li><li><strong>POP3</strong> (Post Office Protocol 3)ï¼š<strong>110</strong> (æ¥æ”¶é‚®ä»¶)</li><li><strong>IMAP</strong> (Internet Message Access Protocol)ï¼š<strong>143</strong> (æ¥æ”¶é‚®ä»¶)</li></ul></li><li><strong>å…¶ä»–å¸¸è§æœåŠ¡</strong><ul><li><strong>DNS</strong> (Domain Name System)ï¼š<strong>53</strong></li><li><strong>Redis</strong>ï¼š<strong>6379</strong></li><li><strong>MongoDB</strong>ï¼š<strong>27017</strong></li><li><strong>Kafka</strong>ï¼š<strong>9092</strong></li></ul></li></ul><p>ä¸ºä»€ä¹ˆéœ€è¦é»˜è®¤ç«¯å£å·ï¼Ÿ</p><p>ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ã€‚å½“ä½ åœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="http://www.example.com/">www.example.com</a> æ—¶ï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥ <a href="http://www.example.com:80ï¼Œå› ä¸ºæµè§ˆå™¨çŸ¥é“">www.example.com:80ï¼Œå› ä¸ºæµè§ˆå™¨çŸ¥é“</a> HTTP åè®®çš„é»˜è®¤ç«¯å£å°±æ˜¯ 80ã€‚å¦‚æœæœåŠ¡å™¨çš„ç«¯å£ä¸æ˜¯é»˜è®¤ç«¯å£ï¼Œä½ å°±å¿…é¡»æ‰‹åŠ¨æŒ‡å®šï¼Œæ¯”å¦‚ <a href="http://www.example.com:8080ã€‚">www.example.com:8080ã€‚</a></p><p>å¥½çš„ï¼Œæˆ‘å°†æ ¹æ®æ‚¨æä¾›çš„è¿™ä»½è¯¦å°½çš„ Web æŠ€æœ¯ç¬”è®°ï¼Œä»¥ä¸€ç§æ›´ä¸“ä¸šã€æ›´ç³»ç»Ÿçš„æ–¹å¼ï¼Œå¯¹å…¶è¿›è¡Œé‡æ–°ç»„ç»‡ã€è¡¥å……å’Œæ·±å…¥è§£æï¼Œä½¿å…¶æˆä¸ºä¸€ä»½é«˜è´¨é‡çš„æŠ€æœ¯è®²è§£æˆ–é¢è¯•å›ç­”ã€‚</p><hr><h3 id="ä¸€ã€Servlet-å‰©ä½™éƒ¨åˆ†"><a href="#ä¸€ã€Servlet-å‰©ä½™éƒ¨åˆ†" class="headerlink" title="ä¸€ã€Servlet å‰©ä½™éƒ¨åˆ†"></a>ä¸€ã€Servlet å‰©ä½™éƒ¨åˆ†</h3><h4 id="1-Servlet-çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•"><a href="#1-Servlet-çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•" class="headerlink" title="1. Servlet çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•"></a>1. Servlet çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</h4><p>è¿™æ˜¯ç†è§£ Servlet å·¥ä½œåŸç†çš„æ ¸å¿ƒã€‚</p><ul><li><strong>init() æ–¹æ³•</strong>ï¼š<ul><li><strong>ç‰¹ç‚¹</strong>ï¼šåªæ‰§è¡Œ<strong>ä¸€æ¬¡</strong>ï¼Œç”¨äºåˆå§‹åŒ– Servlet å®ä¾‹ã€‚</li><li><strong>æ‰§è¡Œæ—¶æœº</strong>ï¼š<ul><li><strong>é»˜è®¤ï¼ˆæ‡’åŠ è½½ï¼‰</strong>ï¼šç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶æ‰§è¡Œã€‚è¿™æ˜¯ä¸€ç§â€œæŒ‰éœ€åŠ è½½â€çš„ç­–ç•¥ï¼ŒèŠ‚çœäº†æœåŠ¡å™¨å¯åŠ¨æ—¶çš„èµ„æºã€‚</li><li><strong>é¢„åŠ è½½</strong>ï¼šå¯ä»¥åœ¨ <code>web.xml</code> ä¸­é€šè¿‡ <code>&lt;load-on-startup&gt;</code> æ ‡ç­¾æ¥è®¾ç½®ã€‚å¦‚æœå€¼ä¸ºéè´Ÿæ•´æ•°ï¼ˆ<code>0</code>æˆ–æ­£æ•°ï¼‰ï¼ŒServlet å®¹å™¨å°†åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶ç«‹å³åˆ›å»ºå¹¶åˆå§‹åŒ–è¯¥ Servletã€‚è¿™é€‚ç”¨äºéœ€è¦ç«‹å³æä¾›æœåŠ¡ã€å¯åŠ¨è€—æ—¶è¾ƒé•¿çš„ Servletã€‚</li></ul></li></ul></li><li><strong>service() æ–¹æ³•</strong>ï¼š<ul><li><strong>ç‰¹ç‚¹</strong>ï¼šæ¯æ¬¡å®¢æˆ·ç«¯è¯·æ±‚è¯¥ Servlet æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</li><li><strong>åŸç†</strong>ï¼šå®ƒæ˜¯ Servlet æ¥å£çš„æ ¸å¿ƒæ–¹æ³•ï¼Œç”¨äºå¤„ç†è¯·æ±‚ã€‚å¯¹äº <code>HttpServlet</code> æ¥è¯´ï¼Œå®ƒä¼šæ ¹æ® HTTP è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰æ¥åˆ†å‘è¯·æ±‚ç»™ç›¸åº”çš„ <code>doGet()</code> æˆ– <code>doPost()</code> æ–¹æ³•ã€‚</li><li><strong>é‡è¦æ€§</strong>ï¼š<strong>service() æ–¹æ³•æ˜¯å¤šçº¿ç¨‹çš„</strong>ã€‚Servlet å®¹å™¨ä¼šä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹æ¥æ‰§è¡Œ <code>service()</code> æ–¹æ³•ï¼Œç¡®ä¿å¹¶å‘è®¿é—®æ—¶äº’ä¸å½±å“ã€‚</li></ul></li><li><strong>destroy() æ–¹æ³•</strong>ï¼š<ul><li><strong>ç‰¹ç‚¹</strong>ï¼šåªæ‰§è¡Œ<strong>ä¸€æ¬¡</strong>ï¼Œåœ¨ Servlet å®ä¾‹æ­£å¸¸é”€æ¯æ—¶è°ƒç”¨ã€‚</li><li><strong>æ‰§è¡Œæ—¶æœº</strong>ï¼šé€šå¸¸åœ¨ Web åº”ç”¨å…³é—­æˆ– Servlet å®¹å™¨å…³é—­æ—¶ã€‚ç”¨äºé‡Šæ”¾èµ„æºï¼Œå¦‚å…³é—­æ•°æ®åº“è¿æ¥ã€æ–‡ä»¶å¥æŸ„ç­‰ã€‚</li></ul></li></ul><h4 id="2-Servlet-çš„å®ç°æ–¹å¼ï¼šXML-vs-æ³¨è§£"><a href="#2-Servlet-çš„å®ç°æ–¹å¼ï¼šXML-vs-æ³¨è§£" class="headerlink" title="2. Servlet çš„å®ç°æ–¹å¼ï¼šXML vs. æ³¨è§£"></a>2. Servlet çš„å®ç°æ–¹å¼ï¼šXML vs. æ³¨è§£</h4><ul><li><p><strong>XML é…ç½®æ–¹å¼</strong>ï¼šåœ¨ <code>web.xml</code> æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ <code>&lt;servlet&gt;</code> å’Œ <code>&lt;servlet-mapping&gt;</code> æ ‡ç­¾æ¥é…ç½® Servlet çš„åç§°ã€ç±»å’Œè®¿é—®è·¯å¾„ã€‚è¿™æ˜¯ Servlet 2.x åŠä»¥å‰ç‰ˆæœ¬çš„ä¸»æµæ–¹å¼ã€‚</p></li><li><p><strong>æ³¨è§£æ–¹å¼</strong>ï¼šè‡ª Servlet 3.0 å¼€å§‹å¼•å…¥ï¼Œå¯ä»¥ä½¿ç”¨ <code>@WebServlet</code> æ³¨è§£æ¥ä»£æ›¿ XML é…ç½®ã€‚</p><ul><li><strong>ä¼˜ç‚¹</strong>ï¼šç®€åŒ–äº†é…ç½®ï¼Œä»£ç å’Œé…ç½®æ›´é›†ä¸­ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š</li></ul><p>Java</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@WebServlet(&quot;/demo&quot;)</span><br><span class="line">public class MyServlet extends HttpServlet &#123; ... &#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-Servlet-çš„ä½“ç³»ç»“æ„"><a href="#3-Servlet-çš„ä½“ç³»ç»“æ„" class="headerlink" title="3. Servlet çš„ä½“ç³»ç»“æ„"></a>3. Servlet çš„ä½“ç³»ç»“æ„</h4><ul><li><code>Servlet</code> <strong>æ¥å£</strong>ï¼šæ‰€æœ‰ Servlet çš„é¡¶å±‚æ¥å£ï¼Œå®šä¹‰äº† <code>init()</code>, <code>service()</code>, <code>destroy()</code> ç­‰æ ¸å¿ƒæ–¹æ³•ã€‚</li><li><code>GenericServlet</code> <strong>æŠ½è±¡ç±»</strong>ï¼šå®ç°äº† <code>Servlet</code> æ¥å£ï¼Œå¹¶æä¾›äº† <code>init()</code>, <code>destroy()</code> çš„ç©ºå®ç°ï¼Œä»¥åŠä¸€äº›é€šç”¨æ–¹æ³•ã€‚å¼€å‘è€…å¯ä»¥ç»§æ‰¿å®ƒæ¥ç¼–å†™åè®®æ— å…³çš„ Servletã€‚</li><li><code>HttpServlet</code> <strong>æŠ½è±¡ç±»</strong>ï¼šç»§æ‰¿è‡ª <code>GenericServlet</code>ï¼Œä¸“é—¨ç”¨äºå¤„ç† <strong>HTTP è¯·æ±‚</strong>ã€‚å®ƒé‡å†™äº† <code>service()</code> æ–¹æ³•ï¼Œå¹¶æ ¹æ®è¯·æ±‚æ–¹æ³•åˆ†å‘ç»™ <code>doGet()</code>, <code>doPost()</code> ç­‰å…·ä½“æ–¹æ³•ã€‚</li><li><strong>æ€»ç»“</strong>ï¼šåœ¨ Web é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å‡ ä¹æ€»æ˜¯å¤„ç† HTTP è¯·æ±‚ï¼Œå› æ­¤<strong>ç»§æ‰¿ HttpServlet æ˜¯æœ€å¸¸ç”¨ã€æœ€æ¨èçš„æ–¹å¼</strong>ã€‚</li></ul><hr><h3 id="äºŒã€HTTP-åè®®"><a href="#äºŒã€HTTP-åè®®" class="headerlink" title="äºŒã€HTTP åè®®"></a>äºŒã€HTTP åè®®</h3><h4 id="1-æ¦‚å¿µä¸ç‰¹ç‚¹"><a href="#1-æ¦‚å¿µä¸ç‰¹ç‚¹" class="headerlink" title="1. æ¦‚å¿µä¸ç‰¹ç‚¹"></a>1. æ¦‚å¿µä¸ç‰¹ç‚¹</h4><ul><li><strong>æ¦‚å¿µ</strong>ï¼š<strong>è¶…æ–‡æœ¬ä¼ è¾“åè®®</strong>ï¼Œæ˜¯ Web åº”ç”¨å±‚åè®®ï¼ŒåŸºäº TCP&#x2F;IPã€‚å®ƒè§„å®šäº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ ¼å¼ã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li><strong>åŸºäº TCP&#x2F;IP</strong>ï¼šå®ƒä½äº TCP&#x2F;IP åè®®æ ˆçš„åº”ç”¨å±‚ï¼Œåˆ©ç”¨äº† TCP çš„å¯é ä¼ è¾“ç‰¹æ€§ã€‚</li><li><strong>è¯·æ±‚&#x2F;å“åº”æ¨¡å‹</strong>ï¼šå®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›å“åº”ï¼Œä¸€æ¬¡è¯·æ±‚åªå¯¹åº”ä¸€æ¬¡å“åº”ã€‚</li><li><strong>æ— çŠ¶æ€</strong>ï¼šè¿™æ˜¯ HTTP çš„æ ¸å¿ƒç‰¹å¾ã€‚æœåŠ¡å™¨ä¸ä¿ç•™ä»»ä½•å…³äºå®¢æˆ·ç«¯è¿‡å»è¯·æ±‚çš„ä¿¡æ¯ã€‚æ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚</li><li><strong>æ— çŠ¶æ€å¸¦æ¥çš„é—®é¢˜</strong>ï¼šæœåŠ¡å™¨æ— æ³•è¯†åˆ«å¤šä¸ªè¯·æ±‚æ˜¯å¦æ¥è‡ªåŒä¸€ä¸ªç”¨æˆ·ï¼Œå› æ­¤éœ€è¦å¼•å…¥<strong>ä¼šè¯æŠ€æœ¯</strong>ï¼ˆå¦‚ Cookie å’Œ Sessionï¼‰æ¥è§£å†³ã€‚</li></ul></li></ul><h4 id="2-HTTP-åè®®çš„æ•°æ®æ ¼å¼"><a href="#2-HTTP-åè®®çš„æ•°æ®æ ¼å¼" class="headerlink" title="2. HTTP åè®®çš„æ•°æ®æ ¼å¼"></a>2. HTTP åè®®çš„æ•°æ®æ ¼å¼</h4><p>HTTP åè®®æ˜¯æ–‡æœ¬æ ¼å¼ï¼Œç”±<strong>è¯·æ±‚æ ¼å¼</strong>å’Œ<strong>å“åº”æ ¼å¼</strong>ä¸¤éƒ¨åˆ†ç»„æˆã€‚</p><ul><li><strong>è¯·æ±‚æ ¼å¼</strong>ï¼š<ol><li><strong>è¯·æ±‚è¡Œ</strong>ï¼š<code>è¯·æ±‚æ–¹å¼ è™šæ‹Ÿè·¯å¾„/èµ„æºè·¯å¾„[?å‚æ•°] è¯·æ±‚åè®®/ç‰ˆæœ¬</code>ã€‚</li><li><strong>è¯·æ±‚å¤´</strong>ï¼šé”®å€¼å¯¹å½¢å¼ï¼Œæä¾›é¢å¤–ä¿¡æ¯ã€‚<ul><li><code>Host</code>ï¼šç›®æ ‡ä¸»æœºåã€‚</li><li><code>User-Agent</code>ï¼šæµè§ˆå™¨ç±»å‹å’Œç‰ˆæœ¬ã€‚</li><li><code>Referer</code>ï¼šè¯·æ±‚æ¥æºåœ°å€ï¼Œå¸¸ç”¨äºé˜²ç›—é“¾ã€‚</li></ul></li><li><strong>è¯·æ±‚ç©ºè¡Œ</strong>ï¼šä¸€ä¸ªç©ºè¡Œï¼Œç”¨äºåˆ†éš”è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ã€‚</li><li><strong>è¯·æ±‚ä½“</strong>ï¼š<strong>åªæœ‰ POST è¯·æ±‚æ‰æœ‰</strong>ï¼Œç”¨äºå°è£…è¯·æ±‚å‚æ•°ã€‚</li></ol></li></ul><h4 id="3-ServletRequest-å¯¹è±¡"><a href="#3-ServletRequest-å¯¹è±¡" class="headerlink" title="3. ServletRequest å¯¹è±¡"></a>3. <code>ServletRequest</code> å¯¹è±¡</h4><p><code>ServletRequest</code> æ˜¯ Servlet å®¹å™¨åœ¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œå°è£…è¯·æ±‚ä¿¡æ¯çš„å¯¹è±¡ã€‚</p><ul><li><strong>è·å–è¯·æ±‚è¡Œä¿¡æ¯</strong>ï¼š<ul><li><code>getMethod()</code>ï¼šè·å–è¯·æ±‚æ–¹å¼ï¼ˆGET&#x2F;POSTï¼‰ã€‚</li><li><code>getContextPath()</code>ï¼šè·å–è™šæ‹Ÿè·¯å¾„ã€‚</li><li><code>getRequestURI()</code>ï¼šè·å– URIï¼Œå¦‚ <code>/web02/demo4</code>ã€‚</li><li><code>getRequestURL()</code>ï¼šè·å– URLï¼Œå¦‚ <code>http://localhost:8080/web02/demo4</code>ã€‚</li></ul></li><li><strong>è·å–è¯·æ±‚å¤´ä¿¡æ¯</strong>ï¼š<ul><li><code>getHeader(name)</code>ï¼šæ ¹æ®è¯·æ±‚å¤´åè·å–å€¼ã€‚</li><li><code>getHeaderNames()</code>ï¼šè·å–æ‰€æœ‰è¯·æ±‚å¤´åã€‚</li></ul></li><li><strong>è·å–è¯·æ±‚ä½“ä¿¡æ¯</strong>ï¼š<ul><li><code>getReader()</code> (å­—ç¬¦æµ) å’Œ <code>getInputStream()</code> (å­—èŠ‚æµ)ï¼Œç”¨äºè¯»å– POST è¯·æ±‚çš„è¯·æ±‚ä½“å†…å®¹ã€‚</li></ul></li><li><strong>è·å–è¯·æ±‚å‚æ•°ï¼ˆé€šç”¨ï¼‰</strong>ï¼š<ul><li><code>getParameter(name)</code>ï¼šè·å–å•ä¸ªå‚æ•°å€¼ã€‚</li><li><code>getParameterValues(name)</code>ï¼šè·å–å‚æ•°å€¼æ•°ç»„ï¼Œç”¨äºå¤é€‰æ¡†ç­‰ã€‚</li></ul></li><li><strong>ä¸­æ–‡ä¹±ç </strong>ï¼š<ul><li><strong>GET è¯·æ±‚</strong>ï¼šåœ¨ Tomcat 8.x åŠä»¥åç‰ˆæœ¬ï¼Œé»˜è®¤å·²è§£å†³ã€‚</li><li><strong>POST è¯·æ±‚</strong>ï¼šéœ€è¦æ‰‹åŠ¨è®¾ç½®ç¼–ç ï¼Œ<code>request.setCharacterEncoding(&quot;UTF-8&quot;);</code>ã€‚</li></ul></li></ul><h4 id="4-request-è¯·æ±‚è½¬å‘"><a href="#4-request-è¯·æ±‚è½¬å‘" class="headerlink" title="4. request è¯·æ±‚è½¬å‘"></a>4. <code>request</code> è¯·æ±‚è½¬å‘</h4><ul><li><strong>æ¦‚å¿µ</strong>ï¼šæ˜¯ä¸€ç§<strong>æœåŠ¡å™¨å†…éƒ¨</strong>çš„èµ„æºè·³è½¬æ–¹å¼ã€‚è¯·æ±‚ä»ä¸€ä¸ª Servlet è½¬å‘åˆ°å¦ä¸€ä¸ª Servlet æˆ– JSPï¼Œ<strong>æµè§ˆå™¨åœ°å€æ ä¸ä¼šå‘ç”Ÿæ”¹å˜</strong>ã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ol><li><strong>åœ°å€æ ä¸å˜</strong>ï¼šç”¨æˆ·ä¸çŸ¥é“å‘ç”Ÿäº†è·³è½¬ã€‚</li><li><strong>ä¸€æ¬¡è¯·æ±‚&#x2F;å“åº”</strong>ï¼šæ•´ä¸ªè½¬å‘è¿‡ç¨‹å‘ç”Ÿåœ¨ä¸€æ¬¡ HTTP è¯·æ±‚å’Œä¸€æ¬¡ HTTP å“åº”ä¸­ã€‚</li><li><strong>å…±äº«æ•°æ®</strong>ï¼šç”±äºæ˜¯åŒä¸€æ¬¡è¯·æ±‚ï¼Œ<code>request</code> å¯¹è±¡ä¸­çš„æ•°æ®åœ¨è½¬å‘å‰åæ˜¯å…±äº«çš„ã€‚</li></ol></li></ul><h4 id="5-request-ä½œä¸ºåŸŸå¯¹è±¡"><a href="#5-request-ä½œä¸ºåŸŸå¯¹è±¡" class="headerlink" title="5. request ä½œä¸ºåŸŸå¯¹è±¡"></a>5. <code>request</code> ä½œä¸ºåŸŸå¯¹è±¡</h4><ul><li><strong>æ¦‚å¿µ</strong>ï¼š<code>request</code> æ˜¯ä¸€ç§<strong>åŸŸå¯¹è±¡</strong>ï¼Œå…¶ä½œç”¨èŒƒå›´æ˜¯<strong>ä¸€æ¬¡è¯·æ±‚-å“åº”çš„ç”Ÿå‘½å‘¨æœŸ</strong>ã€‚</li><li><strong>å…±äº«æ•°æ®</strong>ï¼šå¯ä»¥ä½¿ç”¨ <code>setAttribute()</code>, <code>getAttribute()</code>, <code>removeAttribute()</code> æ–¹æ³•åœ¨è¿™æ¬¡è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸå†…å…±äº«æ•°æ®ã€‚</li><li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šå¸¸ç”¨äºåœ¨ Servlet å’Œ JSP ä¹‹é—´ä¼ é€’æ•°æ®ã€‚</li><li><strong>ä¸ä¼šè¯æŠ€æœ¯çš„è”ç³»</strong>ï¼š<code>request</code> æ˜¯ä¸‰å¤§åŸŸå¯¹è±¡ï¼ˆ<code>request</code>, <code>session</code>, <code>servletContext</code>ï¼‰ä¸­ä½œç”¨èŒƒå›´æœ€å°çš„ä¸€ä¸ªã€‚</li></ul><p>å¥½çš„ï¼Œæˆ‘å°†æ ¹æ®æ‚¨æä¾›çš„è¿™ä»½è¯¦å°½çš„ Web æŠ€æœ¯ç¬”è®°ï¼Œä»¥ä¸€ç§æ›´ä¸“ä¸šã€æ›´ç³»ç»Ÿçš„æ–¹å¼ï¼Œå¯¹å…¶è¿›è¡Œé‡æ–°ç»„ç»‡ã€è¡¥å……å’Œæ·±å…¥è§£æï¼Œä½¿å…¶æˆä¸ºä¸€ä»½é«˜è´¨é‡çš„æŠ€æœ¯è®²è§£æˆ–é¢è¯•å›ç­”ã€‚</p><hr><h3 id="ä¸€ã€HTTP-åè®®çš„å“åº”æ ¼å¼"><a href="#ä¸€ã€HTTP-åè®®çš„å“åº”æ ¼å¼" class="headerlink" title="ä¸€ã€HTTP åè®®çš„å“åº”æ ¼å¼"></a>ä¸€ã€HTTP åè®®çš„å“åº”æ ¼å¼</h3><h4 id="1-å“åº”æ ¼å¼ç»„æˆ"><a href="#1-å“åº”æ ¼å¼ç»„æˆ" class="headerlink" title="1. å“åº”æ ¼å¼ç»„æˆ"></a>1. å“åº”æ ¼å¼ç»„æˆ</h4><p>HTTP å“åº”æ ¼å¼ç”±å››éƒ¨åˆ†ç»„æˆï¼š<code>å“åº”è¡Œ</code>ã€<code>å“åº”å¤´</code>ã€<code>å“åº”ç©ºè¡Œ</code>ã€<code>å“åº”ä½“</code>ã€‚è¿™ä¸ HTTP è¯·æ±‚æ ¼å¼ç›¸å‘¼åº”ã€‚</p><h4 id="2-å“åº”è¡Œ"><a href="#2-å“åº”è¡Œ" class="headerlink" title="2. å“åº”è¡Œ"></a>2. å“åº”è¡Œ</h4><ul><li><strong>æ ¼å¼</strong>ï¼š<code>åè®®/ç‰ˆæœ¬å· çŠ¶æ€ç  çŠ¶æ€æè¿°</code>ã€‚ä¾‹å¦‚ï¼š<code>HTTP/1.1 200 OK</code>ã€‚</li><li><strong>çŠ¶æ€ç </strong>ï¼šä¸€ä¸ªä¸‰ä½æ•°çš„æ•°å­—ï¼ŒæœåŠ¡å™¨ç”¨äºå‘Šè¯‰æµè§ˆå™¨æœ¬æ¬¡å“åº”çš„çŠ¶æ€ã€‚<ul><li><strong>2xx æˆåŠŸ</strong>ï¼š<ul><li><strong>200 OK</strong>ï¼šè¯·æ±‚æˆåŠŸï¼Œä¸€åˆ‡æ­£å¸¸ã€‚</li></ul></li><li><strong>3xx é‡å®šå‘</strong>ï¼š<ul><li><strong>302 Found</strong>ï¼šé‡å®šå‘ã€‚æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨ï¼Œèµ„æºä¸´æ—¶ç§»åŠ¨åˆ°å¦ä¸€ä¸ªä½ç½®ï¼Œè¯·é‡æ–°å‘èµ·è¯·æ±‚ã€‚</li><li><strong>304 Not Modified</strong>ï¼šè®¿é—®ç¼“å­˜ã€‚æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨ï¼Œè¯·æ±‚çš„èµ„æºæ²¡æœ‰æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨æµè§ˆå™¨æœ¬åœ°çš„ç¼“å­˜å‰¯æœ¬ã€‚</li></ul></li><li><strong>4xx å®¢æˆ·ç«¯é”™è¯¯</strong>ï¼š<ul><li><strong>404 Not Found</strong>ï¼šæ‰¾ä¸åˆ°èµ„æºã€‚è¯·æ±‚çš„è·¯å¾„æ²¡æœ‰å¯¹åº”çš„èµ„æºã€‚</li><li><strong>405 Method Not Allowed</strong>ï¼šè¯·æ±‚æ–¹æ³•ä¸è¢«å…è®¸ã€‚ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯ç”¨ POST è¯·æ±‚è®¿é—®äº†åªæ”¯æŒ GET æ–¹æ³•çš„ Servletã€‚</li></ul></li><li><strong>5xx æœåŠ¡å™¨ç«¯é”™è¯¯</strong>ï¼š<ul><li><strong>500 Internal Server Error</strong>ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚é€šå¸¸æ˜¯æœåŠ¡å™¨ç«¯çš„ä»£ç å‡ºç°äº†å¼‚å¸¸ã€‚</li></ul></li></ul></li><li><strong>é¢è¯•é¢˜</strong>ï¼šåˆ—ä¸¾ 5 ä¸ªå¸¸è§çš„çŠ¶æ€ç ï¼š200ã€302ã€304ã€404ã€405ã€500ã€‚</li></ul><h4 id="3-å“åº”å¤´"><a href="#3-å“åº”å¤´" class="headerlink" title="3. å“åº”å¤´"></a>3. å“åº”å¤´</h4><ul><li><strong>ä½œç”¨</strong>ï¼šä»¥é”®å€¼å¯¹å½¢å¼æä¾›å…³äºå“åº”çš„é¢å¤–ä¿¡æ¯ã€‚</li><li><strong>å¸¸è§å“åº”å¤´</strong>ï¼š<ul><li><strong>Content-Type</strong>ï¼šå‘Šè¯‰æµè§ˆå™¨å“åº”ä½“çš„æ•°æ®ç±»å‹å’Œå­—ç¬¦ç¼–ç ï¼Œä¾‹å¦‚ <code>text/html;charset=utf-8</code>ã€‚</li><li><strong>Content-disposition</strong>ï¼š<ul><li><strong>inline</strong> (é»˜è®¤)ï¼šæµè§ˆå™¨åœ¨å½“å‰é¡µé¢å†…ç›´æ¥æ‰“å¼€ã€‚</li><li><strong>attachment;filename&#x3D;xxx</strong>ï¼šæµè§ˆå™¨å°†æ•°æ®ä½œä¸ºé™„ä»¶ä¸‹è½½ã€‚</li></ul></li><li><strong>Location</strong>ï¼šä¸ <code>3xx</code> çŠ¶æ€ç é…åˆä½¿ç”¨ï¼Œç”¨äºå‘Šè¯‰æµè§ˆå™¨é‡å®šå‘åˆ°å“ªä¸ª URLã€‚</li></ul></li></ul><h3 id="äºŒã€ServletResponse-response"><a href="#äºŒã€ServletResponse-response" class="headerlink" title="äºŒã€ServletResponse (response)"></a>äºŒã€ServletResponse (response)</h3><ul><li><strong>ç®€ä»‹</strong>ï¼š<code>ServletResponse</code> å¯¹è±¡ç”± Tomcat åˆ›å»ºï¼Œå°è£…äº†æœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯çš„å“åº”æ¶ˆæ¯ã€‚</li><li><strong>ç›¸å…³æ–¹æ³•</strong>ï¼š<ul><li><strong>è®¾ç½®å“åº”è¡Œ</strong>ï¼š<code>setStatus(int sc)</code></li><li><strong>è®¾ç½®å“åº”å¤´</strong>ï¼š<code>setHeader(String name, String value)</code></li><li><strong>è®¾ç½®å“åº”ä½“</strong>ï¼š<ul><li><code>getWriter()</code>ï¼šè·å–å­—ç¬¦è¾“å‡ºæµï¼Œç”¨äºå‘é€<strong>æ–‡æœ¬</strong>æ•°æ®ã€‚</li><li><code>getOutputStream()</code>ï¼šè·å–å­—èŠ‚è¾“å‡ºæµï¼Œç”¨äºå‘é€<strong>å­—èŠ‚</strong>æ•°æ®ï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘ï¼‰ã€‚</li></ul></li></ul></li></ul><h3 id="ä¸‰ã€è½¬å‘ï¼ˆForwardï¼‰å’Œé‡å®šå‘ï¼ˆRedirectï¼‰çš„åŒºåˆ«"><a href="#ä¸‰ã€è½¬å‘ï¼ˆForwardï¼‰å’Œé‡å®šå‘ï¼ˆRedirectï¼‰çš„åŒºåˆ«" class="headerlink" title="ä¸‰ã€è½¬å‘ï¼ˆForwardï¼‰å’Œé‡å®šå‘ï¼ˆRedirectï¼‰çš„åŒºåˆ«"></a>ä¸‰ã€è½¬å‘ï¼ˆForwardï¼‰å’Œé‡å®šå‘ï¼ˆRedirectï¼‰çš„åŒºåˆ«</h3><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„é¢è¯•é¢˜ï¼Œéœ€è¦ä»å¤šä¸ªè§’åº¦è¿›è¡Œå¯¹æ¯”ã€‚</p><table><thead><tr><th>ç‰¹æ€§</th><th>è½¬å‘ï¼ˆForwardï¼‰</th><th>é‡å®šå‘ï¼ˆRedirectï¼‰</th></tr></thead><tbody><tr><td><strong>å‘ç”Ÿæ–¹</strong></td><td>æœåŠ¡å™¨å†…éƒ¨</td><td>æµè§ˆå™¨</td></tr><tr><td><strong>åœ°å€æ </strong></td><td><strong>ä¸å˜</strong></td><td><strong>ä¼šæ”¹å˜</strong></td></tr><tr><td><strong>è¯·æ±‚æ¬¡æ•°</strong></td><td><strong>ä¸€æ¬¡</strong>è¯·æ±‚ï¼Œä¸€æ¬¡å“åº”</td><td><strong>ä¸¤æ¬¡</strong>è¯·æ±‚ï¼Œä¸¤æ¬¡å“åº”</td></tr><tr><td><strong>å…±äº«æ•°æ®</strong></td><td><code>request</code> å¯¹è±¡å…±äº«æ•°æ®</td><td><code>request</code> å¯¹è±¡ä¸å…±äº«æ•°æ®</td></tr><tr><td><strong>è·³è½¬èŒƒå›´</strong></td><td><strong>åªèƒ½</strong>åœ¨å½“å‰ Web é¡¹ç›®å†…éƒ¨</td><td>å¯ä»¥è·³å‡ºé¡¹ç›®ï¼Œè®¿é—®å¤–éƒ¨èµ„æº</td></tr><tr><td><strong>è°ƒç”¨æ–¹</strong></td><td><code>RequestDispatcher</code> (<code>request</code>)</td><td><code>ServletResponse</code> (<code>response</code>)</td></tr><tr><td><strong>åº•å±‚å®ç°</strong></td><td><code>request.getRequestDispatcher().forward()</code></td><td><code>response.sendRedirect()</code></td></tr></tbody></table><ul><li><strong>é‡å®šå‘çš„å®ç°åŸç†</strong>ï¼š<ol><li>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œæ‰§è¡Œ <code>response.sendRedirect()</code>ï¼Œå¹¶å‘é€ <code>302</code> çŠ¶æ€ç å’Œ <code>Location</code> å“åº”å¤´ï¼ˆå€¼ä¸ºæ–°çš„ URLï¼‰ã€‚</li><li>æµè§ˆå™¨æ”¶åˆ°å“åº”ï¼Œè§£æåˆ° <code>302</code> å’Œ <code>Location</code> å¤´åï¼Œä¼š<strong>è‡ªåŠ¨</strong>å‘æ–°çš„ URL å‘èµ·<strong>ç¬¬äºŒæ¬¡</strong>è¯·æ±‚ã€‚</li></ol></li></ul><h3 id="å››ã€ServletContext"><a href="#å››ã€ServletContext" class="headerlink" title="å››ã€ServletContext"></a>å››ã€ServletContext</h3><h4 id="1-ç®€ä»‹ä¸ç‰¹ç‚¹"><a href="#1-ç®€ä»‹ä¸ç‰¹ç‚¹" class="headerlink" title="1. ç®€ä»‹ä¸ç‰¹ç‚¹"></a>1. ç®€ä»‹ä¸ç‰¹ç‚¹</h4><ul><li><strong>ä½œç”¨</strong>ï¼šä»£è¡¨<strong>æ•´ä¸ª Web åº”ç”¨</strong>ã€‚å¯ä»¥ç”¨æ¥å’ŒæœåŠ¡å™¨å®¹å™¨è¿›è¡Œé€šä¿¡ã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li><strong>å•ä¾‹</strong>ï¼šä¸€ä¸ª Web åº”ç”¨åªæœ‰ä¸€ä¸ª <code>ServletContext</code> å¯¹è±¡ã€‚</li><li><strong>ä½œç”¨åŸŸ</strong>ï¼šæ˜¯<strong>æœ€å¤§çš„åŸŸå¯¹è±¡</strong>ï¼Œå…¶ä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ª Web åº”ç”¨ï¼Œä»åº”ç”¨å¯åŠ¨åˆ°å…³é—­ã€‚</li></ul></li></ul><h4 id="2-è·å–-ServletContext-å¯¹è±¡"><a href="#2-è·å–-ServletContext-å¯¹è±¡" class="headerlink" title="2. è·å– ServletContext å¯¹è±¡"></a>2. è·å– <code>ServletContext</code> å¯¹è±¡</h4><ul><li><strong>é€šè¿‡ request</strong>ï¼š<code>request.getServletContext()</code></li><li><strong>é€šè¿‡ HttpServlet</strong>ï¼š<code>getServletContext()</code></li></ul><h4 id="3-ServletContext-çš„æ–¹æ³•"><a href="#3-ServletContext-çš„æ–¹æ³•" class="headerlink" title="3. ServletContext çš„æ–¹æ³•"></a>3. <code>ServletContext</code> çš„æ–¹æ³•</h4><ul><li><strong>è·å–æ–‡ä»¶ MIME ç±»å‹</strong>ï¼š<code>getMimeType(String file)</code>ï¼Œè¿”å›æ–‡ä»¶çš„ç±»å‹ï¼Œå¦‚ <code>image/jpeg</code>ã€‚</li><li><strong>ä½œä¸ºåŸŸå¯¹è±¡</strong>ï¼šæä¾›äº† <code>setAttribute()</code>, <code>getAttribute()</code>, <code>removeAttribute()</code> æ–¹æ³•ï¼Œç”¨äºåœ¨æ•´ä¸ª Web åº”ç”¨èŒƒå›´å†…å…±äº«æ•°æ®ã€‚<ul><li><strong>ç¤ºä¾‹</strong>ï¼šæ‚¨æä¾›çš„ä»£ç ç‰‡æ®µå®Œç¾åœ°å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>ServletContext</code> æ¥ç»Ÿè®¡æœåŠ¡å™¨çš„è®¿é—®æ¬¡æ•°ã€‚è¿™æ˜¯ <code>ServletContext</code> ä½œä¸ºåŸŸå¯¹è±¡æœ€ç»å…¸çš„ç”¨æ³•ã€‚</li></ul></li><li><strong>è·å–æ–‡ä»¶çœŸå®è·¯å¾„</strong>ï¼š<code>getRealPath(String path)</code>ï¼Œå°†ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºæœåŠ¡å™¨ä¸Šçš„ç»å¯¹è·¯å¾„ã€‚</li></ul><h3 id="äº”ã€ä¼šè¯ï¼ˆSessionï¼‰"><a href="#äº”ã€ä¼šè¯ï¼ˆSessionï¼‰" class="headerlink" title="äº”ã€ä¼šè¯ï¼ˆSessionï¼‰"></a>äº”ã€ä¼šè¯ï¼ˆSessionï¼‰</h3><h4 id="1-æ¦‚å¿µä¸ä½œç”¨"><a href="#1-æ¦‚å¿µä¸ä½œç”¨" class="headerlink" title="1. æ¦‚å¿µä¸ä½œç”¨"></a>1. æ¦‚å¿µä¸ä½œç”¨</h4><ul><li><strong>æ¦‚å¿µ</strong>ï¼šåœ¨ HTTP åè®®çš„æ— çŠ¶æ€ç‰¹æ€§åŸºç¡€ä¸Šï¼Œé€šè¿‡ä¼šè¯æŠ€æœ¯å°†å¤šæ¬¡è¯·æ±‚å’Œå“åº”è”ç³»èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„ä¼šè¯ã€‚</li><li><strong>ä½œç”¨</strong>ï¼šåœ¨ä¸€æ¬¡ä¼šè¯èŒƒå›´å†…çš„å¤šæ¬¡è¯·æ±‚ä¹‹é—´<strong>å…±äº«æ•°æ®</strong>ï¼Œä»è€Œè¯†åˆ«ç”¨æˆ·ã€‚</li><li><strong>å®ç°æ–¹å¼</strong>ï¼š<ul><li><strong>å®¢æˆ·ç«¯ä¼šè¯ï¼ˆCookieï¼‰</strong>ï¼šæ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ã€‚</li><li><strong>æœåŠ¡å™¨ç«¯ä¼šè¯ï¼ˆSessionï¼‰</strong>ï¼šæ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ã€‚</li></ul></li></ul><h4 id="2-å®¢æˆ·ç«¯ä¼šè¯ï¼šCookie"><a href="#2-å®¢æˆ·ç«¯ä¼šè¯ï¼šCookie" class="headerlink" title="2. å®¢æˆ·ç«¯ä¼šè¯ï¼šCookie"></a>2. å®¢æˆ·ç«¯ä¼šè¯ï¼šCookie</h4><ul><li><strong>å¿«é€Ÿå¼€å§‹</strong>ï¼š<ol><li><strong>åˆ›å»º</strong>ï¼š<code>new Cookie(name, value)</code>ã€‚</li><li><strong>å‘é€</strong>ï¼š<code>response.addCookie(cookie)</code>ï¼Œå°† Cookie å‘é€ç»™æµè§ˆå™¨ã€‚</li><li><strong>è·å–</strong>ï¼š<code>request.getCookies()</code>ï¼Œä»è¯·æ±‚ä¸­è·å–æ‰€æœ‰ Cookieã€‚</li></ol></li><li><strong>ç‰¹ç‚¹</strong>ï¼šæ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œæœ‰å¤§å°é™åˆ¶ï¼Œå®‰å…¨æ€§ä½ã€‚</li></ul><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼Œå®ƒè§¦åŠäº† Web å¼€å‘ä¸­ä¸€ä¸ªå®¹æ˜“æ··æ·†ä½†è‡³å…³é‡è¦çš„æ¦‚å¿µã€‚<code>enctype</code> å’Œ <code>Content-Type</code> ç¡®å®æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†å®ƒä»¬çš„ä½œç”¨åŸŸå’Œè§’è‰²æ˜¯å®Œå…¨ä¸åŒçš„ã€‚</p><p>è®©æˆ‘æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹å®ƒä»¬çš„åŒºåˆ«ï¼š</p><hr><h3 id="ä¸€ã€enctype"><a href="#ä¸€ã€enctype" class="headerlink" title="ä¸€ã€enctype"></a>ä¸€ã€<code>enctype</code></h3><ul><li><strong>ä½œç”¨åŸŸ</strong>ï¼šHTML <code>&lt;form&gt;</code> æ ‡ç­¾çš„å±æ€§ã€‚</li><li><strong>è§’è‰²</strong>ï¼šå®¢æˆ·ç«¯<strong>è¡¨å•çš„ç¼–ç æ–¹å¼</strong>ã€‚</li><li><strong>æ¦‚å¿µ</strong>ï¼š<code>enctype</code> (Encoding Type) å‘Šè¯‰<strong>æµè§ˆå™¨</strong>å¦‚ä½•å°† <code>&lt;form&gt;</code> è¡¨å•ä¸­çš„æ•°æ®<strong>ç¼–ç </strong>æˆ HTTP è¯·æ±‚ä½“ä¸­çš„æ•°æ®ã€‚å®ƒåªä½œç”¨äº<strong>è¡¨å•æäº¤</strong>è¿™ä¸ªè¡Œä¸ºã€‚</li><li><strong>å¸¸è§å€¼</strong>ï¼š<ul><li><code>application/x-www-form-urlencoded</code>ï¼šé»˜è®¤å€¼ï¼Œç”¨äºæ–‡æœ¬æ•°æ®ã€‚</li><li><code>multipart/form-data</code>ï¼šç”¨äºæ–‡ä»¶ä¸Šä¼ ã€‚</li><li><code>text/plain</code>ï¼šç”¨äºçº¯æ–‡æœ¬æäº¤ã€‚</li></ul></li></ul><p><strong>ç®€å•æ¥è¯´ï¼Œenctype æ˜¯â€œè¡¨å•æ•°æ®åœ¨æµè§ˆå™¨ç«¯å¦‚ä½•æ‰“åŒ…â€çš„è§„åˆ™ã€‚</strong></p><h3 id="äºŒã€Content-Type"><a href="#äºŒã€Content-Type" class="headerlink" title="äºŒã€Content-Type"></a>äºŒã€<code>Content-Type</code></h3><ul><li><strong>ä½œç”¨åŸŸ</strong>ï¼šHTTP è¯·æ±‚å¤´æˆ–å“åº”å¤´ã€‚</li><li><strong>è§’è‰²</strong>ï¼š<strong>é€šä¿¡æ•°æ®çš„åª’ä½“ç±»å‹</strong>ã€‚</li><li><strong>æ¦‚å¿µ</strong>ï¼š<code>Content-Type</code> å‘Šè¯‰æ¥æ”¶æ–¹ï¼ˆæœåŠ¡å™¨æˆ–æµè§ˆå™¨ï¼‰è¯·æ±‚ä½“æˆ–å“åº”ä½“ä¸­çš„<strong>æ•°æ®æ˜¯ä»€ä¹ˆæ ¼å¼</strong>ã€‚å®ƒæ˜¯ä¸€ä¸ªé€šç”¨çš„ HTTP å¤´éƒ¨ï¼Œä¸ä»…é™äºè¡¨å•æäº¤ã€‚</li><li><strong>å¸¸è§å€¼</strong>ï¼š<ul><li><code>text/html</code>ï¼šHTML æ–‡æ¡£ã€‚</li><li><code>application/json</code>ï¼šJSON æ ¼å¼æ•°æ®ã€‚</li><li><code>image/jpeg</code>ï¼šJPEG å›¾ç‰‡ã€‚</li><li><code>application/xml</code>ï¼šXML æ–‡æ¡£ã€‚</li><li><code>text/plain</code>ï¼šçº¯æ–‡æœ¬ã€‚</li></ul></li></ul><p><strong>ç®€å•æ¥è¯´ï¼ŒContent-Type æ˜¯â€œæˆ‘å‘é€ç»™ä½ çš„æ•°æ®æ˜¯ä»€ä¹ˆç±»å‹â€çš„å£°æ˜ã€‚</strong></p><h3 id="ä¸‰ã€æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»"><a href="#ä¸‰ã€æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»" class="headerlink" title="ä¸‰ã€æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»"></a>ä¸‰ã€æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»</h3><table><thead><tr><th>ç‰¹æ€§</th><th><code>enctype</code></th><th><code>Content-Type</code></th></tr></thead><tbody><tr><td><strong>ä½ç½®</strong></td><td>HTML <code>&lt;form&gt;</code> æ ‡ç­¾çš„å±æ€§</td><td>HTTP è¯·æ±‚å¤´æˆ–å“åº”å¤´</td></tr><tr><td><strong>è°å®šä¹‰</strong></td><td>å¼€å‘è€…åœ¨ HTML ä¸­è®¾ç½®</td><td>å‘é€æ–¹ï¼ˆæµè§ˆå™¨æˆ–æœåŠ¡å™¨ï¼‰åœ¨ HTTP å¤´éƒ¨ä¸­è®¾ç½®</td></tr><tr><td><strong>ä½œç”¨</strong></td><td>å‘Šè¯‰<strong>æµè§ˆå™¨</strong>å¦‚ä½•<strong>æ‰“åŒ…</strong>è¡¨å•æ•°æ®</td><td>å‘Šè¯‰<strong>æ¥æ”¶æ–¹</strong>å¦‚ä½•<strong>è§£æ</strong>æ•°æ®</td></tr><tr><td><strong>å…³ç³»</strong></td><td><strong>enctype çš„å€¼å†³å®šäº† HTTP è¯·æ±‚å¤´ä¸­ Content-Type çš„å€¼ã€‚</strong></td><td><code>Content-Type</code> æ˜¯ HTTP åè®®çš„ä¸€éƒ¨åˆ†ï¼Œ<code>enctype</code> æ˜¯ HTML çš„ä¸€éƒ¨åˆ†ã€‚</td></tr></tbody></table><h3 id="ä¸¾ä¾‹è¯´æ˜"><a href="#ä¸¾ä¾‹è¯´æ˜" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜"></a>ä¸¾ä¾‹è¯´æ˜</h3><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªåŒ…å«ç”¨æˆ·åå’Œå¤´åƒä¸Šä¼ çš„è¡¨å•ï¼š</p><p>HTML</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;/profile&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;file&quot; name=&quot;avatar&quot;&gt;</span><br><span class="line">    &lt;button type=&quot;submit&quot;&gt;æäº¤&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p>å½“ç”¨æˆ·ç‚¹å‡»æäº¤æ—¶ï¼Œæµè§ˆå™¨ä¼šåšä¸¤ä»¶äº‹ï¼š</p><ol><li><p><strong>æ ¹æ® enctype&#x3D;â€multipart&#x2F;form-dataâ€ è§„åˆ™</strong>ï¼Œæµè§ˆå™¨ä¼šç”Ÿæˆä¸€ä¸ª**å¤šéƒ¨åˆ†ï¼ˆ<code>multipart</code>ï¼‰**çš„è¯·æ±‚ä½“ï¼ŒåŒ…å«ç”¨æˆ·åå’Œå¤´åƒæ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®ã€‚</p></li><li><p>åœ¨å‘é€ HTTP è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šåœ¨è¯·æ±‚å¤´ä¸­è‡ªåŠ¨æ·»åŠ ä¸€ä¸ª <code>Content-Type</code> å­—æ®µï¼Œå…¶å€¼ä¸º<strong>ä¸ enctype åŒ¹é…çš„</strong> <code>multipart/form-data</code>ã€‚</p><p>HTTP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">POST /profile HTTP/1.1</span><br><span class="line">Host: example.com</span><br><span class="line">Content-Type: multipart/form-data; boundary=----WebKitFormBoundary...</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li></ol><p><strong>æ€»ç»“</strong>ï¼š</p><ul><li><strong>enctype æ˜¯ä¸€ä¸ªå‰ç«¯æ¦‚å¿µ</strong>ï¼Œå®ƒæ˜¯ HTML è¡¨å•çš„å±æ€§ï¼Œç”¨äºæŒ‡å¯¼æµè§ˆå™¨å¦‚ä½•æ„å»ºè¯·æ±‚ä½“ã€‚</li><li><strong>Content-Type æ˜¯ä¸€ä¸ª HTTP åè®®æ¦‚å¿µ</strong>ï¼Œå®ƒæ˜¯ HTTP å¤´éƒ¨çš„ä¸€ä¸ªå­—æ®µï¼Œç”¨äºå‘ŠçŸ¥æ•°æ®æ ¼å¼ã€‚</li><li>ä¸¤è€…ä¹‹é—´å­˜åœ¨<strong>è”åŠ¨å…³ç³»</strong>ï¼šä½ åœ¨ HTML ä¸­è®¾ç½®çš„ <code>enctype</code> å€¼ï¼Œä¼š<strong>æœ€ç»ˆå½±å“</strong>æµè§ˆå™¨åœ¨ HTTP è¯·æ±‚ä¸­è®¾ç½®çš„ <code>Content-Type</code> å¤´çš„å€¼ã€‚</li></ul><p>å¥½çš„ï¼Œæˆ‘æ¥ä¸ºä½ åˆ†åˆ«åˆ—å‡º <code>enctype</code> å’Œ <code>Content-Type</code> å„è‡ªå¸¸è§çš„å±æ€§å€¼ï¼Œå¹¶ç®€è¦è¯´æ˜å…¶ç”¨é€”ã€‚</p><hr><h3 id="ä¸€ã€enctype-çš„å¸¸è§å€¼"><a href="#ä¸€ã€enctype-çš„å¸¸è§å€¼" class="headerlink" title="ä¸€ã€enctype çš„å¸¸è§å€¼"></a>ä¸€ã€<code>enctype</code> çš„å¸¸è§å€¼</h3><p><code>enctype</code> æ˜¯ HTML <code>&lt;form&gt;</code> æ ‡ç­¾çš„å±æ€§ï¼Œç”¨äºå®šä¹‰è¡¨å•æ•°æ®æäº¤çš„ç¼–ç æ–¹å¼ã€‚</p><ol><li><strong>application&#x2F;x-www-form-urlencoded</strong><ul><li><strong>ç”¨é€”</strong>ï¼šè¿™æ˜¯ <code>enctype</code> çš„<strong>é»˜è®¤å€¼</strong>ã€‚å®ƒå°†è¡¨å•æ•°æ®ç¼–ç ä¸ºé”®å€¼å¯¹å­—ç¬¦ä¸²ï¼Œå…¶ä¸­æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦éƒ½ä¼šè¢« URL ç¼–ç ï¼ˆä¾‹å¦‚ç©ºæ ¼è¢« <code>%20</code> æ›¿ä»£ï¼‰ã€‚</li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šåªåŒ…å«æ–‡æœ¬æ•°æ®çš„æ™®é€šè¡¨å•æäº¤ã€‚</li></ul></li><li><strong>multipart&#x2F;form-data</strong><ul><li><strong>ç”¨é€”</strong>ï¼šå°†è¡¨å•æ•°æ®åˆ†å‰²æˆå¤šä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰ç‹¬ç«‹çš„ <code>Content-Type</code> å’Œ <code>Content-Disposition</code> å¤´éƒ¨ã€‚è¿™ç§æ ¼å¼èƒ½å¤Ÿ<strong>åŒæ—¶å¤„ç†æ–‡æœ¬å’ŒäºŒè¿›åˆ¶æ•°æ®</strong>ã€‚</li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<strong>æ–‡ä»¶ä¸Šä¼ </strong>ã€‚</li></ul></li><li><strong>text&#x2F;plain</strong><ul><li><strong>ç”¨é€”</strong>ï¼šå°†è¡¨å•æ•°æ®ä»¥çº¯æ–‡æœ¬æ ¼å¼å‘é€ï¼Œä¸è¿›è¡Œä»»ä½•ç¼–ç ã€‚æ•°æ®ä»¥é”®å€¼å¯¹çš„å½¢å¼ï¼Œç”¨æ¢è¡Œç¬¦åˆ†éš”ã€‚</li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä¸å¸¸ç”¨ï¼Œä¸»è¦ç”¨äºè°ƒè¯•ç›®çš„ã€‚</li></ul></li></ol><h3 id="äºŒã€Content-Type-çš„å¸¸è§å€¼"><a href="#äºŒã€Content-Type-çš„å¸¸è§å€¼" class="headerlink" title="äºŒã€Content-Type çš„å¸¸è§å€¼"></a>äºŒã€<code>Content-Type</code> çš„å¸¸è§å€¼</h3><p><code>Content-Type</code> æ˜¯ HTTP å¤´éƒ¨å­—æ®µï¼Œç”¨äºæŒ‡å®šæ¶ˆæ¯ä½“çš„åª’ä½“ç±»å‹ï¼ˆMIME ç±»å‹ï¼‰ã€‚</p><h4 id="1-æ–‡æœ¬ç±»å‹-text"><a href="#1-æ–‡æœ¬ç±»å‹-text" class="headerlink" title="1. æ–‡æœ¬ç±»å‹ (text/)"></a>1. æ–‡æœ¬ç±»å‹ (<code>text/</code>)</h4><ul><li><strong>text&#x2F;plain</strong>ï¼šçº¯æ–‡æœ¬ã€‚</li><li><strong>text&#x2F;html</strong>ï¼šHTML æ–‡æ¡£ã€‚è¿™æ˜¯æµè§ˆå™¨æ¸²æŸ“ç½‘é¡µçš„é»˜è®¤ç±»å‹ã€‚</li><li><strong>text&#x2F;css</strong>ï¼šCSS æ ·å¼è¡¨ã€‚</li><li><strong>text&#x2F;javascript</strong>ï¼šJavaScript ä»£ç ã€‚</li></ul><h4 id="2-åº”ç”¨ç±»å‹-application"><a href="#2-åº”ç”¨ç±»å‹-application" class="headerlink" title="2. åº”ç”¨ç±»å‹ (application/)"></a>2. åº”ç”¨ç±»å‹ (<code>application/</code>)</h4><ul><li><strong>application&#x2F;json</strong>ï¼šJSON æ ¼å¼çš„æ•°æ®ã€‚ç›®å‰æœ€å¸¸ç”¨çš„å‰åç«¯æ•°æ®äº¤äº’æ ¼å¼ã€‚</li><li><strong>application&#x2F;xml</strong>ï¼šXML æ ¼å¼çš„æ•°æ®ã€‚</li><li><strong>application&#x2F;pdf</strong>ï¼šPDF æ–‡æ¡£ã€‚</li><li><strong>application&#x2F;octet-stream</strong>ï¼šé€šç”¨çš„<strong>äºŒè¿›åˆ¶æµæ•°æ®</strong>ã€‚é€šå¸¸ç”¨äº<strong>å¼ºåˆ¶æµè§ˆå™¨ä¸‹è½½</strong>æœªçŸ¥ç±»å‹çš„æ–‡ä»¶ï¼Œå› ä¸ºå®ƒå‘Šè¯‰æµè§ˆå™¨â€œè¿™æ˜¯ä¸€ä¸ªåŸå§‹çš„å­—èŠ‚æµï¼Œè¯·ä¸è¦å°è¯•è§£æå®ƒâ€ã€‚</li><li><strong>application&#x2F;x-www-form-urlencoded</strong>ï¼šä¸ <code>enctype</code> çš„é»˜è®¤å€¼å¯¹åº”ï¼Œè¡¨æ˜è¯·æ±‚ä½“æ˜¯ URL ç¼–ç çš„é”®å€¼å¯¹ã€‚</li><li><strong>application&#x2F;javascript</strong>ï¼šä¸ <code>text/javascript</code> ç±»ä¼¼ï¼Œæ›´æ¨èä½¿ç”¨ã€‚</li></ul><h4 id="3-å›¾ç‰‡ç±»å‹-image"><a href="#3-å›¾ç‰‡ç±»å‹-image" class="headerlink" title="3. å›¾ç‰‡ç±»å‹ (image/)"></a>3. å›¾ç‰‡ç±»å‹ (<code>image/</code>)</h4><ul><li><strong>image&#x2F;jpeg</strong>ï¼šJPEG&#x2F;JPG æ ¼å¼çš„å›¾ç‰‡ã€‚</li><li><strong>image&#x2F;png</strong>ï¼šPNG æ ¼å¼çš„å›¾ç‰‡ã€‚</li><li><strong>image&#x2F;gif</strong>ï¼šGIF æ ¼å¼çš„å›¾ç‰‡ã€‚</li><li><strong>image&#x2F;svg+xml</strong>ï¼šSVG çŸ¢é‡å›¾ã€‚</li></ul><h4 id="4-éŸ³è§†é¢‘ç±»å‹"><a href="#4-éŸ³è§†é¢‘ç±»å‹" class="headerlink" title="4. éŸ³è§†é¢‘ç±»å‹"></a>4. éŸ³è§†é¢‘ç±»å‹</h4><ul><li><strong>audio&#x2F;mpeg</strong>ï¼šMP3 éŸ³é¢‘æ–‡ä»¶ã€‚</li><li><strong>video&#x2F;mp4</strong>ï¼šMP4 è§†é¢‘æ–‡ä»¶ã€‚</li></ul><h4 id="5-å¤šéƒ¨åˆ†ç±»å‹-multipart"><a href="#5-å¤šéƒ¨åˆ†ç±»å‹-multipart" class="headerlink" title="5. å¤šéƒ¨åˆ†ç±»å‹ (multipart/)"></a>5. å¤šéƒ¨åˆ†ç±»å‹ (<code>multipart/</code>)</h4><ul><li><strong>multipart&#x2F;form-data</strong>ï¼šç”¨äºæ–‡ä»¶ä¸Šä¼ ï¼Œä¸ <code>enctype</code> çš„å€¼å¯¹åº”ã€‚</li><li><strong>multipart&#x2F;byteranges</strong>ï¼šç”¨äºåˆ†å—ä¸‹è½½ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ ã€‚</li></ul><p>å¥½çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„é¢è¯•é¢˜ï¼Œä¹Ÿæ˜¯ç†è§£ Web åŸºç¡€çŸ¥è¯†çš„å…³é”®ã€‚æˆ‘ä¼šè¯¦ç»†ã€æ¸…æ™°åœ°è§£é‡Š URL å’Œ URIï¼Œå¹¶ç”¨é€šä¿—æ˜“æ‡‚çš„æ–¹å¼åŒºåˆ†å®ƒä»¬ã€‚</p><hr><h3 id="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ"><a href="#ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ"></a>ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ</h3><ul><li><strong>URI (Uniform Resource Identifier) - ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦</strong><ul><li><strong>æ¦‚å¿µ</strong>ï¼šURI æ˜¯ä¸€ä¸ªç”¨äº<strong>æ ‡è¯†</strong>äº’è”ç½‘ä¸Š<strong>ä»»ä½•èµ„æº</strong>çš„å­—ç¬¦ä¸²ã€‚å®ƒä¸ä»…ä»…èƒ½æ ‡è¯†ç½‘é¡µï¼Œè¿˜å¯ä»¥æ ‡è¯†æ–‡ä»¶ã€æœåŠ¡ã€ç”µå­é‚®ç®±ç­‰ã€‚</li><li><strong>ä½œç”¨</strong>ï¼š<strong>æ ‡è¯†</strong>ã€‚URI å°±åƒä¸€ä¸ªèµ„æºçš„â€œèº«ä»½è¯å·â€ï¼Œå®ƒèƒ½å”¯ä¸€åœ°è¯†åˆ«ä¸€ä¸ªèµ„æºï¼Œä½†<strong>ä¸ä¸€å®š</strong>å‘Šè¯‰æˆ‘ä»¬å¦‚ä½•è®¿é—®å®ƒã€‚</li></ul></li><li><strong>URL (Uniform Resource Locator) - ç»Ÿä¸€èµ„æºå®šä½ç¬¦</strong><ul><li><strong>æ¦‚å¿µ</strong>ï¼šURL æ˜¯ä¸€ä¸ªç”¨äº<strong>å®šä½</strong>äº’è”ç½‘ä¸Šèµ„æºçš„å­—ç¬¦ä¸²ã€‚å®ƒæ˜¯ URI çš„ä¸€ä¸ª<strong>å­é›†</strong>ã€‚</li><li><strong>ä½œç”¨</strong>ï¼š<strong>å®šä½</strong>ã€‚URL å°±åƒä¸€ä¸ªèµ„æºçš„â€œè¯¦ç»†åœ°å€â€ï¼Œå®ƒä¸ä»…æ ‡è¯†äº†èµ„æºï¼Œè¿˜æä¾›äº†<strong>å¦‚ä½•è®¿é—®è¯¥èµ„æº</strong>çš„å®Œæ•´ä¿¡æ¯ï¼ŒåŒ…æ‹¬åè®®ã€ä¸»æœºåã€ç«¯å£å·å’Œè·¯å¾„ç­‰ã€‚</li></ul></li></ul><h3 id="äºŒã€URL-å’Œ-URI-çš„å…³ç³»"><a href="#äºŒã€URL-å’Œ-URI-çš„å…³ç³»" class="headerlink" title="äºŒã€URL å’Œ URI çš„å…³ç³»"></a>äºŒã€URL å’Œ URI çš„å…³ç³»</h3><p>ç”¨ä¸€ä¸ªæ¯”å–»æ¥ç†è§£ï¼š</p><ul><li><strong>URI</strong> å°±åƒä¸€ä¸ªäººçš„<strong>åå­—</strong>ã€‚<code>å¼ ä¸‰</code>è¿™ä¸ªåå­—å¯ä»¥æ ‡è¯†è¿™ä¸ªäººï¼Œä½†ä½ ä¸çŸ¥é“ä»–åœ¨å“ªé‡Œã€æ€ä¹ˆæ‰¾åˆ°ä»–ã€‚</li><li><strong>URL</strong> å°±åƒä¸€ä¸ªäººçš„<strong>å®¶åº­ä½å€</strong>ã€‚<code>åŒ—äº¬å¸‚æµ·æ·€åŒºä¸­å…³æ‘å¤§è¡—1å·</code>ã€‚è¿™ä¸ªåœ°å€ä¸ä»…æ ‡è¯†äº†è¿™ä¸ªäººï¼Œè¿˜å‘Šè¯‰äº†ä½ å¦‚ä½•å®šä½ä»–ã€‚</li></ul><p><strong>å› æ­¤ï¼Œæ‰€æœ‰çš„ URL éƒ½æ˜¯ URIï¼Œä½†å¹¶éæ‰€æœ‰çš„ URI éƒ½æ˜¯ URLã€‚</strong></p><h3 id="ä¸‰ã€URL-å’Œ-URI-çš„å…·ä½“ç»“æ„"><a href="#ä¸‰ã€URL-å’Œ-URI-çš„å…·ä½“ç»“æ„" class="headerlink" title="ä¸‰ã€URL å’Œ URI çš„å…·ä½“ç»“æ„"></a>ä¸‰ã€URL å’Œ URI çš„å…·ä½“ç»“æ„</h3><h4 id="URI-çš„ç»“æ„ï¼š"><a href="#URI-çš„ç»“æ„ï¼š" class="headerlink" title="URI çš„ç»“æ„ï¼š"></a>URI çš„ç»“æ„ï¼š</h4><p>ä¸€ä¸ª URI é€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p><p><code>scheme:[//authority][path][?query][#fragment]</code></p><ul><li><code>scheme</code>ï¼šåè®®ï¼Œå¦‚ <code>http</code>, <code>ftp</code>, <code>mailto</code>ã€‚</li><li><code>path</code>ï¼šèµ„æºè·¯å¾„ã€‚</li></ul><h4 id="URL-çš„ç»“æ„ï¼š"><a href="#URL-çš„ç»“æ„ï¼š" class="headerlink" title="URL çš„ç»“æ„ï¼š"></a>URL çš„ç»“æ„ï¼š</h4><p>URL åŒ…å«äº† URI çš„æ‰€æœ‰ç»„æˆéƒ¨åˆ†ï¼Œå¹¶åŠ å…¥äº†å®šä½ä¿¡æ¯ã€‚</p><p><code>scheme://host:port/path?query#fragment</code></p><ul><li><code>scheme</code>ï¼šåè®®ã€‚å¦‚ <code>http</code>, <code>https</code>, <code>ftp</code>ã€‚</li><li><code>host</code>ï¼šä¸»æœºåæˆ– IP åœ°å€ã€‚</li><li><code>port</code>ï¼šç«¯å£å·ï¼ˆå¯é€‰ï¼Œå¦‚æœä½¿ç”¨é»˜è®¤ç«¯å£åˆ™å¯ä»¥çœç•¥ï¼‰ã€‚</li><li><code>path</code>ï¼šèµ„æºè·¯å¾„ã€‚</li><li><code>query</code>ï¼šæŸ¥è¯¢å‚æ•°ï¼Œä»¥ <code>?</code> å¼€å§‹ã€‚</li><li><code>fragment</code>ï¼šç‰‡æ®µæ ‡è¯†ç¬¦ï¼Œä»¥ <code>#</code> å¼€å§‹ã€‚</li></ul><h3 id="å››ã€ä¸¾ä¾‹è¯´æ˜"><a href="#å››ã€ä¸¾ä¾‹è¯´æ˜" class="headerlink" title="å››ã€ä¸¾ä¾‹è¯´æ˜"></a>å››ã€ä¸¾ä¾‹è¯´æ˜</h3><table><thead><tr><th>å­—ç¬¦ä¸²</th><th>ç±»åˆ«</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td><code>https://www.google.com/search?q=url+uri</code></td><td><strong>URL</strong> å’Œ <strong>URI</strong></td><td>æ—¢æ˜¯ URIï¼ˆæ ‡è¯†ï¼‰ï¼Œä¹Ÿæ˜¯ URLï¼ˆå®šä½ï¼‰ï¼Œæä¾›äº†å®Œæ•´çš„è®¿é—®ä¿¡æ¯ã€‚</td></tr><tr><td><code>urn:isbn:0451450523</code></td><td><strong>URI</strong> ä½†<strong>ä¸æ˜¯ URL</strong></td><td><code>urn:isbn</code> æ˜¯ä¸€ä¸ª URN (Uniform Resource Name)ï¼Œå®ƒæ˜¯ URI çš„å¦ä¸€ç§ç±»å‹ï¼Œç”¨äºæ ‡è¯†ä¸€æœ¬ä¹¦ã€‚å®ƒæ ‡è¯†äº†èµ„æºï¼Œä½†æ²¡æœ‰æä¾›å¦‚ä½•è®¿é—®å®ƒçš„ä½ç½®ä¿¡æ¯ã€‚</td></tr><tr><td><code>/images/logo.png</code></td><td><strong>URI</strong> ä½†<strong>ä¸æ˜¯ URL</strong></td><td>è¿™æ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œå®ƒæ ‡è¯†äº†èµ„æºï¼Œä½†æ²¡æœ‰å®Œæ•´çš„å®šä½ä¿¡æ¯ï¼ˆå¦‚åè®®ã€ä¸»æœºåï¼‰ï¼Œéœ€è¦ç»“åˆå½“å‰é¡µé¢çš„ URL æ‰èƒ½ç¡®å®šå®Œæ•´ä½ç½®ã€‚</td></tr><tr><td><code>mailto:test@example.com</code></td><td><strong>URI</strong> ä½†<strong>ä¸æ˜¯ URL</strong></td><td>æ ‡è¯†äº†ä¸€ä¸ªé‚®ç®±èµ„æºï¼Œä½†æ— æ³•é€šè¿‡å®ƒæ¥å®šä½åˆ°å…·ä½“çš„æ–‡ä»¶æˆ–æœåŠ¡å™¨ã€‚</td></tr></tbody></table><h3 id="äº”ã€é¢è¯•å›ç­”æ€»ç»“"><a href="#äº”ã€é¢è¯•å›ç­”æ€»ç»“" class="headerlink" title="äº”ã€é¢è¯•å›ç­”æ€»ç»“"></a>äº”ã€é¢è¯•å›ç­”æ€»ç»“</h3><ol><li><p><strong>å¼€é—¨è§å±±</strong>ï¼šURL æ˜¯ URI çš„å­é›†ã€‚</p></li><li><p><strong>æ ¸å¿ƒåŒºåˆ«</strong>ï¼š</p><ul><li><strong>URI æ˜¯æ ‡è¯†ç¬¦</strong>ï¼Œå®ƒåªè´Ÿè´£<strong>æ ‡è¯†</strong>ä¸€ä¸ªèµ„æºï¼Œä¸æä¾›å¦‚ä½•è®¿é—®å®ƒçš„ä¿¡æ¯ã€‚</li><li><strong>URL æ˜¯å®šä½ç¬¦</strong>ï¼Œå®ƒåœ¨æ ‡è¯†èµ„æºçš„åŒæ—¶ï¼Œè¿˜æä¾›äº†<strong>å®šä½</strong>è¯¥èµ„æºçš„å®Œæ•´ä¿¡æ¯ï¼Œå¦‚åè®®ã€ä¸»æœºåç­‰ã€‚</li></ul></li><li><p><strong>ä¸¾ä¾‹</strong>ï¼š</p><ul><li>URLï¼š<code>https://www.example.com/index.html</code>ï¼ŒåŒ…å«äº†åè®®ã€ä¸»æœºã€è·¯å¾„ï¼Œå¯ä»¥æ˜ç¡®åœ°å®šä½ä¸€ä¸ªèµ„æºã€‚</li><li>URIï¼š<code>urn:isbn:0451450523</code>ï¼Œå®ƒæ ‡è¯†äº†ä¸€æœ¬ä¹¦ï¼Œä½†ä½ æ— æ³•é€šè¿‡å®ƒæ¥è®¿é—®è¿™æœ¬ä¹¦çš„ç”µå­ç‰ˆã€‚</li></ul></li><li><p><strong>å…³ç³»å›¾</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+-------------+</span><br><span class="line">|      URI    |</span><br><span class="line">|             |</span><br><span class="line">|  +----------+---------+</span><br><span class="line">|  |   URL    |   URN   |</span><br><span class="line">|  | (å®šä½)   |  (å‘½å) |</span><br><span class="line">|  +----------+---------+</span><br><span class="line">|             |</span><br><span class="line">+-------------+</span><br></pre></td></tr></table></figure><p>ç”¨è¿™ä¸ªå›¾èƒ½éå¸¸æ¸…æ™°åœ°å±•ç°å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¥½çš„ï¼Œè®©æˆ‘ä»¬æ·±å…¥åˆ° HTTP åè®®çš„åº•å±‚ï¼Œå…¨é¢è§£å‰–å®ƒçš„å·¥ä½œåŸç†ã€è¯·æ±‚-å“åº”æ¨¡å‹ã€ä»¥åŠå„ä¸ªç»„æˆéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;ä¸€ã€HTTP-åè®®æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#ä¸€ã€HTTP-åè®®æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€HTTP å</summary>
      
    
    
    
    <category term="web" scheme="http://example.com/categories/web/"/>
    
    
    <category term="web" scheme="http://example.com/tags/web/"/>
    
    <category term="servlet" scheme="http://example.com/tags/servlet/"/>
    
    <category term="å‰ç«¯" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹å†™ç­”æ¡ˆ</title>
    <link href="http://example.com/2025/09/11/%E6%89%8B%E5%86%99%E7%AD%94%E6%A1%88/"/>
    <id>http://example.com/2025/09/11/%E6%89%8B%E5%86%99%E7%AD%94%E6%A1%88/</id>
    <published>2025-09-11T10:29:28.000Z</published>
    <updated>2025-09-16T05:19:43.552Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-å®ç°å•ä¾‹æ¨¡å¼-Singleton-Pattern"><a href="#1-å®ç°å•ä¾‹æ¨¡å¼-Singleton-Pattern" class="headerlink" title="1.å®ç°å•ä¾‹æ¨¡å¼ (Singleton Pattern)"></a>1.å®ç°å•ä¾‹æ¨¡å¼ (Singleton Pattern)</h3><h4 id="æ‡’æ±‰å¼ï¼š"><a href="#æ‡’æ±‰å¼ï¼š" class="headerlink" title="æ‡’æ±‰å¼ï¼š"></a>æ‡’æ±‰å¼ï¼š</h4><p>ä½¿ç”¨<strong>åŒé‡æ£€æŸ¥é”å®š (DCL)</strong> å®ç°çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ‰åˆ›å»ºå®ä¾‹ï¼Œå¹¶ä¸”é€šè¿‡ä¸¤æ¬¡æ£€æŸ¥å’ŒåŒæ­¥å—ç¡®ä¿äº†çº¿ç¨‹å®‰å…¨å’Œæ€§èƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="comment">// 1. volatile å…³é”®å­—ç¡®ä¿å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œinstance å˜é‡çš„ä¿®æ”¹èƒ½å¤Ÿç«‹å³è¢«å…¶ä»–çº¿ç¨‹çœ‹åˆ°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. ç§æœ‰åŒ–æ„é€ å™¨ï¼Œé˜²æ­¢å¤–éƒ¨ç›´æ¥ new å®ä¾‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ï¼Œä½¿ç”¨ DCL ç¡®ä¿çº¿ç¨‹å®‰å…¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€æ¬¡æ£€æŸ¥ï¼šå¦‚æœå®ä¾‹å·²ç»å­˜åœ¨ï¼Œç›´æ¥è¿”å›ï¼Œé¿å…ä¸å¿…è¦çš„åŒæ­¥</span></span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// ç¬¬ä¸€æ¬¡æ£€æŸ¥å¤±è´¥ï¼Œè¿›å…¥åŒæ­¥å—</span></span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">                <span class="comment">// ç¬¬äºŒæ¬¡æ£€æŸ¥ï¼šåœ¨åŒæ­¥å—å†…éƒ¨å†æ¬¡æ£€æŸ¥ï¼Œé˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶é€šè¿‡ç¬¬ä¸€æ¬¡æ£€æŸ¥ï¼Œ</span></span><br><span class="line">                <span class="comment">// å¯¼è‡´åˆ›å»ºå¤šä¸ªå®ä¾‹</span></span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// åˆ›å»ºå®ä¾‹</span></span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼å®ä¾‹ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h4 id="é¥¿æ±‰å¼ï¼š"><a href="#é¥¿æ±‰å¼ï¼š" class="headerlink" title="é¥¿æ±‰å¼ï¼š"></a>é¥¿æ±‰å¼ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SingletonEager</span> &#123;</span><br><span class="line">    <span class="comment">// 1. åœ¨ç±»åŠ è½½æ—¶å°±åˆ›å»ºé™æ€å®ä¾‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">SingletonEager</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SingletonEager</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. ç§æœ‰åŒ–æ„é€ å™¨ï¼Œé˜²æ­¢å¤–éƒ¨ç›´æ¥åˆ›å»ºå®ä¾‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SingletonEager</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. æä¾›ä¸€ä¸ªå…¬å…±çš„é™æ€æ–¹æ³•æ¥è·å–å”¯ä¸€å®ä¾‹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SingletonEager <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼å®ä¾‹ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-ç»§æ‰¿ä¸å¤šæ€-Inheritance-and-Polymorphism"><a href="#2-ç»§æ‰¿ä¸å¤šæ€-Inheritance-and-Polymorphism" class="headerlink" title="2.ç»§æ‰¿ä¸å¤šæ€ (Inheritance and Polymorphism)"></a>2.ç»§æ‰¿ä¸å¤šæ€ (Inheritance and Polymorphism)</h3><p>è®¾è®¡ä¸€ä¸ª <code>Animal</code> æŠ½è±¡ç±»ï¼Œå¹¶åˆ›å»º <code>Dog</code> å’Œ <code>Cat</code> ç±»æ¥å±•ç¤ºç»§æ‰¿å’Œå¤šæ€ã€‚&#x3D;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. Animal æŠ½è±¡ç±»ï¼Œå®šä¹‰é€šç”¨è¡Œä¸º</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="comment">// æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Dog ç±»ç»§æ‰¿ Animalï¼Œå¹¶é‡å†™ eat() æ–¹æ³•</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç‹—æ­£åœ¨åƒéª¨å¤´ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. Cat ç±»ç»§æ‰¿ Animalï¼Œå¹¶é‡å†™ eat() æ–¹æ³•</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;çŒ«æ­£åœ¨åƒé±¼ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. å±•ç¤ºå¤šæ€çš„ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PolymorphismDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showPolymorphism</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ï¼Œè¿™å°±æ˜¯å¤šæ€</span></span><br><span class="line">        <span class="type">Animal</span> <span class="variable">myDog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">        <span class="type">Animal</span> <span class="variable">myCat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è°ƒç”¨ç›¸åŒçš„æ–¹æ³•ï¼Œä½†ç”±äºæŒ‡å‘ä¸åŒçš„å­ç±»å®ä¾‹ï¼Œæ‰§è¡Œä¸åŒçš„è¡Œä¸º</span></span><br><span class="line">        myDog.eat(); <span class="comment">// è¾“å‡º: ç‹—æ­£åœ¨åƒéª¨å¤´ã€‚</span></span><br><span class="line">        myCat.eat(); <span class="comment">// è¾“å‡º: çŒ«æ­£åœ¨åƒé±¼ã€‚</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="equals-å’Œ-hashCode"><a href="#equals-å’Œ-hashCode" class="headerlink" title="equals() å’Œ hashCode()"></a><code>equals()</code> å’Œ <code>hashCode()</code></h3><p>ç¼–å†™ <code>Student</code> ç±»ï¼Œå¹¶é‡å†™ <code>equals()</code> å’Œ <code>hashCode()</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> id, String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡å†™ equals() æ–¹æ³•ï¼Œæ ¹æ® id å’Œ name åˆ¤æ–­ä¸¤ä¸ª Student å¯¹è±¡æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. æ£€æŸ¥æ˜¯å¦ä¸ºåŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// 2. æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸º null æˆ–ç±»å‹æ˜¯å¦åŒ¹é…</span></span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// 3. ç±»å‹è½¬æ¢</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) o;</span><br><span class="line">        <span class="comment">// 4. æ¯”è¾ƒå…³é”®å­—æ®µ (id å’Œ name)</span></span><br><span class="line">        <span class="keyword">return</span> id == student.id &amp;&amp;</span><br><span class="line">               Objects.equals(name, student.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡å†™ hashCode() æ–¹æ³•ï¼Œä¸ºç›¸ç­‰çš„å¯¹è±¡ç”Ÿæˆç›¸åŒçš„å“ˆå¸Œç </span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Objects.hash() æ–¹æ³•ç”Ÿæˆå“ˆå¸Œç ï¼Œå®ƒä¼šä¸ºå¤šä¸ªå­—æ®µç”Ÿæˆä¸€ä¸ªç»„åˆå“ˆå¸Œå€¼</span></span><br><span class="line">        <span class="keyword">return</span> Objects.hash(id, name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* ä¸ºä»€ä¹ˆéœ€è¦ä¸¤è€…ä¸€èµ·é‡å†™ï¼Ÿ</span></span><br><span class="line"><span class="comment">* 1. å®ƒä»¬ä¹‹é—´å­˜åœ¨çº¦å®šï¼šå¦‚æœä¸¤ä¸ªå¯¹è±¡é€šè¿‡ equals() æ–¹æ³•æ¯”è¾ƒæ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ hashCode() æ–¹æ³•è¿”å›çš„å€¼ä¹Ÿå¿…é¡»ç›¸ç­‰ã€‚</span></span><br><span class="line"><span class="comment">* åä¹‹åˆ™ä¸ä¸€å®šï¼Œä¸ç›¸ç­‰çš„å¯¹è±¡å¯ä»¥æœ‰ç›¸åŒçš„å“ˆå¸Œç ï¼ˆå“ˆå¸Œå†²çªï¼‰ã€‚</span></span><br><span class="line"><span class="comment">* 2. å“ˆå¸Œè¡¨ç±»ï¼ˆå¦‚ HashSet, HashMapï¼‰ä¾èµ–äºè¿™ä¸ªçº¦å®šï¼šå½“å°†å¯¹è±¡å­˜å…¥å“ˆå¸Œè¡¨æ—¶ï¼Œ</span></span><br><span class="line"><span class="comment">* å®ƒä¼šå…ˆè°ƒç”¨ hashCode() ç¡®å®šå­˜å‚¨ä½ç½®ï¼Œå†è°ƒç”¨ equals() æ¥ç¡®è®¤æ˜¯å¦å­˜åœ¨ç›¸åŒçš„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">* 3. å¦‚æœåªé‡å†™ equals() ä½†ä¸é‡å†™ hashCode()ï¼Œå¯èƒ½å¯¼è‡´ä¸¤ä¸ªé€»è¾‘ä¸Šç›¸ç­‰çš„å¯¹è±¡è¢«å­˜å‚¨åœ¨ä¸åŒçš„å“ˆå¸Œä½ç½®ï¼Œ</span></span><br><span class="line"><span class="comment">* ä»è€Œæ— æ³•æ­£ç¡®æŸ¥æ‰¾å’Œå»é‡ã€‚ä¾‹å¦‚ï¼Œåœ¨ HashSet ä¸­ï¼Œå³ä½¿ä¸¤ä¸ª Student å¯¹è±¡ id å’Œ name ç›¸åŒï¼Œ</span></span><br><span class="line"><span class="comment">* ä¹Ÿä¼šè¢«è®¤ä¸ºæ˜¯ä¸åŒçš„å¯¹è±¡è€Œé‡å¤æ·»åŠ ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><hr><h3 id="æ¥å£ä¸å®ç°-Interfaces-and-Implementation"><a href="#æ¥å£ä¸å®ç°-Interfaces-and-Implementation" class="headerlink" title="æ¥å£ä¸å®ç° (Interfaces and Implementation)"></a>æ¥å£ä¸å®ç° (Interfaces and Implementation)</h3><p>è®¾è®¡ <code>Drawable</code> æ¥å£ï¼Œå¹¶ç”± <code>Circle</code> å’Œ <code>Rectangle</code> å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å®šä¹‰ Drawable æ¥å£ï¼ŒåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Drawable</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Circle ç±»å®ç° Drawable æ¥å£</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">implements</span> <span class="title class_">Drawable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ­£åœ¨ç”»ä¸€ä¸ªåœ†å½¢ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. Rectangle ç±»å®ç° Drawable æ¥å£</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">implements</span> <span class="title class_">Drawable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ­£åœ¨ç”»ä¸€ä¸ªçŸ©å½¢ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å¼‚å¸¸å¤„ç†-Exception-Handling"><a href="#å¼‚å¸¸å¤„ç†-Exception-Handling" class="headerlink" title="å¼‚å¸¸å¤„ç† (Exception Handling)"></a>å¼‚å¸¸å¤„ç† (Exception Handling)</h3><p>ä½¿ç”¨ <code>try-catch-finally</code> ç»“æ„å¤„ç† <code>FileNotFoundException</code> å¹¶ç¡®ä¿èµ„æºå…³é—­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExceptionDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">processFile</span><span class="params">(String filePath)</span> &#123;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// åœ¨ try å—å¤–éƒ¨å£°æ˜ï¼Œä»¥ä¾¿åœ¨ finally å—ä¸­è®¿é—®</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å°è¯•æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">            fileInputStream = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filePath);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ–‡ä»¶å·²æˆåŠŸæ‰“å¼€ã€‚&quot;</span>);</span><br><span class="line">            <span class="comment">// å‡è®¾è¿™é‡Œè¿›è¡Œæ–‡ä»¶è¯»å–æ“ä½œ</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            <span class="comment">// æ•è·æ–‡ä»¶æœªæ‰¾åˆ°å¼‚å¸¸</span></span><br><span class="line">            System.err.println(<span class="string">&quot;é”™è¯¯ï¼šæŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼è·¯å¾„ï¼š&quot;</span> + filePath);</span><br><span class="line">            e.printStackTrace(); <span class="comment">// æ‰“å°å¼‚å¸¸å †æ ˆä¿¡æ¯</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œfinally å—éƒ½ä¼šæ‰§è¡Œ</span></span><br><span class="line">            <span class="keyword">if</span> (fileInputStream != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">// ç¡®ä¿æ–‡ä»¶æµè¢«å…³é—­ï¼Œé˜²æ­¢èµ„æºæ³„éœ²</span></span><br><span class="line">                    fileInputStream.close();</span><br><span class="line">                    System.out.println(<span class="string">&quot;æ–‡ä»¶æµå·²åœ¨ finally å—ä¸­å…³é—­ã€‚&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    System.err.println(<span class="string">&quot;å…³é—­æ–‡ä»¶æµæ—¶å‘ç”Ÿå¼‚å¸¸ï¼š&quot;</span> + e.getMessage());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="try-with-resources"><a href="#try-with-resources" class="headerlink" title="try-with-resources"></a><code>try-with-resources</code></h3><p>ä½¿ç”¨ <code>try-with-resources</code> é‡å†™ä¸Šä¸€ä¸ªé¢˜ç›®ï¼Œå±•ç¤ºå…¶ç®€åŒ–ä¼˜åŠ¿ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TryWithResourcesDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">processFileWithResources</span><span class="params">(String filePath)</span> &#123;</span><br><span class="line">        <span class="comment">// try-with-resources è¯­å¥ï¼Œè‡ªåŠ¨ç®¡ç†å®ç°äº† AutoCloseable æ¥å£çš„èµ„æº</span></span><br><span class="line">        <span class="keyword">try</span> (<span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filePath)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ–‡ä»¶å·²æˆåŠŸæ‰“å¼€ã€‚&quot;</span>);</span><br><span class="line">            <span class="comment">// å‡è®¾è¿™é‡Œè¿›è¡Œæ–‡ä»¶è¯»å–æ“ä½œ</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            <span class="comment">// æ•è·æ–‡ä»¶æœªæ‰¾åˆ°å¼‚å¸¸</span></span><br><span class="line">            System.err.println(<span class="string">&quot;é”™è¯¯ï¼šæŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼è·¯å¾„ï¼š&quot;</span> + filePath);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// æ•è·æ–‡ä»¶å…³é—­æ—¶å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸</span></span><br><span class="line">            System.err.println(<span class="string">&quot;å…³é—­æ–‡ä»¶æµæ—¶å‘ç”Ÿå¼‚å¸¸ï¼š&quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¸éœ€è¦å•ç‹¬çš„ finally å—æ¥å…³é—­èµ„æºï¼ŒJVM ä¼šè‡ªåŠ¨å®Œæˆ</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶æµå·²åœ¨ try-with-resources è¯­å¥ä¸­è‡ªåŠ¨å…³é—­ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* try-with-resources çš„ä¼˜åŠ¿ï¼š</span></span><br><span class="line"><span class="comment">* 1. ç®€åŒ–ä»£ç ï¼šä¸å†éœ€è¦æ˜¾å¼çš„ finally å—æ¥å…³é—­èµ„æºï¼Œä»£ç æ›´ç®€æ´ã€‚</span></span><br><span class="line"><span class="comment">* 2. é¿å…èµ„æºæ³„éœ²ï¼šæ— è®º try å—æ˜¯å¦æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå¼‚å¸¸ï¼Œèµ„æºéƒ½ä¼šè¢«è‡ªåŠ¨å…³é—­ï¼Œ</span></span><br><span class="line"><span class="comment">* æœ‰æ•ˆé˜²æ­¢äº†å› å¿˜è®°å…³é—­èµ„æºè€Œå¯¼è‡´çš„å†…å­˜å’Œæ–‡ä»¶å¥æŸ„æ³„éœ²ã€‚</span></span><br><span class="line"><span class="comment">* 3. æ›´å¥½çš„å¼‚å¸¸å¤„ç†ï¼šå¦‚æœ try å—å’Œèµ„æºå…³é—­æ—¶éƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œtry-with-resources ä¼š</span></span><br><span class="line"><span class="comment">* å°†èµ„æºå…³é—­æ—¶æŠ›å‡ºçš„å¼‚å¸¸ä½œä¸ºè¢«æŠ‘åˆ¶ï¼ˆsuppressedï¼‰çš„å¼‚å¸¸ï¼Œä¸»å¼‚å¸¸ä¿æŒä¸å˜ï¼Œ</span></span><br><span class="line"><span class="comment">* ä¾¿äºè°ƒè¯•ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="å†’æ³¡æ’åº-Bubble-Sort"><a href="#å†’æ³¡æ’åº-Bubble-Sort" class="headerlink" title="å†’æ³¡æ’åº (Bubble Sort)"></a>å†’æ³¡æ’åº (Bubble Sort)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SortingAlgorithms</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bubbleSort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr == <span class="literal">null</span> || arr.length &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> arr.length;</span><br><span class="line">        <span class="comment">// å¤–å±‚å¾ªç¯æ§åˆ¶æ¯”è¾ƒè½®æ•°ï¼Œå…±è¿›è¡Œ n-1 è½®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">swapped</span> <span class="operator">=</span> <span class="literal">false</span>; <span class="comment">// ä¼˜åŒ–ï¼šå¦‚æœåœ¨æŸä¸€è½®æ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œè¯´æ˜æ•°ç»„å·²ç»æœ‰åº</span></span><br><span class="line">            <span class="comment">// å†…å±‚å¾ªç¯è´Ÿè´£æ¯è½®æ¯”è¾ƒå’Œäº¤æ¢ï¼Œå°†æœ€å¤§å…ƒç´ â€œå†’â€åˆ°æ•°ç»„æœ«å°¾</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                    <span class="comment">// äº¤æ¢å…ƒç´ </span></span><br><span class="line">                    <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[j];</span><br><span class="line">                    arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                    arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">                    swapped = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!swapped) &#123;</span><br><span class="line">                <span class="keyword">break</span>; <span class="comment">// å¦‚æœæ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œæå‰ç»“æŸæ’åº</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å¿«é€Ÿæ’åº-Quick-Sort"><a href="#å¿«é€Ÿæ’åº-Quick-Sort" class="headerlink" title="å¿«é€Ÿæ’åº (Quick Sort)"></a>å¿«é€Ÿæ’åº (Quick Sort)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SortingAlgorithms</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr == <span class="literal">null</span> || arr.length &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        quickSort(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (low &lt; high) &#123;</span><br><span class="line">            <span class="comment">// æ‰¾åˆ°åŸºå‡†å…ƒç´ çš„æ­£ç¡®ä½ç½®</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">pivotIndex</span> <span class="operator">=</span> partition(arr, low, high);</span><br><span class="line">            <span class="comment">// é€’å½’åœ°å¯¹å·¦å­æ•°ç»„è¿›è¡Œæ’åº</span></span><br><span class="line">            quickSort(arr, low, pivotIndex - <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// é€’å½’åœ°å¯¹å³å­æ•°ç»„è¿›è¡Œæ’åº</span></span><br><span class="line">            quickSort(arr, pivotIndex + <span class="number">1</span>, high);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">        <span class="comment">// é€‰æ‹©æœ€å³è¾¹çš„å…ƒç´ ä½œä¸ºåŸºå‡†</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[high];</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> (low - <span class="number">1</span>); <span class="comment">// i æŒ‡å‘å°äºç­‰äºåŸºå‡†çš„å…ƒç´ çš„æœ€åä¸€ä¸ªä½ç½®</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> low; j &lt; high; j++) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå½“å‰å…ƒç´ å°äºç­‰äºåŸºå‡†</span></span><br><span class="line">            <span class="keyword">if</span> (arr[j] &lt;= pivot) &#123;</span><br><span class="line">                i++;</span><br><span class="line">                <span class="comment">// äº¤æ¢ arr[i] å’Œ arr[j]</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[i];</span><br><span class="line">                arr[i] = arr[j];</span><br><span class="line">                arr[j] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°†åŸºå‡†å…ƒç´ æ”¾åˆ°æ­£ç¡®çš„ä½ç½®</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[i + <span class="number">1</span>];</span><br><span class="line">        arr[i + <span class="number">1</span>] = arr[high];</span><br><span class="line">        arr[high] = temp;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="äºŒåˆ†æŸ¥æ‰¾-Binary-Search"><a href="#äºŒåˆ†æŸ¥æ‰¾-Binary-Search" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾ (Binary Search)"></a>äºŒåˆ†æŸ¥æ‰¾ (Binary Search)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SearchAlgorithms</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr == <span class="literal">null</span> || arr.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> arr.length - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> left + (right - left) / <span class="number">2</span>; <span class="comment">// é˜²æ­¢æ•´æ•°æº¢å‡º</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (arr[mid] == target) &#123;</span><br><span class="line">                <span class="keyword">return</span> mid; <span class="comment">// æ‰¾åˆ°ç›®æ ‡ï¼Œè¿”å›ç´¢å¼•</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &lt; target) &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>; <span class="comment">// ç›®æ ‡åœ¨å³åŠéƒ¨åˆ†ï¼Œæ›´æ–°å·¦è¾¹ç•Œ</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>; <span class="comment">// ç›®æ ‡åœ¨å·¦åŠéƒ¨åˆ†ï¼Œæ›´æ–°å³è¾¹ç•Œ</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>; <span class="comment">// æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="é“¾è¡¨åè½¬-Reverse-Linked-List"><a href="#é“¾è¡¨åè½¬-Reverse-Linked-List" class="headerlink" title="é“¾è¡¨åè½¬ (Reverse Linked List)"></a>é“¾è¡¨åè½¬ (Reverse Linked List)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">        <span class="type">int</span> val;</span><br><span class="line">        ListNode next;</span><br><span class="line">        ListNode(<span class="type">int</span> x) &#123; val = x; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// å‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">current</span> <span class="operator">=</span> head; <span class="comment">// å½“å‰èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (current != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">ListNode</span> <span class="variable">nextTemp</span> <span class="operator">=</span> current.next; <span class="comment">// æš‚å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            current.next = prev; <span class="comment">// å°†å½“å‰èŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            prev = current; <span class="comment">// å‰ä¸€ä¸ªèŠ‚ç‚¹å‘å‰ç§»åŠ¨</span></span><br><span class="line">            current = nextTemp; <span class="comment">// å½“å‰èŠ‚ç‚¹å‘å‰ç§»åŠ¨</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> prev; <span class="comment">// prev æœ€ç»ˆä¼šæ˜¯æ–°çš„å¤´èŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="é“¾è¡¨ä¸­é—´èŠ‚ç‚¹-Middle-of-Linked-List"><a href="#é“¾è¡¨ä¸­é—´èŠ‚ç‚¹-Middle-of-Linked-List" class="headerlink" title="é“¾è¡¨ä¸­é—´èŠ‚ç‚¹ (Middle of Linked List)"></a>é“¾è¡¨ä¸­é—´èŠ‚ç‚¹ (Middle of Linked List)</h3><p>ä½¿ç”¨<strong>å¿«æ…¢æŒ‡é’ˆ</strong>ï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡èµ°ä¸€æ­¥ã€‚å½“å¿«æŒ‡é’ˆåˆ°è¾¾é“¾è¡¨æœ«å°¾æ—¶ï¼Œæ…¢æŒ‡é’ˆæ­£å¥½åœ¨ä¸­é—´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">        <span class="type">int</span> val;</span><br><span class="line">        ListNode next;</span><br><span class="line">        ListNode(<span class="type">int</span> x) &#123; val = x; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title function_">findMiddleNode</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head; <span class="comment">// æ…¢æŒ‡é’ˆï¼Œæ¯æ¬¡èµ°ä¸€æ­¥</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">fast</span> <span class="operator">=</span> head; <span class="comment">// å¿«æŒ‡é’ˆï¼Œæ¯æ¬¡èµ°ä¸¤æ­¥</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å½“å¿«æŒ‡é’ˆåˆ°è¾¾æœ«å°¾æ—¶ï¼Œæ…¢æŒ‡é’ˆæ­£å¥½åœ¨ä¸­é—´</span></span><br><span class="line">        <span class="keyword">while</span> (fast != <span class="literal">null</span> &amp;&amp; fast.next != <span class="literal">null</span>) &#123;</span><br><span class="line">            slow = slow.next;</span><br><span class="line">            fast = fast.next.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> slow;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ç§»é™¤é‡å¤å…ƒç´ -Remove-Duplicates"><a href="#ç§»é™¤é‡å¤å…ƒç´ -Remove-Duplicates" class="headerlink" title="ç§»é™¤é‡å¤å…ƒç´  (Remove Duplicates)"></a>ç§»é™¤é‡å¤å…ƒç´  (Remove Duplicates)</h3><p>ä¸ä½¿ç”¨ <code>Set</code>ï¼Œé€šè¿‡åŒå±‚å¾ªç¯æˆ–æ’åºåéå†å®ç°ã€‚è¿™é‡Œä½¿ç”¨æ’åºåéå†çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒæ›´é«˜æ•ˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">removeDuplicates</span><span class="params">(ArrayList&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (list == <span class="literal">null</span> || list.size() &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Collections.sort(list); <span class="comment">// å…ˆæ’åºï¼Œä½¿å¾—é‡å¤å…ƒç´ ç›¸é‚»</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å€’åºéå†ï¼Œç§»é™¤é‡å¤å…ƒç´ </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> list.size() - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (list.get(i).equals(list.get(i + <span class="number">1</span>))) &#123;</span><br><span class="line">                list.remove(i + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å­—ç¬¦ä¸²åè½¬-Reverse-String"><a href="#å­—ç¬¦ä¸²åè½¬-Reverse-String" class="headerlink" title="å­—ç¬¦ä¸²åè½¬ (Reverse String)"></a>å­—ç¬¦ä¸²åè½¬ (Reverse String)</h3><p>ä¸ä½¿ç”¨ <code>StringBuilder</code> æˆ– <code>StringBuffer</code> çš„ <code>reverse()</code> æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">reverseString</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (str == <span class="literal">null</span> || str.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> str;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">char</span>[] charArray = str.toCharArray();</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> charArray.length - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="comment">// äº¤æ¢é¦–å°¾å­—ç¬¦</span></span><br><span class="line">            <span class="type">char</span> <span class="variable">temp</span> <span class="operator">=</span> charArray[left];</span><br><span class="line">            charArray[left] = charArray[right];</span><br><span class="line">            charArray[right] = temp;</span><br><span class="line">            left++;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(charArray);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å›æ–‡å­—ç¬¦ä¸²-Palindrome-String"><a href="#å›æ–‡å­—ç¬¦ä¸²-Palindrome-String" class="headerlink" title="å›æ–‡å­—ç¬¦ä¸² (Palindrome String)"></a>å›æ–‡å­—ç¬¦ä¸² (Palindrome String)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPalindrome</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (str == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™å¹¶ç§»é™¤éå­—æ¯æ•°å­—å­—ç¬¦</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">cleanedStr</span> <span class="operator">=</span> str.toLowerCase().replaceAll(<span class="string">&quot;[^a-z0-9]&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> cleanedStr.length() - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cleanedStr.charAt(left) != cleanedStr.charAt(right)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            left++;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="è®¡ç®—é˜¶ä¹˜-Factorial-Calculation"><a href="#è®¡ç®—é˜¶ä¹˜-Factorial-Calculation" class="headerlink" title="è®¡ç®—é˜¶ä¹˜ (Factorial Calculation)"></a>è®¡ç®—é˜¶ä¹˜ (Factorial Calculation)</h3><h4 id="é€’å½’æ–¹å¼"><a href="#é€’å½’æ–¹å¼" class="headerlink" title="é€’å½’æ–¹å¼"></a>é€’å½’æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MathProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">factorialRecursive</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Factorial is not defined for negative numbers.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span> || n == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n * factorialRecursive(n - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éé€’å½’æ–¹å¼"><a href="#éé€’å½’æ–¹å¼" class="headerlink" title="éé€’å½’æ–¹å¼"></a>éé€’å½’æ–¹å¼</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class MathProblems &#123;</span><br><span class="line">    public static long factorialIterative(int n) &#123;</span><br><span class="line">        if (n &lt; 0) &#123;</span><br><span class="line">            throw new IllegalArgumentException(&quot;Factorial is not defined for negative numbers.&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        long result = 1;</span><br><span class="line">        for (int i = 2; i &lt;= n; i++) &#123;</span><br><span class="line">            result *= i;</span><br><span class="line">        &#125;</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="æ–æ³¢é‚£å¥‘æ•°åˆ—-Fibonacci-Sequence"><a href="#æ–æ³¢é‚£å¥‘æ•°åˆ—-Fibonacci-Sequence" class="headerlink" title="æ–æ³¢é‚£å¥‘æ•°åˆ— (Fibonacci Sequence)"></a>æ–æ³¢é‚£å¥‘æ•°åˆ— (Fibonacci Sequence)</h3><h4 id="é€’å½’æ–¹å¼-1"><a href="#é€’å½’æ–¹å¼-1" class="headerlink" title="é€’å½’æ–¹å¼"></a>é€’å½’æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MathProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">fibonacciRecursive</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Invalid input for Fibonacci sequence.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fibonacciRecursive(n - <span class="number">1</span>) + fibonacciRecursive(n - <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éé€’å½’æ–¹å¼-1"><a href="#éé€’å½’æ–¹å¼-1" class="headerlink" title="éé€’å½’æ–¹å¼"></a>éé€’å½’æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MathProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">fibonacciIterative</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Invalid input for Fibonacci sequence.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> a + b;</span><br><span class="line">            a = b;</span><br><span class="line">            b = sum;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å­—ç¬¦ä¸²ä¸­å­—ç¬¦è®¡æ•°-Character-Count"><a href="#å­—ç¬¦ä¸²ä¸­å­—ç¬¦è®¡æ•°-Character-Count" class="headerlink" title="å­—ç¬¦ä¸²ä¸­å­—ç¬¦è®¡æ•° (Character Count)"></a>å­—ç¬¦ä¸²ä¸­å­—ç¬¦è®¡æ•° (Character Count)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;Character, Integer&gt; <span class="title function_">countCharacters</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        Map&lt;Character, Integer&gt; charCountMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (str == <span class="literal">null</span> || str.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> charCountMap;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : str.toCharArray()) &#123;</span><br><span class="line">            charCountMap.put(c, charCountMap.getOrDefault(c, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> charCountMap;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ä¸¤æ•°ä¹‹å’Œ-Two-Sum"><a href="#ä¸¤æ•°ä¹‹å’Œ-Two-Sum" class="headerlink" title="ä¸¤æ•°ä¹‹å’Œ (Two Sum)"></a>ä¸¤æ•°ä¹‹å’Œ (Two Sum)</h3><p>ä½¿ç”¨ <code>HashMap</code> å°†å€¼å’Œç´¢å¼•å­˜å‚¨èµ·æ¥ï¼Œå®ç°ä¸€æ¬¡éå†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; numMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">complement</span> <span class="operator">=</span> target - nums[i];</span><br><span class="line">            <span class="keyword">if</span> (numMap.containsKey(complement)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;numMap.get(complement), i&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            numMap.put(nums[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;&#125;; <span class="comment">// æœªæ‰¾åˆ°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="æ•°ç»„ä¸­æœ€å¤§-å°å€¼-Max-Min-in-Array"><a href="#æ•°ç»„ä¸­æœ€å¤§-å°å€¼-Max-Min-in-Array" class="headerlink" title="æ•°ç»„ä¸­æœ€å¤§&#x2F;å°å€¼ (Max&#x2F;Min in Array)"></a>æ•°ç»„ä¸­æœ€å¤§&#x2F;å°å€¼ (Max&#x2F;Min in Array)</h3><p>ä¸€æ¬¡éå†æ‰¾åˆ°æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] findMaxMin(<span class="type">int</span>[] arr) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr == <span class="literal">null</span> || arr.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Array cannot be null or empty.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &lt; min) &#123;</span><br><span class="line">                min = arr[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &gt; max) &#123;</span><br><span class="line">                max = arr[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;max, min&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="è´¨æ•°åˆ¤æ–­-Prime-Number"><a href="#è´¨æ•°åˆ¤æ–­-Prime-Number" class="headerlink" title="è´¨æ•°åˆ¤æ–­ (Prime Number)"></a>è´¨æ•°åˆ¤æ–­ (Prime Number)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MathProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPrime</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 1 å’Œæ›´å°çš„æ•°éƒ½ä¸æ˜¯è´¨æ•°</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åªéœ€è¦æ£€æŸ¥åˆ° n çš„å¹³æ–¹æ ¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i * i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (n % i == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="é›†åˆäº¤é›†-List-Intersection"><a href="#é›†åˆäº¤é›†-List-Intersection" class="headerlink" title="é›†åˆäº¤é›† (List Intersection)"></a>é›†åˆäº¤é›† (List Intersection)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">intersection</span><span class="params">(List&lt;T&gt; list1, List&lt;T&gt; list2)</span> &#123;</span><br><span class="line">        List&lt;T&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (list1 == <span class="literal">null</span> || list2 == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†ç¬¬ä¸€ä¸ªåˆ—è¡¨ï¼Œæ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨ç¬¬äºŒä¸ªåˆ—è¡¨ä¸­</span></span><br><span class="line">        <span class="keyword">for</span> (T element : list1) &#123;</span><br><span class="line">            <span class="keyword">if</span> (list2.contains(element) &amp;&amp; !result.contains(element)) &#123;</span><br><span class="line">                result.add(element);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="æ•°ç»„åˆå¹¶-Merge-Sorted-Arrays"><a href="#æ•°ç»„åˆå¹¶-Merge-Sorted-Arrays" class="headerlink" title="æ•°ç»„åˆå¹¶ (Merge Sorted Arrays)"></a>æ•°ç»„åˆå¹¶ (Merge Sorted Arrays)</h3><p>å°†ä¸¤ä¸ªå·²æ’åºçš„æ•°ç»„åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„å·²æ’åºæ•°ç»„ï¼Œä½¿ç”¨<strong>åŒæŒ‡é’ˆ</strong>æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] mergeSortedArrays(<span class="type">int</span>[] arr1, <span class="type">int</span>[] arr2) &#123;</span><br><span class="line">        <span class="type">int</span>[] merged = <span class="keyword">new</span> <span class="title class_">int</span>[arr1.length + arr2.length];</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = <span class="number">0</span>, k = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (i &lt; arr1.length &amp;&amp; j &lt; arr2.length) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr1[i] &lt; arr2[j]) &#123;</span><br><span class="line">                merged[k++] = arr1[i++];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                merged[k++] = arr2[j++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (i &lt; arr1.length) &#123;</span><br><span class="line">            merged[k++] = arr1[i++];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (j &lt; arr2.length) &#123;</span><br><span class="line">            merged[k++] = arr2[j++];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> merged;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="åˆ¤æ–­å›æ–‡æ•°-Palindrome-Number"><a href="#åˆ¤æ–­å›æ–‡æ•°-Palindrome-Number" class="headerlink" title="åˆ¤æ–­å›æ–‡æ•° (Palindrome Number)"></a>åˆ¤æ–­å›æ–‡æ•° (Palindrome Number)</h3><p>ä¸ä½¿ç”¨ <code>String</code> è½¬æ¢ï¼Œé€šè¿‡æ•°å­¦æ–¹æ³•åè½¬ä¸€åŠæ•°å­—ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MathProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPalindromeNumber</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="comment">// è´Ÿæ•°å’Œä»¥ 0 ç»“å°¾çš„é 0 æ•°å­—éƒ½ä¸æ˜¯å›æ–‡</span></span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || (x % <span class="number">10</span> == <span class="number">0</span> &amp;&amp; x != <span class="number">0</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">reversedNumber</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x &gt; reversedNumber) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">lastDigit</span> <span class="operator">=</span> x % <span class="number">10</span>;</span><br><span class="line">            reversedNumber = reversedNumber * <span class="number">10</span> + lastDigit;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¶æ•°ä½æ•°å­—æ—¶ï¼Œx ç­‰äº reversedNumber</span></span><br><span class="line">        <span class="comment">// å¥‡æ•°ä½æ•°å­—æ—¶ï¼Œx ç­‰äº reversedNumber é™¤ä»¥ 10</span></span><br><span class="line">        <span class="keyword">return</span> x == reversedNumber || x == reversedNumber / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ç½—é©¬æ•°å­—è½¬æ•´æ•°-Roman-to-Integer"><a href="#ç½—é©¬æ•°å­—è½¬æ•´æ•°-Roman-to-Integer" class="headerlink" title="ç½—é©¬æ•°å­—è½¬æ•´æ•° (Roman to Integer)"></a>ç½—é©¬æ•°å­—è½¬æ•´æ•° (Roman to Integer)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">romanToInt</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        Map&lt;Character, Integer&gt; romanMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        romanMap.put(<span class="string">&#x27;I&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">        romanMap.put(<span class="string">&#x27;V&#x27;</span>, <span class="number">5</span>);</span><br><span class="line">        romanMap.put(<span class="string">&#x27;X&#x27;</span>, <span class="number">10</span>);</span><br><span class="line">        romanMap.put(<span class="string">&#x27;L&#x27;</span>, <span class="number">50</span>);</span><br><span class="line">        romanMap.put(<span class="string">&#x27;C&#x27;</span>, <span class="number">100</span>);</span><br><span class="line">        romanMap.put(<span class="string">&#x27;D&#x27;</span>, <span class="number">500</span>);</span><br><span class="line">        romanMap.put(<span class="string">&#x27;M&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">currentVal</span> <span class="operator">=</span> romanMap.get(s.charAt(i));</span><br><span class="line">            <span class="comment">// å¦‚æœå½“å‰å­—ç¬¦çš„å€¼å°äºä¸‹ä¸€ä¸ªå­—ç¬¦çš„å€¼ï¼Œåˆ™éœ€è¦å‡å»å½“å‰å€¼</span></span><br><span class="line">            <span class="keyword">if</span> (i &lt; s.length() - <span class="number">1</span> &amp;&amp; currentVal &lt; romanMap.get(s.charAt(i + <span class="number">1</span>))) &#123;</span><br><span class="line">                result -= currentVal;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                result += currentVal;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="çˆ¬æ¥¼æ¢¯-Climbing-Stairs"><a href="#çˆ¬æ¥¼æ¢¯-Climbing-Stairs" class="headerlink" title="çˆ¬æ¥¼æ¢¯ (Climbing Stairs)"></a>çˆ¬æ¥¼æ¢¯ (Climbing Stairs)</h3><p>è¿™æ˜¯ç»å…¸çš„<strong>åŠ¨æ€è§„åˆ’</strong>é—®é¢˜ã€‚</p><h4 id="åŠ¨æ€è§„åˆ’æ–¹å¼-éé€’å½’"><a href="#åŠ¨æ€è§„åˆ’æ–¹å¼-éé€’å½’" class="headerlink" title="åŠ¨æ€è§„åˆ’æ–¹å¼ (éé€’å½’)"></a>åŠ¨æ€è§„åˆ’æ–¹å¼ (éé€’å½’)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MathProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> n;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        dp[<span class="number">1</span>] = <span class="number">1</span>; <span class="comment">// çˆ¬ 1 çº§å°é˜¶ï¼Œæœ‰ 1 ç§æ–¹æ³•</span></span><br><span class="line">        dp[<span class="number">2</span>] = <span class="number">2</span>; <span class="comment">// çˆ¬ 2 çº§å°é˜¶ï¼Œæœ‰ 2 ç§æ–¹æ³• (1+1, 2)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="comment">// åˆ°è¾¾ç¬¬ i çº§å°é˜¶çš„æ–¹æ³•æ•° = (ä» i-1 çº§çˆ¬ 1 çº§çš„æ–¹æ³•æ•°) + (ä» i-2 çº§çˆ¬ 2 çº§çš„æ–¹æ³•æ•°)</span></span><br><span class="line">            dp[i] = dp[i - <span class="number">1</span>] + dp[i - <span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½çš„ï¼Œä»¥ä¸‹æ˜¯åŸºäº  è¯­è¨€çš„çº¿ç¨‹åŸºç¡€ä¸åŒæ­¥çš„å®ç°ï¼Œå¹¶é™„å¸¦è¯¦ç»†æ³¨é‡Šã€‚</p><h3 id="çº¿ç¨‹åˆ›å»º"><a href="#çº¿ç¨‹åˆ›å»º" class="headerlink" title="çº¿ç¨‹åˆ›å»º"></a>çº¿ç¨‹åˆ›å»º</h3><h4 id="1-ç»§æ‰¿-Thread-ç±»"><a href="#1-ç»§æ‰¿-Thread-ç±»" class="headerlink" title="1. ç»§æ‰¿ Thread ç±»"></a>1. ç»§æ‰¿ <code>Thread</code> ç±»</h4><p>é€šè¿‡ç»§æ‰¿ <code>java.lang.Thread</code> ç±»å¹¶é‡å†™å…¶ <code>run()</code> æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»§æ‰¿ Thread ç±»åˆ›å»ºçº¿ç¨‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ä½¿ç”¨ç»§æ‰¿ Thread ç±»çš„æ–¹å¼åˆ›å»ºçš„çº¿ç¨‹æ­£åœ¨è¿è¡Œã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-å®ç°-Runnable-æ¥å£"><a href="#2-å®ç°-Runnable-æ¥å£" class="headerlink" title="2. å®ç° Runnable æ¥å£"></a>2. å®ç° <code>Runnable</code> æ¥å£</h4><p>é€šè¿‡å®ç° <code>java.lang.Runnable</code> æ¥å£å¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>Thread</code> ç±»çš„æ„é€ å‡½æ•°æ¥åˆ›å»ºçº¿ç¨‹ã€‚è¿™ç§æ–¹å¼æ›´çµæ´»ï¼Œæ¨èä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç° Runnable æ¥å£åˆ›å»ºçº¿ç¨‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ä½¿ç”¨å®ç° Runnable æ¥å£çš„æ–¹å¼åˆ›å»ºçš„çº¿ç¨‹æ­£åœ¨è¿è¡Œã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="sleep-ä¸-yield"><a href="#sleep-ä¸-yield" class="headerlink" title="sleep() ä¸ yield()"></a><code>sleep()</code> ä¸ <code>yield()</code></h3><p><code>sleep()</code> å’Œ <code>yield()</code> éƒ½æ˜¯çº¿ç¨‹è°ƒåº¦çš„æ–¹æ³•ï¼Œä½†å®ƒä»¬çš„ä½œç”¨å’Œæ•ˆæœä¸åŒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SleepYieldDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ sleep() çš„çº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹ A: å¼€å§‹æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// sleep() ä½¿çº¿ç¨‹æš‚åœæŒ‡å®šæ—¶é—´ï¼Œè¿›å…¥ WAITING çŠ¶æ€ï¼Œä½†ä¸ä¼šé‡Šæ”¾é”</span></span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹ A: å‡†å¤‡ç¡çœ  2 ç§’...&quot;</span>);</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹ A: ç¡çœ ç»“æŸï¼Œç»§ç»­æ‰§è¡Œã€‚&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ yield() çš„çº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹ B: å¼€å§‹æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹ B: æ­£åœ¨æ‰§è¡Œ &quot;</span> + i);</span><br><span class="line">                <span class="comment">// yield() æç¤ºçº¿ç¨‹è°ƒåº¦å™¨è®©å‡º CPU æ—¶é—´ï¼Œä½†ä¸ä¿è¯ä¸€å®šç”Ÿæ•ˆ</span></span><br><span class="line">                Thread.<span class="keyword">yield</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹ B: æ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>sleep()</strong>: ä½¿å½“å‰çº¿ç¨‹<strong>æš‚åœæ‰§è¡ŒæŒ‡å®šçš„æ—¶é—´</strong>ï¼Œè¿›å…¥ <strong>TIMED_WAITING</strong> çŠ¶æ€ã€‚å®ƒä¼š<strong>é‡Šæ”¾ CPU èµ„æº</strong>ï¼Œä½†<strong>ä¸é‡Šæ”¾é”</strong>ã€‚</li><li><strong>yield()</strong>: æç¤ºçº¿ç¨‹è°ƒåº¦å™¨ï¼Œå½“å‰çº¿ç¨‹æ„¿æ„<strong>è®©å‡ºå½“å‰ CPU æ—¶é—´ç‰‡</strong>ã€‚çº¿ç¨‹ä¼šä» <strong>RUNNING</strong> çŠ¶æ€è½¬æ¢ä¸º <strong>RUNNABLE</strong> çŠ¶æ€ï¼Œä¸å…¶ä»–çº¿ç¨‹ç«äº‰ CPUï¼Œä½†<strong>ä¸ä¿è¯</strong>å…¶ä»–çº¿ç¨‹èƒ½ç«‹å³è·å¾—æ‰§è¡Œã€‚å®ƒä¸»è¦ç”¨äºä¼˜åŒ–çº¿ç¨‹è°ƒåº¦ï¼Œé€šå¸¸åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­<strong>ä¸åº”ä¾èµ–</strong>å…¶è¡Œä¸ºæ¥ä¿è¯æ­£ç¡®æ€§ã€‚</li></ul><hr><h3 id="join-æ–¹æ³•"><a href="#join-æ–¹æ³•" class="headerlink" title="join() æ–¹æ³•"></a><code>join()</code> æ–¹æ³•</h3><p><code>join()</code> æ–¹æ³•å…è®¸ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">JoinDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">workerThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å­çº¿ç¨‹: æ­£åœ¨æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">                Thread.sleep(<span class="number">3000</span>); <span class="comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span></span><br><span class="line">                System.out.println(<span class="string">&quot;å­çº¿ç¨‹: æ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        workerThread.start();</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹: ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•...&quot;</span>);</span><br><span class="line">        <span class="comment">// è°ƒç”¨ join() æ–¹æ³•ï¼Œä¸»çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ° workerThread æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line">        workerThread.join();</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹: å­çº¿ç¨‹å·²æ‰§è¡Œå®Œæ¯•ï¼Œä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="éçº¿ç¨‹å®‰å…¨è®¡æ•°å™¨"><a href="#éçº¿ç¨‹å®‰å…¨è®¡æ•°å™¨" class="headerlink" title="éçº¿ç¨‹å®‰å…¨è®¡æ•°å™¨"></a>éçº¿ç¨‹å®‰å…¨è®¡æ•°å™¨</h3><p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹å…±äº«èµ„æºè¿›è¡Œè¯»å†™æ“ä½œï¼Œå¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UnsafeCounter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> &#123;</span><br><span class="line">        count++; <span class="comment">// è¿™ä¸€è¡Œä»£ç å¹¶éåŸå­æ“ä½œï¼Œå®ƒåŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼šè¯»ã€åŠ  1ã€å†™</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadSafetyDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">UnsafeCounter</span> <span class="variable">counter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UnsafeCounter</span>();</span><br><span class="line">        Thread[] threads = <span class="keyword">new</span> <span class="title class_">Thread</span>[<span class="number">100</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; threads.length; i++) &#123;</span><br><span class="line">            threads[i] = <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">10000</span>; j++) &#123;</span><br><span class="line">                    counter.increment();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            threads[i].start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Thread thread : threads) &#123;</span><br><span class="line">            thread.join();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ€ç»ˆç»“æœä¸ä¸€å®šæ˜¯ 100 * 10000 = 1000000</span></span><br><span class="line">        System.out.println(<span class="string">&quot;éçº¿ç¨‹å®‰å…¨è®¡æ•°å™¨çš„æœ€ç»ˆç»“æœ: &quot;</span> + counter.getCount());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="synchronized-å…³é”®å­—"><a href="#synchronized-å…³é”®å­—" class="headerlink" title="synchronized å…³é”®å­—"></a><code>synchronized</code> å…³é”®å­—</h3><p>ä½¿ç”¨ <code>synchronized</code> å…³é”®å­—å¯ä»¥ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºï¼Œä»è€Œè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SynchronizedCounter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ synchronized å…³é”®å­—ä¿®é¥°æ–¹æ³•ï¼Œé”ä½æ•´ä¸ªå¯¹è±¡å®ä¾‹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> &#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SynchronizedDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">SynchronizedCounter</span> <span class="variable">counter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SynchronizedCounter</span>();</span><br><span class="line">        Thread[] threads = <span class="keyword">new</span> <span class="title class_">Thread</span>[<span class="number">100</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; threads.length; i++) &#123;</span><br><span class="line">            threads[i] = <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">10000</span>; j++) &#123;</span><br><span class="line">                    counter.increment();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            threads[i].start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Thread thread : threads) &#123;</span><br><span class="line">            thread.join();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ€ç»ˆç»“æœä¸º 1000000</span></span><br><span class="line">        System.out.println(<span class="string">&quot;synchronized è®¡æ•°å™¨çš„æœ€ç»ˆç»“æœ: &quot;</span> + counter.getCount());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="synchronized-å—ä¸æ–¹æ³•"><a href="#synchronized-å—ä¸æ–¹æ³•" class="headerlink" title="synchronized å—ä¸æ–¹æ³•"></a><code>synchronized</code> å—ä¸æ–¹æ³•</h3><ul><li><strong>synchronized æ–¹æ³•</strong>: é”å®šçš„æ˜¯å½“å‰å¯¹è±¡å®ä¾‹ (<code>this</code>)ã€‚</li><li><strong>synchronized å—</strong>: æä¾›äº†æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œå¯ä»¥æŒ‡å®šé”å®šçš„å¯¹è±¡ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SynchronizedBlockDemo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// synchronized æ–¹æ³•ï¼Œé”å®šå½“å‰å¯¹è±¡å®ä¾‹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">synchronizedMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot; è¿›å…¥ synchronized æ–¹æ³•ã€‚&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot; ç¦»å¼€ synchronized æ–¹æ³•ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// synchronized å—ï¼Œé”å®šæŒ‡å®šçš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">synchronizedBlock1</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot; å°è¯•è·å– lock1...&quot;</span>);</span><br><span class="line">        <span class="keyword">synchronized</span> (lock1) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; å·²è·å– lock1ã€‚&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; é‡Šæ”¾ lock1ã€‚&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">synchronizedBlock2</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot; å°è¯•è·å– lock2...&quot;</span>);</span><br><span class="line">        <span class="keyword">synchronized</span> (lock2) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; å·²è·å– lock2ã€‚&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; é‡Šæ”¾ lock2ã€‚&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * åŒºåˆ«ä¸é€‚ç”¨åœºæ™¯:</span></span><br><span class="line"><span class="comment"> * - synchronized æ–¹æ³•: ç®€å•æ˜“ç”¨ï¼Œä½†é”å®šèŒƒå›´å¤§ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚å½“éœ€è¦åŒæ­¥æ•´ä¸ªæ–¹æ³•æ—¶ä½¿ç”¨ã€‚</span></span><br><span class="line"><span class="comment"> * - synchronized å—: é”å®šèŒƒå›´å°ï¼Œå¯ä»¥åªåŒæ­¥éœ€è¦ä¿æŠ¤çš„ä»£ç æ®µï¼Œæé«˜å¹¶å‘æ€§èƒ½ã€‚å½“åªéœ€è¦åŒæ­¥éƒ¨åˆ†ä»£ç æ—¶ä½¿ç”¨ã€‚</span></span><br><span class="line"><span class="comment"> * åŒæ—¶ï¼Œå¯ä»¥é€šè¿‡é”å®šä¸åŒçš„å¯¹è±¡æ¥é¿å…ä¸å¿…è¦çš„é˜»å¡ï¼Œå®ç°æ›´é«˜çš„å¹¶å‘åº¦ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><hr><h3 id="volatile-å…³é”®å­—"><a href="#volatile-å…³é”®å­—" class="headerlink" title="volatile å…³é”®å­—"></a><code>volatile</code> å…³é”®å­—</h3><p><code>volatile</code> å…³é”®å­—ä¿è¯äº†å˜é‡åœ¨å¤šçº¿ç¨‹é—´çš„<strong>å¯è§æ€§</strong>ï¼Œä½†ä¸ä¿è¯<strong>åŸå­æ€§</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">VolatileDemo</span> &#123;</span><br><span class="line">    <span class="comment">// volatile ä¿è¯æ‰€æœ‰çº¿ç¨‹çœ‹åˆ°çš„æ˜¯è¯¥å˜é‡çš„æœ€æ–°å€¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">boolean</span> <span class="variable">ready</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹ A: æ­£åœ¨ç­‰å¾…æ ‡å¿—ä½å˜ä¸º trueã€‚&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span> (!ready) &#123;</span><br><span class="line">                <span class="comment">// ç©ºå¾ªç¯ï¼Œç­‰å¾… ready å˜ä¸º true</span></span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹ A: æ ‡å¿—ä½å·²å˜ä¸º trueï¼Œå¾ªç¯ç»“æŸã€‚&quot;</span>);</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        Thread.sleep(<span class="number">1000</span>); <span class="comment">// ç¡®ä¿çº¿ç¨‹ A å…ˆè¿è¡Œ</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹: æ­£åœ¨å°†æ ‡å¿—ä½è®¾ç½®ä¸º trueã€‚&quot;</span>);</span><br><span class="line">        ready = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ä¸ºä»€ä¹ˆ volatile ä¸èƒ½ä¿è¯åŸå­æ€§?</span></span><br><span class="line"><span class="comment"> * - åŸå­æ€§æ˜¯æŒ‡ä¸€ä¸ªæ“ä½œæ˜¯ä¸å¯ä¸­æ–­çš„ï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚</span></span><br><span class="line"><span class="comment"> * - volatile åªèƒ½ä¿è¯å˜é‡çš„è¯»å†™æ“ä½œæ˜¯åŸå­çš„ï¼Œä½†åƒ `count++` è¿™æ ·çš„å¤åˆæ“ä½œï¼ˆè¯»ã€åŠ ã€å†™ï¼‰</span></span><br><span class="line"><span class="comment"> * ä¾ç„¶ä¸æ˜¯åŸå­çš„ã€‚å¤šä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶è¯»åˆ°æ—§å€¼ï¼Œå¯¼è‡´æœ€ç»ˆç»“æœä¸æ­£ç¡®ã€‚</span></span><br><span class="line"><span class="comment"> * - volatile ä¸»è¦ç”¨äºä¸€å†™å¤šè¯»çš„åœºæ™¯ï¼Œæˆ–è€…ç”¨äºæ§åˆ¶çº¿ç¨‹æ‰§è¡Œæµç¨‹çš„æ ‡å¿—ä½ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><hr><h3 id="AtomicInteger"><a href="#AtomicInteger" class="headerlink" title="AtomicInteger"></a><code>AtomicInteger</code></h3><p><code>AtomicInteger</code> æ˜¯ä¸€ä¸ªåŸå­ç±»ï¼Œå®ƒä½¿ç”¨ CAS (Compare-and-Swap) æœºåˆ¶æ¥ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œä»è€Œå®ç°çº¿ç¨‹å®‰å…¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AtomicCounter</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ AtomicInteger æ›¿ä»£ int</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">AtomicInteger</span> <span class="variable">count</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> &#123;</span><br><span class="line">        count.incrementAndGet(); <span class="comment">// è¿™æ˜¯ä¸€ä¸ªåŸå­æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count.get();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AtomicDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">AtomicCounter</span> <span class="variable">counter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicCounter</span>();</span><br><span class="line">        Thread[] threads = <span class="keyword">new</span> <span class="title class_">Thread</span>[<span class="number">100</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; threads.length; i++) &#123;</span><br><span class="line">            threads[i] = <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">10000</span>; j++) &#123;</span><br><span class="line">                    counter.increment();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            threads[i].start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Thread thread : threads) &#123;</span><br><span class="line">            thread.join();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ€ç»ˆç»“æœä¸º 1000000</span></span><br><span class="line">        System.out.println(<span class="string">&quot;AtomicInteger è®¡æ•°å™¨çš„æœ€ç»ˆç»“æœ: &quot;</span> + counter.getCount());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="çº¿ç¨‹é€šä¿¡"><a href="#çº¿ç¨‹é€šä¿¡" class="headerlink" title="çº¿ç¨‹é€šä¿¡"></a>çº¿ç¨‹é€šä¿¡</h3><p>ä½¿ç”¨ <code>wait()</code> å’Œ <code>notifyAll()</code> å®ç°ä¸¤ä¸ªçº¿ç¨‹äº¤æ›¿æ‰“å°å¥‡æ•°å’Œå¶æ•°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PrintNumbers</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printOdd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">            <span class="keyword">while</span> (count &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                <span class="keyword">while</span> (count % <span class="number">2</span> == <span class="number">0</span>) &#123; <span class="comment">// å¦‚æœæ˜¯å¶æ•°ï¼Œåˆ™ç­‰å¾…</span></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        lock.wait();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;: &quot;</span> + count++);</span><br><span class="line">                lock.notifyAll(); <span class="comment">// å”¤é†’å…¶ä»–ç­‰å¾…çš„çº¿ç¨‹</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printEven</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">            <span class="keyword">while</span> (count &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                <span class="keyword">while</span> (count % <span class="number">2</span> != <span class="number">0</span>) &#123; <span class="comment">// å¦‚æœæ˜¯å¥‡æ•°ï¼Œåˆ™ç­‰å¾…</span></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        lock.wait();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;: &quot;</span> + count++);</span><br><span class="line">                lock.notifyAll(); <span class="comment">// å”¤é†’å…¶ä»–ç­‰å¾…çš„çº¿ç¨‹</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">PrintNumbers</span> <span class="variable">pn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintNumbers</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">oddThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(pn::printOdd, <span class="string">&quot;å¥‡æ•°çº¿ç¨‹&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">evenThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(pn::printEven, <span class="string">&quot;å¶æ•°çº¿ç¨‹&quot;</span>);</span><br><span class="line"></span><br><span class="line">        oddThread.start();</span><br><span class="line">        evenThread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½çš„ï¼Œä»¥ä¸‹æ˜¯  ä¸­é«˜çº§å¹¶å‘ç¼–ç¨‹çš„å®ç°ï¼Œå¹¶é™„å¸¦è¯¦ç»†æ³¨é‡Šã€‚</p><h3 id="ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼-ä½¿ç”¨-wait-å’Œ-notifyAll"><a href="#ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼-ä½¿ç”¨-wait-å’Œ-notifyAll" class="headerlink" title="ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ (ä½¿ç”¨ wait() å’Œ notifyAll())"></a>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ (ä½¿ç”¨ <code>wait()</code> å’Œ <code>notifyAll()</code>)</h3><p>è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„çº¿ç¨‹åä½œé—®é¢˜ã€‚ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®ï¼Œæ”¾å…¥å…±äº«é˜Ÿåˆ—ï¼›æ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ®è¿›è¡Œæ¶ˆè´¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ProducerConsumerClassic</span> &#123;</span><br><span class="line">    <span class="comment">// å…±äº«é˜Ÿåˆ—ï¼Œä½¿ç”¨ LinkedList å®ç°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Queue&lt;Integer&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// é˜Ÿåˆ—æœ€å¤§å®¹é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX_SIZE</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">LOCK</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">produce</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (LOCK) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œç”Ÿäº§è€…ç­‰å¾…</span></span><br><span class="line">                <span class="keyword">while</span> (queue.size() == MAX_SIZE) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;é˜Ÿåˆ—å·²æ»¡ï¼Œç”Ÿäº§è€…ç­‰å¾…...&quot;</span>);</span><br><span class="line">                    LOCK.wait();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// ç”Ÿäº§æ•°æ®å¹¶æ”¾å…¥é˜Ÿåˆ—</span></span><br><span class="line">                queue.offer(i);</span><br><span class="line">                System.out.println(<span class="string">&quot;ç”Ÿäº§è€…ç”Ÿäº§äº†: &quot;</span> + i);</span><br><span class="line">                i++;</span><br><span class="line">                <span class="comment">// å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ï¼ˆåŒ…æ‹¬æ¶ˆè´¹è€…ï¼‰</span></span><br><span class="line">                LOCK.notifyAll();</span><br><span class="line">            &#125;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>); <span class="comment">// æ¨¡æ‹Ÿç”Ÿäº§æ—¶é—´</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">consume</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (LOCK) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œæ¶ˆè´¹è€…ç­‰å¾…</span></span><br><span class="line">                <span class="keyword">while</span> (queue.isEmpty()) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ¶ˆè´¹è€…ç­‰å¾…...&quot;</span>);</span><br><span class="line">                    LOCK.wait();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// æ¶ˆè´¹æ•°æ®</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">data</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">                System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…æ¶ˆè´¹äº†: &quot;</span> + data);</span><br><span class="line">                <span class="comment">// å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ï¼ˆåŒ…æ‹¬ç”Ÿäº§è€…ï¼‰</span></span><br><span class="line">                LOCK.notifyAll();</span><br><span class="line">            &#125;</span><br><span class="line">            Thread.sleep(<span class="number">500</span>); <span class="comment">// æ¨¡æ‹Ÿæ¶ˆè´¹æ—¶é—´</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼-ä½¿ç”¨-BlockingQueue"><a href="#ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼-ä½¿ç”¨-BlockingQueue" class="headerlink" title="ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ (ä½¿ç”¨ BlockingQueue)"></a>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ (ä½¿ç”¨ <code>BlockingQueue</code>)</h3><p><code>java.util.concurrent.BlockingQueue</code> æ¥å£æä¾›äº†çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—æ“ä½œï¼Œç®€åŒ–äº†ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹çš„å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.BlockingQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.LinkedBlockingQueue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ProducerConsumerBlockingQueue</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ BlockingQueueï¼Œå®ƒå†…éƒ¨å·²ç»å¤„ç†äº†çº¿ç¨‹åŒæ­¥</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BlockingQueue&lt;Integer&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">produce</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">// put() æ–¹æ³•åœ¨é˜Ÿåˆ—æ»¡æ—¶ä¼šè‡ªåŠ¨é˜»å¡</span></span><br><span class="line">            queue.put(i);</span><br><span class="line">            System.out.println(<span class="string">&quot;ç”Ÿäº§è€…ç”Ÿäº§äº†: &quot;</span> + i);</span><br><span class="line">            i++;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">consume</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">// take() æ–¹æ³•åœ¨é˜Ÿåˆ—ç©ºæ—¶ä¼šè‡ªåŠ¨é˜»å¡</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">data</span> <span class="operator">=</span> queue.take();</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…æ¶ˆè´¹äº†: &quot;</span> + data);</span><br><span class="line">            Thread.sleep(<span class="number">500</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="ReentrantLock"></a><code>ReentrantLock</code></h3><p>ä½¿ç”¨ <code>ReentrantLock</code> å®ç°çº¿ç¨‹å®‰å…¨è®¡æ•°å™¨ï¼Œå¹¶è§£é‡Šå…¶ä¸ <code>synchronized</code> çš„åŒºåˆ«ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ReentrantLockCounter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> &#123;</span><br><span class="line">        lock.lock(); <span class="comment">// è·å–é”</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            count++; <span class="comment">// åœ¨ try å—ä¸­æ‰§è¡Œéœ€è¦åŒæ­¥çš„ä»£ç </span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock(); <span class="comment">// åœ¨ finally å—ä¸­é‡Šæ”¾é”ï¼Œç¡®ä¿é”æ€»æ˜¯è¢«é‡Šæ”¾</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* ReentrantLock ä¸ synchronized çš„åŒºåˆ«:</span></span><br><span class="line"><span class="comment">* 1. è¯­æ³•å±‚é¢: `synchronized` æ˜¯ JVM çš„å†…ç½®å…³é”®å­—ï¼Œè€Œ `ReentrantLock` æ˜¯ä¸€ä¸ªç±»ã€‚</span></span><br><span class="line"><span class="comment">* 2. çµæ´»æ€§: `ReentrantLock` æä¾›äº†æ›´çµæ´»çš„é”å®šæ§åˆ¶ã€‚ä¾‹å¦‚ï¼Œå®ƒæ”¯æŒå…¬å¹³é”ï¼ˆæŒ‰è¯·æ±‚é¡ºåºè·å–é”ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">* å¯ä»¥å°è¯•éé˜»å¡åœ°è·å–é”ï¼ˆ`tryLock()`ï¼‰ï¼Œä»¥åŠæ”¯æŒä¸­æ–­ï¼ˆ`lockInterruptibly()`ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">* 3. æ€§èƒ½: åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œ`ReentrantLock` é€šå¸¸æ€§èƒ½æ›´å¥½ã€‚ä½†éšç€  å¯¹ `synchronized` ä¼˜åŒ–ï¼ˆåå‘é”ã€è½»é‡çº§é”ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">* ä¸¤è€…æ€§èƒ½å·²éå¸¸æ¥è¿‘ã€‚åœ¨ç®€å•åœºæ™¯ä¸‹ï¼Œ`synchronized` æ›´ç®€æ´ã€‚</span></span><br><span class="line"><span class="comment">* 4. åä½œ: `ReentrantLock` å¿…é¡»é…åˆ `Condition` æ¥å£æ‰èƒ½å®ç°çº¿ç¨‹é—´çš„ç­‰å¾…/å”¤é†’æœºåˆ¶ï¼Œè€Œ `synchronized` ç›´æ¥</span></span><br><span class="line"><span class="comment">* ä½¿ç”¨ `Object` çš„ `wait()` å’Œ `notify()`ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><hr><h3 id="ReentrantLock-ä¸-Condition"><a href="#ReentrantLock-ä¸-Condition" class="headerlink" title="ReentrantLock ä¸ Condition"></a><code>ReentrantLock</code> ä¸ <code>Condition</code></h3><p>ä½¿ç”¨ <code>ReentrantLock</code> å’Œ <code>Condition</code> é‡æ–°å®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ProducerConsumerCondition</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Queue&lt;Integer&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX_SIZE</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸¤ä¸ª Condition å®ä¾‹ï¼Œåˆ†åˆ«ç”¨äºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Condition</span> <span class="variable">producerCondition</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Condition</span> <span class="variable">consumerCondition</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">produce</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (queue.size() == MAX_SIZE) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;é˜Ÿåˆ—å·²æ»¡ï¼Œç”Ÿäº§è€…ç­‰å¾…...&quot;</span>);</span><br><span class="line">                    producerCondition.await(); <span class="comment">// ç”Ÿäº§è€…ç­‰å¾…</span></span><br><span class="line">                &#125;</span><br><span class="line">                queue.offer(i);</span><br><span class="line">                System.out.println(<span class="string">&quot;ç”Ÿäº§è€…ç”Ÿäº§äº†: &quot;</span> + i);</span><br><span class="line">                i++;</span><br><span class="line">                consumerCondition.signalAll(); <span class="comment">// å”¤é†’æ‰€æœ‰æ¶ˆè´¹è€…</span></span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">consume</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (queue.isEmpty()) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ¶ˆè´¹è€…ç­‰å¾…...&quot;</span>);</span><br><span class="line">                    consumerCondition.await(); <span class="comment">// æ¶ˆè´¹è€…ç­‰å¾…</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">int</span> <span class="variable">data</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">                System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…æ¶ˆè´¹äº†: &quot;</span> + data);</span><br><span class="line">                producerCondition.signalAll(); <span class="comment">// å”¤é†’æ‰€æœ‰ç”Ÿäº§è€…</span></span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">            Thread.sleep(<span class="number">500</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ExecutorService"><a href="#ExecutorService" class="headerlink" title="ExecutorService"></a><code>ExecutorService</code></h3><p>åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼Œå¹¶å‘å…¶æäº¤å¤šä¸ªä»»åŠ¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExecutorServiceDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°ä¸º 3 çš„çº¿ç¨‹æ± </span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">taskId</span> <span class="operator">=</span> i;</span><br><span class="line">            executorService.execute(() -&gt; &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;ä»»åŠ¡ &quot;</span> + taskId + <span class="string">&quot; æ­£åœ¨ç”±çº¿ç¨‹ &quot;</span> + Thread.currentThread().getName() + <span class="string">&quot; æ‰§è¡Œã€‚&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>); <span class="comment">// æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œæ—¶é—´</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å…³é—­çº¿ç¨‹æ± ï¼Œä¸å†æ¥æ”¶æ–°ä»»åŠ¡ï¼Œå·²æäº¤çš„ä»»åŠ¡ä¼šç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Callable-ä¸-Future"><a href="#Callable-ä¸-Future" class="headerlink" title="Callable ä¸ Future"></a><code>Callable</code> ä¸ <code>Future</code></h3><p>ä½¿ç”¨ <code>Callable</code> æäº¤ä»»åŠ¡ï¼Œå¹¶ä½¿ç”¨ <code>Future</code> è·å–è¿”å›å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CallableFutureDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newSingleThreadExecutor();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ª Callable ä»»åŠ¡ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">        Callable&lt;String&gt; task = () -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä»»åŠ¡å¼€å§‹æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>); <span class="comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›ç»“æœï¼&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤ä»»åŠ¡å¹¶è·å¾— Future å¯¹è±¡</span></span><br><span class="line">        Future&lt;String&gt; future = executorService.submit(task);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹: ä»»åŠ¡å·²æäº¤ï¼Œç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œ...&quot;</span>);</span><br><span class="line">        <span class="comment">// get() æ–¹æ³•ä¼šé˜»å¡ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆå¹¶è¿”å›ç»“æœ</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> future.get();</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹: è·å¾—ä»»åŠ¡ç»“æœ -&gt; &quot;</span> + result);</span><br><span class="line"></span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="CountDownLatch"><a href="#CountDownLatch" class="headerlink" title="CountDownLatch"></a><code>CountDownLatch</code></h3><p><code>CountDownLatch</code> å…è®¸ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç­‰å¾…ç›´åˆ°åœ¨å…¶ä»–çº¿ç¨‹ä¸­æ‰§è¡Œçš„ä¸€ç»„æ“ä½œå®Œæˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CountDownLatchDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">workerCount</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">        <span class="comment">// è®¡æ•°å™¨ï¼Œå½“è®¡æ•°å™¨å‡åˆ° 0 æ—¶ï¼Œä¸»çº¿ç¨‹ä¼šè¢«å”¤é†’</span></span><br><span class="line">        <span class="type">CountDownLatch</span> <span class="variable">latch</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CountDownLatch</span>(workerCount);</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(workerCount);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; workerCount; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">workerId</span> <span class="operator">=</span> i;</span><br><span class="line">            executor.execute(() -&gt; &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å·¥ä½œçº¿ç¨‹ &quot;</span> + workerId + <span class="string">&quot; å¼€å§‹æ‰§è¡Œä»»åŠ¡...&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep((<span class="type">long</span>) (Math.random() * <span class="number">2000</span>)); <span class="comment">// æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œ</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;å·¥ä½œçº¿ç¨‹ &quot;</span> + workerId + <span class="string">&quot; ä»»åŠ¡å®Œæˆã€‚&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    latch.countDown(); <span class="comment">// ä»»åŠ¡å®Œæˆåï¼Œè®¡æ•°å™¨å‡ 1</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹: ç­‰å¾…æ‰€æœ‰å·¥ä½œçº¿ç¨‹å®Œæˆ...&quot;</span>);</span><br><span class="line">        latch.await(); <span class="comment">// é˜»å¡ä¸»çº¿ç¨‹ï¼Œç›´åˆ°è®¡æ•°å™¨ä¸º 0</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹: æ‰€æœ‰å·¥ä½œçº¿ç¨‹å·²å®Œæˆï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ­¥ã€‚&quot;</span>);</span><br><span class="line"></span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="CyclicBarrier"><a href="#CyclicBarrier" class="headerlink" title="CyclicBarrier"></a><code>CyclicBarrier</code></h3><p><code>CyclicBarrier</code> å…è®¸ä¸€ç»„çº¿ç¨‹ç›¸äº’ç­‰å¾…ï¼Œç›´åˆ°æ‰€æœ‰çº¿ç¨‹éƒ½åˆ°è¾¾ä¸€ä¸ªå…±åŒçš„å±éšœç‚¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.BrokenBarrierException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CyclicBarrier;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CyclicBarrierDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">partySize</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">        <span class="comment">// å½“ 3 ä¸ªçº¿ç¨‹éƒ½åˆ°è¾¾å±éšœæ—¶ï¼Œæ‰§è¡Œä¸€ä¸ªå±éšœåŠ¨ä½œ</span></span><br><span class="line">        <span class="type">CyclicBarrier</span> <span class="variable">barrier</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CyclicBarrier</span>(partySize, () -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;\næ‰€æœ‰çº¿ç¨‹å·²åˆ°è¾¾å±éšœç‚¹ï¼ç»§ç»­æ‰§è¡Œä¸‹ä¸€é˜¶æ®µã€‚\n&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(partySize);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; partySize; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">threadId</span> <span class="operator">=</span> i;</span><br><span class="line">            executor.execute(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;çº¿ç¨‹ &quot;</span> + threadId + <span class="string">&quot; æ­£åœ¨æ‰§è¡Œç¬¬ä¸€é˜¶æ®µä»»åŠ¡...&quot;</span>);</span><br><span class="line">                    Thread.sleep((<span class="type">long</span>) (Math.random() * <span class="number">1000</span>));</span><br><span class="line">                    System.out.println(<span class="string">&quot;çº¿ç¨‹ &quot;</span> + threadId + <span class="string">&quot; ç¬¬ä¸€é˜¶æ®µä»»åŠ¡å®Œæˆï¼Œåˆ°è¾¾å±éšœã€‚&quot;</span>);</span><br><span class="line">                    barrier.await(); <span class="comment">// çº¿ç¨‹åœ¨æ­¤å¤„ç­‰å¾…</span></span><br><span class="line"></span><br><span class="line">                    System.out.println(<span class="string">&quot;çº¿ç¨‹ &quot;</span> + threadId + <span class="string">&quot; æ­£åœ¨æ‰§è¡Œç¬¬äºŒé˜¶æ®µä»»åŠ¡...&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException | BrokenBarrierException e) &#123;</span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Semaphore"><a href="#Semaphore" class="headerlink" title="Semaphore"></a><code>Semaphore</code></h3><p><code>Semaphore</code>ï¼ˆä¿¡å·é‡ï¼‰ç”¨æ¥æ§åˆ¶å¯¹èµ„æºçš„å¹¶å‘è®¿é—®æ•°é‡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.Semaphore;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SemaphoreDemo</span> &#123;</span><br><span class="line">    <span class="comment">// å…è®¸ 3 ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Semaphore</span> <span class="variable">semaphore</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Semaphore</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accessResource</span><span class="params">(<span class="type">int</span> threadId)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            semaphore.acquire(); <span class="comment">// è·å–è®¸å¯</span></span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹ &quot;</span> + threadId + <span class="string">&quot; æ­£åœ¨è®¿é—®èµ„æº...&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>); <span class="comment">// æ¨¡æ‹Ÿèµ„æºè®¿é—®æ—¶é—´</span></span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹ &quot;</span> + threadId + <span class="string">&quot; è®¿é—®èµ„æºå®Œæ¯•ã€‚&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            semaphore.release(); <span class="comment">// é‡Šæ”¾è®¸å¯</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SemaphoreDemo</span> <span class="variable">demo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SemaphoreDemo</span>();</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">threadId</span> <span class="operator">=</span> i;</span><br><span class="line">            executor.execute(() -&gt; demo.accessResource(threadId));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="çº¿ç¨‹æ­»é”"><a href="#çº¿ç¨‹æ­»é”" class="headerlink" title="çº¿ç¨‹æ­»é”"></a>çº¿ç¨‹æ­»é”</h3><h4 id="1-æ­»é”æ¼”ç¤º"><a href="#1-æ­»é”æ¼”ç¤º" class="headerlink" title="1. æ­»é”æ¼”ç¤º"></a>1. æ­»é”æ¼”ç¤º</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DeadlockDemo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">threadA</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock1) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹A: å·²è·å¾— lock1ï¼Œå°è¯•è·å– lock2...&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹A: å·²è·å¾— lock2ã€‚&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">threadB</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock2) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹B: å·²è·å¾— lock2ï¼Œå°è¯•è·å– lock1...&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock1) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹B: å·²è·å¾— lock1ã€‚&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">DeadlockDemo</span> <span class="variable">demo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeadlockDemo</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(demo::threadA, <span class="string">&quot;Thread-A&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(demo::threadB, <span class="string">&quot;Thread-B&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* æ­»é”äº§ç”Ÿæ¡ä»¶:</span></span><br><span class="line"><span class="comment">* 1. äº’æ–¥æ¡ä»¶: èµ„æºæ˜¯ç‹¬å çš„ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨æ—¶ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•ä½¿ç”¨ã€‚</span></span><br><span class="line"><span class="comment">* 2. è¯·æ±‚ä¸ä¿æŒæ¡ä»¶: çº¿ç¨‹å·²ç»æŒæœ‰è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆè¯·æ±‚å…¶ä»–èµ„æºï¼ŒåŒæ—¶åˆä¿æŒå¯¹å·²æœ‰èµ„æºçš„å æœ‰ã€‚</span></span><br><span class="line"><span class="comment">* 3. ä¸å¯å‰¥å¤ºæ¡ä»¶: èµ„æºåªèƒ½åœ¨æŒæœ‰å®ƒçš„çº¿ç¨‹å®Œæˆä»»åŠ¡åç”±å®ƒè‡ªå·±é‡Šæ”¾ã€‚</span></span><br><span class="line"><span class="comment">* 4. å¾ªç¯ç­‰å¾…æ¡ä»¶: å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹èµ„æºçš„å¾ªç¯é“¾ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½åœ¨ç­‰å¾…ä¸‹ä¸€ä¸ªçº¿ç¨‹æ‰€æŒæœ‰çš„èµ„æºã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><hr><h3 id="æ­»é”é¢„é˜²"><a href="#æ­»é”é¢„é˜²" class="headerlink" title="æ­»é”é¢„é˜²"></a>æ­»é”é¢„é˜²</h3><p>é€šè¿‡æ‰“ç ´æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ä¹‹ä¸€æ¥é¢„é˜²æ­»é”ã€‚è¿™é‡Œé€šè¿‡<strong>èµ„æºæœ‰åºåˆ†é…</strong>æ¥æ‰“ç ´<strong>å¾ªç¯ç­‰å¾…</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DeadlockPrevention</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">threadA</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çº¿ç¨‹ A æŒ‰é¡ºåºå…ˆè·å– lock1ï¼Œå†è·å– lock2</span></span><br><span class="line">        <span class="keyword">synchronized</span> (lock1) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹A: å·²è·å¾— lock1ï¼Œå°è¯•è·å– lock2...&quot;</span>);</span><br><span class="line">            <span class="keyword">synchronized</span> (lock2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹A: å·²è·å¾— lock2ã€‚&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">threadB</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çº¿ç¨‹ B ä¹ŸæŒ‰é¡ºåºå…ˆè·å– lock1ï¼Œå†è·å– lock2</span></span><br><span class="line">        <span class="keyword">synchronized</span> (lock1) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹B: å·²è·å¾— lock1ï¼Œå°è¯•è·å– lock2...&quot;</span>);</span><br><span class="line">            <span class="keyword">synchronized</span> (lock2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹B: å·²è·å¾— lock2ã€‚&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">DeadlockPrevention</span> <span class="variable">demo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeadlockPrevention</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(demo::threadA, <span class="string">&quot;Thread-A&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(demo::threadB, <span class="string">&quot;Thread-B&quot;</span>).start();</span><br><span class="line">        <span class="comment">// ä¸¤ä¸ªçº¿ç¨‹éƒ½æŒ‰ç›¸åŒçš„é¡ºåºè·å–é”ï¼Œä¸ä¼šå‘ç”Ÿæ­»é”</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a><code>ThreadLocal</code></h3><p><code>ThreadLocal</code> ä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›äº†ä¸€ä¸ªç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œå®ç°äº†çº¿ç¨‹é—´çš„æ•°æ®éš”ç¦»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadLocalDemo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;String&gt; threadLocal = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAndPrint</span><span class="params">(String value)</span> &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®çº¿ç¨‹æœ¬åœ°å˜é‡</span></span><br><span class="line">        threadLocal.set(value);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>); <span class="comment">// æ¨¡æ‹Ÿä»»åŠ¡</span></span><br><span class="line">            <span class="comment">// è·å–å¹¶æ‰“å°å½“å‰çº¿ç¨‹çš„å˜é‡å€¼</span></span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; çš„å˜é‡å€¼: &quot;</span> + threadLocal.get());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// æœ€ä½³å®è·µï¼šä½¿ç”¨å®Œåç§»é™¤ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span></span><br><span class="line">            threadLocal.remove();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ThreadLocalDemo</span> <span class="variable">demo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadLocalDemo</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; demo.setAndPrint(<span class="string">&quot;çº¿ç¨‹ A çš„æ•°æ®&quot;</span>), <span class="string">&quot;Thread-A&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; demo.setAndPrint(<span class="string">&quot;çº¿ç¨‹ B çš„æ•°æ®&quot;</span>), <span class="string">&quot;Thread-B&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* åŸç†å’Œä½œç”¨:</span></span><br><span class="line"><span class="comment">* åŸç†: ThreadLocal å†…éƒ¨æœ‰ä¸€ä¸ª `ThreadLocalMap`ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ `ThreadLocalMap`ã€‚</span></span><br><span class="line"><span class="comment">* å½“æˆ‘ä»¬è°ƒç”¨ `set()` æ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šæ˜¯å°†å€¼å­˜å‚¨åˆ°äº†å½“å‰çº¿ç¨‹çš„ `ThreadLocalMap` ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment">* é”®ä¸º `ThreadLocal` å®ä¾‹æœ¬èº«ã€‚</span></span><br><span class="line"><span class="comment">* ä½œç”¨:</span></span><br><span class="line"><span class="comment">* 1. æ•°æ®éš”ç¦»: è§£å†³äº†å¤šçº¿ç¨‹è®¿é—®å…±äº«å˜é‡çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä½†å…¶æœ¬è´¨ä¸æ˜¯åŒæ­¥ï¼Œè€Œæ˜¯é€šè¿‡â€œä»¥ç©ºé—´æ¢æ—¶é—´â€çš„æ–¹å¼ï¼Œ</span></span><br><span class="line"><span class="comment">* ä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›ç‹¬ç«‹å‰¯æœ¬ï¼Œé¿å…äº†ç«äº‰ã€‚</span></span><br><span class="line"><span class="comment">* 2. ä¼ é€’å‚æ•°: åœ¨æ•´ä¸ªæ–¹æ³•è°ƒç”¨é“¾ä¸­ï¼Œæ— éœ€å±‚å±‚ä¼ é€’å‚æ•°ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨ä»»ä½•åœ°æ–¹è·å–å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><hr><h3 id="çº¿ç¨‹å®‰å…¨å•ä¾‹-é™æ€å†…éƒ¨ç±»"><a href="#çº¿ç¨‹å®‰å…¨å•ä¾‹-é™æ€å†…éƒ¨ç±»" class="headerlink" title="çº¿ç¨‹å®‰å…¨å•ä¾‹ (é™æ€å†…éƒ¨ç±»)"></a>çº¿ç¨‹å®‰å…¨å•ä¾‹ (é™æ€å†…éƒ¨ç±»)</h3><p>é™æ€å†…éƒ¨ç±»æ–¹å¼æ˜¯å®ç°çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼å•ä¾‹çš„æœ€ä½³å®è·µä¹‹ä¸€ã€‚å®ƒåˆ©ç”¨äº† JVM ç±»åŠ è½½æœºåˆ¶çš„çº¿ç¨‹å®‰å…¨ç‰¹æ€§ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SingletonThreadSafe</span> &#123;</span><br><span class="line">    <span class="comment">// ç§æœ‰åŒ–æ„é€ å™¨</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SingletonThreadSafe</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™æ€å†…éƒ¨ç±»ï¼Œå®ƒåªåœ¨ SingletonThreadSafe è¢«é¦–æ¬¡è°ƒç”¨æ—¶æ‰ä¼šè¢«åŠ è½½</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SingletonHolder</span> &#123;</span><br><span class="line">        <span class="comment">// é™æ€æˆå‘˜å˜é‡ï¼Œåœ¨ç±»åŠ è½½æ—¶åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">SingletonThreadSafe</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SingletonThreadSafe</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æä¾›å…¨å±€è®¿é—®ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SingletonThreadSafe <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonHolder.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* ä¼˜ç‚¹:</span></span><br><span class="line"><span class="comment">* 1. çº¿ç¨‹å®‰å…¨: ç±»çš„åŠ è½½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤ INSTANCE çš„åˆå§‹åŒ–æ˜¯åŸå­çš„ã€‚</span></span><br><span class="line"><span class="comment">* 2. æ‡’åŠ è½½: åªæœ‰åœ¨è°ƒç”¨ getInstance() æ–¹æ³•æ—¶ï¼ŒSingletonHolder ç±»æ‰ä¼šè¢«åŠ è½½ï¼Œ</span></span><br><span class="line"><span class="comment">* ä»è€Œå®ç°æ‡’åŠ è½½ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><hr><h3 id="ReadWriteLock"><a href="#ReadWriteLock" class="headerlink" title="ReadWriteLock"></a><code>ReadWriteLock</code></h3><p><code>ReadWriteLock</code> é€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯ï¼Œå®ƒå…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œè¯»æ“ä½œï¼Œä½†å†™æ“ä½œå¿…é¡»æ˜¯äº’æ–¥çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReadWriteLock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantReadWriteLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ReadWriteLockDemo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReadWriteLock</span> <span class="variable">rwLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantReadWriteLock</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">sharedData</span> <span class="operator">=</span> <span class="string">&quot;åˆå§‹æ•°æ®&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">readData</span><span class="params">()</span> &#123;</span><br><span class="line">        rwLock.readLock().lock(); <span class="comment">// è·å–è¯»é”</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; æ­£åœ¨è¯»å–æ•°æ®...&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            <span class="keyword">return</span> (String) sharedData;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            rwLock.readLock().unlock(); <span class="comment">// é‡Šæ”¾è¯»é”</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeData</span><span class="params">(String newData)</span> &#123;</span><br><span class="line">        rwLock.writeLock().lock(); <span class="comment">// è·å–å†™é”</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; æ­£åœ¨å†™å…¥æ•°æ®...&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            <span class="comment">// sharedData = newData; // å®é™…æ›´æ–°æ•°æ®</span></span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; å†™å…¥å®Œæˆã€‚&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            rwLock.writeLock().unlock(); <span class="comment">// é‡Šæ”¾å†™é”</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="çº¿ç¨‹æ± å…³é—­"><a href="#çº¿ç¨‹æ± å…³é—­" class="headerlink" title="çº¿ç¨‹æ± å…³é—­"></a>çº¿ç¨‹æ± å…³é—­</h3><p><code>ExecutorService</code> çš„ä¸¤ç§å…³é—­æ–¹å¼ï¼š<code>shutdown()</code> å’Œ <code>shutdownNow()</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ShutdownDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤ 5 ä¸ªä»»åŠ¡</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">taskId</span> <span class="operator">=</span> i;</span><br><span class="line">            executor.execute(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;ä»»åŠ¡ &quot;</span> + taskId + <span class="string">&quot; æ­£åœ¨æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">                    Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;ä»»åŠ¡ &quot;</span> + taskId + <span class="string">&quot; è¢«ä¸­æ–­ã€‚&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// shutdown() vs shutdownNow()</span></span><br><span class="line">        <span class="comment">// executor.shutdown(); // ä¼˜é›…å…³é—­</span></span><br><span class="line">        executor.shutdownNow(); <span class="comment">// æš´åŠ›å…³é—­</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;çº¿ç¨‹æ± å·²å…³é—­ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* åŒºåˆ«:</span></span><br><span class="line"><span class="comment">* - shutdown(): ä¼˜é›…å…³é—­ã€‚ä¸å†æ¥å—æ–°çš„ä»»åŠ¡ï¼Œä½†ä¼šç­‰å¾…å·²æäº¤çš„ä»»åŠ¡ï¼ˆåŒ…æ‹¬æ­£åœ¨æ‰§è¡Œå’Œåœ¨é˜Ÿåˆ—ä¸­çš„ï¼‰å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ã€‚</span></span><br><span class="line"><span class="comment">* æ‰§è¡Œåï¼ŒisShutdown() è¿”å› trueï¼ŒisTerminated() è¿”å› falseï¼Œç›´åˆ°æ‰€æœ‰ä»»åŠ¡å®Œæˆã€‚</span></span><br><span class="line"><span class="comment">* - shutdownNow(): æš´åŠ›å…³é—­ã€‚ç«‹å³åœæ­¢æ‰€æœ‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶è¿”å›åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="comment">* å®ƒä¼šå‘æ‰€æœ‰çº¿ç¨‹å‘é€ interrupt() ä¸­æ–­ä¿¡å·ã€‚</span></span><br><span class="line"><span class="comment">* æ‰§è¡Œåï¼ŒisShutdown() è¿”å› trueï¼ŒisTerminated() ç«‹å³è¿”å› trueã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><hr><h3 id="ä¸­æ–­æœºåˆ¶"><a href="#ä¸­æ–­æœºåˆ¶" class="headerlink" title="ä¸­æ–­æœºåˆ¶"></a>ä¸­æ–­æœºåˆ¶</h3><p>ä¸€ä¸ªçº¿ç¨‹é€šè¿‡å“åº” <code>interrupt()</code> è°ƒç”¨æ¥æ­£ç¡®åœæ­¢è‡ªèº«ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">InterruptedThreadDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">worker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (!Thread.currentThread().isInterrupted()) &#123; <span class="comment">// æ£€æŸ¥ä¸­æ–­æ ‡å¿—</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;çº¿ç¨‹æ­£åœ¨æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">                    <span class="comment">// sleep()ã€wait() ç­‰æ–¹æ³•ä¼šæŠ›å‡º InterruptedException å¹¶æ¸…é™¤ä¸­æ–­æ ‡å¿—</span></span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;çº¿ç¨‹è¢«ä¸­æ–­ï¼&quot;</span>);</span><br><span class="line">                    <span class="comment">// é‡æ–°è®¾ç½®ä¸­æ–­æ ‡å¿—ï¼Œä»¥ä¾¿å¤–å±‚å¾ªç¯èƒ½æ­£ç¡®é€€å‡º</span></span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                    <span class="comment">// æˆ–è€…ç›´æ¥ return é€€å‡º</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹å·²é€€å‡ºã€‚&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        worker.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">3500</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å‘é€ä¸­æ–­ä¿¡å·</span></span><br><span class="line">        worker.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­æ•°ç»„æ±‚å’Œ-Subarray-Sum"><a href="#å­æ•°ç»„æ±‚å’Œ-Subarray-Sum" class="headerlink" title="å­æ•°ç»„æ±‚å’Œ (Subarray Sum)"></a>å­æ•°ç»„æ±‚å’Œ (Subarray Sum)</h3><p>ä½¿ç”¨<strong>æ»‘åŠ¨çª—å£</strong>æˆ–<strong>å‰ç¼€å’Œ + å“ˆå¸Œè¡¨</strong>ä¸¤ç§æ–¹å¼è§£å†³ã€‚è¿™é‡Œæ¼”ç¤ºå‰ç¼€å’Œ + å“ˆå¸Œè¡¨ï¼Œå®ƒèƒ½å¤„ç†è´Ÿæ•°æƒ…å†µä¸”æ—¶é—´å¤æ‚åº¦æ›´ä¼˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayProblems</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¾å‡ºå’Œç­‰äºç›®æ ‡å€¼çš„è¿ç»­å­æ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨å‰ç¼€å’Œä¸å“ˆå¸Œè¡¨çš„æ–¹å¼ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nums   æ•´æ•°æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> target ç›®æ ‡å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¦‚æœæ‰¾åˆ°ï¼Œè¿”å›å­æ•°ç»„çš„èµ·å§‹å’Œç»“æŸç´¢å¼•ï¼›å¦åˆ™è¿”å› null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] findSubarraySum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="literal">null</span> || nums.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// key: å‰ç¼€å’Œ, value: å‡ºç°è¯¥å‰ç¼€å’Œçš„ç´¢å¼•</span></span><br><span class="line">        Map&lt;Integer, Integer&gt; prefixSumMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        prefixSumMap.put(<span class="number">0</span>, -<span class="number">1</span>); <span class="comment">// åˆå§‹åŒ–ï¼Œå¤„ç†ä»æ•°ç»„å¼€å¤´å¼€å§‹çš„å­æ•°ç»„</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">currentSum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            currentSum += nums[i];</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ£€æŸ¥æ˜¯å¦å­˜åœ¨ (currentSum - target) è¿™æ ·çš„å‰ç¼€å’Œ</span></span><br><span class="line">            <span class="keyword">if</span> (prefixSumMap.containsKey(currentSum - target)) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> prefixSumMap.get(currentSum - target) + <span class="number">1</span>;</span><br><span class="line">                <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> i;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;start, end&#125;;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            prefixSumMap.put(currentSum, i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å­—ç¬¦ä¸²å»é‡-Remove-Duplicates-from-String"><a href="#å­—ç¬¦ä¸²å»é‡-Remove-Duplicates-from-String" class="headerlink" title="å­—ç¬¦ä¸²å»é‡ (Remove Duplicates from String)"></a>å­—ç¬¦ä¸²å»é‡ (Remove Duplicates from String)</h3><p>ä½¿ç”¨ <code>LinkedHashSet</code> ä¿æŒç›¸å¯¹é¡ºåºæˆ–æ‰‹åŠ¨éå†ã€‚è¿™é‡Œæ‰‹åŠ¨éå†å®ç°ï¼Œé¿å…ä½¿ç”¨é¢å¤–æ•°æ®ç»“æ„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StringProblems</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œå»é‡ï¼Œå¹¶ä¿æŒåŸæœ‰å­—ç¬¦çš„ç›¸å¯¹é¡ºåºã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str å¾…å»é‡çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å»é‡åçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">removeDuplicates</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (str == <span class="literal">null</span> || str.length() &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> str;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="type">boolean</span>[] charSet = <span class="keyword">new</span> <span class="title class_">boolean</span>[<span class="number">256</span>]; <span class="comment">// å‡è®¾ä¸º ASCII å­—ç¬¦é›†</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; str.length(); i++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> str.charAt(i);</span><br><span class="line">            <span class="keyword">if</span> (!charSet[c]) &#123;</span><br><span class="line">                sb.append(c);</span><br><span class="line">                charSet[c] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="æœ€é•¿ä¸é‡å¤å­ä¸²-Longest-Substring-Without-Repeating-Characters"><a href="#æœ€é•¿ä¸é‡å¤å­ä¸²-Longest-Substring-Without-Repeating-Characters" class="headerlink" title="æœ€é•¿ä¸é‡å¤å­ä¸² (Longest Substring Without Repeating Characters)"></a>æœ€é•¿ä¸é‡å¤å­ä¸² (Longest Substring Without Repeating Characters)</h3><p>ä½¿ç”¨<strong>æ»‘åŠ¨çª—å£</strong>åŠ <strong>å“ˆå¸Œè¡¨</strong>æˆ–<strong>æ•°ç»„</strong>æ¥é«˜æ•ˆè§£å†³ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StringProblems</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¾å‡ºæœ€é•¿ä¸é‡å¤å­ä¸²çš„é•¿åº¦ã€‚</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨æ»‘åŠ¨çª—å£ï¼ˆåŒæŒ‡é’ˆï¼‰å’Œå“ˆå¸Œè¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> s è¾“å…¥å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æœ€é•¿ä¸é‡å¤å­ä¸²çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">lengthOfLongestSubstring</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="literal">null</span> || s.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// key: å­—ç¬¦, value: å­—ç¬¦çš„æœ€æ–°ç´¢å¼•</span></span><br><span class="line">        Map&lt;Character, Integer&gt; charIndexMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxLength</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// æ»‘åŠ¨çª—å£çš„å·¦è¾¹ç•Œ</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> <span class="number">0</span>; right &lt; s.length(); right++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">currentChar</span> <span class="operator">=</span> s.charAt(right);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¦‚æœå½“å‰å­—ç¬¦å·²åœ¨çª—å£å†…ï¼Œæ›´æ–°å·¦è¾¹ç•Œ</span></span><br><span class="line">            <span class="keyword">if</span> (charIndexMap.containsKey(currentChar)) &#123;</span><br><span class="line">                left = Math.max(left, charIndexMap.get(currentChar) + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            charIndexMap.put(currentChar, right);</span><br><span class="line">            maxLength = Math.max(maxLength, right - left + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxLength;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å­—ç¬¦ä¸²è½¬æ•´æ•°-String-to-Integer-atoi"><a href="#å­—ç¬¦ä¸²è½¬æ•´æ•°-String-to-Integer-atoi" class="headerlink" title="å­—ç¬¦ä¸²è½¬æ•´æ•° (String to Integer - atoi)"></a>å­—ç¬¦ä¸²è½¬æ•´æ•° (String to Integer - atoi)</h3><p>å®ç° <code>atoi</code> å‡½æ•°ï¼Œéœ€è¦è€ƒè™‘å„ç§è¾¹ç•Œæƒ…å†µã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StringProblems</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®ç° atoi å‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> s å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è½¬æ¢åçš„æ•´æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">myAtoi</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="literal">null</span> || s.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        s = s.trim(); <span class="comment">// 1. å»æ‰å‰å¯¼ç©ºæ ¼</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (s.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sign</span> <span class="operator">=</span> <span class="number">1</span>; <span class="comment">// 2. å¤„ç†æ­£è´Ÿå·</span></span><br><span class="line">        <span class="keyword">if</span> (s.charAt(index) == <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">            sign = -<span class="number">1</span>;</span><br><span class="line">            index++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.charAt(index) == <span class="string">&#x27;+&#x27;</span>) &#123;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (index &lt; s.length()) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> s.charAt(index);</span><br><span class="line">            <span class="comment">// 3. æ£€æŸ¥æ˜¯å¦ä¸ºæ•°å­—</span></span><br><span class="line">            <span class="keyword">if</span> (!Character.isDigit(c)) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">digit</span> <span class="operator">=</span> c - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            result = result * <span class="number">10</span> + digit;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. å¤„ç†æº¢å‡º</span></span><br><span class="line">            <span class="keyword">if</span> (sign == <span class="number">1</span> &amp;&amp; result &gt; Integer.MAX_VALUE) &#123;</span><br><span class="line">                <span class="keyword">return</span> Integer.MAX_VALUE;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (sign == -<span class="number">1</span> &amp;&amp; -result &lt; Integer.MIN_VALUE) &#123;</span><br><span class="line">                <span class="keyword">return</span> Integer.MIN_VALUE;</span><br><span class="line">            &#125;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) (result * sign);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="åˆ¤æ–­å­ä¸²-Substring-Check"><a href="#åˆ¤æ–­å­ä¸²-Substring-Check" class="headerlink" title="åˆ¤æ–­å­ä¸² (Substring Check)"></a>åˆ¤æ–­å­ä¸² (Substring Check)</h3><p>ä½¿ç”¨ <code>String.indexOf()</code> æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ã€‚å¦‚æœä¸èƒ½ä½¿ç”¨å†…ç½®æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡åŒæŒ‡é’ˆæˆ– KMP ç®—æ³•å®ç°ã€‚è¿™é‡Œæä¾›åŒæŒ‡é’ˆçš„å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StringProblems</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å¦ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­ä¸²ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> mainStr ä¸»å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> subStr  å­å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¦‚æœ subStr æ˜¯ mainStr çš„å­ä¸²ï¼Œè¿”å› trueï¼›å¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isSubstring</span><span class="params">(String mainStr, String subStr)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (mainStr == <span class="literal">null</span> || subStr == <span class="literal">null</span> || mainStr.length() &lt; subStr.length()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (subStr.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= mainStr.length() - subStr.length(); i++) &#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">match</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; subStr.length(); j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (mainStr.charAt(i + j) != subStr.charAt(j)) &#123;</span><br><span class="line">                    match = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (match) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="æ•°ç»„æ—‹è½¬-Array-Rotation"><a href="#æ•°ç»„æ—‹è½¬-Array-Rotation" class="headerlink" title="æ•°ç»„æ—‹è½¬ (Array Rotation)"></a>æ•°ç»„æ—‹è½¬ (Array Rotation)</h3><p>å‘å³æ—‹è½¬ <code>k</code> æ­¥ï¼Œå¯ä»¥é€šè¿‡ä¸‰æ¬¡åè½¬æˆ–ä½¿ç”¨é¢å¤–æ•°ç»„å®ç°ã€‚è¿™é‡Œä½¿ç”¨ç©ºé—´å¤æ‚åº¦ä¸º <code>O(1)</code> çš„ä¸‰æ¬¡åè½¬æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayProblems</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†ä¸€ä¸ªæ•´æ•°æ•°ç»„å‘å³æ—‹è½¬ k æ­¥ã€‚</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ä¸‰æ¬¡åè½¬çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nums æ•´æ•°æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> k    æ—‹è½¬æ­¥æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">rotate</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="literal">null</span> || nums.length &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        k %= nums.length; <span class="comment">// å¤„ç† k å¤§äºæ•°ç»„é•¿åº¦çš„æƒ…å†µ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. åè½¬æ•´ä¸ªæ•°ç»„</span></span><br><span class="line">        reverse(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 2. åè½¬å‰ k ä¸ªå…ƒç´ </span></span><br><span class="line">        reverse(nums, <span class="number">0</span>, k - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 3. åè½¬å‰©ä¸‹çš„å…ƒç´ </span></span><br><span class="line">        reverse(nums, k, nums.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reverse</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (start &lt; end) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> nums[start];</span><br><span class="line">            nums[start] = nums[end];</span><br><span class="line">            nums[end] = temp;</span><br><span class="line">            start++;</span><br><span class="line">            end--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="äº¤é”™å­—ç¬¦ä¸²-Interleaving-String"><a href="#äº¤é”™å­—ç¬¦ä¸²-Interleaving-String" class="headerlink" title="äº¤é”™å­—ç¬¦ä¸² (Interleaving String)"></a>äº¤é”™å­—ç¬¦ä¸² (Interleaving String)</h3><p>åˆ¤æ–­ <code>s3</code> æ˜¯å¦ç”± <code>s1</code> å’Œ <code>s2</code> äº¤é”™è€Œæˆï¼Œå¯ä»¥ä½¿ç”¨<strong>åŠ¨æ€è§„åˆ’</strong>è§£å†³ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StringProblems</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²äº¤é”™å½¢æˆçš„å­—ç¬¦ä¸²æ˜¯å¦ç­‰äºç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> s1 å­—ç¬¦ä¸²1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> s2 å­—ç¬¦ä¸²2</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> s3 å­—ç¬¦ä¸²3</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¦‚æœæ˜¯äº¤é”™å­—ç¬¦ä¸²ï¼Œè¿”å› trueï¼›å¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isInterleave</span><span class="params">(String s1, String s2, String s3)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (s1.length() + s2.length() != s3.length()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// dp[i][j] è¡¨ç¤º s1 çš„å‰ i ä¸ªå­—ç¬¦å’Œ s2 çš„å‰ j ä¸ªå­—ç¬¦èƒ½å¦äº¤é”™ç»„æˆ s3 çš„å‰ i+j ä¸ªå­—ç¬¦</span></span><br><span class="line">        <span class="type">boolean</span>[][] dp = <span class="keyword">new</span> <span class="title class_">boolean</span>[s1.length() + <span class="number">1</span>][s2.length() + <span class="number">1</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–ç¬¬ä¸€è¡Œ (s1 ä¸å–å­—ç¬¦)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= s2.length(); j++) &#123;</span><br><span class="line">            dp[<span class="number">0</span>][j] = dp[<span class="number">0</span>][j - <span class="number">1</span>] &amp;&amp; s2.charAt(j - <span class="number">1</span>) == s3.charAt(j - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–ç¬¬ä¸€åˆ— (s2 ä¸å–å­—ç¬¦)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= s1.length(); i++) &#123;</span><br><span class="line">            dp[i][<span class="number">0</span>] = dp[i - <span class="number">1</span>][<span class="number">0</span>] &amp;&amp; s1.charAt(i - <span class="number">1</span>) == s3.charAt(i - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¡«å…… DP è¡¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= s1.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= s2.length(); j++) &#123;</span><br><span class="line">                dp[i][j] = (dp[i - <span class="number">1</span>][j] &amp;&amp; s1.charAt(i - <span class="number">1</span>) == s3.charAt(i + j - <span class="number">1</span>)) ||</span><br><span class="line">                           (dp[i][j - <span class="number">1</span>] &amp;&amp; s2.charAt(j - <span class="number">1</span>) == s3.charAt(i + j - <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[s1.length()][s2.length()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="æœ€é•¿å…¬å…±å‰ç¼€-Longest-Common-Prefix"><a href="#æœ€é•¿å…¬å…±å‰ç¼€-Longest-Common-Prefix" class="headerlink" title="æœ€é•¿å…¬å…±å‰ç¼€ (Longest Common Prefix)"></a>æœ€é•¿å…¬å…±å‰ç¼€ (Longest Common Prefix)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StringProblems</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¾å‡ºå­—ç¬¦ä¸²æ•°ç»„ä¸­çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> strs å­—ç¬¦ä¸²æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æœ€é•¿å…¬å…±å‰ç¼€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">longestCommonPrefix</span><span class="params">(String[] strs)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (strs == <span class="literal">null</span> || strs.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">prefix</span> <span class="operator">=</span> strs[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; strs.length; i++) &#123;</span><br><span class="line">            <span class="comment">// å¾ªç¯æ¯”è¾ƒï¼Œç›´åˆ°æ‰¾åˆ°å­ä¸²</span></span><br><span class="line">            <span class="keyword">while</span> (strs[i].indexOf(prefix) != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// æ¯æ¬¡ç¼©çŸ­ prefix</span></span><br><span class="line">                prefix = prefix.substring(<span class="number">0</span>, prefix.length() - <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span> (prefix.isEmpty()) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> prefix;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å­—ç¬¦ä¸²å‹ç¼©-String-Compression"><a href="#å­—ç¬¦ä¸²å‹ç¼©-String-Compression" class="headerlink" title="å­—ç¬¦ä¸²å‹ç¼© (String Compression)"></a>å­—ç¬¦ä¸²å‹ç¼© (String Compression)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StringProblems</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®ç°åŸºæœ¬çš„å­—ç¬¦ä¸²å‹ç¼©ï¼Œä¾‹å¦‚ aabcccccaaa å‹ç¼©ä¸º a2b1c5a3ã€‚</span></span><br><span class="line"><span class="comment">     * å¦‚æœå‹ç¼©åçš„å­—ç¬¦ä¸²æ²¡æœ‰å˜çŸ­ï¼Œåˆ™è¿”å›åŸå­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str å¾…å‹ç¼©çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å‹ç¼©åçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">compressString</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (str == <span class="literal">null</span> || str.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">compressed</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= str.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; str.length() &amp;&amp; str.charAt(i) == str.charAt(i - <span class="number">1</span>)) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                compressed.append(str.charAt(i - <span class="number">1</span>)).append(count);</span><br><span class="line">                count = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (compressed.length() &gt;= str.length()) &#123;</span><br><span class="line">            <span class="keyword">return</span> str; <span class="comment">// å¦‚æœå‹ç¼©åæ²¡æœ‰å˜çŸ­ï¼Œè¿”å›åŸå­—ç¬¦ä¸²</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> compressed.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å¯»æ‰¾é‡å¤æ•°-Find-the-Duplicate-Number"><a href="#å¯»æ‰¾é‡å¤æ•°-Find-the-Duplicate-Number" class="headerlink" title="å¯»æ‰¾é‡å¤æ•° (Find the Duplicate Number)"></a>å¯»æ‰¾é‡å¤æ•° (Find the Duplicate Number)</h3><p>ç»™å®šä¸€ä¸ªåŒ…å« <code>n+1</code> ä¸ªæ•´æ•°çš„æ•°ç»„ï¼Œæ•°å­—éƒ½åœ¨ <code>1</code> åˆ° <code>n</code> çš„èŒƒå›´å†…ã€‚æ‰¾å‡ºè¿™ä¸ªé‡å¤çš„æ•°å­—ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayProblems</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨**å¿«æ…¢æŒ‡é’ˆ**ï¼ˆç±»ä¼¼äºæ£€æµ‹é“¾è¡¨ç¯ï¼‰æ¥å¯»æ‰¾é‡å¤æ•°ã€‚</span></span><br><span class="line"><span class="comment">     * å‡è®¾æ•°ç»„æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œç´¢å¼• `i` æŒ‡å‘ `nums[i]`</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nums åŒ…å« n+1 ä¸ªæ•´æ•°çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> é‡å¤çš„æ•°å­—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">findDuplicate</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. å¯»æ‰¾ç¯çš„å…¥å£</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">slow</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">fast</span> <span class="operator">=</span> nums[nums[<span class="number">0</span>]];</span><br><span class="line">        <span class="keyword">while</span> (slow != fast) &#123;</span><br><span class="line">            slow = nums[slow];</span><br><span class="line">            fast = nums[nums[fast]];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. æ‰¾åˆ°ç¯åï¼Œä»å¤´å¼€å§‹ï¼Œå¿«æ…¢æŒ‡é’ˆä»¥ç›¸åŒé€Ÿåº¦å‰è¿›ï¼Œç›¸é‡ç‚¹å³ä¸ºç¯çš„å…¥å£ï¼ˆé‡å¤æ•°ï¼‰</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">p1</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">p2</span> <span class="operator">=</span> slow;</span><br><span class="line">        <span class="keyword">while</span> (p1 != p2) &#123;</span><br><span class="line">            p1 = nums[p1];</span><br><span class="line">            p2 = nums[p2];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="é“¾è¡¨ã€æ ˆä¸é˜Ÿåˆ—"><a href="#é“¾è¡¨ã€æ ˆä¸é˜Ÿåˆ—" class="headerlink" title="é“¾è¡¨ã€æ ˆä¸é˜Ÿåˆ—"></a>é“¾è¡¨ã€æ ˆä¸é˜Ÿåˆ—</h3><h4 id="åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨"><a href="#åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨" class="headerlink" title="åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨"></a>åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</h4><p>ä½¿ç”¨<strong>åŒæŒ‡é’ˆ</strong>æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„é“¾è¡¨ï¼Œéå†ä¸¤ä¸ªè¾“å…¥é“¾è¡¨ï¼Œæ¯”è¾ƒèŠ‚ç‚¹å€¼å¹¶ä¾æ¬¡æ·»åŠ åˆ°æ–°é“¾è¡¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    ListNode next;</span><br><span class="line">    ListNode(<span class="type">int</span> x) &#123; val = x; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title function_">mergeTwoLists</span><span class="params">(ListNode l1, ListNode l2)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªå“‘èŠ‚ç‚¹ï¼Œç®€åŒ–æ“ä½œ</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">dummy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">current</span> <span class="operator">=</span> dummy;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="literal">null</span> &amp;&amp; l2 != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (l1.val &lt;= l2.val) &#123;</span><br><span class="line">                current.next = l1;</span><br><span class="line">                l1 = l1.next;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                current.next = l2;</span><br><span class="line">                l2 = l2.next;</span><br><span class="line">            &#125;</span><br><span class="line">            current = current.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†å‰©ä½™çš„èŠ‚ç‚¹æ·»åŠ åˆ°æ–°é“¾è¡¨æœ«å°¾</span></span><br><span class="line">        <span class="keyword">if</span> (l1 != <span class="literal">null</span>) &#123;</span><br><span class="line">            current.next = l1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (l2 != <span class="literal">null</span>) &#123;</span><br><span class="line">            current.next = l2;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é“¾è¡¨å€’æ•°ç¬¬-k-ä¸ªèŠ‚ç‚¹"><a href="#é“¾è¡¨å€’æ•°ç¬¬-k-ä¸ªèŠ‚ç‚¹" class="headerlink" title="é“¾è¡¨å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹"></a>é“¾è¡¨å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹</h4><p>ä½¿ç”¨<strong>å¿«æ…¢æŒ‡é’ˆ</strong>ï¼Œåªéå†ä¸€æ¬¡ã€‚å¿«æŒ‡é’ˆå…ˆèµ° <code>k</code> æ­¥ï¼Œç„¶åå¿«æ…¢æŒ‡é’ˆåŒæ—¶å‰è¿›ï¼Œå½“å¿«æŒ‡é’ˆåˆ°è¾¾æœ«å°¾æ—¶ï¼Œæ…¢æŒ‡é’ˆæ­£å¥½åœ¨å€’æ•°ç¬¬ <code>k</code> ä¸ªä½ç½®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title function_">findKthFromEnd</span><span class="params">(ListNode head, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="literal">null</span> || k &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">fast</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¿«æŒ‡é’ˆå…ˆèµ° k æ­¥</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (fast == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">// é“¾è¡¨é•¿åº¦å°äº k</span></span><br><span class="line">            &#125;</span><br><span class="line">            fast = fast.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¿«æ…¢æŒ‡é’ˆåŒæ—¶å‰è¿›ï¼Œç›´åˆ°å¿«æŒ‡é’ˆåˆ°è¾¾æœ«å°¾</span></span><br><span class="line">        <span class="keyword">while</span> (fast != <span class="literal">null</span>) &#123;</span><br><span class="line">            fast = fast.next;</span><br><span class="line">            slow = slow.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> slow;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤é‡å¤èŠ‚ç‚¹"><a href="#åˆ é™¤é‡å¤èŠ‚ç‚¹" class="headerlink" title="åˆ é™¤é‡å¤èŠ‚ç‚¹"></a>åˆ é™¤é‡å¤èŠ‚ç‚¹</h4><p>ç»™å®šä¸€ä¸ªå·²æ’åºçš„é“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„èŠ‚ç‚¹ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title function_">deleteDuplicates</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">current</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">while</span> (current != <span class="literal">null</span> &amp;&amp; current.next != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (current.val == current.next.val) &#123;</span><br><span class="line">                current.next = current.next.next; <span class="comment">// åˆ é™¤ä¸‹ä¸€ä¸ªé‡å¤èŠ‚ç‚¹</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                current = current.next; <span class="comment">// å‰è¿›åˆ°ä¸‹ä¸€ä¸ªä¸é‡å¤çš„èŠ‚ç‚¹</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯"><a href="#åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯" class="headerlink" title="åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯"></a>åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯</h4><p>ä½¿ç”¨<strong>å¿«æ…¢æŒ‡é’ˆ</strong>ã€‚å¦‚æœé“¾è¡¨æœ‰ç¯ï¼Œå¿«æŒ‡é’ˆæœ€ç»ˆä¼šè¿½ä¸Šæ…¢æŒ‡é’ˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">hasCycle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">fast</span> <span class="operator">=</span> head.next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (slow != fast) &#123;</span><br><span class="line">            <span class="keyword">if</span> (fast == <span class="literal">null</span> || fast.next == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// å·²ç»åˆ°è¾¾æœ«å°¾ï¼Œæ²¡æœ‰ç¯</span></span><br><span class="line">            &#125;</span><br><span class="line">            slow = slow.next;</span><br><span class="line">            fast = fast.next.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é“¾è¡¨æ±‚å’Œ"><a href="#é“¾è¡¨æ±‚å’Œ" class="headerlink" title="é“¾è¡¨æ±‚å’Œ"></a>é“¾è¡¨æ±‚å’Œ</h4><p>ä¸¤ä¸ªéè´Ÿæ•´æ•°ç”±é“¾è¡¨è¡¨ç¤ºï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªæ•°å­—ã€‚è®¡ç®—å®ƒä»¬çš„å’Œã€‚è¿™é‡Œå‡è®¾é“¾è¡¨æŒ‰<strong>é€†åº</strong>å­˜å‚¨æ•°å­—ï¼ˆä¸ªä½åœ¨å‰ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title function_">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">dummy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">current</span> <span class="operator">=</span> dummy;</span><br><span class="line">        <span class="type">int</span> <span class="variable">carry</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// è¿›ä½</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="literal">null</span> || l2 != <span class="literal">null</span> || carry &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> carry;</span><br><span class="line">            <span class="keyword">if</span> (l1 != <span class="literal">null</span>) &#123;</span><br><span class="line">                sum += l1.val;</span><br><span class="line">                l1 = l1.next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (l2 != <span class="literal">null</span>) &#123;</span><br><span class="line">                sum += l2.val;</span><br><span class="line">                l2 = l2.next;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            carry = sum / <span class="number">10</span>;</span><br><span class="line">            current.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(sum % <span class="number">10</span>);</span><br><span class="line">            current = current.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ ˆå®ç°é˜Ÿåˆ—"><a href="#æ ˆå®ç°é˜Ÿåˆ—" class="headerlink" title="æ ˆå®ç°é˜Ÿåˆ—"></a>æ ˆå®ç°é˜Ÿåˆ—</h4><p>ä½¿ç”¨ä¸¤ä¸ªæ ˆï¼Œä¸€ä¸ªç”¨äºå…¥é˜Ÿ (<code>inStack</code>)ï¼Œä¸€ä¸ªç”¨äºå‡ºé˜Ÿ (<code>outStack</code>)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyQueue</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Stack&lt;Integer&gt; inStack;</span><br><span class="line">    <span class="keyword">private</span> Stack&lt;Integer&gt; outStack;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        inStack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        outStack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        inStack.push(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (outStack.isEmpty()) &#123;</span><br><span class="line">            transfer();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> outStack.pop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (outStack.isEmpty()) &#123;</span><br><span class="line">            transfer();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> outStack.peek();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (!inStack.isEmpty()) &#123;</span><br><span class="line">            outStack.push(inStack.pop());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> inStack.isEmpty() &amp;&amp; outStack.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é˜Ÿåˆ—å®ç°æ ˆ"><a href="#é˜Ÿåˆ—å®ç°æ ˆ" class="headerlink" title="é˜Ÿåˆ—å®ç°æ ˆ"></a>é˜Ÿåˆ—å®ç°æ ˆ</h4><p>ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªç”¨äºå…¥æ ˆ (<code>q1</code>)ï¼Œä¸€ä¸ªç”¨äºè¾…åŠ© (<code>q2</code>)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyStack</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Queue&lt;Integer&gt; q1;</span><br><span class="line">    <span class="keyword">private</span> Queue&lt;Integer&gt; q2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyStack</span><span class="params">()</span> &#123;</span><br><span class="line">        q1 = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        q2 = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        q1.offer(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (q1.size() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            q2.offer(q1.poll());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> q1.poll();</span><br><span class="line">        Queue&lt;Integer&gt; temp = q1;</span><br><span class="line">        q1 = q2;</span><br><span class="line">        q2 = temp;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">top</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> pop();</span><br><span class="line">        q1.offer(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> q1.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æœ‰æ•ˆæ‹¬å·"><a href="#æœ‰æ•ˆæ‹¬å·" class="headerlink" title="æœ‰æ•ˆæ‹¬å·"></a>æœ‰æ•ˆæ‹¬å·</h4><p>ä½¿ç”¨ä¸€ä¸ª<strong>æ ˆ</strong>æ¥æ£€æŸ¥æ‹¬å·æ˜¯å¦åŒ¹é…ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StackProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        Stack&lt;Character&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : s.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">&#x27;(&#x27;</span> || c == <span class="string">&#x27;[&#x27;</span> || c == <span class="string">&#x27;&#123;&#x27;</span>) &#123;</span><br><span class="line">                stack.push(c);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (stack.isEmpty()) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">char</span> <span class="variable">top</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                <span class="keyword">if</span> ((c == <span class="string">&#x27;)&#x27;</span> &amp;&amp; top != <span class="string">&#x27;(&#x27;</span>) ||</span><br><span class="line">                    (c == <span class="string">&#x27;]&#x27;</span> &amp;&amp; top != <span class="string">&#x27;[&#x27;</span>) ||</span><br><span class="line">                    (c == <span class="string">&#x27;&#125;&#x27;</span> &amp;&amp; top != <span class="string">&#x27;&#123;&#x27;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="æ ‘ä¸é€’å½’"><a href="#æ ‘ä¸é€’å½’" class="headerlink" title="æ ‘ä¸é€’å½’"></a>æ ‘ä¸é€’å½’</h3><p>å®šä¹‰ä¸€ä¸ªç®€å•çš„äºŒå‰æ ‘èŠ‚ç‚¹ç±»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class TreeNode &#123;</span><br><span class="line">    int val;</span><br><span class="line">    TreeNode left;</span><br><span class="line">    TreeNode right;</span><br><span class="line">    TreeNode(int x) &#123; val = x; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒå‰æ ‘å‰åºéå†-Preorder-Traversal"><a href="#äºŒå‰æ ‘å‰åºéå†-Preorder-Traversal" class="headerlink" title="äºŒå‰æ ‘å‰åºéå† (Preorder Traversal)"></a>äºŒå‰æ ‘å‰åºéå† (Preorder Traversal)</h4><p><strong>é€’å½’æ–¹å¼</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeTraversal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">preorderTraversalRecursive</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        preorder(root, result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">preorder</span><span class="params">(TreeNode node, List&lt;Integer&gt; list)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        list.add(node.val);</span><br><span class="line">        preorder(node.left, list);</span><br><span class="line">        preorder(node.right, list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>éé€’å½’æ–¹å¼</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeTraversal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">preorderTraversalIterative</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        stack.push(root);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            result.add(node.val);</span><br><span class="line">            <span class="comment">// å…ˆå‹å…¥å³å­èŠ‚ç‚¹ï¼Œå†å‹å…¥å·¦å­èŠ‚ç‚¹ï¼Œä¿è¯å¼¹å‡ºæ—¶å…ˆå¤„ç†å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                stack.push(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                stack.push(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒå‰æ ‘ä¸­åºéå†-Inorder-Traversal"><a href="#äºŒå‰æ ‘ä¸­åºéå†-Inorder-Traversal" class="headerlink" title="äºŒå‰æ ‘ä¸­åºéå† (Inorder Traversal)"></a>äºŒå‰æ ‘ä¸­åºéå† (Inorder Traversal)</h4><p><strong>é€’å½’æ–¹å¼</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeTraversal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">inorderTraversalRecursive</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        inorder(root, result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">inorder</span><span class="params">(TreeNode node, List&lt;Integer&gt; list)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        inorder(node.left, list);</span><br><span class="line">        list.add(node.val);</span><br><span class="line">        inorder(node.right, list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>éé€’å½’æ–¹å¼</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeTraversal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">inorderTraversalIterative</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">current</span> <span class="operator">=</span> root;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (current != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">            <span class="comment">// å°†æ‰€æœ‰å·¦å­èŠ‚ç‚¹å‹å…¥æ ˆ</span></span><br><span class="line">            <span class="keyword">while</span> (current != <span class="literal">null</span>) &#123;</span><br><span class="line">                stack.push(current);</span><br><span class="line">                current = current.left;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¼¹å‡ºæ ˆé¡¶èŠ‚ç‚¹ï¼Œå¹¶å¤„ç†å…¶å³å­æ ‘</span></span><br><span class="line">            current = stack.pop();</span><br><span class="line">            result.add(current.val);</span><br><span class="line">            current = current.right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒå‰æ ‘ååºéå†-Postorder-Traversal"><a href="#äºŒå‰æ ‘ååºéå†-Postorder-Traversal" class="headerlink" title="äºŒå‰æ ‘ååºéå† (Postorder Traversal)"></a>äºŒå‰æ ‘ååºéå† (Postorder Traversal)</h4><p><strong>é€’å½’æ–¹å¼</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeTraversal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">postorderTraversalRecursive</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        postorder(root, result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">postorder</span><span class="params">(TreeNode node, List&lt;Integer&gt; list)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        postorder(node.left, list);</span><br><span class="line">        postorder(node.right, list);</span><br><span class="line">        list.add(node.val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>éé€’å½’æ–¹å¼</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeTraversal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">postorderTraversalIterative</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        stack.push(root);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            result.add(node.val); <span class="comment">// å€’åºæ’å…¥</span></span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                stack.push(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                stack.push(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Collections.reverse(result); <span class="comment">// å°†ç»“æœåè½¬</span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒå‰æ ‘å±‚åºéå†-Level-Order-Traversal"><a href="#äºŒå‰æ ‘å±‚åºéå†-Level-Order-Traversal" class="headerlink" title="äºŒå‰æ ‘å±‚åºéå† (Level Order Traversal)"></a>äºŒå‰æ ‘å±‚åºéå† (Level Order Traversal)</h4><p>ä½¿ç”¨<strong>é˜Ÿåˆ—</strong>å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeTraversal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">levelOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        queue.offer(root);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">levelSize</span> <span class="operator">=</span> queue.size();</span><br><span class="line">            List&lt;Integer&gt; currentLevel = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; levelSize; i++) &#123;</span><br><span class="line">                <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">                currentLevel.add(node.val);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                    queue.offer(node.left);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                    queue.offer(node.right);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            result.add(currentLevel);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯¹ç§°äºŒå‰æ ‘-Symmetric-Tree"><a href="#å¯¹ç§°äºŒå‰æ ‘-Symmetric-Tree" class="headerlink" title="å¯¹ç§°äºŒå‰æ ‘ (Symmetric Tree)"></a>å¯¹ç§°äºŒå‰æ ‘ (Symmetric Tree)</h4><p>ä½¿ç”¨<strong>é€’å½’</strong>ï¼Œæ£€æŸ¥æ ¹èŠ‚ç‚¹çš„å·¦å³å­æ ‘æ˜¯å¦æ˜¯é•œåƒå¯¹ç§°çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isSymmetric</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> isMirror(root.left, root.right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isMirror</span><span class="params">(TreeNode t1, TreeNode t2)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t1 == <span class="literal">null</span> &amp;&amp; t2 == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (t1 == <span class="literal">null</span> || t2 == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (t1.val == t2.val) &amp;&amp; isMirror(t1.right, t2.left) &amp;&amp; isMirror(t1.left, t2.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æœ€å¤§æ·±åº¦-Maximum-Depth-of-Binary-Tree"><a href="#æœ€å¤§æ·±åº¦-Maximum-Depth-of-Binary-Tree" class="headerlink" title="æœ€å¤§æ·±åº¦ (Maximum Depth of Binary Tree)"></a>æœ€å¤§æ·±åº¦ (Maximum Depth of Binary Tree)</h4><p>ä½¿ç”¨<strong>é€’å½’</strong>ï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftDepth</span> <span class="operator">=</span> maxDepth(root.left);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rightDepth</span> <span class="operator">=</span> maxDepth(root.right);</span><br><span class="line">        <span class="keyword">return</span> Math.max(leftDepth, rightDepth) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯äºŒå‰æœç´¢æ ‘-Validate-Binary-Search-Tree"><a href="#éªŒè¯äºŒå‰æœç´¢æ ‘-Validate-Binary-Search-Tree" class="headerlink" title="éªŒè¯äºŒå‰æœç´¢æ ‘ (Validate Binary Search Tree)"></a>éªŒè¯äºŒå‰æœç´¢æ ‘ (Validate Binary Search Tree)</h4><p>ä½¿ç”¨<strong>é€’å½’</strong>æˆ–<strong>ä¸­åºéå†</strong>ã€‚äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ç»“æœæ˜¯å‡åºçš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isValidBST(root, Long.MIN_VALUE, Long.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode node, <span class="type">long</span> min, <span class="type">long</span> max)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ£€æŸ¥å½“å‰èŠ‚ç‚¹çš„å€¼æ˜¯å¦åœ¨æœ‰æ•ˆèŒƒå›´å†…</span></span><br><span class="line">        <span class="keyword">if</span> (node.val &lt;= min || node.val &gt;= max) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é€’å½’æ£€æŸ¥å·¦å³å­æ ‘ï¼Œå¹¶ç¼©å°æœ‰æ•ˆèŒƒå›´</span></span><br><span class="line">        <span class="keyword">return</span> isValidBST(node.left, min, node.val) &amp;&amp; isValidBST(node.right, node.val, max);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><h4 id="æœ€å¤§å­æ•°ç»„å’Œ-Maximum-Subarray-Sum"><a href="#æœ€å¤§å­æ•°ç»„å’Œ-Maximum-Subarray-Sum" class="headerlink" title="æœ€å¤§å­æ•°ç»„å’Œ (Maximum Subarray Sum)"></a>æœ€å¤§å­æ•°ç»„å’Œ (Maximum Subarray Sum)</h4><p>ä½¿ç”¨<strong>åŠ¨æ€è§„åˆ’</strong> (Kadaneâ€™s algorithm)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">maxSubArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="literal">null</span> || nums.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">maxSoFar</span> <span class="operator">=</span> nums[<span class="number">0</span>]; <span class="comment">// è¿„ä»Šä¸ºæ­¢çš„æœ€å¤§å’Œ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">maxEndingHere</span> <span class="operator">=</span> nums[<span class="number">0</span>]; <span class="comment">// ä»¥å½“å‰ä½ç½®ç»“å°¾çš„æœ€å¤§å’Œ</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="comment">// maxEndingHere çš„å€¼æ˜¯ï¼š(å½“å‰å…ƒç´ ) æˆ– (å½“å‰å…ƒç´  + ä¹‹å‰çš„æœ€å¤§å’Œ)</span></span><br><span class="line">            maxEndingHere = Math.max(nums[i], maxEndingHere + nums[i]);</span><br><span class="line">            maxSoFar = Math.max(maxSoFar, maxEndingHere);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxSoFar;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸¤æ•°ç›¸åŠ -Large-Number-Addition"><a href="#ä¸¤æ•°ç›¸åŠ -Large-Number-Addition" class="headerlink" title="ä¸¤æ•°ç›¸åŠ  (Large Number Addition)"></a>ä¸¤æ•°ç›¸åŠ  (Large Number Addition)</h4><p>å°†ä¸¤ä¸ªè¶…é•¿æ­£æ•´æ•°å­—ç¬¦ä¸²ç›¸åŠ ï¼Œæ¨¡æ‹Ÿå°å­¦åŠ æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">addStrings</span><span class="params">(String num1, String num2)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> num1.length() - <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> num2.length() - <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">carry</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (i &gt;= <span class="number">0</span> || j &gt;= <span class="number">0</span> || carry &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">digit1</span> <span class="operator">=</span> (i &gt;= <span class="number">0</span>) ? num1.charAt(i--) - <span class="string">&#x27;0&#x27;</span> : <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">digit2</span> <span class="operator">=</span> (j &gt;= <span class="number">0</span>) ? num2.charAt(j--) - <span class="string">&#x27;0&#x27;</span> : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> digit1 + digit2 + carry;</span><br><span class="line">            sb.append(sum % <span class="number">10</span>);</span><br><span class="line">            carry = sum / <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.reverse().toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½è¿ç®—å®ç°åŠ æ³•-Addition-with-Bitwise-Operators"><a href="#ä½è¿ç®—å®ç°åŠ æ³•-Addition-with-Bitwise-Operators" class="headerlink" title="ä½è¿ç®—å®ç°åŠ æ³• (Addition with Bitwise Operators)"></a>ä½è¿ç®—å®ç°åŠ æ³• (Addition with Bitwise Operators)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MathProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="type">int</span> sum;</span><br><span class="line">        <span class="type">int</span> carry;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (b != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// è®¡ç®—æ— è¿›ä½çš„å’Œï¼ˆå¼‚æˆ–ï¼‰</span></span><br><span class="line">            sum = a ^ b;</span><br><span class="line">            <span class="comment">// è®¡ç®—è¿›ä½ï¼ˆä¸&amp;å·¦ç§»ï¼‰</span></span><br><span class="line">            carry = (a &amp; b) &lt;&lt; <span class="number">1</span>;</span><br><span class="line">            a = sum;</span><br><span class="line">            b = carry;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…¨æ’åˆ—-Permutations"><a href="#å…¨æ’åˆ—-Permutations" class="headerlink" title="å…¨æ’åˆ— (Permutations)"></a>å…¨æ’åˆ— (Permutations)</h4><p>ä½¿ç”¨<strong>å›æº¯ç®—æ³•</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BacktrackingProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">permute</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        backtrackPermute(result, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(), nums, <span class="keyword">new</span> <span class="title class_">boolean</span>[nums.length]);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">backtrackPermute</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; result, List&lt;Integer&gt; tempList, <span class="type">int</span>[] nums, <span class="type">boolean</span>[] used)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (tempList.size() == nums.length) &#123;</span><br><span class="line">            result.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(tempList));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (used[i]) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            used[i] = <span class="literal">true</span>;</span><br><span class="line">            tempList.add(nums[i]);</span><br><span class="line">            backtrackPermute(result, tempList, nums, used);</span><br><span class="line">            tempList.remove(tempList.size() - <span class="number">1</span>);</span><br><span class="line">            used[i] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å­é›†-Subsets"><a href="#å­é›†-Subsets" class="headerlink" title="å­é›† (Subsets)"></a>å­é›† (Subsets)</h4><p>ä½¿ç”¨<strong>å›æº¯ç®—æ³•</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BacktrackingProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">subsets</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        backtrackSubsets(result, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(), nums, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">backtrackSubsets</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; result, List&lt;Integer&gt; tempList, <span class="type">int</span>[] nums, <span class="type">int</span> start)</span> &#123;</span><br><span class="line">        result.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(tempList));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt; nums.length; i++) &#123;</span><br><span class="line">            tempList.add(nums[i]);</span><br><span class="line">            backtrackSubsets(result, tempList, nums, i + <span class="number">1</span>);</span><br><span class="line">            tempList.remove(tempList.size() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è·³å°é˜¶-Climbing-Stairs"><a href="#è·³å°é˜¶-Climbing-Stairs" class="headerlink" title="è·³å°é˜¶ (Climbing Stairs)"></a>è·³å°é˜¶ (Climbing Stairs)</h4><p>è¿™æ˜¯ç»å…¸çš„<strong>åŠ¨æ€è§„åˆ’</strong>é—®é¢˜ï¼Œä¸æ–æ³¢é‚£å¥‘æ•°åˆ—ç±»ä¼¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MathProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> n;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span>[] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        dp[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            dp[i] = dp[i - <span class="number">1</span>] + dp[i - <span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®ç°ä¸€ä¸ªç®€å•çš„-Trie-å‰ç¼€æ ‘"><a href="#å®ç°ä¸€ä¸ªç®€å•çš„-Trie-å‰ç¼€æ ‘" class="headerlink" title="å®ç°ä¸€ä¸ªç®€å•çš„ Trie (å‰ç¼€æ ‘)"></a>å®ç°ä¸€ä¸ªç®€å•çš„ Trie (å‰ç¼€æ ‘)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TrieNode</span> &#123;</span><br><span class="line">    Map&lt;Character, TrieNode&gt; children;</span><br><span class="line">    <span class="type">boolean</span> isEndOfWord;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TrieNode</span><span class="params">()</span> &#123;</span><br><span class="line">        children = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        isEndOfWord = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Trie</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> TrieNode root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Trie</span><span class="params">()</span> &#123;</span><br><span class="line">        root = <span class="keyword">new</span> <span class="title class_">TrieNode</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(String word)</span> &#123;</span><br><span class="line">        <span class="type">TrieNode</span> <span class="variable">current</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">            current = current.children.computeIfAbsent(c, k -&gt; <span class="keyword">new</span> <span class="title class_">TrieNode</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        current.isEndOfWord = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">search</span><span class="params">(String word)</span> &#123;</span><br><span class="line">        <span class="type">TrieNode</span> <span class="variable">current</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!current.children.containsKey(c)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            current = current.children.get(c);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> current.isEndOfWord;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">startsWith</span><span class="params">(String prefix)</span> &#123;</span><br><span class="line">        <span class="type">TrieNode</span> <span class="variable">current</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : prefix.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!current.children.containsKey(c)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            current = current.children.get(c);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åè½¬é“¾è¡¨-II-Reverse-Linked-List-II"><a href="#åè½¬é“¾è¡¨-II-Reverse-Linked-List-II" class="headerlink" title="åè½¬é“¾è¡¨ II (Reverse Linked List II)"></a>åè½¬é“¾è¡¨ II (Reverse Linked List II)</h4><p>åè½¬é“¾è¡¨ä»ä½ç½® <code>m</code> åˆ° <code>n</code> çš„éƒ¨åˆ†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ListNode <span class="title function_">reverseBetween</span><span class="params">(ListNode head, <span class="type">int</span> m, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">dummy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        dummy.next = head;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">pre</span> <span class="operator">=</span> dummy;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            pre = pre.next; <span class="comment">// ç§»åŠ¨åˆ°åè½¬éƒ¨åˆ†çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">start</span> <span class="operator">=</span> pre.next; <span class="comment">// åè½¬éƒ¨åˆ†çš„èµ·å§‹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">then</span> <span class="operator">=</span> start.next; <span class="comment">// å¾…åè½¬çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n - m; i++) &#123;</span><br><span class="line">            start.next = then.next;</span><br><span class="line">            then.next = pre.next;</span><br><span class="line">            pre.next = then;</span><br><span class="line">            then = start.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="LRU-ç¼“å­˜-LRU-Cache"><a href="#LRU-ç¼“å­˜-LRU-Cache" class="headerlink" title="LRU ç¼“å­˜ (LRU Cache)"></a>LRU ç¼“å­˜ (LRU Cache)</h4><p>ä½¿ç”¨ <code>LinkedHashMap</code> å¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®ç° LRU ç¼“å­˜ï¼Œå› ä¸ºå®ƒæœ¬èº«å°±ç»´æŠ¤äº†æ’å…¥é¡ºåºæˆ–è®¿é—®é¡ºåºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span>&lt;K, V&gt; <span class="keyword">extends</span> <span class="title class_">LinkedHashMap</span>&lt;K, V&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> capacity;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(capacity, <span class="number">0.75f</span>, <span class="literal">true</span>); <span class="comment">// true è¡¨ç¤ºæŒ‰è®¿é—®é¡ºåºæ’åº</span></span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">removeEldestEntry</span><span class="params">(Map.Entry&lt;K, V&gt; eldest)</span> &#123;</span><br><span class="line">        <span class="comment">// å½“å®¹é‡è¶…è¿‡é™åˆ¶æ—¶ï¼Œè‡ªåŠ¨ç§»é™¤æœ€è€çš„ï¼ˆæœ€ä¹…æœªè®¿é—®çš„ï¼‰æ¡ç›®</span></span><br><span class="line">        <span class="keyword">return</span> size() &gt; capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getOrDefault(key, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.put(key, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ¤æ–­å›æ–‡é“¾è¡¨-Palindrome-Linked-List"><a href="#åˆ¤æ–­å›æ–‡é“¾è¡¨-Palindrome-Linked-List" class="headerlink" title="åˆ¤æ–­å›æ–‡é“¾è¡¨ (Palindrome Linked List)"></a>åˆ¤æ–­å›æ–‡é“¾è¡¨ (Palindrome Linked List)</h4><p>å¯ä»¥ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°ä¸­ç‚¹ï¼Œç„¶ååè½¬ååŠéƒ¨åˆ†ï¼Œæœ€åæ¯”è¾ƒä¸¤éƒ¨åˆ†æ˜¯å¦ç›¸ç­‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListProblems</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPalindrome</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. å¿«æ…¢æŒ‡é’ˆæ‰¾ä¸­ç‚¹</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">fast</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">while</span> (fast != <span class="literal">null</span> &amp;&amp; fast.next != <span class="literal">null</span>) &#123;</span><br><span class="line">            slow = slow.next;</span><br><span class="line">            fast = fast.next.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. åè½¬ååŠéƒ¨åˆ†</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">secondHalf</span> <span class="operator">=</span> reverseList(slow);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. æ¯”è¾ƒå‰åŠéƒ¨åˆ†å’Œåè½¬åçš„ååŠéƒ¨åˆ†</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">firstHalf</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">while</span> (secondHalf != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (firstHalf.val != secondHalf.val) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            firstHalf = firstHalf.next;</span><br><span class="line">            secondHalf = secondHalf.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">current</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">while</span> (current != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">ListNode</span> <span class="variable">nextTemp</span> <span class="operator">=</span> current.next;</span><br><span class="line">            current.next = prev;</span><br><span class="line">            prev = current;</span><br><span class="line">            current = nextTemp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ReadWriteLock-1"><a href="#ReadWriteLock-1" class="headerlink" title="ReadWriteLock"></a><code>ReadWriteLock</code></h3><p><code>ReadWriteLock</code> å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œè¯»æ“ä½œï¼Œä½†åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå†™æ“ä½œï¼Œä»è€Œæé«˜è¯»å¤šå†™å°‘çš„åœºæ™¯ä¸‹çš„å¹¶å‘æ€§èƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReadWriteLock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantReadWriteLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SharedResource</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReadWriteLock</span> <span class="variable">rwLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantReadWriteLock</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> <span class="string">&quot;åˆå§‹æ•°æ®&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯»æ“ä½œï¼šå…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">readData</span><span class="params">()</span> &#123;</span><br><span class="line">        rwLock.readLock().lock(); <span class="comment">// è·å–è¯»é”</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; æ­£åœ¨è¯»å–æ•°æ®...&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">100</span>); <span class="comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span></span><br><span class="line">            <span class="keyword">return</span> data;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            rwLock.readLock().unlock(); <span class="comment">// é‡Šæ”¾è¯»é”</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å†™æ“ä½œï¼šåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeData</span><span class="params">(String newData)</span> &#123;</span><br><span class="line">        rwLock.writeLock().lock(); <span class="comment">// è·å–å†™é”</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; æ­£åœ¨å†™å…¥æ•°æ®...&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>); <span class="comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span></span><br><span class="line">            <span class="built_in">this</span>.data = newData;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; å†™å…¥å®Œæˆã€‚&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            rwLock.writeLock().unlock(); <span class="comment">// é‡Šæ”¾å†™é”</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="CountDownLatch-1"><a href="#CountDownLatch-1" class="headerlink" title="CountDownLatch"></a><code>CountDownLatch</code></h3><p><code>CountDownLatch</code> å…è®¸ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹éƒ½å®Œæˆäº†æŸé¡¹å·¥ä½œã€‚å®ƒå°±åƒä¸€ä¸ªå€’è®¡æ—¶å™¨ï¼Œä¸€æ—¦è®¡æ•°ä¸ºé›¶ï¼Œç­‰å¾…çš„çº¿ç¨‹å°±ä¼šè¢«å”¤é†’ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CountDownLatchDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">workerCount</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨ï¼Œåˆå§‹å€¼ä¸º 5</span></span><br><span class="line">        <span class="type">CountDownLatch</span> <span class="variable">latch</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CountDownLatch</span>(workerCount);</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(workerCount);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹ï¼šå¯åŠ¨ &quot;</span> + workerCount + <span class="string">&quot; ä¸ªå·¥ä½œçº¿ç¨‹...&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; workerCount; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">workerId</span> <span class="operator">=</span> i;</span><br><span class="line">            executor.execute(() -&gt; &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å·¥ä½œçº¿ç¨‹ &quot;</span> + workerId + <span class="string">&quot; å¼€å§‹æ‰§è¡Œä»»åŠ¡...&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep((<span class="type">long</span>) (Math.random() * <span class="number">2000</span>)); <span class="comment">// æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œ</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;å·¥ä½œçº¿ç¨‹ &quot;</span> + workerId + <span class="string">&quot; ä»»åŠ¡å®Œæˆã€‚&quot;</span>);</span><br><span class="line">                    latch.countDown(); <span class="comment">// ä»»åŠ¡å®Œæˆåï¼Œè®¡æ•°å™¨å‡ 1</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹ï¼šç­‰å¾…æ‰€æœ‰å·¥ä½œçº¿ç¨‹å®Œæˆ...&quot;</span>);</span><br><span class="line">        latch.await(); <span class="comment">// é˜»å¡ä¸»çº¿ç¨‹ï¼Œç›´åˆ°è®¡æ•°å™¨ä¸º 0</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹ï¼šæ‰€æœ‰å·¥ä½œçº¿ç¨‹å·²å®Œæˆï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ­¥ã€‚&quot;</span>);</span><br><span class="line"></span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="CyclicBarrier-1"><a href="#CyclicBarrier-1" class="headerlink" title="CyclicBarrier"></a><code>CyclicBarrier</code></h3><p><code>CyclicBarrier</code> å…è®¸ä¸€ç»„çº¿ç¨‹åœ¨åˆ°è¾¾ä¸€ä¸ªå…±åŒçš„å±éšœç‚¹åï¼Œå†ä¸€èµ·ç»§ç»­æ‰§è¡Œã€‚å®ƒå°±åƒèµ›è·‘çš„èµ·è·‘çº¿ï¼Œæ‰€æœ‰é€‰æ‰‹éƒ½å‡†å¤‡å¥½åï¼Œå‘ä»¤æªæ‰å“ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.BrokenBarrierException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CyclicBarrier;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CyclicBarrierDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">runnerCount</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªå±éšœï¼Œå½“ 3 ä¸ªçº¿ç¨‹éƒ½åˆ°è¾¾æ—¶ï¼Œæ‰§è¡Œä¸€ä¸ªå±éšœåŠ¨ä½œ</span></span><br><span class="line">        <span class="type">CyclicBarrier</span> <span class="variable">barrier</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CyclicBarrier</span>(runnerCount, () -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;\næ‰€æœ‰èµ›è·‘è€…éƒ½å·²å°±ä½ï¼Œå‘ä»¤æªå“ï¼\n&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(runnerCount);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; runnerCount; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">runnerId</span> <span class="operator">=</span> i;</span><br><span class="line">            executor.execute(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;èµ›è·‘è€… &quot;</span> + runnerId + <span class="string">&quot; æ­£åœ¨èµ°å‘èµ·è·‘çº¿...&quot;</span>);</span><br><span class="line">                    Thread.sleep((<span class="type">long</span>) (Math.random() * <span class="number">3000</span>)); <span class="comment">// æ¨¡æ‹Ÿå‡†å¤‡æ—¶é—´</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;èµ›è·‘è€… &quot;</span> + runnerId + <span class="string">&quot; åˆ°è¾¾èµ·è·‘çº¿ï¼Œå‡†å¤‡å°±ç»ªã€‚&quot;</span>);</span><br><span class="line">                    barrier.await(); <span class="comment">// çº¿ç¨‹åœ¨æ­¤å¤„ç­‰å¾…ï¼Œç›´åˆ°æ‰€æœ‰çº¿ç¨‹éƒ½åˆ°è¾¾</span></span><br><span class="line"></span><br><span class="line">                    System.out.println(<span class="string">&quot;èµ›è·‘è€… &quot;</span> + runnerId + <span class="string">&quot; å¼€å§‹è·‘æ­¥ï¼&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException | BrokenBarrierException e) &#123;</span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Semaphore-1"><a href="#Semaphore-1" class="headerlink" title="Semaphore"></a><code>Semaphore</code></h3><p><code>Semaphore</code>ï¼ˆä¿¡å·é‡ï¼‰ç”¨æ¥æ§åˆ¶å¯¹æŸä¸ªèµ„æºçš„å¹¶å‘è®¿é—®æ•°é‡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.Semaphore;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SemaphoreDemo</span> &#123;</span><br><span class="line">    <span class="comment">// åœè½¦åœºæœ€å¤šå…è®¸ 3 è¾†è½¦åœæ”¾</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Semaphore</span> <span class="variable">semaphore</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Semaphore</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">park</span><span class="params">(<span class="type">int</span> carId)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ±½è½¦ &quot;</span> + carId + <span class="string">&quot; æ­£åœ¨å¯»æ‰¾è½¦ä½...&quot;</span>);</span><br><span class="line">            semaphore.acquire(); <span class="comment">// è·å–ä¸€ä¸ªè®¸å¯</span></span><br><span class="line">            System.out.println(<span class="string">&quot;æ±½è½¦ &quot;</span> + carId + <span class="string">&quot; æˆåŠŸè¿›å…¥åœè½¦åœºã€‚&quot;</span>);</span><br><span class="line">            Thread.sleep((<span class="type">long</span>) (Math.random() * <span class="number">3000</span>)); <span class="comment">// æ¨¡æ‹Ÿåœè½¦æ—¶é—´</span></span><br><span class="line">            System.out.println(<span class="string">&quot;æ±½è½¦ &quot;</span> + carId + <span class="string">&quot; ç¦»å¼€åœè½¦åœºã€‚&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            semaphore.release(); <span class="comment">// é‡Šæ”¾è®¸å¯</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SemaphoreDemo</span> <span class="variable">demo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SemaphoreDemo</span>();</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>); <span class="comment">// 10 è¾†è½¦</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">carId</span> <span class="operator">=</span> i;</span><br><span class="line">            executor.execute(() -&gt; demo.park(carId));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="æ­»é”é¢„é˜²-æŒ‰é”é¡ºåº"><a href="#æ­»é”é¢„é˜²-æŒ‰é”é¡ºåº" class="headerlink" title="æ­»é”é¢„é˜² (æŒ‰é”é¡ºåº)"></a>æ­»é”é¢„é˜² (æŒ‰é”é¡ºåº)</h3><p>é€šè¿‡<strong>èµ„æºæœ‰åºåˆ†é…</strong>æ¥æ‰“ç ´æ­»é”çš„<strong>å¾ªç¯ç­‰å¾…</strong>æ¡ä»¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DeadlockPrevention</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lockA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lockB</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">threadOne</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lockA) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹ 1: å·²è·å¾— lockAï¼Œå°è¯•è·å– lockB...&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                Thread.currentThread().interrupt();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">synchronized</span> (lockB) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹ 1: å·²è·å¾— lockBã€‚&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">threadTwo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ä¸¤ä¸ªçº¿ç¨‹éƒ½æŒ‰ç›¸åŒçš„é¡ºåºï¼ˆå…ˆ A å Bï¼‰è·å–é”</span></span><br><span class="line">        <span class="keyword">synchronized</span> (lockA) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹ 2: å·²è·å¾— lockAï¼Œå°è¯•è·å– lockB...&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                Thread.currentThread().interrupt();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">synchronized</span> (lockB) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹ 2: å·²è·å¾— lockBã€‚&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">DeadlockPrevention</span> <span class="variable">demo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeadlockPrevention</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(demo::threadOne, <span class="string">&quot;Thread-1&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(demo::threadTwo, <span class="string">&quot;Thread-2&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="çº¿ç¨‹æ± å¼‚å¸¸"><a href="#çº¿ç¨‹æ± å¼‚å¸¸" class="headerlink" title="çº¿ç¨‹æ± å¼‚å¸¸"></a>çº¿ç¨‹æ± å¼‚å¸¸</h3><p>ä½¿ç”¨ <code>Future.get()</code> æˆ–åœ¨ä»»åŠ¡ä¸­æ•è·å¼‚å¸¸æ¥å¤„ç†çº¿ç¨‹æ± ä¸­ä»»åŠ¡æŠ›å‡ºçš„å¼‚å¸¸ã€‚<code>execute()</code> æ–¹æ³•æ— æ³•ç›´æ¥æ•è·å¼‚å¸¸ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadPoolExceptionDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤ä¸€ä¸ªä¼šæŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸çš„ä»»åŠ¡</span></span><br><span class="line">        Future&lt;?&gt; future = executor.submit(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä»»åŠ¡å¼€å§‹æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿçš„ä»»åŠ¡æ‰§è¡Œå¼‚å¸¸ã€‚&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°è¯•è·å–ä»»åŠ¡ç»“æœæ¥æ•è·å¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            future.get();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;æ•è·åˆ°ä»»åŠ¡æ‰§è¡Œå¼‚å¸¸ï¼š&quot;</span> + e.getCause().getMessage());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ execute() æäº¤ä»»åŠ¡ï¼Œå¼‚å¸¸ä¼šè¢«åæ‰ï¼Œé™¤éè‡ªå®šä¹‰ UncaughtExceptionHandler</span></span><br><span class="line">        executor.execute(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å¦ä¸€ä¸ªä»»åŠ¡å¼€å§‹æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;è¿™ä¸ªå¼‚å¸¸ä¼šè¢«åæ‰ã€‚&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        executor.shutdown();</span><br><span class="line">        executor.awaitTermination(<span class="number">1</span>, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ThreadLocal-1"><a href="#ThreadLocal-1" class="headerlink" title="ThreadLocal"></a><code>ThreadLocal</code></h3><p><code>ThreadLocal</code> ä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›äº†ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œå®ç°äº†æ•°æ®éš”ç¦»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadLocalDemo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;String&gt; threadLocal = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAndPrint</span><span class="params">(String value)</span> &#123;</span><br><span class="line">        threadLocal.set(value); <span class="comment">// è®¾ç½®å½“å‰çº¿ç¨‹çš„å˜é‡å‰¯æœ¬</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>); <span class="comment">// æ¨¡æ‹Ÿä»»åŠ¡</span></span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; çš„å˜é‡å€¼: &quot;</span> + threadLocal.get());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            threadLocal.remove(); <span class="comment">// æœ€ä½³å®è·µï¼šä½¿ç”¨å®Œåç§»é™¤ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ThreadLocalDemo</span> <span class="variable">demo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadLocalDemo</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; demo.setAndPrint(<span class="string">&quot;çº¿ç¨‹ A çš„æ•°æ®&quot;</span>), <span class="string">&quot;Thread-A&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; demo.setAndPrint(<span class="string">&quot;çº¿ç¨‹ B çš„æ•°æ®&quot;</span>), <span class="string">&quot;Thread-B&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="LockSupport"><a href="#LockSupport" class="headerlink" title="LockSupport"></a><code>LockSupport</code></h3><p><code>LockSupport.park()</code> å’Œ <code>LockSupport.unpark()</code> æä¾›äº†æ›´çµæ´»çš„çº¿ç¨‹é˜»å¡å’Œå”¤é†’æœºåˆ¶ï¼Œç±»ä¼¼äº <code>wait()</code> å’Œ <code>notify()</code>ï¼Œä½†ä¸éœ€è¦ä¾èµ–é”ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.LockSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LockSupportDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">workerThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å·¥ä½œçº¿ç¨‹: ä»»åŠ¡å‡†å¤‡å°±ç»ªï¼Œå³å°†é˜»å¡...&quot;</span>);</span><br><span class="line">            LockSupport.park(); <span class="comment">// é˜»å¡å½“å‰çº¿ç¨‹</span></span><br><span class="line">            System.out.println(<span class="string">&quot;å·¥ä½œçº¿ç¨‹: è¢«å”¤é†’ï¼Œç»§ç»­æ‰§è¡Œã€‚&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        workerThread.start();</span><br><span class="line">        Thread.sleep(<span class="number">2000</span>); <span class="comment">// ç¡®ä¿å·¥ä½œçº¿ç¨‹å·²æ‰§è¡Œ park()</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹: å”¤é†’å·¥ä½œçº¿ç¨‹ã€‚&quot;</span>);</span><br><span class="line">        LockSupport.unpark(workerThread); <span class="comment">// å”¤é†’æŒ‡å®šçº¿ç¨‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="çº¿ç¨‹é€šä¿¡-æŒ‰é¡ºåºæ‰“å°"><a href="#çº¿ç¨‹é€šä¿¡-æŒ‰é¡ºåºæ‰“å°" class="headerlink" title="çº¿ç¨‹é€šä¿¡ (æŒ‰é¡ºåºæ‰“å°)"></a>çº¿ç¨‹é€šä¿¡ (æŒ‰é¡ºåºæ‰“å°)</h3><p>ä½¿ç”¨ <code>wait()</code> å’Œ <code>notifyAll()</code> å®ç°ä¸‰ä¸ªçº¿ç¨‹æŒ‰é¡ºåºæ‰“å°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SequentialPrinter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">state</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// 0: A, 1: B, 2: C</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printA</span><span class="params">()</span> &#123;</span><br><span class="line">        printLetter(<span class="string">&quot;A&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printB</span><span class="params">()</span> &#123;</span><br><span class="line">        printLetter(<span class="string">&quot;B&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printC</span><span class="params">()</span> &#123;</span><br><span class="line">        printLetter(<span class="string">&quot;C&quot;</span>, <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">printLetter</span><span class="params">(String letter, <span class="type">int</span> expectedState)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                <span class="keyword">while</span> (state != expectedState) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        lock.wait();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        Thread.currentThread().interrupt();</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.print(letter);</span><br><span class="line">                state = (state + <span class="number">1</span>) % <span class="number">3</span>; <span class="comment">// åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€</span></span><br><span class="line">                lock.notifyAll();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">SequentialPrinter</span> <span class="variable">printer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SequentialPrinter</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">threadA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(printer::printA);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">threadB</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(printer::printB);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">threadC</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(printer::printC);</span><br><span class="line"></span><br><span class="line">        threadA.start();</span><br><span class="line">        threadB.start();</span><br><span class="line">        threadC.start();</span><br><span class="line"></span><br><span class="line">        threadA.join();</span><br><span class="line">        threadB.join();</span><br><span class="line">        threadC.join();</span><br><span class="line">        System.out.println(<span class="string">&quot;\næ‰“å°å®Œæˆã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h3><h4 id="ThreadPoolExecutor-çš„ä¸ƒä¸ªå‚æ•°"><a href="#ThreadPoolExecutor-çš„ä¸ƒä¸ªå‚æ•°" class="headerlink" title="ThreadPoolExecutor çš„ä¸ƒä¸ªå‚æ•°"></a><code>ThreadPoolExecutor</code> çš„ä¸ƒä¸ªå‚æ•°</h4><ol><li><code>corePoolSize</code>: æ ¸å¿ƒçº¿ç¨‹æ•°ã€‚çº¿ç¨‹æ± ä¸­å¸¸é©»çš„çº¿ç¨‹æ•°é‡ï¼Œå³ä½¿ç©ºé—²ä¹Ÿä¸ä¼šè¢«é”€æ¯ã€‚</li><li><code>maximumPoolSize</code>: æœ€å¤§çº¿ç¨‹æ•°ã€‚å½“å·¥ä½œé˜Ÿåˆ—å·²æ»¡ï¼Œä¸”ä»»åŠ¡é‡ç»§ç»­å¢åŠ æ—¶ï¼Œçº¿ç¨‹æ± å¯ä»¥åˆ›å»ºçš„æœ€å¤§çº¿ç¨‹æ•°ã€‚</li><li><code>keepAliveTime</code>: ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´ã€‚å½“çº¿ç¨‹æ•°å¤§äº <code>corePoolSize</code> æ—¶ï¼Œéæ ¸å¿ƒçº¿ç¨‹çš„ç©ºé—²å­˜æ´»æ—¶é—´ã€‚</li><li><code>unit</code>: <code>keepAliveTime</code> çš„æ—¶é—´å•ä½ã€‚</li><li><code>workQueue</code>: å·¥ä½œé˜Ÿåˆ—ã€‚ç”¨äºå­˜æ”¾ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¸¸ç”¨çš„æœ‰ <code>ArrayBlockingQueue</code>ã€<code>LinkedBlockingQueue</code> ç­‰ã€‚</li><li><code>threadFactory</code>: çº¿ç¨‹å·¥å‚ã€‚ç”¨äºåˆ›å»ºæ–°çº¿ç¨‹ï¼Œå¯ä»¥è‡ªå®šä¹‰çº¿ç¨‹çš„åç§°ã€ä¼˜å…ˆçº§ç­‰ã€‚</li><li><code>handler</code>: æ‹’ç»ç­–ç•¥ã€‚å½“çº¿ç¨‹æ± å’Œå·¥ä½œé˜Ÿåˆ—éƒ½å·²æ»¡æ—¶ï¼Œç”¨äºå¤„ç†æ–°æ¥çš„ä»»åŠ¡ï¼Œä¾‹å¦‚æŠ›å‡ºå¼‚å¸¸ã€ç”±è°ƒç”¨è€…æ‰§è¡Œç­‰ã€‚</li></ol><h4 id="æ‰‹å†™ä¸€ä¸ªè‡ªå®šä¹‰çº¿ç¨‹æ± "><a href="#æ‰‹å†™ä¸€ä¸ªè‡ªå®šä¹‰çº¿ç¨‹æ± " class="headerlink" title="æ‰‹å†™ä¸€ä¸ªè‡ªå®šä¹‰çº¿ç¨‹æ± "></a>æ‰‹å†™ä¸€ä¸ªè‡ªå®šä¹‰çº¿ç¨‹æ± </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomThreadPool</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// è‡ªå®šä¹‰çº¿ç¨‹æ± </span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line">                <span class="number">2</span>, <span class="comment">// æ ¸å¿ƒçº¿ç¨‹æ•°</span></span><br><span class="line">                <span class="number">5</span>, <span class="comment">// æœ€å¤§çº¿ç¨‹æ•°</span></span><br><span class="line">                <span class="number">60L</span>, <span class="comment">// ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´</span></span><br><span class="line">                TimeUnit.SECONDS,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="number">10</span>), <span class="comment">// å·¥ä½œé˜Ÿåˆ—å®¹é‡ä¸º 10</span></span><br><span class="line">                Executors.defaultThreadFactory(), <span class="comment">// é»˜è®¤çº¿ç¨‹å·¥å‚</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.CallerRunsPolicy() <span class="comment">// æ‹’ç»ç­–ç•¥ï¼šç”±è°ƒç”¨è€…çº¿ç¨‹æ‰§è¡Œ</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">taskId</span> <span class="operator">=</span> i;</span><br><span class="line">            executor.execute(() -&gt; &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;ä»»åŠ¡ &quot;</span> + taskId + <span class="string">&quot; æ­£åœ¨ç”±çº¿ç¨‹ &quot;</span> + Thread.currentThread().getName() + <span class="string">&quot; æ‰§è¡Œã€‚&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="åŸå­ç±»"><a href="#åŸå­ç±»" class="headerlink" title="åŸå­ç±»"></a>åŸå­ç±»</h3><p>ä½¿ç”¨ <code>AtomicBoolean</code> æˆ– <code>AtomicReference</code> è§£å†³å¹¶å‘é—®é¢˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicBoolean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AtomicBooleanDemo</span> &#123;</span><br><span class="line">    <span class="comment">// ç¡®ä¿åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">AtomicBoolean</span> <span class="variable">initialized</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicBoolean</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// åªæœ‰å½“ initialized ä¸º false æ—¶ï¼Œæ‰å°†å…¶è®¾ç½®ä¸º true å¹¶æ‰§è¡Œåˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">if</span> (initialized.compareAndSet(<span class="literal">false</span>, <span class="literal">true</span>)) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;: å¼€å§‹æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ...&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                Thread.currentThread().interrupt();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;: åˆå§‹åŒ–å®Œæˆã€‚&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;: åˆå§‹åŒ–å·²è¢«å…¶ä»–çº¿ç¨‹æ‰§è¡Œï¼Œè·³è¿‡ã€‚&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(AtomicBooleanDemo::initialize, <span class="string">&quot;Thread-&quot;</span> + i).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="volatile-å†…å­˜è¯­ä¹‰"><a href="#volatile-å†…å­˜è¯­ä¹‰" class="headerlink" title="volatile å†…å­˜è¯­ä¹‰"></a><code>volatile</code> å†…å­˜è¯­ä¹‰</h3><p><code>volatile</code> ç¡®ä¿äº†<strong>å¯è§æ€§</strong>å’Œ<strong>æœ‰åºæ€§</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">VolatileMemorySemantics</span> &#123;</span><br><span class="line">    <span class="comment">// 1. å¯è§æ€§ï¼šå½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº† ready çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½ç«‹å³çœ‹åˆ°æœ€æ–°å€¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">boolean</span> <span class="variable">ready</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">WriterThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            number = <span class="number">42</span>; <span class="comment">// ä¿®æ”¹ number</span></span><br><span class="line">            ready = <span class="literal">true</span>; <span class="comment">// ä¿®æ”¹ ready</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ReaderThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (!ready) &#123;</span><br><span class="line">                <span class="comment">// ç­‰å¾… ready å˜ä¸º true</span></span><br><span class="line">                <span class="comment">// å¦‚æœæ²¡æœ‰ volatileï¼Œè¿™é‡Œå¯èƒ½ä¼šé™·å…¥æ­»å¾ªç¯</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 2. æœ‰åºæ€§ï¼šå†™ volatile å˜é‡ï¼ˆready = trueï¼‰ä¹‹å‰çš„æ“ä½œï¼ˆnumber = 42ï¼‰</span></span><br><span class="line">            <span class="comment">// å¯¹å…¶ä»–çº¿ç¨‹éƒ½æ˜¯å¯è§çš„ã€‚ä¿è¯äº† number çš„å€¼æ˜¯ 42ã€‚</span></span><br><span class="line">            System.out.println(<span class="string">&quot;è¯»å–åˆ°çš„ number å€¼: &quot;</span> + number);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">WriterThread</span>().start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ReaderThread</span>().start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ä¸­æ–­æœºåˆ¶-1"><a href="#ä¸­æ–­æœºåˆ¶-1" class="headerlink" title="ä¸­æ–­æœºåˆ¶"></a>ä¸­æ–­æœºåˆ¶</h3><p>ä¸€ä¸ªçº¿ç¨‹é€šè¿‡å“åº” <code>interrupt()</code> è°ƒç”¨æ¥æ­£ç¡®åœæ­¢è‡ªèº«ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">InterruptibleThreadDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">worker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (!Thread.currentThread().isInterrupted()) &#123; <span class="comment">// æ£€æŸ¥ä¸­æ–­æ ‡å¿—</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;çº¿ç¨‹æ­£åœ¨æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">                    <span class="comment">// sleep()ã€wait() ç­‰æ–¹æ³•ä¼šæŠ›å‡º InterruptedException å¹¶æ¸…é™¤ä¸­æ–­æ ‡å¿—</span></span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;çº¿ç¨‹è¢«ä¸­æ–­ï¼Œå³å°†é€€å‡º...&quot;</span>);</span><br><span class="line">                    <span class="comment">// é‡æ–°è®¾ç½®ä¸­æ–­æ ‡å¿—ï¼Œä»¥ä¾¿å¤–å±‚å¾ªç¯èƒ½æ­£ç¡®é€€å‡º</span></span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                    <span class="comment">// æˆ–è€…ç›´æ¥ break æˆ– return é€€å‡º</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹å·²ä¼˜é›…åœ°é€€å‡ºã€‚&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        worker.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">3500</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹: å‘é€ä¸­æ–­ä¿¡å·ã€‚&quot;</span>);</span><br><span class="line">        worker.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ConcurrentHashMap"><a href="#ConcurrentHashMap" class="headerlink" title="ConcurrentHashMap"></a><code>ConcurrentHashMap</code></h3><p><code>ConcurrentHashMap</code> çš„å¹¶å‘åŸç†æ˜¯**åˆ†æ®µé”ï¼ˆ 7ï¼‰**æˆ– <strong>CAS + Synchronizedï¼ˆ 8ï¼‰</strong>ï¼Œåªå¯¹æ“ä½œçš„æ¡¶è¿›è¡Œé”å®šï¼Œå¤§å¤§æé«˜äº†å¹¶å‘æ€§èƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcurrentHashMapDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        ConcurrentHashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯åŠ¨ 10 ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å‘ map ä¸­æ·»åŠ  1000 ä¸ªé”®å€¼å¯¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">threadId</span> <span class="operator">=</span> i;</span><br><span class="line">            executor.execute(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++) &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;key-&quot;</span> + (threadId * <span class="number">1000</span> + j);</span><br><span class="line">                    map.put(key, j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        executor.shutdown();</span><br><span class="line">        executor.awaitTermination(<span class="number">1</span>, TimeUnit.MINUTES);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;æœ€ç»ˆ map çš„å¤§å°: &quot;</span> + map.size()); <span class="comment">// æœŸæœ›å€¼ä¸º 10000</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ForkJoinPool"><a href="#ForkJoinPool" class="headerlink" title="ForkJoinPool"></a><code>ForkJoinPool</code></h3><p><code>ForkJoinPool</code> æ˜¯ä¸€ä¸ªç”¨äºåˆ†æ²»ä»»åŠ¡çš„çº¿ç¨‹æ± ï¼Œ<code>RecursiveTask</code> æ˜¯å¯è¿”å›ç»“æœçš„åˆ†æ²»ä»»åŠ¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ForkJoinPool;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.RecursiveTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SumTask</span> <span class="keyword">extends</span> <span class="title class_">RecursiveTask</span>&lt;Long&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">long</span>[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> start;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> end;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">THRESHOLD</span> <span class="operator">=</span> <span class="number">10000</span>; <span class="comment">// ä»»åŠ¡åˆ†è§£çš„é˜ˆå€¼</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SumTask</span><span class="params">(<span class="type">long</span>[] array, <span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = array;</span><br><span class="line">        <span class="built_in">this</span>.start = start;</span><br><span class="line">        <span class="built_in">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Long <span class="title function_">compute</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœä»»åŠ¡è§„æ¨¡å°äºç­‰äºé˜ˆå€¼ï¼Œåˆ™ç›´æ¥è®¡ç®—</span></span><br><span class="line">        <span class="keyword">if</span> (end - start &lt;= THRESHOLD) &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt; end; i++) &#123;</span><br><span class="line">                sum += array[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦åˆ™ï¼Œå°†ä»»åŠ¡åˆ†è§£æˆä¸¤ä¸ªå­ä»»åŠ¡</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> start + (end - start) / <span class="number">2</span>;</span><br><span class="line">            <span class="type">SumTask</span> <span class="variable">leftTask</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SumTask</span>(array, start, mid);</span><br><span class="line">            <span class="type">SumTask</span> <span class="variable">rightTask</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SumTask</span>(array, mid, end);</span><br><span class="line"></span><br><span class="line">            leftTask.fork(); <span class="comment">// æäº¤å·¦å­ä»»åŠ¡</span></span><br><span class="line">            <span class="type">long</span> <span class="variable">rightResult</span> <span class="operator">=</span> rightTask.compute(); <span class="comment">// åŒæ­¥è®¡ç®—å³å­ä»»åŠ¡</span></span><br><span class="line">            <span class="type">long</span> <span class="variable">leftResult</span> <span class="operator">=</span> leftTask.join(); <span class="comment">// ç­‰å¾…å·¦å­ä»»åŠ¡ç»“æœ</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> leftResult + rightResult;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">long</span>[] array = <span class="keyword">new</span> <span class="title class_">long</span>[<span class="number">1000000</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">            array[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">ForkJoinPool</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForkJoinPool</span>();</span><br><span class="line">        <span class="type">SumTask</span> <span class="variable">task</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SumTask</span>(array, <span class="number">0</span>, array.length);</span><br><span class="line">        <span class="type">long</span> <span class="variable">result</span> <span class="operator">=</span> pool.invoke(task);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¤§æ•°ç»„çš„å’Œä¸º: &quot;</span> + result);</span><br><span class="line"></span><br><span class="line">        pool.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="1-è¯­è¨€åŸºç¡€"><a href="#1-è¯­è¨€åŸºç¡€" class="headerlink" title="1.  è¯­è¨€åŸºç¡€"></a>1.  è¯­è¨€åŸºç¡€</h3><h4 id="å˜é‡ä¸æ•°æ®ç±»å‹"><a href="#å˜é‡ä¸æ•°æ®ç±»å‹" class="headerlink" title="å˜é‡ä¸æ•°æ®ç±»å‹"></a>å˜é‡ä¸æ•°æ®ç±»å‹</h4><p> çš„åŸºæœ¬æ•°æ®ç±»å‹å†³å®šäº†å˜é‡å¯ä»¥å­˜å‚¨çš„æ•°æ®èŒƒå›´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataTypesDetailed</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// æ•´æ•°ç±»å‹ï¼šé»˜è®¤ä¸º int</span></span><br><span class="line">        <span class="type">byte</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">100</span>; <span class="comment">// å ç”¨ 1 å­—èŠ‚ï¼Œ-128 åˆ° 127</span></span><br><span class="line">        <span class="type">short</span> <span class="variable">s</span> <span class="operator">=</span> <span class="number">10000</span>; <span class="comment">// å ç”¨ 2 å­—èŠ‚</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">100000</span>; <span class="comment">// å ç”¨ 4 å­—èŠ‚</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">10000000000L</span>; <span class="comment">// å ç”¨ 8 å­—èŠ‚ï¼Œéœ€è¦ L æˆ– l åç¼€</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æµ®ç‚¹ç±»å‹ï¼šé»˜è®¤ä¸º double</span></span><br><span class="line">        <span class="type">float</span> <span class="variable">f</span> <span class="operator">=</span> <span class="number">3.14f</span>; <span class="comment">// å ç”¨ 4 å­—èŠ‚ï¼Œéœ€è¦ f æˆ– F åç¼€</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">d</span> <span class="operator">=</span> <span class="number">3.1415926535</span>; <span class="comment">// å ç”¨ 8 å­—èŠ‚</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å­—ç¬¦ç±»å‹</span></span><br><span class="line">        <span class="type">char</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="string">&#x27;A&#x27;</span>; <span class="comment">// å•ä¸ªå­—ç¬¦ï¼Œå ç”¨ 2 å­—èŠ‚</span></span><br><span class="line">        <span class="type">char</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="number">65</span>; <span class="comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨ ASCII ç æˆ– Unicode</span></span><br><span class="line">        System.out.println(<span class="string">&quot;c1 å’Œ c2 æ˜¯å¦ç›¸ç­‰ï¼Ÿ &quot;</span> + (c1 == c2));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¸ƒå°”ç±»å‹</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isFun</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦Javaæœ‰è¶£å—ï¼Ÿ&quot;</span> + isFun);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h4><p> ä¸­ï¼Œä»å°èŒƒå›´ç±»å‹å‘å¤§èŒƒå›´ç±»å‹è½¬æ¢æ˜¯<strong>è‡ªåŠ¨</strong>çš„ï¼ˆéšå¼è½¬æ¢ï¼‰ï¼›ä»å¤§èŒƒå›´å‘å°èŒƒå›´è½¬æ¢éœ€è¦<strong>å¼ºåˆ¶</strong>è½¬æ¢ï¼ˆæ˜¾å¼è½¬æ¢ï¼‰ï¼Œå¯èƒ½é€ æˆæ•°æ®ä¸¢å¤±ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TypeCasting</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// éšå¼è½¬æ¢ï¼šint -&gt; long</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">myInt</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">myLong</span> <span class="operator">=</span> myInt;</span><br><span class="line">        System.out.println(<span class="string">&quot;éšå¼è½¬æ¢åçš„ long ç±»å‹: &quot;</span> + myLong);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ˜¾å¼è½¬æ¢ï¼šdouble -&gt; int</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">myDouble</span> <span class="operator">=</span> <span class="number">9.99</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">myInteger</span> <span class="operator">=</span> (<span class="type">int</span>) myDouble; <span class="comment">// å¼ºåˆ¶è½¬æ¢ï¼Œå°æ•°éƒ¨åˆ†è¢«ä¸¢å¼ƒ</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜¾å¼è½¬æ¢åçš„ int ç±»å‹: &quot;</span> + myInteger); <span class="comment">// è¾“å‡º 9</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h4><p>æ•°ç»„æ˜¯å­˜å‚¨<strong>å›ºå®šå¤§å°</strong>åŒç±»å‹å…ƒç´ çš„é›†åˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªæ•´æ•°æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span>[] numbers = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>]; <span class="comment">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 5 çš„æ•°ç»„</span></span><br><span class="line">        numbers[<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line">        numbers[<span class="number">1</span>] = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å£°æ˜ã€åˆå§‹åŒ–å¹¶èµ‹å€¼</span></span><br><span class="line">        String[] fruits = &#123;<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Cherry&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†æ•°ç»„</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰€æœ‰æ°´æœ:&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String fruit : fruits) &#123; <span class="comment">// å¢å¼º for å¾ªç¯</span></span><br><span class="line">            System.out.println(fruit);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="2-é¢å‘å¯¹è±¡ç¼–ç¨‹-OOP"><a href="#2-é¢å‘å¯¹è±¡ç¼–ç¨‹-OOP" class="headerlink" title="2. é¢å‘å¯¹è±¡ç¼–ç¨‹ (OOP)"></a>2. é¢å‘å¯¹è±¡ç¼–ç¨‹ (OOP)</h3><h4 id="æ„é€ æ–¹æ³•ä¸æ–¹æ³•é‡è½½"><a href="#æ„é€ æ–¹æ³•ä¸æ–¹æ³•é‡è½½" class="headerlink" title="æ„é€ æ–¹æ³•ä¸æ–¹æ³•é‡è½½"></a>æ„é€ æ–¹æ³•ä¸æ–¹æ³•é‡è½½</h4><p><strong>æ„é€ æ–¹æ³•</strong>æ˜¯ä¸€ç§ç‰¹æ®Šæ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå¯¹è±¡æ—¶åˆå§‹åŒ–ã€‚<strong>æ–¹æ³•é‡è½½</strong>æ˜¯æŒ‡åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œæ–¹æ³•åç›¸åŒä½†å‚æ•°åˆ—è¡¨ä¸åŒï¼ˆå‚æ•°ç±»å‹ã€æ•°é‡æˆ–é¡ºåºï¼‰çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    String id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ— å‚æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="string">&quot;æœªçŸ¥&quot;</span>, <span class="number">0</span>, <span class="string">&quot;000&quot;</span>); <span class="comment">// è°ƒç”¨æœ¬ç±»çš„ä¸‰å‚æ„é€ æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡è½½æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.id = <span class="string">&quot;000&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡è½½æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, String id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ–¹æ³•é‡è½½: è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">add</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç»§æ‰¿ã€å¤šæ€ä¸æŠ½è±¡"><a href="#ç»§æ‰¿ã€å¤šæ€ä¸æŠ½è±¡" class="headerlink" title="ç»§æ‰¿ã€å¤šæ€ä¸æŠ½è±¡"></a>ç»§æ‰¿ã€å¤šæ€ä¸æŠ½è±¡</h4><p>ç»§æ‰¿å®ç°ä»£ç å¤ç”¨ï¼Œå¤šæ€å®ç°è¡Œä¸ºå¤šæ ·åŒ–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç±»ï¼šæŠ½è±¡ç±»</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> String brand; <span class="comment">// å­ç±»å¯ä»¥è®¿é—®</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Vehicle</span><span class="params">(String brand)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>; <span class="comment">// æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">displayBrand</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å“ç‰Œæ˜¯: &quot;</span> + brand);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç±»ï¼šç»§æ‰¿ Vehicle</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> <span class="keyword">extends</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String brand)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(brand); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ±½è½¦æ­£åœ¨è·¯ä¸Šè¡Œé©¶...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç±»ï¼šç»§æ‰¿ Vehicle</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bicycle</span> <span class="keyword">extends</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bicycle</span><span class="params">(String brand)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(brand);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è‡ªè¡Œè½¦æ­£åœ¨éª‘è¡Œ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PolymorphismDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Vehicle</span> <span class="variable">myCar</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;BMW&quot;</span>); <span class="comment">// å¤šæ€å¼•ç”¨</span></span><br><span class="line">        <span class="type">Vehicle</span> <span class="variable">myBicycle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bicycle</span>(<span class="string">&quot;Giant&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŒä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œä¸åŒè¡Œä¸º</span></span><br><span class="line">        myCar.run(); <span class="comment">// è¾“å‡º &quot;æ±½è½¦æ­£åœ¨è·¯ä¸Šè¡Œé©¶...&quot;</span></span><br><span class="line">        myBicycle.run(); <span class="comment">// è¾“å‡º &quot;è‡ªè¡Œè½¦æ­£åœ¨éª‘è¡Œ...&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="3-æ ¸å¿ƒç±»åº“"><a href="#3-æ ¸å¿ƒç±»åº“" class="headerlink" title="3.  æ ¸å¿ƒç±»åº“"></a>3.  æ ¸å¿ƒç±»åº“</h3><p>å¥½çš„ï¼Œè¿™æ¬¡æˆ‘ä»¬å°†æŠŠ<strong>å„ç§æ–¹æ³•çš„ä½¿ç”¨ä»£ç </strong>ç›´æ¥åµŒå…¥åˆ°æ¯ä¸ªçŸ¥è¯†ç‚¹çš„è§£é‡Šä¸­ï¼Œè®©æ‚¨åœ¨å­¦ä¹ æ¦‚å¿µçš„åŒæ—¶ï¼Œå°±èƒ½çœ‹åˆ°å…·ä½“çš„ä»£ç å®ç°å’Œæ•ˆæœã€‚æˆ‘ä»¬å°†ä¸“æ³¨äº<strong>æ•°ç»„ã€å­—ç¬¦ä¸²å’Œé›†åˆ</strong>è¿™ä¸‰å¤§æ ¸å¿ƒéƒ¨åˆ†ï¼ŒæŠŠå®ƒä»¬çš„åˆ›å»ºã€éå†ã€å’Œå„ç§å¸¸ç”¨æ–¹æ³•çš„ä»£ç ç¤ºä¾‹éƒ½æ¸…æ™°åœ°å±•ç¤ºå‡ºæ¥ã€‚</p><hr><h3 id="1-æ•°ç»„ï¼ˆArrayï¼‰"><a href="#1-æ•°ç»„ï¼ˆArrayï¼‰" class="headerlink" title="1. æ•°ç»„ï¼ˆArrayï¼‰"></a>1. æ•°ç»„ï¼ˆArrayï¼‰</h3><p>æ•°ç»„æ˜¯ä¸€ç§å›ºå®šå¤§å°çš„ã€ç”¨äºå­˜å‚¨åŒç±»å‹å…ƒç´ çš„å®¹å™¨ã€‚</p><h4 id="åˆ›å»ºå’Œéå†"><a href="#åˆ›å»ºå’Œéå†" class="headerlink" title="åˆ›å»ºå’Œéå†"></a>åˆ›å»ºå’Œéå†</h4><p>è¿™é‡Œå±•ç¤ºä¸¤ç§æœ€å¸¸è§çš„åˆ›å»ºæ•°ç»„çš„æ–¹å¼ï¼Œå¹¶ä½¿ç”¨ä¸¤ç§å¾ªç¯è¿›è¡Œéå†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// æ–¹å¼ä¸€ï¼šå£°æ˜å¹¶åˆ†é…ç©ºé—´ï¼Œç³»ç»Ÿèµ‹é»˜è®¤å€¼</span></span><br><span class="line">        <span class="type">int</span>[] intArray = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>]; <span class="comment">// åˆ›å»ºä¸€ä¸ªåŒ…å«3ä¸ªæ•´æ•°çš„æ•°ç»„ï¼Œé»˜è®¤å€¼éƒ½æ˜¯0</span></span><br><span class="line">        intArray[<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line">        intArray[<span class="number">1</span>] = <span class="number">20</span>;</span><br><span class="line">        intArray[<span class="number">2</span>] = <span class="number">30</span>;</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;æ•°ç»„ intArray çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯: &quot;</span> + intArray[<span class="number">0</span>]); <span class="comment">// è¾“å‡º: 10</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ–¹å¼äºŒï¼šå£°æ˜å¹¶ç›´æ¥åˆå§‹åŒ–</span></span><br><span class="line">        String[] stringArray = &#123;<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>, <span class="string">&quot;Java&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†æ–¹å¼ä¸€ï¼šä½¿ç”¨ for å¾ªç¯</span></span><br><span class="line">        System.out.println(<span class="string">&quot;\n--- ä½¿ç”¨ for å¾ªç¯éå† ---&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; stringArray.length; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;stringArray[&quot;</span> + i + <span class="string">&quot;] = &quot;</span> + stringArray[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// éå†æ–¹å¼äºŒï¼šä½¿ç”¨å¢å¼º for å¾ªç¯ï¼ˆæ›´ç®€æ´ï¼‰</span></span><br><span class="line">        System.out.println(<span class="string">&quot;\n--- ä½¿ç”¨å¢å¼º for å¾ªç¯éå† ---&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String element : stringArray) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å…ƒç´ : &quot;</span> + element);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Arrays-ç±»çš„å¸¸ç”¨æ–¹æ³•"><a href="#Arrays-ç±»çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="Arrays ç±»çš„å¸¸ç”¨æ–¹æ³•"></a><code>Arrays</code> ç±»çš„å¸¸ç”¨æ–¹æ³•</h4><p><code>java.util.Arrays</code> ç±»æä¾›äº†å¾ˆå¤šé™æ€æ–¹æ³•ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹æ•°ç»„è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚æ’åºã€æŸ¥æ‰¾ã€å¤åˆ¶ç­‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArraysMethodExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] numbers = &#123;<span class="number">4</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">6</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. æ’åºï¼šArrays.sort()</span></span><br><span class="line">        Arrays.sort(numbers);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ’åºå: &quot;</span> + Arrays.toString(numbers)); <span class="comment">// è¾“å‡º: [1, 2, 4, 6, 8]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. æŸ¥æ‰¾ï¼šArrays.binarySearch() (å¿…é¡»å…ˆæ’åº)</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> Arrays.binarySearch(numbers, <span class="number">6</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å…ƒç´  6 çš„ç´¢å¼•æ˜¯: &quot;</span> + index); <span class="comment">// è¾“å‡º: 3</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. å¡«å……ï¼šArrays.fill()</span></span><br><span class="line">        <span class="type">int</span>[] newArray = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];</span><br><span class="line">        Arrays.fill(newArray, <span class="number">99</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¡«å……å: &quot;</span> + Arrays.toString(newArray)); <span class="comment">// è¾“å‡º: [99, 99, 99, 99, 99]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. å¤åˆ¶ï¼šArrays.copyOf()</span></span><br><span class="line">        <span class="type">int</span>[] copiedArray = Arrays.copyOf(numbers, <span class="number">3</span>); <span class="comment">// å¤åˆ¶å‰3ä¸ªå…ƒç´ </span></span><br><span class="line">        System.out.println(<span class="string">&quot;å¤åˆ¶å‰3ä¸ªå…ƒç´ : &quot;</span> + Arrays.toString(copiedArray)); <span class="comment">// è¾“å‡º: [1, 2, 4]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5. æ¯”è¾ƒï¼šArrays.equals()</span></span><br><span class="line">        <span class="type">int</span>[] anotherArray = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>&#125;;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰: &quot;</span> + Arrays.equals(numbers, anotherArray)); <span class="comment">// è¾“å‡º: true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="2-å­—ç¬¦ä¸²ï¼ˆStringï¼‰"><a href="#2-å­—ç¬¦ä¸²ï¼ˆStringï¼‰" class="headerlink" title="2. å­—ç¬¦ä¸²ï¼ˆStringï¼‰"></a>2. å­—ç¬¦ä¸²ï¼ˆStringï¼‰</h3><p><code>String</code> æ˜¯ä¸€ä¸ªä¸å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦åˆ›å»ºï¼Œå®ƒçš„å†…å®¹å°±ä¸èƒ½è¢«ä¿®æ”¹ã€‚æ‰€æœ‰ä¿®æ”¹æ“ä½œéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>String</code> å¯¹è±¡ã€‚</p><h4 id="åˆ›å»ºå’Œå¸¸ç”¨æ–¹æ³•"><a href="#åˆ›å»ºå’Œå¸¸ç”¨æ–¹æ³•" class="headerlink" title="åˆ›å»ºå’Œå¸¸ç”¨æ–¹æ³•"></a>åˆ›å»ºå’Œå¸¸ç”¨æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºæ–¹å¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="string">&quot;  Java is a great language. &quot;</span>; <span class="comment">// å­—é¢é‡</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;Java is a great language.&quot;</span>); <span class="comment">// ä½¿ç”¨ new å…³é”®å­—</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¸¸ç”¨æ–¹æ³•</span></span><br><span class="line">        <span class="comment">// 1. è·å–é•¿åº¦</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> str1.length();</span><br><span class="line">        System.out.println(<span class="string">&quot;å­—ç¬¦ä¸²é•¿åº¦: &quot;</span> + length); <span class="comment">// è¾“å‡º: 29</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. è®¿é—®å­—ç¬¦</span></span><br><span class="line">        <span class="type">char</span> <span class="variable">firstChar</span> <span class="operator">=</span> str1.charAt(<span class="number">2</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¬¬3ä¸ªå­—ç¬¦æ˜¯: &quot;</span> + firstChar); <span class="comment">// è¾“å‡º: J</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. æˆªå–å­ä¸²</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sub</span> <span class="operator">=</span> str1.substring(<span class="number">5</span>, <span class="number">7</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆªå–å­ä¸²: &quot;</span> + sub); <span class="comment">// è¾“å‡º: is</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. æŸ¥æ‰¾ä½ç½®</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> str1.indexOf(<span class="string">&quot;great&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x27;great&#x27; çš„ç´¢å¼•: &quot;</span> + index); <span class="comment">// è¾“å‡º: 11</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5. åˆ¤æ–­</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">contains</span> <span class="operator">=</span> str1.contains(<span class="string">&quot;language&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜¯å¦åŒ…å« &#x27;language&#x27;: &quot;</span> + contains); <span class="comment">// è¾“å‡º: true</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">startsWith</span> <span class="operator">=</span> str1.startsWith(<span class="string">&quot;  Java&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜¯å¦ä»¥ &#x27;  Java&#x27; å¼€å¤´: &quot;</span> + startsWith); <span class="comment">// è¾“å‡º: true</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. æ›¿æ¢</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">replacedStr</span> <span class="operator">=</span> str1.replace(<span class="string">&quot;great&quot;</span>, <span class="string">&quot;wonderful&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ›¿æ¢å: &quot;</span> + replacedStr); <span class="comment">// è¾“å‡º:   Java is a wonderful language. </span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 7. å¤§å°å†™è½¬æ¢å’Œå»ç©ºæ ¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">trimmedStr</span> <span class="operator">=</span> str1.trim();</span><br><span class="line">        System.out.println(<span class="string">&quot;å»é™¤é¦–å°¾ç©ºæ ¼: &#x27;&quot;</span> + trimmedStr + <span class="string">&quot;&#x27;&quot;</span>); <span class="comment">// è¾“å‡º: &#x27;Java is a great language.&#x27;</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è½¬ä¸ºå¤§å†™: &quot;</span> + trimmedStr.toUpperCase());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 8. åˆ†å‰²å’Œè¿æ¥</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> <span class="string">&quot;apple,banana,orange&quot;</span>;</span><br><span class="line">        String[] fruits = data.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ†å‰²å: &quot;</span> + Arrays.toString(fruits)); <span class="comment">// è¾“å‡º: [apple, banana, orange]</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">String</span> <span class="variable">joinedString</span> <span class="operator">=</span> String.join(<span class="string">&quot; - &quot;</span>, fruits);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿æ¥å: &quot;</span> + joinedString); <span class="comment">// è¾“å‡º: apple - banana - orange</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="StringBuilder-å’Œ-StringBuffer"><a href="#StringBuilder-å’Œ-StringBuffer" class="headerlink" title="StringBuilder å’Œ StringBuffer"></a><code>StringBuilder</code> å’Œ <code>StringBuffer</code></h4><p>å¯¹äºéœ€è¦é¢‘ç¹ä¿®æ”¹å­—ç¬¦ä¸²çš„åœºæ™¯ï¼Œåº”ä½¿ç”¨ <code>StringBuilder</code> æˆ– <code>StringBuffer</code> ä»¥æé«˜æ€§èƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringBuilderExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. è¿½åŠ å†…å®¹</span></span><br><span class="line">        sb.append(<span class="string">&quot; World&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿½åŠ å: &quot;</span> + sb); <span class="comment">// è¾“å‡º: Hello World</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. æ’å…¥å†…å®¹</span></span><br><span class="line">        sb.insert(<span class="number">6</span>, <span class="string">&quot;Beautiful &quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ’å…¥å: &quot;</span> + sb); <span class="comment">// è¾“å‡º: Hello Beautiful World</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. åˆ é™¤å†…å®¹</span></span><br><span class="line">        sb.delete(<span class="number">6</span>, <span class="number">15</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤å: &quot;</span> + sb); <span class="comment">// è¾“å‡º: Hello World</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="3-é›†åˆï¼ˆCollectionsï¼‰"><a href="#3-é›†åˆï¼ˆCollectionsï¼‰" class="headerlink" title="3. é›†åˆï¼ˆCollectionsï¼‰"></a>3. é›†åˆï¼ˆCollectionsï¼‰</h3><p>Java é›†åˆæ¡†æ¶æä¾›äº†å¼ºå¤§çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨å’Œæ“ä½œå¯¹è±¡ã€‚</p><h4 id="Listï¼ˆåˆ—è¡¨ï¼‰"><a href="#Listï¼ˆåˆ—è¡¨ï¼‰" class="headerlink" title="Listï¼ˆåˆ—è¡¨ï¼‰"></a><strong>List</strong>ï¼ˆåˆ—è¡¨ï¼‰</h4><p><code>List</code> æ˜¯ä¸€ç§æœ‰åºã€å¯é‡å¤çš„é›†åˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»º ArrayListï¼ˆæŸ¥è¯¢å¿«ï¼‰</span></span><br><span class="line">        List&lt;String&gt; fruits = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        fruits.add(<span class="string">&quot;Apple&quot;</span>); <span class="comment">// æ·»åŠ å…ƒç´ </span></span><br><span class="line">        fruits.add(<span class="string">&quot;Banana&quot;</span>);</span><br><span class="line">        fruits.add(<span class="string">&quot;Apple&quot;</span>); <span class="comment">// å…è®¸é‡å¤</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ—è¡¨å…ƒç´ : &quot;</span> + fruits); <span class="comment">// è¾“å‡º: [Apple, Banana, Apple]</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ç¬¬ä¸€ä¸ªå…ƒç´ : &quot;</span> + fruits.get(<span class="number">0</span>)); <span class="comment">// è·å–å…ƒç´ </span></span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ—è¡¨å¤§å°: &quot;</span> + fruits.size());</span><br><span class="line"></span><br><span class="line">        fruits.set(<span class="number">1</span>, <span class="string">&quot;Grape&quot;</span>); <span class="comment">// æ›¿æ¢ç¬¬äºŒä¸ªå…ƒç´ </span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ›¿æ¢å: &quot;</span> + fruits); <span class="comment">// è¾“å‡º: [Apple, Grape, Apple]</span></span><br><span class="line"></span><br><span class="line">        fruits.remove(<span class="number">1</span>); <span class="comment">// åˆ é™¤ç¬¬äºŒä¸ªå…ƒç´ </span></span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤å: &quot;</span> + fruits); <span class="comment">// è¾“å‡º: [Apple, Apple]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Setï¼ˆé›†ï¼‰"><a href="#Setï¼ˆé›†ï¼‰" class="headerlink" title="Setï¼ˆé›†ï¼‰"></a><strong>Set</strong>ï¼ˆé›†ï¼‰</h4><p><code>Set</code> æ˜¯ä¸€ç§æ— åºã€ä¸å¯é‡å¤çš„é›†åˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SetExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»º HashSet</span></span><br><span class="line">        Set&lt;String&gt; uniqueFruits = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        uniqueFruits.add(<span class="string">&quot;Apple&quot;</span>);</span><br><span class="line">        uniqueFruits.add(<span class="string">&quot;Banana&quot;</span>);</span><br><span class="line">        uniqueFruits.add(<span class="string">&quot;Apple&quot;</span>); <span class="comment">// æ·»åŠ é‡å¤å…ƒç´ ï¼Œä¼šå¤±è´¥</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;é›†åˆå…ƒç´ : &quot;</span> + uniqueFruits); <span class="comment">// è¾“å‡º: [Apple, Banana] (é¡ºåºä¸å®š)</span></span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">containsBanana</span> <span class="operator">=</span> uniqueFruits.contains(<span class="string">&quot;Banana&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜¯å¦åŒ…å« &#x27;Banana&#x27;: &quot;</span> + containsBanana); <span class="comment">// è¾“å‡º: true</span></span><br><span class="line"></span><br><span class="line">        uniqueFruits.remove(<span class="string">&quot;Banana&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤å: &quot;</span> + uniqueFruits); <span class="comment">// è¾“å‡º: [Apple]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Mapï¼ˆæ˜ å°„ï¼‰"><a href="#Mapï¼ˆæ˜ å°„ï¼‰" class="headerlink" title="Mapï¼ˆæ˜ å°„ï¼‰"></a><strong>Map</strong>ï¼ˆæ˜ å°„ï¼‰</h4><p><code>Map</code> å­˜å‚¨é”®å€¼å¯¹ï¼Œé”®æ˜¯å”¯ä¸€çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»º HashMap</span></span><br><span class="line">        Map&lt;String, Integer&gt; studentScores = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        studentScores.put(<span class="string">&quot;Alice&quot;</span>, <span class="number">95</span>); <span class="comment">// æ·»åŠ é”®å€¼å¯¹</span></span><br><span class="line">        studentScores.put(<span class="string">&quot;Bob&quot;</span>, <span class="number">88</span>);</span><br><span class="line">        studentScores.put(<span class="string">&quot;Alice&quot;</span>, <span class="number">100</span>); <span class="comment">// é”®å·²å­˜åœ¨ï¼Œä¼šè¦†ç›–æ—§å€¼</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;Alice çš„åˆ†æ•°: &quot;</span> + studentScores.get(<span class="string">&quot;Alice&quot;</span>)); <span class="comment">// è¾“å‡º: 100</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// éå† Map çš„ä¸‰ç§æ–¹å¼</span></span><br><span class="line">        <span class="comment">// æ–¹å¼ä¸€ï¼šéå†é”®é›†</span></span><br><span class="line">        System.out.println(<span class="string">&quot;\n--- éå†é”®é›† ---&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String name : studentScores.keySet()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å§“å: &quot;</span> + name + <span class="string">&quot;, åˆ†æ•°: &quot;</span> + studentScores.get(name));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ–¹å¼äºŒï¼šéå†å€¼é›†</span></span><br><span class="line">        System.out.println(<span class="string">&quot;\n--- éå†å€¼é›† ---&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Integer score : studentScores.values()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åˆ†æ•°: &quot;</span> + score);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹å¼ä¸‰ï¼šéå†é”®å€¼å¯¹é›† (Entry Set)ï¼Œæœ€å¸¸ç”¨ä¸”é«˜æ•ˆ</span></span><br><span class="line">        System.out.println(<span class="string">&quot;\n--- éå†é”®å€¼å¯¹é›† ---&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : studentScores.entrySet()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å§“å: &quot;</span> + entry.getKey() + <span class="string">&quot;, åˆ†æ•°: &quot;</span> + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-å®ç°å•ä¾‹æ¨¡å¼-Singleton-Pattern&quot;&gt;&lt;a href=&quot;#1-å®ç°å•ä¾‹æ¨¡å¼-Singleton-Pattern&quot; class=&quot;headerlink&quot; title=&quot;1.å®ç°å•ä¾‹æ¨¡å¼ (Singleton Pattern)&quot;&gt;&lt;/a&gt;1.å®ç°å•ä¾‹</summary>
      
    
    
    
    <category term="æ‰‹å†™" scheme="http://example.com/categories/%E6%89%8B%E5%86%99/"/>
    
    
    <category term="java" scheme="http://example.com/tags/java/"/>
    
    <category term="æ‰‹å†™" scheme="http://example.com/tags/%E6%89%8B%E5%86%99/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•</title>
    <link href="http://example.com/2025/09/11/%E7%AE%97%E6%B3%95/"/>
    <id>http://example.com/2025/09/11/%E7%AE%97%E6%B3%95/</id>
    <published>2025-09-11T10:29:28.000Z</published>
    <updated>2025-09-22T04:31:27.914Z</updated>
    
    <content type="html"><![CDATA[<hr><h1 id="ğŸ”¥-å¸¸è§ç®—æ³•åˆ†ç±»-Javaå®ç°"><a href="#ğŸ”¥-å¸¸è§ç®—æ³•åˆ†ç±»-Javaå®ç°" class="headerlink" title="ğŸ”¥ å¸¸è§ç®—æ³•åˆ†ç±» + Javaå®ç°"></a>ğŸ”¥ å¸¸è§ç®—æ³•åˆ†ç±» + Javaå®ç°</h1><hr><h2 id="1-æ’åºç®—æ³•-Sorting"><a href="#1-æ’åºç®—æ³•-Sorting" class="headerlink" title="1. æ’åºç®—æ³• (Sorting)"></a>1. æ’åºç®—æ³• (Sorting)</h2><h3 id="1-1-å†’æ³¡æ’åº-Bubble-Sort"><a href="#1-1-å†’æ³¡æ’åº-Bubble-Sort" class="headerlink" title="1.1 å†’æ³¡æ’åº (Bubble Sort)"></a>1.1 å†’æ³¡æ’åº (Bubble Sort)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bubbleSort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &gt; arr[j+<span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> arr[j];</span><br><span class="line">                arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">                arr[j+<span class="number">1</span>] = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-2-é€‰æ‹©æ’åº-Selection-Sort"><a href="#1-2-é€‰æ‹©æ’åº-Selection-Sort" class="headerlink" title="1.2 é€‰æ‹©æ’åº (Selection Sort)"></a>1.2 é€‰æ‹©æ’åº (Selection Sort)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">selectionSort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">minIndex</span> <span class="operator">=</span> i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &lt; arr[minIndex]) minIndex = j;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> arr[i]; arr[i] = arr[minIndex]; arr[minIndex] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-3-æ’å…¥æ’åº-Insertion-Sort"><a href="#1-3-æ’å…¥æ’åº-Insertion-Sort" class="headerlink" title="1.3 æ’å…¥æ’åº (Insertion Sort)"></a>1.3 æ’å…¥æ’åº (Insertion Sort)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">insertionSort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">key</span> <span class="operator">=</span> arr[i], j = i - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (j &gt;= <span class="number">0</span> &amp;&amp; arr[j] &gt; key) &#123;</span><br><span class="line">            arr[j+<span class="number">1</span>] = arr[j];</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[j+<span class="number">1</span>] = key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-4-å½’å¹¶æ’åº-Merge-Sort"><a href="#1-4-å½’å¹¶æ’åº-Merge-Sort" class="headerlink" title="1.4 å½’å¹¶æ’åº (Merge Sort)"></a>1.4 å½’å¹¶æ’åº (Merge Sort)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">mergeSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (l &gt;= r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (l + r) / <span class="number">2</span>;</span><br><span class="line">    mergeSort(arr, l, mid);</span><br><span class="line">    mergeSort(arr, mid + <span class="number">1</span>, r);</span><br><span class="line">    merge(arr, l, mid, r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> l, <span class="type">int</span> mid, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] tmp = <span class="keyword">new</span> <span class="title class_">int</span>[r - l + <span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l, j = mid + <span class="number">1</span>, k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r) &#123;</span><br><span class="line">        tmp[k++] = (arr[i] &lt;= arr[j]) ? arr[i++] : arr[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= mid) tmp[k++] = arr[i++];</span><br><span class="line">    <span class="keyword">while</span> (j &lt;= r) tmp[k++] = arr[j++];</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; tmp.length; i++) arr[l + i] = tmp[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-5-å¿«é€Ÿæ’åº-Quick-Sort"><a href="#1-5-å¿«é€Ÿæ’åº-Quick-Sort" class="headerlink" title="1.5 å¿«é€Ÿæ’åº (Quick Sort)"></a>1.5 å¿«é€Ÿæ’åº (Quick Sort)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (l &gt;= r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> partition(arr, l, r);</span><br><span class="line">    quickSort(arr, l, p - <span class="number">1</span>);</span><br><span class="line">    quickSort(arr, p + <span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[r], i = l - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> l; j &lt; r; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[j] &lt;= pivot) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> arr[i]; arr[i] = arr[j]; arr[j] = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> arr[i+<span class="number">1</span>]; arr[i+<span class="number">1</span>] = arr[r]; arr[r] = tmp;</span><br><span class="line">    <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-æŸ¥æ‰¾ç®—æ³•-Searching"><a href="#2-æŸ¥æ‰¾ç®—æ³•-Searching" class="headerlink" title="2. æŸ¥æ‰¾ç®—æ³• (Searching)"></a>2. æŸ¥æ‰¾ç®—æ³• (Searching)</h2><h3 id="2-1-é¡ºåºæŸ¥æ‰¾-Linear-Search"><a href="#2-1-é¡ºåºæŸ¥æ‰¾-Linear-Search" class="headerlink" title="2.1 é¡ºåºæŸ¥æ‰¾ (Linear Search)"></a>2.1 é¡ºåºæŸ¥æ‰¾ (Linear Search)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">linearSearch</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] == target) <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-äºŒåˆ†æŸ¥æ‰¾-Binary-Search-ï¼ˆæ•°ç»„æœ‰åºï¼‰"><a href="#2-2-äºŒåˆ†æŸ¥æ‰¾-Binary-Search-ï¼ˆæ•°ç»„æœ‰åºï¼‰" class="headerlink" title="2.2 äºŒåˆ†æŸ¥æ‰¾ (Binary Search)ï¼ˆæ•°ç»„æœ‰åºï¼‰"></a>2.2 äºŒåˆ†æŸ¥æ‰¾ (Binary Search)ï¼ˆæ•°ç»„æœ‰åºï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = arr.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + (r - l) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (arr[mid] == target) <span class="keyword">return</span> mid;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &lt; target) l = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-åŒæŒ‡é’ˆç®—æ³•-Two-Pointers"><a href="#3-åŒæŒ‡é’ˆç®—æ³•-Two-Pointers" class="headerlink" title="3. åŒæŒ‡é’ˆç®—æ³• (Two Pointers)"></a>3. åŒæŒ‡é’ˆç®—æ³• (Two Pointers)</h2><h3 id="3-1-åè½¬æ•°ç»„"><a href="#3-1-åè½¬æ•°ç»„" class="headerlink" title="3.1 åè½¬æ•°ç»„"></a>3.1 åè½¬æ•°ç»„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reverse</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = arr.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> arr[l]; arr[l] = arr[r]; arr[r] = tmp;</span><br><span class="line">        l++; r--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-ä¸‰æ•°ä¹‹å’Œ-LeetCode-15"><a href="#3-2-ä¸‰æ•°ä¹‹å’Œ-LeetCode-15" class="headerlink" title="3.2 ä¸‰æ•°ä¹‹å’Œ (LeetCode 15)"></a>3.2 ä¸‰æ•°ä¹‹å’Œ (LeetCode 15)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">threeSum</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    Arrays.sort(nums);</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length - <span class="number">2</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i-<span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> i+<span class="number">1</span>, r = nums.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> nums[i] + nums[l] + nums[r];</span><br><span class="line">            <span class="keyword">if</span> (sum == <span class="number">0</span>) &#123;</span><br><span class="line">                res.add(Arrays.asList(nums[i], nums[l], nums[r]));</span><br><span class="line">                <span class="keyword">while</span> (l &lt; r &amp;&amp; nums[l] == nums[l+<span class="number">1</span>]) l++;</span><br><span class="line">                <span class="keyword">while</span> (l &lt; r &amp;&amp; nums[r] == nums[r-<span class="number">1</span>]) r--;</span><br><span class="line">                l++; r--;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; <span class="number">0</span>) l++;</span><br><span class="line">            <span class="keyword">else</span> r--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="4-åŠ¨æ€è§„åˆ’-Dynamic-Programming"><a href="#4-åŠ¨æ€è§„åˆ’-Dynamic-Programming" class="headerlink" title="4. åŠ¨æ€è§„åˆ’ (Dynamic Programming)"></a>4. åŠ¨æ€è§„åˆ’ (Dynamic Programming)</h2><h3 id="4-1-æ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#4-1-æ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="4.1 æ–æ³¢é‚£å¥‘æ•°åˆ—"></a>4.1 æ–æ³¢é‚£å¥‘æ•°åˆ—</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fib</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> n;</span><br><span class="line">    <span class="type">int</span>[] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">0</span>; dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; i++) dp[i] = dp[i-<span class="number">1</span>] + dp[i-<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2-çˆ¬æ¥¼æ¢¯-LeetCode-70"><a href="#4-2-çˆ¬æ¥¼æ¢¯-LeetCode-70" class="headerlink" title="4.2 çˆ¬æ¥¼æ¢¯ (LeetCode 70)"></a>4.2 çˆ¬æ¥¼æ¢¯ (LeetCode 70)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">2</span>) <span class="keyword">return</span> n;</span><br><span class="line">    <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>, b = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> a + b;</span><br><span class="line">        a = b; b = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-3-æœ€é•¿å…¬å…±å­åºåˆ—-LCS"><a href="#4-3-æœ€é•¿å…¬å…±å­åºåˆ—-LCS" class="headerlink" title="4.3 æœ€é•¿å…¬å…±å­åºåˆ— (LCS)"></a>4.3 æœ€é•¿å…¬å…±å­åºåˆ— (LCS)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">lcs</span><span class="params">(String s1, String s2)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> s1.length(), n = s2.length();</span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[m+<span class="number">1</span>][n+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s1.charAt(i-<span class="number">1</span>) == s2.charAt(j-<span class="number">1</span>))</span><br><span class="line">                dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                dp[i][j] = Math.max(dp[i-<span class="number">1</span>][j], dp[i][j-<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[m][n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="5-è´ªå¿ƒç®—æ³•-Greedy"><a href="#5-è´ªå¿ƒç®—æ³•-Greedy" class="headerlink" title="5. è´ªå¿ƒç®—æ³• (Greedy)"></a>5. è´ªå¿ƒç®—æ³• (Greedy)</h2><h3 id="5-1-è·³è·ƒæ¸¸æˆ-LeetCode-55"><a href="#5-1-è·³è·ƒæ¸¸æˆ-LeetCode-55" class="headerlink" title="5.1 è·³è·ƒæ¸¸æˆ (LeetCode 55)"></a>5.1 è·³è·ƒæ¸¸æˆ (LeetCode 55)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">canJump</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">farthest</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; farthest) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        farthest = Math.max(farthest, i + nums[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="6-åˆ†æ²»ç®—æ³•-Divide-Conquer"><a href="#6-åˆ†æ²»ç®—æ³•-Divide-Conquer" class="headerlink" title="6. åˆ†æ²»ç®—æ³• (Divide &amp; Conquer)"></a>6. åˆ†æ²»ç®—æ³• (Divide &amp; Conquer)</h2><h3 id="6-1-å½’å¹¶æ’åº-è§ä¸Š"><a href="#6-1-å½’å¹¶æ’åº-è§ä¸Š" class="headerlink" title="6.1 å½’å¹¶æ’åº (è§ä¸Š)"></a>6.1 å½’å¹¶æ’åº (è§ä¸Š)</h3><h3 id="6-2-å¿«é€Ÿæ’åº-è§ä¸Š"><a href="#6-2-å¿«é€Ÿæ’åº-è§ä¸Š" class="headerlink" title="6.2 å¿«é€Ÿæ’åº (è§ä¸Š)"></a>6.2 å¿«é€Ÿæ’åº (è§ä¸Š)</h3><hr><h2 id="7-å›æº¯ç®—æ³•-Backtracking"><a href="#7-å›æº¯ç®—æ³•-Backtracking" class="headerlink" title="7. å›æº¯ç®—æ³• (Backtracking)"></a>7. å›æº¯ç®—æ³• (Backtracking)</h2><h3 id="7-1-å…¨æ’åˆ—-LeetCode-46"><a href="#7-1-å…¨æ’åˆ—-LeetCode-46" class="headerlink" title="7.1 å…¨æ’åˆ— (LeetCode 46)"></a>7.1 å…¨æ’åˆ— (LeetCode 46)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">permute</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    backtrack(nums, <span class="keyword">new</span> <span class="title class_">boolean</span>[nums.length], <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(), res);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">backtrack</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">boolean</span>[] used, List&lt;Integer&gt; path, List&lt;List&lt;Integer&gt;&gt; res)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (path.size() == nums.length) &#123;</span><br><span class="line">        res.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(path));</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (used[i]) <span class="keyword">continue</span>;</span><br><span class="line">        used[i] = <span class="literal">true</span>;</span><br><span class="line">        path.add(nums[i]);</span><br><span class="line">        backtrack(nums, used, path, res);</span><br><span class="line">        path.remove(path.size()-<span class="number">1</span>);</span><br><span class="line">        used[i] = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="8-å›¾ç®—æ³•-Graph-Algorithms"><a href="#8-å›¾ç®—æ³•-Graph-Algorithms" class="headerlink" title="8. å›¾ç®—æ³• (Graph Algorithms)"></a>8. å›¾ç®—æ³• (Graph Algorithms)</h2><h3 id="8-1-BFSï¼ˆæœ€çŸ­è·¯å¾„ï¼‰"><a href="#8-1-BFSï¼ˆæœ€çŸ­è·¯å¾„ï¼‰" class="headerlink" title="8.1 BFSï¼ˆæœ€çŸ­è·¯å¾„ï¼‰"></a>8.1 BFSï¼ˆæœ€çŸ­è·¯å¾„ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bfs</span><span class="params">(Map&lt;Integer, List&lt;Integer&gt;&gt; graph, <span class="type">int</span> start)</span> &#123;</span><br><span class="line">    Queue&lt;Integer&gt; q = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    Set&lt;Integer&gt; visited = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    q.add(start); visited.add(start);</span><br><span class="line">    <span class="keyword">while</span> (!q.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">node</span> <span class="operator">=</span> q.poll();</span><br><span class="line">        System.out.print(node + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> nei : graph.getOrDefault(node, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;())) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!visited.contains(nei)) &#123;</span><br><span class="line">                visited.add(nei);</span><br><span class="line">                q.add(nei);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-2-DFS"><a href="#8-2-DFS" class="headerlink" title="8.2 DFS"></a>8.2 DFS</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(Map&lt;Integer, List&lt;Integer&gt;&gt; graph, <span class="type">int</span> start, Set&lt;Integer&gt; visited)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (visited.contains(start)) <span class="keyword">return</span>;</span><br><span class="line">    visited.add(start);</span><br><span class="line">    System.out.print(start + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> nei : graph.getOrDefault(start, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;())) &#123;</span><br><span class="line">        dfs(graph, nei, visited);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-3-Dijkstra-æœ€çŸ­è·¯å¾„"><a href="#8-3-Dijkstra-æœ€çŸ­è·¯å¾„" class="headerlink" title="8.3 Dijkstra æœ€çŸ­è·¯å¾„"></a>8.3 Dijkstra æœ€çŸ­è·¯å¾„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] dijkstra(<span class="type">int</span>[][] graph, <span class="type">int</span> src) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> graph.length;</span><br><span class="line">    <span class="type">int</span>[] dist = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="type">boolean</span>[] visited = <span class="keyword">new</span> <span class="title class_">boolean</span>[n];</span><br><span class="line">    Arrays.fill(dist, Integer.MAX_VALUE);</span><br><span class="line">    dist[src] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">u</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!visited[j] &amp;&amp; (u == -<span class="number">1</span> || dist[j] &lt; dist[u])) u = j;</span><br><span class="line">        &#125;</span><br><span class="line">        visited[u] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> <span class="number">0</span>; v &lt; n; v++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (graph[u][v] != <span class="number">0</span> &amp;&amp; dist[u] + graph[u][v] &lt; dist[v]) &#123;</span><br><span class="line">                dist[v] = dist[u] + graph[u][v];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dist;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;h1 id=&quot;ğŸ”¥-å¸¸è§ç®—æ³•åˆ†ç±»-Javaå®ç°&quot;&gt;&lt;a href=&quot;#ğŸ”¥-å¸¸è§ç®—æ³•åˆ†ç±»-Javaå®ç°&quot; class=&quot;headerlink&quot; title=&quot;ğŸ”¥ å¸¸è§ç®—æ³•åˆ†ç±» + Javaå®ç°&quot;&gt;&lt;/a&gt;ğŸ”¥ å¸¸è§ç®—æ³•åˆ†ç±» + Javaå®ç°&lt;/h1&gt;&lt;hr&gt;
&lt;h2</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="http://example.com/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="ç®—æ³•" scheme="http://example.com/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>é¢˜å•</title>
    <link href="http://example.com/2025/09/11/%E9%A2%98%E5%8D%95/"/>
    <id>http://example.com/2025/09/11/%E9%A2%98%E5%8D%95/</id>
    <published>2025-09-11T10:29:28.000Z</published>
    <updated>2025-09-22T04:31:36.223Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="ğŸ”¹-æ•°ç»„ï¼ˆArrayï¼‰"><a href="#ğŸ”¹-æ•°ç»„ï¼ˆArrayï¼‰" class="headerlink" title="ğŸ”¹ æ•°ç»„ï¼ˆArrayï¼‰"></a>ğŸ”¹ æ•°ç»„ï¼ˆArrayï¼‰</h2><h3 id="1-ä¸¤æ•°ä¹‹å’Œ"><a href="#1-ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="1. ä¸¤æ•°ä¹‹å’Œ"></a>1. ä¸¤æ•°ä¹‹å’Œ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">diff</span> <span class="operator">=</span> target - nums[i];</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(diff)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;map.get(diff), i&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(nums[i], i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-æœ€å¤§å­æ•°ç»„å’Œï¼ˆKadane-ç®—æ³•ï¼‰"><a href="#2-æœ€å¤§å­æ•°ç»„å’Œï¼ˆKadane-ç®—æ³•ï¼‰" class="headerlink" title="2. æœ€å¤§å­æ•°ç»„å’Œï¼ˆKadane ç®—æ³•ï¼‰"></a>2. æœ€å¤§å­æ•°ç»„å’Œï¼ˆKadane ç®—æ³•ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSubArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> nums[<span class="number">0</span>], cur = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        cur = Math.max(nums[i], cur + nums[i]);</span><br><span class="line">        max = Math.max(max, cur);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”¹-é“¾è¡¨ï¼ˆLinked-Listï¼‰"><a href="#ğŸ”¹-é“¾è¡¨ï¼ˆLinked-Listï¼‰" class="headerlink" title="ğŸ”¹ é“¾è¡¨ï¼ˆLinked Listï¼‰"></a>ğŸ”¹ é“¾è¡¨ï¼ˆLinked Listï¼‰</h2><h3 id="1-åè½¬é“¾è¡¨"><a href="#1-åè½¬é“¾è¡¨" class="headerlink" title="1. åè½¬é“¾è¡¨"></a>1. åè½¬é“¾è¡¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> <span class="literal">null</span>, cur = head;</span><br><span class="line">    <span class="keyword">while</span> (cur != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">next</span> <span class="operator">=</span> cur.next;</span><br><span class="line">        cur.next = prev;</span><br><span class="line">        prev = cur;</span><br><span class="line">        cur = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> prev;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰"><a href="#2-åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰" class="headerlink" title="2. åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰"></a>2. åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasCycle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head, fast = head;</span><br><span class="line">    <span class="keyword">while</span> (fast != <span class="literal">null</span> &amp;&amp; fast.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        slow = slow.next;</span><br><span class="line">        fast = fast.next.next;</span><br><span class="line">        <span class="keyword">if</span> (slow == fast) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”¹-æ ˆ-é˜Ÿåˆ—"><a href="#ğŸ”¹-æ ˆ-é˜Ÿåˆ—" class="headerlink" title="ğŸ”¹ æ ˆ &#x2F; é˜Ÿåˆ—"></a>ğŸ”¹ æ ˆ &#x2F; é˜Ÿåˆ—</h2><h3 id="1-æœ‰æ•ˆæ‹¬å·"><a href="#1-æœ‰æ•ˆæ‹¬å·" class="headerlink" title="1. æœ‰æ•ˆæ‹¬å·"></a>1. æœ‰æ•ˆæ‹¬å·</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    Stack&lt;Character&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> c : s.toCharArray()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">&#x27;(&#x27;</span>) stack.push(<span class="string">&#x27;)&#x27;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;[&#x27;</span>) stack.push(<span class="string">&#x27;]&#x27;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;&#123;&#x27;</span>) stack.push(<span class="string">&#x27;&#125;&#x27;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (stack.isEmpty() || stack.pop() != c) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-ç”¨æ ˆå®ç°é˜Ÿåˆ—"><a href="#2-ç”¨æ ˆå®ç°é˜Ÿåˆ—" class="headerlink" title="2. ç”¨æ ˆå®ç°é˜Ÿåˆ—"></a>2. ç”¨æ ˆå®ç°é˜Ÿåˆ—</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyQueue</span> &#123;</span><br><span class="line">    Stack&lt;Integer&gt; in = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    Stack&lt;Integer&gt; out = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123; in.push(x); &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123; peek(); <span class="keyword">return</span> out.pop(); &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (out.isEmpty()) <span class="keyword">while</span> (!in.isEmpty()) out.push(in.pop());</span><br><span class="line">        <span class="keyword">return</span> out.peek();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123; <span class="keyword">return</span> in.isEmpty() &amp;&amp; out.isEmpty(); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”¹-äºŒå‰æ ‘"><a href="#ğŸ”¹-äºŒå‰æ ‘" class="headerlink" title="ğŸ”¹ äºŒå‰æ ‘"></a>ğŸ”¹ äºŒå‰æ ‘</h2><h3 id="1-äºŒå‰æ ‘çš„éå†ï¼ˆé€’å½’-è¿­ä»£ï¼‰"><a href="#1-äºŒå‰æ ‘çš„éå†ï¼ˆé€’å½’-è¿­ä»£ï¼‰" class="headerlink" title="1. äºŒå‰æ ‘çš„éå†ï¼ˆé€’å½’ &amp; è¿­ä»£ï¼‰"></a>1. äºŒå‰æ ‘çš„éå†ï¼ˆé€’å½’ &amp; è¿­ä»£ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‰åºéå†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">preorder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    System.out.print(root.val + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    preorder(root.left);</span><br><span class="line">    preorder(root.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å±‚åºéå†</span></span><br><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">levelOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> res;</span><br><span class="line">    Queue&lt;TreeNode&gt; q = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    q.offer(root);</span><br><span class="line">    <span class="keyword">while</span> (!q.isEmpty()) &#123;</span><br><span class="line">        List&lt;Integer&gt; level = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> q.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> q.poll();</span><br><span class="line">            level.add(node.val);</span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="literal">null</span>) q.offer(node.left);</span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="literal">null</span>) q.offer(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">        res.add(level);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-éªŒè¯äºŒå‰æœç´¢æ ‘"><a href="#2-éªŒè¯äºŒå‰æœç´¢æ ‘" class="headerlink" title="2. éªŒè¯äºŒå‰æœç´¢æ ‘"></a>2. éªŒè¯äºŒå‰æœç´¢æ ‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> helper(root, Long.MIN_VALUE, Long.MAX_VALUE);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">helper</span><span class="params">(TreeNode node, <span class="type">long</span> min, <span class="type">long</span> max)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (node.val &lt;= min || node.val &gt;= max) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> helper(node.left, min, node.val) &amp;&amp; helper(node.right, node.val, max);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”¹-å †-ä¼˜å…ˆé˜Ÿåˆ—"><a href="#ğŸ”¹-å †-ä¼˜å…ˆé˜Ÿåˆ—" class="headerlink" title="ğŸ”¹ å † &#x2F; ä¼˜å…ˆé˜Ÿåˆ—"></a>ğŸ”¹ å † &#x2F; ä¼˜å…ˆé˜Ÿåˆ—</h2><h3 id="1-æ•°ç»„ä¸­çš„ç¬¬-K-å¤§å…ƒç´ "><a href="#1-æ•°ç»„ä¸­çš„ç¬¬-K-å¤§å…ƒç´ " class="headerlink" title="1. æ•°ç»„ä¸­çš„ç¬¬ K å¤§å…ƒç´ "></a>1. æ•°ç»„ä¸­çš„ç¬¬ K å¤§å…ƒç´ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findKthLargest</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    PriorityQueue&lt;Integer&gt; pq = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> n : nums) &#123;</span><br><span class="line">        pq.offer(n);</span><br><span class="line">        <span class="keyword">if</span> (pq.size() &gt; k) pq.poll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pq.peek();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”¹-å›¾"><a href="#ğŸ”¹-å›¾" class="headerlink" title="ğŸ”¹ å›¾"></a>ğŸ”¹ å›¾</h2><h3 id="1-å›¾çš„-BFS"><a href="#1-å›¾çš„-BFS" class="headerlink" title="1. å›¾çš„ BFS"></a>1. å›¾çš„ BFS</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">bfs</span><span class="params">(<span class="type">int</span> start, List&lt;List&lt;Integer&gt;&gt; graph)</span> &#123;</span><br><span class="line">    <span class="type">boolean</span>[] visited = <span class="keyword">new</span> <span class="title class_">boolean</span>[graph.size()];</span><br><span class="line">    Queue&lt;Integer&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    queue.offer(start);</span><br><span class="line">    visited[start] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">        System.out.print(node + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> nei : graph.get(node)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!visited[nei]) &#123;</span><br><span class="line">                visited[nei] = <span class="literal">true</span>;</span><br><span class="line">                queue.offer(nei);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-å²›å±¿æ•°é‡ï¼ˆDFSï¼‰"><a href="#2-å²›å±¿æ•°é‡ï¼ˆDFSï¼‰" class="headerlink" title="2. å²›å±¿æ•°é‡ï¼ˆDFSï¼‰"></a>2. å²›å±¿æ•°é‡ï¼ˆDFSï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numIslands</span><span class="params">(<span class="type">char</span>[][] grid)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; grid.length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][j] == <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">                dfs(grid, i, j);</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">char</span>[][] grid, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">0</span> || j &lt; <span class="number">0</span> || i &gt;= grid.length || j &gt;= grid[<span class="number">0</span>].length || grid[i][j] == <span class="string">&#x27;0&#x27;</span>) <span class="keyword">return</span>;</span><br><span class="line">    grid[i][j] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    dfs(grid, i + <span class="number">1</span>, j);</span><br><span class="line">    dfs(grid, i - <span class="number">1</span>, j);</span><br><span class="line">    dfs(grid, i, j + <span class="number">1</span>);</span><br><span class="line">    dfs(grid, i, j - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”¹-æ’åºç®—æ³•"><a href="#ğŸ”¹-æ’åºç®—æ³•" class="headerlink" title="ğŸ”¹ æ’åºç®—æ³•"></a>ğŸ”¹ æ’åºç®—æ³•</h2><h3 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (left &gt;= right) <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[left], i = left, j = right;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j &amp;&amp; arr[j] &gt;= pivot) j--;</span><br><span class="line">        arr[i] = arr[j];</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j &amp;&amp; arr[i] &lt;= pivot) i++;</span><br><span class="line">        arr[j] = arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    arr[i] = pivot;</span><br><span class="line">    quickSort(arr, left, i - <span class="number">1</span>);</span><br><span class="line">    quickSort(arr, i + <span class="number">1</span>, right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”¹-åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰"><a href="#ğŸ”¹-åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰" class="headerlink" title="ğŸ”¹ åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰"></a>ğŸ”¹ åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰</h2><h3 id="1-çˆ¬æ¥¼æ¢¯ï¼ˆæ–æ³¢é‚£å¥‘ï¼‰"><a href="#1-çˆ¬æ¥¼æ¢¯ï¼ˆæ–æ³¢é‚£å¥‘ï¼‰" class="headerlink" title="1. çˆ¬æ¥¼æ¢¯ï¼ˆæ–æ³¢é‚£å¥‘ï¼‰"></a>1. çˆ¬æ¥¼æ¢¯ï¼ˆæ–æ³¢é‚£å¥‘ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">2</span>) <span class="keyword">return</span> n;</span><br><span class="line">    <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>, b = <span class="number">2</span>, res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        res = a + b;</span><br><span class="line">        a = b;</span><br><span class="line">        b = res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰"><a href="#2-æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰" class="headerlink" title="2. æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰"></a>2. æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestCommonSubsequence</span><span class="params">(String text1, String text2)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> text1.length(), n = text2.length();</span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[m + <span class="number">1</span>][n + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (text1.charAt(i - <span class="number">1</span>) == text2.charAt(j - <span class="number">1</span>)) &#123;</span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                dp[i][j] = Math.max(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[m][n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="é«˜çº§"><a href="#é«˜çº§" class="headerlink" title="é«˜çº§"></a>é«˜çº§</h1><blockquote><p>å…ˆç»™ä¸¤ä¸ªé€šç”¨è¾…åŠ©ç±»ï¼ˆå¾ˆå¤šé¢˜ä¼šç”¨åˆ°ï¼‰ï¼š<code>ListNode</code>ï¼ˆé“¾è¡¨èŠ‚ç‚¹ï¼‰å’Œ <code>TreeNode</code>ï¼ˆäºŒå‰æ ‘èŠ‚ç‚¹ï¼‰ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€šç”¨è¾…åŠ©ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    ListNode next;</span><br><span class="line">    ListNode(<span class="type">int</span> v) &#123; val = v; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    TreeNode left, right;</span><br><span class="line">    TreeNode(<span class="type">int</span> v) &#123; val = v; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç›®å½•ï¼ˆå¿«é€Ÿè·³è½¬ï¼‰"><a href="#ç›®å½•ï¼ˆå¿«é€Ÿè·³è½¬ï¼‰" class="headerlink" title="ç›®å½•ï¼ˆå¿«é€Ÿè·³è½¬ï¼‰"></a>ç›®å½•ï¼ˆå¿«é€Ÿè·³è½¬ï¼‰</h1><ol><li>æ•°ç»„ &#x2F; åŒæŒ‡é’ˆ &#x2F; æ»‘åŠ¨çª—å£ &#x2F; å‰ç¼€å’Œ</li><li>æ’åº &#x2F; é€‰æ‹©ï¼ˆQuickselectï¼‰</li><li>é“¾è¡¨è¿›é˜¶</li><li>æ ˆè¿›é˜¶ &#x2F; å•è°ƒæ ˆ</li><li>é˜Ÿåˆ— &#x2F; åŒç«¯é˜Ÿåˆ—ï¼ˆæ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼‰</li><li>å †ï¼ˆåˆå¹¶ K è¡¨ã€æ•°æ®æµä¸­ä½æ•°ï¼‰</li><li>æ ‘ï¼ˆåºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–ã€LCAã€æœ€å¤§è·¯å¾„å’Œï¼‰</li><li>å›¾ï¼ˆæ‹“æ‰‘ã€Dijkstraã€Bellman-Fordã€å¹¶æŸ¥é›†ï¼‰</li><li>åŠ¨æ€è§„åˆ’ï¼ˆLISã€èƒŒåŒ…ã€DP çŠ¶æ€å‹ç¼©ç­‰ï¼‰</li><li>å›æº¯ï¼ˆN çš‡åã€ç»„åˆ&#x2F;å­é›†å˜ä½“ï¼‰</li><li>å­—ç¬¦ä¸²ï¼ˆKMPã€Rabin-Karpã€æœ€å°è¦†ç›–å­ä¸²ï¼‰</li><li>å­—å…¸æ ‘ Trie</li><li>çº¿æ®µæ ‘ &#x2F; æ ‘çŠ¶æ•°ç»„ï¼ˆFenwickï¼‰</li><li>ä½è¿ç®— &#x2F; æ•°å­¦å°æŠ€å·§</li><li>è®¾è®¡é¢˜ï¼ˆLRU Cacheï¼‰</li></ol><hr><h1 id="1-æ•°ç»„-åŒæŒ‡é’ˆ-æ»‘åŠ¨çª—å£-å‰ç¼€å’Œ"><a href="#1-æ•°ç»„-åŒæŒ‡é’ˆ-æ»‘åŠ¨çª—å£-å‰ç¼€å’Œ" class="headerlink" title="1. æ•°ç»„ &#x2F; åŒæŒ‡é’ˆ &#x2F; æ»‘åŠ¨çª—å£ &#x2F; å‰ç¼€å’Œ"></a>1. æ•°ç»„ &#x2F; åŒæŒ‡é’ˆ &#x2F; æ»‘åŠ¨çª—å£ &#x2F; å‰ç¼€å’Œ</h1><h3 id="1-1-æœ€é•¿ä¸å«é‡å¤å­—ç¬¦çš„å­ä¸²ï¼ˆLeetCode-3ï¼‰"><a href="#1-1-æœ€é•¿ä¸å«é‡å¤å­—ç¬¦çš„å­ä¸²ï¼ˆLeetCode-3ï¼‰" class="headerlink" title="1.1 æœ€é•¿ä¸å«é‡å¤å­—ç¬¦çš„å­ä¸²ï¼ˆLeetCode 3ï¼‰"></a>1.1 æœ€é•¿ä¸å«é‡å¤å­—ç¬¦çš„å­ä¸²ï¼ˆLeetCode 3ï¼‰</h3><p>æ€è·¯ï¼šæ»‘åŠ¨çª—å£ + å“ˆå¸Œè¡¨è®°å½•å­—ç¬¦ä¸Šæ¬¡å‡ºç°ä½ç½®ã€‚<br> å¤æ‚åº¦ï¼šO(n) æ—¶é—´ï¼ŒO(min(n, charset)) ç©ºé—´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lengthOfLongestSubstring</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] last = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">128</span>]; <span class="comment">// ASCII</span></span><br><span class="line">    Arrays.fill(last, -<span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> <span class="number">0</span>, maxLen = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> s.charAt(i);</span><br><span class="line">        start = Math.max(start, last[c] + <span class="number">1</span>);</span><br><span class="line">        maxLen = Math.max(maxLen, i - start + <span class="number">1</span>);</span><br><span class="line">        last[c] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxLen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-2-æœ€å°è¦†ç›–å­ä¸²ï¼ˆLeetCode-76ï¼‰"><a href="#1-2-æœ€å°è¦†ç›–å­ä¸²ï¼ˆLeetCode-76ï¼‰" class="headerlink" title="1.2 æœ€å°è¦†ç›–å­ä¸²ï¼ˆLeetCode 76ï¼‰"></a>1.2 æœ€å°è¦†ç›–å­ä¸²ï¼ˆLeetCode 76ï¼‰</h3><p>æ€è·¯ï¼šæ»‘åŠ¨çª—å£ + è®¡æ•°è¡¨ï¼›éœ€è¦æ»¡è¶³æ¡ä»¶æ—¶æ”¶ç¼©å·¦è¾¹ç•Œã€‚<br> å¤æ‚åº¦ï¼šO(n)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">minWindow</span><span class="params">(String s, String t)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s.length() &lt; t.length()) <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] need = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">128</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> c : t.toCharArray()) need[c]++;</span><br><span class="line">    <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>, right = <span class="number">0</span>, required = t.length(), minLen = Integer.MAX_VALUE, start = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (right &lt; s.length()) &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> s.charAt(right++);</span><br><span class="line">        <span class="keyword">if</span> (need[c]-- &gt; <span class="number">0</span>) required--;</span><br><span class="line">        <span class="keyword">while</span> (required == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (right - left &lt; minLen) &#123; minLen = right - left; start = left; &#125;</span><br><span class="line">            <span class="type">char</span> <span class="variable">d</span> <span class="operator">=</span> s.charAt(left++);</span><br><span class="line">            <span class="keyword">if</span> (need[d]++ &gt;= <span class="number">0</span>) required++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minLen == Integer.MAX_VALUE ? <span class="string">&quot;&quot;</span> : s.substring(start, start + minLen);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-3-å­æ•°ç»„å’Œç­‰äº-kï¼ˆLeetCode-560ï¼‰"><a href="#1-3-å­æ•°ç»„å’Œç­‰äº-kï¼ˆLeetCode-560ï¼‰" class="headerlink" title="1.3 å­æ•°ç»„å’Œç­‰äº kï¼ˆLeetCode 560ï¼‰"></a>1.3 å­æ•°ç»„å’Œç­‰äº kï¼ˆLeetCode 560ï¼‰</h3><p>æ€è·¯ï¼šå‰ç¼€å’Œ + å“ˆå¸Œè¡¨è®°å½•ä¹‹å‰å‡ºç°çš„å‰ç¼€å’Œé¢‘æ¬¡ã€‚<br> å¤æ‚åº¦ï¼šO(n)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">subarraySum</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; cnt = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    cnt.put(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>, res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> x : nums) &#123;</span><br><span class="line">        sum += x;</span><br><span class="line">        res += cnt.getOrDefault(sum - k, <span class="number">0</span>);</span><br><span class="line">        cnt.put(sum, cnt.getOrDefault(sum, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-4-ä¸‰æ•°ä¹‹å’Œæœ€æ¥è¿‘ï¼ˆLeetCode-16ï¼‰"><a href="#1-4-ä¸‰æ•°ä¹‹å’Œæœ€æ¥è¿‘ï¼ˆLeetCode-16ï¼‰" class="headerlink" title="1.4 ä¸‰æ•°ä¹‹å’Œæœ€æ¥è¿‘ï¼ˆLeetCode 16ï¼‰"></a>1.4 ä¸‰æ•°ä¹‹å’Œæœ€æ¥è¿‘ï¼ˆLeetCode 16ï¼‰</h3><p>æ€è·¯ï¼šæ’åº + åŒæŒ‡é’ˆã€‚å¤æ‚åº¦ O(n^2)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">threeSumClosest</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    Arrays.sort(nums);</span><br><span class="line">    <span class="type">int</span> <span class="variable">closest</span> <span class="operator">=</span> nums[<span class="number">0</span>] + nums[<span class="number">1</span>] + nums[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length - <span class="number">2</span>; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> i + <span class="number">1</span>, r = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> nums[i] + nums[l] + nums[r];</span><br><span class="line">            <span class="keyword">if</span> (Math.abs(sum - target) &lt; Math.abs(closest - target)) closest = sum;</span><br><span class="line">            <span class="keyword">if</span> (sum &gt; target) r--;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; target) l++;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> target;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> closest;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="2-æ’åº-é€‰æ‹©-Quickselect"><a href="#2-æ’åº-é€‰æ‹©-Quickselect" class="headerlink" title="2. æ’åº &#x2F; é€‰æ‹© (Quickselect)"></a>2. æ’åº &#x2F; é€‰æ‹© (Quickselect)</h1><h3 id="2-1-Quickselectï¼šç¬¬-k-å°-ç¬¬-k-å¤§"><a href="#2-1-Quickselectï¼šç¬¬-k-å°-ç¬¬-k-å¤§" class="headerlink" title="2.1 Quickselectï¼šç¬¬ k å° &#x2F; ç¬¬ k å¤§"></a>2.1 Quickselectï¼šç¬¬ k å° &#x2F; ç¬¬ k å¤§</h3><p>æ€è·¯ï¼šç±»ä¼¼å¿«é€Ÿæ’åº partitionï¼ŒæœŸæœ›çº¿æ€§æ—¶é—´ã€‚<br> å¤æ‚åº¦ï¼šå¹³å‡ O(n)ï¼Œæœ€å O(n^2)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">quickSelect</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123; <span class="comment">// 1-based k-th smallest</span></span><br><span class="line">    <span class="keyword">return</span> quickSelect(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>, k - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">quickSelect</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (l == r) <span class="keyword">return</span> a[l];</span><br><span class="line">    <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> partition(a, l, r);</span><br><span class="line">    <span class="keyword">if</span> (k == pivot) <span class="keyword">return</span> a[k];</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (k &lt; pivot) <span class="keyword">return</span> quickSelect(a, l, pivot - <span class="number">1</span>, k);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> quickSelect(a, pivot + <span class="number">1</span>, r, k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">pivotVal</span> <span class="operator">=</span> a[r], i = l;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> l; j &lt; r; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[j] &lt;= pivotVal) swap(a, i++, j);</span><br><span class="line">    &#125;</span><br><span class="line">    swap(a, i, r);</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123; <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i]; a[i] = a[j]; a[j] = t; &#125;</span><br></pre></td></tr></table></figure><hr><h1 id="3-é“¾è¡¨è¿›é˜¶"><a href="#3-é“¾è¡¨è¿›é˜¶" class="headerlink" title="3. é“¾è¡¨è¿›é˜¶"></a>3. é“¾è¡¨è¿›é˜¶</h1><h3 id="3-1-åè½¬-k-ä¸ªä¸€ç»„ï¼ˆLeetCode-25ï¼‰"><a href="#3-1-åè½¬-k-ä¸ªä¸€ç»„ï¼ˆLeetCode-25ï¼‰" class="headerlink" title="3.1 åè½¬ k ä¸ªä¸€ç»„ï¼ˆLeetCode 25ï¼‰"></a>3.1 åè½¬ k ä¸ªä¸€ç»„ï¼ˆLeetCode 25ï¼‰</h3><p>æ€è·¯ï¼šåˆ†æ®µåè½¬ã€‚å¤æ‚åº¦ O(n)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseKGroup</span><span class="params">(ListNode head, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">dummy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>), prev = dummy;</span><br><span class="line">    dummy.next = head;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">node</span> <span class="operator">=</span> prev;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; k &amp;&amp; node != <span class="literal">null</span>; i++) node = node.next;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">break</span>;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">tail</span> <span class="operator">=</span> prev.next, curr = tail.next;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; k; i++) &#123;</span><br><span class="line">            tail.next = curr.next;</span><br><span class="line">            curr.next = prev.next;</span><br><span class="line">            prev.next = curr;</span><br><span class="line">            curr = tail.next;</span><br><span class="line">        &#125;</span><br><span class="line">        prev = tail;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-é“¾è¡¨æ’åºï¼ˆå½’å¹¶æ’åºï¼ŒLeetCode-148ï¼‰"><a href="#3-2-é“¾è¡¨æ’åºï¼ˆå½’å¹¶æ’åºï¼ŒLeetCode-148ï¼‰" class="headerlink" title="3.2 é“¾è¡¨æ’åºï¼ˆå½’å¹¶æ’åºï¼ŒLeetCode 148ï¼‰"></a>3.2 é“¾è¡¨æ’åºï¼ˆå½’å¹¶æ’åºï¼ŒLeetCode 148ï¼‰</h3><p>æ€è·¯ï¼šé€’å½’åˆ†æ²»ï¼ŒO(n log n) æ—¶é—´ï¼ŒO(log n) é€’å½’æ ˆç©ºé—´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">sortList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) <span class="keyword">return</span> head;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head, fast = head.next;</span><br><span class="line">    <span class="keyword">while</span> (fast != <span class="literal">null</span> &amp;&amp; fast.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        slow = slow.next;</span><br><span class="line">        fast = fast.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">mid</span> <span class="operator">=</span> slow.next; slow.next = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> merge(sortList(head), sortList(mid));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> ListNode <span class="title function_">merge</span><span class="params">(ListNode a, ListNode b)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">dummy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>), p = dummy;</span><br><span class="line">    <span class="keyword">while</span> (a != <span class="literal">null</span> &amp;&amp; b != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a.val &lt; b.val) &#123; p.next = a; a = a.next; &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123; p.next = b; b = b.next; &#125;</span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line">    p.next = (a != <span class="literal">null</span>) ? a : b;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-ç¯çš„å…¥å£ï¼ˆLeetCode-142ï¼‰"><a href="#3-3-ç¯çš„å…¥å£ï¼ˆLeetCode-142ï¼‰" class="headerlink" title="3.3 ç¯çš„å…¥å£ï¼ˆLeetCode 142ï¼‰"></a>3.3 ç¯çš„å…¥å£ï¼ˆLeetCode 142ï¼‰</h3><p>æ€è·¯ï¼šFloyd å¿«æ…¢æŒ‡é’ˆï¼Œæ‰¾åˆ°ç›¸é‡ç‚¹åä»å¤´ä¸ç›¸é‡ç‚¹åŒæ­¥ç§»åŠ¨ã€‚å¤æ‚åº¦ O(n)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">detectCycle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head, fast = head;</span><br><span class="line">    <span class="keyword">while</span> (fast != <span class="literal">null</span> &amp;&amp; fast.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        slow = slow.next; fast = fast.next.next;</span><br><span class="line">        <span class="keyword">if</span> (slow == fast) &#123;</span><br><span class="line">            <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line">            <span class="keyword">while</span> (p != slow) &#123; p = p.next; slow = slow.next; &#125;</span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="4-æ ˆè¿›é˜¶-å•è°ƒæ ˆ"><a href="#4-æ ˆè¿›é˜¶-å•è°ƒæ ˆ" class="headerlink" title="4. æ ˆè¿›é˜¶ &#x2F; å•è°ƒæ ˆ"></a>4. æ ˆè¿›é˜¶ &#x2F; å•è°ƒæ ˆ</h1><h3 id="4-1-å•è°ƒæ ˆæ¨¡æ¿ï¼ˆè§£å†³æœ€è¿‘æ›´å¤§-æ›´å°å…ƒç´ ã€ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢ç­‰ï¼‰"><a href="#4-1-å•è°ƒæ ˆæ¨¡æ¿ï¼ˆè§£å†³æœ€è¿‘æ›´å¤§-æ›´å°å…ƒç´ ã€ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢ç­‰ï¼‰" class="headerlink" title="4.1 å•è°ƒæ ˆæ¨¡æ¿ï¼ˆè§£å†³æœ€è¿‘æ›´å¤§&#x2F;æ›´å°å…ƒç´ ã€ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢ç­‰ï¼‰"></a>4.1 å•è°ƒæ ˆæ¨¡æ¿ï¼ˆè§£å†³æœ€è¿‘æ›´å¤§&#x2F;æ›´å°å…ƒç´ ã€ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢ç­‰ï¼‰</h3><p>æ€è·¯ï¼šç»´æŠ¤å•è°ƒé€’å¢æˆ–é€’å‡æ ˆï¼ˆå­˜ä¸‹æ ‡ï¼‰ã€‚å¤æ‚åº¦ O(n)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥å¯»æ‰¾æ¯ä¸ªå…ƒç´ å³ä¾§ç¬¬ä¸€ä¸ªå¤§äºå®ƒçš„ä¸‹æ ‡ä¸ºä¾‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] nextGreaterIndices(<span class="type">int</span>[] arr) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> arr.length;</span><br><span class="line">    <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    Arrays.fill(res, -<span class="number">1</span>);</span><br><span class="line">    Deque&lt;Integer&gt; st = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (!st.isEmpty() &amp;&amp; arr[i] &gt; arr[st.peek()]) res[st.pop()] = i;</span><br><span class="line">        st.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2-é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ï¼ˆLeetCode-150ï¼‰"><a href="#4-2-é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ï¼ˆLeetCode-150ï¼‰" class="headerlink" title="4.2 é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ï¼ˆLeetCode 150ï¼‰"></a>4.2 é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ï¼ˆLeetCode 150ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">evalRPN</span><span class="params">(String[] tokens)</span> &#123;</span><br><span class="line">    Deque&lt;Integer&gt; st = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String t : tokens) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;+-*/&quot;</span>.contains(t)) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> st.pop(), a = st.pop();</span><br><span class="line">            <span class="keyword">switch</span> (t) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;+&quot;</span> : st.push(a + b); <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;-&quot;</span> : st.push(a - b); <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;*&quot;</span> : st.push(a * b); <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;/&quot;</span> : st.push(a / b); <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> st.push(Integer.parseInt(t));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> st.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="5-é˜Ÿåˆ—-åŒç«¯é˜Ÿåˆ—ï¼ˆæ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼‰"><a href="#5-é˜Ÿåˆ—-åŒç«¯é˜Ÿåˆ—ï¼ˆæ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼‰" class="headerlink" title="5. é˜Ÿåˆ— &#x2F; åŒç«¯é˜Ÿåˆ—ï¼ˆæ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼‰"></a>5. é˜Ÿåˆ— &#x2F; åŒç«¯é˜Ÿåˆ—ï¼ˆæ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼‰</h1><h3 id="5-1-æ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼ˆLeetCode-239ï¼‰"><a href="#5-1-æ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼ˆLeetCode-239ï¼‰" class="headerlink" title="5.1 æ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼ˆLeetCode 239ï¼‰"></a>5.1 æ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼ˆLeetCode 239ï¼‰</h3><p>æ€è·¯ï¼šç”¨åŒç«¯é˜Ÿåˆ—ç»´æŠ¤å½“å‰çª—å£çš„â€œå€™é€‰â€ä¸‹æ ‡ï¼ˆå•è°ƒé€’å‡ï¼‰ã€‚å¤æ‚åº¦ O(n)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] maxSlidingWindow(<span class="type">int</span>[] nums, <span class="type">int</span> k) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">    Deque&lt;Integer&gt; dq = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[n - k + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (!dq.isEmpty() &amp;&amp; dq.peekFirst() &lt; i - k + <span class="number">1</span>) dq.pollFirst();</span><br><span class="line">        <span class="keyword">while</span> (!dq.isEmpty() &amp;&amp; nums[dq.peekLast()] &lt; nums[i]) dq.pollLast();</span><br><span class="line">        dq.offerLast(i);</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= k - <span class="number">1</span>) res[i - k + <span class="number">1</span>] = nums[dq.peekFirst()];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="6-å †ï¼ˆPriorityQueueï¼‰"><a href="#6-å †ï¼ˆPriorityQueueï¼‰" class="headerlink" title="6. å †ï¼ˆPriorityQueueï¼‰"></a>6. å †ï¼ˆPriorityQueueï¼‰</h1><h3 id="6-1-åˆå¹¶-K-ä¸ªæœ‰åºé“¾è¡¨ï¼ˆLeetCode-23ï¼‰"><a href="#6-1-åˆå¹¶-K-ä¸ªæœ‰åºé“¾è¡¨ï¼ˆLeetCode-23ï¼‰" class="headerlink" title="6.1 åˆå¹¶ K ä¸ªæœ‰åºé“¾è¡¨ï¼ˆLeetCode 23ï¼‰"></a>6.1 åˆå¹¶ K ä¸ªæœ‰åºé“¾è¡¨ï¼ˆLeetCode 23ï¼‰</h3><p>æ€è·¯ï¼šæŠŠæ¯ä¸ªé“¾è¡¨å¤´æ”¾å…¥æœ€å°å †ï¼Œå¾ªç¯å¼¹å‡ºæœ€å°èŠ‚ç‚¹å¹¶æ¨è¿›ã€‚å¤æ‚åº¦ O(N log k)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">mergeKLists</span><span class="params">(ListNode[] lists)</span> &#123;</span><br><span class="line">    PriorityQueue&lt;ListNode&gt; pq = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a,b) -&gt; a.val - b.val);</span><br><span class="line">    <span class="keyword">for</span> (ListNode ln : lists) <span class="keyword">if</span> (ln != <span class="literal">null</span>) pq.offer(ln);</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">dummy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>), cur = dummy;</span><br><span class="line">    <span class="keyword">while</span> (!pq.isEmpty()) &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">node</span> <span class="operator">=</span> pq.poll();</span><br><span class="line">        cur.next = node; cur = cur.next;</span><br><span class="line">        <span class="keyword">if</span> (node.next != <span class="literal">null</span>) pq.offer(node.next);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-2-æ•°æ®æµä¸­ä½æ•°ï¼ˆMedianFinderï¼‰"><a href="#6-2-æ•°æ®æµä¸­ä½æ•°ï¼ˆMedianFinderï¼‰" class="headerlink" title="6.2 æ•°æ®æµä¸­ä½æ•°ï¼ˆMedianFinderï¼‰"></a>6.2 æ•°æ®æµä¸­ä½æ•°ï¼ˆMedianFinderï¼‰</h3><p>æ€è·¯ï¼šç»´æŠ¤ä¸¤ä¸ªå †ï¼ˆå¤§é¡¶å †ä¿å­˜è¾ƒå°ä¸€åŠï¼Œå°é¡¶å †ä¿å­˜è¾ƒå¤§ä¸€åŠï¼‰ã€‚å¤æ‚åº¦ add O(log n)ï¼ŒfindMedian O(1)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MedianFinder</span> &#123;</span><br><span class="line">    PriorityQueue&lt;Integer&gt; small = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a,b)-&gt;b-a); <span class="comment">// max-heap</span></span><br><span class="line">    PriorityQueue&lt;Integer&gt; large = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;(); <span class="comment">// min-heap</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addNum</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        small.offer(num);</span><br><span class="line">        large.offer(small.poll());</span><br><span class="line">        <span class="keyword">if</span> (small.size() &lt; large.size()) small.offer(large.poll());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">findMedian</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (small.size() &gt; large.size()) <span class="keyword">return</span> small.peek();</span><br><span class="line">        <span class="keyword">return</span> (small.peek() + large.peek()) / <span class="number">2.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="7-æ ‘é«˜çº§é¢˜"><a href="#7-æ ‘é«˜çº§é¢˜" class="headerlink" title="7. æ ‘é«˜çº§é¢˜"></a>7. æ ‘é«˜çº§é¢˜</h1><h3 id="7-1-äºŒå‰æ ‘åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼ˆLeetCode-297ï¼‰"><a href="#7-1-äºŒå‰æ ‘åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼ˆLeetCode-297ï¼‰" class="headerlink" title="7.1 äºŒå‰æ ‘åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼ˆLeetCode 297ï¼‰"></a>7.1 äºŒå‰æ ‘åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼ˆLeetCode 297ï¼‰</h3><p>æ€è·¯ï¼šBFSï¼ˆå±‚åºï¼‰ç”¨ç‰¹æ®Šç¬¦å·è¡¨ç¤º nullï¼Œæˆ–ç”¨å‰åº + æ ‡è®° nullã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BFS åºåˆ—åŒ–</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Codec</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">serialize</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        Queue&lt;TreeNode&gt; q = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        q.offer(root);</span><br><span class="line">        <span class="keyword">while</span> (!q.isEmpty()) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">n</span> <span class="operator">=</span> q.poll();</span><br><span class="line">            <span class="keyword">if</span> (n == <span class="literal">null</span>) sb.append(<span class="string">&quot;#,&quot;</span>);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                sb.append(n.val).append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                q.offer(n.left); q.offer(n.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">deserialize</span><span class="params">(String data)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (data == <span class="literal">null</span> || data.isEmpty()) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        String[] arr = data.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        Queue&lt;TreeNode&gt; q = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(Integer.parseInt(arr[<span class="number">0</span>]));</span><br><span class="line">        q.offer(root);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (!q.isEmpty()) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> q.poll();</span><br><span class="line">            <span class="keyword">if</span> (!arr[i].equals(<span class="string">&quot;#&quot;</span>)) &#123; node.left = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(Integer.parseInt(arr[i])); q.offer(node.left); &#125;</span><br><span class="line">            i++;</span><br><span class="line">            <span class="keyword">if</span> (!arr[i].equals(<span class="string">&quot;#&quot;</span>)) &#123; node.right = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(Integer.parseInt(arr[i])); q.offer(node.right); &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-2-æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆLCA-äºŒå‰æ ‘ï¼ŒLeetCode-236ï¼‰"><a href="#7-2-æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆLCA-äºŒå‰æ ‘ï¼ŒLeetCode-236ï¼‰" class="headerlink" title="7.2 æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆLCA, äºŒå‰æ ‘ï¼ŒLeetCode 236ï¼‰"></a>7.2 æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆLCA, äºŒå‰æ ‘ï¼ŒLeetCode 236ï¼‰</h3><p>æ€è·¯ï¼šé€’å½’æœç´¢å·¦å³å­æ ‘ï¼Œè‹¥å·¦å³éƒ½æœ‰é null è¿”å›å½“å‰ç»“ç‚¹ã€‚å¤æ‚åº¦ O(n)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span> || root == p || root == q) <span class="keyword">return</span> root;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">left</span> <span class="operator">=</span> lowestCommonAncestor(root.left, p, q);</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">right</span> <span class="operator">=</span> lowestCommonAncestor(root.right, p, q);</span><br><span class="line">    <span class="keyword">if</span> (left != <span class="literal">null</span> &amp;&amp; right != <span class="literal">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">    <span class="keyword">return</span> left != <span class="literal">null</span> ? left : right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-3-äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œï¼ˆLeetCode-124ï¼‰"><a href="#7-3-äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œï¼ˆLeetCode-124ï¼‰" class="headerlink" title="7.3 äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œï¼ˆLeetCode 124ï¼‰"></a>7.3 äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œï¼ˆLeetCode 124ï¼‰</h3><p>æ€è·¯ï¼šæ¯ä¸ªèŠ‚ç‚¹è®¡ç®—ç»è¿‡è¯¥èŠ‚ç‚¹çš„æœ€å¤§å‘ä¸‹è·¯å¾„è´¡çŒ®ï¼Œç»´æŠ¤å…¨å±€æœ€å¤§ã€‚å¤æ‚åº¦ O(n)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="variable">maxSum</span> <span class="operator">=</span> Integer.MIN_VALUE;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxPathSum</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    dfs(root);</span><br><span class="line">    <span class="keyword">return</span> maxSum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> Math.max(<span class="number">0</span>, dfs(node.left));</span><br><span class="line">    <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> Math.max(<span class="number">0</span>, dfs(node.right));</span><br><span class="line">    maxSum = Math.max(maxSum, node.val + left + right);</span><br><span class="line">    <span class="keyword">return</span> node.val + Math.max(left, right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="8-å›¾ï¼ˆé«˜çº§ï¼‰"><a href="#8-å›¾ï¼ˆé«˜çº§ï¼‰" class="headerlink" title="8. å›¾ï¼ˆé«˜çº§ï¼‰"></a>8. å›¾ï¼ˆé«˜çº§ï¼‰</h1><h3 id="8-1-æ‹“æ‰‘æ’åºï¼ˆKahn-ç®—æ³•ï¼‰"><a href="#8-1-æ‹“æ‰‘æ’åºï¼ˆKahn-ç®—æ³•ï¼‰" class="headerlink" title="8.1 æ‹“æ‰‘æ’åºï¼ˆKahn ç®—æ³•ï¼‰"></a>8.1 æ‹“æ‰‘æ’åºï¼ˆKahn ç®—æ³•ï¼‰</h3><p>æ€è·¯ï¼šå…¥åº¦ä¸º 0 çš„ç‚¹å…¥é˜Ÿï¼Œé€å‡ºå¹¶å‡å°é‚»å±…å…¥åº¦ã€‚èƒ½æ£€æµ‹æœ‰å‘æ— ç¯å›¾ã€‚å¤æ‚åº¦ O(V+E)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">topoSort</span><span class="params">(<span class="type">int</span> n, List&lt;List&lt;Integer&gt;&gt; adj)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] indeg = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">u</span> <span class="operator">=</span> <span class="number">0</span>; u &lt; n; u++) <span class="keyword">for</span> (<span class="type">int</span> v : adj.get(u)) indeg[v]++;</span><br><span class="line">    Queue&lt;Integer&gt; q = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) <span class="keyword">if</span> (indeg[i] == <span class="number">0</span>) q.offer(i);</span><br><span class="line">    List&lt;Integer&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (!q.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">u</span> <span class="operator">=</span> q.poll(); res.add(u);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> v : adj.get(u)) <span class="keyword">if</span> (--indeg[v] == <span class="number">0</span>) q.offer(v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.size() == n ? res : <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(); <span class="comment">// è‹¥æœ‰ç¯åˆ™è¿”å›ç©º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-2-Dijkstraï¼ˆå¸¦ä¼˜å…ˆé˜Ÿåˆ—çš„é‚»æ¥è¡¨ç‰ˆæœ¬ï¼‰"><a href="#8-2-Dijkstraï¼ˆå¸¦ä¼˜å…ˆé˜Ÿåˆ—çš„é‚»æ¥è¡¨ç‰ˆæœ¬ï¼‰" class="headerlink" title="8.2 Dijkstraï¼ˆå¸¦ä¼˜å…ˆé˜Ÿåˆ—çš„é‚»æ¥è¡¨ç‰ˆæœ¬ï¼‰"></a>8.2 Dijkstraï¼ˆå¸¦ä¼˜å…ˆé˜Ÿåˆ—çš„é‚»æ¥è¡¨ç‰ˆæœ¬ï¼‰</h3><p>å¤æ‚åº¦ O((V+E) log V)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Edge</span> &#123; <span class="type">int</span> to, w; Edge(<span class="type">int</span> t, <span class="type">int</span> w)&#123;to=t;<span class="built_in">this</span>.w=w;&#125; &#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] dijkstra(<span class="type">int</span> n, List&lt;List&lt;Edge&gt;&gt; graph, <span class="type">int</span> src) &#123;</span><br><span class="line">    <span class="type">int</span>[] dist = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    Arrays.fill(dist, Integer.MAX_VALUE);</span><br><span class="line">    dist[src] = <span class="number">0</span>;</span><br><span class="line">    PriorityQueue&lt;<span class="type">int</span>[]&gt; pq = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;(Comparator.comparingInt(a-&gt;a[<span class="number">0</span>]));</span><br><span class="line">    pq.offer(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">0</span>, src&#125;);</span><br><span class="line">    <span class="keyword">while</span> (!pq.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span>[] cur = pq.poll();</span><br><span class="line">        <span class="type">int</span> <span class="variable">d</span> <span class="operator">=</span> cur[<span class="number">0</span>], u = cur[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (d &gt; dist[u]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span> (Edge e : graph.get(u)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dist[u] + e.w &lt; dist[e.to]) &#123;</span><br><span class="line">                dist[e.to] = dist[u] + e.w;</span><br><span class="line">                pq.offer(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;dist[e.to], e.to&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dist;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-3-Bellman-Fordï¼ˆå¸¦è´Ÿæƒæ£€æµ‹ï¼‰"><a href="#8-3-Bellman-Fordï¼ˆå¸¦è´Ÿæƒæ£€æµ‹ï¼‰" class="headerlink" title="8.3 Bellman-Fordï¼ˆå¸¦è´Ÿæƒæ£€æµ‹ï¼‰"></a>8.3 Bellman-Fordï¼ˆå¸¦è´Ÿæƒæ£€æµ‹ï¼‰</h3><p>å¤æ‚åº¦ O(V*E)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] bellmanFord(<span class="type">int</span> n, <span class="type">int</span> src, <span class="type">int</span>[][] edges) &#123;</span><br><span class="line">    <span class="type">int</span>[] dist = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    Arrays.fill(dist, Integer.MAX_VALUE);</span><br><span class="line">    dist[src] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123; <span class="comment">// relax n-1 times</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] e : edges) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">u</span> <span class="operator">=</span> e[<span class="number">0</span>], v = e[<span class="number">1</span>], w = e[<span class="number">2</span>];</span><br><span class="line">            <span class="keyword">if</span> (dist[u] != Integer.MAX_VALUE &amp;&amp; dist[u] + w &lt; dist[v]) dist[v] = dist[u] + w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ£€æµ‹è´Ÿç¯</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span>[] e : edges) &#123;</span><br><span class="line">        <span class="keyword">if</span> (dist[e[<span class="number">0</span>]] != Integer.MAX_VALUE &amp;&amp; dist[e[<span class="number">0</span>]] + e[<span class="number">2</span>] &lt; dist[e[<span class="number">1</span>]]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">// å­˜åœ¨è´Ÿç¯</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dist;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-4-å¹¶æŸ¥é›†ï¼ˆUnion-Findï¼‰"><a href="#8-4-å¹¶æŸ¥é›†ï¼ˆUnion-Findï¼‰" class="headerlink" title="8.4 å¹¶æŸ¥é›†ï¼ˆUnion-Findï¼‰"></a>8.4 å¹¶æŸ¥é›†ï¼ˆUnion-Findï¼‰</h3><p>æ€è·¯ï¼šç”¨äºè¿é€šæ€§ã€ç¾¤ç»„åˆå¹¶ã€Kruskal æœ€å°ç”Ÿæˆæ ‘ç­‰ã€‚å¸¦è·¯å¾„å‹ç¼©å’ŒæŒ‰ç§©åˆå¹¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UnionFind</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] parent, rank;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UnionFind</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        parent = <span class="keyword">new</span> <span class="title class_">int</span>[n]; rank = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) parent[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (parent[x] != x) parent[x] = find(parent[x]);</span><br><span class="line">        <span class="keyword">return</span> parent[x];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">union</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rx</span> <span class="operator">=</span> find(x), ry = find(y);</span><br><span class="line">        <span class="keyword">if</span> (rx == ry) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (rank[rx] &lt; rank[ry]) parent[rx] = ry;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (rank[rx] &gt; rank[ry]) parent[ry] = rx;</span><br><span class="line">        <span class="keyword">else</span> &#123; parent[ry] = rx; rank[rx]++; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="9-åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰"><a href="#9-åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰" class="headerlink" title="9. åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰"></a>9. åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰</h1><h3 id="9-1-æœ€é•¿é€’å¢å­åºåˆ—ï¼ˆLISï¼‰-â€”-O-n-log-n"><a href="#9-1-æœ€é•¿é€’å¢å­åºåˆ—ï¼ˆLISï¼‰-â€”-O-n-log-n" class="headerlink" title="9.1 æœ€é•¿é€’å¢å­åºåˆ—ï¼ˆLISï¼‰ â€” O(n log n)"></a>9.1 æœ€é•¿é€’å¢å­åºåˆ—ï¼ˆLISï¼‰ â€” O(n log n)</h3><p>æ€è·¯ï¼šç»´æŠ¤ tails æ•°ç»„ï¼Œtails[i] &#x3D; æœ€å°ç»“å°¾å€¼ä½¿å¾—é•¿åº¦ä¸º i+1ã€‚å¯é€‰é‡å»ºè·¯å¾„ã€‚å¤æ‚åº¦ O(n log n)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lengthOfLIS</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span>[] tails = <span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> x : nums) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> Arrays.binarySearch(tails, <span class="number">0</span>, size, x);</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span>) i = -(i + <span class="number">1</span>);</span><br><span class="line">        tails[i] = x;</span><br><span class="line">        <span class="keyword">if</span> (i == size) size++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-2-0-1-èƒŒåŒ…ï¼ˆç»å…¸-DPï¼‰"><a href="#9-2-0-1-èƒŒåŒ…ï¼ˆç»å…¸-DPï¼‰" class="headerlink" title="9.2 0&#x2F;1 èƒŒåŒ…ï¼ˆç»å…¸ DPï¼‰"></a>9.2 0&#x2F;1 èƒŒåŒ…ï¼ˆç»å…¸ DPï¼‰</h3><p>æ—¶é—´ O(nW)ï¼Œç©ºé—´å¯æ»šåŠ¨åˆ° O(W)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">knapsack</span><span class="params">(<span class="type">int</span> W, <span class="type">int</span>[] wt, <span class="type">int</span>[] val)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> wt.length;</span><br><span class="line">    <span class="type">int</span>[] dp = <span class="keyword">new</span> <span class="title class_">int</span>[W + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">w</span> <span class="operator">=</span> W; w &gt;= wt[i]; w--) &#123;</span><br><span class="line">            dp[w] = Math.max(dp[w], dp[w - wt[i]] + val[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[W];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-3-å­—ç¬¦ä¸²æ‹†åˆ†ï¼ˆWord-Breakï¼ŒLeetCode-139ï¼‰"><a href="#9-3-å­—ç¬¦ä¸²æ‹†åˆ†ï¼ˆWord-Breakï¼ŒLeetCode-139ï¼‰" class="headerlink" title="9.3 å­—ç¬¦ä¸²æ‹†åˆ†ï¼ˆWord Breakï¼ŒLeetCode 139ï¼‰"></a>9.3 å­—ç¬¦ä¸²æ‹†åˆ†ï¼ˆWord Breakï¼ŒLeetCode 139ï¼‰</h3><p>æ€è·¯ï¼šDPï¼Œdp[i] &#x3D; [0..i)æ˜¯å¦å¯æ‹†åˆ†ã€‚å¤æ‚åº¦ O(n^2)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">wordBreak</span><span class="params">(String s, List&lt;String&gt; wordDict)</span> &#123;</span><br><span class="line">    Set&lt;String&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(wordDict);</span><br><span class="line">    <span class="type">boolean</span>[] dp = <span class="keyword">new</span> <span class="title class_">boolean</span>[s.length() + <span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= s.length(); i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dp[j] &amp;&amp; set.contains(s.substring(j, i))) &#123; dp[i] = <span class="literal">true</span>; <span class="keyword">break</span>; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[s.length()];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="10-å›æº¯ï¼ˆBacktrackingï¼‰"><a href="#10-å›æº¯ï¼ˆBacktrackingï¼‰" class="headerlink" title="10. å›æº¯ï¼ˆBacktrackingï¼‰"></a>10. å›æº¯ï¼ˆBacktrackingï¼‰</h1><h3 id="10-1-N-çš‡åï¼ˆLeetCode-51ï¼‰"><a href="#10-1-N-çš‡åï¼ˆLeetCode-51ï¼‰" class="headerlink" title="10.1 N çš‡åï¼ˆLeetCode 51ï¼‰"></a>10.1 N çš‡åï¼ˆLeetCode 51ï¼‰</h3><p>æ€è·¯ï¼šå›æº¯ + åˆ— &#x2F; æ–œå¯¹è§’ å‰ªæï¼Œå¯ç”¨ä½è¿ç®—ä¼˜åŒ–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; <span class="title function_">solveNQueens</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    List&lt;List&lt;String&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">char</span>[][] board = <span class="keyword">new</span> <span class="title class_">char</span>[n][n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span>[] row : board) Arrays.fill(row, <span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">    backtrack(<span class="number">0</span>, board, res, n);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">backtrack</span><span class="params">(<span class="type">int</span> row, <span class="type">char</span>[][] board, List&lt;List&lt;String&gt;&gt; res, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (row == n) &#123;</span><br><span class="line">        List&lt;String&gt; sol = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span>[] r : board) sol.add(<span class="keyword">new</span> <span class="title class_">String</span>(r));</span><br><span class="line">        res.add(sol);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">col</span> <span class="operator">=</span> <span class="number">0</span>; col &lt; n; col++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isValid(board, row, col, n)) <span class="keyword">continue</span>;</span><br><span class="line">        board[row][col] = <span class="string">&#x27;Q&#x27;</span>;</span><br><span class="line">        backtrack(row + <span class="number">1</span>, board, res, n);</span><br><span class="line">        board[row][col] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(<span class="type">char</span>[][] board, <span class="type">int</span> row, <span class="type">int</span> col, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; row; i++) <span class="keyword">if</span> (board[i][col] == <span class="string">&#x27;Q&#x27;</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> row - <span class="number">1</span>, j = col - <span class="number">1</span>; i &gt;= <span class="number">0</span> &amp;&amp; j &gt;= <span class="number">0</span>; i--, j--) <span class="keyword">if</span> (board[i][j] == <span class="string">&#x27;Q&#x27;</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> row - <span class="number">1</span>, j = col + <span class="number">1</span>; i &gt;= <span class="number">0</span> &amp;&amp; j &lt; n; i--, j++) <span class="keyword">if</span> (board[i][j] == <span class="string">&#x27;Q&#x27;</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10-2-ç»„åˆæ€»å’Œï¼ˆCombination-Sumï¼ŒLeetCode-39ï¼‰"><a href="#10-2-ç»„åˆæ€»å’Œï¼ˆCombination-Sumï¼ŒLeetCode-39ï¼‰" class="headerlink" title="10.2 ç»„åˆæ€»å’Œï¼ˆCombination Sumï¼ŒLeetCode 39ï¼‰"></a>10.2 ç»„åˆæ€»å’Œï¼ˆCombination Sumï¼ŒLeetCode 39ï¼‰</h3><p>æ€è·¯ï¼šå›æº¯ï¼Œæ³¨æ„å»é‡ä¸å‰ªæï¼ˆæ’åºåå‰ªæï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">combinationSum</span><span class="params">(<span class="type">int</span>[] candidates, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    Arrays.sort(candidates);</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    back(candidates, <span class="number">0</span>, target, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(), res);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">back</span><span class="params">(<span class="type">int</span>[] cand, <span class="type">int</span> idx, <span class="type">int</span> target, List&lt;Integer&gt; path, List&lt;List&lt;Integer&gt;&gt; res)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (target == <span class="number">0</span>) &#123; res.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(path)); <span class="keyword">return</span>; &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> idx; i &lt; cand.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cand[i] &gt; target) <span class="keyword">break</span>;</span><br><span class="line">        path.add(cand[i]);</span><br><span class="line">        back(cand, i, target - cand[i], path, res); <span class="comment">// i å…è®¸é‡å¤</span></span><br><span class="line">        path.remove(path.size() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="11-å­—ç¬¦ä¸²ç®—æ³•"><a href="#11-å­—ç¬¦ä¸²ç®—æ³•" class="headerlink" title="11. å­—ç¬¦ä¸²ç®—æ³•"></a>11. å­—ç¬¦ä¸²ç®—æ³•</h1><h3 id="11-1-KMPï¼ˆè®¡ç®—-LPSï¼‰"><a href="#11-1-KMPï¼ˆè®¡ç®—-LPSï¼‰" class="headerlink" title="11.1 KMPï¼ˆè®¡ç®— LPSï¼‰"></a>11.1 KMPï¼ˆè®¡ç®— LPSï¼‰</h3><p>æ€è·¯ï¼šé¢„å¤„ç†æ¨¡å¼ä¸²å¾—åˆ°æœ€é•¿ç›¸åŒå‰åç¼€æ•°ç»„ lpsï¼Œç„¶åçº¿æ€§åŒ¹é…ã€‚å¤æ‚åº¦ O(n+m)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] computeLPS(String pat) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> pat.length();</span><br><span class="line">    <span class="type">int</span>[] lps = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>, i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (pat.charAt(i) == pat.charAt(len)) &#123; lps[i++] = ++len; &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (len &gt; <span class="number">0</span>) len = lps[len - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">else</span> &#123; lps[i++] = <span class="number">0</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> lps;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">kmp</span><span class="params">(String s, String pat)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] lps = computeLPS(pat);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; s.length()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s.charAt(i) == pat.charAt(j)) &#123; i++; j++; <span class="keyword">if</span> (j == pat.length()) <span class="keyword">return</span> i - j; &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; <span class="number">0</span>) j = lps[j - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">else</span> i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="11-2-Rabin-Karpï¼ˆå­—ç¬¦ä¸²å“ˆå¸Œï¼‰"><a href="#11-2-Rabin-Karpï¼ˆå­—ç¬¦ä¸²å“ˆå¸Œï¼‰" class="headerlink" title="11.2 Rabin-Karpï¼ˆå­—ç¬¦ä¸²å“ˆå¸Œï¼‰"></a>11.2 Rabin-Karpï¼ˆå­—ç¬¦ä¸²å“ˆå¸Œï¼‰</h3><p>æ€è·¯ï¼šç”¨æ»šåŠ¨å“ˆå¸Œå¿«é€Ÿæ¯”è¾ƒå­ä¸²ï¼Œæ³¨æ„å“ˆå¸Œå†²çªå¤„ç†ã€‚å¤æ‚åº¦ å¹³å‡ O(n).</p><hr><h1 id="12-å­—å…¸æ ‘-Trie"><a href="#12-å­—å…¸æ ‘-Trie" class="headerlink" title="12. å­—å…¸æ ‘ Trie"></a>12. å­—å…¸æ ‘ Trie</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Trie</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        Node[] next = <span class="keyword">new</span> <span class="title class_">Node</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="type">boolean</span> end;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Node</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(String word)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cur.next[c - <span class="string">&#x27;a&#x27;</span>] == <span class="literal">null</span>) cur.next[c - <span class="string">&#x27;a&#x27;</span>] = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">            cur = cur.next[c - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        cur.end = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">search</span><span class="params">(String word)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">            cur = cur.next[c - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">            <span class="keyword">if</span> (cur == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cur.end;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">startsWith</span><span class="params">(String prefix)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : prefix.toCharArray()) &#123;</span><br><span class="line">            cur = cur.next[c - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">            <span class="keyword">if</span> (cur == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="13-çº¿æ®µæ ‘-æ ‘çŠ¶æ•°ç»„ï¼ˆFenwickï¼‰"><a href="#13-çº¿æ®µæ ‘-æ ‘çŠ¶æ•°ç»„ï¼ˆFenwickï¼‰" class="headerlink" title="13. çº¿æ®µæ ‘ &#x2F; æ ‘çŠ¶æ•°ç»„ï¼ˆFenwickï¼‰"></a>13. çº¿æ®µæ ‘ &#x2F; æ ‘çŠ¶æ•°ç»„ï¼ˆFenwickï¼‰</h1><h3 id="13-1-æ ‘çŠ¶æ•°ç»„ï¼ˆFenwickï¼‰"><a href="#13-1-æ ‘çŠ¶æ•°ç»„ï¼ˆFenwickï¼‰" class="headerlink" title="13.1 æ ‘çŠ¶æ•°ç»„ï¼ˆFenwickï¼‰"></a>13.1 æ ‘çŠ¶æ•°ç»„ï¼ˆFenwickï¼‰</h3><p>åŠŸèƒ½ï¼šå‰ç¼€å’Œ &#x2F; å•ç‚¹æ›´æ–°ï¼Œæ„å»ºç®€å•ï¼Œå¤æ‚åº¦ O(log n)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Fenwick</span> &#123;</span><br><span class="line">    <span class="type">int</span> n; <span class="type">int</span>[] bit;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Fenwick</span><span class="params">(<span class="type">int</span> n)</span> &#123; <span class="built_in">this</span>.n = n; bit = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>]; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> delta)</span> &#123; <span class="keyword">for</span> (; i &lt;= n; i += i &amp; -i) bit[i] += delta; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">query</span><span class="params">(<span class="type">int</span> i)</span> &#123; <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> <span class="number">0</span>; <span class="keyword">for</span> (; i &gt; <span class="number">0</span>; i -= i &amp; -i) s += bit[i]; <span class="keyword">return</span> s; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rangeQuery</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span> &#123; <span class="keyword">return</span> query(r) - query(l - <span class="number">1</span>); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="13-2-çº¿æ®µæ ‘ï¼ˆåŒºé—´å’Œ-åŒºé—´æ›´æ–°ï¼‰"><a href="#13-2-çº¿æ®µæ ‘ï¼ˆåŒºé—´å’Œ-åŒºé—´æ›´æ–°ï¼‰" class="headerlink" title="13.2 çº¿æ®µæ ‘ï¼ˆåŒºé—´å’Œ &#x2F; åŒºé—´æ›´æ–°ï¼‰"></a>13.2 çº¿æ®µæ ‘ï¼ˆåŒºé—´å’Œ &#x2F; åŒºé—´æ›´æ–°ï¼‰</h3><p>å®ç°ç•¥é•¿ï¼Œæ¨¡å¼ç†Ÿæ‚‰åç›´æ¥å†™æ¨¡æ¿å³å¯ â€”â€” æ”¯æŒåŒºé—´æŸ¥è¯¢&#x2F;æ›´æ–°ï¼Œå¤æ‚åº¦ O(log n)ã€‚</p><hr><h1 id="14-ä½è¿ç®—-æ•°å­¦å°æŠ€å·§"><a href="#14-ä½è¿ç®—-æ•°å­¦å°æŠ€å·§" class="headerlink" title="14. ä½è¿ç®— &#x2F; æ•°å­¦å°æŠ€å·§"></a>14. ä½è¿ç®— &#x2F; æ•°å­¦å°æŠ€å·§</h1><ul><li>å•æ•°ï¼š<code>x &amp; 1</code>ï¼›å–å <code>~x</code>ã€‚</li><li>å¼‚æˆ–ç‰¹æ€§ï¼š<code>a ^ a = 0</code>ï¼Œç”¨äºæ±‚å•æ•°ã€äº¤æ¢ä¸éœ€è¦ä¸´æ—¶å˜é‡ç­‰ã€‚</li><li><code>lowbit(x) = x &amp; -x</code>ï¼ˆæ ‘çŠ¶æ•°ç»„ç”¨åˆ°ï¼‰ã€‚</li><li>ç»Ÿè®¡ 1 çš„ä¸ªæ•°ï¼ˆHamming weightï¼‰ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hammingWeight</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (n != <span class="number">0</span>) &#123; n &amp;= (n - <span class="number">1</span>); cnt++; &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å•æ•°é—®é¢˜ï¼ˆæ•°ç»„ä¸­å…¶å®ƒæ•°å‡ºç°ä¸¤æ¬¡ï¼Œåªæœ‰ä¸€ä¸ªå‡ºç°ä¸€æ¬¡ï¼‰ï¼šä½¿ç”¨ XORã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">singleNumber</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> x : nums) res ^= x;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="15-è®¾è®¡é¢˜ï¼šLRU-Cacheï¼ˆåŒå‘é“¾è¡¨-å“ˆå¸Œè¡¨ï¼‰"><a href="#15-è®¾è®¡é¢˜ï¼šLRU-Cacheï¼ˆåŒå‘é“¾è¡¨-å“ˆå¸Œè¡¨ï¼‰" class="headerlink" title="15. è®¾è®¡é¢˜ï¼šLRU Cacheï¼ˆåŒå‘é“¾è¡¨ + å“ˆå¸Œè¡¨ï¼‰"></a>15. è®¾è®¡é¢˜ï¼šLRU Cacheï¼ˆåŒå‘é“¾è¡¨ + å“ˆå¸Œè¡¨ï¼‰</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123; <span class="type">int</span> key, val; Node prev, next; Node(<span class="type">int</span> k,<span class="type">int</span> v)&#123;key=k;val=v;&#125; &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> capacity;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;Integer, Node&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Node</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="number">0</span>,<span class="number">0</span>), tail = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> cap)</span> &#123;</span><br><span class="line">        capacity = cap;</span><br><span class="line">        head.next = tail; tail.prev = head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">        node.prev.next = node.next; node.next.prev = node.prev;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addToHead</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">        node.next = head.next; node.prev = head;</span><br><span class="line">        head.next.prev = node; head.next = node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!map.containsKey(key)) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">        remove(node); addToHead(node);</span><br><span class="line">        <span class="keyword">return</span> node.val;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(key)) &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> map.get(key); node.val = value;</span><br><span class="line">            remove(node); addToHead(node);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (map.size() == capacity) &#123;</span><br><span class="line">                <span class="type">Node</span> <span class="variable">tailPrev</span> <span class="operator">=</span> tail.prev;</span><br><span class="line">                remove(tailPrev);</span><br><span class="line">                map.remove(tailPrev.key);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(key, value);</span><br><span class="line">            addToHead(node); map.put(key, node);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="å°ç»“ä¸å¤ä¹ å»ºè®®ï¼ˆç»™ä½ ä¸€ä¸ªåˆ·é¢˜è·¯çº¿ï¼‰"><a href="#å°ç»“ä¸å¤ä¹ å»ºè®®ï¼ˆç»™ä½ ä¸€ä¸ªåˆ·é¢˜è·¯çº¿ï¼‰" class="headerlink" title="å°ç»“ä¸å¤ä¹ å»ºè®®ï¼ˆç»™ä½ ä¸€ä¸ªåˆ·é¢˜è·¯çº¿ï¼‰"></a>å°ç»“ä¸å¤ä¹ å»ºè®®ï¼ˆç»™ä½ ä¸€ä¸ªåˆ·é¢˜è·¯çº¿ï¼‰</h1><ul><li>åŸºç¡€é¢˜ï¼ˆæ•°ç»„ &#x2F; é“¾è¡¨ &#x2F; æ ˆ &#x2F; é˜Ÿåˆ— &#x2F; å“ˆå¸Œè¡¨ï¼‰ï¼šå…ˆç†Ÿç»ƒå¢åˆ æŸ¥éå†ï¼Œèƒ½å†™æ¨¡æ¿ã€‚</li><li>é€’å½’ + æ ‘ï¼ˆä¸­åº&#x2F;å‰åº&#x2F;ååº&#x2F;å±‚åºï¼‰ â†’ å†åš LCAã€åºåˆ—åŒ–ã€æœ€ä½æ·±åº¦ã€‚</li><li>åŒæŒ‡é’ˆ &#x2F; æ»‘åŠ¨çª—å£ &#x2F; å•è°ƒæ ˆï¼šæ‹¿æ¥è§£å†³å­æ•°ç»„ã€å­ä¸²ç±»é¢˜ã€‚</li><li>å † &#x2F; å¹¶æŸ¥é›† &#x2F; å›¾ï¼ˆBFS&#x2F;DFS&#x2F;Dijkstra&#x2F;æ‹“æ‰‘ï¼‰ â†’ é¢è¯•å¸¸è€ƒã€‚</li><li>åŠ¨æ€è§„åˆ’ï¼šä»ç»å…¸ 1D DP â†’ èƒŒåŒ…ã€åºåˆ— DP â†’ çŠ¶æ€å‹ç¼©ã€‚</li><li>å›æº¯ï¼šèƒŒè¯µå›æº¯æ¨¡æ¿ï¼Œç»ƒ N çš‡åã€å­é›† &#x2F; ç»„åˆ &#x2F; æ’åˆ— å˜ä½“ã€‚</li><li>è®¾è®¡é¢˜ï¼šLRU&#x2F;MedianFinder&#x2F;Trie&#x2F;SegmentTree æ¨¡æ¿è¦ç†Ÿæ‚‰ã€‚</li></ul><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;h2 id=&quot;ğŸ”¹-æ•°ç»„ï¼ˆArrayï¼‰&quot;&gt;&lt;a href=&quot;#ğŸ”¹-æ•°ç»„ï¼ˆArrayï¼‰&quot; class=&quot;headerlink&quot; title=&quot;ğŸ”¹ æ•°ç»„ï¼ˆArrayï¼‰&quot;&gt;&lt;/a&gt;ğŸ”¹ æ•°ç»„ï¼ˆArrayï¼‰&lt;/h2&gt;&lt;h3 id=&quot;1-ä¸¤æ•°ä¹‹å’Œ&quot;&gt;&lt;a href=&quot;#1-</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="http://example.com/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="ç®—æ³•" scheme="http://example.com/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ•°æ®ç»“æ„" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>é¢è¯•é¢˜ç›®</title>
    <link href="http://example.com/2025/09/11/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE/"/>
    <id>http://example.com/2025/09/11/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE/</id>
    <published>2025-09-11T10:29:28.000Z</published>
    <updated>2025-09-22T04:31:09.005Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€Java-åŸºç¡€è¯­æ³•-å…³é”®å­—"><a href="#ä¸€ã€Java-åŸºç¡€è¯­æ³•-å…³é”®å­—" class="headerlink" title="ä¸€ã€Java åŸºç¡€è¯­æ³• &amp; å…³é”®å­—"></a>ä¸€ã€Java åŸºç¡€è¯­æ³• &amp; å…³é”®å­—</h2><h2 id="1-JDKã€JRE-å’Œ-JVM-çš„åŒºåˆ«"><a href="#1-JDKã€JRE-å’Œ-JVM-çš„åŒºåˆ«" class="headerlink" title="1. JDKã€JRE å’Œ JVM çš„åŒºåˆ«"></a>1. JDKã€JRE å’Œ JVM çš„åŒºåˆ«</h2><ul><li><strong>JVMï¼ˆJava Virtual Machineï¼‰</strong>ï¼šJava è™šæ‹Ÿæœºï¼Œè´Ÿè´£æ‰§è¡Œå­—èŠ‚ç ï¼ˆ<code>.class</code>ï¼‰ã€‚æä¾›ç±»åŠ è½½ã€å­—èŠ‚ç æ ¡éªŒã€å†…å­˜ç®¡ç†ï¼ˆå †ã€æ–¹æ³•åŒºï¼‰ã€æ‰§è¡Œå¼•æ“ã€åƒåœ¾å›æ”¶ã€çº¿ç¨‹è°ƒåº¦ç­‰ã€‚æ˜¯æŠ½è±¡çš„è§„èŒƒï¼Œå…·ä½“ç”±ä¸åŒå‚å•†å®ç°ï¼ˆHotSpotã€OpenJ9 ç­‰ï¼‰ã€‚</li><li><strong>JREï¼ˆJava Runtime Environmentï¼‰</strong>ï¼šè¿è¡Œç¯å¢ƒï¼ŒåŒ…å« JVMã€æ ¸å¿ƒç±»åº“ï¼ˆrt.jar æˆ– modulesï¼‰ã€ä»¥åŠè¿è¡Œæ—¶éœ€è¦çš„å…¶å®ƒèµ„æºã€‚ç”¨äºè¿è¡Œ Java ç¨‹åºã€‚</li><li><strong>JDKï¼ˆJava Development Kitï¼‰</strong>ï¼šå¼€å‘å·¥å…·åŒ…ï¼ŒåŒ…å« JRE + å¼€å‘å·¥å…·ï¼ˆ<code>javac</code>ã€<code>jar</code>ã€<code>javadoc</code>ã€è°ƒè¯•å·¥å…·ç­‰ï¼‰ã€‚ç”¨äºå¼€å‘ Java ç¨‹åºã€‚<br> æ€»ç»“ï¼šJDK âŠƒ JRE âŠƒ JVMï¼ˆJDK åŒ…å« JREï¼ŒJRE åŒ…å« JVMï¼‰ã€‚</li></ul><hr><h2 id="2-Java-çš„è·¨å¹³å°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-Java-çš„è·¨å¹³å°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. Java çš„è·¨å¹³å°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2. Java çš„è·¨å¹³å°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><ul><li>Java ç¨‹åºå…ˆç”± <code>javac</code> ç¼–è¯‘æˆä¸å¹³å°æ— å…³çš„ <strong>å­—èŠ‚ç </strong>ï¼ˆ<code>.class</code>ï¼‰ã€‚å­—èŠ‚ç ä¸æ˜¯æœºå™¨ç ï¼Œè€Œæ˜¯ä¾› JVM æ‰§è¡Œçš„æŒ‡ä»¤é›†ã€‚</li><li>æ¯ä¸ªå¹³å°ï¼ˆWindows&#x2F;Linux&#x2F;macOSï¼‰æœ‰ç›¸åº”çš„ JVM å®ç°ï¼ŒJVM æŠŠå­—èŠ‚ç ç¿»è¯‘æˆè¯¥å¹³å°çš„æœºå™¨æŒ‡ä»¤ï¼ˆé€šè¿‡è§£é‡Šå™¨ã€JIT ç¼–è¯‘å™¨ç­‰ï¼‰ã€‚å› æ­¤åŒä¸€å¥— <code>.class</code> å¯ä»¥åœ¨ä¸åŒå¹³å°çš„ JVM ä¸Šè¿è¡Œ â€”â€” â€œä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„è¿è¡Œâ€ï¼ˆWrite Once, Run Anywhereï¼‰ã€‚</li><li>å…¶å®ƒä¿è¯è·¨å¹³å°çš„è¦ç‚¹ï¼šæ ‡å‡†åº“éšè—å¹³å°å·®å¼‚ï¼ˆI&#x2F;Oã€çº¿ç¨‹ç­‰ï¼‰ï¼Œéœ€é¿å…ä½¿ç”¨ä¸å¹³å°ç»‘å®šçš„æœ¬åœ°ä»£ç ï¼ˆJNIï¼‰ã€‚</li></ul><hr><h2 id="3-Java-çš„åŸºæœ¬æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿå„è‡ªçš„é»˜è®¤å€¼ï¼Ÿ"><a href="#3-Java-çš„åŸºæœ¬æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿå„è‡ªçš„é»˜è®¤å€¼ï¼Ÿ" class="headerlink" title="3. Java çš„åŸºæœ¬æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿå„è‡ªçš„é»˜è®¤å€¼ï¼Ÿ"></a>3. Java çš„åŸºæœ¬æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿå„è‡ªçš„é»˜è®¤å€¼ï¼Ÿ</h2><p>8 ç§åŸºæœ¬ç±»å‹åŠé»˜è®¤å€¼ï¼ˆæˆå‘˜å˜é‡&#x2F;æ•°ç»„å…ƒç´ ï¼›å±€éƒ¨å˜é‡æ— é»˜è®¤å€¼å¿…é¡»åˆå§‹åŒ–ï¼‰ï¼š</p><ul><li><code>byte</code>ï¼š1 byteï¼Œé»˜è®¤å€¼ <code>0</code></li><li><code>short</code>ï¼š2 bytesï¼Œé»˜è®¤å€¼ <code>0</code></li><li><code>int</code>ï¼š4 bytesï¼Œé»˜è®¤å€¼ <code>0</code></li><li><code>long</code>ï¼š8 bytesï¼Œé»˜è®¤å€¼ <code>0L</code></li><li><code>float</code>ï¼š4 bytesï¼Œé»˜è®¤å€¼ <code>0.0f</code></li><li><code>double</code>ï¼š8 bytesï¼Œé»˜è®¤å€¼ <code>0.0d</code></li><li><code>char</code>ï¼š2 bytesï¼ˆUTF-16 code unitï¼‰ï¼Œé»˜è®¤å€¼ <code>&#39;\u0000&#39;</code>ï¼ˆå³ 0ï¼‰</li><li><code>boolean</code>ï¼šJVM è¯­ä¹‰ä¸Šç”¨ 1 bit è¡¨ç¤ºï¼Œé»˜è®¤å€¼ <code>false</code></li></ul><p>å¦å¤–ï¼Œ<strong>å¼•ç”¨ç±»å‹</strong>ï¼ˆå¯¹è±¡ã€æ•°ç»„ç­‰ï¼‰çš„é»˜è®¤å€¼æ˜¯ <code>null</code>ã€‚</p><hr><h2 id="4-byteã€shortã€intã€long-å„å å¤šå°‘å­—èŠ‚ï¼Ÿ"><a href="#4-byteã€shortã€intã€long-å„å å¤šå°‘å­—èŠ‚ï¼Ÿ" class="headerlink" title="4. byteã€shortã€intã€long å„å å¤šå°‘å­—èŠ‚ï¼Ÿ"></a>4. <code>byte</code>ã€<code>short</code>ã€<code>int</code>ã€<code>long</code> å„å å¤šå°‘å­—èŠ‚ï¼Ÿ</h2><ul><li><code>byte</code>ï¼š<strong>1 å­—èŠ‚</strong>ï¼ˆ8 ä½ï¼‰</li><li><code>short</code>ï¼š<strong>2 å­—èŠ‚</strong>ï¼ˆ16 ä½ï¼‰</li><li><code>int</code>ï¼š<strong>4 å­—èŠ‚</strong>ï¼ˆ32 ä½ï¼‰</li><li><code>long</code>ï¼š<strong>8 å­—èŠ‚</strong>ï¼ˆ64 ä½ï¼‰</li></ul><p>ï¼ˆä¸Šè¿°ä¸º Java è¯­è¨€è§„èŒƒå®šä¹‰ï¼Œä¸å¹³å°æ— å…³ã€‚ï¼‰</p><hr><h2 id="5-float-å’Œ-double-çš„åŒºåˆ«ï¼Ÿ"><a href="#5-float-å’Œ-double-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="5. float å’Œ double çš„åŒºåˆ«ï¼Ÿ"></a>5. <code>float</code> å’Œ <code>double</code> çš„åŒºåˆ«ï¼Ÿ</h2><ul><li>ç²¾åº¦ä¸å­˜å‚¨ï¼š<ul><li><code>float</code>ï¼š32 ä½å•ç²¾åº¦æµ®ç‚¹ï¼ˆIEEE 754ï¼‰ï¼Œçº¦ 6~7 ä½æœ‰æ•ˆæ•°å­—ã€‚</li><li><code>double</code>ï¼š64 ä½åŒç²¾åº¦æµ®ç‚¹ï¼ˆIEEE 754ï¼‰ï¼Œçº¦ 15~16 ä½æœ‰æ•ˆæ•°å­—ã€‚</li></ul></li><li>ç²¾åº¦æ›´é«˜çš„ <code>double</code> æ›´å¸¸ç”¨ï¼›<code>float</code> ç”¨äºèŠ‚çœå†…å­˜æˆ–ä¸ç‰¹å®š APIï¼ˆå¦‚å›¾å½¢åº“ï¼‰å…¼å®¹ã€‚</li><li>æ³¨æ„ï¼šæµ®ç‚¹æ•°æœ‰ç²¾åº¦è¯¯å·®ï¼Œä¸é€‚åˆåšç²¾ç¡®è´§å¸è®¡ç®—ï¼ˆåº”ä½¿ç”¨ <code>BigDecimal</code>ï¼‰ã€‚</li><li>é»˜è®¤æµ®ç‚¹å­—é¢é‡ä¸º <code>double</code>ï¼ˆä¾‹å¦‚ <code>1.2</code> æ˜¯ <code>double</code>ï¼Œå†™æˆ <code>1.2f</code> æ‰æ˜¯ <code>float</code>ï¼‰ã€‚</li></ul><hr><h2 id="6-char-ç±»å‹å å‡ ä¸ªå­—èŠ‚ï¼Ÿèƒ½å­˜æ±‰å­—å—ï¼Ÿ"><a href="#6-char-ç±»å‹å å‡ ä¸ªå­—èŠ‚ï¼Ÿèƒ½å­˜æ±‰å­—å—ï¼Ÿ" class="headerlink" title="6. char ç±»å‹å å‡ ä¸ªå­—èŠ‚ï¼Ÿèƒ½å­˜æ±‰å­—å—ï¼Ÿ"></a>6. <code>char</code> ç±»å‹å å‡ ä¸ªå­—èŠ‚ï¼Ÿèƒ½å­˜æ±‰å­—å—ï¼Ÿ</h2><ul><li><code>char</code> å  <strong>2 å­—èŠ‚</strong>ï¼ˆ16 ä½ï¼‰ï¼Œè¡¨ç¤º UTF-16 çš„ä¸€ä¸ª code unitã€‚</li><li>èƒ½å¦å­˜æ±‰å­—ï¼šå¤šæ•°å¸¸ç”¨æ±‰å­—ï¼ˆä½äºåŸºæœ¬å¤šæ–‡ç§å¹³é¢ BMPï¼‰å¯ä»¥ç”¨å•ä¸ª <code>char</code> è¡¨ç¤ºï¼ˆä¾‹å¦‚ <code>&#39;ä½ &#39;</code>ï¼‰ï¼›ä½†æœ‰äº›ç½•è§æ±‰å­—æˆ– emoji å±äºè¡¥å……å¹³é¢ï¼ˆSupplementary Planesï¼‰ï¼Œå®ƒä»¬éœ€è¦ <strong>ä¸¤ä¸ª charï¼ˆç§°ä¸º surrogate pairï¼‰</strong> æ¥è¡¨ç¤ºã€‚</li><li>å› æ­¤ï¼Œå•ä¸ª <code>char</code> èƒ½è¡¨ç¤ºä¸€ä¸ª UTF-16 code unitï¼Œè€Œä¸æ˜¯å®Œæ•´çš„ Unicode code pointã€‚å¤„ç† Unicode å­—ç¬¦æ—¶æ³¨æ„ä½¿ç”¨ <code>int codePoint</code> &#x2F; <code>Character</code> çš„ç›¸å…³ APIã€‚</li></ul><hr><h2 id="7-è‡ªåŠ¨è£…ç®±ï¼ˆautoboxingï¼‰å’Œæ‹†ç®±ï¼ˆunboxingï¼‰çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#7-è‡ªåŠ¨è£…ç®±ï¼ˆautoboxingï¼‰å’Œæ‹†ç®±ï¼ˆunboxingï¼‰çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="7. è‡ªåŠ¨è£…ç®±ï¼ˆautoboxingï¼‰å’Œæ‹†ç®±ï¼ˆunboxingï¼‰çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>7. è‡ªåŠ¨è£…ç®±ï¼ˆautoboxingï¼‰å’Œæ‹†ç®±ï¼ˆunboxingï¼‰çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><ul><li><p><strong>æ¦‚å¿µ</strong>ï¼š</p><ul><li>è£…ç®±ï¼šæŠŠåŸºæœ¬ç±»å‹è‡ªåŠ¨è½¬æ¢æˆå¯¹åº”çš„åŒ…è£…ç±»å‹ï¼ˆå¦‚ <code>int</code> â†’ <code>Integer</code>ï¼‰ã€‚</li><li>æ‹†ç®±ï¼šæŠŠåŒ…è£…ç±»å‹è‡ªåŠ¨è½¬æ¢å›åŸºæœ¬ç±»å‹ï¼ˆå¦‚ <code>Integer</code> â†’ <code>int</code>ï¼‰ã€‚</li></ul></li><li><p><strong>ç¼–è¯‘å™¨è¡Œä¸º</strong>ï¼šè‡ªåŠ¨è£…ç®±&#x2F;æ‹†ç®±æ˜¯åœ¨ç¼–è¯‘æœŸç”± Java ç¼–è¯‘å™¨æ’å…¥å¯¹åº”çš„è°ƒç”¨ï¼Œç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;        <span class="comment">// ç¼–è¯‘å™¨ä¼šè½¬æ¢ä¸º Integer.valueOf(10)</span></span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> a;             <span class="comment">// ç¼–è¯‘å™¨ä¼šè½¬æ¢ä¸º a.intValue()</span></span><br></pre></td></tr></table></figure></li><li><p><strong>valueOf ç¼“å­˜</strong>ï¼šåŒ…è£…ç±»ï¼ˆå¦‚ <code>Integer.valueOf(int)</code>ï¼‰ä¼šå¯¹å°æ•´æ•°ï¼ˆé»˜è®¤ -128 åˆ° 127ï¼‰åšç¼“å­˜ä»¥é‡ç”¨å¯¹è±¡ï¼Œå‡å°‘é¢‘ç¹åˆ›å»ºå¯¹è±¡ã€‚</p></li><li><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p><ul><li><p>æ‹†ç®± <code>null</code> ä¼šæŠ›å‡º <code>NullPointerException</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">x</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> x; <span class="comment">// NPE</span></span><br></pre></td></tr></table></figure></li><li><p>è£…ç®±&#x2F;æ‹†ç®±ä¼šæœ‰æ€§èƒ½å¼€é”€ï¼ˆå¯¹è±¡åˆ›å»ºã€è£…ç®±&#x2F;æ‹†ç®±æ–¹æ³•è°ƒç”¨ï¼‰ï¼Œåœ¨æ€§èƒ½æ•æ„Ÿåœºæ™¯å°½é‡ä½¿ç”¨åŸºæœ¬ç±»å‹æˆ–æ‰‹åŠ¨ä¼˜åŒ–ã€‚</p></li><li><p>æ¯”è¾ƒæ—¶æ³¨æ„ï¼š<code>Integer a = 100; Integer b = 100; a==b</code> åœ¨ç¼“å­˜èŒƒå›´å†…å¯èƒ½ä¸º <code>true</code>ï¼Œè¶…å‡ºèŒƒå›´åˆ™é€šå¸¸ä¸º <code>false</code>ã€‚</p></li></ul></li></ul><hr><h2 id="8-å’Œ-equals-çš„åŒºåˆ«ï¼Ÿ"><a href="#8-å’Œ-equals-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="8. == å’Œ equals() çš„åŒºåˆ«ï¼Ÿ"></a>8. <code>==</code> å’Œ <code>equals()</code> çš„åŒºåˆ«ï¼Ÿ</h2><ul><li><strong>&#x3D;&#x3D;</strong>ï¼š<ul><li>å¯¹äºåŸºæœ¬ç±»å‹ï¼šæ¯”è¾ƒ <strong>å€¼</strong>ï¼ˆæ•°å€¼æ˜¯å¦ç›¸ç­‰ï¼‰ã€‚</li><li>å¯¹äºå¼•ç”¨ç±»å‹ï¼šæ¯”è¾ƒ <strong>å¼•ç”¨åœ°å€</strong>ï¼ˆæ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚</li></ul></li><li><strong>equals()</strong>ï¼š<ul><li>æ˜¯ <code>Object</code> çš„æ–¹æ³•ï¼Œé»˜è®¤å®ç°ä¹Ÿæ˜¯æ¯”è¾ƒå¼•ç”¨ï¼ˆç­‰ä»·äº <code>==</code>ï¼‰ã€‚</li><li>è®¸å¤šç±»ï¼ˆå¦‚ <code>String</code>ã€<code>Integer</code>ã€é›†åˆç±»ç­‰ï¼‰é‡å†™äº† <code>equals()</code>ï¼Œç”¨äºæ¯”è¾ƒ<strong>é€»è¾‘&#x2F;å†…å®¹ç›¸ç­‰</strong>ã€‚</li></ul></li><li><strong>ä½¿ç”¨å»ºè®®</strong>ï¼š<ul><li>æ¯”è¾ƒå¯¹è±¡å†…å®¹ç”¨ <code>equals()</code>ï¼ˆéœ€æ£€æŸ¥ <code>null</code>ï¼‰ï¼Œæ¯”è¾ƒæ˜¯å¦åŒä¸€å®ä¾‹ç”¨ <code>==</code>ã€‚</li><li>ä¸ <code>equals()</code> é…å¥—åº”é‡å†™ <code>hashCode()</code>ï¼ˆè§ä¸‹é¢˜ï¼‰ã€‚</li></ul></li></ul><hr><h2 id="9-hashCode-å’Œ-equals-çš„å…³ç³»ï¼Ÿ"><a href="#9-hashCode-å’Œ-equals-çš„å…³ç³»ï¼Ÿ" class="headerlink" title="9. hashCode å’Œ equals çš„å…³ç³»ï¼Ÿ"></a>9. <code>hashCode</code> å’Œ <code>equals</code> çš„å…³ç³»ï¼Ÿ</h2><ul><li><strong>åˆåŒï¼ˆContractï¼‰</strong>ï¼ˆé‡è¦ï¼‰ï¼š<ol><li>å¦‚æœä¸¤ä¸ªå¯¹è±¡é€šè¿‡ <code>equals()</code> è¢«åˆ¤å®šä¸ºç›¸ç­‰ï¼ˆ<code>a.equals(b)</code> ä¸º <code>true</code>ï¼‰ï¼Œé‚£ä¹ˆ <code>a.hashCode() == b.hashCode()</code> å¿…é¡»æˆç«‹ã€‚</li><li>åä¹‹ä¸è¦æ±‚ï¼š<code>hashCode</code> ç›¸ç­‰çš„å¯¹è±¡ä¸ä¸€å®š <code>equals()</code> ç›¸ç­‰ï¼ˆå“ˆå¸Œå†²çªå…è®¸ï¼‰ã€‚</li></ol></li><li><strong>åœ¨å“ˆå¸Œé›†åˆä¸­çš„è§’è‰²</strong>ï¼š<ul><li>å“ˆå¸Œè¡¨ï¼ˆ<code>HashMap</code>&#x2F;<code>HashSet</code>ï¼‰å…ˆç”¨ <code>hashCode()</code> æ‰¾åˆ°æ¡¶ï¼ˆbucketï¼‰ï¼Œè‹¥æ¡¶ä¸­æœ‰å¤šä¸ªå…ƒç´ ï¼Œå†ç”¨ <code>equals()</code> é€ä¸ªæ¯”è¾ƒç¡®è®¤ç›¸ç­‰æˆ–å†²çªã€‚</li><li>å¦‚æœåªé‡å†™ <code>equals()</code> è€Œä¸é‡å†™ <code>hashCode()</code> ä¼šç ´åé›†åˆè¡Œä¸ºï¼ˆä¾‹å¦‚æ”¾å…¥ <code>HashSet</code> åæ— æ³•æ­£ç¡®æŸ¥æ‰¾ï¼‰ã€‚</li></ul></li><li><strong>å®ç°è¦ç‚¹</strong>ï¼š<ul><li><code>hashCode()</code> è¦å°½é‡åˆ†æ•£ï¼ˆé™ä½å†²çªï¼‰ï¼Œå¹¶åœ¨å¯¹è±¡ä¸å¯å˜å­—æ®µä¸ŠåŸºäºç›¸åŒè§„åˆ™è®¡ç®—ã€‚</li><li>è‹¥å¯¹è±¡å¯å˜ï¼Œè‹¥ç”¨äºå“ˆå¸Œé›†åˆè¦å°å¿ƒï¼šä¿®æ”¹å­—æ®µä¼šå¯¼è‡´ <code>hashCode()</code> æ”¹å˜ï¼Œç ´åé›†åˆå†…éƒ¨ç»“æ„ã€‚</li></ul></li></ul><hr><h2 id="10-Stringã€StringBufferã€StringBuilder-çš„åŒºåˆ«ï¼Ÿ"><a href="#10-Stringã€StringBufferã€StringBuilder-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="10. Stringã€StringBufferã€StringBuilder çš„åŒºåˆ«ï¼Ÿ"></a>10. <code>String</code>ã€<code>StringBuffer</code>ã€<code>StringBuilder</code> çš„åŒºåˆ«ï¼Ÿ</h2><ul><li><strong>String</strong>ï¼š<ul><li>ä¸å¯å˜ï¼ˆimmutableï¼‰ï¼Œæ¯æ¬¡ä¿®æ”¹éƒ½ä¼šäº§ç”Ÿæ–°çš„å¯¹è±¡ï¼ˆæˆ–æ–°å†…éƒ¨ char&#x2F;byte æ•°ç»„ï¼‰ã€‚</li><li>çº¿ç¨‹å®‰å…¨ï¼ˆå› ä¸ºä¸å¯å˜ï¼‰ï¼Œé€‚åˆé¢‘ç¹è¯»å–ã€å°‘é‡ä¿®æ”¹çš„åœºæ™¯ã€‚</li></ul></li><li><strong>StringBuffer</strong>ï¼š<ul><li>å¯å˜çš„å­—ç¬¦åºåˆ—ï¼ˆå†…éƒ¨æœ‰ç¼“å†²åŒº <code>char[]</code>&#x2F;<code>byte[]</code>ï¼‰ï¼Œå‡ ä¹ä¸ <code>StringBuilder</code> æ¥å£ç›¸åŒã€‚</li><li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼Œå…¶æ–¹æ³•å¤§å¤šä½¿ç”¨ <code>synchronized</code>ï¼Œå› æ­¤åœ¨å¤šçº¿ç¨‹ä¸‹å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹å®‰å…¨ä½¿ç”¨ã€‚</li><li>ç›¸å¯¹è¾ƒæ…¢ï¼ˆåŒæ­¥å¼€é”€ï¼‰ã€‚</li></ul></li><li><strong>StringBuilderï¼ˆJava 5+ï¼‰</strong>ï¼š<ul><li>å¯å˜ï¼Œ<strong>éçº¿ç¨‹å®‰å…¨</strong>ï¼ˆæ²¡æœ‰åŒæ­¥ï¼‰ï¼Œæ¯” <code>StringBuffer</code> å¿«ã€‚</li><li>æ¨èåœ¨å•çº¿ç¨‹æˆ–å¤–éƒ¨å·²åŒæ­¥çš„åœºæ™¯ä¸‹ä½¿ç”¨ã€‚</li></ul></li><li><strong>é€‰æ‹©å»ºè®®</strong>ï¼š<ul><li>å¤šçº¿ç¨‹éœ€è¦å¯å˜å­—ç¬¦ä¸²ï¼š<code>StringBuffer</code>ï¼ˆæˆ–å¤–éƒ¨åŒæ­¥ï¼‰ã€‚</li><li>å•çº¿ç¨‹&#x2F;å±€éƒ¨æ„é€ å­—ç¬¦ä¸²ï¼š<code>StringBuilder</code>ã€‚</li><li>å¸¸é‡å­—ç¬¦ä¸²æˆ–å°‘é‡æ‹¼æ¥ï¼š<code>String</code>ï¼ˆç¼–è¯‘å™¨å¯¹ <code>+</code> ä¼šä¼˜åŒ–ä¸º <code>StringBuilder</code>ï¼‰ã€‚</li></ul></li></ul><hr><h2 id="11-ä¸ºä»€ä¹ˆ-String-æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Ÿ"><a href="#11-ä¸ºä»€ä¹ˆ-String-æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Ÿ" class="headerlink" title="11. ä¸ºä»€ä¹ˆ String æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Ÿ"></a>11. ä¸ºä»€ä¹ˆ <code>String</code> æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Ÿ</h2><p>åŸå› ï¼ˆå‡ æ¡é‡è¦ç†ç”±ï¼‰ï¼š</p><ol><li><strong>å®‰å…¨æ€§</strong>ï¼š<code>String</code> ç»å¸¸ç”¨äºå…³é”®åœºæ™¯ï¼ˆç±»åŠ è½½å™¨ã€ç½‘ç»œåœ°å€ã€æ–‡ä»¶åã€æƒé™æ£€æŸ¥ã€æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ç­‰ï¼‰ã€‚ä¸å¯å˜ä¿è¯åœ¨ä¼ é€’å¼•ç”¨æ—¶ä¸è¢«æ¶æ„æˆ–æ„å¤–ä¿®æ”¹ã€‚</li><li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šä¸å¯å˜å¯¹è±¡å›ºæœ‰çº¿ç¨‹å®‰å…¨ï¼Œå¤šä¸ªçº¿ç¨‹å¯å…±äº«åŒä¸€ <code>String</code> å®ä¾‹è€Œæ— éœ€åŒæ­¥ã€‚</li><li><strong>æ€§èƒ½ï¼ˆç¼“å­˜ hashCodeï¼‰</strong>ï¼š<code>String</code> çš„å“ˆå¸Œå€¼å¯ç¼“å­˜ï¼ˆ<code>hash</code> å­—æ®µï¼‰ï¼Œä¾¿äºä½œä¸º Map çš„ keyï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</li><li><strong>å­—ç¬¦ä¸²å¸¸é‡æ± </strong>ï¼šå¯å®‰å…¨åœ°å°†å­—é¢é‡æ”¾å…¥æ± ä¸­é‡ç”¨ï¼Œä¸ç”¨å¤åˆ¶æˆ–æ‹…å¿ƒä¿®æ”¹ã€‚</li><li><strong>ä¼˜åŒ–</strong>ï¼šJVM å¯è¿›è¡Œå…±äº«ã€å¸¸é‡æŠ˜å ç­‰ä¼˜åŒ–ï¼ˆæ›´æ˜“äºå®ç°æŸäº›ç¼–è¯‘æœŸ&#x2F;è¿è¡ŒæœŸä¼˜åŒ–ï¼‰ã€‚</li></ol><hr><h2 id="12-String-å¸¸é‡æ± çš„å®ç°æœºåˆ¶ï¼Ÿ"><a href="#12-String-å¸¸é‡æ± çš„å®ç°æœºåˆ¶ï¼Ÿ" class="headerlink" title="12. String å¸¸é‡æ± çš„å®ç°æœºåˆ¶ï¼Ÿ"></a>12. <code>String</code> å¸¸é‡æ± çš„å®ç°æœºåˆ¶ï¼Ÿ</h2><ul><li><strong>æ¦‚å¿µ</strong>ï¼šç¼–è¯‘æœŸå’Œè¿è¡ŒæœŸç»´æŠ¤ä¸€ä¸ªå­—ç¬¦ä¸²æ± ï¼ˆString Intern Poolï¼‰ï¼Œç”¨äºå­˜æ”¾å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆliteralï¼‰å’Œæ˜¾å¼ <code>intern()</code> åçš„å­—ç¬¦ä¸²ï¼Œä»¥ä¾¿é‡ç”¨ç›¸åŒå†…å®¹çš„ <code>String</code> å®ä¾‹ã€‚</li><li><strong>ç¼–è¯‘æœŸ</strong>ï¼šæºä»£ç ä¸­çš„å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆå¦‚ <code>&quot;abc&quot;</code>ï¼‰ä¼šè¢«æ”¾åˆ°å¸¸é‡æ± ï¼ˆç¼–è¯‘åçš„ class æ–‡ä»¶å¸¸é‡æ± ï¼‰ï¼Œç±»åŠ è½½åè¿™äº›å­—é¢é‡ä¼šæ”¾å…¥è¿è¡Œæ—¶çš„å­—ç¬¦ä¸²æ± ã€‚</li><li><strong>è¿è¡ŒæœŸ</strong>ï¼š<ul><li>ä»¥å‰ï¼ˆJava 6 åŠæ›´æ—©ï¼‰ï¼šå­—ç¬¦ä¸²å¸¸é‡æ± åœ¨ PermGenï¼ˆæ–¹æ³•åŒºï¼‰ä¸­ã€‚</li><li>Java 7 èµ·ï¼šå¸¸é‡æ± è¿ç§»åˆ° Java å †ï¼ˆè¿è¡Œæ—¶å¸¸é‡æ± ä¹Ÿåœ¨å †é‡Œï¼‰ï¼Œé¿å… PermGen é—®é¢˜ã€‚</li></ul></li><li><strong>intern()</strong>ï¼šå½“è°ƒç”¨ <code>s.intern()</code> æ—¶ï¼ŒJVM ä¼šæ£€æŸ¥æ± ä¸­æ˜¯å¦å·²æœ‰ç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸²ï¼š<ul><li>è‹¥å­˜åœ¨ï¼Œè¿”å›æ± ä¸­çš„å¼•ç”¨ï¼›</li><li>è‹¥ä¸å­˜åœ¨ï¼Œå°†è¯¥å­—ç¬¦ä¸²çš„å¼•ç”¨åŠ å…¥æ± å¹¶è¿”å›å®ƒã€‚</li></ul></li><li><strong>ç¼–è¯‘æ—¶ä¼˜åŒ–</strong>ï¼šå­—ç¬¦ä¸²å¸¸é‡çš„æ‹¼æ¥ï¼ˆç¼–è¯‘æ—¶å¸¸é‡ï¼‰ä¼šåœ¨ç¼–è¯‘æœŸåˆå¹¶ï¼Œå¦‚ <code>&quot;a&quot; + &quot;b&quot;</code> â†’ <code>&quot;ab&quot;</code>ï¼Œç›´æ¥æ”¾å…¥å¸¸é‡æ± ï¼›è€Œè¿è¡Œæ—¶æ‹¼æ¥ï¼ˆå˜é‡å‚ä¸ï¼‰åˆ™ä½¿ç”¨ <code>StringBuilder</code>ã€‚</li></ul><hr><h2 id="13-new-String-abc-åˆ›å»ºäº†å‡ ä¸ªå¯¹è±¡ï¼Ÿ"><a href="#13-new-String-abc-åˆ›å»ºäº†å‡ ä¸ªå¯¹è±¡ï¼Ÿ" class="headerlink" title="13. new String(&quot;abc&quot;) åˆ›å»ºäº†å‡ ä¸ªå¯¹è±¡ï¼Ÿ"></a>13. <code>new String(&quot;abc&quot;)</code> åˆ›å»ºäº†å‡ ä¸ªå¯¹è±¡ï¼Ÿ</h2><ul><li><strong>é€šå¸¸æƒ…å½¢</strong>ï¼š<ul><li>è‹¥ <code>&quot;abc&quot;</code> å­—é¢é‡å°šæœªåœ¨å¸¸é‡æ± ä¸­å­˜åœ¨ï¼Œæ‰§è¡Œ <code>new String(&quot;abc&quot;)</code> ä¼šå¯¼è‡´ <strong>ä¸¤ä¸ªå¯¹è±¡</strong> è¢«åˆ›å»ºï¼šå¸¸é‡æ± ä¸­çš„ <code>&quot;abc&quot;</code>ï¼ˆä¸€ä¸ª <code>String</code>ï¼‰å’Œå †ä¸­é€šè¿‡ <code>new</code> åˆ›å»ºçš„æ–°çš„ <code>String</code> å®ä¾‹ï¼ˆå†…å®¹é€šå¸¸æ˜¯å¯¹å¸¸é‡æ± ä¸­å­—ç¬¦æ•°ç»„çš„å¤åˆ¶æˆ–å…±äº«ï¼Œå…·ä½“å®ç°éš Java ç‰ˆæœ¬è€Œå¼‚ï¼‰ã€‚</li><li>å¦‚æœå­—é¢é‡ <code>&quot;abc&quot;</code> å·²ç»å­˜åœ¨äºå¸¸é‡æ± ä¸­ï¼ˆä¾‹å¦‚ä¹‹å‰è¢«åŠ è½½è¿‡ï¼‰ï¼Œé‚£ä¹ˆ <code>new String(&quot;abc&quot;)</code> åªä¼šåˆ›å»º <strong>ä¸€ä¸ªå †å¯¹è±¡</strong>ï¼ˆnew çš„é‚£ä¸ª <code>String</code>ï¼‰ã€‚</li></ul></li><li><strong>æ³¨æ„</strong>ï¼šè‡ª Java 7&#x2F;9 å <code>String</code> å†…éƒ¨å®ç°æ”¹å˜ï¼ˆå‹ç¼©å­—ç¬¦ä¸²ã€byte[] å­˜å‚¨ç­‰ï¼‰ï¼Œä½†é€»è¾‘ä¸Šä¸Šè¿°ç»“è®ºæˆç«‹ï¼šé€šå¸¸ 1 æˆ– 2 ä¸ªå¯¹è±¡ï¼Œå–å†³äºå¸¸é‡æ± ä¸­æ˜¯å¦å·²å­˜åœ¨è¯¥å­—é¢é‡ã€‚</li></ul><hr><h2 id="14-final-å…³é”®å­—çš„ä½œç”¨ï¼Ÿ"><a href="#14-final-å…³é”®å­—çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="14. final å…³é”®å­—çš„ä½œç”¨ï¼Ÿ"></a>14. <code>final</code> å…³é”®å­—çš„ä½œç”¨ï¼Ÿ</h2><ul><li><strong>ç”¨äºç±»ï¼ˆfinal classï¼‰</strong>ï¼šç±»ä¸å¯è¢«ç»§æ‰¿ï¼ˆå¦‚ <code>String</code>ï¼‰ã€‚</li><li><strong>ç”¨äºæ–¹æ³•ï¼ˆfinal æ–¹æ³•ï¼‰</strong>ï¼šæ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™ï¼ˆoverrideï¼‰ï¼Œç”¨äºç¡®ä¿è¡Œä¸ºä¸å¯å˜ã€‚</li><li><strong>ç”¨äºå˜é‡ï¼ˆfinal å­—æ®µ&#x2F;å±€éƒ¨å˜é‡ï¼‰</strong>ï¼š<ul><li>å¯¹åŸºæœ¬ç±»å‹ï¼šèµ‹å€¼åå€¼ä¸å¯æ”¹å˜ï¼ˆå¸¸é‡ï¼‰ã€‚</li><li>å¯¹å¼•ç”¨ç±»å‹ï¼šå¼•ç”¨ä¸å¯æ”¹å˜ï¼ˆä¸èƒ½æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œä½†æ‰€æŒ‡å‘å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ä»å¯å˜ï¼ˆé™¤éå¯¹è±¡æœ¬èº«ä¸å¯å˜ï¼‰ã€‚</li><li><code>static final</code> å¸¸ç”¨æ¥å®šä¹‰å¸¸é‡ï¼ˆç¼–è¯‘æœŸå¸¸é‡ï¼‰ã€‚</li></ul></li><li><strong>ç”¨äºå‚æ•°</strong>ï¼ˆæ–¹æ³•å½¢å‚å¯ä»¥å£°æ˜ä¸º <code>final</code>ï¼‰ï¼šä»£è¡¨æ–¹æ³•å†…ä¸èƒ½ä¿®æ”¹è¯¥å‚æ•°å¼•ç”¨&#x2F;å€¼ã€‚</li><li><strong>å…¶å®ƒç”¨é€”</strong>ï¼šåœ¨å¤šçº¿ç¨‹ä¸­ï¼Œ<code>final</code> å­—æ®µçš„å†™-æ„é€ è¿‡ç¨‹è¢« JMMï¼ˆJava å†…å­˜æ¨¡å‹ï¼‰å¤„ç†ï¼Œç¡®ä¿æ„é€ å®Œæˆåå…¶ä»–çº¿ç¨‹å¯è§ï¼ˆå®‰å…¨å‘å¸ƒæ–¹é¢æœ‰å¥½å¤„ï¼‰ã€‚</li></ul><hr><h2 id="15-static-å…³é”®å­—çš„ä½œç”¨ï¼Ÿ"><a href="#15-static-å…³é”®å­—çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="15. static å…³é”®å­—çš„ä½œç”¨ï¼Ÿ"></a>15. <code>static</code> å…³é”®å­—çš„ä½œç”¨ï¼Ÿ</h2><ul><li>ç”¨äºå£°æ˜ç±»çº§åˆ«æˆå‘˜ï¼ˆå­—æ®µã€æ–¹æ³•ã€åˆå§‹åŒ–å—ã€åµŒå¥—ç±»ï¼‰ï¼Œä¸ä¾èµ–å®ä¾‹ã€‚</li><li><strong>static å˜é‡</strong>ï¼šç±»å˜é‡ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä»½ã€‚å†…å­˜ä¸­ä»…æœ‰ä¸€ä»½å‰¯æœ¬ã€‚</li><li><strong>static æ–¹æ³•</strong>ï¼šç±»æ–¹æ³•ï¼Œå¯é€šè¿‡ <code>ClassName.method()</code> è°ƒç”¨ï¼›ä¸èƒ½ç›´æ¥è®¿é—®éé™æ€æˆå‘˜ï¼ˆå› æ—  thisï¼‰ã€‚</li><li><strong>static ä»£ç å—</strong>ï¼šç±»åŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼ˆç”¨äºé™æ€åˆå§‹åŒ–ï¼‰ã€‚</li><li><strong>static åµŒå¥—ç±»</strong>ï¼šå¯ä»¥å£°æ˜ä¸ºé™æ€çš„å†…éƒ¨ç±»ï¼ˆé™æ€åµŒå¥—ç±»ï¼‰ï¼Œæ²¡æœ‰å¤–éƒ¨å®ä¾‹å¼•ç”¨ã€‚</li></ul><hr><h2 id="16-static-ä¿®é¥°å˜é‡ã€æ–¹æ³•ã€ä»£ç å—åˆ†åˆ«æ„å‘³ç€ä»€ä¹ˆï¼Ÿ"><a href="#16-static-ä¿®é¥°å˜é‡ã€æ–¹æ³•ã€ä»£ç å—åˆ†åˆ«æ„å‘³ç€ä»€ä¹ˆï¼Ÿ" class="headerlink" title="16. static ä¿®é¥°å˜é‡ã€æ–¹æ³•ã€ä»£ç å—åˆ†åˆ«æ„å‘³ç€ä»€ä¹ˆï¼Ÿ"></a>16. <code>static</code> ä¿®é¥°å˜é‡ã€æ–¹æ³•ã€ä»£ç å—åˆ†åˆ«æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</h2><ul><li><strong>static å˜é‡ï¼ˆç±»å˜é‡ï¼‰</strong>ï¼š<ul><li>éšç±»åŠ è½½è€Œåˆ›å»ºï¼Œæ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®ã€‚</li><li>å¯é€šè¿‡ <code>ClassName.field</code> æˆ– <code>instance.field</code>ï¼ˆä¸æ¨èï¼‰è®¿é—®ã€‚</li></ul></li><li><strong>static æ–¹æ³•</strong>ï¼š<ul><li>å±äºç±»ï¼Œè°ƒç”¨æ—¶æ— éœ€å®ä¾‹ã€‚</li><li>ä¸èƒ½ä½¿ç”¨ <code>this</code>ã€ä¸èƒ½ç›´æ¥è®¿é—®éé™æ€æˆå‘˜ã€‚</li><li>å¯ä½œä¸ºå·¥å…·æ–¹æ³•ï¼ˆå¦‚ <code>Math.abs()</code>ï¼‰ã€‚</li></ul></li><li><strong>static ä»£ç å—</strong>ï¼š<ul><li>åœ¨ç±»åŠ è½½é˜¶æ®µæ‰§è¡Œä¸€æ¬¡ï¼Œç”¨äºå¤æ‚é™æ€åˆå§‹åŒ–ï¼ˆæ¯”å¦‚åˆå§‹åŒ–é™æ€å¸¸é‡ã€åŠ è½½æœ¬åœ°åº“ç­‰ï¼‰ã€‚</li><li>æ‰§è¡Œé¡ºåºï¼šé™æ€å—æŒ‰å®šä¹‰é¡ºåºæ‰§è¡Œï¼Œç±»åŠ è½½æ—¶è¿è¡Œï¼ˆåœ¨å®ä¾‹åŒ–ä¹‹å‰ï¼‰ã€‚</li></ul></li></ul><hr><h2 id="17-static-å’Œ-final-èƒ½ä¸€èµ·ç”¨å—ï¼Ÿ"><a href="#17-static-å’Œ-final-èƒ½ä¸€èµ·ç”¨å—ï¼Ÿ" class="headerlink" title="17. static å’Œ final èƒ½ä¸€èµ·ç”¨å—ï¼Ÿ"></a>17. <code>static</code> å’Œ <code>final</code> èƒ½ä¸€èµ·ç”¨å—ï¼Ÿ</h2><ul><li><p><strong>èƒ½</strong>ã€‚<code>static final</code> å¸¸ç”¨äºå®šä¹‰ç±»å¸¸é‡ï¼ˆå°¤å…¶æ˜¯åŸºæœ¬ç±»å‹å’Œ <code>String</code>ï¼‰ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public static final int MAX = 100;</span><br><span class="line">public static final String NAME = &quot;abc&quot;;</span><br></pre></td></tr></table></figure></li><li><p><strong>åŒºåˆ«</strong>ï¼š</p><ul><li>å¦‚æœæ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼ˆ<code>static final</code> åŸºæœ¬ç±»å‹æˆ– <code>String</code> ä¸”åœ¨ç¼–è¯‘æ—¶å¯ä»¥ç¡®å®šï¼‰ï¼Œç¼–è¯‘å™¨ä¼šå°†å…¶å†…è”åˆ°ä½¿ç”¨å¤„ï¼ˆè¢«å¼•ç”¨çš„ç±»ç¼–è¯‘åçœ‹åˆ°çš„æ˜¯å¸¸é‡å€¼ï¼‰ï¼Œæ³¨æ„è·¨æ¨¡å—ä¿®æ”¹å¯èƒ½å¯¼è‡´éœ€è¦é‡æ–°ç¼–è¯‘å¼•ç”¨æ–¹ã€‚</li><li>å¦‚æœæ˜¯ <code>static final</code> å¼•ç”¨å¯¹è±¡ä¸”ä¸æ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼Œåˆ™å¼•ç”¨æœ¬èº«ä¸å¯å˜ï¼Œä½†å¯¹è±¡å†…å®¹å¯èƒ½å¯å˜ã€‚</li></ul></li></ul><hr><h2 id="18-static-å†…éƒ¨ç±»å’Œéé™æ€å†…éƒ¨ç±»çš„åŒºåˆ«ï¼Ÿ"><a href="#18-static-å†…éƒ¨ç±»å’Œéé™æ€å†…éƒ¨ç±»çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="18. static å†…éƒ¨ç±»å’Œéé™æ€å†…éƒ¨ç±»çš„åŒºåˆ«ï¼Ÿ"></a>18. <code>static</code> å†…éƒ¨ç±»å’Œéé™æ€å†…éƒ¨ç±»çš„åŒºåˆ«ï¼Ÿ</h2><ul><li><strong>é™æ€å†…éƒ¨ç±»ï¼ˆstatic nested classï¼‰</strong>ï¼š<ul><li>ç›¸å½“äºå¤–éƒ¨ç±»çš„ä¸€ä¸ªé™æ€æˆå‘˜ã€‚</li><li><strong>æ²¡æœ‰</strong>å¯¹å¤–éƒ¨ç±»å®ä¾‹çš„éšå¼å¼•ç”¨ï¼ˆä¸èƒ½ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€æˆå‘˜ï¼‰ã€‚</li><li>å¯ä»¥åƒæ™®é€šç±»é‚£æ ·å®ä¾‹åŒ–ï¼š<code>Outer.StaticInner inner = new Outer.StaticInner();</code></li></ul></li><li><strong>éé™æ€å†…éƒ¨ç±»ï¼ˆinner classï¼‰</strong>ï¼š<ul><li>æ¯ä¸ªå®ä¾‹éšå¼æŒæœ‰ä¸€ä¸ªå¤–éƒ¨ç±»å®ä¾‹å¼•ç”¨ï¼ˆ<code>Outer.this</code>ï¼‰ï¼Œå¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ˆåŒ…æ‹¬ç§æœ‰æˆå‘˜ï¼‰ã€‚</li><li>åˆ›å»ºæ–¹å¼ï¼š<code>Outer outer = new Outer(); Outer.Inner inner = outer.new Inner();</code></li><li>å ç”¨å¤–éƒ¨ç±»å¯¹è±¡çš„å†…å­˜å¼•ç”¨ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²ï¼ˆå¦‚æœé•¿æœŸæŒæœ‰å†…éƒ¨ç±»å®ä¾‹å¯¼è‡´å¤–éƒ¨ç±»ä¸èƒ½è¢«å›æ”¶ï¼‰ã€‚</li></ul></li><li><strong>é€‰æ‹©åŸåˆ™</strong>ï¼šå¦‚æœå†…éƒ¨ç±»ä¸éœ€è¦è®¿é—®å¤–éƒ¨å®ä¾‹æˆå‘˜ï¼Œä¼˜å…ˆä½¿ç”¨ <code>static</code> åµŒå¥—ç±»ï¼Œé¿å…é¢å¤–å¼•ç”¨ã€‚</li></ul><hr><h2 id="19-Java-ä¸­çš„-this-å’Œ-super-çš„åŒºåˆ«ï¼Ÿ"><a href="#19-Java-ä¸­çš„-this-å’Œ-super-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="19. Java ä¸­çš„ this å’Œ super çš„åŒºåˆ«ï¼Ÿ"></a>19. Java ä¸­çš„ <code>this</code> å’Œ <code>super</code> çš„åŒºåˆ«ï¼Ÿ</h2><ul><li><strong>this</strong>ï¼š<ul><li>å¼•ç”¨å½“å‰å¯¹è±¡çš„å¼•ç”¨ã€‚</li><li>ç”¨äºè®¿é—®å½“å‰ç±»çš„å®ä¾‹å˜é‡ã€è°ƒç”¨å½“å‰ç±»çš„å…¶ä»–æ„é€ å™¨ï¼ˆ<code>this(...)</code>ï¼‰ã€æˆ–ä¼ é€’å½“å‰å¯¹è±¡å¼•ç”¨ã€‚</li></ul></li><li><strong>super</strong>ï¼š<ul><li>å¼•ç”¨å½“å‰å¯¹è±¡çš„çˆ¶ç±»éƒ¨åˆ†ã€‚</li><li>ç”¨äºè®¿é—®çˆ¶ç±»è¢«è¦†ç›–çš„æ–¹æ³•ï¼ˆ<code>super.method()</code>ï¼‰ã€çˆ¶ç±»å­—æ®µï¼ˆè‹¥æœ‰åŒåå­—æ®µï¼‰ã€ä»¥åŠåœ¨å­ç±»æ„é€ å™¨ç¬¬ä¸€è¡Œè°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼ˆ<code>super(...)</code>ï¼‰ã€‚</li></ul></li><li><strong>æ³¨æ„</strong>ï¼š<ul><li><code>this()</code> æˆ– <code>super()</code> å¿…é¡»åœ¨æ„é€ å™¨çš„ç¬¬ä¸€è¡Œï¼ˆä¸¤è€…ä¸èƒ½åŒæ—¶å‡ºç°ï¼‰ã€‚</li><li><code>super</code> ä¸èƒ½ç”¨äºè®¿é—®çˆ¶ç±»çš„ private æˆå‘˜ï¼ˆç¼–è¯‘æœŸé™åˆ¶ï¼‰ã€‚</li></ul></li></ul><hr><h2 id="20-Java-ä¸­æ„é€ æ–¹æ³•èƒ½å¦è¢«é‡å†™ï¼Ÿ"><a href="#20-Java-ä¸­æ„é€ æ–¹æ³•èƒ½å¦è¢«é‡å†™ï¼Ÿ" class="headerlink" title="20. Java ä¸­æ„é€ æ–¹æ³•èƒ½å¦è¢«é‡å†™ï¼Ÿ"></a>20. Java ä¸­æ„é€ æ–¹æ³•èƒ½å¦è¢«é‡å†™ï¼Ÿ</h2><ul><li><strong>ä¸èƒ½</strong>ã€‚é‡å†™ï¼ˆoverrideï¼‰é€‚ç”¨äºå®ä¾‹æ–¹æ³•ï¼Œæ„é€ æ–¹æ³•ä¸æ˜¯ç»§æ‰¿çš„æˆå‘˜ï¼Œå­ç±»ä¸èƒ½é‡å†™çˆ¶ç±»çš„æ„é€ å™¨ã€‚</li><li><strong>å¯ä»¥é‡è½½ï¼ˆoverloadï¼‰</strong>ï¼šåœ¨åŒä¸€ç±»ä¸­åŒåæ„é€ å™¨æœ‰ä¸åŒå‚æ•°åˆ—è¡¨å±äºé‡è½½ã€‚</li><li>å­ç±»æ„é€ å™¨å¯é€šè¿‡ <code>super(...)</code> æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ„é€ å™¨æ¥å®Œæˆçˆ¶ç±»åˆå§‹åŒ–ã€‚</li></ul><hr><h2 id="21-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿ"><a href="#21-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="21. æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿ"></a>21. æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿ</h2><ul><li><strong>æ¥å£ï¼ˆinterfaceï¼‰</strong>ï¼š<ul><li>æ—©æœŸï¼ˆJava 7 ä¹‹å‰ï¼‰ï¼šåªåŒ…å«æŠ½è±¡æ–¹æ³•ï¼ˆé»˜è®¤æ˜¯ <code>public abstract</code>ï¼‰å’Œ <code>public static final</code> å¸¸é‡ã€‚</li><li>Java 8+ï¼šå¯ä»¥åŒ…å« <code>default</code> æ–¹æ³•ä¸ <code>static</code> æ–¹æ³•ï¼ˆå¯ä»¥æœ‰éƒ¨åˆ†å®ç°ï¼‰ï¼›Java 9+ å…è®¸ <code>private</code> æ–¹æ³•ã€‚</li><li>æ”¯æŒå¤šç»§æ‰¿ï¼ˆä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼‰ã€‚</li><li>æ²¡æœ‰å®ä¾‹å­—æ®µï¼ˆé™¤ <code>static final</code> å¸¸é‡å¤–ï¼‰ã€‚</li></ul></li><li><strong>æŠ½è±¡ç±»ï¼ˆabstract classï¼‰</strong>ï¼š<ul><li>å¯ä»¥æœ‰å®ä¾‹å­—æ®µï¼ˆéé™æ€æˆå‘˜å˜é‡ï¼‰ã€å·²æœ‰å®ç°çš„æ–¹æ³•ï¼ˆå…·ä½“æ–¹æ³•ï¼‰ã€æ„é€ å™¨ã€‚</li><li>é€‚åˆè¡¨ç¤ºä¸€ç±»æœ‰å…±åŒè¡Œä¸ºå¹¶å…±äº«çŠ¶æ€çš„ç±»å±‚æ¬¡ã€‚</li><li>ç±»åªèƒ½å•ç»§æ‰¿ï¼ˆåªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ï¼‰ã€‚</li></ul></li><li><strong>é€‰æ‹©å»ºè®®</strong>ï¼š<ul><li>å¦‚æœéœ€è¦å¤šç»§æ‰¿è¡Œä¸ºã€åªå®šä¹‰æ–¹æ³•å¥‘çº¦ä¸”ä¸éœ€è¦çŠ¶æ€ï¼Œä½¿ç”¨æ¥å£ã€‚</li><li>å¦‚æœéœ€è¦æä¾›å…±æœ‰å®ç°å’ŒçŠ¶æ€ï¼Œä½¿ç”¨æŠ½è±¡ç±»ã€‚</li></ul></li></ul><hr><h2 id="22-æ¥å£ä¸­å¯ä»¥æœ‰-default-æ–¹æ³•å’Œ-static-æ–¹æ³•å—ï¼Ÿ"><a href="#22-æ¥å£ä¸­å¯ä»¥æœ‰-default-æ–¹æ³•å’Œ-static-æ–¹æ³•å—ï¼Ÿ" class="headerlink" title="22. æ¥å£ä¸­å¯ä»¥æœ‰ default æ–¹æ³•å’Œ static æ–¹æ³•å—ï¼Ÿ"></a>22. æ¥å£ä¸­å¯ä»¥æœ‰ <code>default</code> æ–¹æ³•å’Œ <code>static</code> æ–¹æ³•å—ï¼Ÿ</h2><ul><li><strong>å¯ä»¥ï¼ˆJava 8 èµ·ï¼‰</strong>ã€‚<ul><li><code>default</code> æ–¹æ³•ï¼šä¸ºå®ç°ç±»æä¾›é»˜è®¤å®ç°ï¼Œé¿å…ç ´åå·²æœ‰å®ç°ï¼ˆæ¥å£æ¼”åŒ–ï¼‰ã€‚å®ç°ç±»å¯ä»¥è¦†ç›–ï¼ˆoverrideï¼‰ã€‚</li><li><code>static</code> æ–¹æ³•ï¼šå±äºæ¥å£è‡ªèº«ï¼Œå¯ä»¥é€šè¿‡ <code>InterfaceName.method()</code> è°ƒç”¨ï¼Œä¸èƒ½é€šè¿‡å®ä¾‹è°ƒç”¨ã€‚</li></ul></li><li>Java 9 åŠä»¥åè¿˜å¯æœ‰ <code>private</code> æ–¹æ³•ï¼Œä¾›æ¥å£å†…éƒ¨å¤ç”¨å®ç°é€»è¾‘ã€‚</li></ul><hr><h2 id="23-Java-8-æ¥å£æ–°å¢äº†ä»€ä¹ˆï¼Ÿ"><a href="#23-Java-8-æ¥å£æ–°å¢äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="23. Java 8 æ¥å£æ–°å¢äº†ä»€ä¹ˆï¼Ÿ"></a>23. Java 8 æ¥å£æ–°å¢äº†ä»€ä¹ˆï¼Ÿ</h2><ul><li>Java 8 åœ¨æ¥å£ä¸­æ–°å¢äº† <strong>default æ–¹æ³•</strong> å’Œ <strong>static æ–¹æ³•</strong>ï¼Œå…è®¸æ¥å£æä¾›å¸¦å®ç°çš„æ–¹æ³•ï¼Œä»è€Œä¾¿äºæ¥å£çš„æ¼”åŒ–ï¼ˆå‘åå…¼å®¹ï¼‰ã€‚è¿™ä¹Ÿæ˜¯ Java 8 å¼•å…¥å‡½æ•°å¼ç¼–ç¨‹æ”¯æŒçš„åŸºç¡€ä¹‹ä¸€ï¼ˆå…è®¸æ¥å£ä½œä¸ºå‡½æ•°å¼æ¥å£ï¼‰ã€‚</li></ul><hr><h2 id="24-Java-8-æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§ï¼Œå¹¶è¯¦ç»†ä»‹ç»ï¼ˆé‡ç‚¹ï¼‰"><a href="#24-Java-8-æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§ï¼Œå¹¶è¯¦ç»†ä»‹ç»ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="24. Java 8 æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§ï¼Œå¹¶è¯¦ç»†ä»‹ç»ï¼ˆé‡ç‚¹ï¼‰"></a>24. Java 8 æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§ï¼Œå¹¶è¯¦ç»†ä»‹ç»ï¼ˆé‡ç‚¹ï¼‰</h2><h1 id="ä¸€ã€Java-8-æ–°ç‰¹æ€§æ·±å…¥è§£æ"><a href="#ä¸€ã€Java-8-æ–°ç‰¹æ€§æ·±å…¥è§£æ" class="headerlink" title="ä¸€ã€Java 8 æ–°ç‰¹æ€§æ·±å…¥è§£æ"></a>ä¸€ã€Java 8 æ–°ç‰¹æ€§æ·±å…¥è§£æ</h1><h2 id="1-Lambda-è¡¨è¾¾å¼"><a href="#1-Lambda-è¡¨è¾¾å¼" class="headerlink" title="1. Lambda è¡¨è¾¾å¼"></a>1. Lambda è¡¨è¾¾å¼</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><ul><li>åŒ¿åå‡½æ•°ï¼Œå…è®¸æŠŠè¡Œä¸ºä½œä¸ºå‚æ•°ä¼ é€’ã€‚</li><li>ç®€åŒ–åŒ¿åå†…éƒ¨ç±»å†™æ³•ï¼Œå®ç°å‡½æ•°å¼ç¼–ç¨‹ã€‚</li></ul><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;bb&quot;</span>, <span class="string">&quot;ccc&quot;</span>);</span><br><span class="line">Collections.sort(list, (s1, s2) -&gt; s1.length() - s2.length());</span><br></pre></td></tr></table></figure><h3 id="åº•å±‚åŸç†"><a href="#åº•å±‚åŸç†" class="headerlink" title="åº•å±‚åŸç†"></a>åº•å±‚åŸç†</h3><ul><li>ç¼–è¯‘å™¨ç”Ÿæˆé™æ€&#x2F;å®ä¾‹æ–¹æ³• + <code>invokedynamic</code> æŒ‡ä»¤ã€‚</li><li>JVM è°ƒç”¨ <code>LambdaMetafactory</code> åŠ¨æ€ç”Ÿæˆå‡½æ•°å¯¹è±¡ï¼Œå®ç° <strong>å‡½æ•°å¼æ¥å£</strong>ã€‚</li><li>æ•è·å¤–éƒ¨å˜é‡é€šè¿‡é—­åŒ…æœºåˆ¶å­˜å‚¨ï¼ˆå¿…é¡»æ˜¯ <code>effectively final</code>ï¼‰ã€‚</li></ul><h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ul><li>è¯­æ³•ç®€æ´</li><li>å¯ä½œä¸ºå‚æ•°ä¼ é€’è¡Œä¸º</li><li>æ€§èƒ½é«˜äºåŒ¿åå†…éƒ¨ç±»ï¼ˆå‡å°‘å¯¹è±¡åˆ›å»ºï¼‰</li></ul><hr><h2 id="2-å‡½æ•°å¼æ¥å£"><a href="#2-å‡½æ•°å¼æ¥å£" class="headerlink" title="2. å‡½æ•°å¼æ¥å£"></a>2. å‡½æ•°å¼æ¥å£</h2><h3 id="æ¦‚å¿µ-1"><a href="#æ¦‚å¿µ-1" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><ul><li>ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œç”¨ä½œ Lambda è¡¨è¾¾å¼çš„ç›®æ ‡ç±»å‹ã€‚</li><li>å¯ç”¨ <code>@FunctionalInterface</code> æ ‡è¯†ã€‚</li></ul><h3 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@FunctionalInterface</span><br><span class="line">interface Converter&lt;F, T&gt; &#123;</span><br><span class="line">    T convert(F from);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Converter&lt;String, Integer&gt; c = Integer::valueOf;</span><br><span class="line">System.out.println(c.convert(&quot;123&quot;)); // 123</span><br></pre></td></tr></table></figure><h3 id="åº•å±‚åŸç†-1"><a href="#åº•å±‚åŸç†-1" class="headerlink" title="åº•å±‚åŸç†"></a>åº•å±‚åŸç†</h3><ul><li>Lambda è¡¨è¾¾å¼ç¼–è¯‘æ—¶ç”Ÿæˆå®ç°å‡½æ•°å¼æ¥å£çš„å‡½æ•°å¯¹è±¡ã€‚</li><li>æ•è·å˜é‡é€šè¿‡é—­åŒ…å¯¹è±¡ä¿å­˜ã€‚</li></ul><h3 id="ç‰¹ç‚¹-1"><a href="#ç‰¹ç‚¹-1" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ul><li>ç®€åŒ–åŒ¿åç±»</li><li>æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹</li><li>å¯ä¸ Stream &#x2F; Optional ç­‰ç»“åˆ</li></ul><hr><h2 id="3-Stream-API"><a href="#3-Stream-API" class="headerlink" title="3. Stream API"></a>3. Stream API</h2><h3 id="æ¦‚å¿µ-2"><a href="#æ¦‚å¿µ-2" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><ul><li>å¯¹é›†åˆè¿›è¡Œå£°æ˜å¼æ“ä½œï¼ˆè¿‡æ»¤ã€æ˜ å°„ã€å½’çº¦ï¼‰ã€‚</li><li>æ”¯æŒ <strong>æƒ°æ€§æ±‚å€¼</strong> å’Œ <strong>å¹¶è¡Œå¤„ç†</strong>ã€‚</li></ul><h3 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; names = Arrays.asList(&quot;Alice&quot;, &quot;Bob&quot;, &quot;Charlie&quot;);</span><br><span class="line">List&lt;String&gt; filtered = names.stream()</span><br><span class="line">    .filter(s -&gt; s.length() &gt; 3)</span><br><span class="line">    .map(String::toUpperCase)</span><br><span class="line">    .collect(Collectors.toList());</span><br><span class="line">System.out.println(filtered); // [ALICE, CHARLIE]</span><br></pre></td></tr></table></figure><h3 id="åº•å±‚åŸç†-2"><a href="#åº•å±‚åŸç†-2" class="headerlink" title="åº•å±‚åŸç†"></a>åº•å±‚åŸç†</h3><ul><li>Stream æ˜¯æµæ°´çº¿å¯¹è±¡ï¼Œä¸­é—´æ“ä½œè¿”å›æ–°çš„ Streamï¼Œç»ˆç«¯æ“ä½œè§¦å‘è®¡ç®—ã€‚</li><li>ä¸²è¡Œæµï¼šé¡ºåºè¿­ä»£å™¨å¤„ç†</li><li>å¹¶è¡Œæµï¼šForkJoinPool åˆ†å—å¤„ç†</li></ul><h3 id="ç‰¹ç‚¹-2"><a href="#ç‰¹ç‚¹-2" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ul><li>å£°æ˜å¼ã€é“¾å¼æ“ä½œ</li><li>æ”¯æŒå¹¶è¡Œ</li><li>å¯ä¸ Lambda &#x2F; æ–¹æ³•å¼•ç”¨ç»“åˆ</li></ul><hr><h2 id="4-æ–¹æ³•å¼•ç”¨"><a href="#4-æ–¹æ³•å¼•ç”¨" class="headerlink" title="4. æ–¹æ³•å¼•ç”¨"></a>4. æ–¹æ³•å¼•ç”¨</h2><h3 id="æ¦‚å¿µ-3"><a href="#æ¦‚å¿µ-3" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><ul><li>Lambda è¡¨è¾¾å¼çš„ç®€åŒ–å†™æ³•ï¼Œå¼•ç”¨ç°æœ‰æ–¹æ³•ã€‚</li><li>ç±»å‹ï¼š<ol><li>é™æ€æ–¹æ³•å¼•ç”¨ï¼š<code>ClassName::staticMethod</code></li><li>å®ä¾‹æ–¹æ³•å¼•ç”¨ï¼š<code>instance::method</code></li><li>æ„é€ å™¨å¼•ç”¨ï¼š<code>ClassName::new</code></li></ol></li></ul><h3 id="ç¤ºä¾‹-3"><a href="#ç¤ºä¾‹-3" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; names = Arrays.asList(&quot;a&quot;, &quot;bb&quot;, &quot;ccc&quot;);</span><br><span class="line">names.forEach(System.out::println); // å®ä¾‹æ–¹æ³•å¼•ç”¨</span><br><span class="line">Supplier&lt;List&lt;String&gt;&gt; listSupplier = ArrayList::new; // æ„é€ å™¨å¼•ç”¨</span><br></pre></td></tr></table></figure><h3 id="åº•å±‚åŸç†-3"><a href="#åº•å±‚åŸç†-3" class="headerlink" title="åº•å±‚åŸç†"></a>åº•å±‚åŸç†</h3><ul><li>ç¼–è¯‘å™¨è½¬æˆ Lambda è¡¨è¾¾å¼ + invokedynamicã€‚</li><li>JVM ç”Ÿæˆå®ç°å‡½æ•°å¼æ¥å£çš„å‡½æ•°å¯¹è±¡ï¼Œå†…éƒ¨æŒæœ‰æ–¹æ³•å¼•ç”¨ã€‚</li></ul><h3 id="ç‰¹ç‚¹-3"><a href="#ç‰¹ç‚¹-3" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ul><li>ç®€æ´ç›´è§‚</li><li>å¯å‡å°‘ Lambda ä»£ç </li><li>ä¸ Stream &#x2F; Optional é…åˆä½¿ç”¨</li></ul><hr><h2 id="5-java-time-API"><a href="#5-java-time-API" class="headerlink" title="5. java.time API"></a>5. java.time API</h2><h3 id="æ¦‚å¿µ-4"><a href="#æ¦‚å¿µ-4" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><ul><li>æ›¿ä»£ <code>Date</code> &#x2F; <code>Calendar</code>ï¼Œä¸å¯å˜ã€çº¿ç¨‹å®‰å…¨ã€‚</li><li>æ ¸å¿ƒç±»ï¼š<ul><li><code>LocalDate</code> &#x2F; <code>LocalTime</code> &#x2F; <code>LocalDateTime</code>ï¼ˆæ— æ—¶åŒºï¼‰</li><li><code>ZonedDateTime</code>ï¼ˆå¸¦æ—¶åŒºï¼‰</li><li><code>Duration</code> &#x2F; <code>Period</code>ï¼ˆæ—¶é—´æ®µï¼‰</li></ul></li></ul><h3 id="ç¤ºä¾‹-4"><a href="#ç¤ºä¾‹-4" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LocalDate today = LocalDate.now();</span><br><span class="line">LocalDate tomorrow = today.plusDays(1);</span><br><span class="line">ZonedDateTime zdt = ZonedDateTime.now(ZoneId.of(&quot;Asia/Singapore&quot;));</span><br><span class="line">System.out.println(tomorrow);</span><br><span class="line">System.out.println(zdt);</span><br></pre></td></tr></table></figure><h3 id="åº•å±‚åŸç†-4"><a href="#åº•å±‚åŸç†-4" class="headerlink" title="åº•å±‚åŸç†"></a>åº•å±‚åŸç†</h3><ul><li>å†…éƒ¨å­—æ®µ <code>final</code> ä¿å­˜å€¼ï¼Œä¸å¯å˜ã€‚</li><li>å·¥å‚æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œé“¾å¼æ“ä½œè¿”å›æ–°å¯¹è±¡ã€‚</li><li>ä½¿ç”¨ enum + æ•´å‹&#x2F;å­—èŠ‚ä¼˜åŒ–å­˜å‚¨ï¼ˆå¦‚ LocalDate å¹´æœˆæ—¥ç”¨ intï¼‰ã€‚</li></ul><h3 id="ç‰¹ç‚¹-4"><a href="#ç‰¹ç‚¹-4" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ul><li>ä¸å¯å˜ï¼Œçº¿ç¨‹å®‰å…¨</li><li>é“¾å¼æ“ä½œï¼Œæ˜“ç»„åˆ</li><li>æ”¯æŒå„ç§å†æ³•å’Œæ—¶åŒºè®¡ç®—</li></ul><hr><h2 id="6-Optional"><a href="#6-Optional" class="headerlink" title="6. Optional"></a>6. Optional</h2><h3 id="æ¦‚å¿µ-5"><a href="#æ¦‚å¿µ-5" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><ul><li>å®¹å™¨å¯¹è±¡ï¼Œé˜²æ­¢ <code>NullPointerException</code>ã€‚</li><li>å¯ä»¥åŒ…å«å€¼æˆ–ä¸ºç©ºï¼ˆemptyï¼‰ã€‚</li></ul><h3 id="ç¤ºä¾‹-5"><a href="#ç¤ºä¾‹-5" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; opt1 = Optional.of(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">Optional&lt;String&gt; opt2 = Optional.ofNullable(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(opt1.isPresent()); <span class="comment">// true</span></span><br><span class="line">System.out.println(opt2.orElse(<span class="string">&quot;Default&quot;</span>)); <span class="comment">// Default</span></span><br><span class="line">opt1.map(String::toUpperCase).ifPresent(System.out::println); <span class="comment">// HELLO</span></span><br></pre></td></tr></table></figure><h3 id="åº•å±‚åŸç†-5"><a href="#åº•å±‚åŸç†-5" class="headerlink" title="åº•å±‚åŸç†"></a>åº•å±‚åŸç†</h3><ul><li>å†…éƒ¨ <code>value</code> å­—æ®µå­˜å‚¨éç©ºå€¼ï¼Œç©ºå€¼ä½¿ç”¨å•ä¾‹ <code>EMPTY</code>ã€‚</li><li><code>map</code> &#x2F; <code>flatMap</code> &#x2F; <code>filter</code> è¿”å›æ–°çš„ Optionalï¼Œå¯¹è±¡ä¸å¯å˜ã€‚</li><li>ä¸ Lambda &#x2F; å‡½æ•°å¼æ¥å£ç»“åˆå®ç°é“¾å¼å®‰å…¨æ“ä½œã€‚</li></ul><h3 id="ç‰¹ç‚¹-5"><a href="#ç‰¹ç‚¹-5" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ul><li>é¿å…æ˜¾å¼ null åˆ¤æ–­</li><li>æ”¯æŒé“¾å¼è°ƒç”¨</li><li>å¯ä¸ Stream &#x2F; Lambda é…åˆ</li></ul><hr><h2 id="Java-8-å…­å¤§æ ¸å¿ƒç‰¹æ€§åº•å±‚å¯¹æ¯”è¡¨"><a href="#Java-8-å…­å¤§æ ¸å¿ƒç‰¹æ€§åº•å±‚å¯¹æ¯”è¡¨" class="headerlink" title="Java 8 å…­å¤§æ ¸å¿ƒç‰¹æ€§åº•å±‚å¯¹æ¯”è¡¨"></a>Java 8 å…­å¤§æ ¸å¿ƒç‰¹æ€§åº•å±‚å¯¹æ¯”è¡¨</h2><table><thead><tr><th>ç‰¹æ€§</th><th>åº•å±‚å®ç°</th><th>æ ¸å¿ƒåŸç†</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>Lambda</td><td>invokedynamic + LambdaMetafactory</td><td>åŠ¨æ€ç”Ÿæˆå‡½æ•°å¯¹è±¡</td><td>ç®€æ´ã€æ€§èƒ½é«˜</td></tr><tr><td>å‡½æ•°å¼æ¥å£</td><td>å•æŠ½è±¡æ–¹æ³•æ¥å£</td><td>æ•è·å˜é‡é€šè¿‡é—­åŒ…å­˜å‚¨</td><td>ç®€åŒ–åŒ¿åç±»ï¼Œå‡½æ•°å¼ç¼–ç¨‹</td></tr><tr><td>Stream API</td><td>æµæ°´çº¿ + å»¶è¿Ÿæ±‚å€¼</td><td>ä¸­é—´æ“ä½œæƒ°æ€§ï¼Œç»ˆç«¯è§¦å‘</td><td>å£°æ˜å¼ã€å¯å¹¶è¡Œ</td></tr><tr><td>æ–¹æ³•å¼•ç”¨</td><td>Lambda ç®€åŒ–è¯­æ³• + invokedynamic</td><td>å†…éƒ¨æŒæœ‰æ–¹æ³•å¼•ç”¨</td><td>ç®€æ´ç›´è§‚ï¼Œå‡å°‘ä»£ç </td></tr><tr><td>java.time</td><td>ä¸å¯å˜å¯¹è±¡ + å·¥å‚æ–¹æ³•</td><td>finalå­—æ®µä¿å­˜å€¼ï¼Œé“¾å¼è¿”å›æ–°å¯¹è±¡</td><td>çº¿ç¨‹å®‰å…¨ï¼Œå¯ç»„åˆ</td></tr><tr><td>Optional</td><td>åŒ…è£…å¯¹è±¡ + å•ä¾‹ EMPTY</td><td>ä¸å¯å˜å®¹å™¨ï¼Œå‡½æ•°å¼é“¾å¼è°ƒç”¨</td><td>é¿å… NPEï¼Œå®‰å…¨é“¾å¼æ“ä½œ</td></tr></tbody></table><hr><h1 id="äºŒã€synchronized-åº•å±‚åŸç†æ·±å…¥è§£æ"><a href="#äºŒã€synchronized-åº•å±‚åŸç†æ·±å…¥è§£æ" class="headerlink" title="äºŒã€synchronized åº•å±‚åŸç†æ·±å…¥è§£æ"></a>äºŒã€synchronized åº•å±‚åŸç†æ·±å…¥è§£æ</h1><h2 id="1-JVM-é”çš„ç±»å‹"><a href="#1-JVM-é”çš„ç±»å‹" class="headerlink" title="1. JVM é”çš„ç±»å‹"></a>1. JVM é”çš„ç±»å‹</h2><table><thead><tr><th>é”ç±»å‹</th><th>ç‰¹ç‚¹</th><th>æ€§èƒ½</th></tr></thead><tbody><tr><td>åå‘é” (Biased Lock)</td><td>æ— ç«äº‰æ—¶åå‘ç¬¬ä¸€ä¸ªçº¿ç¨‹ï¼Œè½»é‡</td><td>é«˜</td></tr><tr><td>è½»é‡çº§é” (Lightweight)</td><td>ç«äº‰å°‘æ—¶ä½¿ç”¨ CAS å‡çº§é”</td><td>ä¸­</td></tr><tr><td>é‡é‡çº§é” (Monitor)</td><td>é«˜ç«äº‰æ—¶ä½¿ç”¨ OS mutexï¼Œé˜»å¡çº¿ç¨‹</td><td>ä½</td></tr></tbody></table><hr><h2 id="2-synchronized-å¯¹è±¡å¤´ç»“æ„"><a href="#2-synchronized-å¯¹è±¡å¤´ç»“æ„" class="headerlink" title="2. synchronized å¯¹è±¡å¤´ç»“æ„"></a>2. synchronized å¯¹è±¡å¤´ç»“æ„</h2><ul><li>æ¯ä¸ªå¯¹è±¡åœ¨ JVM å†…å­˜ä¸­éƒ½æœ‰ <strong>å¯¹è±¡å¤´ï¼ˆMark Wordï¼‰</strong>ï¼Œå­˜å‚¨é”ä¿¡æ¯ã€å“ˆå¸Œç ã€GC æ ‡è®°ç­‰ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å¯¹è±¡å¤´ Mark Word (32/64bit)</span><br><span class="line">+----------------+----------------+----------------+</span><br><span class="line">| HashCode       | GC info        | Lock info      |</span><br><span class="line">+----------------+----------------+----------------+</span><br></pre></td></tr></table></figure><ul><li><strong>é”æ ‡è®°ä½</strong>ï¼š<ul><li>00ï¼šæ— é”</li><li>01ï¼šåå‘é”</li><li>10ï¼šè½»é‡çº§é”</li><li>11ï¼šé‡é‡çº§é”</li></ul></li></ul><hr><h2 id="3-synchronized-æ‰§è¡Œæµç¨‹"><a href="#3-synchronized-æ‰§è¡Œæµç¨‹" class="headerlink" title="3. synchronized æ‰§è¡Œæµç¨‹"></a>3. synchronized æ‰§è¡Œæµç¨‹</h2><h3 id="a-åå‘é”ï¼ˆæ— ç«äº‰ï¼‰"><a href="#a-åå‘é”ï¼ˆæ— ç«äº‰ï¼‰" class="headerlink" title="a) åå‘é”ï¼ˆæ— ç«äº‰ï¼‰"></a>a) åå‘é”ï¼ˆæ— ç«äº‰ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">çº¿ç¨‹è·å–é” -&gt; åœ¨å¯¹è±¡å¤´æ‰“ä¸Šçº¿ç¨‹ID -&gt; æ‰§è¡Œ -&gt; é‡Šæ”¾é” -&gt; ä¿æŒåå‘çŠ¶æ€</span><br></pre></td></tr></table></figure><h3 id="b-è½»é‡çº§é”ï¼ˆCASç«äº‰ï¼‰"><a href="#b-è½»é‡çº§é”ï¼ˆCASç«äº‰ï¼‰" class="headerlink" title="b) è½»é‡çº§é”ï¼ˆCASç«äº‰ï¼‰"></a>b) è½»é‡çº§é”ï¼ˆCASç«äº‰ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">çº¿ç¨‹å°è¯•CASæŠ¢é” -&gt; æˆåŠŸï¼šæŒæœ‰é” -&gt; æ‰§è¡Œ -&gt; é‡Šæ”¾</span><br><span class="line">                      |-&gt; å¤±è´¥ï¼šå‡çº§ä¸ºé‡é‡çº§é”</span><br></pre></td></tr></table></figure><h3 id="c-é‡é‡çº§é”ï¼ˆé˜»å¡ï¼‰"><a href="#c-é‡é‡çº§é”ï¼ˆé˜»å¡ï¼‰" class="headerlink" title="c) é‡é‡çº§é”ï¼ˆé˜»å¡ï¼‰"></a>c) é‡é‡çº§é”ï¼ˆé˜»å¡ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">çº¿ç¨‹æ— æ³•è·å–é” -&gt; é˜»å¡ï¼ˆOSç­‰å¾…é˜Ÿåˆ—ï¼‰ -&gt; è¢«å”¤é†’ -&gt; è·å–é” -&gt; æ‰§è¡Œ -&gt; é‡Šæ”¾é”</span><br></pre></td></tr></table></figure><h3 id="å›¾ç¤º"><a href="#å›¾ç¤º" class="headerlink" title="å›¾ç¤º"></a>å›¾ç¤º</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+------------------+</span><br><span class="line">|  synchronized()  |</span><br><span class="line">+------------------+</span><br><span class="line">          |</span><br><span class="line">    JVMå¯¹è±¡å¤´Mark Word</span><br><span class="line">          |</span><br><span class="line">+------------------------+</span><br><span class="line">| åå‘é” -&gt; è½»é‡çº§é” -&gt; é‡é‡çº§é”</span><br><span class="line">+------------------------+</span><br></pre></td></tr></table></figure><hr><h2 id="4-synchronized-æ–¹æ³•ç¤ºä¾‹"><a href="#4-synchronized-æ–¹æ³•ç¤ºä¾‹" class="headerlink" title="4. synchronized æ–¹æ³•ç¤ºä¾‹"></a>4. synchronized æ–¹æ³•ç¤ºä¾‹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Counter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> &#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>é”å¯¹è±¡</strong>ï¼šå®ä¾‹æ–¹æ³•é”ä½ <code>this</code>ï¼Œé™æ€æ–¹æ³•é”ä½ç±»å¯¹è±¡ <code>ClassName.class</code>ã€‚</li><li><strong>æ•ˆæœ</strong>ï¼šåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è¿›å…¥ <code>increment()</code>ï¼Œä¿è¯ <code>count++</code> æ“ä½œçš„åŸå­æ€§ã€‚</li></ul><hr><h2 id="5-JVM-ä¼˜åŒ–"><a href="#5-JVM-ä¼˜åŒ–" class="headerlink" title="5. JVM ä¼˜åŒ–"></a>5. JVM ä¼˜åŒ–</h2><ul><li><strong>é”æ¶ˆé™¤</strong>ï¼šç¼–è¯‘å™¨æˆ– JIT å¯æ£€æµ‹æ— ç«äº‰æƒ…å†µï¼Œæ¶ˆé™¤åŒæ­¥é”ã€‚</li><li><strong>é”ç²—åŒ–</strong>ï¼šæŠŠå¤šæ¬¡è¿ç»­çš„å°èŒƒå›´é”åˆå¹¶ï¼Œå‡å°‘åŠ é”æ¬¡æ•°ã€‚</li><li><strong>åå‘é” &#x2F; è½»é‡çº§é” &#x2F; é‡é‡çº§é”å‡çº§</strong>ï¼šåŠ¨æ€é€‚åº”ç«äº‰æƒ…å†µï¼Œå…¼é¡¾æ€§èƒ½ä¸æ­£ç¡®æ€§ã€‚</li></ul><h2 id="25-å¤šæ€çš„å®ç°æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#25-å¤šæ€çš„å®ç°æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="25.å¤šæ€çš„å®ç°æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>25.å¤šæ€çš„å®ç°æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</h2><ul><li><strong>æ¦‚å¿µ</strong>ï¼šåŒä¸€æ“ä½œä½œç”¨äºä¸åŒå¯¹è±¡æ—¶è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼ˆä¸»è¦è¡¨ç°ä¸ºæ–¹æ³•çš„åŠ¨æ€ç»‘å®šï¼‰ã€‚</li><li><strong>å®ç°æœºåˆ¶</strong>ï¼š<ul><li><strong>ç¼–è¯‘æ—¶</strong>ï¼šæ ¹æ®å¼•ç”¨ç±»å‹æ£€æŸ¥æ–¹æ³•ç­¾åï¼ˆé™æ€ç±»å‹æ£€æŸ¥ï¼‰ã€‚</li><li><strong>è¿è¡Œæ—¶</strong>ï¼šå®é™…è°ƒç”¨çš„æ–¹æ³•æ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹ï¼ˆè¿è¡Œæ—¶ç±»å‹ï¼‰å†³å®šï¼›å³ <strong>åŠ¨æ€ç»‘å®šï¼ˆdynamic dispatchï¼‰</strong>ã€‚</li><li>JVM é€šå¸¸é€šè¿‡ <strong>è™šæ–¹æ³•è¡¨ï¼ˆvtableï¼‰&#x2F;æ–¹æ³•æŸ¥æ‰¾æœºåˆ¶</strong> å®ç°ã€‚è°ƒç”¨ä¸€ä¸ªé <code>static</code>ã€é <code>private</code>ã€é <code>final</code> çš„æ–¹æ³•æ—¶ï¼Œä¼šåœ¨è¿è¡Œæ—¶æŸ¥æ‰¾å®é™…ç±»çš„å®ç°å¹¶è°ƒç”¨ã€‚</li></ul></li><li><strong>ç»“æœ</strong>ï¼šå­ç±»å¯ä»¥è¦†ç›–çˆ¶ç±»æ–¹æ³•ï¼Œè°ƒç”¨è€…ä½¿ç”¨çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡æ—¶ï¼Œè°ƒç”¨çš„æ˜¯å­ç±»çš„è¦†ç›–æ–¹æ³•ï¼ˆè¿è¡Œæ—¶å†³å®šï¼‰ã€‚</li><li><strong>æ³¨æ„</strong>ï¼š<code>static</code>ã€<code>private</code>ã€<code>final</code> æ–¹æ³•ä¸ä¼šè¢«åŠ¨æ€ç»‘å®šï¼ˆæ˜¯é™æ€ç»‘å®šï¼‰ã€‚</li></ul><hr><h2 id="26-æ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰å’Œæ–¹æ³•é‡å†™ï¼ˆoverrideï¼‰çš„åŒºåˆ«ï¼Ÿ"><a href="#26-æ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰å’Œæ–¹æ³•é‡å†™ï¼ˆoverrideï¼‰çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="26. æ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰å’Œæ–¹æ³•é‡å†™ï¼ˆoverrideï¼‰çš„åŒºåˆ«ï¼Ÿ"></a>26. æ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰å’Œæ–¹æ³•é‡å†™ï¼ˆoverrideï¼‰çš„åŒºåˆ«ï¼Ÿ</h2><ul><li><p><strong>æ–¹æ³•é‡è½½ï¼ˆOverloadingï¼‰</strong>ï¼š</p><ul><li>åŒä¸€ç±»ä¸­æ–¹æ³•åç›¸åŒã€å‚æ•°åˆ—è¡¨ä¸åŒï¼ˆå‚æ•°ç±»å‹&#x2F;ä¸ªæ•°&#x2F;é¡ºåºï¼‰ï¼Œè¿”å›ç±»å‹å¯ä»¥ä¸åŒã€‚</li><li>ç¼–è¯‘æ—¶å†³å®šï¼ˆé‡è½½è§£æåœ¨ç¼–è¯‘æœŸå®Œæˆï¼‰ï¼Œä¸ç»§æ‰¿å…³ç³»æ— å…³ã€‚</li></ul></li><li><p><strong>æ–¹æ³•é‡å†™ï¼ˆOverridingï¼‰</strong>ï¼š</p><ul><li>å­ç±»å®šä¹‰ä¸çˆ¶ç±»ç›¸åŒæ–¹æ³•ç­¾åï¼ˆæ–¹æ³•å + å‚æ•°ç±»å‹ç›¸åŒï¼‰çš„å®ç°ï¼Œç›®çš„æ˜¯æ”¹å˜&#x2F;æ‰©å±•çˆ¶ç±»è¡Œä¸ºã€‚</li><li>è¿è¡Œæ—¶åŠ¨æ€ç»‘å®šï¼Œå¿…é¡»æ»¡è¶³è®¿é—®æƒé™ä¸èƒ½æ›´ä¸¥æ ¼ï¼ŒæŠ›å‡ºçš„å—æ£€å¼‚å¸¸ä¸èƒ½è¶…è¿‡çˆ¶ç±»ç‰ˆæœ¬ç­‰è§„åˆ™ã€‚</li></ul></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// overload</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> x)</span> &#123;&#125;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">f</span><span class="params">(String s)</span> &#123;&#125;</span><br><span class="line"><span class="comment">// override</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123; <span class="keyword">void</span> <span class="title function_">m</span><span class="params">()</span> &#123;&#125; &#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span> &#123; <span class="meta">@Override</span> <span class="keyword">void</span> <span class="title function_">m</span><span class="params">()</span> &#123;&#125; &#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="27-Java-æ”¯æŒå¤šç»§æ‰¿å—ï¼Ÿå¦‚ä½•å®ç°ç±»ä¼¼æ•ˆæœï¼Ÿ"><a href="#27-Java-æ”¯æŒå¤šç»§æ‰¿å—ï¼Ÿå¦‚ä½•å®ç°ç±»ä¼¼æ•ˆæœï¼Ÿ" class="headerlink" title="27. Java æ”¯æŒå¤šç»§æ‰¿å—ï¼Ÿå¦‚ä½•å®ç°ç±»ä¼¼æ•ˆæœï¼Ÿ"></a>27. Java æ”¯æŒå¤šç»§æ‰¿å—ï¼Ÿå¦‚ä½•å®ç°ç±»ä¼¼æ•ˆæœï¼Ÿ</h2><ul><li><strong>ç±»çš„å¤šç»§æ‰¿</strong>ï¼šJava <strong>ä¸æ”¯æŒç±»çš„å¤šç»§æ‰¿</strong>ï¼ˆä¸èƒ½ç»§æ‰¿å¤šä¸ªç±»ï¼‰ï¼Œä»¥é¿å…è±å½¢ç»§æ‰¿é—®é¢˜ï¼ˆdiamond problemï¼‰ã€‚</li><li><strong>å®ç°ç±»ä¼¼æ•ˆæœçš„æ–¹æ³•</strong>ï¼š<ul><li><strong>æ¥å£å¤šå®ç°</strong>ï¼šä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼ˆJava 8 çš„ <code>default</code> æ–¹æ³•ä¹Ÿå¸¦æ¥ç±»ä¼¼å¤šç»§æ‰¿æ–¹æ³•å®ç°çš„å¯èƒ½ï¼Œä½†æœ‰å†²çªè§£å†³è§„åˆ™ï¼‰ã€‚</li><li><strong>ç»„åˆ&#x2F;å§”æ‰˜ï¼ˆcomposition&#x2F;delegationï¼‰</strong>ï¼šåœ¨ç±»ä¸­æŒæœ‰å…¶å®ƒç±»çš„å®ä¾‹å¹¶æŠŠè°ƒç”¨å§”æ‰˜ç»™å®ƒä»¬ï¼ˆä¼˜äºç»§æ‰¿çš„é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ï¼‰ã€‚</li></ul></li><li><strong>æ¥å£å†²çªè§£å†³</strong>ï¼šè‹¥å¤šä¸ªæ¥å£æä¾›ç›¸åŒé»˜è®¤æ–¹æ³•ï¼Œç±»å¿…é¡»é‡å†™è¯¥æ–¹æ³•å¹¶æ˜ç¡®è°ƒç”¨å“ªä¸ªæ¥å£çš„é»˜è®¤å®ç°ï¼ˆ<code>InterfaceName.super.method()</code>ï¼‰ã€‚</li></ul><hr><h2 id="28-Java-çš„å››ç§è®¿é—®ä¿®é¥°ç¬¦ï¼Ÿ"><a href="#28-Java-çš„å››ç§è®¿é—®ä¿®é¥°ç¬¦ï¼Ÿ" class="headerlink" title="28. Java çš„å››ç§è®¿é—®ä¿®é¥°ç¬¦ï¼Ÿ"></a>28. Java çš„å››ç§è®¿é—®ä¿®é¥°ç¬¦ï¼Ÿ</h2><ul><li><code>public</code>ï¼šå¯¹æ‰€æœ‰ç±»å¯è§ï¼ˆä»»ä½•åŒ…ï¼‰ã€‚</li><li><code>protected</code>ï¼šå¯¹åŒåŒ…ç±»å’Œå­ç±»å¯è§ï¼ˆå³åŒåŒ…æˆ–å­ç±»å¯ä»¥è®¿é—®ï¼‰ã€‚</li><li><strong>é»˜è®¤ï¼ˆåŒ…ç§æœ‰ï¼Œpackage-privateï¼‰</strong>ï¼ˆä¸å†™ä¿®é¥°ç¬¦ï¼‰ï¼šå¯¹åŒåŒ…ç±»å¯è§ï¼ŒåŒ…å¤–ä¸å¯è§ã€‚</li><li><code>private</code>ï¼šä»…åœ¨æœ¬ç±»å†…å¯è§ï¼ŒåŒ…å¤–&#x2F;å­ç±»ä¸å¯è®¿é—®ï¼ˆå­ç±»æ— æ³•ç›´æ¥è®¿é—®çˆ¶ç±» private æˆå‘˜ï¼‰ã€‚</li><li><strong>æ³¨æ„</strong>ï¼šå¯¹ç±»ï¼ˆé¡¶å±‚ç±»ï¼‰åªèƒ½ä½¿ç”¨ <code>public</code> æˆ–é»˜è®¤ï¼ˆåŒ…ç§æœ‰ï¼‰ï¼Œä¸èƒ½å£°æ˜ä¸º <code>private</code>&#x2F;<code>protected</code>ã€‚</li></ul><hr><h2 id="29-transient-å…³é”®å­—çš„ä½œç”¨ï¼Ÿ"><a href="#29-transient-å…³é”®å­—çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="29. transient å…³é”®å­—çš„ä½œç”¨ï¼Ÿ"></a>29. <code>transient</code> å…³é”®å­—çš„ä½œç”¨ï¼Ÿ</h2><ul><li>ç”¨äºæ ‡è®°å­—æ®µåœ¨ Java åºåˆ—åŒ–ï¼ˆ<code>Serializable</code>ï¼‰è¿‡ç¨‹ä¸­<strong>ä¸è¢«åºåˆ—åŒ–</strong>ã€‚</li><li>è¢«æ ‡è®°ä¸º <code>transient</code> çš„å­—æ®µåœ¨åºåˆ—åŒ–åä¸ä¼šå†™å…¥åºåˆ—åŒ–æµï¼Œååºåˆ—åŒ–æ—¶è¿™äº›å­—æ®µä¼šä»¥é»˜è®¤å€¼æ¢å¤ï¼ˆåŸºæœ¬ç±»å‹ 0ï¼Œå¼•ç”¨ç±»å‹ <code>null</code>ï¼‰ã€‚</li><li>å¸¸ç”¨äºæ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ï¼‰ã€ä¸éœ€è¦æŒä¹…åŒ–çš„ç¼“å­˜å­—æ®µã€æˆ–å¯é‡å»ºçš„çŠ¶æ€å­—æ®µã€‚</li><li>æ³¨æ„ï¼š<code>static</code> å­—æ®µæœ¬èº«ä¹Ÿä¸ä¼šè¢«åºåˆ—åŒ–ï¼ˆå› ä¸ºæ˜¯ç±»çº§åˆ«ï¼Œä¸å±äºå®ä¾‹çŠ¶æ€ï¼‰ã€‚</li></ul><hr><h2 id="30-volatile-å…³é”®å­—çš„ä½œç”¨ï¼Ÿ"><a href="#30-volatile-å…³é”®å­—çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="30. volatile å…³é”®å­—çš„ä½œç”¨ï¼Ÿ"></a>30. <code>volatile</code> å…³é”®å­—çš„ä½œç”¨ï¼Ÿ</h2><ul><li><strong>å¯è§æ€§</strong>ï¼šä¿è¯å¯¹ <code>volatile</code> å˜é‡çš„å†™å…¥å¯¹å…¶å®ƒçº¿ç¨‹ç«‹å³å¯è§ï¼ˆè¯»å–æ€»æ˜¯ä»ä¸»å†…å­˜è€Œä¸æ˜¯çº¿ç¨‹ç¼“å­˜è¯»å–ï¼‰ã€‚</li><li><strong>ç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼ˆéƒ¨åˆ†ï¼‰</strong>ï¼šè¯»&#x2F;å†™ <code>volatile</code> å­˜åœ¨çš„å†…å­˜å±éšœèƒ½ä¿è¯ä¸€å®šçš„æœ‰åºæ€§ï¼ˆå†™ <code>volatile</code> å‘ç”Ÿåœ¨åç»­è¯»çš„å¯è§æ€§ä¸Šï¼Œæ›´å¤šç»†èŠ‚å‚è€ƒ JMMï¼‰ã€‚</li><li><strong>ä¸ä¿è¯åŸå­æ€§</strong>ï¼šå¯¹å•æ¬¡è¯»&#x2F;å†™æ“ä½œæ˜¯åŸå­çš„ï¼ˆå¯¹ <code>long</code>&#x2F;<code>double</code> åœ¨ Java 5 åä¹Ÿä¿è¯åŸå­ï¼‰ï¼Œä½†éåŸå­æ“ä½œï¼ˆå¦‚ <code>i++</code>ï¼‰ä¸æ˜¯åŸå­çš„ã€‚</li><li><strong>å…¸å‹ç”¨é€”</strong>ï¼š<ul><li>çŠ¶æ€æ ‡å¿—ï¼ˆå¦‚ <code>volatile boolean running</code>ï¼‰ã€‚</li><li>ç”¨äºå®ç°åŒé‡æ£€æŸ¥é”å®šï¼ˆDCLï¼‰å•ä¾‹ä¸­çš„ <code>instance</code>ï¼ˆåœ¨ Java 5+ ç¯å¢ƒä¸‹æœ‰æ•ˆï¼‰ã€‚</li></ul></li><li><strong>ä¸ synchronized æ¯”è¾ƒ</strong>ï¼š<ul><li><code>volatile</code> è½»é‡ï¼Œåªä¿è¯å¯è§æ€§ä¸éƒ¨åˆ†æœ‰åºæ€§ï¼Œä¸ä¿è¯äº’æ–¥ï¼›é€‚ç”¨äºç®€å•çŠ¶æ€é€šä¿¡ã€‚</li><li><code>synchronized</code> æä¾›äº’æ–¥å’Œå¯è§æ€§ä¿è¯ï¼ˆæ›´é‡ï¼‰ï¼Œå¹¶å¯é…åˆ <code>wait/notify</code>ã€‚</li></ul></li></ul><hr><h2 id="31-synchronized-çš„ä½œç”¨åŠåº•å±‚åŸç†ï¼Ÿ"><a href="#31-synchronized-çš„ä½œç”¨åŠåº•å±‚åŸç†ï¼Ÿ" class="headerlink" title="31. synchronized çš„ä½œç”¨åŠåº•å±‚åŸç†ï¼Ÿ"></a>31. <code>synchronized</code> çš„ä½œç”¨åŠåº•å±‚åŸç†ï¼Ÿ</h2><h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><ul><li><strong>äº’æ–¥ï¼ˆæ’å®ƒï¼‰</strong>ï¼šä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œè¢« <code>synchronized</code> ä¿®é¥°çš„ä»£ç å—æˆ–æ–¹æ³•ï¼ˆé’ˆå¯¹åŒä¸€æŠŠé”ï¼‰ã€‚</li><li><strong>å¯è§æ€§</strong>ï¼šè¿›å…¥&#x2F;é€€å‡ºåŒæ­¥å—ä¼šå»ºç«‹ happens-before å…³ç³»ï¼Œç¡®ä¿é”é‡Šæ”¾å‰çš„å†™å¯¹éšåè·å–è¯¥é”çš„çº¿ç¨‹å¯è§ã€‚</li><li><strong>ç”¨é€”</strong>ï¼šä¿æŠ¤ä¸´ç•ŒåŒºã€ç¡®ä¿å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«å¯å˜çŠ¶æ€çš„å®‰å…¨è®¿é—®ã€‚</li></ul><h3 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h3><ul><li><strong>æ–¹æ³•çº§åˆ«</strong>ï¼š<ul><li><code>synchronized void m() &#123; ... &#125;</code>ï¼šç­‰ä»·äº <code>synchronized(this)</code>ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰æˆ– <code>synchronized (ClassName.class)</code>ï¼ˆé™æ€æ–¹æ³•ï¼‰ã€‚</li></ul></li><li><strong>ä»£ç å—çº§åˆ«</strong>ï¼š<ul><li><code>synchronized(this) &#123; ... &#125;</code> æˆ– <code>synchronized(lockObj) &#123; ... &#125;</code> æ›´çµæ´»ï¼Œèƒ½å‡å°é”çš„ç²’åº¦ã€‚</li></ul></li></ul><h3 id="åº•å±‚åŸç†ï¼ˆHotSpot-å®ç°æ¦‚è¦ï¼‰"><a href="#åº•å±‚åŸç†ï¼ˆHotSpot-å®ç°æ¦‚è¦ï¼‰" class="headerlink" title="åº•å±‚åŸç†ï¼ˆHotSpot å®ç°æ¦‚è¦ï¼‰"></a>åº•å±‚åŸç†ï¼ˆHotSpot å®ç°æ¦‚è¦ï¼‰</h3><ul><li>JVM ä½¿ç”¨å¯¹è±¡å¤´ï¼ˆobject headerï¼‰ä¸­çš„ <strong>mark word</strong> å’Œå…³è”æ•°æ®ç»“æ„ç»´æŠ¤é”çŠ¶æ€ã€‚</li><li>é”ä¼˜åŒ–ç­–ç•¥ï¼ˆä¸ºæå‡æ€§èƒ½ï¼ŒHotSpot å¼•å…¥è‹¥å¹²ä¼˜åŒ–ï¼‰ï¼š<ol><li><strong>åå‘é”ï¼ˆBiased Lockingï¼‰</strong>ï¼šåœ¨æ²¡æœ‰ç«äº‰çš„æƒ…å†µä¸‹ï¼Œé”ä¼šåå‘äºç¬¬ä¸€æ¬¡è·å¾—å®ƒçš„çº¿ç¨‹ï¼Œé‡å¤è·å–æ— éœ€ CASï¼Œå‡å°‘å¼€é”€ã€‚</li><li><strong>è½»é‡çº§é”ï¼ˆLightweight Lockingï¼‰</strong>ï¼šä½¿ç”¨ CAS æ“ä½œåœ¨æ ˆä¸Šè®°å½•åŠ é”è®°å½•ï¼Œé¿å…è¿›å…¥é‡é‡çº§ç›‘è§†å™¨ï¼ˆmonitorï¼‰ã€‚</li><li><strong>é‡é‡çº§é”ï¼ˆMonitor&#x2F;Mutexï¼‰</strong>ï¼šå½“ç«äº‰æ¿€çƒˆæˆ– CAS å¤±è´¥æ—¶ï¼Œå‡çº§ä¸ºé‡é‡çº§é”ï¼Œä½¿ç”¨æ“ä½œç³»ç»Ÿäº’æ–¥é‡ï¼ˆå¯èƒ½æ¶‰åŠçº¿ç¨‹é˜»å¡&#x2F;å”¤é†’ï¼‰ã€‚</li></ol></li><li><code>monitorenter</code> &#x2F; <code>monitorexit</code> æ˜¯å­—èŠ‚ç æŒ‡ä»¤ï¼ˆç”±ç¼–è¯‘å™¨&#x2F;å­—èŠ‚ç ç”Ÿæˆå™¨ç”Ÿæˆï¼‰ã€‚</li><li>JIT ç¼–è¯‘å™¨å¯è¿›è¡Œé”æ¶ˆé™¤ã€é”ç²—åŒ–ã€é”ä¼˜åŒ–ç­‰ï¼ˆå½“èƒ½è¯æ˜æ— å¹¶å‘è®¿é—®æˆ–å·²å¤–éƒ¨åŒæ­¥æ—¶ï¼‰ã€‚</li></ul><h3 id="wait-notify-notifyAll"><a href="#wait-notify-notifyAll" class="headerlink" title="wait/notify&#x2F;notifyAll"></a><code>wait/notify</code>&#x2F;<code>notifyAll</code></h3><ul><li><code>Object.wait()</code>ã€<code>notify()</code>ã€<code>notifyAll()</code> å¿…é¡»åœ¨æŒæœ‰å¯¹è±¡ç›‘è§†å™¨ï¼ˆå³åœ¨ <code>synchronized</code> å—å†…ï¼‰æ—¶è°ƒç”¨ï¼Œç”¨äºçº¿ç¨‹é—´åä½œï¼ˆæ¡ä»¶ç­‰å¾…&#x2F;é€šçŸ¥ï¼‰ã€‚</li><li><code>wait()</code> ä¼šé‡Šæ”¾é”å¹¶è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼›<code>notify()</code> å”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼ˆè¢«å”¤é†’çº¿ç¨‹åœ¨é‡æ–°è·å¾—é”åç»§ç»­ï¼‰ã€‚</li></ul><h3 id="æ³¨æ„ä¸é™·é˜±"><a href="#æ³¨æ„ä¸é™·é˜±" class="headerlink" title="æ³¨æ„ä¸é™·é˜±"></a>æ³¨æ„ä¸é™·é˜±</h3><ul><li>é”ç²’åº¦ï¼šé¿å…ç”¨è¿‡å¤§é”ï¼ˆå¦‚ <code>synchronized</code> åœ¨æ–¹æ³•å¤´éƒ¨é”ä½å¤§é‡æ“ä½œï¼‰ï¼Œè°¨æ…ä½¿ç”¨ <code>String</code> æˆ–è£…ç®±å¯¹è±¡ä½œä¸ºé”ï¼ˆå¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªå®ä¾‹å…±ç”¨åŒä¸€é”æˆ–é”è¢«å¤–éƒ¨æŒæœ‰ï¼‰ã€‚</li><li>æ­»é”ï¼šå¤šçº¿ç¨‹é”é¡ºåºä¸å½“å¯èƒ½æ­»é”ï¼›è®¾è®¡æ—¶è°¨é˜²ã€‚</li><li>æ€§èƒ½ï¼šåœ¨é«˜å¹¶å‘ä¸‹å¯è€ƒè™‘ä½¿ç”¨ <code>java.util.concurrent</code> åŒ…ï¼ˆ<code>ReentrantLock</code>ã€<code>ConcurrentHashMap</code>ã€<code>AtomicXxx</code>ï¼‰ç­‰æ›´ç»†ç²’åº¦ã€é«˜æ€§èƒ½çš„å¹¶å‘å·¥å…·ã€‚</li></ul><hr><h2 id="äºŒã€é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰"><a href="#äºŒã€é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰" class="headerlink" title="äºŒã€é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰"></a>äºŒã€é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰</h2><hr><h2 id="1-é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>1. é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><ul><li><strong>å°è£…ï¼ˆEncapsulationï¼‰</strong>ï¼šéšè—å®ç°ç»†èŠ‚ï¼Œåªæš´éœ²å¿…è¦æ¥å£ã€‚</li><li><strong>ç»§æ‰¿ï¼ˆInheritanceï¼‰</strong>ï¼šå­ç±»å¤ç”¨çˆ¶ç±»å±æ€§å’Œæ–¹æ³•ï¼Œæ‰©å±•åŠŸèƒ½ã€‚</li><li><strong>å¤šæ€ï¼ˆPolymorphismï¼‰</strong>ï¼šåŒä¸€æ¥å£ï¼Œä¸åŒå®ç°ã€‚è¡¨ç°ä¸ºæ–¹æ³•é‡å†™ã€æ–¹æ³•é‡è½½ã€‚</li></ul><hr><h2 id="2-å°è£…çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-å°è£…çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. å°è£…çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>2. å°è£…çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><ul><li>éšè—å¯¹è±¡å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œåªæš´éœ²å¿…è¦æ¥å£ã€‚</li><li>æé«˜ä»£ç å¤ç”¨æ€§ã€å®‰å…¨æ€§ï¼Œé¿å…æ•°æ®è¢«éšæ„ä¿®æ”¹ã€‚</li><li>ä¾‹å¦‚ï¼šç±»çš„æˆå‘˜å˜é‡ç”¨ <code>private</code>ï¼Œæä¾› <code>getter/setter</code> è®¿é—®ã€‚</li></ul><hr><h2 id="3-å¤šæ€çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#3-å¤šæ€çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="3. å¤šæ€çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>3. å¤šæ€çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><ul><li><strong>æ¥å£ç»Ÿä¸€</strong>ï¼šä¸åŒå®ç°ç±»å¯é€šè¿‡çˆ¶ç±»&#x2F;æ¥å£æ“ä½œã€‚</li><li><strong>å¯æ‰©å±•æ€§å¼º</strong>ï¼šæ–°å¢å­ç±»ä¸å½±å“åŸæœ‰ä»£ç ã€‚</li><li><strong>è§£è€¦</strong>ï¼šè°ƒç”¨æ–¹åªä¾èµ–æŠ½è±¡ï¼Œè€Œä¸ä¾èµ–å…·ä½“å®ç°ã€‚</li><li>ä¾‹ï¼š<code>List list = new ArrayList();</code>ï¼Œåç»­å¯æ¢æˆ <code>LinkedList</code>ã€‚</li></ul><hr><h2 id="4-é‡å†™æ–¹æ³•æ—¶è¿”å›å€¼èƒ½å¦ä¸åŒï¼Ÿ"><a href="#4-é‡å†™æ–¹æ³•æ—¶è¿”å›å€¼èƒ½å¦ä¸åŒï¼Ÿ" class="headerlink" title="4. é‡å†™æ–¹æ³•æ—¶è¿”å›å€¼èƒ½å¦ä¸åŒï¼Ÿ"></a><strong>4. é‡å†™æ–¹æ³•æ—¶è¿”å›å€¼èƒ½å¦ä¸åŒï¼Ÿ</strong></h2><ul><li><strong>ä¸èƒ½å®Œå…¨ä¸åŒ</strong>ã€‚</li><li>Java å…è®¸ <strong>åå˜è¿”å›ç±»å‹</strong>ï¼šå­ç±»æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å¯ä»¥æ˜¯çˆ¶ç±»æ–¹æ³•è¿”å›å€¼çš„å­ç±»ã€‚</li><li>ä¾‹å¦‚ï¼šçˆ¶ç±»è¿”å› <code>Number</code>ï¼Œå­ç±»å¯ä»¥è¿”å› <code>Integer</code>ã€‚</li></ul><hr><h2 id="5-æ„é€ å‡½æ•°èƒ½å¦è¢«ç»§æ‰¿ï¼Ÿ"><a href="#5-æ„é€ å‡½æ•°èƒ½å¦è¢«ç»§æ‰¿ï¼Ÿ" class="headerlink" title="5. æ„é€ å‡½æ•°èƒ½å¦è¢«ç»§æ‰¿ï¼Ÿ"></a><strong>5. æ„é€ å‡½æ•°èƒ½å¦è¢«ç»§æ‰¿ï¼Ÿ</strong></h2><ul><li><strong>ä¸èƒ½ç»§æ‰¿</strong>ï¼Œå› ä¸ºæ„é€ å‡½æ•°åå¿…é¡»ä¸ç±»åç›¸åŒã€‚</li><li>ä½†å­ç±»å¯é€šè¿‡ <code>super(...)</code> è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•ã€‚</li></ul><hr><h2 id="6-æ„é€ å‡½æ•°èƒ½å¦-privateï¼Ÿ"><a href="#6-æ„é€ å‡½æ•°èƒ½å¦-privateï¼Ÿ" class="headerlink" title="6. æ„é€ å‡½æ•°èƒ½å¦ privateï¼Ÿ"></a><strong>6. æ„é€ å‡½æ•°èƒ½å¦ privateï¼Ÿ</strong></h2><ul><li><strong>å¯ä»¥</strong>ï¼Œå¸¸è§äºå•ä¾‹æ¨¡å¼ï¼ˆé¥¿æ±‰&#x2F;æ‡’æ±‰&#x2F;æšä¸¾å•ä¾‹ï¼‰ã€‚</li><li>ä½œç”¨ï¼šç¦æ­¢å¤–éƒ¨ <code>new</code>ï¼Œåªèƒ½é€šè¿‡ç±»æä¾›çš„æ–¹æ³•è·å–å®ä¾‹ã€‚</li></ul><hr><h2 id="7-å•ä¾‹æ¨¡å¼çš„å‡ ç§å®ç°æ–¹å¼ï¼Ÿ"><a href="#7-å•ä¾‹æ¨¡å¼çš„å‡ ç§å®ç°æ–¹å¼ï¼Ÿ" class="headerlink" title="7. å•ä¾‹æ¨¡å¼çš„å‡ ç§å®ç°æ–¹å¼ï¼Ÿ"></a><strong>7. å•ä¾‹æ¨¡å¼çš„å‡ ç§å®ç°æ–¹å¼ï¼Ÿ</strong></h2><ol><li>é¥¿æ±‰å¼ï¼ˆç±»åŠ è½½å³å®ä¾‹åŒ–ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œä½†å¯èƒ½æµªè´¹å†…å­˜ï¼‰ã€‚</li><li>æ‡’æ±‰å¼ï¼ˆå»¶è¿ŸåŠ è½½ï¼Œéœ€åŠ  <code>synchronized</code> ä¿è¯çº¿ç¨‹å®‰å…¨ï¼‰ã€‚</li><li>åŒé‡æ£€æŸ¥é”ï¼ˆDCLï¼Œvolatile + synchronizedï¼Œæ€§èƒ½ä¼˜ï¼‰ã€‚</li><li>é™æ€å†…éƒ¨ç±»ï¼ˆæ¨èï¼Œåˆ©ç”¨ç±»åŠ è½½æœºåˆ¶ï¼Œçº¿ç¨‹å®‰å…¨ï¼‰ã€‚</li><li>æšä¸¾å•ä¾‹ï¼ˆæœ€ä½³å®è·µï¼Œé˜²æ­¢åå°„å’Œååºåˆ—åŒ–æ”»å‡»ï¼‰ã€‚</li></ol><hr><h2 id="8-é¥¿æ±‰å¼å’Œæ‡’æ±‰å¼å•ä¾‹çš„åŒºåˆ«ï¼Ÿ"><a href="#8-é¥¿æ±‰å¼å’Œæ‡’æ±‰å¼å•ä¾‹çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="8. é¥¿æ±‰å¼å’Œæ‡’æ±‰å¼å•ä¾‹çš„åŒºåˆ«ï¼Ÿ"></a><strong>8. é¥¿æ±‰å¼å’Œæ‡’æ±‰å¼å•ä¾‹çš„åŒºåˆ«ï¼Ÿ</strong></h2><ul><li><strong>é¥¿æ±‰å¼</strong>ï¼šç±»åŠ è½½æ—¶å®ä¾‹åŒ– â†’ çº¿ç¨‹å®‰å…¨ï¼Œå¯åŠ¨æ—¶å¯èƒ½æµªè´¹å†…å­˜ã€‚</li><li><strong>æ‡’æ±‰å¼</strong>ï¼šç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰å®ä¾‹åŒ– â†’ èŠ‚çœèµ„æºï¼Œä½†éœ€åŠ é”ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li></ul><hr><h2 id="9-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å†…éƒ¨ç±»ï¼Ÿ"><a href="#9-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å†…éƒ¨ç±»ï¼Ÿ" class="headerlink" title="9. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å†…éƒ¨ç±»ï¼Ÿ"></a><strong>9. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å†…éƒ¨ç±»ï¼Ÿ</strong></h2><ul><li>å†…éƒ¨ç±»å¯ä»¥ <strong>è®¿é—®å¤–éƒ¨ç±»çš„ç§æœ‰æˆå‘˜</strong>ã€‚</li><li>æ›´å¥½åœ°ç»„ç»‡ä»£ç ï¼Œä½¿é€»è¾‘æ›´ç´§å¯†ã€‚</li><li>åœ¨éœ€è¦å›è°ƒæˆ–äº‹ä»¶ç›‘å¬æ—¶å¸¸ç”¨ã€‚</li></ul><hr><h2 id="10-æˆå‘˜å†…éƒ¨ç±»ã€å±€éƒ¨å†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»çš„åŒºåˆ«ï¼Ÿ"><a href="#10-æˆå‘˜å†…éƒ¨ç±»ã€å±€éƒ¨å†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="10. æˆå‘˜å†…éƒ¨ç±»ã€å±€éƒ¨å†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»çš„åŒºåˆ«ï¼Ÿ"></a><strong>10. æˆå‘˜å†…éƒ¨ç±»ã€å±€éƒ¨å†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»çš„åŒºåˆ«ï¼Ÿ</strong></h2><ul><li><strong>æˆå‘˜å†…éƒ¨ç±»</strong>ï¼šä¾é™„äºå¤–éƒ¨ç±»å®ä¾‹ï¼Œå¯ä»¥è®¿é—®å¤–éƒ¨ç±»å®ä¾‹å˜é‡ã€‚</li><li><strong>å±€éƒ¨å†…éƒ¨ç±»</strong>ï¼šå®šä¹‰åœ¨æ–¹æ³•å†…éƒ¨ï¼Œä½œç”¨èŒƒå›´ä»…åœ¨æ–¹æ³•å†…ã€‚</li><li><strong>é™æ€å†…éƒ¨ç±»</strong>ï¼šä¸ä¾èµ–å¤–éƒ¨ç±»å®ä¾‹ï¼Œåªèƒ½è®¿é—®å¤–éƒ¨ç±»é™æ€æˆå‘˜ã€‚</li></ul><hr><h2 id="11-Java-ä¸­å¯¹è±¡çš„åˆ›å»ºæ–¹å¼æœ‰å“ªäº›ï¼Ÿ"><a href="#11-Java-ä¸­å¯¹è±¡çš„åˆ›å»ºæ–¹å¼æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="11. Java ä¸­å¯¹è±¡çš„åˆ›å»ºæ–¹å¼æœ‰å“ªäº›ï¼Ÿ"></a><strong>11. Java ä¸­å¯¹è±¡çš„åˆ›å»ºæ–¹å¼æœ‰å“ªäº›ï¼Ÿ</strong></h2><ol><li><code>new</code> å…³é”®å­—ã€‚</li><li>åå°„ <code>Class.newInstance()</code>ã€‚</li><li><code>Constructor.newInstance()</code>ã€‚</li><li>é€šè¿‡ <code>clone()</code>ã€‚</li><li>é€šè¿‡ååºåˆ—åŒ– <code>ObjectInputStream.readObject()</code>ã€‚</li></ol><hr><h2 id="12-å¯¹è±¡ä¹‹é—´çš„æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«ï¼Ÿ"><a href="#12-å¯¹è±¡ä¹‹é—´çš„æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="12. å¯¹è±¡ä¹‹é—´çš„æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«ï¼Ÿ"></a><strong>12. å¯¹è±¡ä¹‹é—´çš„æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«ï¼Ÿ</strong></h2><ul><li><strong>æµ…æ‹·è´</strong>ï¼šåªå¤åˆ¶å¯¹è±¡æœ¬èº«ï¼Œå¼•ç”¨å­—æ®µä»æŒ‡å‘åŒä¸€å¯¹è±¡ã€‚</li><li><strong>æ·±æ‹·è´</strong>ï¼šè¿å¼•ç”¨å¯¹è±¡ä¹Ÿå¤åˆ¶ä¸€ä»½ï¼Œå®Œå…¨ç‹¬ç«‹ã€‚</li></ul><hr><h2 id="13-clone-æ–¹æ³•çš„åŸç†ï¼Ÿ"><a href="#13-clone-æ–¹æ³•çš„åŸç†ï¼Ÿ" class="headerlink" title="13. clone() æ–¹æ³•çš„åŸç†ï¼Ÿ"></a><strong>13. clone() æ–¹æ³•çš„åŸç†ï¼Ÿ</strong></h2><ul><li>æ¥è‡ª <code>Object</code> ç±»ï¼Œé»˜è®¤æ˜¯ <strong>æµ…æ‹·è´</strong>ã€‚</li><li>å¿…é¡»å®ç° <code>Cloneable</code> æ¥å£ï¼Œå¦åˆ™æŠ›å‡º <code>CloneNotSupportedException</code>ã€‚</li><li>å¯é‡å†™ <code>clone()</code> å®ç°æ·±æ‹·è´ã€‚</li></ul><hr><h2 id="14-ä¸ºä»€ä¹ˆ-Java-ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿ"><a href="#14-ä¸ºä»€ä¹ˆ-Java-ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿ" class="headerlink" title="14. ä¸ºä»€ä¹ˆ Java ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿ"></a><strong>14. ä¸ºä»€ä¹ˆ Java ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿ</strong></h2><ul><li>ä¸ºäº†é¿å… <strong>è±å½¢ç»§æ‰¿é—®é¢˜</strong>ï¼ˆå¤šä¸ªçˆ¶ç±»æ–¹æ³•å†²çªï¼‰ã€‚</li><li>Java ä½¿ç”¨ <strong>æ¥å£</strong> æ¥å®ç°å¤šç»§æ‰¿ç‰¹æ€§ã€‚</li></ul><hr><h2 id="15-Java-æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ï¼Ÿ"><a href="#15-Java-æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ï¼Ÿ" class="headerlink" title="15. Java æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ï¼Ÿ"></a><strong>15. Java æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ï¼Ÿ</strong></h2><ul><li>Java <strong>åªæœ‰å€¼ä¼ é€’</strong>ã€‚</li><li>å¯¹è±¡å‚æ•°ä¼ é€’çš„æ˜¯ <strong>å¼•ç”¨çš„å‰¯æœ¬</strong>ï¼ˆå€¼ï¼‰ï¼Œä½†æŒ‡å‘åŒä¸€å¯¹è±¡ã€‚</li></ul><hr><h2 id="16-æ–¹æ³•å‚æ•°ä¼ é€’æ—¶æ˜¯å¦‚ä½•å¤„ç†å¯¹è±¡çš„ï¼Ÿ"><a href="#16-æ–¹æ³•å‚æ•°ä¼ é€’æ—¶æ˜¯å¦‚ä½•å¤„ç†å¯¹è±¡çš„ï¼Ÿ" class="headerlink" title="16. æ–¹æ³•å‚æ•°ä¼ é€’æ—¶æ˜¯å¦‚ä½•å¤„ç†å¯¹è±¡çš„ï¼Ÿ"></a><strong>16. æ–¹æ³•å‚æ•°ä¼ é€’æ—¶æ˜¯å¦‚ä½•å¤„ç†å¯¹è±¡çš„ï¼Ÿ</strong></h2><ul><li>æ–¹æ³•å†…ä¿®æ”¹å¯¹è±¡çš„å­—æ®µ â†’ ä¼šå½±å“å¤–éƒ¨å¯¹è±¡ã€‚</li><li>æ–¹æ³•å†…ç»™å¼•ç”¨å˜é‡é‡æ–°èµ‹å€¼ â†’ ä¸ä¼šå½±å“å¤–éƒ¨å¯¹è±¡ã€‚</li></ul><hr><h2 id="17-å°è£…æ€§ä½“ç°åœ¨å“ªäº›æ–¹é¢ï¼Ÿ"><a href="#17-å°è£…æ€§ä½“ç°åœ¨å“ªäº›æ–¹é¢ï¼Ÿ" class="headerlink" title="17. å°è£…æ€§ä½“ç°åœ¨å“ªäº›æ–¹é¢ï¼Ÿ"></a><strong>17. å°è£…æ€§ä½“ç°åœ¨å“ªäº›æ–¹é¢ï¼Ÿ</strong></h2><ul><li>ä½¿ç”¨ <code>private</code> ä¿®é¥°æˆå‘˜å˜é‡ã€‚</li><li>æä¾› <code>getter/setter</code> æ§åˆ¶è®¿é—®æƒé™ã€‚</li><li>ä½¿ç”¨è®¿é—®ä¿®é¥°ç¬¦ï¼ˆpublic&#x2F;protected&#x2F;default&#x2F;privateï¼‰æ§åˆ¶ç±»å’Œæ–¹æ³•çš„å¯è§æ€§ã€‚</li></ul><hr><h2 id="18-ä¸ºä»€ä¹ˆéœ€è¦ç»§æ‰¿ï¼Ÿ"><a href="#18-ä¸ºä»€ä¹ˆéœ€è¦ç»§æ‰¿ï¼Ÿ" class="headerlink" title="18. ä¸ºä»€ä¹ˆéœ€è¦ç»§æ‰¿ï¼Ÿ"></a><strong>18. ä¸ºä»€ä¹ˆéœ€è¦ç»§æ‰¿ï¼Ÿ</strong></h2><ul><li>ä»£ç å¤ç”¨ï¼ˆå‡å°‘é‡å¤ï¼‰ã€‚</li><li>æé«˜æ‰©å±•æ€§ï¼ˆå­ç±»æ‰©å±•çˆ¶ç±»åŠŸèƒ½ï¼‰ã€‚</li><li>å®ç°å¤šæ€ï¼Œè§£è€¦ä¸šåŠ¡é€»è¾‘ã€‚</li></ul><hr><h2 id="19-é‡å†™-Object-ç±»çš„-toString-æ–¹æ³•çš„æ„ä¹‰ï¼Ÿ"><a href="#19-é‡å†™-Object-ç±»çš„-toString-æ–¹æ³•çš„æ„ä¹‰ï¼Ÿ" class="headerlink" title="19. é‡å†™ Object ç±»çš„ toString æ–¹æ³•çš„æ„ä¹‰ï¼Ÿ"></a><strong>19. é‡å†™ Object ç±»çš„ toString æ–¹æ³•çš„æ„ä¹‰ï¼Ÿ</strong></h2><ul><li>æé«˜å¯è¯»æ€§ï¼Œæ–¹ä¾¿è°ƒè¯•å’Œæ—¥å¿—è®°å½•ã€‚</li><li>é»˜è®¤ <code>toString()</code> æ‰“å°ç±»å+hashcodeï¼Œä¸ç›´è§‚ã€‚</li><li>é‡å†™åå¯æ‰“å°å¯¹è±¡æ ¸å¿ƒå­—æ®µä¿¡æ¯ã€‚</li></ul><hr><h2 id="20-é‡å†™-Object-ç±»çš„-equals-æ–¹æ³•æ—¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ"><a href="#20-é‡å†™-Object-ç±»çš„-equals-æ–¹æ³•æ—¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ" class="headerlink" title="20. é‡å†™ Object ç±»çš„ equals æ–¹æ³•æ—¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ"></a><strong>20. é‡å†™ Object ç±»çš„ equals æ–¹æ³•æ—¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</strong></h2><ul><li>å¿…é¡»æ»¡è¶³ <strong>è‡ªåæ€§ã€å¯¹ç§°æ€§ã€ä¼ é€’æ€§ã€ä¸€è‡´æ€§</strong>ã€‚</li><li>ä¸ <code>hashCode()</code> ä¿æŒä¸€è‡´ï¼šç›¸ç­‰å¯¹è±¡å¿…é¡»æœ‰ç›¸åŒçš„ hashCodeã€‚</li><li>é¿å… <code>NullPointerException</code>ã€‚</li></ul><hr><h2 id="ä¸‰ã€å¼‚å¸¸å¤„ç†"><a href="#ä¸‰ã€å¼‚å¸¸å¤„ç†" class="headerlink" title="ä¸‰ã€å¼‚å¸¸å¤„ç†"></a>ä¸‰ã€å¼‚å¸¸å¤„ç†</h2><hr><h3 id="1-Java-çš„å¼‚å¸¸ä½“ç³»ç»“æ„ï¼Ÿ"><a href="#1-Java-çš„å¼‚å¸¸ä½“ç³»ç»“æ„ï¼Ÿ" class="headerlink" title="1. Java çš„å¼‚å¸¸ä½“ç³»ç»“æ„ï¼Ÿ"></a>1. Java çš„å¼‚å¸¸ä½“ç³»ç»“æ„ï¼Ÿ</h3><ul><li><strong>é¡¶å±‚ç±»</strong>ï¼š<code>Throwable</code><ul><li><strong>Error</strong>ï¼ˆé”™è¯¯ï¼Œç¨‹åºæ— æ³•å¤„ç†ï¼Œé€šå¸¸ç”± JVM æŠ›å‡ºï¼‰<ul><li>å¦‚ï¼š<code>OutOfMemoryError</code>ã€<code>StackOverflowError</code></li></ul></li><li><strong>Exception</strong>ï¼ˆå¼‚å¸¸ï¼Œç¨‹åºå¯å¤„ç†ï¼‰<ul><li><strong>Checked Exception</strong>ï¼ˆå—æ£€å¼‚å¸¸ï¼Œç¼–è¯‘æœŸæ£€æŸ¥ï¼‰<ul><li>å¦‚ï¼š<code>IOException</code>ã€<code>SQLException</code></li></ul></li><li><strong>Unchecked Exception</strong>ï¼ˆè¿è¡Œæ—¶å¼‚å¸¸ï¼Œç¼–è¯‘å™¨ä¸å¼ºåˆ¶å¤„ç†ï¼‰<ul><li>å¦‚ï¼š<code>NullPointerException</code>ã€<code>ArrayIndexOutOfBoundsException</code></li></ul></li></ul></li></ul></li></ul><p>ğŸ‘‰ ç»“æ„å›¾ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Throwable</span><br><span class="line"> â”œâ”€â”€ Error</span><br><span class="line"> â””â”€â”€ Exception</span><br><span class="line">      â”œâ”€â”€ Checked Exception</span><br><span class="line">      â””â”€â”€ Unchecked Exception (RuntimeException)</span><br></pre></td></tr></table></figure><hr><h3 id="2-Checked-Exception-å’Œ-Unchecked-Exception-çš„åŒºåˆ«ï¼Ÿ"><a href="#2-Checked-Exception-å’Œ-Unchecked-Exception-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="2. Checked Exception å’Œ Unchecked Exception çš„åŒºåˆ«ï¼Ÿ"></a>2. Checked Exception å’Œ Unchecked Exception çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>Checked Exceptionï¼ˆå—æ£€å¼‚å¸¸ï¼‰</strong><ul><li>å¿…é¡»æ˜¾å¼å¤„ç†ï¼ˆtry-catch æˆ– throws å£°æ˜ï¼‰ã€‚</li><li>ç¼–è¯‘å™¨å¼ºåˆ¶æ£€æŸ¥ï¼Œå¦åˆ™æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚</li><li>å…¸å‹åœºæ™¯ï¼šIOã€æ•°æ®åº“ã€ç½‘ç»œè°ƒç”¨ã€‚</li></ul></li><li><strong>Unchecked Exceptionï¼ˆéå—æ£€å¼‚å¸¸ &#x2F; è¿è¡Œæ—¶å¼‚å¸¸ï¼‰</strong><ul><li>ä¸å¼ºåˆ¶å¤„ç†ï¼Œç¼–è¯‘å™¨ä¸æ£€æŸ¥ã€‚</li><li>é€šå¸¸ç”±ç¨‹åºé€»è¾‘é”™è¯¯å¯¼è‡´ã€‚</li><li>å…¸å‹åœºæ™¯ï¼šNPEã€é™¤é›¶ã€æ•°ç»„è¶Šç•Œã€‚</li></ul></li></ul><hr><h3 id="3-throw-å’Œ-throws-çš„åŒºåˆ«ï¼Ÿ"><a href="#3-throw-å’Œ-throws-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="3. throw å’Œ throws çš„åŒºåˆ«ï¼Ÿ"></a>3. throw å’Œ throws çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>throw</strong><ul><li>ç”¨äºæ–¹æ³•ä½“å†…éƒ¨ï¼Œ<strong>æŠ›å‡ºå…·ä½“çš„å¼‚å¸¸å¯¹è±¡</strong>ã€‚</li><li>è¯­æ³•ï¼š<code>throw new Exception(&quot;msg&quot;);</code></li></ul></li><li><strong>throws</strong><ul><li>ç”¨äºæ–¹æ³•å£°æ˜å¤„ï¼Œ<strong>æ ‡è¯†è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹</strong>ã€‚</li><li>è¯­æ³•ï¼š<code>public void test() throws IOException &#123;&#125;</code></li></ul></li></ul><p>ğŸ‘‰ æ€»ç»“ï¼š</p><ul><li><code>throw</code> &#x3D; æŠ›å‡ºå¼‚å¸¸å®ä¾‹ã€‚</li><li><code>throws</code> &#x3D; å£°æ˜å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ã€‚</li></ul><hr><h3 id="4-try-catch-finally-çš„æ‰§è¡Œé¡ºåºï¼Ÿ"><a href="#4-try-catch-finally-çš„æ‰§è¡Œé¡ºåºï¼Ÿ" class="headerlink" title="4. try-catch-finally çš„æ‰§è¡Œé¡ºåºï¼Ÿ"></a>4. try-catch-finally çš„æ‰§è¡Œé¡ºåºï¼Ÿ</h3><ol><li><code>try</code> å—å…ˆæ‰§è¡Œã€‚</li><li>å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œè·³åˆ°å¯¹åº” <code>catch</code> æ‰§è¡Œã€‚</li><li><code>finally</code> <strong>ä¸€å®šä¼šæ‰§è¡Œ</strong>ï¼ˆé™¤é <code>System.exit()</code>ï¼‰ã€‚</li><li>å¦‚æœ <code>try</code> æˆ– <code>catch</code> æœ‰ <code>return</code>ï¼Œä¼šå…ˆæ‰§è¡Œ <code>finally</code>ï¼Œå†è¿”å›ç»“æœã€‚</li></ol><hr><h3 id="5-finally-ä¸­çš„-return-ä¼šè¦†ç›–-try-ä¸­çš„-return-å—ï¼Ÿ"><a href="#5-finally-ä¸­çš„-return-ä¼šè¦†ç›–-try-ä¸­çš„-return-å—ï¼Ÿ" class="headerlink" title="5. finally ä¸­çš„ return ä¼šè¦†ç›– try ä¸­çš„ return å—ï¼Ÿ"></a>5. finally ä¸­çš„ return ä¼šè¦†ç›– try ä¸­çš„ return å—ï¼Ÿ</h3><p>âœ… <strong>ä¼šè¦†ç›–</strong>ã€‚</p><ul><li>å¦‚æœ <code>try</code> ä¸­æœ‰ <code>return</code>ï¼Œä½† <code>finally</code> ä¸­ä¹Ÿæœ‰ <code>return</code>ï¼Œæœ€ç»ˆè¿”å›çš„æ˜¯ <code>finally</code> çš„ç»“æœã€‚<br> ğŸ‘‰ å› æ­¤å®é™…å¼€å‘ä¸­ <strong>ä¸æ¨èåœ¨ finally ä¸­å†™ return</strong>ã€‚</li></ul><hr><h3 id="6-try-with-resources-çš„ä½œç”¨ï¼Ÿ"><a href="#6-try-with-resources-çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="6. try-with-resources çš„ä½œç”¨ï¼Ÿ"></a>6. try-with-resources çš„ä½œç”¨ï¼Ÿ</h3><ul><li>Java 7 å¼•å…¥ï¼Œç®€åŒ–èµ„æºç®¡ç†ï¼ˆå¦‚æµã€æ•°æ®åº“è¿æ¥ï¼‰ã€‚</li><li>è‡ªåŠ¨å…³é—­å®ç°äº† <code>AutoCloseable</code> æˆ– <code>Closeable</code> æ¥å£çš„èµ„æºã€‚</li><li>é¿å…å¿˜è®° <code>finally &#123; resource.close(); &#125;</code>ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;a.txt&quot;</span>))) &#123;</span><br><span class="line">    System.out.println(br.readLine());</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="7-è‡ªå®šä¹‰å¼‚å¸¸ç±»å¦‚ä½•å®ç°ï¼Ÿ"><a href="#7-è‡ªå®šä¹‰å¼‚å¸¸ç±»å¦‚ä½•å®ç°ï¼Ÿ" class="headerlink" title="7. è‡ªå®šä¹‰å¼‚å¸¸ç±»å¦‚ä½•å®ç°ï¼Ÿ"></a>7. è‡ªå®šä¹‰å¼‚å¸¸ç±»å¦‚ä½•å®ç°ï¼Ÿ</h3><ul><li>ç»§æ‰¿ <code>Exception</code>ï¼ˆCheckedï¼‰æˆ– <code>RuntimeException</code>ï¼ˆUncheckedï¼‰ã€‚</li><li>æä¾›æ„é€ æ–¹æ³•ï¼šæ— å‚ã€å¸¦ messageã€å¸¦ causeã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyException</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="8-Error-å’Œ-Exception-çš„åŒºåˆ«ï¼Ÿ"><a href="#8-Error-å’Œ-Exception-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="8. Error å’Œ Exception çš„åŒºåˆ«ï¼Ÿ"></a>8. Error å’Œ Exception çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>Error</strong>ï¼šç³»ç»Ÿçº§é”™è¯¯ï¼ŒJVM æ— æ³•æ¢å¤ï¼Œç¨‹åºä¸åº”è¯¥æ•è·ã€‚<ul><li>å¦‚ <code>OutOfMemoryError</code>ã€<code>StackOverflowError</code>ã€‚</li></ul></li><li><strong>Exception</strong>ï¼šåº”ç”¨çº§å¼‚å¸¸ï¼Œç¨‹åºåº”è¯¥å¤„ç†ã€‚<ul><li>å¦‚ <code>IOException</code>ã€<code>SQLException</code>ã€<code>NullPointerException</code>ã€‚</li></ul></li></ul><hr><h3 id="9-NullPointerException-å¸¸è§åœºæ™¯æœ‰å“ªäº›ï¼Ÿ"><a href="#9-NullPointerException-å¸¸è§åœºæ™¯æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="9. NullPointerException å¸¸è§åœºæ™¯æœ‰å“ªäº›ï¼Ÿ"></a>9. NullPointerException å¸¸è§åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h3><ol><li>è°ƒç”¨ç©ºå¯¹è±¡çš„æ–¹æ³•ï¼š<code>obj.toString()</code>ã€‚</li><li>è®¿é—®ç©ºæ•°ç»„ï¼š<code>arr.length</code>ã€‚</li><li>è®¿é—®ç©ºé›†åˆï¼š<code>list.size()</code>ã€‚</li><li>è‡ªåŠ¨æ‹†ç®±ï¼š<code>Integer num = null; int n = num;</code>ã€‚</li><li>Map æŸ¥æ‰¾ä¸º nullï¼Œå†è°ƒç”¨æ–¹æ³•ï¼š<code>map.get(&quot;key&quot;).toString()</code>ã€‚</li><li>ä¾èµ–æ³¨å…¥&#x2F;æœªåˆå§‹åŒ–çš„å¯¹è±¡ã€‚</li></ol><hr><h3 id="10-è¿è¡Œæ—¶å¼‚å¸¸éœ€è¦æ•è·å—ï¼Ÿä¸ºä»€ä¹ˆ"><a href="#10-è¿è¡Œæ—¶å¼‚å¸¸éœ€è¦æ•è·å—ï¼Ÿä¸ºä»€ä¹ˆ" class="headerlink" title="10. è¿è¡Œæ—¶å¼‚å¸¸éœ€è¦æ•è·å—ï¼Ÿä¸ºä»€ä¹ˆ"></a>10. è¿è¡Œæ—¶å¼‚å¸¸éœ€è¦æ•è·å—ï¼Ÿä¸ºä»€ä¹ˆ</h3><ul><li><strong>é€šå¸¸ä¸éœ€è¦æ˜¾å¼æ•è·</strong>ï¼Œå› ä¸ºå®ƒä»¬å¤šç”±é€»è¾‘é”™è¯¯å¯¼è‡´ï¼ˆå¦‚ NPEã€é™¤é›¶ï¼‰ã€‚</li><li>æ•è·è¿è¡Œæ—¶å¼‚å¸¸å¹¶ä¸èƒ½è§£å†³é—®é¢˜ï¼Œåº”è¯¥<strong>é€šè¿‡ä¿®æ”¹ä»£ç é€»è¾‘</strong>é¿å…ã€‚</li><li>ä½†åœ¨æŸäº›å…³é”®æœåŠ¡ï¼ˆå¦‚ API å±‚ï¼‰å¯ä»¥ç”¨ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆå¦‚ Spring @ControllerAdviceï¼‰æ‹¦æˆªï¼Œé¿å…ç¨‹åºç›´æ¥å´©æºƒã€‚</li></ul><hr><h2 id="å››ã€é›†åˆæ¡†æ¶ï¼ˆCollectionsï¼‰"><a href="#å››ã€é›†åˆæ¡†æ¶ï¼ˆCollectionsï¼‰" class="headerlink" title="å››ã€é›†åˆæ¡†æ¶ï¼ˆCollectionsï¼‰"></a>å››ã€é›†åˆæ¡†æ¶ï¼ˆCollectionsï¼‰</h2><hr><h3 id="1-Collection-å’Œ-Collections-çš„åŒºåˆ«ï¼Ÿ"><a href="#1-Collection-å’Œ-Collections-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="1. Collection å’Œ Collections çš„åŒºåˆ«ï¼Ÿ"></a>1. Collection å’Œ Collections çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>Collection</strong>ï¼šé›†åˆæ¥å£ï¼Œæ˜¯æ‰€æœ‰é›†åˆç±»çš„çˆ¶æ¥å£ï¼ˆListã€Setï¼‰ã€‚</li><li><strong>Collections</strong>ï¼šå·¥å…·ç±»ï¼Œæä¾›æ“ä½œé›†åˆçš„é™æ€æ–¹æ³•ï¼ˆæ’åºã€æœç´¢ã€åŒæ­¥åŒ…è£…ç­‰ï¼‰ã€‚</li></ul><hr><h3 id="2-Listã€Setã€Map-çš„åŒºåˆ«ï¼Ÿ"><a href="#2-Listã€Setã€Map-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="2. Listã€Setã€Map çš„åŒºåˆ«ï¼Ÿ"></a>2. Listã€Setã€Map çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>List</strong>ï¼šæœ‰åºã€å¯é‡å¤ï¼ŒæŒ‰ç´¢å¼•è®¿é—®ï¼ˆArrayListã€LinkedListï¼‰ã€‚</li><li><strong>Set</strong>ï¼šæ— åºã€ä¸å¯é‡å¤ï¼ŒåŸºäºå“ˆå¸Œæˆ–æ ‘ï¼ˆHashSetã€TreeSetï¼‰ã€‚</li><li><strong>Map</strong>ï¼šé”®å€¼å¯¹å­˜å‚¨ï¼ŒKey ä¸å¯é‡å¤ï¼ŒValue å¯é‡å¤ï¼ˆHashMapã€TreeMapï¼‰ã€‚</li></ul><hr><h3 id="3-ArrayList-å’Œ-LinkedList-çš„åŒºåˆ«ï¼Ÿ"><a href="#3-ArrayList-å’Œ-LinkedList-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="3. ArrayList å’Œ LinkedList çš„åŒºåˆ«ï¼Ÿ"></a>3. ArrayList å’Œ LinkedList çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>ArrayList</strong>ï¼šåŸºäºåŠ¨æ€æ•°ç»„ï¼ŒæŸ¥è¯¢å¿«ï¼ˆO(1)ï¼‰ï¼Œå¢åˆ æ…¢ï¼ˆO(n)ï¼‰ã€‚</li><li><strong>LinkedList</strong>ï¼šåŸºäºåŒå‘é“¾è¡¨ï¼Œå¢åˆ å¿«ï¼ˆO(1)ï¼‰ï¼ŒæŸ¥è¯¢æ…¢ï¼ˆO(n)ï¼‰ã€‚</li></ul><hr><h3 id="4-HashMap-çš„åº•å±‚å®ç°ï¼Ÿ"><a href="#4-HashMap-çš„åº•å±‚å®ç°ï¼Ÿ" class="headerlink" title="4. HashMap çš„åº•å±‚å®ç°ï¼Ÿ"></a>4. HashMap çš„åº•å±‚å®ç°ï¼Ÿ</h3><ul><li><strong>JDK 1.7</strong>ï¼šæ•°ç»„ + é“¾è¡¨ã€‚</li><li><strong>JDK 1.8</strong>ï¼šæ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ï¼ˆé“¾è¡¨é•¿åº¦ â‰¥ 8 æ—¶è½¬ä¸ºæ ‘ï¼‰ã€‚</li></ul><hr><h3 id="5-HashMap-1-7-å’Œ-1-8-çš„åŒºåˆ«ï¼Ÿ"><a href="#5-HashMap-1-7-å’Œ-1-8-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="5. HashMap 1.7 å’Œ 1.8 çš„åŒºåˆ«ï¼Ÿ"></a>5. HashMap 1.7 å’Œ 1.8 çš„åŒºåˆ«ï¼Ÿ</h3><ol><li>1.7ï¼šæ•°ç»„ + é“¾è¡¨ï¼Œé‡‡ç”¨å¤´æ’æ³•ï¼Œæ˜“å‡ºç°å¹¶å‘æ­»å¾ªç¯ã€‚</li><li>1.8ï¼šæ•°ç»„ + é“¾è¡¨&#x2F;çº¢é»‘æ ‘ï¼Œå°¾æ’æ³•ï¼Œé¿å…æ­»å¾ªç¯ï¼Œæé«˜æ€§èƒ½ã€‚</li><li>1.8 å¼•å…¥çº¢é»‘æ ‘ï¼ŒæŸ¥æ‰¾æ•ˆç‡ä» O(n) ä¼˜åŒ–ä¸º O(log n)ã€‚</li></ol><hr><h3 id="6-HashMap-å¦‚ä½•è§£å†³å“ˆå¸Œå†²çªï¼Ÿ"><a href="#6-HashMap-å¦‚ä½•è§£å†³å“ˆå¸Œå†²çªï¼Ÿ" class="headerlink" title="6. HashMap å¦‚ä½•è§£å†³å“ˆå¸Œå†²çªï¼Ÿ"></a>6. HashMap å¦‚ä½•è§£å†³å“ˆå¸Œå†²çªï¼Ÿ</h3><ul><li>æ–¹æ³•ï¼šæ‹‰é“¾æ³•ï¼ˆé“¾è¡¨ï¼‰+ çº¢é»‘æ ‘ã€‚</li><li>å†²çªæ—¶ï¼Œå°†å…ƒç´ æŒ‚åˆ°é“¾è¡¨&#x2F;æ ‘ä¸Šã€‚</li></ul><hr><h3 id="7-HashSet-çš„åº•å±‚å®ç°ï¼Ÿ"><a href="#7-HashSet-çš„åº•å±‚å®ç°ï¼Ÿ" class="headerlink" title="7. HashSet çš„åº•å±‚å®ç°ï¼Ÿ"></a>7. HashSet çš„åº•å±‚å®ç°ï¼Ÿ</h3><ul><li>åŸºäº <strong>HashMap</strong> å®ç°ã€‚</li><li><code>HashSet</code> çš„å…ƒç´ å­˜å‚¨åœ¨ <code>HashMap</code> çš„ key ä¸Šï¼Œvalue ä¸ºä¸€ä¸ªå›ºå®šå¯¹è±¡ <code>PRESENT</code>ã€‚</li></ul><hr><h3 id="8-ConcurrentHashMap-çš„åº•å±‚å®ç°ï¼Ÿ"><a href="#8-ConcurrentHashMap-çš„åº•å±‚å®ç°ï¼Ÿ" class="headerlink" title="8. ConcurrentHashMap çš„åº•å±‚å®ç°ï¼Ÿ"></a>8. ConcurrentHashMap çš„åº•å±‚å®ç°ï¼Ÿ</h3><ul><li><strong>JDK 1.7</strong>ï¼šåˆ†æ®µé”ï¼ˆSegment + HashEntryï¼‰ã€‚</li><li><strong>JDK 1.8</strong>ï¼šCAS + synchronizedï¼Œæ•°æ®ç»“æ„ä¸ HashMap ç±»ä¼¼ï¼Œæ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ã€‚</li></ul><hr><h3 id="9-Hashtable-å’Œ-HashMap-çš„åŒºåˆ«ï¼Ÿ"><a href="#9-Hashtable-å’Œ-HashMap-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="9. Hashtable å’Œ HashMap çš„åŒºåˆ«ï¼Ÿ"></a>9. Hashtable å’Œ HashMap çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>çº¿ç¨‹å®‰å…¨æ€§</strong>ï¼šHashtable æ˜¯åŒæ­¥çš„ï¼ŒHashMap ä¸æ˜¯ã€‚</li><li><strong>null</strong>ï¼šHashtable ä¸å…è®¸ keyã€value ä¸º nullï¼›HashMap å…è®¸ä¸€ä¸ª null key å’Œå¤šä¸ª null valueã€‚</li><li><strong>æ•ˆç‡</strong>ï¼šHashMap æ›´é«˜æ•ˆã€‚</li></ul><hr><h3 id="10-TreeMap-å’Œ-HashMap-çš„åŒºåˆ«ï¼Ÿ"><a href="#10-TreeMap-å’Œ-HashMap-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="10. TreeMap å’Œ HashMap çš„åŒºåˆ«ï¼Ÿ"></a>10. TreeMap å’Œ HashMap çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>TreeMap</strong>ï¼šåŸºäºçº¢é»‘æ ‘ï¼Œæœ‰åºï¼ˆæŒ‰ Key æ’åºï¼‰ã€‚</li><li><strong>HashMap</strong>ï¼šåŸºäºå“ˆå¸Œè¡¨ï¼Œæ— åºã€‚</li></ul><hr><h3 id="11-WeakHashMap-çš„ç‰¹ç‚¹ï¼Ÿ"><a href="#11-WeakHashMap-çš„ç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="11. WeakHashMap çš„ç‰¹ç‚¹ï¼Ÿ"></a>11. WeakHashMap çš„ç‰¹ç‚¹ï¼Ÿ</h3><ul><li>Key ä½¿ç”¨ <strong>å¼±å¼•ç”¨</strong>ï¼Œå½“æ²¡æœ‰å¼ºå¼•ç”¨æŒ‡å‘è¯¥ Key æ—¶ï¼Œä¼šè¢« GC å›æ”¶ã€‚</li><li>å¸¸ç”¨äºç¼“å­˜ã€‚</li></ul><hr><h3 id="12-CopyOnWriteArrayList-çš„åº”ç”¨åœºæ™¯ï¼Ÿ"><a href="#12-CopyOnWriteArrayList-çš„åº”ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="12. CopyOnWriteArrayList çš„åº”ç”¨åœºæ™¯ï¼Ÿ"></a>12. CopyOnWriteArrayList çš„åº”ç”¨åœºæ™¯ï¼Ÿ</h3><ul><li>å†™æ—¶å¤åˆ¶ï¼šå†™æ“ä½œæ—¶å¤åˆ¶æ–°æ•°ç»„ï¼Œè¯»æ“ä½œä¸åŠ é”ã€‚</li><li>é€‚ç”¨äº <strong>è¯»å¤šå†™å°‘</strong> çš„å¹¶å‘åœºæ™¯ï¼Œæ¯”å¦‚ç¼“å­˜ã€è®¢é˜…åˆ—è¡¨ã€‚</li></ul><hr><h3 id="13-LinkedHashMap-çš„åº•å±‚åŸç†ï¼Ÿ"><a href="#13-LinkedHashMap-çš„åº•å±‚åŸç†ï¼Ÿ" class="headerlink" title="13. LinkedHashMap çš„åº•å±‚åŸç†ï¼Ÿ"></a>13. LinkedHashMap çš„åº•å±‚åŸç†ï¼Ÿ</h3><ul><li>åŸºäº HashMap + åŒå‘é“¾è¡¨ã€‚</li><li>ä¿è¯æ’å…¥é¡ºåºï¼ˆæˆ– LRU é¡ºåºï¼‰ã€‚</li></ul><hr><h3 id="14-Map-çš„-key-æ˜¯å¦å¯ä»¥ä¸º-nullï¼Ÿ"><a href="#14-Map-çš„-key-æ˜¯å¦å¯ä»¥ä¸º-nullï¼Ÿ" class="headerlink" title="14. Map çš„ key æ˜¯å¦å¯ä»¥ä¸º nullï¼Ÿ"></a>14. Map çš„ key æ˜¯å¦å¯ä»¥ä¸º nullï¼Ÿ</h3><ul><li><strong>HashMap</strong>ï¼šå…è®¸ä¸€ä¸ª null keyã€‚</li><li><strong>Hashtable &#x2F; TreeMap</strong>ï¼šä¸å…è®¸ null keyã€‚</li></ul><hr><h3 id="15-ArrayList-æ‰©å®¹æœºåˆ¶ï¼Ÿ"><a href="#15-ArrayList-æ‰©å®¹æœºåˆ¶ï¼Ÿ" class="headerlink" title="15. ArrayList æ‰©å®¹æœºåˆ¶ï¼Ÿ"></a>15. ArrayList æ‰©å®¹æœºåˆ¶ï¼Ÿ</h3><ul><li>åˆå§‹å®¹é‡ 10ï¼Œè¶…è¿‡å®¹é‡æ—¶æ‰©å®¹ä¸ºåŸæ¥çš„ 1.5 å€ã€‚</li><li>é€šè¿‡ <code>Arrays.copyOf()</code> å®ç°æ•°ç»„å¤åˆ¶ã€‚</li></ul><hr><h3 id="16-Vector-å’Œ-ArrayList-çš„åŒºåˆ«ï¼Ÿ"><a href="#16-Vector-å’Œ-ArrayList-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="16. Vector å’Œ ArrayList çš„åŒºåˆ«ï¼Ÿ"></a>16. Vector å’Œ ArrayList çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>Vector</strong>ï¼šçº¿ç¨‹å®‰å…¨ï¼ˆæ–¹æ³•åŠ  synchronizedï¼‰ï¼Œæ‰©å®¹ä¸º 2 å€ã€‚</li><li><strong>ArrayList</strong>ï¼šéçº¿ç¨‹å®‰å…¨ï¼Œæ‰©å®¹ä¸º 1.5 å€ã€‚</li></ul><hr><h3 id="17-PriorityQueue-çš„åº•å±‚å®ç°ï¼Ÿ"><a href="#17-PriorityQueue-çš„åº•å±‚å®ç°ï¼Ÿ" class="headerlink" title="17. PriorityQueue çš„åº•å±‚å®ç°ï¼Ÿ"></a>17. PriorityQueue çš„åº•å±‚å®ç°ï¼Ÿ</h3><ul><li>åŸºäº <strong>äºŒå‰å°é¡¶å †</strong>ï¼Œä¿è¯é˜Ÿå¤´å…ƒç´ æ˜¯æœ€å°å€¼ã€‚</li><li>æ’å…¥ã€åˆ é™¤æ“ä½œæ—¶é—´å¤æ‚åº¦ O(log n)ã€‚</li></ul><hr><h3 id="18-BlockingQueue-çš„å‡ ç§å®ç°ç±»ï¼Ÿ"><a href="#18-BlockingQueue-çš„å‡ ç§å®ç°ç±»ï¼Ÿ" class="headerlink" title="18. BlockingQueue çš„å‡ ç§å®ç°ç±»ï¼Ÿ"></a>18. BlockingQueue çš„å‡ ç§å®ç°ç±»ï¼Ÿ</h3><ul><li><strong>ArrayBlockingQueue</strong>ï¼šæ•°ç»„ç»“æ„ï¼Œæœ‰ç•Œã€‚</li><li><strong>LinkedBlockingQueue</strong>ï¼šé“¾è¡¨ç»“æ„ï¼Œå¯é€‰å®¹é‡ã€‚</li><li><strong>PriorityBlockingQueue</strong>ï¼šä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚</li><li><strong>DelayQueue</strong>ï¼šå»¶æ—¶é˜Ÿåˆ—ã€‚</li><li><strong>SynchronousQueue</strong>ï¼šä¸å­˜å‚¨å…ƒç´ ï¼Œç›´æ¥ç§»äº¤ã€‚</li></ul><hr><h3 id="19-HashMap-æ­»å¾ªç¯é—®é¢˜å‡ºç°åœ¨å“ªä¸ªç‰ˆæœ¬ï¼Ÿ"><a href="#19-HashMap-æ­»å¾ªç¯é—®é¢˜å‡ºç°åœ¨å“ªä¸ªç‰ˆæœ¬ï¼Ÿ" class="headerlink" title="19. HashMap æ­»å¾ªç¯é—®é¢˜å‡ºç°åœ¨å“ªä¸ªç‰ˆæœ¬ï¼Ÿ"></a>19. HashMap æ­»å¾ªç¯é—®é¢˜å‡ºç°åœ¨å“ªä¸ªç‰ˆæœ¬ï¼Ÿ</h3><ul><li><strong>JDK 1.7</strong> å¤šçº¿ç¨‹æ‰©å®¹æ—¶ï¼Œé“¾è¡¨é‡‡ç”¨å¤´æ’æ³•ï¼Œå¯èƒ½å½¢æˆç¯ï¼Œå¯¼è‡´æ­»å¾ªç¯ã€‚</li><li><strong>JDK 1.8</strong> ä½¿ç”¨å°¾æ’æ³•ï¼Œè§£å†³è¯¥é—®é¢˜ã€‚</li></ul><hr><h3 id="20-fail-fast-å’Œ-fail-safe-çš„åŒºåˆ«ï¼Ÿ"><a href="#20-fail-fast-å’Œ-fail-safe-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="20. fail-fast å’Œ fail-safe çš„åŒºåˆ«ï¼Ÿ"></a>20. fail-fast å’Œ fail-safe çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>fail-fast</strong>ï¼šè¿­ä»£è¿‡ç¨‹ä¸­ç»“æ„è¢«ä¿®æ”¹ï¼Œä¼šæŠ›å‡º <code>ConcurrentModificationException</code>ã€‚å¦‚ï¼šArrayListã€HashMapã€‚</li><li><strong>fail-safe</strong>ï¼šè¿­ä»£åŸºäºå‰¯æœ¬ï¼Œä¸ä¼šæŠ›å¼‚å¸¸ã€‚å¦‚ï¼šCopyOnWriteArrayListã€ConcurrentHashMapã€‚</li></ul><hr><h2 id="äº”ã€å¹¶å‘ç¼–ç¨‹ï¼ˆJUCï¼‰"><a href="#äº”ã€å¹¶å‘ç¼–ç¨‹ï¼ˆJUCï¼‰" class="headerlink" title="äº”ã€å¹¶å‘ç¼–ç¨‹ï¼ˆJUCï¼‰"></a>äº”ã€å¹¶å‘ç¼–ç¨‹ï¼ˆJUCï¼‰</h2><hr><h3 id="1-Java-ä¸­çš„çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼Ÿ"><a href="#1-Java-ä¸­çš„çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼Ÿ" class="headerlink" title="1. Java ä¸­çš„çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼Ÿ"></a>1. Java ä¸­çš„çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h3><ul><li><strong>NEWï¼ˆæ–°å»ºï¼‰</strong>ï¼š<code>new Thread()</code> åï¼Œè¿˜æ²¡è°ƒç”¨ <code>start()</code>ã€‚</li><li><strong>RUNNABLEï¼ˆå°±ç»ª&#x2F;è¿è¡Œä¸­ï¼‰</strong>ï¼šè°ƒç”¨ <code>start()</code>ï¼Œç­‰å¾… CPU è°ƒåº¦ã€‚</li><li><strong>BLOCKEDï¼ˆé˜»å¡ï¼‰</strong>ï¼šç­‰å¾…é”ã€‚</li><li><strong>WAITINGï¼ˆæ— é™ç­‰å¾…ï¼‰</strong>ï¼šè°ƒç”¨ <code>wait()</code>ã€<code>join()</code>ï¼Œéœ€å…¶ä»–çº¿ç¨‹å”¤é†’ã€‚</li><li><strong>TIMED_WAITINGï¼ˆé™æ—¶ç­‰å¾…ï¼‰</strong>ï¼šè°ƒç”¨ <code>sleep()</code>ã€<code>wait(timeout)</code>ã€‚</li><li><strong>TERMINATEDï¼ˆç»ˆæ­¢ï¼‰</strong>ï¼šçº¿ç¨‹æ‰§è¡Œå®Œæ¯•æˆ–å¼‚å¸¸é€€å‡ºã€‚</li></ul><hr><h3 id="2-Runnable-å’Œ-Callable-çš„åŒºåˆ«ï¼Ÿ"><a href="#2-Runnable-å’Œ-Callable-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="2. Runnable å’Œ Callable çš„åŒºåˆ«ï¼Ÿ"></a>2. Runnable å’Œ Callable çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>Runnable</strong>ï¼šæ— è¿”å›å€¼ï¼Œä¸èƒ½æŠ›å‡ºå—æ£€å¼‚å¸¸ã€‚</li><li><strong>Callable</strong>ï¼šæœ‰è¿”å›å€¼ï¼ˆFuture è·å–ï¼‰ï¼Œå¯æŠ›å‡ºå¼‚å¸¸ã€‚</li></ul><hr><h3 id="3-ThreadPoolExecutor-çš„å‚æ•°æœ‰å“ªäº›ï¼Ÿ"><a href="#3-ThreadPoolExecutor-çš„å‚æ•°æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="3. ThreadPoolExecutor çš„å‚æ•°æœ‰å“ªäº›ï¼Ÿ"></a>3. ThreadPoolExecutor çš„å‚æ•°æœ‰å“ªäº›ï¼Ÿ</h3><ul><li><strong>corePoolSize</strong>ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ã€‚</li><li><strong>maximumPoolSize</strong>ï¼šæœ€å¤§çº¿ç¨‹æ•°ã€‚</li><li><strong>keepAliveTime</strong>ï¼šéæ ¸å¿ƒçº¿ç¨‹å­˜æ´»æ—¶é—´ã€‚</li><li><strong>unit</strong>ï¼šæ—¶é—´å•ä½ã€‚</li><li><strong>workQueue</strong>ï¼šä»»åŠ¡é˜Ÿåˆ—ï¼ˆBlockingQueueï¼‰ã€‚</li><li><strong>threadFactory</strong>ï¼šçº¿ç¨‹å·¥å‚ï¼ˆè‡ªå®šä¹‰çº¿ç¨‹åï¼‰ã€‚</li><li><strong>handler</strong>ï¼šæ‹’ç»ç­–ç•¥ã€‚</li></ul><hr><h3 id="4-çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ"><a href="#4-çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="4. çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ"></a>4. çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ</h3><ul><li><strong>AbortPolicy</strong>ï¼ˆé»˜è®¤ï¼‰ï¼šæŠ› <code>RejectedExecutionException</code>ã€‚</li><li><strong>CallerRunsPolicy</strong>ï¼šä»»åŠ¡äº¤ç»™æäº¤ä»»åŠ¡çš„çº¿ç¨‹æ‰§è¡Œã€‚</li><li><strong>DiscardPolicy</strong>ï¼šç›´æ¥ä¸¢å¼ƒä»»åŠ¡ã€‚</li><li><strong>DiscardOldestPolicy</strong>ï¼šä¸¢å¼ƒé˜Ÿåˆ—é‡Œæœ€æ—§çš„ä»»åŠ¡ï¼Œå†å°è¯•æäº¤ã€‚</li></ul><hr><h3 id="5-åˆ›å»ºçº¿ç¨‹çš„å››ç§æ–¹å¼ï¼Ÿ"><a href="#5-åˆ›å»ºçº¿ç¨‹çš„å››ç§æ–¹å¼ï¼Ÿ" class="headerlink" title="5. åˆ›å»ºçº¿ç¨‹çš„å››ç§æ–¹å¼ï¼Ÿ"></a>5. åˆ›å»ºçº¿ç¨‹çš„å››ç§æ–¹å¼ï¼Ÿ</h3><ol><li>ç»§æ‰¿ Thread ç±»ã€‚</li><li>å®ç° Runnable æ¥å£ã€‚</li><li>å®ç° Callable + FutureTaskã€‚</li><li>ä½¿ç”¨çº¿ç¨‹æ± ï¼ˆExecutorServiceï¼‰ã€‚</li></ol><hr><h3 id="6-synchronized-çš„åº•å±‚å®ç°åŸç†ï¼Ÿ"><a href="#6-synchronized-çš„åº•å±‚å®ç°åŸç†ï¼Ÿ" class="headerlink" title="6. synchronized çš„åº•å±‚å®ç°åŸç†ï¼Ÿ"></a>6. synchronized çš„åº•å±‚å®ç°åŸç†ï¼Ÿ</h3><ul><li>åŸºäº <strong>å¯¹è±¡å¤´ (Mark Word)</strong> å’Œ <strong>Monitorï¼ˆç®¡ç¨‹ï¼‰</strong>ã€‚</li><li>è¿›å…¥åŒæ­¥å—æ—¶ï¼Œå°è¯•è·å–å¯¹è±¡çš„ Monitorï¼Œè·å–ä¸åˆ°åˆ™é˜»å¡ã€‚</li><li>åº•å±‚ä¾èµ– <strong>JVM æŒ‡ä»¤</strong>ï¼š<code>monitorenter</code>ã€<code>monitorexit</code>ã€‚</li></ul><hr><h3 id="7-synchronized-å’Œ-ReentrantLock-çš„åŒºåˆ«ï¼Ÿ"><a href="#7-synchronized-å’Œ-ReentrantLock-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="7. synchronized å’Œ ReentrantLock çš„åŒºåˆ«ï¼Ÿ"></a>7. synchronized å’Œ ReentrantLock çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>é”ç±»å‹</strong>ï¼šsynchronized æ˜¯ JVM çº§åˆ«ï¼ŒReentrantLock æ˜¯ JUC æä¾›çš„ APIã€‚</li><li><strong>åŠŸèƒ½</strong>ï¼šReentrantLock æ”¯æŒå…¬å¹³é”&#x2F;éå…¬å¹³é”ã€å¯ä¸­æ–­ã€å°è¯•åŠ é”ã€æ¡ä»¶å˜é‡ã€‚</li><li><strong>å¯é‡å…¥æ€§</strong>ï¼šä¸¤è€…éƒ½å¯é‡å…¥ã€‚</li><li><strong>æ€§èƒ½</strong>ï¼šsynchronized åœ¨ JDK1.6 ä¹‹åä¼˜åŒ–ï¼ˆåå‘é”ã€è½»é‡çº§é”ï¼‰æ€§èƒ½å·²æå‡ã€‚</li></ul><hr><h3 id="8-å…¬å¹³é”å’Œéå…¬å¹³é”çš„åŒºåˆ«ï¼Ÿ"><a href="#8-å…¬å¹³é”å’Œéå…¬å¹³é”çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="8. å…¬å¹³é”å’Œéå…¬å¹³é”çš„åŒºåˆ«ï¼Ÿ"></a>8. å…¬å¹³é”å’Œéå…¬å¹³é”çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>å…¬å¹³é”</strong>ï¼šæŒ‰ç…§ç­‰å¾…é¡ºåºè·å–é”ã€‚</li><li><strong>éå…¬å¹³é”</strong>ï¼šå…è®¸â€œæ’é˜Ÿâ€ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæé«˜ååé‡ã€‚</li><li>ReentrantLock é»˜è®¤éå…¬å¹³ã€‚</li></ul><hr><h3 id="9-AQS-çš„åŸç†ï¼Ÿ"><a href="#9-AQS-çš„åŸç†ï¼Ÿ" class="headerlink" title="9. AQS çš„åŸç†ï¼Ÿ"></a>9. AQS çš„åŸç†ï¼Ÿ</h3><ul><li><strong>AQSï¼ˆAbstractQueuedSynchronizerï¼‰</strong> æ˜¯æ„å»ºé”å’ŒåŒæ­¥å™¨çš„æ¡†æ¶ã€‚</li><li>å†…éƒ¨ç»´æŠ¤ä¸€ä¸ª <strong>state</strong>ï¼ˆè¡¨ç¤ºèµ„æºæ•°é‡ï¼‰å’Œ <strong>FIFO åŒå‘é˜Ÿåˆ—</strong>ã€‚</li><li>é€šè¿‡ CAS ä¿®æ”¹ stateï¼Œå¤±è´¥åˆ™å°†çº¿ç¨‹åŠ å…¥ç­‰å¾…é˜Ÿåˆ—ï¼ŒæŒ‚èµ·é˜»å¡ï¼Œç­‰èµ„æºé‡Šæ”¾å†å”¤é†’ã€‚</li></ul><hr><h3 id="10-CountDownLatch-çš„åº”ç”¨åœºæ™¯ï¼Ÿ"><a href="#10-CountDownLatch-çš„åº”ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="10. CountDownLatch çš„åº”ç”¨åœºæ™¯ï¼Ÿ"></a>10. CountDownLatch çš„åº”ç”¨åœºæ™¯ï¼Ÿ</h3><ul><li>å€’è®¡æ•°å™¨ï¼šä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¤šä¸ªçº¿ç¨‹å®Œæˆåå†æ‰§è¡Œã€‚</li><li>ä¾‹å­ï¼šä¸»çº¿ç¨‹ç­‰å¾…å¤šä¸ªå­ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ã€‚</li></ul><hr><h3 id="11-CyclicBarrier-çš„åº”ç”¨åœºæ™¯ï¼Ÿ"><a href="#11-CyclicBarrier-çš„åº”ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="11. CyclicBarrier çš„åº”ç”¨åœºæ™¯ï¼Ÿ"></a>11. CyclicBarrier çš„åº”ç”¨åœºæ™¯ï¼Ÿ</h3><ul><li>æ …æ ï¼šä¸€ç»„çº¿ç¨‹äº’ç›¸ç­‰å¾…ï¼Œç›´åˆ°æ‰€æœ‰çº¿ç¨‹åˆ°è¾¾å±éšœç‚¹å†ç»§ç»­ã€‚</li><li>ä¾‹å­ï¼šå¤šäººæ¸¸æˆï¼Œæ‰€æœ‰ç©å®¶éƒ½å‡†å¤‡å¥½å†å¼€å§‹ã€‚</li></ul><hr><h3 id="12-Semaphore-çš„åº”ç”¨åœºæ™¯ï¼Ÿ"><a href="#12-Semaphore-çš„åº”ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="12. Semaphore çš„åº”ç”¨åœºæ™¯ï¼Ÿ"></a>12. Semaphore çš„åº”ç”¨åœºæ™¯ï¼Ÿ</h3><ul><li>ä¿¡å·é‡ï¼šæ§åˆ¶å¹¶å‘è®¿é—®çš„çº¿ç¨‹æ•°é‡ã€‚</li><li>ä¾‹å­ï¼šåœè½¦åœºé™åˆ¶è½¦ä½æ•°ã€æ•°æ®åº“è¿æ¥æ± ã€‚</li></ul><hr><h3 id="13-Exchanger-çš„åº”ç”¨åœºæ™¯ï¼Ÿ"><a href="#13-Exchanger-çš„åº”ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="13. Exchanger çš„åº”ç”¨åœºæ™¯ï¼Ÿ"></a>13. Exchanger çš„åº”ç”¨åœºæ™¯ï¼Ÿ</h3><ul><li>çº¿ç¨‹é—´æ•°æ®äº¤æ¢ï¼šä¸¤ä¸ªçº¿ç¨‹é…å¯¹äº¤æ¢æ•°æ®ã€‚</li><li>ä¾‹å­ï¼šç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…äº¤æ¢ç¼“å†²åŒºã€‚</li></ul><hr><h3 id="14-volatile-èƒ½ä¿è¯åŸå­æ€§å—ï¼Ÿ"><a href="#14-volatile-èƒ½ä¿è¯åŸå­æ€§å—ï¼Ÿ" class="headerlink" title="14. volatile èƒ½ä¿è¯åŸå­æ€§å—ï¼Ÿ"></a>14. volatile èƒ½ä¿è¯åŸå­æ€§å—ï¼Ÿ</h3><ul><li><strong>ä¸èƒ½</strong>ï¼Œåªèƒ½ä¿è¯å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’ã€‚</li><li>ä¾‹å­ï¼š<code>count++</code> åœ¨å¤šçº¿ç¨‹ä¸‹ä»ç„¶ä¸å®‰å…¨ã€‚</li></ul><hr><h3 id="15-CAS-çš„åŸç†ï¼Ÿ"><a href="#15-CAS-çš„åŸç†ï¼Ÿ" class="headerlink" title="15. CAS çš„åŸç†ï¼Ÿ"></a>15. CAS çš„åŸç†ï¼Ÿ</h3><ul><li>Compare And Swapï¼šæ¯”è¾ƒå†…å­˜å€¼æ˜¯å¦ä¸ºé¢„æœŸå€¼ï¼Œå¦‚æœæ˜¯åˆ™æ›´æ–°ï¼Œå¦åˆ™é‡è¯•ã€‚</li><li>åº•å±‚ä¾èµ– CPU çš„ <strong>cmpxchg</strong> æŒ‡ä»¤ï¼Œä¿è¯åŸå­æ€§ã€‚</li></ul><hr><h3 id="16-ABA-é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#16-ABA-é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="16. ABA é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"></a>16. ABA é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</h3><ul><li><strong>é—®é¢˜</strong>ï¼šCAS åªæ¯”è¾ƒå€¼ï¼Œæ— æ³•æ„ŸçŸ¥å€¼è¢«æ”¹è¿‡ã€‚ä¾‹å¦‚ Aâ†’Bâ†’Aã€‚</li><li><strong>è§£å†³</strong>ï¼šä½¿ç”¨ <strong>ç‰ˆæœ¬å·&#x2F;æ—¶é—´æˆ³</strong>ï¼ˆAtomicStampedReferenceã€AtomicMarkableReferenceï¼‰ã€‚</li></ul><hr><h3 id="17-ThreadLocal-çš„ä½œç”¨åŠåŸç†ï¼Ÿ"><a href="#17-ThreadLocal-çš„ä½œç”¨åŠåŸç†ï¼Ÿ" class="headerlink" title="17. ThreadLocal çš„ä½œç”¨åŠåŸç†ï¼Ÿ"></a>17. ThreadLocal çš„ä½œç”¨åŠåŸç†ï¼Ÿ</h3><ul><li><strong>ä½œç”¨</strong>ï¼šä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›ç‹¬ç«‹å˜é‡å‰¯æœ¬ï¼Œé¿å…å…±äº«æ•°æ®å†²çªã€‚</li><li><strong>åŸç†</strong>ï¼šThread å†…éƒ¨æœ‰ä¸ª ThreadLocalMapï¼Œä»¥ ThreadLocal ä¸º key å­˜å‚¨å˜é‡ã€‚</li></ul><hr><h3 id="18-ThreadLocal-å†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ"><a href="#18-ThreadLocal-å†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ" class="headerlink" title="18. ThreadLocal å†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ"></a>18. ThreadLocal å†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ</h3><ul><li>ThreadLocalMap çš„ key æ˜¯ <strong>å¼±å¼•ç”¨</strong>ï¼Œå¯èƒ½è¢«å›æ”¶ï¼Œvalue å´è¿˜å­˜åœ¨ï¼Œå¯¼è‡´æ³„æ¼ã€‚</li><li>è§£å†³ï¼šç”¨å®ŒåŠæ—¶ <code>remove()</code>ã€‚</li></ul><hr><h3 id="19-JUC-ä¸­çš„åŸå­ç±»æœ‰å“ªäº›ï¼Ÿ"><a href="#19-JUC-ä¸­çš„åŸå­ç±»æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="19. JUC ä¸­çš„åŸå­ç±»æœ‰å“ªäº›ï¼Ÿ"></a>19. JUC ä¸­çš„åŸå­ç±»æœ‰å“ªäº›ï¼Ÿ</h3><ul><li><strong>åŸºæœ¬ç±»å‹åŸå­ç±»</strong>ï¼šAtomicIntegerã€AtomicLongã€AtomicBooleanã€‚</li><li><strong>å¼•ç”¨ç±»å‹åŸå­ç±»</strong>ï¼šAtomicReferenceã€AtomicStampedReferenceã€‚</li><li><strong>æ•°ç»„åŸå­ç±»</strong>ï¼šAtomicIntegerArrayã€AtomicLongArrayã€‚</li><li><strong>å¯¹è±¡å±æ€§æ›´æ–°å™¨</strong>ï¼šAtomicIntegerFieldUpdater ç­‰ã€‚</li></ul><hr><h3 id="20-ä¹è§‚é”å’Œæ‚²è§‚é”çš„åŒºåˆ«ï¼Ÿ"><a href="#20-ä¹è§‚é”å’Œæ‚²è§‚é”çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="20. ä¹è§‚é”å’Œæ‚²è§‚é”çš„åŒºåˆ«ï¼Ÿ"></a>20. ä¹è§‚é”å’Œæ‚²è§‚é”çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>æ‚²è§‚é”</strong>ï¼šå‡è®¾ä¼šå‘ç”Ÿå†²çªï¼Œå…ˆåŠ é”å†æ“ä½œï¼ˆsynchronizedã€ReentrantLockï¼‰ã€‚</li><li><strong>ä¹è§‚é”</strong>ï¼šå‡è®¾ä¸ä¼šå†²çªï¼Œå…ˆæ“ä½œå†æ£€æŸ¥ï¼ˆCASï¼‰ã€‚</li></ul><hr><h2 id="å…­ã€JVM-å†…å­˜æ¨¡å‹"><a href="#å…­ã€JVM-å†…å­˜æ¨¡å‹" class="headerlink" title="å…­ã€JVM &amp; å†…å­˜æ¨¡å‹"></a>å…­ã€JVM &amp; å†…å­˜æ¨¡å‹</h2><hr><h3 id="1-JVM-å†…å­˜ç»“æ„ï¼Ÿ"><a href="#1-JVM-å†…å­˜ç»“æ„ï¼Ÿ" class="headerlink" title="1. JVM å†…å­˜ç»“æ„ï¼Ÿ"></a>1. JVM å†…å­˜ç»“æ„ï¼Ÿ</h3><p>JVM è¿è¡Œæ—¶ä¸»è¦åˆ†ä¸ºï¼š</p><ul><li><strong>å †ï¼ˆHeapï¼‰</strong>ï¼šå­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œåƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸã€‚</li><li><strong>è™šæ‹Ÿæœºæ ˆï¼ˆStackï¼‰</strong>ï¼šå­˜æ”¾æ–¹æ³•è°ƒç”¨çš„å±€éƒ¨å˜é‡ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€è¿”å›åœ°å€ã€‚</li><li><strong>æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰</strong>ï¼šä¸º native æ–¹æ³•æœåŠ¡ã€‚</li><li><strong>ç¨‹åºè®¡æ•°å™¨ï¼ˆPC Registerï¼‰</strong>ï¼šè®°å½•çº¿ç¨‹å½“å‰æ‰§è¡Œçš„å­—èŠ‚ç ä½ç½®ã€‚</li><li><strong>æ–¹æ³•åŒºï¼ˆMethod Area &#x2F; Metaspaceï¼‰</strong>ï¼šå­˜æ”¾ç±»å…ƒæ•°æ®ã€å¸¸é‡æ± ã€é™æ€å˜é‡ã€JIT ç¼–è¯‘åçš„ä»£ç ã€‚</li></ul><hr><h3 id="2-å †å’Œæ ˆçš„åŒºåˆ«ï¼Ÿ"><a href="#2-å †å’Œæ ˆçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="2. å †å’Œæ ˆçš„åŒºåˆ«ï¼Ÿ"></a>2. å †å’Œæ ˆçš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>å †</strong>ï¼šå­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œçº¿ç¨‹å…±äº«ï¼Œéœ€åƒåœ¾å›æ”¶ã€‚</li><li><strong>æ ˆ</strong>ï¼šå­˜æ”¾æ–¹æ³•å¸§ã€å±€éƒ¨å˜é‡ï¼Œçº¿ç¨‹ç§æœ‰ï¼Œç”Ÿå‘½å‘¨æœŸéšçº¿ç¨‹ç»“æŸã€‚</li></ul><hr><h3 id="3-å †å†…å­˜çš„åˆ†ä»£æ¨¡å‹ï¼Ÿ"><a href="#3-å †å†…å­˜çš„åˆ†ä»£æ¨¡å‹ï¼Ÿ" class="headerlink" title="3. å †å†…å­˜çš„åˆ†ä»£æ¨¡å‹ï¼Ÿ"></a>3. å †å†…å­˜çš„åˆ†ä»£æ¨¡å‹ï¼Ÿ</h3><ul><li><strong>æ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰</strong>ï¼šEden + Survivorï¼ˆS0&#x2F;S1ï¼‰ã€‚</li><li><strong>è€å¹´ä»£ï¼ˆOld Generationï¼‰</strong>ï¼šå­˜æ”¾é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ã€‚</li><li><strong>æ°¸ä¹…ä»£&#x2F;å…ƒç©ºé—´</strong>ï¼šå­˜æ”¾ç±»å…ƒä¿¡æ¯ã€å¸¸é‡æ± ã€‚</li></ul><hr><h3 id="4-æ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£çš„åŒºåˆ«ï¼Ÿ"><a href="#4-æ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="4. æ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£çš„åŒºåˆ«ï¼Ÿ"></a>4. æ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>æ–°ç”Ÿä»£</strong>ï¼šå¯¹è±¡æ–°å»ºæ—¶åˆ†é…ï¼Œå¤§éƒ¨åˆ†å¯¹è±¡â€œæœç”Ÿå¤•æ­»â€ã€‚</li><li><strong>è€å¹´ä»£</strong>ï¼šå­˜æ´»æ—¶é—´é•¿æˆ–å¤§å¯¹è±¡ç›´æ¥è¿›å…¥ã€‚</li><li><strong>æ°¸ä¹…ä»£ï¼ˆJDK 7 åŠä¹‹å‰ï¼‰</strong>ï¼šå­˜æ”¾ç±»ä¿¡æ¯ã€é™æ€å˜é‡ã€‚</li><li><strong>å…ƒç©ºé—´ï¼ˆJDK 8 ä¹‹åï¼‰</strong>ï¼šæ›¿ä»£æ°¸ä¹…ä»£ï¼Œä½¿ç”¨æœ¬åœ°å†…å­˜ï¼Œé¿å… OOM: PermGenã€‚</li></ul><hr><h3 id="5-å…ƒç©ºé—´å’Œæ°¸ä¹…ä»£çš„åŒºåˆ«ï¼Ÿ"><a href="#5-å…ƒç©ºé—´å’Œæ°¸ä¹…ä»£çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="5. å…ƒç©ºé—´å’Œæ°¸ä¹…ä»£çš„åŒºåˆ«ï¼Ÿ"></a>5. å…ƒç©ºé—´å’Œæ°¸ä¹…ä»£çš„åŒºåˆ«ï¼Ÿ</h3><ul><li>æ°¸ä¹…ä»£ï¼ˆPermGenï¼‰ï¼šä½¿ç”¨ JVM å†…å­˜ï¼Œå®¹æ˜“ OOMã€‚</li><li>å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰ï¼šä½¿ç”¨æœ¬åœ°å†…å­˜ï¼Œç†è®ºä¸Šæ›´å¤§ï¼Œæ›´çµæ´»ã€‚</li></ul><hr><h3 id="6-å¯¹è±¡åœ¨å †ä¸­çš„åˆ†é…è¿‡ç¨‹ï¼Ÿ"><a href="#6-å¯¹è±¡åœ¨å †ä¸­çš„åˆ†é…è¿‡ç¨‹ï¼Ÿ" class="headerlink" title="6. å¯¹è±¡åœ¨å †ä¸­çš„åˆ†é…è¿‡ç¨‹ï¼Ÿ"></a>6. å¯¹è±¡åœ¨å †ä¸­çš„åˆ†é…è¿‡ç¨‹ï¼Ÿ</h3><ol><li>åœ¨ Eden åŒºåˆ†é…ã€‚</li><li>Minor GC æ—¶ï¼Œå¹¸å­˜çš„å¯¹è±¡è¿›å…¥ Survivor åŒºã€‚</li><li>å¤šæ¬¡ Minor GC ä»å­˜æ´» â†’ æ™‹å‡è€å¹´ä»£ã€‚</li><li>å¤§å¯¹è±¡ï¼ˆå¦‚å¤§æ•°ç»„ï¼‰å¯èƒ½ç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚</li></ol><hr><h3 id="7-å¯¹è±¡ä»€ä¹ˆæ—¶å€™è¿›å…¥è€å¹´ä»£ï¼Ÿ"><a href="#7-å¯¹è±¡ä»€ä¹ˆæ—¶å€™è¿›å…¥è€å¹´ä»£ï¼Ÿ" class="headerlink" title="7. å¯¹è±¡ä»€ä¹ˆæ—¶å€™è¿›å…¥è€å¹´ä»£ï¼Ÿ"></a>7. å¯¹è±¡ä»€ä¹ˆæ—¶å€™è¿›å…¥è€å¹´ä»£ï¼Ÿ</h3><ul><li>åœ¨ Survivor åŒºç»è¿‡å¤šæ¬¡ Minor GCï¼Œè¾¾åˆ°æ™‹å‡é˜ˆå€¼ï¼ˆé»˜è®¤ 15 æ¬¡ï¼‰ã€‚</li><li>å¤§å¯¹è±¡è¶…è¿‡é˜ˆå€¼ï¼Œç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚</li><li>Survivor åŒºæ”¾ä¸ä¸‹ï¼Œç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚</li></ul><hr><h3 id="8-JVM-çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿ"><a href="#8-JVM-çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿ" class="headerlink" title="8. JVM çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿ"></a>8. JVM çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿ</h3><ul><li><strong>æ ‡è®°-æ¸…é™¤</strong>ï¼šæ ‡è®°å­˜æ´»å¯¹è±¡ï¼Œæ¸…é™¤æœªæ ‡è®°ã€‚ç¼ºç‚¹ï¼šç¢ç‰‡å¤šã€‚</li><li><strong>æ ‡è®°-æ•´ç†</strong>ï¼šæ ‡è®°å­˜æ´»å¯¹è±¡å¹¶ç§»åŠ¨ï¼Œæ•´ç†å†…å­˜ï¼Œé¿å…ç¢ç‰‡ã€‚</li><li><strong>å¤åˆ¶ç®—æ³•</strong>ï¼šå°†æ´»å¯¹è±¡å¤åˆ¶åˆ°æ–°åŒºåŸŸï¼Œæ¸…ç©ºæ—§åŒºåŸŸï¼Œé€‚åˆæ–°ç”Ÿä»£ã€‚</li></ul><hr><h3 id="9-åƒåœ¾æ”¶é›†å™¨æœ‰å“ªäº›ï¼Ÿ"><a href="#9-åƒåœ¾æ”¶é›†å™¨æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="9. åƒåœ¾æ”¶é›†å™¨æœ‰å“ªäº›ï¼Ÿ"></a>9. åƒåœ¾æ”¶é›†å™¨æœ‰å“ªäº›ï¼Ÿ</h3><ul><li><strong>Serial</strong>ï¼ˆå•çº¿ç¨‹ï¼Œé€‚åˆå°å†…å­˜ï¼‰ã€‚</li><li><strong>ParNew</strong>ï¼ˆå¤šçº¿ç¨‹ç‰ˆ Serialï¼‰ã€‚</li><li><strong>Parallel Scavengeï¼ˆååé‡ä¼˜å…ˆï¼‰</strong>ã€‚</li><li><strong>CMSï¼ˆä½å»¶è¿Ÿï¼Œå“åº”å¿«ï¼‰</strong>ã€‚</li><li><strong>G1ï¼ˆåŒºåŸŸåŒ–ï¼Œå‡è¡¡åœé¡¿æ—¶é—´ï¼‰</strong>ã€‚</li><li><strong>ZGCã€Shenandoahï¼ˆè¶…ä½å»¶è¿Ÿï¼Œé€‚åˆå¤§å†…å­˜åœºæ™¯ï¼‰</strong>ã€‚</li></ul><hr><h3 id="10-CMS-å’Œ-G1-çš„åŒºåˆ«ï¼Ÿ"><a href="#10-CMS-å’Œ-G1-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="10. CMS å’Œ G1 çš„åŒºåˆ«ï¼Ÿ"></a>10. CMS å’Œ G1 çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>CMS</strong>ï¼šå¹¶å‘æ”¶é›†ï¼Œä½å»¶è¿Ÿï¼Œä½†å¯èƒ½äº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚</li><li><strong>G1</strong>ï¼šåŸºäºåˆ†åŒºï¼ˆRegionï¼‰ï¼Œå¯é¢„æµ‹åœé¡¿æ—¶é—´ï¼Œæ•´ç†å†…å­˜ï¼Œé€‚åˆå¤§å †å†…å­˜ã€‚</li></ul><hr><h3 id="11-Minor-GC-å’Œ-Full-GC-çš„åŒºåˆ«ï¼Ÿ"><a href="#11-Minor-GC-å’Œ-Full-GC-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="11. Minor GC å’Œ Full GC çš„åŒºåˆ«ï¼Ÿ"></a>11. Minor GC å’Œ Full GC çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>Minor GC</strong>ï¼šå›æ”¶æ–°ç”Ÿä»£ï¼Œé€Ÿåº¦å¿«ï¼Œé¢‘ç¹ã€‚</li><li><strong>Full GC</strong>ï¼šå›æ”¶æ•´ä¸ªå †ï¼ˆæ–°ç”Ÿä»£ + è€å¹´ä»£ + å…ƒç©ºé—´ï¼‰ï¼Œè€—æ—¶é•¿ï¼Œé¢‘ç‡ä½ã€‚</li></ul><hr><h3 id="12-ä»€ä¹ˆæ˜¯-Stop-The-Worldï¼Ÿ"><a href="#12-ä»€ä¹ˆæ˜¯-Stop-The-Worldï¼Ÿ" class="headerlink" title="12. ä»€ä¹ˆæ˜¯ Stop The Worldï¼Ÿ"></a>12. ä»€ä¹ˆæ˜¯ Stop The Worldï¼Ÿ</h3><ul><li>GC æœŸé—´ï¼Œæ‰€æœ‰å·¥ä½œçº¿ç¨‹å¿…é¡»åœä¸‹æ¥ç­‰å¾…ï¼Œé€ æˆåº”ç”¨æš‚åœï¼ˆSTWï¼‰ã€‚</li><li>STW æ˜¯ä¸å¯é¿å…çš„ï¼Œåªèƒ½å°½é‡å‡å°‘æ—¶é•¿ã€‚</li></ul><hr><h3 id="13-JVM-å¸¸è§çš„è°ƒä¼˜å‚æ•°ï¼Ÿ"><a href="#13-JVM-å¸¸è§çš„è°ƒä¼˜å‚æ•°ï¼Ÿ" class="headerlink" title="13. JVM å¸¸è§çš„è°ƒä¼˜å‚æ•°ï¼Ÿ"></a>13. JVM å¸¸è§çš„è°ƒä¼˜å‚æ•°ï¼Ÿ</h3><ul><li><code>-Xms</code> åˆå§‹å †å¤§å°ã€‚</li><li><code>-Xmx</code> æœ€å¤§å †å¤§å°ã€‚</li><li><code>-Xmn</code> æ–°ç”Ÿä»£å¤§å°ã€‚</li><li><code>-XX:SurvivorRatio</code> Eden:Survivor æ¯”ä¾‹ã€‚</li><li><code>-XX:+PrintGCDetails</code> æ‰“å° GC æ—¥å¿—ã€‚</li><li><code>-XX:+UseG1GC</code> æŒ‡å®šåƒåœ¾æ”¶é›†å™¨ã€‚</li><li><code>-XX:MaxMetaspaceSize</code> å…ƒç©ºé—´å¤§å°ã€‚</li></ul><hr><h3 id="14-ç±»åŠ è½½çš„åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿ"><a href="#14-ç±»åŠ è½½çš„åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿ" class="headerlink" title="14. ç±»åŠ è½½çš„åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿ"></a>14. ç±»åŠ è½½çš„åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿ</h3><ul><li><strong>è¿‡ç¨‹</strong>ï¼šåŠ è½½è¯·æ±‚å…ˆäº¤ç»™çˆ¶åŠ è½½å™¨ï¼Œå¦‚æœçˆ¶åŠ è½½å™¨æ— æ³•åŠ è½½ï¼Œå†ç”±å­åŠ è½½å™¨åŠ è½½ã€‚</li></ul><hr><h3 id="15-åŒäº²å§”æ´¾çš„å¥½å¤„ï¼Ÿ"><a href="#15-åŒäº²å§”æ´¾çš„å¥½å¤„ï¼Ÿ" class="headerlink" title="15. åŒäº²å§”æ´¾çš„å¥½å¤„ï¼Ÿ"></a>15. åŒäº²å§”æ´¾çš„å¥½å¤„ï¼Ÿ</h3><ul><li>é¿å…ç±»é‡å¤åŠ è½½ã€‚</li><li>ä¿è¯æ ¸å¿ƒç±»ï¼ˆå¦‚ java.lang.Stringï¼‰ä¸ä¼šè¢«ç¯¡æ”¹ã€‚</li></ul><hr><h3 id="16-ç±»åŠ è½½å™¨çš„ç§ç±»ï¼Ÿ"><a href="#16-ç±»åŠ è½½å™¨çš„ç§ç±»ï¼Ÿ" class="headerlink" title="16. ç±»åŠ è½½å™¨çš„ç§ç±»ï¼Ÿ"></a>16. ç±»åŠ è½½å™¨çš„ç§ç±»ï¼Ÿ</h3><ul><li><strong>Bootstrap ClassLoader</strong>ï¼šåŠ è½½æ ¸å¿ƒç±»åº“ã€‚</li><li><strong>Extension ClassLoader</strong>ï¼šåŠ è½½æ‰©å±•ç±»ã€‚</li><li><strong>Application ClassLoader</strong>ï¼šåŠ è½½ç”¨æˆ·åº”ç”¨ç±»ã€‚</li><li><strong>è‡ªå®šä¹‰ ClassLoader</strong>ï¼šç”¨æˆ·è‡ªå·±æ‰©å±•ã€‚</li></ul><hr><h3 id="17-OOM-çš„å¸¸è§ç±»å‹ï¼Ÿ"><a href="#17-OOM-çš„å¸¸è§ç±»å‹ï¼Ÿ" class="headerlink" title="17. OOM çš„å¸¸è§ç±»å‹ï¼Ÿ"></a>17. OOM çš„å¸¸è§ç±»å‹ï¼Ÿ</h3><ul><li><strong>Java heap space</strong>ï¼šå †æº¢å‡ºã€‚</li><li><strong>GC overhead limit exceeded</strong>ï¼šGC å›æ”¶æ— æ•ˆã€‚</li><li><strong>Metaspace</strong>ï¼šå…ƒç©ºé—´æº¢å‡ºã€‚</li><li><strong>Direct buffer memory</strong>ï¼šç›´æ¥å†…å­˜æº¢å‡ºã€‚</li><li><strong>Unable to create new native thread</strong>ï¼šçº¿ç¨‹æ•°è¿‡å¤šã€‚</li></ul><hr><h3 id="18-å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºçš„åŒºåˆ«ï¼Ÿ"><a href="#18-å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="18. å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºçš„åŒºåˆ«ï¼Ÿ"></a>18. å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºçš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>å†…å­˜æ³„æ¼</strong>ï¼šä¸å†ä½¿ç”¨çš„å¯¹è±¡ä»ç„¶è¢«å¼•ç”¨ï¼Œä¸èƒ½è¢« GC å›æ”¶ã€‚</li><li><strong>å†…å­˜æº¢å‡º</strong>ï¼šå†…å­˜ä¸è¶³ï¼Œç”³è¯·ä¸åˆ°æ›´å¤šç©ºé—´ã€‚</li></ul><hr><h3 id="19-finalize-æ–¹æ³•çš„ä½œç”¨ï¼Ÿ"><a href="#19-finalize-æ–¹æ³•çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="19. finalize() æ–¹æ³•çš„ä½œç”¨ï¼Ÿ"></a>19. finalize() æ–¹æ³•çš„ä½œç”¨ï¼Ÿ</h3><ul><li>å¯¹è±¡è¢« GC å‰æ‰§è¡Œä¸€æ¬¡æ¸…ç†é€»è¾‘ã€‚</li><li>ç¼ºç‚¹ï¼šæ‰§è¡Œä¸ç¡®å®šã€æ€§èƒ½å·®ï¼ŒJDK9 å¼€å§‹åºŸå¼ƒï¼Œæ¨èä½¿ç”¨ <strong>try-with-resources&#x2F;AutoCloseable</strong>ã€‚</li></ul><hr><h3 id="20-Java-å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰çš„æ ¸å¿ƒå†…å®¹ï¼Ÿ"><a href="#20-Java-å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰çš„æ ¸å¿ƒå†…å®¹ï¼Ÿ" class="headerlink" title="20. Java å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰çš„æ ¸å¿ƒå†…å®¹ï¼Ÿ"></a>20. Java å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰çš„æ ¸å¿ƒå†…å®¹ï¼Ÿ</h3><ul><li>å®šä¹‰äº†å¤šçº¿ç¨‹å¦‚ä½•å…±äº«å†…å­˜ã€‚</li><li>å…³é”®ç‚¹ï¼š<ul><li><strong>ä¸»å†…å­˜</strong>ï¼šå­˜æ”¾å…±äº«å˜é‡ã€‚</li><li><strong>å·¥ä½œå†…å­˜</strong>ï¼šæ¯ä¸ªçº¿ç¨‹çš„æœ¬åœ°å‰¯æœ¬ã€‚</li><li><strong>happens-before è§„åˆ™</strong>ï¼šä¿è¯å¯è§æ€§ã€æœ‰åºæ€§ã€‚</li><li><strong>volatileã€synchronizedã€final</strong> æä¾›å†…å­˜è¯­ä¹‰ã€‚</li></ul></li></ul><hr><h2 id="ä¸ƒã€æ³›å‹ã€æ³¨è§£ã€åå°„"><a href="#ä¸ƒã€æ³›å‹ã€æ³¨è§£ã€åå°„" class="headerlink" title="ä¸ƒã€æ³›å‹ã€æ³¨è§£ã€åå°„"></a>ä¸ƒã€æ³›å‹ã€æ³¨è§£ã€åå°„</h2><hr><h3 id="1-ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿ</h3><ul><li><p><strong>å®šä¹‰</strong>ï¼šæ³›å‹ï¼ˆGenericï¼‰æ˜¯ <strong>å‚æ•°åŒ–ç±»å‹</strong>ï¼Œè®©ç±»ã€æ¥å£ã€æ–¹æ³•å¯ä»¥æ“ä½œä¸åŒç±»å‹çš„æ•°æ®ï¼Œè€Œä¸ç”¨ç¼–å†™é‡å¤ä»£ç ã€‚</p></li><li><p><strong>å¥½å¤„</strong>ï¼š</p><ol><li><strong>ç±»å‹å®‰å…¨</strong>ï¼ˆç¼–è¯‘æœŸæ£€æŸ¥ï¼Œé¿å… <code>ClassCastException</code>ï¼‰ã€‚</li><li><strong>ä»£ç å¤ç”¨</strong>ï¼ˆç›¸åŒé€»è¾‘å¯é€‚é…å¤šç§ç±»å‹ï¼‰ã€‚</li><li><strong>å¯è¯»æ€§é«˜</strong>ï¼ˆç±»å‹æ˜ç¡®ï¼‰ã€‚</li></ol></li><li><p><strong>ä¾‹å­</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;abc&quot;</span>); <span class="comment">// ç¼–è¯‘æœŸæ£€æŸ¥ç±»å‹</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="2-æ³›å‹çš„ç±»å‹æ“¦é™¤æœºåˆ¶ï¼Ÿ"><a href="#2-æ³›å‹çš„ç±»å‹æ“¦é™¤æœºåˆ¶ï¼Ÿ" class="headerlink" title="2. æ³›å‹çš„ç±»å‹æ“¦é™¤æœºåˆ¶ï¼Ÿ"></a>2. æ³›å‹çš„ç±»å‹æ“¦é™¤æœºåˆ¶ï¼Ÿ</h3><ul><li><p><strong>åŸç†</strong>ï¼šJava çš„æ³›å‹æ˜¯ <strong>ä¼ªæ³›å‹</strong>ï¼Œåªåœ¨ <strong>ç¼–è¯‘æœŸæœ‰æ•ˆ</strong>ï¼Œç¼–è¯‘åæ³›å‹ä¿¡æ¯è¢«æ“¦é™¤ï¼ˆType Erasureï¼‰ã€‚</p></li><li><p><strong>ç»“æœ</strong>ï¼š</p><ul><li><code>List&lt;String&gt;</code> å’Œ <code>List&lt;Integer&gt;</code> åœ¨è¿è¡Œæ—¶æ˜¯åŒä¸€ä¸ªç±»å‹ï¼š<code>List</code>ã€‚</li><li>æ³›å‹æ–¹æ³•çš„ç±»å‹å‚æ•°ä¼šè¢«æ“¦é™¤ä¸º <strong>ä¸Šç•Œï¼ˆextendsï¼‰æˆ– Object</strong>ã€‚</li></ul></li><li><p><strong>ä¾‹å­</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; l1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">List&lt;Integer&gt; l2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">System.out.println(l1.getClass() == l2.getClass()); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="3-æ³›å‹é€šé…ç¬¦-extends-å’Œ-super-çš„åŒºåˆ«ï¼Ÿ"><a href="#3-æ³›å‹é€šé…ç¬¦-extends-å’Œ-super-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="3. æ³›å‹é€šé…ç¬¦ ? extends å’Œ ? super çš„åŒºåˆ«ï¼Ÿ"></a>3. æ³›å‹é€šé…ç¬¦ ? extends å’Œ ? super çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><code>? extends T</code>ï¼šè¡¨ç¤ºç±»å‹çš„ <strong>ä¸Šç•Œ</strong>ï¼Œæ¥å— <code>T</code> åŠå…¶å­ç±»ã€‚<ul><li>é€‚åˆ <strong>ç”Ÿäº§è€…ï¼ˆProducerï¼‰</strong>ï¼Œåªè¯»ï¼Œä¸å¯å†™ã€‚</li></ul></li><li><code>? super T</code>ï¼šè¡¨ç¤ºç±»å‹çš„ <strong>ä¸‹ç•Œ</strong>ï¼Œæ¥å— <code>T</code> åŠå…¶çˆ¶ç±»ã€‚<ul><li>é€‚åˆ <strong>æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰</strong>ï¼Œå¯ä»¥å†™å…¥ T åŠå…¶å­ç±»å¯¹è±¡ã€‚</li></ul></li><li><strong>å£è¯€</strong>ï¼šPECSï¼ˆProducer Extends, Consumer Superï¼‰ã€‚</li></ul><hr><h3 id="4-æ³¨è§£çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#4-æ³¨è§£çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="4. æ³¨è§£çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>4. æ³¨è§£çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li><strong>ä½œç”¨</strong>ï¼šæ³¨è§£ï¼ˆAnnotationï¼‰æ˜¯ <strong>å…ƒæ•°æ®</strong>ï¼Œä¸ºä»£ç æä¾›è¯´æ˜ä¿¡æ¯ã€‚</li><li><strong>åˆ†ç±»</strong>ï¼š<ul><li>ç¼–è¯‘æœŸä½¿ç”¨ï¼ˆå¦‚ <code>@Override</code>, <code>@SuppressWarnings</code>ï¼‰ã€‚</li><li>è¿è¡Œæ—¶ä½¿ç”¨ï¼ˆç»“åˆåå°„ï¼Œé©±åŠ¨æ¡†æ¶é€»è¾‘ï¼Œå¦‚ <code>@Autowired</code>ï¼‰ã€‚</li></ul></li><li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šæ¡†æ¶å¼€å‘ï¼ˆSpringã€Hibernateï¼‰ã€ç¼–è¯‘å™¨æ£€æŸ¥ã€æ–‡æ¡£ç”Ÿæˆç­‰ã€‚</li></ul><hr><h3 id="5-å…ƒæ³¨è§£æœ‰å“ªäº›ï¼Ÿ"><a href="#5-å…ƒæ³¨è§£æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="5. å…ƒæ³¨è§£æœ‰å“ªäº›ï¼Ÿ"></a>5. å…ƒæ³¨è§£æœ‰å“ªäº›ï¼Ÿ</h3><p>Java æä¾›äº†å››ä¸ªå…ƒæ³¨è§£ï¼ˆæ³¨è§£çš„æ³¨è§£ï¼‰ï¼š</p><ol><li><code>@Target</code> â€”â€” æŒ‡å®šæ³¨è§£å¯ç”¨çš„ä½ç½®ï¼ˆç±»ã€æ–¹æ³•ã€å­—æ®µã€å‚æ•°ç­‰ï¼‰ã€‚</li><li><code>@Retention</code> â€”â€” æŒ‡å®šæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼ˆæºç &#x2F;ç¼–è¯‘æœŸ&#x2F;è¿è¡Œæ—¶ï¼‰ã€‚</li><li><code>@Documented</code> â€”â€” æ˜¯å¦åŒ…å«åœ¨ javadoc ä¸­ã€‚</li><li><code>@Inherited</code> â€”â€” å­ç±»æ˜¯å¦èƒ½ç»§æ‰¿çˆ¶ç±»çš„æ³¨è§£ã€‚</li></ol><hr><h3 id="6-è‡ªå®šä¹‰æ³¨è§£å¦‚ä½•å®ç°ï¼Ÿ"><a href="#6-è‡ªå®šä¹‰æ³¨è§£å¦‚ä½•å®ç°ï¼Ÿ" class="headerlink" title="6. è‡ªå®šä¹‰æ³¨è§£å¦‚ä½•å®ç°ï¼Ÿ"></a>6. è‡ªå®šä¹‰æ³¨è§£å¦‚ä½•å®ç°ï¼Ÿ</h3><ul><li><p><strong>å®šä¹‰</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MyAnnotation(&quot;test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>è§£æ</strong>ï¼ˆåå°„ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Method</span> <span class="variable">m</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line"><span class="type">MyAnnotation</span> <span class="variable">ann</span> <span class="operator">=</span> m.getAnnotation(MyAnnotation.class);</span><br><span class="line">System.out.println(ann.value());</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="7-åå°„çš„ä½œç”¨ï¼Ÿ"><a href="#7-åå°„çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="7. åå°„çš„ä½œç”¨ï¼Ÿ"></a>7. åå°„çš„ä½œç”¨ï¼Ÿ</h3><ul><li><strong>å®šä¹‰</strong>ï¼šåå°„ï¼ˆReflectionï¼‰å…è®¸ç¨‹åºåœ¨ <strong>è¿è¡Œæ—¶</strong> è·å–ç±»çš„ä¿¡æ¯ï¼Œå¹¶æ“ä½œå…¶å±æ€§ã€æ–¹æ³•ã€æ„é€ å™¨ã€‚</li><li><strong>ä½œç”¨</strong>ï¼š<ul><li>æ¡†æ¶ï¼ˆå¦‚ Springã€MyBatisï¼‰è‡ªåŠ¨æ³¨å…¥å’Œé…ç½®ã€‚</li><li>åŠ¨æ€ä»£ç†ã€‚</li><li>åŠ¨æ€åŠ è½½ç±»ã€‚</li></ul></li></ul><hr><h3 id="8-åå°„çš„æ€§èƒ½é—®é¢˜ï¼Ÿ"><a href="#8-åå°„çš„æ€§èƒ½é—®é¢˜ï¼Ÿ" class="headerlink" title="8. åå°„çš„æ€§èƒ½é—®é¢˜ï¼Ÿ"></a>8. åå°„çš„æ€§èƒ½é—®é¢˜ï¼Ÿ</h3><ul><li><strong>åŸå› </strong>ï¼š<ul><li>åå°„è°ƒç”¨æ–¹æ³•æ¯”ç›´æ¥è°ƒç”¨å¤šäº†å®‰å…¨æ£€æŸ¥ã€æ–¹æ³•æŸ¥æ‰¾ï¼Œæ€§èƒ½å·® 10~20 å€ã€‚</li></ul></li><li><strong>ä¼˜åŒ–</strong>ï¼š<ul><li>ä½¿ç”¨ <code>setAccessible(true)</code> å…³é—­å®‰å…¨æ£€æŸ¥ã€‚</li><li>ä½¿ç”¨ <code>MethodHandle</code>ï¼ˆJDK7+ï¼‰ã€‚</li><li>ä½¿ç”¨ <code>LambdaMetafactory</code>ï¼ˆJDK8+ï¼‰åšåŠ¨æ€ä»£ç†ã€‚</li></ul></li></ul><hr><h3 id="9-åå°„èƒ½å¦è®¿é—®ç§æœ‰å­—æ®µï¼Ÿ"><a href="#9-åå°„èƒ½å¦è®¿é—®ç§æœ‰å­—æ®µï¼Ÿ" class="headerlink" title="9. åå°„èƒ½å¦è®¿é—®ç§æœ‰å­—æ®µï¼Ÿ"></a>9. åå°„èƒ½å¦è®¿é—®ç§æœ‰å­—æ®µï¼Ÿ</h3><ul><li><p><strong>èƒ½</strong>ï¼Œéœ€è¦ <code>setAccessible(true)</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">field.setAccessible(<span class="literal">true</span>);</span><br><span class="line">field.set(obj, <span class="string">&quot;newValue&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p><strong>æ³¨æ„</strong>ï¼šJDK 9 æ¨¡å—åŒ–åï¼Œè·¨æ¨¡å—è®¿é—®å¯èƒ½ä¼šæœ‰ <code>InaccessibleObjectException</code>ã€‚</p></li></ul><hr><h3 id="10-åŠ¨æ€ä»£ç†çš„ä¸¤ç§å®ç°æ–¹å¼ï¼Ÿ"><a href="#10-åŠ¨æ€ä»£ç†çš„ä¸¤ç§å®ç°æ–¹å¼ï¼Ÿ" class="headerlink" title="10. åŠ¨æ€ä»£ç†çš„ä¸¤ç§å®ç°æ–¹å¼ï¼Ÿ"></a>10. åŠ¨æ€ä»£ç†çš„ä¸¤ç§å®ç°æ–¹å¼ï¼Ÿ</h3><ol><li><strong>JDK åŠ¨æ€ä»£ç†</strong>ï¼šåŸºäº <code>InvocationHandler + Proxy</code>ï¼Œåªèƒ½ä»£ç† <strong>æ¥å£</strong>ã€‚</li><li><strong>CGLIB åŠ¨æ€ä»£ç†</strong>ï¼šåŸºäº ASM å­—èŠ‚ç ç”Ÿæˆï¼Œç»§æ‰¿ç›®æ ‡ç±»ï¼Œèƒ½ä»£ç† <strong>ç±»</strong>ã€‚</li></ol><hr><h3 id="11-JDK-åŠ¨æ€ä»£ç†å’Œ-CGLIB-çš„åŒºåˆ«ï¼Ÿ"><a href="#11-JDK-åŠ¨æ€ä»£ç†å’Œ-CGLIB-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="11. JDK åŠ¨æ€ä»£ç†å’Œ CGLIB çš„åŒºåˆ«ï¼Ÿ"></a>11. JDK åŠ¨æ€ä»£ç†å’Œ CGLIB çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>JDK åŠ¨æ€ä»£ç†</strong>ï¼š<ul><li>ä»£ç†æ¥å£ã€‚</li><li>JDK è‡ªå¸¦ï¼Œæ— éœ€ä¾èµ–ã€‚</li><li>æ€§èƒ½ç•¥ä½ã€‚</li></ul></li><li><strong>CGLIB</strong>ï¼š<ul><li>ä»£ç†ç±»ï¼ˆç”Ÿæˆå­ç±»ï¼‰ã€‚</li><li>ä¸èƒ½ä»£ç† <code>final</code> ç±»&#x2F;æ–¹æ³•ã€‚</li><li>æ€§èƒ½æ›´é«˜ï¼ˆå­—èŠ‚ç ç”Ÿæˆï¼‰ã€‚</li></ul></li></ul><hr><h3 id="12-åå°„å¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Ÿ"><a href="#12-åå°„å¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Ÿ" class="headerlink" title="12. åå°„å¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Ÿ"></a>12. åå°„å¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Ÿ</h3><ol><li><p><strong>ä½¿ç”¨ Class çš„ <code>newInstance()</code></strong>ï¼ˆå·²åºŸå¼ƒï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> clazz.newInstance();</span><br></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨ Constructor</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Constructor&lt;?&gt; ctor = clazz.getConstructor(String.class);</span><br><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> ctor.newInstance(<span class="string">&quot;param&quot;</span>);</span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="13-Class-forName-å’Œ-ClassLoader-loadClass-çš„åŒºåˆ«ï¼Ÿ"><a href="#13-Class-forName-å’Œ-ClassLoader-loadClass-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="13. Class.forName å’Œ ClassLoader.loadClass çš„åŒºåˆ«ï¼Ÿ"></a>13. Class.forName å’Œ ClassLoader.loadClass çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>Class.forName</strong>ï¼šåŠ è½½å¹¶ <strong>åˆå§‹åŒ–</strong> ç±»ï¼ˆä¼šæ‰§è¡Œé™æ€ä»£ç å—ï¼‰ã€‚</li><li><strong>ClassLoader.loadClass</strong>ï¼šä»…åŠ è½½ï¼Œä¸åˆå§‹åŒ–ï¼ˆå»¶è¿Ÿæ‰§è¡Œ <code>&lt;clinit&gt;</code>ï¼‰ã€‚</li></ul><hr><h3 id="14-æ³¨è§£å’Œåå°„ç»“åˆèƒ½å®ç°å“ªäº›åŠŸèƒ½ï¼Ÿ"><a href="#14-æ³¨è§£å’Œåå°„ç»“åˆèƒ½å®ç°å“ªäº›åŠŸèƒ½ï¼Ÿ" class="headerlink" title="14. æ³¨è§£å’Œåå°„ç»“åˆèƒ½å®ç°å“ªäº›åŠŸèƒ½ï¼Ÿ"></a>14. æ³¨è§£å’Œåå°„ç»“åˆèƒ½å®ç°å“ªäº›åŠŸèƒ½ï¼Ÿ</h3><ul><li>IOC &#x2F; DIï¼ˆä¾èµ–æ³¨å…¥ï¼ŒSpring çš„ <code>@Autowired</code>ï¼‰ã€‚</li><li>ORM æ¡†æ¶ï¼ˆMyBatis çš„ <code>@Mapper</code>ï¼ŒJPA çš„ <code>@Entity</code>ï¼‰ã€‚</li><li>AOPï¼ˆ<code>@Aspect</code>ï¼‰ã€‚</li><li>é…ç½®é©±åŠ¨å¼€å‘ï¼ˆ<code>@Configuration</code>, <code>@Value</code>ï¼‰ã€‚</li></ul><hr><h3 id="15-æ³¨è§£å¤„ç†å™¨ï¼ˆAPTï¼‰çš„ä½œç”¨ï¼Ÿ"><a href="#15-æ³¨è§£å¤„ç†å™¨ï¼ˆAPTï¼‰çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="15. æ³¨è§£å¤„ç†å™¨ï¼ˆAPTï¼‰çš„ä½œç”¨ï¼Ÿ"></a>15. æ³¨è§£å¤„ç†å™¨ï¼ˆAPTï¼‰çš„ä½œç”¨ï¼Ÿ</h3><ul><li><strong>APTï¼ˆAnnotation Processing Toolï¼‰</strong>ï¼šç¼–è¯‘æœŸæ‰«ææ³¨è§£å¹¶ç”Ÿæˆä»£ç ã€‚</li><li><strong>å…¸å‹åº”ç”¨</strong>ï¼š<ul><li>Dagger2ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ã€‚</li><li>ButterKnifeï¼ˆè§†å›¾æ³¨å…¥ï¼‰ã€‚</li><li>Lombokï¼ˆè‡ªåŠ¨ç”Ÿæˆ getter&#x2F;setter&#x2F;toString ç­‰ï¼‰ã€‚</li></ul></li></ul><hr><h2 id="å…«ã€Java-8-æ–°ç‰¹æ€§"><a href="#å…«ã€Java-8-æ–°ç‰¹æ€§" class="headerlink" title="å…«ã€Java 8+ æ–°ç‰¹æ€§"></a>å…«ã€Java 8+ æ–°ç‰¹æ€§</h2><ol><li>Lambda è¡¨è¾¾å¼çš„ä½œç”¨ï¼Ÿ</li><li>å‡½æ•°å¼æ¥å£æœ‰å“ªäº›ï¼Ÿ</li><li>Stream æµçš„å¸¸è§æ“ä½œï¼Ÿ</li><li>Optional çš„ä½œç”¨ï¼Ÿ</li><li>CompletableFuture çš„ä½œç”¨ï¼Ÿ</li><li>Java 8 æ¥å£çš„é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ï¼Ÿ</li><li>forEach å’Œä¼ ç»Ÿ for çš„åŒºåˆ«ï¼Ÿ</li><li>parallelStream çš„åŸç†ï¼Ÿ</li><li>Java 9 æ¨¡å—åŒ–ç³»ç»Ÿï¼ˆJigsawï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>Java 14 çš„ switch è¡¨è¾¾å¼å¢å¼ºï¼Ÿ</li><li>Java 16 çš„ record ç‰¹æ€§ï¼Ÿ</li><li>Java 17 çš„ sealed class ç‰¹æ€§ï¼Ÿ</li><li>var å…³é”®å­—æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>ZGC çš„ç‰¹æ€§ï¼Ÿ</li><li>Project Loom çš„è™šæ‹Ÿçº¿ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</li></ol><h2 id="ä¹ã€IO"><a href="#ä¹ã€IO" class="headerlink" title="ä¹ã€IO"></a>ä¹ã€IO</h2><hr><h2 id="ä¸€ã€Java-IO-åŸºç¡€ä¸æµï¼ˆ1â€“20ï¼‰"><a href="#ä¸€ã€Java-IO-åŸºç¡€ä¸æµï¼ˆ1â€“20ï¼‰" class="headerlink" title="ä¸€ã€Java IO åŸºç¡€ä¸æµï¼ˆ1â€“20ï¼‰"></a>ä¸€ã€Java IO åŸºç¡€ä¸æµï¼ˆ1â€“20ï¼‰</h2><hr><h3 id="1-Java-IO-çš„æ€»ä½“ä½“ç³»ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-Java-IO-çš„æ€»ä½“ä½“ç³»ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. Java IO çš„æ€»ä½“ä½“ç³»ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. Java IO çš„æ€»ä½“ä½“ç³»ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li><strong>IO çš„ä¸¤å¤§åŸºç±»</strong>ï¼š<ul><li>å­—èŠ‚æµï¼š<code>InputStream</code>ã€<code>OutputStream</code>ï¼ˆå¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼‰ã€‚</li><li>å­—ç¬¦æµï¼š<code>Reader</code>ã€<code>Writer</code>ï¼ˆå¤„ç†æ–‡æœ¬å­—ç¬¦ï¼‰ã€‚</li></ul></li><li><strong>æŒ‰åŠŸèƒ½åˆ’åˆ†</strong>ï¼š<ul><li>èŠ‚ç‚¹æµï¼ˆç›´æ¥å¯¹æ¥æ•°æ®æºï¼Œå¦‚ <code>FileInputStream</code>ã€<code>FileReader</code>ï¼‰ã€‚</li><li>å¤„ç†æµï¼ˆåŒ…è£…å…¶ä»–æµï¼Œå¦‚ <code>BufferedReader</code>ã€<code>DataInputStream</code>ï¼‰ã€‚</li></ul></li><li><strong>æ ¸å¿ƒè®¾è®¡æ¨¡å¼</strong>ï¼šè£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰ï¼Œé€šè¿‡å±‚å±‚åŒ…è£…å¢å¼ºåŠŸèƒ½ã€‚</li></ul><hr><h3 id="2-InputStream-OutputStream-çš„å¸¸è§å­ç±»æœ‰å“ªäº›ï¼Ÿ"><a href="#2-InputStream-OutputStream-çš„å¸¸è§å­ç±»æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="2. InputStream &#x2F; OutputStream çš„å¸¸è§å­ç±»æœ‰å“ªäº›ï¼Ÿ"></a>2. InputStream &#x2F; OutputStream çš„å¸¸è§å­ç±»æœ‰å“ªäº›ï¼Ÿ</h3><ul><li><strong>InputStream</strong>ï¼š<code>FileInputStream</code>ã€<code>BufferedInputStream</code>ã€<code>DataInputStream</code>ã€<code>ObjectInputStream</code>ã€<code>ByteArrayInputStream</code>ã€‚</li><li><strong>OutputStream</strong>ï¼š<code>FileOutputStream</code>ã€<code>BufferedOutputStream</code>ã€<code>DataOutputStream</code>ã€<code>ObjectOutputStream</code>ã€<code>ByteArrayOutputStream</code>ã€‚</li></ul><hr><h3 id="3-Reader-Writer-çš„å¸¸è§å­ç±»æœ‰å“ªäº›ï¼Ÿ"><a href="#3-Reader-Writer-çš„å¸¸è§å­ç±»æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="3. Reader &#x2F; Writer çš„å¸¸è§å­ç±»æœ‰å“ªäº›ï¼Ÿ"></a>3. Reader &#x2F; Writer çš„å¸¸è§å­ç±»æœ‰å“ªäº›ï¼Ÿ</h3><ul><li><strong>Reader</strong>ï¼š<code>FileReader</code>ã€<code>BufferedReader</code>ã€<code>InputStreamReader</code>ã€<code>CharArrayReader</code>ã€<code>StringReader</code>ã€‚</li><li><strong>Writer</strong>ï¼š<code>FileWriter</code>ã€<code>BufferedWriter</code>ã€<code>OutputStreamWriter</code>ã€<code>CharArrayWriter</code>ã€<code>StringWriter</code>ã€‚</li></ul><hr><h3 id="4-å­—èŠ‚æµä¸å­—ç¬¦æµçš„æœ¬è´¨åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ï¼Ÿ"><a href="#4-å­—èŠ‚æµä¸å­—ç¬¦æµçš„æœ¬è´¨åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="4. å­—èŠ‚æµä¸å­—ç¬¦æµçš„æœ¬è´¨åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ï¼Ÿ"></a>4. å­—èŠ‚æµä¸å­—ç¬¦æµçš„æœ¬è´¨åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ï¼Ÿ</h3><ul><li><strong>å­—èŠ‚æµ</strong>ï¼ˆ8bitï¼‰ï¼šé¢å‘äºŒè¿›åˆ¶æ•°æ®ï¼Œå¦‚å›¾ç‰‡ã€éŸ³è§†é¢‘ã€å‹ç¼©æ–‡ä»¶ã€‚</li><li><strong>å­—ç¬¦æµ</strong>ï¼ˆ16bitï¼ŒåŸºäº Unicodeï¼‰ï¼šé¢å‘æ–‡æœ¬ï¼Œè‡ªåŠ¨å¤„ç†å­—ç¬¦ç¼–ç ã€‚</li><li><strong>è”ç³»</strong>ï¼šå­—ç¬¦æµå¸¸å¸¸é€šè¿‡ <code>InputStreamReader/OutputStreamWriter</code> åŒ…è£…å­—èŠ‚æµå¹¶æŒ‡å®šç¼–ç ã€‚</li></ul><hr><h3 id="5-ä¸ºä»€ä¹ˆè¦æœ‰ç¼“å†²æµï¼Ÿ"><a href="#5-ä¸ºä»€ä¹ˆè¦æœ‰ç¼“å†²æµï¼Ÿ" class="headerlink" title="5. ä¸ºä»€ä¹ˆè¦æœ‰ç¼“å†²æµï¼Ÿ"></a>5. ä¸ºä»€ä¹ˆè¦æœ‰ç¼“å†²æµï¼Ÿ</h3><ul><li><strong>åŸå› </strong>ï¼šæ–‡ä»¶ IO å±äºç³»ç»Ÿè°ƒç”¨ï¼Œæ¯æ¬¡è¯»å†™ä»£ä»·é«˜ã€‚</li><li><strong>ä½œç”¨</strong>ï¼šå‡å°‘ç£ç›˜äº¤äº’æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ã€‚</li><li><strong>ä¾‹å­</strong>ï¼š<code>BufferedReader.readLine()</code> èƒ½æŒ‰è¡Œè¯»å–ï¼Œæ•ˆç‡è¿œé«˜äº <code>FileReader.read()</code>ã€‚</li></ul><hr><h3 id="6-flush-ä¸-close-çš„åŒºåˆ«ï¼Ÿ"><a href="#6-flush-ä¸-close-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="6. flush() ä¸ close() çš„åŒºåˆ«ï¼Ÿ"></a>6. flush() ä¸ close() çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>flush()</strong>ï¼šå°†å†…å­˜ç¼“å†²åŒºæ•°æ®ç«‹åˆ»å†™å…¥ç›®æ ‡ï¼ˆä½†ä¸å…³é—­æµï¼‰ã€‚</li><li><strong>close()</strong>ï¼šå…ˆæ‰§è¡Œ <code>flush()</code>ï¼Œç„¶åé‡Šæ”¾åº•å±‚èµ„æºã€‚</li><li><strong>æ³¨æ„ç‚¹</strong>ï¼š<ul><li>è‹¥å¿˜è®° <code>flush()</code>ï¼Œå¯èƒ½å¯¼è‡´éƒ¨åˆ†æ•°æ®æœªå†™å…¥æ–‡ä»¶ã€‚</li><li><code>close()</code> åå†è°ƒç”¨ <code>write()</code> ä¼šæŠ›å¼‚å¸¸ã€‚</li></ul></li></ul><hr><h3 id="7-try-with-resources-çš„å·¥ä½œåŸç†ï¼Ÿ"><a href="#7-try-with-resources-çš„å·¥ä½œåŸç†ï¼Ÿ" class="headerlink" title="7. try-with-resources çš„å·¥ä½œåŸç†ï¼Ÿ"></a>7. try-with-resources çš„å·¥ä½œåŸç†ï¼Ÿ</h3><ul><li><strong>è¯­æ³•ç³–</strong>ï¼š<code>try (Resource r = ...) &#123;&#125;</code>ï¼Œè¦æ±‚èµ„æºå®ç° <code>AutoCloseable</code>ã€‚</li><li><strong>åŸç†</strong>ï¼šç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆ <code>finally &#123; r.close() &#125;</code>ã€‚</li><li><strong>suppressed exceptions</strong>ï¼šå¦‚æœ <code>try</code> å’Œ <code>close()</code> éƒ½æŠ›å¼‚å¸¸ï¼Œå…³é—­æ—¶çš„å¼‚å¸¸ä¼šè¢«æ ‡è®°ä¸º <strong>suppressed</strong>ï¼Œå¯é€šè¿‡ <code>Throwable.getSuppressed()</code> è·å–ã€‚</li></ul><hr><h3 id="8-è£…é¥°å™¨æ¨¡å¼åœ¨-Java-IO-ä¸­å¦‚ä½•ä½“ç°ï¼Ÿ"><a href="#8-è£…é¥°å™¨æ¨¡å¼åœ¨-Java-IO-ä¸­å¦‚ä½•ä½“ç°ï¼Ÿ" class="headerlink" title="8. è£…é¥°å™¨æ¨¡å¼åœ¨ Java IO ä¸­å¦‚ä½•ä½“ç°ï¼Ÿ"></a>8. è£…é¥°å™¨æ¨¡å¼åœ¨ Java IO ä¸­å¦‚ä½•ä½“ç°ï¼Ÿ</h3><ul><li><p><strong>ä¾‹å­</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(</span><br><span class="line">                    <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;a.txt&quot;</span>), StandardCharsets.UTF_8));</span><br></pre></td></tr></table></figure></li><li><p><strong>æœ¬è´¨</strong>ï¼šæ¯å±‚æµåªå…³å¿ƒè‡ªå·±çš„åŠŸèƒ½ï¼ˆç¼“å†²ã€è§£ç ã€è¡Œè¯»å–ï¼‰ï¼Œé€šè¿‡é“¾å¼ç»„åˆå¢å¼ºèƒ½åŠ›ã€‚</p></li></ul><hr><h3 id="9-File-ç±»çš„èƒ½åŠ›ä¸é™åˆ¶ï¼Ÿ"><a href="#9-File-ç±»çš„èƒ½åŠ›ä¸é™åˆ¶ï¼Ÿ" class="headerlink" title="9. File ç±»çš„èƒ½åŠ›ä¸é™åˆ¶ï¼Ÿ"></a>9. File ç±»çš„èƒ½åŠ›ä¸é™åˆ¶ï¼Ÿ</h3><ul><li><strong>èƒ½åšçš„</strong>ï¼šæ–‡ä»¶&#x2F;ç›®å½•çš„å…ƒæ•°æ®æ“ä½œï¼ˆè·¯å¾„ã€å­˜åœ¨æ€§ã€æƒé™ã€å¤§å°ã€ä¿®æ”¹æ—¶é—´ç­‰ï¼‰ã€‚</li><li><strong>ä¸èƒ½åšçš„</strong>ï¼šä¸æ”¯æŒè¯»å†™æ–‡ä»¶å†…å®¹ï¼Œéœ€ç»“åˆ <code>InputStream/OutputStream</code>ã€‚</li></ul><hr><h3 id="10-RandomAccessFile-çš„ç”¨é€”ï¼Ÿ"><a href="#10-RandomAccessFile-çš„ç”¨é€”ï¼Ÿ" class="headerlink" title="10. RandomAccessFile çš„ç”¨é€”ï¼Ÿ"></a>10. RandomAccessFile çš„ç”¨é€”ï¼Ÿ</h3><ul><li><strong>åŠŸèƒ½</strong>ï¼šæ”¯æŒéšæœºè¯»å†™ï¼Œå†…éƒ¨æœ‰ä¸€ä¸ªæ–‡ä»¶æŒ‡é’ˆï¼Œå¯ <code>seek()</code> åˆ°ä»»æ„ä½ç½®è¯»å†™ã€‚</li><li><strong>å…¸å‹åœºæ™¯</strong>ï¼šæ—¥å¿—æ–‡ä»¶ã€æ•°æ®åº“å­˜å‚¨æ–‡ä»¶ã€‚</li><li><strong>å¹¶å‘é—®é¢˜</strong>ï¼šä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤šçº¿ç¨‹å†™éœ€åŠ é”ã€‚</li></ul><hr><h3 id="11-FileInputStream-ä¸-FileReader-çš„åŒºåˆ«ï¼Ÿ"><a href="#11-FileInputStream-ä¸-FileReader-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="11. FileInputStream ä¸ FileReader çš„åŒºåˆ«ï¼Ÿ"></a>11. FileInputStream ä¸ FileReader çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>FileInputStream</strong>ï¼šå­—èŠ‚æµï¼Œç›´æ¥è¯»äºŒè¿›åˆ¶ã€‚</li><li><strong>FileReader</strong>ï¼šå­—ç¬¦æµï¼Œå†…éƒ¨ç”¨ <code>InputStreamReader</code> å¹¶é»˜è®¤ä½¿ç”¨å¹³å°ç¼–ç ã€‚</li><li><strong>ä½¿ç”¨å»ºè®®</strong>ï¼š<ul><li>éæ–‡æœ¬ â†’ <code>FileInputStream</code>ã€‚</li><li>æ–‡æœ¬ï¼ˆéœ€ç¼–ç å¤„ç†ï¼‰ â†’ <code>FileReader</code>ï¼ˆä½†æœ€å¥½ç”¨ <code>InputStreamReader</code> æ˜¾å¼æŒ‡å®šç¼–ç ï¼‰ã€‚</li></ul></li></ul><hr><h3 id="12-å¸¸è§æ–‡ä»¶æ‹·è´æ–¹å¼æ€§èƒ½å¯¹æ¯”"><a href="#12-å¸¸è§æ–‡ä»¶æ‹·è´æ–¹å¼æ€§èƒ½å¯¹æ¯”" class="headerlink" title="12. å¸¸è§æ–‡ä»¶æ‹·è´æ–¹å¼æ€§èƒ½å¯¹æ¯”"></a>12. å¸¸è§æ–‡ä»¶æ‹·è´æ–¹å¼æ€§èƒ½å¯¹æ¯”</h3><ol><li><strong>è£¸ read&#x2F;write</strong>ï¼šé€å­—èŠ‚æ‹·è´ï¼Œæœ€æ…¢ã€‚</li><li><strong>å¸¦ç¼“å†²</strong>ï¼š<code>BufferedInputStream/BufferedOutputStream</code>ï¼Œæ€§èƒ½æå‡ 5~10 å€ã€‚</li><li><strong>NIO <code>FileChannel.transferTo()</code></strong>ï¼šåˆ©ç”¨é›¶æ‹·è´ï¼Œæ€§èƒ½æœ€é«˜ã€‚</li></ol><hr><h3 id="13-å¦‚ä½•å®‰å…¨å¤„ç†å­—ç¬¦ç¼–ç ï¼Ÿ"><a href="#13-å¦‚ä½•å®‰å…¨å¤„ç†å­—ç¬¦ç¼–ç ï¼Ÿ" class="headerlink" title="13. å¦‚ä½•å®‰å…¨å¤„ç†å­—ç¬¦ç¼–ç ï¼Ÿ"></a>13. å¦‚ä½•å®‰å…¨å¤„ç†å­—ç¬¦ç¼–ç ï¼Ÿ</h3><ul><li><p><strong>æ–¹å¼</strong>ï¼šä½¿ç”¨ <code>InputStreamReader</code>&#x2F;<code>OutputStreamWriter</code> å¹¶æ˜¾å¼æŒ‡å®šç¼–ç ã€‚</p></li><li><p><strong>ä¾‹å­</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;a.txt&quot;</span>), StandardCharsets.UTF_8);</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="14-å­—ç¬¦ç¼–ç å¸¸è§å‘ï¼Ÿ"><a href="#14-å­—ç¬¦ç¼–ç å¸¸è§å‘ï¼Ÿ" class="headerlink" title="14. å­—ç¬¦ç¼–ç å¸¸è§å‘ï¼Ÿ"></a>14. å­—ç¬¦ç¼–ç å¸¸è§å‘ï¼Ÿ</h3><ul><li>UTF-8 vs GBK æ··ç”¨ï¼šè§£ç é”™è¯¯ï¼Œå‡ºç°ä¹±ç ã€‚</li><li>BOMï¼ˆByte Order Markï¼‰ï¼šéƒ¨åˆ† UTF-8 æ–‡ä»¶å‰ 3 å­—èŠ‚ BOM å¯èƒ½å¯¼è‡´è§£æå¤±è´¥ã€‚</li><li>æˆªæ–­ï¼šå†™å…¥æ—¶æŒ‰å­—èŠ‚æˆªæ–­ UTF-8 å¤šå­—èŠ‚å­—ç¬¦ â†’ ä¹±ç ã€‚</li><li><strong>è§£å†³</strong>ï¼šç»Ÿä¸€ç¼–ç ï¼ˆUTF-8ï¼‰ï¼Œé¿å…éšå¼ç¼–ç ã€‚</li></ul><hr><h3 id="15-æ–‡ä»¶è¿½åŠ ï¼ˆappendï¼‰æ–¹å¼ï¼Ÿ"><a href="#15-æ–‡ä»¶è¿½åŠ ï¼ˆappendï¼‰æ–¹å¼ï¼Ÿ" class="headerlink" title="15. æ–‡ä»¶è¿½åŠ ï¼ˆappendï¼‰æ–¹å¼ï¼Ÿ"></a>15. æ–‡ä»¶è¿½åŠ ï¼ˆappendï¼‰æ–¹å¼ï¼Ÿ</h3><ul><li><p><strong>å®ç°</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;a.txt&quot;</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure></li><li><p><strong>åŸå­æ€§é—®é¢˜</strong>ï¼šå¤šçº¿ç¨‹å†™å…¥éœ€åŠ é”ï¼Œå¦åˆ™å¯èƒ½äº¤å‰è¦†ç›–ã€‚</p></li></ul><hr><h3 id="16-å¦‚ä½•åˆ¤æ–­å¹¶å¤„ç†æ–‡ä»¶çŠ¶æ€ï¼Ÿ"><a href="#16-å¦‚ä½•åˆ¤æ–­å¹¶å¤„ç†æ–‡ä»¶çŠ¶æ€ï¼Ÿ" class="headerlink" title="16. å¦‚ä½•åˆ¤æ–­å¹¶å¤„ç†æ–‡ä»¶çŠ¶æ€ï¼Ÿ"></a>16. å¦‚ä½•åˆ¤æ–­å¹¶å¤„ç†æ–‡ä»¶çŠ¶æ€ï¼Ÿ</h3><ul><li><strong>å­˜åœ¨æ€§</strong>ï¼š<code>file.exists()</code>ã€‚</li><li><strong>æƒé™</strong>ï¼š<code>file.canRead()</code>, <code>file.canWrite()</code>ã€‚</li><li><strong>å ç”¨</strong>ï¼šåªèƒ½é€šè¿‡æ‰“å¼€å°è¯•ï¼Œè‹¥è¢«å ç”¨ä¼šæŠ›å¼‚å¸¸ã€‚</li></ul><hr><h3 id="17-File-mkdirs-ä¸-mkdir-åŒºåˆ«ï¼Ÿ"><a href="#17-File-mkdirs-ä¸-mkdir-åŒºåˆ«ï¼Ÿ" class="headerlink" title="17. File.mkdirs() ä¸ mkdir() åŒºåˆ«ï¼Ÿ"></a>17. File.mkdirs() ä¸ mkdir() åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>mkdir()</strong>ï¼šåªåˆ›å»ºå½“å‰ç›®å½•ï¼Œçˆ¶ç›®å½•ä¸å­˜åœ¨åˆ™å¤±è´¥ã€‚</li><li><strong>mkdirs()</strong>ï¼šä¼šé€’å½’åˆ›å»ºæ‰€æœ‰ä¸å­˜åœ¨çš„çˆ¶ç›®å½•ã€‚</li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>true</code>ï¼Œå¦åˆ™ <code>false</code>ã€‚</li></ul><hr><h3 id="18-ä¸´æ—¶æ–‡ä»¶ï¼ˆcreateTempFileï¼‰çš„ç”¨é€”ï¼Ÿ"><a href="#18-ä¸´æ—¶æ–‡ä»¶ï¼ˆcreateTempFileï¼‰çš„ç”¨é€”ï¼Ÿ" class="headerlink" title="18. ä¸´æ—¶æ–‡ä»¶ï¼ˆcreateTempFileï¼‰çš„ç”¨é€”ï¼Ÿ"></a>18. ä¸´æ—¶æ–‡ä»¶ï¼ˆcreateTempFileï¼‰çš„ç”¨é€”ï¼Ÿ</h3><ul><li><strong>æ–¹æ³•</strong>ï¼š<code>File.createTempFile(&quot;prefix&quot;, &quot;.tmp&quot;)</code>ã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€æ–‡ä»¶åã€‚</li><li><strong>åˆ é™¤ç­–ç•¥</strong>ï¼š<code>file.deleteOnExit()</code> JVM é€€å‡ºæ—¶åˆ é™¤ï¼Œä½†ä¾èµ–äºæ­£å¸¸é€€å‡ºã€‚</li></ul><hr><h3 id="19-æ–‡ä»¶çš„è¯»å†™é”ä¸å¹¶å‘è®¿é—®ï¼Ÿ"><a href="#19-æ–‡ä»¶çš„è¯»å†™é”ä¸å¹¶å‘è®¿é—®ï¼Ÿ" class="headerlink" title="19. æ–‡ä»¶çš„è¯»å†™é”ä¸å¹¶å‘è®¿é—®ï¼Ÿ"></a>19. æ–‡ä»¶çš„è¯»å†™é”ä¸å¹¶å‘è®¿é—®ï¼Ÿ</h3><ul><li><strong>Java NIO</strong>ï¼š<code>FileChannel.lock()</code> æä¾›æ–‡ä»¶é”ï¼ˆç‹¬å é”ã€å…±äº«é”ï¼‰ã€‚</li><li><strong>æ³¨æ„</strong>ï¼šæ–‡ä»¶é”æ˜¯ OS çº§åˆ«ï¼Œè·¨è¿›ç¨‹ç”Ÿæ•ˆï¼›æ€§èƒ½å¼€é”€è¾ƒå¤§ï¼Œä¸é€‚åˆé¢‘ç¹æ“ä½œã€‚</li></ul><hr><h3 id="20-æµå…³é—­å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ"><a href="#20-æµå…³é—­å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ" class="headerlink" title="20. æµå…³é—­å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ"></a>20. æµå…³é—­å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ</h3><ul><li><strong>ä¼ ç»Ÿå†™æ³•</strong>ï¼štry-finally æ‰‹åŠ¨å…³é—­æµã€‚</li><li><strong>æ¨è</strong>ï¼štry-with-resourcesï¼Œé¿å…é—æ¼å…³é—­ã€‚</li><li><strong>å…³é—­å¼‚å¸¸</strong>ï¼šåª logï¼Œä¸å½±å“ä¸»è¦ä¸šåŠ¡å¼‚å¸¸å¤„ç†ã€‚</li></ul><hr><h2 id="äºŒã€Java-IO-è®¾è®¡ä¸æ¨¡å¼ï¼ˆ21â€“40ï¼‰"><a href="#äºŒã€Java-IO-è®¾è®¡ä¸æ¨¡å¼ï¼ˆ21â€“40ï¼‰" class="headerlink" title="äºŒã€Java IO è®¾è®¡ä¸æ¨¡å¼ï¼ˆ21â€“40ï¼‰"></a>äºŒã€Java IO è®¾è®¡ä¸æ¨¡å¼ï¼ˆ21â€“40ï¼‰</h2><ol><li>InputStream&#x2F;OutputStream çš„è£…é¥°å™¨é“¾å¸¸è§ç»„åˆï¼ˆBuffered -&gt; GZIP -&gt; Cipher ç­‰ï¼‰ã€‚</li><li>PushbackInputStreamã€SequenceInputStream çš„ä½œç”¨ä¸åº”ç”¨åœºæ™¯ã€‚</li><li>PipedInputStream &#x2F; PipedOutputStreamï¼ˆç®¡é“æµï¼‰çš„ä½¿ç”¨ä¸çº¿ç¨‹æ³¨æ„ç‚¹ã€‚</li><li>FilterInputStream&#x2F;FilterOutputStream çš„è®¾è®¡ä¸æ‰©å±•ã€‚</li><li>IO ä¸å¼‚å¸¸å¤„ç†ï¼šIOException çš„å¸¸è§å­ç±»ä¸å¤„ç†ç­–ç•¥ã€‚</li><li>æµå¤åˆ¶çš„å¸¸è§å®ç°æ¨¡æ¿ï¼ˆæ¨¡æ¿æ–¹æ³•å¼ä»£ç ï¼‰ã€‚</li><li>NIO å¼•å…¥å‰çš„ IO å±€é™æ€§ï¼ˆå¯æ‰©å±•æ€§ã€çº¿ç¨‹æ¨¡å‹ï¼‰ã€‚</li><li>å¦‚ä½•å®ç°ä¸€ä¸ªå¸¦è¶…æ—¶çš„è¯»æ“ä½œï¼ˆSocket&#x2F;Channelï¼‰ï¼Ÿ</li><li>æµå¼å¤„ç†ä¸å†…å­˜å‹å¥½å‹å¤„ç†ï¼ˆæµå¼å¤„ç†å¤§æ–‡ä»¶ï¼‰å®è·µã€‚</li><li>Base64 ç¼–è§£ç åœ¨æµä¸­çš„é«˜æ•ˆé›†æˆæ–¹æ³•ã€‚</li><li>åŠ å¯†&#x2F;è§£å¯†æµï¼ˆCipherInputStream&#x2F;CipherOutputStreamï¼‰å¦‚ä½•æ­£ç¡®å…³é—­ï¼Ÿ</li><li>GZIPInputStream&#x2F;GZIPOutputStream çš„å‹ç¼©æµä½¿ç”¨æ³¨æ„äº‹é¡¹ã€‚</li><li>ObjectInputStream&#x2F;ObjectOutputStream çš„å·¥ä½œæœºåˆ¶ï¼ˆç±»å…ƒæ•°æ®ã€å¥æŸ„è¡¨ï¼‰ã€‚</li><li>å¦‚ä½•å®ç°è·¨è¯­è¨€çš„åºåˆ—åŒ–å…¼å®¹ï¼ˆJSON&#x2F;Protobuf&#x2F;Avroï¼‰ï¼Ÿ</li><li>å®ç°è‡ªå®šä¹‰ InputStream å­ç±»æ—¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼ˆread æ–¹æ³•è¯­ä¹‰ï¼‰ï¼Ÿ</li><li>è®¾è®¡ç”¨äºæ—¥å¿—å†™å…¥çš„é«˜åå IO æ¨¡å¼ï¼ˆå¼‚æ­¥æ‰¹é‡å†™ï¼‰ã€‚</li><li>æµå¤åˆ¶æ—¶å¦‚ä½•ç»Ÿè®¡é€Ÿç‡ä¸è¿›åº¦ï¼ˆå¸¦è¿›åº¦å›è°ƒï¼‰ï¼Ÿ</li><li>å¦‚ä½•å®‰å…¨å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆæµè¾¹ç•Œã€magic headerï¼‰ï¼Ÿ</li><li>å¤§å¯¹è±¡&#x2F;å¤§æ•°ç»„å†™å…¥æµæ—¶çš„å†…å­˜ä¼˜åŒ–ç­–ç•¥ï¼ˆåˆ†å—ã€æµåŒ–ï¼‰ã€‚</li><li>å¦‚ä½•å®ç°å¯é‡å…¥&#x2F;å¯æ¢å¤çš„æ–­ç‚¹ç»­ä¼ æ–‡ä»¶å†™å…¥ï¼Ÿ</li></ol><hr><h2 id="ä¸‰ã€æ–‡ä»¶ç³»ç»Ÿã€é”ä¸æ“ä½œï¼ˆ41â€“60ï¼‰"><a href="#ä¸‰ã€æ–‡ä»¶ç³»ç»Ÿã€é”ä¸æ“ä½œï¼ˆ41â€“60ï¼‰" class="headerlink" title="ä¸‰ã€æ–‡ä»¶ç³»ç»Ÿã€é”ä¸æ“ä½œï¼ˆ41â€“60ï¼‰"></a>ä¸‰ã€æ–‡ä»¶ç³»ç»Ÿã€é”ä¸æ“ä½œï¼ˆ41â€“60ï¼‰</h2><ol><li>Java ä¸­æ–‡ä»¶é” FileLock çš„ç±»å‹ï¼ˆå…±äº«&#x2F;ç‹¬å ï¼‰åŠå®ç°åŸç†ã€‚</li><li>FileLock çš„å±€é™æ€§ï¼ˆè·¨ JVMã€è·¨ OS è¡Œä¸ºå·®å¼‚ï¼‰ã€‚</li><li>æ–‡ä»¶æè¿°ç¬¦æ³„éœ²çš„å¸¸è§åŸå› ä¸å®šä½æ–¹æ³•ã€‚</li><li>æ–‡ä»¶å¥æŸ„ä¸Šé™ï¼ˆulimitï¼‰å¯¹ Java æœåŠ¡çš„å½±å“ä¸æ’æŸ¥ã€‚</li><li>ç¡¬é“¾æ¥ä¸è½¯é“¾æ¥åœ¨ Java ä¸­å¦‚ä½•åŒºåˆ†ä¸æ“ä½œï¼Ÿ</li><li>MappedByteBufferï¼ˆå†…å­˜æ˜ å°„æ–‡ä»¶ï¼‰çš„ä¼˜åŠ£ä¸é£é™©ï¼ˆå†…å­˜å›æ”¶ã€æ–‡ä»¶é”ï¼‰ã€‚</li><li>å¤§æ–‡ä»¶åˆ†ç‰‡è¯»å–ä¸å¹¶å‘åˆå¹¶ç­–ç•¥ã€‚</li><li>å¦‚ä½•é«˜æ•ˆç»Ÿè®¡å¤§æ—¥å¿—æ–‡ä»¶ä¸­æŸæ¡ä»¶çš„è¡Œæ•°ï¼ˆåˆ†å— + å¹¶è¡Œï¼‰ï¼Ÿ</li><li>æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ï¼ˆPageCacheï¼‰å¯¹è¯»å†™æ€§èƒ½çš„å½±å“æœºåˆ¶ã€‚</li><li>fsync &#x2F; FileDescriptor.sync åœ¨æŒä¹…åŒ–ä¿éšœä¸Šçš„ä½œç”¨ã€‚</li><li>æ–‡ä»¶é¡ºåºå†™ä¸éšæœºå†™çš„æ€§èƒ½å·®å¼‚ä¸ä¼˜åŒ–å»ºè®®ã€‚</li><li>ç£ç›˜ç±»å‹ï¼ˆSSD vs HDDï¼‰å¯¹ IO ç­–ç•¥çš„å½±å“ã€‚</li><li>åŸå­é‡å‘½åï¼ˆrenameTo&#x2F;Files.moveï¼‰çš„è·¨å¹³å°å·®å¼‚ã€‚</li><li>æ–‡ä»¶ç›‘æ§ï¼ˆWatchServiceï¼‰çš„å®ç°é™åˆ¶ä¸æ›¿ä»£æ–¹æ¡ˆã€‚</li><li>å¤„ç†æ—¥å¿—åˆ‡å‰²ï¼ˆrotationï¼‰æ—¶çš„æ–‡ä»¶å¥æŸ„ç®¡ç†ç­–ç•¥ã€‚</li><li>å¦‚ä½•å®ç°é›¶åœæœºéƒ¨ç½²ä¸­å¯¹æ–‡ä»¶çš„å¹³æ»‘è¿ç§»ï¼Ÿ</li><li>è½¯åˆ é™¤ï¼ˆæ ‡è®°åˆ é™¤ï¼‰ä¸ç‰©ç†åˆ é™¤çš„ IO è€ƒé‡ã€‚</li><li>å¤‡ä»½&#x2F;å¿«ç…§ç­–ç•¥å¯¹ IO çš„å½±å“ï¼ˆå†·å¤‡ vs çƒ­å¤‡ï¼‰ã€‚</li><li>å¤§æ–‡ä»¶æ ¡éªŒï¼ˆMD5&#x2F;SHAï¼‰åœ¨æµå¼å¤„ç†ä¸­çš„å®ç°ã€‚</li><li>æ–‡ä»¶ç³»ç»Ÿä¸€è‡´æ€§é—®é¢˜ï¼ˆå†™å…¥åç«‹å³è¯»å–åˆ°ä¸åŒæ­¥ï¼‰å¦‚ä½•è¯Šæ–­ã€‚</li></ol><hr><h2 id="å››ã€åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼ˆ61â€“75ï¼‰"><a href="#å››ã€åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼ˆ61â€“75ï¼‰" class="headerlink" title="å››ã€åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼ˆ61â€“75ï¼‰"></a>å››ã€åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼ˆ61â€“75ï¼‰</h2><ol><li>Java åŸç”Ÿåºåˆ—åŒ–ï¼ˆSerializableï¼‰çš„æœºåˆ¶å’Œå¯¹è±¡å†™å…¥æ ¼å¼ã€‚</li><li>serialVersionUID çš„ä½œç”¨ã€è‡ªåŠ¨ç”Ÿæˆä¸å…¼å®¹æ€§ç­–ç•¥ã€‚</li><li>transient å­—æ®µã€static å­—æ®µåœ¨åºåˆ—åŒ–ä¸­çš„å¤„ç†ã€‚</li><li>Externalizable ä¸ Serializable çš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯ã€‚</li><li>Java åºåˆ—åŒ–çš„å®‰å…¨é£é™©ï¼ˆååºåˆ—åŒ–æ¼æ´ï¼‰ä¸é˜²æŠ¤æªæ–½ã€‚</li><li>é«˜æ€§èƒ½äºŒè¿›åˆ¶åºåˆ—åŒ–æ–¹æ¡ˆå¯¹æ¯”ï¼šKryoã€Protostuffã€Protobufã€Avroã€‚</li><li>JSON å’ŒäºŒè¿›åˆ¶åºåˆ—åŒ–çš„æƒè¡¡ï¼ˆå¯è¯»æ€§ vs æ€§èƒ½&#x2F;å¤§å°ï¼‰ã€‚</li><li>å¦‚ä½•å®ç°å¯æ¼”åŒ–çš„åºåˆ—åŒ–åè®®ï¼ˆå‘å‰&#x2F;å‘åå…¼å®¹ï¼‰ï¼Ÿ</li><li>å¯¹è±¡å›¾åºåˆ—åŒ–æ—¶å¾ªç¯å¼•ç”¨çš„å¤„ç†ï¼ˆå¥æŸ„æœºåˆ¶ï¼‰ã€‚</li><li>å¯¹è±¡åºåˆ—åŒ–æ€§èƒ½è°ƒä¼˜è¦ç‚¹ï¼ˆç¼“å†²ã€å¯¹è±¡é‡ç”¨ï¼‰ã€‚</li><li>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¦‚ä½•ç®¡ç†åºåˆ—åŒ–ç­–ç•¥ï¼ˆè·¨æœåŠ¡ç‰ˆæœ¬ï¼‰ï¼Ÿ</li><li>è‡ªå®šä¹‰åºåˆ—åŒ–ï¼ˆwriteObject&#x2F;readObjectï¼‰å¸¸è§é™·é˜±ã€‚</li><li>åºåˆ—åŒ–æ—¶å¦‚ä½•å¤„ç†ç±»åŠ è½½å™¨é—®é¢˜ï¼Ÿ</li><li>å¤§å¯¹è±¡åºåˆ—åŒ–æ—¶çš„å†…å­˜ä¸ GC é£é™©å¦‚ä½•é™ä½ï¼Ÿ</li><li>ä½¿ç”¨åºåˆ—åŒ–ä½œä¸ºç¼“å­˜ï¼ˆRedis&#x2F;Memcachedï¼‰æ—¶çš„æ³¨æ„äº‹é¡¹ã€‚</li></ol><hr><h2 id="äº”ã€NIO-æ·±å…¥ï¼šBuffer-Channel-Selectorï¼ˆ76â€“100ï¼‰"><a href="#äº”ã€NIO-æ·±å…¥ï¼šBuffer-Channel-Selectorï¼ˆ76â€“100ï¼‰" class="headerlink" title="äº”ã€NIO æ·±å…¥ï¼šBuffer &#x2F; Channel &#x2F; Selectorï¼ˆ76â€“100ï¼‰"></a>äº”ã€NIO æ·±å…¥ï¼šBuffer &#x2F; Channel &#x2F; Selectorï¼ˆ76â€“100ï¼‰</h2><hr><h3 id="1-NIO-ä¸‰å¤§æ ¸å¿ƒï¼ˆBufferã€Channelã€Selectorï¼‰"><a href="#1-NIO-ä¸‰å¤§æ ¸å¿ƒï¼ˆBufferã€Channelã€Selectorï¼‰" class="headerlink" title="1. NIO ä¸‰å¤§æ ¸å¿ƒï¼ˆBufferã€Channelã€Selectorï¼‰"></a>1. NIO ä¸‰å¤§æ ¸å¿ƒï¼ˆBufferã€Channelã€Selectorï¼‰</h3><ul><li><strong>Buffer</strong>ï¼šæ•°æ®å®¹å™¨ï¼Œæ‰€æœ‰è¯»å†™æ“ä½œéƒ½è¦é€šè¿‡å®ƒå®Œæˆã€‚</li><li><strong>Channel</strong>ï¼šé€šé“ï¼Œè¿æ¥æ•°æ®æºä¸ Bufferï¼Œæ”¯æŒåŒå‘è¯»å†™ã€‚</li><li><strong>Selector</strong>ï¼šå¤šè·¯å¤ç”¨å™¨ï¼Œæ£€æµ‹å¤šä¸ª Channel çš„äº‹ä»¶ï¼ˆè¯»ã€å†™ã€è¿æ¥ç­‰ï¼‰ï¼Œå®ç°éé˜»å¡ IOã€‚</li></ul><hr><h3 id="2-ByteBuffer-çš„-position-limit-capacity"><a href="#2-ByteBuffer-çš„-position-limit-capacity" class="headerlink" title="2. ByteBuffer çš„ position &#x2F; limit &#x2F; capacity"></a>2. ByteBuffer çš„ position &#x2F; limit &#x2F; capacity</h3><ul><li><strong>capacity</strong>ï¼šç¼“å†²åŒºçš„æ€»å®¹é‡ï¼Œåˆ›å»ºæ—¶ç¡®å®šã€‚</li><li><strong>position</strong>ï¼šå½“å‰è¯»å†™æŒ‡é’ˆï¼Œè¡¨ç¤ºä¸‹ä¸€ä¸ªæ“ä½œçš„ä½ç½®ã€‚</li><li><strong>limit</strong>ï¼šå¯æ“ä½œçš„è¾¹ç•Œï¼Œå†™æ¨¡å¼ä¸‹&#x3D;capacityï¼Œè¯»æ¨¡å¼ä¸‹&#x3D;å†™å…¥çš„æ•°æ®é‡ã€‚</li></ul><hr><h3 id="3-flip-clear-rewind-compact"><a href="#3-flip-clear-rewind-compact" class="headerlink" title="3. flip(), clear(), rewind(), compact()"></a>3. flip(), clear(), rewind(), compact()</h3><ul><li><strong>flip()</strong>ï¼šåˆ‡æ¢å†™ â†’ è¯»æ¨¡å¼ï¼ˆlimit&#x3D;positionï¼Œposition&#x3D;0ï¼‰ã€‚</li><li><strong>clear()</strong>ï¼šæ¸…ç©ºç¼“å†²ï¼Œå‡†å¤‡å†™ï¼ˆposition&#x3D;0ï¼Œlimit&#x3D;capacityï¼‰ã€‚</li><li><strong>rewind()</strong>ï¼šé‡æ–°è¯»ï¼ˆposition&#x3D;0ï¼Œlimit ä¸å˜ï¼‰ã€‚</li><li><strong>compact()</strong>ï¼šæœªè¯»æ•°æ®å‰ç§»ï¼Œposition æŒ‡å‘æœªè¯»æ•°æ®æœ«å°¾ã€‚</li></ul><hr><h3 id="4-DirectByteBuffer-vs-HeapByteBuffer"><a href="#4-DirectByteBuffer-vs-HeapByteBuffer" class="headerlink" title="4. DirectByteBuffer vs HeapByteBuffer"></a>4. DirectByteBuffer vs HeapByteBuffer</h3><ul><li><strong>HeapByteBuffer</strong>ï¼šæ•°æ®åœ¨ JVM å †å†…å­˜ï¼ŒGC ç®¡ç†ï¼Œæ‹·è´åˆ°å†…æ ¸æ€å¤šä¸€ä»½ã€‚</li><li><strong>DirectByteBuffer</strong>ï¼šæ•°æ®åœ¨å †å¤–å†…å­˜ï¼ŒIO æ—¶é›¶æ‹·è´ï¼Œæ€§èƒ½æ›´é«˜ï¼Œä½†åˆ†é…é‡Šæ”¾ä»£ä»·å¤§ã€‚</li></ul><hr><h3 id="5-ByteBuffer-slice-asReadOnlyBuffer"><a href="#5-ByteBuffer-slice-asReadOnlyBuffer" class="headerlink" title="5. ByteBuffer slice() &#x2F; asReadOnlyBuffer()"></a>5. ByteBuffer slice() &#x2F; asReadOnlyBuffer()</h3><ul><li><strong>slice()</strong>ï¼šå…±äº«åº•å±‚æ•°æ®ï¼Œæ–°çš„ç¼“å†²åŒº position&#x3D;0ï¼Œlimit&#x3D;å‰©ä½™ã€‚</li><li><strong>asReadOnlyBuffer()</strong>ï¼šç”Ÿæˆåªè¯»è§†å›¾ï¼Œä¿®æ”¹ä¼šæŠ› <code>ReadOnlyBufferException</code>ã€‚</li></ul><hr><h3 id="6-Scatter-Gather-IO"><a href="#6-Scatter-Gather-IO" class="headerlink" title="6. Scatter&#x2F;Gather IO"></a>6. Scatter&#x2F;Gather IO</h3><ul><li><strong>Scatter Read</strong>ï¼šä¸€ä¸ª Channel â†’ å¤šä¸ª Bufferï¼ˆé€‚åˆå›ºå®šå¤´+ä½“ï¼‰ã€‚</li><li><strong>Gather Write</strong>ï¼šå¤šä¸ª Buffer â†’ ä¸€ä¸ª Channelï¼ˆé¿å…æ‹¼æ¥ï¼‰ã€‚</li></ul><hr><h3 id="7-FileChannel-çš„å…³é”®æ–¹æ³•"><a href="#7-FileChannel-çš„å…³é”®æ–¹æ³•" class="headerlink" title="7. FileChannel çš„å…³é”®æ–¹æ³•"></a>7. FileChannel çš„å…³é”®æ–¹æ³•</h3><ul><li><strong>position()</strong>ï¼šè·å–&#x2F;è®¾ç½®æ–‡ä»¶æŒ‡é’ˆã€‚</li><li><strong>size()</strong>ï¼šè¿”å›æ–‡ä»¶å¤§å°ã€‚</li><li><strong>truncate(long size)</strong>ï¼šæˆªæ–­æ–‡ä»¶ã€‚</li><li><strong>force(boolean metaData)</strong>ï¼šå¼ºåˆ¶å†™å…¥ç£ç›˜ã€‚</li></ul><hr><h3 id="8-MappedByteBufferï¼ˆå†…å­˜æ˜ å°„ï¼‰"><a href="#8-MappedByteBufferï¼ˆå†…å­˜æ˜ å°„ï¼‰" class="headerlink" title="8. MappedByteBufferï¼ˆå†…å­˜æ˜ å°„ï¼‰"></a>8. MappedByteBufferï¼ˆå†…å­˜æ˜ å°„ï¼‰</h3><ul><li><strong>åˆ›å»º</strong>ï¼š<code>FileChannel.map(mode, position, size)</code></li><li><strong>ä¼˜ç‚¹</strong>ï¼šç›´æ¥æ“ä½œå†…å­˜æ˜ å°„ï¼Œæ•ˆç‡é«˜ã€‚</li><li><strong>é‡Šæ”¾</strong>ï¼šJDK æ— ç›´æ¥ APIï¼Œé€šå¸¸é€šè¿‡åå°„ <code>Cleaner.clean()</code>ï¼Œéœ€æ³¨æ„å†…å­˜æ³„éœ²ã€‚</li></ul><hr><h3 id="9-Channel-vs-Stream"><a href="#9-Channel-vs-Stream" class="headerlink" title="9. Channel vs Stream"></a>9. Channel vs Stream</h3><ul><li><strong>Stream</strong>ï¼šå•å‘ã€é˜»å¡ã€‚</li><li><strong>Channel</strong>ï¼šåŒå‘ã€å¯éé˜»å¡ï¼Œå¯å’Œ Selector é…åˆã€‚</li></ul><hr><h3 id="10-Selector-å·¥ä½œæµç¨‹"><a href="#10-Selector-å·¥ä½œæµç¨‹" class="headerlink" title="10. Selector å·¥ä½œæµç¨‹"></a>10. Selector å·¥ä½œæµç¨‹</h3><ol><li><strong>æ³¨å†Œ</strong>ï¼š<code>channel.register(selector, ops)</code></li><li><strong>é€‰æ‹©</strong>ï¼š<code>selector.select(timeout)</code></li><li><strong>éå†</strong>ï¼š<code>selectedKeys()</code> éå†å¤„ç†</li><li><strong>å–æ¶ˆ</strong>ï¼šè°ƒç”¨ <code>key.cancel()</code></li></ol><hr><h3 id="11-Selector-åº•å±‚å®ç°"><a href="#11-Selector-åº•å±‚å®ç°" class="headerlink" title="11. Selector åº•å±‚å®ç°"></a>11. Selector åº•å±‚å®ç°</h3><ul><li><strong>Linux</strong>ï¼šepoll</li><li><strong>Windows</strong>ï¼šselect</li><li><strong>macOS</strong>ï¼škqueue<br> å½±å“æ€§èƒ½å’Œå¯æ‰©å±•æ€§ï¼ˆepoll é€‚åˆé«˜å¹¶å‘ï¼‰ã€‚</li></ul><hr><h3 id="12-éé˜»å¡-Channel-çš„-read-write-è¿”å›å€¼"><a href="#12-éé˜»å¡-Channel-çš„-read-write-è¿”å›å€¼" class="headerlink" title="12. éé˜»å¡ Channel çš„ read&#x2F;write è¿”å›å€¼"></a>12. éé˜»å¡ Channel çš„ read&#x2F;write è¿”å›å€¼</h3><ul><li><p><strong>read</strong>ï¼š</p><ul><li><blockquote><p>0ï¼šè¯»å–å­—èŠ‚æ•°</p></blockquote></li><li><p>0ï¼šæ— æ•°æ®</p></li><li><p>-1ï¼šEOFï¼ˆå…³é—­ï¼‰</p></li></ul></li><li><p><strong>write</strong>ï¼š</p><ul><li><blockquote><p>0ï¼šå†™å…¥å­—èŠ‚æ•°</p></blockquote></li><li><p>0ï¼šå†…æ ¸ç¼“å†²åŒºæ»¡</p></li></ul></li></ul><hr><h3 id="13-ç²˜åŒ…-æ‹†åŒ…é—®é¢˜"><a href="#13-ç²˜åŒ…-æ‹†åŒ…é—®é¢˜" class="headerlink" title="13. ç²˜åŒ…&#x2F;æ‹†åŒ…é—®é¢˜"></a>13. ç²˜åŒ…&#x2F;æ‹†åŒ…é—®é¢˜</h3><p>åŸå› ï¼šTCP æµå¼ä¼ è¾“æ— è¾¹ç•Œã€‚<br> è§£å†³ç­–ç•¥ï¼š</p><ul><li>å›ºå®šé•¿åº¦ï¼ˆå®šé•¿åè®®ï¼‰</li><li>åˆ†éš”ç¬¦ï¼ˆå¦‚ <code>\n</code>ï¼‰</li><li>é•¿åº¦å‰ç½®ï¼ˆå¸¸è§ï¼‰</li></ul><hr><h3 id="14-è¶…æ—¶æ–­å¼€-å¿ƒè·³æ£€æµ‹"><a href="#14-è¶…æ—¶æ–­å¼€-å¿ƒè·³æ£€æµ‹" class="headerlink" title="14. è¶…æ—¶æ–­å¼€ &amp; å¿ƒè·³æ£€æµ‹"></a>14. è¶…æ—¶æ–­å¼€ &amp; å¿ƒè·³æ£€æµ‹</h3><ul><li><strong>è¶…æ—¶æ–­å¼€</strong>ï¼šåœ¨ <code>select(timeout)</code> ä¸­æ£€æµ‹é•¿æ—¶é—´æ— è¯»å†™çš„è¿æ¥ã€‚</li><li><strong>å¿ƒè·³æ£€æµ‹</strong>ï¼šå®¢æˆ·ç«¯&#x2F;æœåŠ¡ç«¯å®šæœŸå‘é€ <code>PING</code>ï¼Œæ— å“åº”åˆ™æ–­å¼€ã€‚</li></ul><hr><h3 id="15-Pipe-åœ¨-NIO-ä¸­çš„ä½œç”¨"><a href="#15-Pipe-åœ¨-NIO-ä¸­çš„ä½œç”¨" class="headerlink" title="15. Pipe åœ¨ NIO ä¸­çš„ä½œç”¨"></a>15. Pipe åœ¨ NIO ä¸­çš„ä½œç”¨</h3><ul><li>å•å‘é€šä¿¡ï¼ˆå†™ç«¯ â†’ è¯»ç«¯ï¼‰ï¼Œå¸¸ç”¨äºçº¿ç¨‹é—´é€šä¿¡ã€‚</li><li>ä½†æ€§èƒ½ä¸å¦‚ BlockingQueueã€‚</li></ul><hr><h3 id="16-å¤š-Selector-å¤š-Reactor"><a href="#16-å¤š-Selector-å¤š-Reactor" class="headerlink" title="16. å¤š Selector &#x2F; å¤š Reactor"></a>16. å¤š Selector &#x2F; å¤š Reactor</h3><ul><li><strong>å• Reactor</strong>ï¼šä¸€ä¸ªçº¿ç¨‹è´Ÿè´£ Selectorã€‚</li><li><strong>å¤š Reactor</strong>ï¼šä¸» Reactor å¤„ç† acceptï¼Œå­ Reactor å¤„ç† read&#x2F;writeã€‚</li><li><strong>å¤š Selector</strong>ï¼šçº¿ç¨‹æ± åˆ†æ‹… Channel è´Ÿè½½ã€‚</li></ul><hr><h3 id="17-ByteBuffer-å¤šçº¿ç¨‹é—®é¢˜"><a href="#17-ByteBuffer-å¤šçº¿ç¨‹é—®é¢˜" class="headerlink" title="17. ByteBuffer å¤šçº¿ç¨‹é—®é¢˜"></a>17. ByteBuffer å¤šçº¿ç¨‹é—®é¢˜</h3><ul><li><strong>ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong>ã€‚</li><li>è§£å†³ï¼šæ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹ Bufferï¼Œæˆ–å¤–éƒ¨åŠ é”ã€‚</li></ul><hr><h3 id="18-DirectByteBuffer-é¿å…æ³„éœ²"><a href="#18-DirectByteBuffer-é¿å…æ³„éœ²" class="headerlink" title="18. DirectByteBuffer é¿å…æ³„éœ²"></a>18. DirectByteBuffer é¿å…æ³„éœ²</h3><ul><li>ä½¿ç”¨ <code>ByteBuffer.allocateDirect()</code> ä»£ä»·å¤§ã€‚</li><li>å»ºè®®ï¼šä½¿ç”¨ <code>-XX:+UseLargePages</code>ã€æ± åŒ–ç®¡ç†ï¼ˆNetty çš„ <code>PooledByteBufAllocator</code>ï¼‰ã€‚</li></ul><hr><h3 id="19-Selector-selectedKeys-æ­£ç¡®ç”¨æ³•"><a href="#19-Selector-selectedKeys-æ­£ç¡®ç”¨æ³•" class="headerlink" title="19. Selector selectedKeys æ­£ç¡®ç”¨æ³•"></a>19. Selector selectedKeys æ­£ç¡®ç”¨æ³•</h3><ul><li>éå† <code>selectedKeys()</code></li><li>å¤„ç†å®Œä¸€ä¸ª key â†’ <code>iterator.remove()</code></li><li>å¦åˆ™ä¸‹æ¬¡å¾ªç¯ä»ä¼šè§¦å‘ã€‚</li></ul><hr><h3 id="20-NIO-é«˜æ•ˆè¯»å†™å¾ªç¯æ¨¡æ¿"><a href="#20-NIO-é«˜æ•ˆè¯»å†™å¾ªç¯æ¨¡æ¿" class="headerlink" title="20. NIO é«˜æ•ˆè¯»å†™å¾ªç¯æ¨¡æ¿"></a>20. NIO é«˜æ•ˆè¯»å†™å¾ªç¯æ¨¡æ¿</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    selector.select();</span><br><span class="line">    Iterator&lt;SelectionKey&gt; it = selector.selectedKeys().iterator();</span><br><span class="line">    <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">        <span class="type">SelectionKey</span> <span class="variable">key</span> <span class="operator">=</span> it.next();</span><br><span class="line">        it.remove();</span><br><span class="line">        <span class="keyword">if</span> (key.isReadable()) &#123;</span><br><span class="line">            <span class="type">SocketChannel</span> <span class="variable">sc</span> <span class="operator">=</span> (SocketChannel) key.channel();</span><br><span class="line">            <span class="type">ByteBuffer</span> <span class="variable">buf</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> sc.read(buf);</span><br><span class="line">            <span class="keyword">if</span> (n == -<span class="number">1</span>) sc.close();</span><br><span class="line">            <span class="keyword">else</span> &#123; buf.flip(); sc.write(buf); &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="21-transferTo-transferFromï¼ˆé›¶æ‹·è´ï¼‰"><a href="#21-transferTo-transferFromï¼ˆé›¶æ‹·è´ï¼‰" class="headerlink" title="21. transferTo&#x2F;transferFromï¼ˆé›¶æ‹·è´ï¼‰"></a>21. transferTo&#x2F;transferFromï¼ˆé›¶æ‹·è´ï¼‰</h3><ul><li>ç›´æ¥åœ¨å†…æ ¸ç©ºé—´å®Œæˆæ–‡ä»¶å¤åˆ¶ï¼ˆå‡å°‘ç”¨æˆ·æ€æ‹·è´ï¼‰ã€‚</li><li>å±€é™ï¼šWindows ä¸€æ¬¡ä¼ è¾“å¤§å°æœ‰é™ï¼Œéœ€å¾ªç¯ã€‚</li></ul><hr><h3 id="22-FileChannel-é«˜æ•ˆå¤åˆ¶"><a href="#22-FileChannel-é«˜æ•ˆå¤åˆ¶" class="headerlink" title="22. FileChannel é«˜æ•ˆå¤åˆ¶"></a>22. FileChannel é«˜æ•ˆå¤åˆ¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">FileChannel</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(src).getChannel();</span><br><span class="line">     <span class="type">FileChannel</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(dest).getChannel()) &#123;</span><br><span class="line">    in.transferTo(<span class="number">0</span>, in.size(), out);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="23-é«˜å¹¶å‘æœåŠ¡å™¨ç“¶é¢ˆ"><a href="#23-é«˜å¹¶å‘æœåŠ¡å™¨ç“¶é¢ˆ" class="headerlink" title="23. é«˜å¹¶å‘æœåŠ¡å™¨ç“¶é¢ˆ"></a>23. é«˜å¹¶å‘æœåŠ¡å™¨ç“¶é¢ˆ</h3><ul><li>å•çº¿ç¨‹ Selector æ€§èƒ½ä¸è¶³ã€‚</li><li>Buffer&#x2F;Direct å†…å­˜æ³„éœ²ã€‚</li><li>å¤§é‡å°åŒ…ï¼ˆTCP ç²˜æ‹†åŒ…ï¼‰ã€‚</li><li>epoll ç©ºè½®è¯¢ bugï¼ˆCPU é£™é«˜ï¼‰ã€‚</li></ul><hr><h3 id="24-Windows-vs-Linux"><a href="#24-Windows-vs-Linux" class="headerlink" title="24. Windows vs Linux"></a>24. Windows vs Linux</h3><ul><li><strong>Linux</strong>ï¼šepollï¼Œå¯ä¼¸ç¼©åˆ°ç™¾ä¸‡è¿æ¥ã€‚</li><li><strong>Windows</strong>ï¼šselectï¼Œfd æ•°é‡å—é™ï¼Œæ‰©å±•æ€§å·®ã€‚</li></ul><hr><h3 id="25-ç®€å•-Echo-Server-æ€è·¯"><a href="#25-ç®€å•-Echo-Server-æ€è·¯" class="headerlink" title="25. ç®€å• Echo Server æ€è·¯"></a>25. ç®€å• Echo Server æ€è·¯</h3><ol><li>åˆ›å»º <code>Selector</code></li><li>æ³¨å†Œ <code>ServerSocketChannel</code></li><li>å¾ªç¯ <code>select()</code></li><li>å¤„ç† <code>accept</code> â†’ æ³¨å†Œ SocketChannel</li><li>å¤„ç† <code>read</code> â†’ å›å†™æ•°æ®</li></ol><hr><p>âš¡æ€»ç»“ï¼šNIO çš„æ ¸å¿ƒæ˜¯ <strong>ç¼“å†²åŒºç®¡ç†</strong>ï¼ˆByteBufferï¼‰ã€<strong>å¤šè·¯å¤ç”¨</strong>ï¼ˆSelectorï¼‰ã€<strong>é›¶æ‹·è´ä¼˜åŒ–</strong>ï¼ˆFileChannel.transferTo&#x2F;MappedByteBufferï¼‰ã€‚<br> åœ¨é«˜å¹¶å‘ç³»ç»Ÿé‡Œï¼ˆå¦‚ Nettyï¼‰ï¼Œè¿™äº› API ä¼šç»“åˆçº¿ç¨‹æ¨¡å‹å’Œå†…å­˜æ± è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</p><hr><h2 id="å…­ã€Socket-TCP-UDP-WebSocketï¼ˆ101â€“140ï¼‰"><a href="#å…­ã€Socket-TCP-UDP-WebSocketï¼ˆ101â€“140ï¼‰" class="headerlink" title="å…­ã€Socket &#x2F; TCP &#x2F; UDP &#x2F; WebSocketï¼ˆ101â€“140ï¼‰"></a>å…­ã€Socket &#x2F; TCP &#x2F; UDP &#x2F; WebSocketï¼ˆ101â€“140ï¼‰</h2><ol><li>Socket çš„åŸºæœ¬æ¦‚å¿µï¼šç«¯ç‚¹ã€ä¸‰å…ƒç»„&#x2F;å››å…ƒç»„ï¼ˆIP:port + peerï¼‰ã€‚</li><li>Java ä¸­ Socketã€ServerSocketã€DatagramSocket çš„ä¸»è¦ API åŒºåˆ«ã€‚</li><li>TCP ä¸ UDP çš„æ ¸å¿ƒå·®å¼‚ï¼ˆå¯é æ€§ã€æœ‰åºæ€§ã€è¿æ¥æ€§ï¼‰ã€‚</li><li>TCP ä¸‰æ¬¡æ¡æ‰‹ï¼ˆSYNã€SYN-ACKã€ACKï¼‰ä¸å››æ¬¡æŒ¥æ‰‹æµç¨‹è¯¦è§£ã€‚</li><li>TIME_WAITã€CLOSE_WAITã€FIN_WAIT1&#x2F;2 ç­‰ TCP çŠ¶æ€å«ä¹‰ä¸äº§ç”ŸåŸå› ã€‚</li><li>åŠå¼€è¿æ¥ï¼ˆhalf-openï¼‰æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•æ£€æµ‹ä¸æ¢å¤ï¼Ÿ</li><li>TCP çš„æµé‡æ§åˆ¶ï¼ˆçª—å£ï¼‰ä¸æ‹¥å¡æ§åˆ¶ï¼ˆæ…¢å¯åŠ¨ã€æ‹¥å¡é¿å…ã€å¿«é‡ä¼ ã€å¿«æ¢å¤ï¼‰åŸºç¡€ã€‚</li><li>Nagle ç®—æ³•ï¼ˆTCP_NODELAYï¼‰çš„åŸç†å’Œåœ¨å»¶è¿Ÿåœºæ™¯ä¸‹çš„å½±å“ã€‚</li><li>TCP å»¶è¿Ÿç¡®è®¤ï¼ˆdelayed ACKï¼‰å¯¹äº¤äº’å‹åº”ç”¨çš„å½±å“ã€‚</li><li>Socket é€‰é¡¹ SO_TIMEOUTã€SO_KEEPALIVEã€SO_REUSEADDRã€SO_REUSEPORTã€SO_LINGER å«ä¹‰ä¸ä½¿ç”¨åœºæ™¯ã€‚</li><li>backlog å‚æ•°ï¼ˆServerSocket æ„é€ æˆ– listenï¼‰ä¸ accept é˜Ÿåˆ—ï¼ˆsyn, accept é˜Ÿåˆ—ï¼‰åŒºåˆ«ã€‚</li><li>ephemeral portï¼ˆçŸ­æš‚ç«¯å£ï¼‰ä¸ç«¯å£è€—å°½é—®é¢˜åŠè§£å†³åŠæ³•ã€‚</li><li>SYN flood æ”»å‡»çš„åŸç†å’Œé˜²æŠ¤ï¼ˆSYN cookiesã€firewallï¼‰ã€‚</li><li>TCP å¿«é€Ÿæ‰“å¼€ï¼ˆTCP Fast Openï¼‰æ˜¯ä»€ä¹ˆï¼Œæœ‰ä½•ä¼˜åŠ£ï¼Ÿï¼ˆç®€è¿°ï¼‰</li><li>MTUã€MSS ä¸ IP åˆ†ç‰‡å¯¹ä¼ è¾“çš„å½±å“ä¸è¯Šæ–­æ–¹æ³•ã€‚</li><li>UDP çš„ç»„æ’­ï¼ˆMulticastï¼‰ä¸å¹¿æ’­ï¼ˆBroadcastï¼‰æœºåˆ¶ä¸ Java æ”¯æŒï¼ˆMulticastSocketï¼‰ã€‚</li><li>UDP ä¸¢åŒ…ã€ä¹±åºã€åŒ…å¤§å°é™åˆ¶ï¼ˆæœ€ä½³å®è·µï¼‰ã€‚</li><li>UDP ç©¿é€ NATï¼ˆSTUN&#x2F;ICEï¼‰çš„åŸºæœ¬åŸç†ã€‚</li><li>å¦‚ä½•åœ¨ Java ä¸­å®ç°é«˜æ€§èƒ½ UDP æœåŠ¡å™¨ï¼Ÿï¼ˆNIO + DatagramChannelï¼‰</li><li>WebSocket åè®®åŸºç¡€ï¼ˆæ¡æ‰‹ã€å¸§æ ¼å¼ã€ping&#x2F;pongã€closeï¼‰ã€‚</li><li>Java å®ç° WebSocket çš„å¸¸è§åº“ï¼ˆjavax.websocketã€Netty websocketã€Undertowï¼‰ã€‚</li><li>TLS over TCPï¼ˆHTTPSï¼‰çš„æ¡æ‰‹æµç¨‹è¦ç‚¹ï¼ˆè¯ä¹¦éªŒè¯ã€å¯¹ç§°å¯†é’¥åå•†ï¼‰ã€‚</li><li>ä½¿ç”¨ SSLSocket &#x2F; SSLServerSocket å’Œ SSLEngine çš„å·®åˆ«åŠé€‚ç”¨åœºæ™¯ã€‚</li><li>SSL&#x2F;TLS æ¡æ‰‹çš„é‡ç”¨ï¼ˆsession resumptionï¼‰ä¸æ€§èƒ½ä¼˜åŒ–ã€‚</li><li>ä¸­é—´äººæ”»å‡»ï¼ˆMITMï¼‰ä¸è¯ä¹¦é“¾ã€CAã€ä¿¡ä»»æ ¹çš„è§’è‰²ã€‚</li><li>å¦‚ä½•åœ¨ Socket ç¨‹åºä¸­å®ç°å¿ƒè·³ã€è¶…æ—¶ä¸æ–­çº¿é‡è¿ï¼Ÿ</li><li>TCP Keepalive ä¸åº”ç”¨å±‚å¿ƒè·³çš„åŒºåˆ«å’ŒååŒä½¿ç”¨ã€‚</li><li>å¦‚ä½•é€šè¿‡æŠ“åŒ…ï¼ˆtcpdump&#x2F;wiresharkï¼‰è¯Šæ–­ Socket è¿æ¥é—®é¢˜ï¼Ÿ</li><li>Socket çš„éé˜»å¡ accept&#x2F;read&#x2F;write å®ç°æ³¨æ„ç‚¹ï¼ˆèµ„æº&#x2F;å¼‚æ­¥å®‰å…¨ï¼‰ã€‚</li><li>å¦‚ä½•é¿å… TCP ç²˜åŒ…&#x2F;æ‹†åŒ…åœ¨ Socket åŸç”Ÿç¼–ç¨‹ä¸­çš„å½±å“ï¼ˆæµå¼åè®®è®¾è®¡ï¼‰ï¼Ÿ</li><li>å®æˆ˜ï¼šå®ç°ä¸€ä¸ªå¸¦é•¿åº¦å‰ç¼€çš„ TCP åè®®çš„ Java æœåŠ¡ç«¯&#x2F;å®¢æˆ·ç«¯ï¼ˆæ€è·¯ï¼‰ã€‚</li><li>å¦‚ä½•ä¼˜é›…å¤„ç†å¤§é‡çŸ­è¿æ¥çš„åœºæ™¯ï¼Ÿï¼ˆè¿æ¥æ± ã€HTTP keep-aliveï¼‰</li><li>Socket ç«¯å£å¤ç”¨ï¼ˆSO_REUSEADDR vs SO_REUSEPORTï¼‰åœ¨è´Ÿè½½å‡è¡¡ä¸­çš„ç”¨æ³•ã€‚</li><li>å¤šè·¯å¤ç”¨ï¼ˆselect&#x2F;poll&#x2F;epollï¼‰ä¸ socket å¤§è¿æ¥æ•°çš„å¤„ç†ã€‚</li><li>ç½‘ç»œå­—èŠ‚åºï¼ˆbig-endianï¼‰ä¸æ•°æ®ç¼–è§£ç æ³¨æ„ç‚¹ã€‚</li><li>ä½¿ç”¨ TCP_NODELAYï¼ˆç¦ç”¨ Nagleï¼‰æ—¶çš„ CPU&#x2F;ç½‘ç»œ trade-offã€‚</li><li>å¦‚ä½•åœ¨ Java ä¸­åšåˆ°é›¶æ‹·è´æ–‡ä»¶ä¼ è¾“ï¼ˆSocket + FileChannel.transferToï¼‰ï¼Ÿ</li><li>Socket å…³é—­æµç¨‹ä¸­é‡åˆ°é˜»å¡ï¼ˆSO_LINGERï¼‰çš„å¤„ç†åŠæ³•ã€‚</li><li>å¦‚ä½•é˜²æ­¢æˆ–æ£€æµ‹ â€œsocket half-closedâ€ çš„èµ„æºæ³„æ¼ï¼Ÿ</li><li>å®æˆ˜é¢˜ï¼šç”¨ BIOã€NIOã€Netty å„å®ç°ä¸€ä¸ªç®€æ˜“çš„èŠå¤©æœåŠ¡å™¨ï¼Œæ¯”è¾ƒæ€§èƒ½ä¸ä»£ç å¤æ‚åº¦ï¼ˆæ€è·¯è¦ç‚¹ï¼‰ã€‚</li></ol><hr><h2 id="ä¸ƒã€å¼‚æ­¥-IOã€IO-æ¨¡å‹ä¸é«˜é˜¶æ¨¡å¼ï¼ˆ141â€“150ï¼‰"><a href="#ä¸ƒã€å¼‚æ­¥-IOã€IO-æ¨¡å‹ä¸é«˜é˜¶æ¨¡å¼ï¼ˆ141â€“150ï¼‰" class="headerlink" title="ä¸ƒã€å¼‚æ­¥ IOã€IO æ¨¡å‹ä¸é«˜é˜¶æ¨¡å¼ï¼ˆ141â€“150ï¼‰"></a>ä¸ƒã€å¼‚æ­¥ IOã€IO æ¨¡å‹ä¸é«˜é˜¶æ¨¡å¼ï¼ˆ141â€“150ï¼‰</h2><ol><li>IO æ¨¡å‹åˆ†ç±»ï¼šåŒæ­¥é˜»å¡ã€åŒæ­¥éé˜»å¡ã€IO å¤šè·¯å¤ç”¨ã€ä¿¡å·é©±åŠ¨ã€å¼‚æ­¥ï¼ˆAIOï¼‰ã€‚</li><li>Reactor æ¨¡å¼ä¸ Proactor æ¨¡å¼çš„åŸç†ä¸åŒºåˆ«ã€‚</li><li>Java AIOï¼ˆAsynchronousChannelã€AsynchronousSocketChannelï¼‰API ä»‹ç»ã€‚</li><li>CompletionHandler ä¸ Future é£æ ¼çš„å¼‚æ­¥å›è°ƒæ¯”è¾ƒã€‚</li><li>é«˜å¹¶å‘ä¸‹é€‰æ‹© NIO è¿˜æ˜¯ AIO çš„å®é™…è€ƒé‡ï¼ˆå®ç°å¤æ‚åº¦ã€å¹³å°æ”¯æŒï¼‰ã€‚</li><li>äº‹ä»¶é©±åŠ¨ç³»ç»Ÿçš„ back-pressure è®¾è®¡ï¼ˆæµæ§ã€é€Ÿç‡é™åˆ¶ï¼‰ã€‚</li><li>çº¿ç¨‹æ¨¡å‹è®¾è®¡ï¼šacceptors &#x2F; io workers &#x2F; business workers çš„æƒè¡¡ã€‚</li><li>RCUã€æ— é”é˜Ÿåˆ—åœ¨é«˜å¹¶å‘ IO æ¡†æ¶ä¸­çš„åº”ç”¨åœºæ™¯ã€‚</li><li>å¦‚ä½•åœ¨åº”ç”¨å±‚å®ç°è¯·æ±‚é˜Ÿåˆ—ä¸æ’é˜Ÿç­–ç•¥æ¥ç¼“è§£çªå‘æµé‡ï¼Ÿ</li><li>å®æˆ˜é¢˜ï¼šè®¾è®¡ä¸€ä¸ªæ”¯æŒç™¾ä¸‡è¿æ¥çš„æœåŠ¡å™¨æ¶æ„ï¼ˆæ ¸å¿ƒç»„ä»¶ä¸ IO ç­–ç•¥ï¼‰ã€‚</li></ol><hr><h2 id="å…«ã€é›¶æ‹·è´ã€å†…æ ¸ä¸æ€§èƒ½è°ƒä¼˜ï¼ˆ151â€“160ï¼‰"><a href="#å…«ã€é›¶æ‹·è´ã€å†…æ ¸ä¸æ€§èƒ½è°ƒä¼˜ï¼ˆ151â€“160ï¼‰" class="headerlink" title="å…«ã€é›¶æ‹·è´ã€å†…æ ¸ä¸æ€§èƒ½è°ƒä¼˜ï¼ˆ151â€“160ï¼‰"></a>å…«ã€é›¶æ‹·è´ã€å†…æ ¸ä¸æ€§èƒ½è°ƒä¼˜ï¼ˆ151â€“160ï¼‰</h2><ol><li>é›¶æ‹·è´ï¼ˆzero-copyï¼‰æ¦‚å¿µå’Œå¸¸è§å®ç°ï¼ˆsendfile, mmap, spliceï¼‰ã€‚</li><li>FileChannel.transferTo&#x2F;transferFrom åœ¨ Linux ä¸‹å¦‚ä½•åˆ©ç”¨ sendfile å®ç°é›¶æ‹·è´ï¼Ÿ</li><li>mmapï¼ˆå†…å­˜æ˜ å°„æ–‡ä»¶ï¼‰çš„å®ç°åŸç†ä¸ GC &#x2F;å›æ”¶é—®é¢˜ã€‚</li><li>DMAï¼ˆDirect Memory Accessï¼‰åœ¨é›¶æ‹·è´ä¸­çš„ä½œç”¨ä¸é™åˆ¶ã€‚</li><li>å†…æ ¸æ€ &#x2F; ç”¨æˆ·æ€æ‹·è´æ¬¡æ•°ä¸é›¶æ‹·è´å¸¦æ¥çš„å‡å°‘æ•ˆæœã€‚</li><li>TCP çª—å£ã€æ‹¥å¡æ§åˆ¶è°ƒä¼˜å‚æ•°ï¼ˆnet.ipv4.tcp_* ç³»åˆ—å¸¸è§é¡¹ï¼‰ã€‚</li><li>ç³»ç»Ÿçº§è°ƒä¼˜ï¼šæ–‡ä»¶æè¿°ç¬¦ä¸Šé™ï¼ˆulimit -nï¼‰ã€somaxconnã€backlogã€epoll_limits ç­‰ã€‚</li><li>é«˜å¹¶å‘ç½‘ç»œæœåŠ¡çš„ç›‘æ§æŒ‡æ ‡ï¼ˆfd ä½¿ç”¨ã€accept latencyã€context switchã€cpu stealï¼‰ã€‚</li><li>æ€§èƒ½è¯Šæ–­å·¥å…·ä¸æµç¨‹ï¼šiostat, vmstat, sar, perf, tcpdump, ss, straceã€‚</li><li>å®æˆ˜é¢˜ï¼šå¦‚ä½•å®šä½å¹¶ä¿®å¤ä¸€ä¸ªé«˜å¹¶å‘æœåŠ¡å™¨çš„ accept é˜»å¡ &#x2F; è¿æ¥ä¸¢å¤± é—®é¢˜ï¼ˆè¯Šæ–­æ­¥éª¤ï¼‰ã€‚</li></ol><hr><h1 id="Java-åŸºç¡€é¢è¯•é¢˜"><a href="#Java-åŸºç¡€é¢è¯•é¢˜" class="headerlink" title="Java åŸºç¡€é¢è¯•é¢˜"></a>Java åŸºç¡€é¢è¯•é¢˜</h1><h3 id="ä¸€ã€è¯­è¨€ç‰¹æ€§-åŸºç¡€è¯­æ³•"><a href="#ä¸€ã€è¯­è¨€ç‰¹æ€§-åŸºç¡€è¯­æ³•" class="headerlink" title="ä¸€ã€è¯­è¨€ç‰¹æ€§ &amp; åŸºç¡€è¯­æ³•"></a>ä¸€ã€è¯­è¨€ç‰¹æ€§ &amp; åŸºç¡€è¯­æ³•</h3><hr><h3 id="1-Java-ä¸­çš„-å’Œ-equals-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é‡å†™-equals-ï¼Ÿ"><a href="#1-Java-ä¸­çš„-å’Œ-equals-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é‡å†™-equals-ï¼Ÿ" class="headerlink" title="1. Java ä¸­çš„ &#x3D;&#x3D; å’Œ equals() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é‡å†™ equals()ï¼Ÿ"></a>1. Java ä¸­çš„ &#x3D;&#x3D; å’Œ equals() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é‡å†™ equals()ï¼Ÿ</h3><ul><li><strong>&#x3D;&#x3D;</strong><ul><li>å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼šæ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰ã€‚</li><li>å¯¹äºå¼•ç”¨ç±»å‹ï¼šæ¯”è¾ƒä¸¤ä¸ªå¼•ç”¨æ˜¯å¦æŒ‡å‘åŒä¸€å—å†…å­˜åœ°å€ï¼ˆå³æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚</li></ul></li><li><strong>equals()</strong><ul><li>å®šä¹‰åœ¨ <code>Object</code> ç±»ä¸­ï¼Œé»˜è®¤å®ç°ä¹Ÿæ˜¯ <code>==</code>ã€‚</li><li>ä¸€èˆ¬ä¼šè¢«ç±»ï¼ˆå¦‚ <code>String</code>ã€<code>Integer</code> ç­‰ï¼‰é‡å†™ï¼Œç”¨æ¥æ¯”è¾ƒâ€œå†…å®¹â€æ˜¯å¦ç›¸åŒï¼Œè€Œä¸æ˜¯å†…å­˜åœ°å€ã€‚</li></ul></li></ul><p>ğŸ‘‰ æ­£ç¡®é‡å†™ <code>equals()</code> è¦æ»¡è¶³ <strong>è‡ªåæ€§ã€å¯¹ç§°æ€§ã€ä¼ é€’æ€§ã€ä¸€è‡´æ€§</strong>ï¼Œå¹¶ä¸”å’Œ <code>null</code> æ¯”è¾ƒæ—¶è¿”å› <code>false</code>ã€‚<br> å…¸å‹å®ç°æ­¥éª¤ï¼š</p><ol><li>åˆ¤æ–­ <code>this == obj</code>ï¼Œè‹¥ç›¸ç­‰ç›´æ¥è¿”å› <code>true</code>ã€‚</li><li>åˆ¤æ–­ <code>obj</code> æ˜¯å¦ä¸ºåŒç±»å®ä¾‹ã€‚</li><li>å¼ºåˆ¶ç±»å‹è½¬æ¢åé€ä¸ªæ¯”è¾ƒå…³é”®å­—æ®µã€‚</li></ol><hr><h3 id="2-ä¸ºä»€ä¹ˆé‡å†™-equals-æ—¶å¿…é¡»é‡å†™-hashCode-ï¼Ÿä¸é‡å†™ä¼šæ€æ ·ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆé‡å†™-equals-æ—¶å¿…é¡»é‡å†™-hashCode-ï¼Ÿä¸é‡å†™ä¼šæ€æ ·ï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆé‡å†™ equals() æ—¶å¿…é¡»é‡å†™ hashCode()ï¼Ÿä¸é‡å†™ä¼šæ€æ ·ï¼Ÿ"></a>2. ä¸ºä»€ä¹ˆé‡å†™ equals() æ—¶å¿…é¡»é‡å†™ hashCode()ï¼Ÿä¸é‡å†™ä¼šæ€æ ·ï¼Ÿ</h3><ul><li><strong>åŸå› </strong>ï¼šå› ä¸º <code>HashMap</code>ã€<code>HashSet</code> ç­‰åŸºäºå“ˆå¸Œè¡¨çš„é›†åˆä½¿ç”¨ <code>hashCode()</code> æ¥å†³å®šå…ƒç´ å­˜æ”¾ä½ç½®ï¼Œç„¶åå†ç”¨ <code>equals()</code> åˆ¤æ–­å…ƒç´ æ˜¯å¦ç›¸åŒã€‚</li><li><strong>å¥‘çº¦</strong>ï¼ˆJDK æ–‡æ¡£è§„å®šï¼‰ï¼š<ul><li>å¦‚æœä¸¤ä¸ªå¯¹è±¡ <code>equals()</code> ç›¸ç­‰ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ <code>hashCode()</code> å¿…é¡»ç›¸ç­‰ã€‚</li><li>åä¹‹ï¼Œ<code>hashCode()</code> ç›¸ç­‰å¹¶ä¸ä¸€å®šæ„å‘³ç€ <code>equals()</code> ç›¸ç­‰ã€‚</li></ul></li><li><strong>ä¸é‡å†™ä¼šæ€æ ·</strong>ï¼š<ul><li>ä¸¤ä¸ªå†…å®¹ç›¸åŒçš„å¯¹è±¡å¯èƒ½ <code>equals()</code> ä¸º trueï¼Œä½† <code>hashCode()</code> ä¸åŒï¼Œå¯¼è‡´æ”¾è¿› <code>HashSet</code> æ—¶è¢«å½“ä½œä¸¤ä¸ªå¯¹è±¡å­˜å‚¨ï¼Œè¿èƒŒé›†åˆâ€œä¸é‡å¤â€çš„åŸåˆ™ã€‚</li></ul></li></ul><hr><h3 id="3-Object-ç±»æœ‰å“ªäº›æ–¹æ³•ï¼Ÿå“ªäº›æ–¹æ³•ç»å¸¸éœ€è¦é‡å†™ï¼Ÿ"><a href="#3-Object-ç±»æœ‰å“ªäº›æ–¹æ³•ï¼Ÿå“ªäº›æ–¹æ³•ç»å¸¸éœ€è¦é‡å†™ï¼Ÿ" class="headerlink" title="3. Object ç±»æœ‰å“ªäº›æ–¹æ³•ï¼Ÿå“ªäº›æ–¹æ³•ç»å¸¸éœ€è¦é‡å†™ï¼Ÿ"></a>3. Object ç±»æœ‰å“ªäº›æ–¹æ³•ï¼Ÿå“ªäº›æ–¹æ³•ç»å¸¸éœ€è¦é‡å†™ï¼Ÿ</h3><ul><li><strong>å¸¸ç”¨æ–¹æ³•</strong>ï¼š<ul><li><code>equals()</code>ï¼šå¯¹è±¡å†…å®¹æ¯”è¾ƒã€‚</li><li><code>hashCode()</code>ï¼šå“ˆå¸Œå€¼ï¼Œé…åˆ <code>equals</code>ã€‚</li><li><code>toString()</code>ï¼šå¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</li><li><code>clone()</code>ï¼šå¯¹è±¡å…‹éš†ï¼ˆæµ…æ‹·è´ï¼Œéœ€å®ç° <code>Cloneable</code>ï¼‰ã€‚</li><li><code>finalize()</code>ï¼šå¯¹è±¡è¢« GC å‰è°ƒç”¨ï¼ˆå·²ä¸æ¨èä½¿ç”¨ï¼‰ã€‚</li></ul></li><li><strong>åŒæ­¥æ–¹æ³•</strong>ï¼š<ul><li><code>wait()</code> &#x2F; <code>notify()</code> &#x2F; <code>notifyAll()</code>ï¼šçº¿ç¨‹é€šä¿¡ã€‚</li></ul></li><li><strong>ç±»ç›¸å…³æ–¹æ³•</strong>ï¼š<ul><li><code>getClass()</code>ï¼šè·å–å¯¹è±¡çš„è¿è¡Œæ—¶ç±»å‹ã€‚</li></ul></li></ul><p>ğŸ‘‰ ç»å¸¸éœ€è¦é‡å†™çš„ï¼š<code>equals()</code>ã€<code>hashCode()</code>ã€<code>toString()</code>ã€‚</p><hr><h3 id="4-finalã€finallyã€finalize-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#4-finalã€finallyã€finalize-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="4. finalã€finallyã€finalize() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>4. finalã€finallyã€finalize() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ul><li><strong>final</strong>ï¼šå…³é”®å­—<ul><li>ä¿®é¥°ç±»ï¼šç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚</li><li>ä¿®é¥°æ–¹æ³•ï¼šæ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€‚</li><li>ä¿®é¥°å˜é‡ï¼šå˜é‡æˆä¸ºå¸¸é‡ï¼Œåªèƒ½èµ‹å€¼ä¸€æ¬¡ã€‚</li></ul></li><li><strong>finally</strong>ï¼šå…³é”®å­—<ul><li>ç”¨äº <code>try-catch-finally</code>ï¼Œæ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œ<code>finally</code> å—ä¸­çš„ä»£ç ä¸€å®šä¼šæ‰§è¡Œï¼ˆé™¤é <code>System.exit(0)</code>ï¼‰ã€‚</li></ul></li><li><strong>finalize()</strong>ï¼šæ–¹æ³•<ul><li><code>Object</code> ç±»å®šä¹‰ï¼Œåœ¨ GC å‰è°ƒç”¨ï¼Œå¸¸ç”¨äºé‡Šæ”¾éæ‰˜ç®¡èµ„æºã€‚</li><li>å·²è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼ˆJava 9 å¼€å§‹ï¼‰ï¼Œå› ä¸ºä¸å¯é¢„æµ‹ã€ä¸å¯é ã€‚</li></ul></li></ul><hr><h3 id="5-Java-ä¸­çš„-instanceof-å…³é”®å­—æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"><a href="#5-Java-ä¸­çš„-instanceof-å…³é”®å­—æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ" class="headerlink" title="5. Java ä¸­çš„ instanceof å…³é”®å­—æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"></a>5. Java ä¸­çš„ instanceof å…³é”®å­—æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h3><ul><li><strong>ä½œç”¨</strong>ï¼šåˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæŸä¸ªç±»æˆ–å…¶å­ç±»çš„å®ä¾‹ã€‚</li><li><strong>å®ç°åŸç†</strong>ï¼š<ul><li>JVM åœ¨å¯¹è±¡å¤´ä¸­å­˜å‚¨äº†å¯¹è±¡æ‰€å±çš„ç±»çš„å…ƒæ•°æ®æŒ‡é’ˆã€‚</li><li><code>instanceof</code> å®é™…æ˜¯æ£€æŸ¥è¯¥ç±»å…ƒæ•°æ®æ˜¯å¦æ˜¯æŒ‡å®šç±»æˆ–å…¶å­ç±»ã€‚</li><li>ç¼–è¯‘å™¨ä¼šå°† <code>obj instanceof A</code> è½¬æ¢ä¸ºå­—èŠ‚ç  <code>instanceof</code> æŒ‡ä»¤ï¼Œç”± JVM åœ¨è¿è¡Œæ—¶åˆ¤æ–­ã€‚</li></ul></li></ul><hr><h3 id="6-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿæ¥å£èƒ½ä¸èƒ½æœ‰æ„é€ å‡½æ•°ï¼Ÿ"><a href="#6-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿæ¥å£èƒ½ä¸èƒ½æœ‰æ„é€ å‡½æ•°ï¼Ÿ" class="headerlink" title="6. æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿæ¥å£èƒ½ä¸èƒ½æœ‰æ„é€ å‡½æ•°ï¼Ÿ"></a>6. æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿæ¥å£èƒ½ä¸èƒ½æœ‰æ„é€ å‡½æ•°ï¼Ÿ</h3><ul><li><strong>æ¥å£</strong>ï¼š<ul><li>åªèƒ½å®šä¹‰æ–¹æ³•ï¼ˆJava 8 ä¹‹åå¯æœ‰ <code>default</code> å’Œ <code>static</code> æ–¹æ³•ï¼‰ã€‚</li><li>ä¸èƒ½æœ‰æ„é€ å‡½æ•°ï¼ˆå› ä¸ºæ¥å£ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼‰ã€‚</li><li>å¯ä»¥å®ç° <strong>å¤šç»§æ‰¿</strong>ï¼ˆä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼‰ã€‚</li></ul></li><li><strong>æŠ½è±¡ç±»</strong>ï¼š<ul><li>å¯ä»¥æœ‰æ™®é€šæ–¹æ³•ã€æŠ½è±¡æ–¹æ³•ã€æˆå‘˜å˜é‡ã€‚</li><li>å¯ä»¥æœ‰æ„é€ å‡½æ•°ï¼ˆä½†ä¸èƒ½ç›´æ¥ newï¼Œç”¨äºå­ç±»æ„é€ æ—¶è°ƒç”¨ï¼‰ã€‚</li><li>åªèƒ½å•ç»§æ‰¿ã€‚</li></ul></li></ul><hr><h3 id="7-æ¥å£å¯ä»¥å¤šç»§æ‰¿å—ï¼ŸæŠ½è±¡ç±»å¯ä»¥å®ç°æ¥å£å—ï¼Ÿ"><a href="#7-æ¥å£å¯ä»¥å¤šç»§æ‰¿å—ï¼ŸæŠ½è±¡ç±»å¯ä»¥å®ç°æ¥å£å—ï¼Ÿ" class="headerlink" title="7. æ¥å£å¯ä»¥å¤šç»§æ‰¿å—ï¼ŸæŠ½è±¡ç±»å¯ä»¥å®ç°æ¥å£å—ï¼Ÿ"></a>7. æ¥å£å¯ä»¥å¤šç»§æ‰¿å—ï¼ŸæŠ½è±¡ç±»å¯ä»¥å®ç°æ¥å£å—ï¼Ÿ</h3><ul><li><strong>æ¥å£å¯ä»¥å¤šç»§æ‰¿</strong>ï¼š<code>interface A extends B, C &#123;&#125;</code></li><li><strong>æŠ½è±¡ç±»å¯ä»¥å®ç°æ¥å£</strong>ï¼šå¯ä»¥é€‰æ‹©æ€§å®ç°æ¥å£çš„æ–¹æ³•ï¼Œæœªå®ç°çš„æ–¹æ³•ä»ä¿æŒ <code>abstract</code>ï¼Œç”±å­ç±»å®ç°ã€‚</li></ul><hr><h3 id="8-default-æ–¹æ³•å’Œ-static-æ–¹æ³•åœ¨æ¥å£ä¸­çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#8-default-æ–¹æ³•å’Œ-static-æ–¹æ³•åœ¨æ¥å£ä¸­çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="8. default æ–¹æ³•å’Œ static æ–¹æ³•åœ¨æ¥å£ä¸­çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a>8. default æ–¹æ³•å’Œ static æ–¹æ³•åœ¨æ¥å£ä¸­çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li><strong>default æ–¹æ³•</strong>ï¼š<ul><li>Java 8 å¼•å…¥ï¼Œæ¥å£ä¸­å¯ä»¥æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•ã€‚</li><li>è§£å†³æ¥å£æ‰©å±•çš„å…¼å®¹æ€§é—®é¢˜ï¼ˆç»™è€æ¥å£æ–°å¢æ–¹æ³•ä¸ä¼šå¯¼è‡´æ‰€æœ‰å®ç°ç±»æŠ¥é”™ï¼‰ã€‚</li></ul></li><li><strong>static æ–¹æ³•</strong>ï¼š<ul><li>å±äºæ¥å£æœ¬èº«ï¼Œè€Œä¸æ˜¯å®ç°ç±»ã€‚</li><li>ç”¨äºæä¾›å·¥å…·æ–¹æ³•æˆ–å…¬å…±é€»è¾‘ï¼ˆç±»ä¼¼ <code>Collections</code> çš„å·¥å…·ç±»æ–¹æ³•ï¼‰ã€‚</li></ul></li></ul><hr><h3 id="9-ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿåˆ†ä¸ºå“ªå‡ ç§ï¼Ÿ"><a href="#9-ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿåˆ†ä¸ºå“ªå‡ ç§ï¼Ÿ" class="headerlink" title="9. ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿåˆ†ä¸ºå“ªå‡ ç§ï¼Ÿ"></a>9. ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿåˆ†ä¸ºå“ªå‡ ç§ï¼Ÿ</h3><ul><li><strong>å†…éƒ¨ç±»</strong>ï¼šå®šä¹‰åœ¨ç±»ä¸­çš„ç±»ï¼Œå¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ã€‚</li><li><strong>ç§ç±»</strong>ï¼š<ol><li><strong>æˆå‘˜å†…éƒ¨ç±»</strong>ï¼ˆéé™æ€å†…éƒ¨ç±»ï¼‰<ul><li>ä¾èµ–å¤–éƒ¨ç±»å®ä¾‹ï¼Œä¸èƒ½æœ‰ <code>static</code> æˆå‘˜ã€‚</li></ul></li><li><strong>é™æ€å†…éƒ¨ç±»</strong><ul><li>ç±»ä¼¼æ™®é€šç±»ï¼Œä½†ä½œç”¨åŸŸåœ¨å¤–éƒ¨ç±»å†…ï¼Œå¯ä»¥æœ‰ <code>static</code> æˆå‘˜ã€‚</li></ul></li><li><strong>å±€éƒ¨å†…éƒ¨ç±»</strong><ul><li>å®šä¹‰åœ¨æ–¹æ³•ä½“æˆ–ä»£ç å—ä¸­ï¼Œåªèƒ½åœ¨è¯¥èŒƒå›´å†…ä½¿ç”¨ã€‚</li></ul></li><li><strong>åŒ¿åå†…éƒ¨ç±»</strong><ul><li>æ²¡æœ‰åå­—ï¼Œé€šå¸¸åœ¨éœ€è¦â€œä¸´æ—¶å®ç°æ¥å£æˆ–ç»§æ‰¿ç±»â€çš„åœºæ™¯ä½¿ç”¨ã€‚</li></ul></li></ol></li></ul><hr><h3 id="10-åŒ¿åå†…éƒ¨ç±»å’Œ-Lambda-è¡¨è¾¾å¼çš„åŒºåˆ«ï¼Ÿ"><a href="#10-åŒ¿åå†…éƒ¨ç±»å’Œ-Lambda-è¡¨è¾¾å¼çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="10. åŒ¿åå†…éƒ¨ç±»å’Œ Lambda è¡¨è¾¾å¼çš„åŒºåˆ«ï¼Ÿ"></a>10. åŒ¿åå†…éƒ¨ç±»å’Œ Lambda è¡¨è¾¾å¼çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>åŒ¿åå†…éƒ¨ç±»</strong>ï¼š<ul><li>å®ç°æ¥å£&#x2F;ç»§æ‰¿æŠ½è±¡ç±»çš„ <strong>å…·ä½“åŒ¿åç±»å¯¹è±¡</strong>ã€‚</li><li>å¯ä»¥æœ‰å¤šä¸ªæ–¹æ³•ï¼Œä½†é€šå¸¸åªé‡å†™éœ€è¦çš„æ–¹æ³•ã€‚</li><li>ç”Ÿæˆ <code>.class</code> æ–‡ä»¶ï¼ˆé¢å¤–å¼€é”€ï¼‰ã€‚</li></ul></li><li><strong>Lambda è¡¨è¾¾å¼</strong>ï¼š<ul><li>ä»…èƒ½ç”¨äº <strong>å‡½æ•°å¼æ¥å£</strong>ï¼ˆåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼‰ã€‚</li><li>æ›´ç®€æ´ï¼Œæœ¬è´¨æ˜¯è¯­æ³•ç³–ï¼Œç¼–è¯‘åç”Ÿæˆ <code>invokedynamic</code> å­—èŠ‚ç æŒ‡ä»¤ï¼Œè°ƒç”¨è¿è¡Œæ—¶ç”Ÿæˆçš„å‡½æ•°å¯¹è±¡ã€‚</li><li>ä¸ä¼šåˆ›å»ºæ–°çš„ <code>.class</code> æ–‡ä»¶ï¼Œæ›´è½»é‡ã€‚</li></ul></li></ul><hr><h3 id="äºŒã€æ•°æ®ç±»å‹-å†…å­˜"><a href="#äºŒã€æ•°æ®ç±»å‹-å†…å­˜" class="headerlink" title="äºŒã€æ•°æ®ç±»å‹ &amp; å†…å­˜"></a>äºŒã€æ•°æ®ç±»å‹ &amp; å†…å­˜</h3><hr><h3 id="1-Java-ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹å’ŒåŒ…è£…ç±»å‹æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"><a href="#1-Java-ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹å’ŒåŒ…è£…ç±»å‹æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ" class="headerlink" title="1. Java ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹å’ŒåŒ…è£…ç±»å‹æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"></a>1. Java ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹å’ŒåŒ…è£…ç±»å‹æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</h3><ul><li><strong>åŸºæœ¬æ•°æ®ç±»å‹</strong>ï¼ˆprimitiveï¼‰ï¼š<code>byte, short, int, long, float, double, char, boolean</code><ul><li>å­˜å‚¨åœ¨æ ˆä¸Šï¼ˆæˆ–å¯„å­˜å™¨ï¼‰ï¼Œæ•ˆç‡é«˜ï¼Œç©ºé—´å ç”¨å›ºå®šã€‚</li><li>ä¸èƒ½ä¸º <code>null</code>ï¼Œé»˜è®¤å€¼å›ºå®šï¼ˆå¦‚ <code>int</code> é»˜è®¤ <code>0</code>ï¼Œ<code>boolean</code> é»˜è®¤ <code>false</code>ï¼‰ã€‚</li></ul></li><li><strong>åŒ…è£…ç±»å‹</strong>ï¼ˆwrapperï¼‰ï¼š<code>Byte, Short, Integer, Long, Float, Double, Character, Boolean</code><ul><li>æ˜¯å¯¹è±¡ï¼Œå­˜å‚¨åœ¨å †ä¸­ã€‚</li><li>å¯ä»¥ä¸º <code>null</code>ï¼Œæœ‰ä¸°å¯Œçš„ APIã€‚</li><li>å¯ä»¥å‚ä¸é›†åˆç±»ï¼ˆå¦‚ <code>ArrayList</code> åªèƒ½å­˜å¯¹è±¡ï¼‰ã€‚</li></ul></li><li><strong>è‡ªåŠ¨è£…ç®±&#x2F;æ‹†ç®±</strong>ï¼šJava ä¼šåœ¨åŸºæœ¬ç±»å‹å’ŒåŒ…è£…ç±»ä¹‹é—´è‡ªåŠ¨è½¬æ¢ã€‚</li></ul><hr><h3 id="2-ä¸ºä»€ä¹ˆ-Integer-æœ‰ç¼“å­˜æœºåˆ¶ï¼ŸèŒƒå›´æ˜¯å¤šå°‘ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆ-Integer-æœ‰ç¼“å­˜æœºåˆ¶ï¼ŸèŒƒå›´æ˜¯å¤šå°‘ï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆ Integer æœ‰ç¼“å­˜æœºåˆ¶ï¼ŸèŒƒå›´æ˜¯å¤šå°‘ï¼Ÿ"></a>2. ä¸ºä»€ä¹ˆ Integer æœ‰ç¼“å­˜æœºåˆ¶ï¼ŸèŒƒå›´æ˜¯å¤šå°‘ï¼Ÿ</h3><ul><li><strong>åŸå› </strong>ï¼š<ul><li>ä¸ºäº†é¿å…é¢‘ç¹åˆ›å»ºå¯¹è±¡ï¼Œæé«˜æ€§èƒ½ã€‚</li><li>å°æ•´æ•°ä½¿ç”¨é¢‘ç‡é«˜ï¼ˆå¦‚å¾ªç¯ã€ä¸‹æ ‡ï¼‰ï¼Œæ‰€ä»¥ç¼“å­˜å¸¸ç”¨çš„æ•´æ•°ã€‚</li></ul></li><li><strong>èŒƒå›´</strong>ï¼š<code>-128 ~ 127</code>ã€‚</li><li><strong>å®ç°</strong>ï¼š<ul><li><code>IntegerCache</code> é™æ€å†…éƒ¨ç±»åœ¨ç±»åŠ è½½æ—¶åˆå§‹åŒ–ç¼“å­˜æ•°ç»„ã€‚</li><li><code>Integer.valueOf(int i)</code> æ–¹æ³•ä¼šå…ˆæŸ¥ç¼“å­˜ï¼Œå†å†³å®šæ˜¯å¦ new å¯¹è±¡ã€‚</li></ul></li></ul><hr><h3 id="3-ä¸ºä»€ä¹ˆ-new-Integer-127-new-Integer-127-ä¸º-falseï¼Œè€Œ-Integer-valueOf-127-Integer-valueOf-127-ä¸º-trueï¼Ÿ"><a href="#3-ä¸ºä»€ä¹ˆ-new-Integer-127-new-Integer-127-ä¸º-falseï¼Œè€Œ-Integer-valueOf-127-Integer-valueOf-127-ä¸º-trueï¼Ÿ" class="headerlink" title="3. ä¸ºä»€ä¹ˆ new Integer(127) == new Integer(127) ä¸º falseï¼Œè€Œ Integer.valueOf(127) == Integer.valueOf(127) ä¸º trueï¼Ÿ"></a>3. ä¸ºä»€ä¹ˆ <code>new Integer(127) == new Integer(127)</code> ä¸º falseï¼Œè€Œ <code>Integer.valueOf(127) == Integer.valueOf(127)</code> ä¸º trueï¼Ÿ</h3><ul><li><code>new Integer(127)</code>ï¼šæ¯æ¬¡éƒ½ä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼Œå†…å­˜åœ°å€ä¸åŒï¼Œæ‰€ä»¥ <code>==</code> ä¸º falseã€‚</li><li><code>Integer.valueOf(127)</code>ï¼šä¼šæŸ¥ç¼“å­˜ï¼Œ<code>127</code> åœ¨ <code>-128~127</code> èŒƒå›´å†…ï¼Œè¿”å›åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œæ‰€ä»¥ <code>==</code> ä¸º trueã€‚</li></ul><p>ğŸ‘‰ <strong>æ€»ç»“</strong>ï¼š</p><ul><li><code>==</code> æ¯”è¾ƒçš„æ˜¯å¼•ç”¨åœ°å€ã€‚</li><li><code>equals()</code> æ‰æ˜¯æ¯”è¾ƒæ•°å€¼ã€‚</li></ul><hr><h3 id="4-NaN-å’Œ-Infinity-åœ¨-Java-ä¸­å¦‚ä½•è¡¨ç¤ºï¼Ÿ"><a href="#4-NaN-å’Œ-Infinity-åœ¨-Java-ä¸­å¦‚ä½•è¡¨ç¤ºï¼Ÿ" class="headerlink" title="4. NaN å’Œ Infinity åœ¨ Java ä¸­å¦‚ä½•è¡¨ç¤ºï¼Ÿ"></a>4. NaN å’Œ Infinity åœ¨ Java ä¸­å¦‚ä½•è¡¨ç¤ºï¼Ÿ</h3><ul><li><strong>NaNï¼ˆNot a Numberï¼‰</strong>ï¼š<ul><li>å¦‚ <code>0.0 / 0.0</code> æˆ– <code>Math.sqrt(-1)</code>ã€‚</li><li>ç‰¹ç‚¹ï¼š<code>NaN != NaN</code>ï¼Œè¦ç”¨ <code>Double.isNaN()</code> æ£€æµ‹ã€‚</li></ul></li><li><strong>Infinityï¼ˆæ­£&#x2F;è´Ÿæ— ç©·å¤§ï¼‰</strong>ï¼š<ul><li>å¦‚ <code>1.0 / 0.0 = Infinity</code>ï¼Œ<code>-1.0 / 0.0 = -Infinity</code>ã€‚</li><li>ç”¨ <code>Double.isInfinite()</code> æ£€æµ‹ã€‚</li></ul></li></ul><hr><h3 id="5-ä¸ºä»€ä¹ˆæµ®ç‚¹æ•°è®¡ç®—æœ‰ç²¾åº¦é—®é¢˜ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿ"><a href="#5-ä¸ºä»€ä¹ˆæµ®ç‚¹æ•°è®¡ç®—æœ‰ç²¾åº¦é—®é¢˜ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿ" class="headerlink" title="5. ä¸ºä»€ä¹ˆæµ®ç‚¹æ•°è®¡ç®—æœ‰ç²¾åº¦é—®é¢˜ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿ"></a>5. ä¸ºä»€ä¹ˆæµ®ç‚¹æ•°è®¡ç®—æœ‰ç²¾åº¦é—®é¢˜ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿ</h3><ul><li><strong>åŸå› </strong>ï¼š<ul><li>æµ®ç‚¹æ•°é‡‡ç”¨ <strong>IEEE 754 äºŒè¿›åˆ¶æµ®ç‚¹è¡¨ç¤º</strong>ï¼Œå¤§å¤šæ•°åè¿›åˆ¶å°æ•°ï¼ˆå¦‚ <code>0.1</code>ï¼‰ä¸èƒ½ç²¾ç¡®è¡¨ç¤ºï¼Œåªèƒ½å­˜å‚¨è¿‘ä¼¼å€¼ã€‚</li><li>è®¡ç®—æ—¶ä¼šç´¯ç§¯è¯¯å·®ã€‚</li></ul></li><li><strong>é¿å…æ–¹æ³•</strong>ï¼š<ul><li>ä½¿ç”¨ <code>BigDecimal</code>ï¼ˆæ¨èï¼‰ã€‚</li><li>æˆ–ä½¿ç”¨æ•´æ•°æ›¿ä»£ï¼ˆå¦‚é‡‘é¢ç”¨åˆ†è€Œä¸æ˜¯å…ƒï¼‰ã€‚</li></ul></li></ul><hr><h3 id="6-BigDecimal-ä¸ºä»€ä¹ˆèƒ½è§£å†³æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ï¼Ÿ"><a href="#6-BigDecimal-ä¸ºä»€ä¹ˆèƒ½è§£å†³æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ï¼Ÿ" class="headerlink" title="6. BigDecimal ä¸ºä»€ä¹ˆèƒ½è§£å†³æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ï¼Ÿ"></a>6. BigDecimal ä¸ºä»€ä¹ˆèƒ½è§£å†³æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ï¼Ÿ</h3><ul><li><strong>åŸç†</strong>ï¼š<ul><li>å†…éƒ¨ä½¿ç”¨ <strong>BigInteger + ç²¾åº¦æ ‡è¯† scale</strong> è¡¨ç¤ºä»»æ„ç²¾åº¦çš„åè¿›åˆ¶æ•°ã€‚</li><li>ä¸ä¾èµ–äºŒè¿›åˆ¶æµ®ç‚¹å­˜å‚¨ï¼Œè€Œæ˜¯åŸºäºå­—ç¬¦ä¸²æˆ–æ•´æ•°è¿›è¡Œç²¾ç¡®è®¡ç®—ã€‚</li></ul></li><li><strong>æ³¨æ„</strong>ï¼š<ul><li>ä¸èƒ½ç”¨ <code>new BigDecimal(double)</code>ï¼ˆä¼šå¸¦å…¥äºŒè¿›åˆ¶è¯¯å·®ï¼‰ã€‚</li><li>æ¨è <code>BigDecimal.valueOf(double)</code> æˆ– <code>new BigDecimal(String)</code>ã€‚</li></ul></li></ul><hr><h3 id="7-Java-ä¸­çš„å­—ç¬¦é›†é»˜è®¤æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ä¸åŒå¹³å°ä¸Šä¼šä¸ä¸€æ ·å—ï¼Ÿ"><a href="#7-Java-ä¸­çš„å­—ç¬¦é›†é»˜è®¤æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ä¸åŒå¹³å°ä¸Šä¼šä¸ä¸€æ ·å—ï¼Ÿ" class="headerlink" title="7. Java ä¸­çš„å­—ç¬¦é›†é»˜è®¤æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ä¸åŒå¹³å°ä¸Šä¼šä¸ä¸€æ ·å—ï¼Ÿ"></a>7. Java ä¸­çš„å­—ç¬¦é›†é»˜è®¤æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ä¸åŒå¹³å°ä¸Šä¼šä¸ä¸€æ ·å—ï¼Ÿ</h3><ul><li>Java å†…éƒ¨ä½¿ç”¨ <strong>UTF-16ï¼ˆUnicodeï¼‰</strong> å­˜å‚¨ <code>char</code> å’Œ <code>String</code>ã€‚</li><li>é»˜è®¤å­—ç¬¦é›†ï¼ˆ<code>Charset.defaultCharset()</code>ï¼‰ä¼šéšå¹³å°ä¸åŒè€Œä¸åŒï¼š<ul><li>Windowsï¼ˆä¸­æ–‡ç¯å¢ƒï¼‰ï¼š<code>GBK</code> æˆ– <code>GB2312</code>ã€‚</li><li>Linux &#x2F; macOSï¼šé€šå¸¸æ˜¯ <code>UTF-8</code>ã€‚<br> ğŸ‘‰ è¿™ä¼šå½±å“æ–‡ä»¶è¯»å†™ã€ç½‘ç»œä¼ è¾“ç­‰ã€‚</li></ul></li></ul><hr><h3 id="8-Stringã€StringBuilderã€StringBuffer-åŒºåˆ«ï¼Ÿçº¿ç¨‹å®‰å…¨æ€§ï¼Ÿ"><a href="#8-Stringã€StringBuilderã€StringBuffer-åŒºåˆ«ï¼Ÿçº¿ç¨‹å®‰å…¨æ€§ï¼Ÿ" class="headerlink" title="8. Stringã€StringBuilderã€StringBuffer åŒºåˆ«ï¼Ÿçº¿ç¨‹å®‰å…¨æ€§ï¼Ÿ"></a>8. Stringã€StringBuilderã€StringBuffer åŒºåˆ«ï¼Ÿçº¿ç¨‹å®‰å…¨æ€§ï¼Ÿ</h3><ul><li><strong>String</strong><ul><li>ä¸å¯å˜ç±»ï¼ˆåº•å±‚ <code>final char[]</code>ï¼‰ï¼Œæ¯æ¬¡æ‹¼æ¥éƒ½ä¼šç”Ÿæˆæ–°å¯¹è±¡ã€‚</li></ul></li><li><strong>StringBuilder</strong><ul><li>å¯å˜å­—ç¬¦åºåˆ—ï¼ˆåº•å±‚ <code>char[]</code>ï¼‰ï¼Œé«˜æ•ˆï¼Œ<strong>éçº¿ç¨‹å®‰å…¨</strong>ã€‚</li></ul></li><li><strong>StringBuffer</strong><ul><li>å¯å˜å­—ç¬¦åºåˆ—ï¼Œæ–¹æ³•åŠ äº† <code>synchronized</code>ï¼Œ<strong>çº¿ç¨‹å®‰å…¨</strong>ï¼Œæ•ˆç‡æ¯” <code>StringBuilder</code> ä½ã€‚</li></ul></li></ul><p>ğŸ‘‰ å•çº¿ç¨‹æ¨è <code>StringBuilder</code>ï¼Œå¤šçº¿ç¨‹æ¨è <code>StringBuffer</code>ã€‚</p><hr><h3 id="9-ä¸ºä»€ä¹ˆ-String-æ˜¯ä¸å¯å˜çš„ï¼ŸèƒŒåå®ç°ç»†èŠ‚ï¼Ÿ"><a href="#9-ä¸ºä»€ä¹ˆ-String-æ˜¯ä¸å¯å˜çš„ï¼ŸèƒŒåå®ç°ç»†èŠ‚ï¼Ÿ" class="headerlink" title="9. ä¸ºä»€ä¹ˆ String æ˜¯ä¸å¯å˜çš„ï¼ŸèƒŒåå®ç°ç»†èŠ‚ï¼Ÿ"></a>9. ä¸ºä»€ä¹ˆ String æ˜¯ä¸å¯å˜çš„ï¼ŸèƒŒåå®ç°ç»†èŠ‚ï¼Ÿ</h3><ul><li><strong>åŸå› </strong>ï¼š<ol><li><strong>å®‰å…¨æ€§</strong>ï¼šå¦‚ç½‘ç»œè¯·æ±‚ URLã€æ–‡ä»¶è·¯å¾„ã€ClassLoader åç§°ç­‰ï¼Œä¸€æ—¦åˆ›å»ºä¸å¯ä¿®æ”¹ï¼Œé¿å…è¢«ç¯¡æ”¹ã€‚</li><li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šä¸å¯å˜å¯¹è±¡å¤©ç„¶çº¿ç¨‹å®‰å…¨ã€‚</li><li><strong>å“ˆå¸Œå€¼ç¼“å­˜</strong>ï¼š<code>String</code> ç¼“å­˜äº† <code>hashCode</code>ï¼Œä¸å¯å˜ä¿è¯å“ˆå¸Œå€¼ä¸ä¼šå˜åŒ–ã€‚</li><li><strong>å­—ç¬¦ä¸²å¸¸é‡æ± ä¼˜åŒ–</strong>ï¼šä¸å¯å˜å¯¹è±¡å¯è¢«å¤ç”¨ã€‚</li></ol></li><li><strong>å®ç°</strong>ï¼š<ul><li><code>private final char[] value</code>ï¼ˆJDK 9 ä»¥åæ”¹æˆ <code>byte[]</code> + <code>coder</code>ï¼ŒèŠ‚çœå†…å­˜ï¼‰ã€‚</li></ul></li></ul><hr><h3 id="10-intern-æ–¹æ³•çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#10-intern-æ–¹æ³•çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="10. intern() æ–¹æ³•çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>10. intern() æ–¹æ³•çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li><p><strong>ä½œç”¨</strong>ï¼š</p><ul><li>å°†å­—ç¬¦ä¸²æ”¾å…¥ <strong>å­—ç¬¦ä¸²å¸¸é‡æ± </strong>ï¼Œè¿”å›æ± ä¸­çš„å¼•ç”¨ã€‚</li><li>è‹¥æ± ä¸­å·²æœ‰ç­‰å€¼å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›å·²æœ‰å¯¹è±¡å¼•ç”¨ã€‚</li></ul></li><li><p><strong>æ„ä¹‰</strong>ï¼š</p><ul><li>å‡å°‘å†…å­˜å ç”¨ï¼Œæé«˜æ¯”è¾ƒæ•ˆç‡ï¼ˆå¸¸é‡æ± ä¸­çš„ <code>String</code> å¯ä»¥ç›´æ¥ç”¨ <code>==</code> æ¯”è¾ƒï¼‰ã€‚</li></ul></li><li><p><strong>ä¾‹å­</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> s1.intern();</span><br><span class="line"><span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">System.out.println(s2 == s3); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="ä¸‰ã€é›†åˆæ¡†æ¶"><a href="#ä¸‰ã€é›†åˆæ¡†æ¶" class="headerlink" title="ä¸‰ã€é›†åˆæ¡†æ¶"></a>ä¸‰ã€é›†åˆæ¡†æ¶</h3><hr><h2 id="1-ArrayList-å’Œ-Vector-çš„åŒºåˆ«"><a href="#1-ArrayList-å’Œ-Vector-çš„åŒºåˆ«" class="headerlink" title="1. ArrayList å’Œ Vector çš„åŒºåˆ«"></a><strong>1. ArrayList å’Œ Vector çš„åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>ArrayList</th><th>Vector</th></tr></thead><tbody><tr><td>çº¿ç¨‹å®‰å…¨</td><td>éçº¿ç¨‹å®‰å…¨</td><td>çº¿ç¨‹å®‰å…¨ï¼ˆæ–¹æ³•åŠ  synchronizedï¼‰</td></tr><tr><td>æ‰©å®¹æœºåˆ¶</td><td>é»˜è®¤ 1.5 å€</td><td>é»˜è®¤ 2 å€</td></tr><tr><td>æ€§èƒ½</td><td>é«˜ï¼ˆæ— é”ï¼‰</td><td>ä½ï¼ˆåŒæ­¥å¼€é”€ï¼‰</td></tr><tr><td>ç”¨é€”</td><td>å¤šçº¿ç¨‹å¤–éƒ¨ä¸å®‰å…¨</td><td>é€‚åˆå¤šçº¿ç¨‹å…±äº«åœºæ™¯ï¼Œä½†ç°åœ¨è¾ƒå°‘ä½¿ç”¨</td></tr><tr><td>é¢è¯•æ‹“å±•</td><td>å¦‚ä½•åœ¨å¤šçº¿ç¨‹ä¸‹å®‰å…¨ä½¿ç”¨ ArrayListï¼Ÿå¯ç”¨ <code>Collections.synchronizedList()</code> æˆ– <code>CopyOnWriteArrayList</code></td><td></td></tr></tbody></table><p><strong>åŸç†</strong>ï¼š</p><ul><li>éƒ½åŸºäºåŠ¨æ€æ•°ç»„å®ç°</li><li>æ·»åŠ å…ƒç´ æ—¶å¦‚æœå®¹é‡ä¸å¤Ÿï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„å¹¶å¤åˆ¶åŸæ•°ç»„å†…å®¹</li></ul><hr><h2 id="2-ä¸ºä»€ä¹ˆ-ArrayList-çš„æ‰©å®¹æ˜¯-1-5-å€ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆ-ArrayList-çš„æ‰©å®¹æ˜¯-1-5-å€ï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆ ArrayList çš„æ‰©å®¹æ˜¯ 1.5 å€ï¼Ÿ"></a><strong>2. ä¸ºä»€ä¹ˆ ArrayList çš„æ‰©å®¹æ˜¯ 1.5 å€ï¼Ÿ</strong></h2><ul><li><p><strong>ç›®çš„</strong>ï¼šå¹³è¡¡ <strong>å†…å­˜æ¶ˆè€—</strong> å’Œ <strong>æ‰©å®¹é¢‘ç‡</strong></p></li><li><p><strong>åŸç†</strong>ï¼š</p><ul><li>è¿‡å°æ‰©å®¹ï¼šé¢‘ç¹åˆ›å»ºæ–°æ•°ç»„ï¼Œå¤åˆ¶å¼€é”€å¤§</li><li>è¿‡å¤§æ‰©å®¹ï¼šæµªè´¹å†…å­˜</li></ul></li><li><p>JDK 1.8 çš„æ‰©å®¹å…¬å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>); <span class="comment">// ç›¸å½“äº 1.5 å€</span></span><br></pre></td></tr></table></figure></li><li><p>é¢è¯•ç‚¹ï¼š</p><ul><li>LinkedList ä¸éœ€è¦æ‰©å®¹ï¼Œå› ä¸ºé“¾è¡¨åŠ¨æ€å¢é•¿</li><li>å¦‚ä½•è‡ªå®šä¹‰æ‰©å®¹ç­–ç•¥ï¼Ÿ</li></ul></li></ul><hr><h2 id="3-LinkedList-æ˜¯åŒå‘é“¾è¡¨è¿˜æ˜¯å•å‘é“¾è¡¨ï¼Ÿ"><a href="#3-LinkedList-æ˜¯åŒå‘é“¾è¡¨è¿˜æ˜¯å•å‘é“¾è¡¨ï¼Ÿ" class="headerlink" title="3. LinkedList æ˜¯åŒå‘é“¾è¡¨è¿˜æ˜¯å•å‘é“¾è¡¨ï¼Ÿ"></a><strong>3. LinkedList æ˜¯åŒå‘é“¾è¡¨è¿˜æ˜¯å•å‘é“¾è¡¨ï¼Ÿ</strong></h2><ul><li><p><strong>Java ä¸­ LinkedList æ˜¯åŒå‘é“¾è¡¨</strong></p></li><li><p><strong>ç»“æ„</strong>ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Node&lt;E&gt; &#123;</span><br><span class="line">    E item;</span><br><span class="line">    Node&lt;E&gt; next;</span><br><span class="line">    Node&lt;E&gt; prev;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li>æ”¯æŒå¿«é€Ÿæ’å…¥&#x2F;åˆ é™¤ï¼ˆO(1)ï¼‰</li><li>æ”¯æŒä»å¤´å°¾éå†</li></ul></li><li><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>éšæœºè®¿é—®æ…¢ï¼ˆO(n)ï¼‰</li><li>å†…å­˜å ç”¨å¤§ï¼ˆéœ€è¦ prev æŒ‡é’ˆï¼‰</li></ul></li></ul><hr><h2 id="4-HashSet-åº•å±‚å®ç°"><a href="#4-HashSet-åº•å±‚å®ç°" class="headerlink" title="4. HashSet åº•å±‚å®ç°"></a><strong>4. HashSet åº•å±‚å®ç°</strong></h2><ul><li><strong>åº•å±‚ä½¿ç”¨ HashMap å®ç°</strong></li><li><strong>åŸç†</strong>ï¼š<ul><li>æ¯ä¸ªå…ƒç´ ä½œä¸º <code>HashMap</code> çš„ key</li><li>value ä½¿ç”¨ä¸€ä¸ªå›ºå®šçš„ Object å¯¹è±¡ <code>PRESENT</code></li></ul></li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>ä¸å…è®¸é‡å¤</li><li>æ— åºå­˜å‚¨</li></ul></li><li><strong>æ€§èƒ½</strong>ï¼š<ul><li>æ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾å‡ O(1) å¹³å‡</li></ul></li><li>é¢è¯•æ‹“å±•ï¼šHashSet å’Œ LinkedHashSet çš„åŒºåˆ«ï¼Ÿ<ul><li>LinkedHashSet ç»´æŠ¤äº†æ’å…¥é¡ºåº</li></ul></li></ul><hr><h2 id="5-TreeSet-å’Œ-TreeMap-çš„åº•å±‚å®ç°"><a href="#5-TreeSet-å’Œ-TreeMap-çš„åº•å±‚å®ç°" class="headerlink" title="5. TreeSet å’Œ TreeMap çš„åº•å±‚å®ç°"></a><strong>5. TreeSet å’Œ TreeMap çš„åº•å±‚å®ç°</strong></h2><ul><li><strong>TreeMap</strong>ï¼šåŸºäº <strong>çº¢é»‘æ ‘</strong> å®ç°</li><li><strong>TreeSet</strong>ï¼šå†…éƒ¨ä½¿ç”¨ TreeMap å­˜å‚¨å…ƒç´ </li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>è‡ªåŠ¨æ’åºï¼ˆè‡ªç„¶æ’åºæˆ– Comparatorï¼‰</li><li>æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤ O(log n)</li></ul></li><li><strong>çº¢é»‘æ ‘ç‰¹æ€§</strong>ï¼š<ul><li>è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘</li><li>æ’å…¥&#x2F;åˆ é™¤ä¿æŒå¹³è¡¡ï¼Œé€šè¿‡æ—‹è½¬å’ŒæŸ“è‰²æ“ä½œ</li></ul></li></ul><hr><h2 id="6-PriorityQueue-çš„åº•å±‚æ•°æ®ç»“æ„"><a href="#6-PriorityQueue-çš„åº•å±‚æ•°æ®ç»“æ„" class="headerlink" title="6. PriorityQueue çš„åº•å±‚æ•°æ®ç»“æ„"></a><strong>6. PriorityQueue çš„åº•å±‚æ•°æ®ç»“æ„</strong></h2><ul><li><p><strong>åŸºäºå †å®ç°</strong>ï¼ˆé»˜è®¤æœ€å°å †ï¼‰</p></li><li><p><strong>ç‰¹æ€§</strong>ï¼š</p><ul><li>æ’å…¥ O(log n)</li><li>å–å‡ºæœ€å°å€¼ O(log n)</li></ul></li><li><p><strong>å†…éƒ¨å®ç°</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Object[] queue; <span class="comment">// åŠ¨æ€æ•°ç»„å­˜å‚¨å †</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åº”ç”¨</strong>ï¼š</p><ul><li>å®šæ—¶ä»»åŠ¡è°ƒåº¦</li><li>Dijkstra ç®—æ³•</li></ul></li><li><p>é¢è¯•æ‹“å±•ï¼šå¦‚ä½•å®ç°æœ€å¤§å †ï¼Ÿ</p><ul><li>ä½¿ç”¨ Comparator æˆ–è¦†å†™ compare æ–¹æ³•</li></ul></li></ul><hr><h2 id="7-ConcurrentSkipListMap-çš„åº•å±‚åŸç†"><a href="#7-ConcurrentSkipListMap-çš„åº•å±‚åŸç†" class="headerlink" title="7. ConcurrentSkipListMap çš„åº•å±‚åŸç†"></a><strong>7. ConcurrentSkipListMap çš„åº•å±‚åŸç†</strong></h2><ul><li><strong>åŸºäºè·³è¡¨å®ç°</strong></li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>æœ‰åº Mapï¼Œæ”¯æŒå¹¶å‘æ“ä½œ</li><li>è¯»æ“ä½œæ— é”ï¼ˆlock-freeï¼‰ï¼Œå†™æ“ä½œä½¿ç”¨ CAS&#x2F;é”ç²’åº¦è¾ƒå°</li></ul></li><li><strong>è·³è¡¨åŸç†</strong>ï¼š<ul><li>å¤šå±‚é“¾è¡¨</li><li>é¡¶å±‚é“¾è¡¨é—´éš”å¤§</li><li>æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤ O(log n) å¹³å‡</li></ul></li></ul><hr><h2 id="8-CopyOnWriteArrayList-çš„å†™æ—¶å¤åˆ¶"><a href="#8-CopyOnWriteArrayList-çš„å†™æ—¶å¤åˆ¶" class="headerlink" title="8. CopyOnWriteArrayList çš„å†™æ—¶å¤åˆ¶"></a><strong>8. CopyOnWriteArrayList çš„å†™æ—¶å¤åˆ¶</strong></h2><ul><li><strong>åŸç†</strong>ï¼š<ul><li>æ¯æ¬¡å†™æ“ä½œï¼ˆaddã€removeï¼‰éƒ½ä¼šå¤åˆ¶ä¸€ä»½åº•å±‚æ•°ç»„</li><li>è¯»æ“ä½œä¸åŠ é”ï¼Œç›´æ¥è¯»å–æ—§æ•°ç»„</li></ul></li><li><strong>ä¼˜ç‚¹</strong>ï¼š<ul><li>é«˜åº¦å¹¶å‘è¯»æ€§èƒ½</li><li>é¿å… ConcurrentModificationException</li></ul></li><li><strong>ç¼ºç‚¹</strong>ï¼š<ul><li>å†™æ“ä½œæˆæœ¬é«˜ï¼ˆæ•°ç»„å¤åˆ¶ï¼‰</li><li>å†…å­˜å¼€é”€å¤§</li></ul></li><li><strong>åº”ç”¨åœºæ™¯</strong>ï¼š<ul><li>è¯»å¤šå†™å°‘ï¼ˆå¦‚ç›‘å¬å™¨åˆ—è¡¨ã€é…ç½®ç¼“å­˜ï¼‰</li></ul></li></ul><hr><h2 id="9-EnumMap-å’Œ-EnumSet"><a href="#9-EnumMap-å’Œ-EnumSet" class="headerlink" title="9. EnumMap å’Œ EnumSet"></a><strong>9. EnumMap å’Œ EnumSet</strong></h2><ul><li><strong>EnumMap</strong>ï¼š<ul><li>Key æ˜¯æšä¸¾ç±»å‹</li><li>åº•å±‚ä½¿ç”¨æ•°ç»„å­˜å‚¨ï¼Œæ•ˆç‡é«˜</li></ul></li><li><strong>EnumSet</strong>ï¼š<ul><li>å…ƒç´ ä¸ºæšä¸¾</li><li>åº•å±‚ä½¿ç”¨ <strong>ä½å‘é‡(bit vector)</strong> å­˜å‚¨</li></ul></li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>é«˜æ•ˆï¼Œå ç”¨å†…å­˜å°</li><li>éå†é€Ÿåº¦å¿«</li></ul></li><li><strong>åº”ç”¨</strong>ï¼š<ul><li>çŠ¶æ€æœºã€æ ‡å¿—ä½é›†åˆ</li></ul></li></ul><hr><h2 id="10-WeakHashMap-å’Œ-HashMap-çš„åŒºåˆ«"><a href="#10-WeakHashMap-å’Œ-HashMap-çš„åŒºåˆ«" class="headerlink" title="10. WeakHashMap å’Œ HashMap çš„åŒºåˆ«"></a><strong>10. WeakHashMap å’Œ HashMap çš„åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>HashMap</th><th>WeakHashMap</th></tr></thead><tbody><tr><td>Key å¼•ç”¨ç±»å‹</td><td>å¼ºå¼•ç”¨</td><td>å¼±å¼•ç”¨</td></tr><tr><td>GC è¡Œä¸º</td><td>ä¸å—åƒåœ¾å›æ”¶å½±å“</td><td>Key è¢«å›æ”¶æ—¶è‡ªåŠ¨åˆ é™¤ Entry</td></tr><tr><td>ç”¨é€”</td><td>æ™®é€š Map</td><td>ç¼“å­˜ã€å†…å­˜æ•æ„Ÿå¯¹è±¡çš„æ˜ å°„</td></tr><tr><td>é¢è¯•ç‚¹</td><td>WeakHashMap å¦‚ä½•é˜²æ­¢å†…å­˜æ³„æ¼ï¼Ÿ</td><td></td></tr></tbody></table><p><strong>åŸç†</strong>ï¼š</p><ul><li>WeakHashMap çš„ key æ˜¯ <code>WeakReference</code></li><li>å½“ key ä¸å†è¢«å¤–éƒ¨å¼ºå¼•ç”¨æ—¶ï¼Œåƒåœ¾å›æ”¶å™¨å›æ”¶ï¼Œå¹¶é€šè¿‡ ReferenceQueue æ¸…ç† Entry</li></ul><hr><h3 id="å››ã€å¼‚å¸¸-é”™è¯¯å¤„ç†"><a href="#å››ã€å¼‚å¸¸-é”™è¯¯å¤„ç†" class="headerlink" title="å››ã€å¼‚å¸¸ &amp; é”™è¯¯å¤„ç†"></a>å››ã€å¼‚å¸¸ &amp; é”™è¯¯å¤„ç†</h3><hr><h2 id="1-Java-ä¸­çš„å¼‚å¸¸åˆ†ä¸ºå“ªä¸¤å¤§ç±»ï¼Ÿ"><a href="#1-Java-ä¸­çš„å¼‚å¸¸åˆ†ä¸ºå“ªä¸¤å¤§ç±»ï¼Ÿ" class="headerlink" title="1. Java ä¸­çš„å¼‚å¸¸åˆ†ä¸ºå“ªä¸¤å¤§ç±»ï¼Ÿ"></a><strong>1. Java ä¸­çš„å¼‚å¸¸åˆ†ä¸ºå“ªä¸¤å¤§ç±»ï¼Ÿ</strong></h2><ul><li><strong>Errorï¼ˆé”™è¯¯ï¼‰</strong>ï¼š<ul><li>ç³»ç»Ÿçº§é”™è¯¯ï¼Œé€šå¸¸æ— æ³•æ¢å¤</li><li>ä¾‹å­ï¼š<code>OutOfMemoryError</code>ã€<code>StackOverflowError</code></li><li>ä¸å»ºè®®æ•è·</li></ul></li><li><strong>Exceptionï¼ˆå¼‚å¸¸ï¼‰</strong>ï¼š<ul><li>ç¨‹åºå¯ä»¥æ•è·ã€å¤„ç†</li><li>å­ç±»ï¼š<ol><li><strong>å—æ£€å¼‚å¸¸ï¼ˆCheckedExceptionï¼‰</strong>ï¼šå¿…é¡» try&#x2F;catch æˆ– throws æŠ›å‡º<ul><li>ä¾‹å­ï¼š<code>IOException</code>ã€<code>SQLException</code></li></ul></li><li><strong>éå—æ£€å¼‚å¸¸ï¼ˆUncheckedException &#x2F; RuntimeExceptionï¼‰</strong>ï¼šå¯é€‰æ‹©æ•è·<ul><li>ä¾‹å­ï¼š<code>NullPointerException</code>ã€<code>IllegalArgumentException</code></li></ul></li></ol></li></ul></li></ul><p><strong>é¢è¯•ç‚¹</strong>ï¼š</p><ul><li>Checked vs Unchecked å¼‚å¸¸çš„è®¾è®¡åˆè¡·ï¼š<ul><li>Checked å¼‚å¸¸å¼ºåˆ¶å¤„ç†ï¼Œæé«˜ç¨‹åºå¥å£®æ€§</li><li>RuntimeException ç”¨äºç¼–ç¨‹é”™è¯¯ï¼Œä¸å¿…å¼ºåˆ¶æ•è·</li></ul></li></ul><hr><h2 id="2-Error-å’Œ-Exception-çš„åŒºåˆ«"><a href="#2-Error-å’Œ-Exception-çš„åŒºåˆ«" class="headerlink" title="2. Error å’Œ Exception çš„åŒºåˆ«"></a><strong>2. Error å’Œ Exception çš„åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>Error</th><th>Exception</th></tr></thead><tbody><tr><td>æ˜¯å¦å¯æ¢å¤</td><td>ä¸å¯æ¢å¤</td><td>å¯æ¢å¤ï¼ˆç¨‹åºå¯å¤„ç†ï¼‰</td></tr><tr><td>æ•è·å»ºè®®</td><td>ä¸å»ºè®®æ•è·</td><td>å»ºè®®æ•è·å’Œå¤„ç†</td></tr><tr><td>å­ç±»ç¤ºä¾‹</td><td>OutOfMemoryError</td><td>IOException, SQLException</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>JVM å†…éƒ¨é”™è¯¯</td><td>åº”ç”¨ç¨‹åºå¼‚å¸¸å¤„ç†</td></tr></tbody></table><hr><h2 id="3-å—æ£€å¼‚å¸¸å’Œéå—æ£€å¼‚å¸¸åŒºåˆ«"><a href="#3-å—æ£€å¼‚å¸¸å’Œéå—æ£€å¼‚å¸¸åŒºåˆ«" class="headerlink" title="3. å—æ£€å¼‚å¸¸å’Œéå—æ£€å¼‚å¸¸åŒºåˆ«"></a><strong>3. å—æ£€å¼‚å¸¸å’Œéå—æ£€å¼‚å¸¸åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>CheckedException</th><th>UncheckedException</th></tr></thead><tbody><tr><td>ç¼–è¯‘å™¨æ£€æŸ¥</td><td>ç¼–è¯‘å™¨å¼ºåˆ¶è¦æ±‚å¤„ç†</td><td>ç¼–è¯‘å™¨ä¸è¦æ±‚</td></tr><tr><td>ç»§æ‰¿å…³ç³»</td><td>Exception é™¤ RuntimeException</td><td>RuntimeException å­ç±»</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>å¯æ¢å¤å¼‚å¸¸ï¼Œå¦‚æ–‡ä»¶ä¸å­˜åœ¨</td><td>ç¼–ç¨‹é”™è¯¯ï¼Œå¦‚ç©ºæŒ‡é’ˆ</td></tr></tbody></table><p><strong>é¢è¯•ç‚¹</strong>ï¼š</p><ul><li>Checked å¼‚å¸¸åœ¨ API è®¾è®¡ä¸­å¯æç¤ºè°ƒç”¨è€…</li><li>RuntimeException å¤šç”¨äºç¨‹åºé€»è¾‘é”™è¯¯ï¼Œé˜²æ­¢è¿‡å¤š try&#x2F;catch</li></ul><hr><h2 id="4-throw-å’Œ-throws-çš„åŒºåˆ«"><a href="#4-throw-å’Œ-throws-çš„åŒºåˆ«" class="headerlink" title="4. throw å’Œ throws çš„åŒºåˆ«"></a><strong>4. throw å’Œ throws çš„åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>throw</th><th>throws</th></tr></thead><tbody><tr><td>ä½ç½®</td><td>æ–¹æ³•ä½“å†…</td><td>æ–¹æ³•å£°æ˜ä¸Š</td></tr><tr><td>ç”¨é€”</td><td>æŠ›å‡ºå…·ä½“å¼‚å¸¸å®ä¾‹</td><td>å£°æ˜æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹</td></tr><tr><td>ä¸ªæ•°é™åˆ¶</td><td>ä¸€æ¬¡æŠ›å‡ºä¸€ä¸ª</td><td>å¯å£°æ˜å¤šä¸ªå¼‚å¸¸</td></tr><tr><td>é¢è¯•ç¤ºä¾‹</td><td><code>throw new IOException()</code></td><td><code>void read() throws IOException</code></td></tr></tbody></table><hr><h2 id="5-try-with-resources-çš„åº•å±‚åŸç†"><a href="#5-try-with-resources-çš„åº•å±‚åŸç†" class="headerlink" title="5. try-with-resources çš„åº•å±‚åŸç†"></a><strong>5. try-with-resources çš„åº•å±‚åŸç†</strong></h2><ul><li><p><strong>è¯­æ³•</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;file.txt&quot;</span>))) &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨èµ„æº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>åº•å±‚å®ç°</strong>ï¼š</p><ul><li><p>è‡ªåŠ¨è°ƒç”¨èµ„æºçš„ <code>close()</code> æ–¹æ³•</p></li><li><p>èµ„æºå¿…é¡»å®ç° <strong>AutoCloseable</strong> æ¥å£</p></li><li><p>ç¼–è¯‘å™¨å°†å…¶è½¬æ¢ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;file.txt&quot;</span>));</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨èµ„æº</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (br != <span class="literal">null</span>) br.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>ä¼˜åŠ¿</strong>ï¼š</p><ul><li>è‡ªåŠ¨å…³é—­èµ„æºï¼Œé¿å…èµ„æºæ³„æ¼</li><li>æ”¯æŒå¤šä¸ªèµ„æºå£°æ˜</li></ul></li><li><p><strong>é¢è¯•æ‹“å±•</strong>ï¼šå¤šèµ„æºå…³é—­çš„å¼‚å¸¸æŠ‘åˆ¶æœºåˆ¶ (<code>addSuppressed</code>)</p></li></ul><hr><h2 id="6-è‡ªå®šä¹‰å¼‚å¸¸å¦‚ä½•è®¾è®¡ï¼Ÿç»§æ‰¿å“ªä¸ªç±»"><a href="#6-è‡ªå®šä¹‰å¼‚å¸¸å¦‚ä½•è®¾è®¡ï¼Ÿç»§æ‰¿å“ªä¸ªç±»" class="headerlink" title="6. è‡ªå®šä¹‰å¼‚å¸¸å¦‚ä½•è®¾è®¡ï¼Ÿç»§æ‰¿å“ªä¸ªç±»"></a><strong>6. è‡ªå®šä¹‰å¼‚å¸¸å¦‚ä½•è®¾è®¡ï¼Ÿç»§æ‰¿å“ªä¸ªç±»</strong></h2><ul><li><p><strong>ç»§æ‰¿ RuntimeException</strong>ï¼š</p><ul><li>ç”¨äºéå—æ£€å¼‚å¸¸ï¼ˆç¼–ç¨‹é”™è¯¯ã€ä¸šåŠ¡é€»è¾‘å¼‚å¸¸ï¼‰</li></ul></li><li><p><strong>ç»§æ‰¿ Exception</strong>ï¼š</p><ul><li>ç”¨äºå—æ£€å¼‚å¸¸ï¼ˆéœ€è¦è°ƒç”¨è€…å¤„ç†ï¼‰</li></ul></li><li><p><strong>å®ç°å»ºè®®</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBusinessException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyBusinessException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyBusinessException</span><span class="params">(String message, Throwable cause)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message, cause);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>é¢è¯•ç‚¹</strong>ï¼š</p><ul><li>è‡ªå®šä¹‰å¼‚å¸¸åŠ ä¸Šå¼‚å¸¸é“¾ï¼ˆcauseï¼‰</li><li>è§„èŒƒå¼‚å¸¸ä¿¡æ¯ï¼Œä¾¿äºæ—¥å¿—è¿½è¸ª</li></ul></li></ul><hr><h2 id="7-ä¸ºä»€ä¹ˆä¸å»ºè®®æ•è·-Throwableï¼Ÿ"><a href="#7-ä¸ºä»€ä¹ˆä¸å»ºè®®æ•è·-Throwableï¼Ÿ" class="headerlink" title="7. ä¸ºä»€ä¹ˆä¸å»ºè®®æ•è· Throwableï¼Ÿ"></a><strong>7. ä¸ºä»€ä¹ˆä¸å»ºè®®æ•è· Throwableï¼Ÿ</strong></h2><ul><li>Throwable åŒ…å« Error å’Œ Exception</li><li>æ•è· Throwable ä¼šï¼š<ul><li>æ•è·ç³»ç»Ÿçº§é”™è¯¯ï¼ˆOutOfMemoryErrorï¼‰</li><li>ç ´å JVM æ­£å¸¸å·¥ä½œ</li></ul></li><li><strong>æœ€ä½³å®è·µ</strong>ï¼š<ul><li>åªæ•è·å¯æ¢å¤çš„ Exception æˆ– RuntimeException</li><li>æ•è· Throwable ä»…ç”¨äºæ—¥å¿—æ”¶é›†æˆ–ç›‘æ§</li></ul></li></ul><hr><h2 id="8-å¼‚å¸¸é“¾ï¼ˆException-Chainingï¼‰æ˜¯ä»€ä¹ˆ"><a href="#8-å¼‚å¸¸é“¾ï¼ˆException-Chainingï¼‰æ˜¯ä»€ä¹ˆ" class="headerlink" title="8. å¼‚å¸¸é“¾ï¼ˆException Chainingï¼‰æ˜¯ä»€ä¹ˆ"></a><strong>8. å¼‚å¸¸é“¾ï¼ˆException Chainingï¼‰æ˜¯ä»€ä¹ˆ</strong></h2><ul><li><p><strong>æ¦‚å¿µ</strong>ï¼š</p><ul><li>åœ¨æ•è·ä¸€ä¸ªå¼‚å¸¸æ—¶ï¼Œå°†åŸå¼‚å¸¸å°è£…åœ¨æ–°å¼‚å¸¸ä¸­æŠ›å‡º</li></ul></li><li><p><strong>å®ç°</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    method();</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyBusinessException</span>(<span class="string">&quot;è¯»å–æ–‡ä»¶å¤±è´¥&quot;</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ä¼˜åŠ¿</strong>ï¼š</p><ul><li>ä¿ç•™åŸå§‹å¼‚å¸¸ä¿¡æ¯</li><li>ä¾¿äºè°ƒè¯•å’Œæ—¥å¿—è¿½è¸ª</li></ul></li></ul><hr><h2 id="9-Java-8-ä¹‹åå¯¹å¼‚å¸¸å¤„ç†çš„æ”¹è¿›"><a href="#9-Java-8-ä¹‹åå¯¹å¼‚å¸¸å¤„ç†çš„æ”¹è¿›" class="headerlink" title="9. Java 8 ä¹‹åå¯¹å¼‚å¸¸å¤„ç†çš„æ”¹è¿›"></a><strong>9. Java 8 ä¹‹åå¯¹å¼‚å¸¸å¤„ç†çš„æ”¹è¿›</strong></h2><ul><li><p><strong>Lambda è¡¨è¾¾å¼</strong>ï¼š</p><ul><li>å¯¹å—æ£€å¼‚å¸¸çš„å¤„ç†æ›´åŠ ç®€æ´ï¼Œä½†éœ€è¦ç‰¹æ®Šå¤„ç†</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list.forEach(item -&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123; process(item); &#125;</span><br><span class="line">    <span class="keyword">catch</span>(IOException e) &#123; e.printStackTrace(); &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><strong>Optional &amp; Streams</strong>ï¼š</p><ul><li>é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸</li><li>å¯ä»¥åœ¨ <code>map</code>&#x2F;<code>filter</code> ä¸­å¤„ç†å¼‚å¸¸</li></ul></li><li><p><strong>é¢è¯•æ‹“å±•</strong>ï¼š</p><ul><li>å¼‚å¸¸åœ¨å¹¶è¡Œ Stream ä¸­å¦‚ä½•ä¼ é€’</li><li><code>CompletableFuture</code> å¼‚å¸¸å¤„ç†</li></ul></li></ul><hr><h2 id="10-å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¦‚ä½•æ­£ç¡®ä¼ é€’å¼‚å¸¸"><a href="#10-å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¦‚ä½•æ­£ç¡®ä¼ é€’å¼‚å¸¸" class="headerlink" title="10. å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¦‚ä½•æ­£ç¡®ä¼ é€’å¼‚å¸¸"></a><strong>10. å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¦‚ä½•æ­£ç¡®ä¼ é€’å¼‚å¸¸</strong></h2><ul><li><p><strong>é—®é¢˜</strong>ï¼š</p><ul><li>å­çº¿ç¨‹å¼‚å¸¸ä¸ä¼šç›´æ¥æŠ›ç»™ä¸»çº¿ç¨‹</li></ul></li><li><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li><p><strong>Future &#x2F; Callable</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;?&gt; future = executor.submit(() -&gt; &#123; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;error&quot;</span>); &#125;);</span><br><span class="line">future.get(); <span class="comment">// ä¼šæŠ› ExecutionException</span></span><br></pre></td></tr></table></figure></li><li><p><strong>Thread.UncaughtExceptionHandler</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">thread.setUncaughtExceptionHandler((t, e) -&gt; log.error(<span class="string">&quot;çº¿ç¨‹å¼‚å¸¸&quot;</span>, e));</span><br></pre></td></tr></table></figure></li><li><p><strong>CompletableFuture.exceptionally</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture.runAsync(() -&gt; &#123; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(); &#125;)</span><br><span class="line">                 .exceptionally(ex -&gt; &#123; log.error(ex); <span class="keyword">return</span> <span class="literal">null</span>; &#125;);</span><br></pre></td></tr></table></figure></li></ol></li><li><p><strong>é¢è¯•æ‹“å±•</strong>ï¼š</p><ul><li>å¦‚ä½•å¤„ç†çº¿ç¨‹æ± ä¸­æœªæ•è·å¼‚å¸¸</li><li>å¼‚æ­¥ä»»åŠ¡å¼‚å¸¸é“¾è¿½è¸ª</li></ul></li></ul><hr><h3 id="äº”ã€JVM-å†…å­˜ç®¡ç†"><a href="#äº”ã€JVM-å†…å­˜ç®¡ç†" class="headerlink" title="äº”ã€JVM &amp; å†…å­˜ç®¡ç†"></a>äº”ã€JVM &amp; å†…å­˜ç®¡ç†</h3><hr><h2 id="1-Java-å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-Java-å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. Java å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>1. Java å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><ul><li><strong>å®šä¹‰</strong>ï¼š<ul><li>Java å†…å­˜æ¨¡å‹ï¼ˆJava Memory Modelï¼ŒJMMï¼‰æ˜¯ Java è™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰çš„ä¸€å¥—è§„èŒƒï¼Œç”¨äºæè¿° <strong>Java ç¨‹åºä¸­å„ä¸ªçº¿ç¨‹å¦‚ä½•è®¿é—®å…±äº«å†…å­˜ä»¥åŠå¦‚ä½•ä¿è¯å¯è§æ€§ã€åŸå­æ€§ã€æœ‰åºæ€§</strong>ã€‚</li></ul></li><li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼š<ol><li><strong>è§£å†³å¤šçº¿ç¨‹å¯è§æ€§é—®é¢˜</strong></li><li><strong>è§„å®šå†…å­˜æ“ä½œé¡ºåº</strong>ï¼ˆhappens-before åŸåˆ™ï¼‰</li><li><strong>å®šä¹‰å˜é‡è®¿é—®åŸå­æ€§</strong></li></ol></li><li><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š<ul><li><strong>ä¸»å†…å­˜ï¼ˆMain Memoryï¼‰</strong>ï¼šå…±äº«å˜é‡å­˜å‚¨ä½ç½®</li><li><strong>å·¥ä½œå†…å­˜ï¼ˆWorking Memory &#x2F; Thread Local Cacheï¼‰</strong>ï¼šçº¿ç¨‹ç§æœ‰ç¼“å­˜</li><li><strong>volatileã€synchronizedã€final</strong> çš„è¯­ä¹‰ä¿è¯ä¸åŒå±‚æ¬¡çš„å¯è§æ€§å’ŒåŸå­æ€§</li></ul></li></ul><hr><h2 id="2-JVM-å†…å­˜åˆ†ä¸ºå“ªå‡ ä¸ªåŒºåŸŸï¼Ÿæ¯ä¸ªåŒºåŸŸçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-JVM-å†…å­˜åˆ†ä¸ºå“ªå‡ ä¸ªåŒºåŸŸï¼Ÿæ¯ä¸ªåŒºåŸŸçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. JVM å†…å­˜åˆ†ä¸ºå“ªå‡ ä¸ªåŒºåŸŸï¼Ÿæ¯ä¸ªåŒºåŸŸçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>2. JVM å†…å­˜åˆ†ä¸ºå“ªå‡ ä¸ªåŒºåŸŸï¼Ÿæ¯ä¸ªåŒºåŸŸçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><ol><li><strong>ç¨‹åºè®¡æ•°å™¨ï¼ˆPC Registerï¼‰</strong><ul><li>æ¯ä¸ªçº¿ç¨‹ç§æœ‰</li><li>ä¿å­˜å½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€</li><li>æ”¯æŒçº¿ç¨‹åˆ‡æ¢å’Œæ–¹æ³•è°ƒç”¨è¿”å›</li></ul></li><li><strong>è™šæ‹Ÿæœºæ ˆï¼ˆStackï¼‰</strong><ul><li>æ¯ä¸ªçº¿ç¨‹ç§æœ‰</li><li>å­˜å‚¨å±€éƒ¨å˜é‡ã€æ“ä½œæ ˆã€åŠ¨æ€é“¾æ¥ä¿¡æ¯ã€æ–¹æ³•å‡ºå£</li><li>æ ˆå¸§ï¼šæ–¹æ³•æ‰§è¡Œçš„æœ€å°å•ä½</li><li>å¼‚å¸¸ï¼šStackOverflowError</li></ul></li><li><strong>æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰</strong><ul><li>JVM è°ƒç”¨æœ¬åœ°æ–¹æ³•ï¼ˆC&#x2F;C++å®ç°ï¼‰ä½¿ç”¨</li><li>HotSpot é€šå¸¸ä¸è™šæ‹Ÿæœºæ ˆåˆå¹¶</li></ul></li><li><strong>å †ï¼ˆHeapï¼‰</strong><ul><li>æ‰€æœ‰çº¿ç¨‹å…±äº«</li><li>å­˜å‚¨å¯¹è±¡å®ä¾‹åŠæ•°ç»„</li><li>åƒåœ¾æ”¶é›†çš„ä¸»è¦åŒºåŸŸ</li><li>å­åŒºåŸŸï¼š<ul><li><strong>å¹´è½»ä»£ï¼ˆYoung Generationï¼‰</strong>ï¼šEden + Survivor0 + Survivor1</li><li><strong>è€å¹´ä»£ï¼ˆOld Generationï¼‰</strong></li><li><strong>å…ƒç©ºé—´ï¼ˆMetaspace &#x2F; æ–¹æ³•åŒºï¼‰</strong>ï¼šå­˜æ”¾ç±»å…ƒä¿¡æ¯</li></ul></li></ul></li><li><strong>æ–¹æ³•åŒºï¼ˆMetaspace &#x2F; ä»¥å‰ç§°ä¸º PermGenï¼‰</strong><ul><li>å­˜å‚¨ç±»ä¿¡æ¯ã€å¸¸é‡æ± ã€é™æ€å˜é‡</li><li>Metaspace ä»æœ¬åœ°å†…å­˜åˆ†é…ï¼ˆä¸å†å— JVM å †å¤§å°é™åˆ¶ï¼‰</li></ul></li><li><strong>è¿è¡Œæ—¶å¸¸é‡æ± </strong><ul><li>ç±»åŠ è½½æ—¶ç”Ÿæˆ</li><li>å­˜æ”¾å­—é¢é‡ã€ç¬¦å·å¼•ç”¨ã€å­—ç¬¦ä¸²å¸¸é‡ç­‰</li></ul></li></ol><hr><h2 id="3-ä¸ºä»€ä¹ˆ-String-å¸¸é‡æ± è¦æ”¾åœ¨å †é‡Œè€Œä¸æ˜¯æ–¹æ³•åŒºï¼Ÿ"><a href="#3-ä¸ºä»€ä¹ˆ-String-å¸¸é‡æ± è¦æ”¾åœ¨å †é‡Œè€Œä¸æ˜¯æ–¹æ³•åŒºï¼Ÿ" class="headerlink" title="3. ä¸ºä»€ä¹ˆ String å¸¸é‡æ± è¦æ”¾åœ¨å †é‡Œè€Œä¸æ˜¯æ–¹æ³•åŒºï¼Ÿ"></a><strong>3. ä¸ºä»€ä¹ˆ String å¸¸é‡æ± è¦æ”¾åœ¨å †é‡Œè€Œä¸æ˜¯æ–¹æ³•åŒºï¼Ÿ</strong></h2><ul><li><strong>å†å²åŸå› </strong>ï¼š<ul><li>JDK 1.6 åŠä»¥å‰ï¼šå­—ç¬¦ä¸²å¸¸é‡æ± åœ¨æ°¸ä¹…ä»£ï¼ˆPermGenï¼‰ï¼Œæ˜“å¯¼è‡´ OOM</li></ul></li><li><strong>ç°ä»£å®ç°</strong>ï¼š<ul><li>JDK 7+ å°†å¸¸é‡æ± ç§»åˆ°å †</li></ul></li><li><strong>ä¼˜åŠ¿</strong>ï¼š<ol><li>åƒåœ¾å›æ”¶å¯ç®¡ç†</li><li>å†…å­˜åˆ†é…çµæ´»ï¼Œé¿å…æ–¹æ³•åŒºæº¢å‡º</li><li>å¤šçº¿ç¨‹è®¿é—®å®‰å…¨æ€§æå‡ï¼ˆä¸å †å¯¹è±¡ GC åŒæ­¥ï¼‰</li></ol></li></ul><hr><h2 id="4-ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶ï¼ˆGCï¼‰çš„å¯è¾¾æ€§åˆ†æç®—æ³•ï¼Ÿ"><a href="#4-ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶ï¼ˆGCï¼‰çš„å¯è¾¾æ€§åˆ†æç®—æ³•ï¼Ÿ" class="headerlink" title="4. ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶ï¼ˆGCï¼‰çš„å¯è¾¾æ€§åˆ†æç®—æ³•ï¼Ÿ"></a><strong>4. ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶ï¼ˆGCï¼‰çš„å¯è¾¾æ€§åˆ†æç®—æ³•ï¼Ÿ</strong></h2><ul><li><p><strong>å¯è¾¾æ€§åˆ†æï¼ˆReachability Analysisï¼‰</strong>ï¼š</p><ul><li>ä» <strong>GC Roots</strong> å¼€å§‹ï¼Œé€šè¿‡å¼•ç”¨é“¾åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯è¾¾</li><li><strong>ä¸å¯è¾¾å¯¹è±¡</strong>å³ä¸ºåƒåœ¾ï¼Œå¯ä»¥å›æ”¶</li></ul></li><li><p><strong>ç¤ºæ„</strong>ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GC Roots</span><br><span class="line">   |</span><br><span class="line">   v</span><br><span class="line">Object A --&gt; Object B</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœ Object B æ— æ³•é€šè¿‡ GC Roots è®¿é—®ï¼Œåˆ™è¢«å›æ”¶</li></ul></li></ul><hr><h2 id="5-å“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸º-GC-Rootsï¼Ÿ"><a href="#5-å“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸º-GC-Rootsï¼Ÿ" class="headerlink" title="5. å“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸º GC Rootsï¼Ÿ"></a><strong>5. å“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸º GC Rootsï¼Ÿ</strong></h2><p>å¸¸è§ GC Rootsï¼š</p><ol><li><strong>è™šæ‹Ÿæœºæ ˆä¸­çš„å¼•ç”¨</strong>ï¼ˆå±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°ï¼‰</li><li><strong>é™æ€å˜é‡</strong>ï¼ˆç±»é™æ€æˆå‘˜ï¼‰</li><li><strong>å¸¸é‡å¼•ç”¨</strong>ï¼ˆå¸¸é‡æ± å¼•ç”¨ï¼‰</li><li><strong>JNI å¼•ç”¨</strong>ï¼ˆæœ¬åœ°æ–¹æ³•æ ˆä¸­çš„å¼•ç”¨ï¼‰</li></ol><hr><h2 id="6-å¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨çš„åŒºåˆ«"><a href="#6-å¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨çš„åŒºåˆ«" class="headerlink" title="6. å¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨çš„åŒºåˆ«"></a><strong>6. å¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨çš„åŒºåˆ«</strong></h2><table><thead><tr><th>ç±»å‹</th><th>ç‰¹ç‚¹</th><th>GC è¡Œä¸º</th><th>é¢è¯•åº”ç”¨</th></tr></thead><tbody><tr><td>å¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰</td><td>æ™®é€šå¯¹è±¡å¼•ç”¨</td><td>ä¸å¯å›æ”¶</td><td>æ™®é€šå¯¹è±¡</td></tr><tr><td>è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰</td><td>é€šè¿‡ SoftReference å¼•ç”¨</td><td>å†…å­˜ä¸è¶³æ—¶å›æ”¶</td><td>ç¼“å­˜ï¼ˆMemory-sensitive cacheï¼‰</td></tr><tr><td>å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰</td><td>WeakReference å¼•ç”¨</td><td>GC æ—¶ç«‹å³å›æ”¶</td><td>ThreadLocal æ¸…ç†ã€ç¼“å­˜</td></tr><tr><td>è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰</td><td>PhantomReference å¼•ç”¨</td><td>ä»…åšå¼•ç”¨é˜Ÿåˆ—é€šçŸ¥</td><td>å¯¹è±¡å›æ”¶å‰åšæ¸…ç†ã€èµ„æºé‡Šæ”¾</td></tr></tbody></table><hr><h2 id="7-GC-ç®—æ³•"><a href="#7-GC-ç®—æ³•" class="headerlink" title="7. GC ç®—æ³•"></a><strong>7. GC ç®—æ³•</strong></h2><ol><li><strong>æ ‡è®°-æ¸…é™¤ï¼ˆMark-Sweepï¼‰</strong><ul><li>æ ‡è®°å¯è¾¾å¯¹è±¡ï¼Œæ¸…é™¤æœªæ ‡è®°å¯¹è±¡</li><li>ä¼˜ç‚¹ï¼šç®€å•</li><li>ç¼ºç‚¹ï¼šäº§ç”Ÿç¢ç‰‡</li></ul></li><li><strong>æ ‡è®°-æ•´ç†ï¼ˆMark-Compactï¼‰</strong><ul><li>æ ‡è®°å¯è¾¾å¯¹è±¡</li><li>å°†å­˜æ´»å¯¹è±¡ç§»åŠ¨åˆ°ä¸€ç«¯</li><li>ä¼˜ç‚¹ï¼šè§£å†³ç¢ç‰‡é—®é¢˜</li><li>ç¼ºç‚¹ï¼šç§»åŠ¨å¯¹è±¡æˆæœ¬é«˜</li></ul></li><li><strong>å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰</strong><ul><li>å°†å†…å­˜åˆ†ä¸ºä¸¤å—</li><li>å°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ï¼Œæ¸…ç†æ—§å—</li><li>ä¼˜ç‚¹ï¼šåˆ†é…å¿«ï¼Œæ•´ç†å¿«</li><li>ç¼ºç‚¹ï¼šå†…å­˜åˆ©ç”¨ç‡ä½</li></ul></li></ol><hr><h2 id="8-å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨"><a href="#8-å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="8. å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨"></a><strong>8. å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨</strong></h2><table><thead><tr><th>åƒåœ¾æ”¶é›†å™¨</th><th>é€‚ç”¨åœºæ™¯</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>Serial GC</td><td>å•æ ¸</td><td>STW ä¸²è¡Œï¼Œç®€å•ã€é«˜ååé‡ä½</td></tr><tr><td>Parallel GC</td><td>å¤šæ ¸</td><td>å¹¶è¡Œå›æ”¶å¹´è½»ä»£ï¼Œé«˜ååé‡</td></tr><tr><td>CMS GC</td><td>å¤šæ ¸</td><td>å¹¶å‘å›æ”¶è€å¹´ä»£ï¼Œå‡å°‘ STW</td></tr><tr><td>G1 GC</td><td>å¤§å †</td><td>åˆ†åŒºå›æ”¶ï¼Œä½å»¶è¿Ÿï¼Œé¢„æµ‹åœé¡¿</td></tr><tr><td>ZGC</td><td>è¶…å¤§å †</td><td>å¹¶å‘æ ‡è®°-æ¸…ç†ï¼Œä½å»¶è¿Ÿ</td></tr><tr><td>Shenandoah</td><td>å¤§å †</td><td>å¹¶å‘æ ‡è®°-æ•´ç†ï¼Œå‡å°‘ STW</td></tr></tbody></table><hr><h2 id="9-ä»€ä¹ˆæ˜¯-Stop-The-World-STW-ï¼Ÿ"><a href="#9-ä»€ä¹ˆæ˜¯-Stop-The-World-STW-ï¼Ÿ" class="headerlink" title="9. ä»€ä¹ˆæ˜¯ Stop-The-World (STW)ï¼Ÿ"></a><strong>9. ä»€ä¹ˆæ˜¯ Stop-The-World (STW)ï¼Ÿ</strong></h2><ul><li><strong>å®šä¹‰</strong>ï¼šJVM æš‚åœæ‰€æœ‰åº”ç”¨çº¿ç¨‹æ‰§è¡Œï¼Œä¸“é—¨è¿›è¡Œ GC</li><li><strong>åŸå› </strong>ï¼š<ul><li>é˜²æ­¢å¯¹è±¡è¢«ä¿®æ”¹å¯¼è‡´å›æ”¶é”™è¯¯</li></ul></li><li><strong>é¢è¯•æ‹“å±•</strong>ï¼š<ul><li>G1&#x2F;ZGC&#x2F;Shenandoah å°½é‡ç¼©çŸ­ STW æ—¶é—´</li><li>å¹¶å‘ GC ä¸ STW çš„æŠ˜ä¸­</li></ul></li></ul><hr><h2 id="10-JVM-è°ƒä¼˜å¸¸è§å‚æ•°"><a href="#10-JVM-è°ƒä¼˜å¸¸è§å‚æ•°" class="headerlink" title="10. JVM è°ƒä¼˜å¸¸è§å‚æ•°"></a><strong>10. JVM è°ƒä¼˜å¸¸è§å‚æ•°</strong></h2><table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>-Xmx</code></td><td>æœ€å¤§å †å¤§å°</td></tr><tr><td><code>-Xms</code></td><td>åˆå§‹å †å¤§å°</td></tr><tr><td><code>-Xmn</code></td><td>å¹´è½»ä»£å¤§å°</td></tr><tr><td><code>-XX:SurvivorRatio</code></td><td>Eden&#x2F;Survivor æ¯”ä¾‹</td></tr><tr><td><code>-XX:+UseG1GC</code></td><td>ä½¿ç”¨ G1 GC</td></tr><tr><td><code>-XX:MaxGCPauseMillis</code></td><td>æœ€å¤§åœé¡¿æ—¶é—´</td></tr><tr><td><code>-XX:+PrintGCDetails</code></td><td>æ‰“å° GC æ—¥å¿—</td></tr><tr><td><code>-XX:+HeapDumpOnOutOfMemoryError</code></td><td>OOM æ—¶ç”Ÿæˆå †è½¬å‚¨</td></tr></tbody></table><p><strong>é¢è¯•æ‹“å±•</strong>ï¼š</p><ul><li>å¦‚ä½•è°ƒä¼˜è€å¹´ä»£å’Œå¹´è½»ä»£æ¯”ä¾‹ï¼Ÿ</li><li>GC æ—¥å¿—åˆ†æç¤ºä¾‹ï¼šå¹´è½»ä»£æ»¡ã€è€å¹´ä»£æ™‹å‡ã€STW åœé¡¿</li></ul><hr><h3 id="å…­ã€å¹¶å‘ç¼–ç¨‹åŸºç¡€"><a href="#å…­ã€å¹¶å‘ç¼–ç¨‹åŸºç¡€" class="headerlink" title="å…­ã€å¹¶å‘ç¼–ç¨‹åŸºç¡€"></a>å…­ã€å¹¶å‘ç¼–ç¨‹åŸºç¡€</h3><hr><h2 id="1-Java-ä¸­çš„-volatile-å…³é”®å­—çš„åº•å±‚å®ç°åŸç†"><a href="#1-Java-ä¸­çš„-volatile-å…³é”®å­—çš„åº•å±‚å®ç°åŸç†" class="headerlink" title="1. Java ä¸­çš„ volatile å…³é”®å­—çš„åº•å±‚å®ç°åŸç†"></a><strong>1. Java ä¸­çš„ volatile å…³é”®å­—çš„åº•å±‚å®ç°åŸç†</strong></h2><ul><li><strong>ä½œç”¨</strong>ï¼š<ol><li><strong>ä¿è¯å¯è§æ€§</strong>ï¼šä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å˜é‡åï¼Œå…¶ä»–çº¿ç¨‹ç«‹å³å¯è§</li><li><strong>ç¦æ­¢æŒ‡ä»¤é‡æ’</strong>ï¼šä¿è¯é¡ºåºæ€§</li></ol></li><li><strong>åŸç†</strong>ï¼š<ul><li>åº•å±‚é€šè¿‡ <strong>å†…å­˜å±éšœï¼ˆMemory Barrier &#x2F; Fenceï¼‰</strong> å®ç°</li><li><code>volatile</code> è¯»æ“ä½œï¼š<ul><li>åŠ è½½å±éšœï¼ˆLoadLoad + LoadStoreï¼‰</li></ul></li><li><code>volatile</code> å†™æ“ä½œï¼š<ul><li>å†™å±éšœï¼ˆStoreStore + StoreLoadï¼‰</li></ul></li></ul></li><li><strong>æ³¨æ„</strong>ï¼š<ul><li>ä¸èƒ½ä¿è¯ <strong>åŸå­æ€§</strong></li><li>é€‚åˆ <strong>çŠ¶æ€æ ‡è¯†ã€å¼€å…³å˜é‡</strong></li></ul></li></ul><hr><h2 id="2-synchronized-çš„å®ç°åŸç†"><a href="#2-synchronized-çš„å®ç°åŸç†" class="headerlink" title="2. synchronized çš„å®ç°åŸç†"></a><strong>2. synchronized çš„å®ç°åŸç†</strong></h2><ul><li><strong>ä½œç”¨</strong>ï¼š<ul><li>ä¿è¯ <strong>äº’æ–¥è®¿é—®</strong></li><li>ä¿è¯ <strong>å¯è§æ€§</strong></li></ul></li><li><strong>åº•å±‚æœºåˆ¶</strong>ï¼š<ul><li>Java å¯¹è±¡å¤´åŒ…å« <strong>Mark Word</strong></li><li>æ¯ä¸ªå¯¹è±¡å¯ä»¥å…³è”ä¸€ä¸ª <strong>Monitor</strong></li><li><strong>Monitor</strong> ç”¨äºç®¡ç†çº¿ç¨‹çš„åŠ é”ã€é˜»å¡ã€å”¤é†’</li></ul></li><li><strong>é”å‡çº§æµç¨‹</strong>ï¼š<ol><li><strong>åå‘é”</strong>ï¼ˆé»˜è®¤è½»é‡çº§çº¿ç¨‹æ— ç«äº‰ï¼‰</li><li><strong>è½»é‡çº§é”</strong>ï¼ˆCAS ç«äº‰ï¼Œè†¨èƒ€å‰ï¼‰</li><li><strong>é‡é‡çº§é”</strong>ï¼ˆé”è†¨èƒ€ï¼Œé˜»å¡å…¶ä»–çº¿ç¨‹ï¼‰</li></ol></li></ul><hr><h2 id="3-åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”"><a href="#3-åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”" class="headerlink" title="3. åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”"></a><strong>3. åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”</strong></h2><table><thead><tr><th>é”ç±»å‹</th><th>é€‚ç”¨åœºæ™¯</th><th>å®ç°æ–¹å¼</th><th>ä¼˜ç¼ºç‚¹</th></tr></thead><tbody><tr><td>åå‘é”</td><td>å•çº¿ç¨‹</td><td>åœ¨å¯¹è±¡å¤´æ ‡è®°çº¿ç¨‹ ID</td><td>å‡å°‘æ— ç«äº‰å¼€é”€</td></tr><tr><td>è½»é‡çº§é”</td><td>å¤šçº¿ç¨‹ç«äº‰è½»é‡</td><td>CAS è‡ªæ—‹ + æ ˆè®°å½•é”</td><td>é«˜æ•ˆï¼Œé¿å…é˜»å¡</td></tr><tr><td>é‡é‡çº§é”</td><td>å¤šçº¿ç¨‹ç«äº‰ä¸¥é‡</td><td>Monitor + é˜»å¡</td><td>å¼€é”€å¤§ï¼Œå¯èƒ½ STW</td></tr></tbody></table><p><strong>é¢è¯•æ‹“å±•</strong>ï¼š</p><ul><li>å¦‚ä½•é€šè¿‡ <code>-XX:+PrintFlagsFinal</code> æŸ¥çœ‹é”æ ‡å¿—ä½</li><li>åå‘é”é»˜è®¤å»¶è¿Ÿ 4 ç§’å¯ç”¨</li></ul><hr><h2 id="4-ä»€ä¹ˆæ˜¯-CAS-æ“ä½œï¼ŸABA-é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ"><a href="#4-ä»€ä¹ˆæ˜¯-CAS-æ“ä½œï¼ŸABA-é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="4. ä»€ä¹ˆæ˜¯ CAS æ“ä½œï¼ŸABA é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ"></a><strong>4. ä»€ä¹ˆæ˜¯ CAS æ“ä½œï¼ŸABA é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ</strong></h2><ul><li><p><strong>CASï¼ˆCompare-And-Swapï¼‰</strong>ï¼š</p><ul><li>åŸå­æ“ä½œ</li><li>æ¯”è¾ƒå†…å­˜å€¼æ˜¯å¦ä¸ºé¢„æœŸå€¼ï¼Œå¦‚æœæ˜¯å°±æ›´æ–°</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CAS(V, A, B)</span><br></pre></td></tr></table></figure></li><li><p><strong>ABA é—®é¢˜</strong>ï¼š</p><ul><li>å€¼å…ˆä» A æ”¹æˆ Bï¼Œåˆæ”¹å› A</li><li>CAS æ— æ³•æ£€æµ‹å˜åŒ–ï¼Œå¯èƒ½å‡ºé”™</li></ul></li><li><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li><strong>ç‰ˆæœ¬å·æœºåˆ¶</strong>ï¼ˆAtomicStampedReferenceï¼‰</li><li><strong>åŠ é”</strong></li></ol></li></ul><hr><h2 id="5-ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿä¸¾ä¾‹çº¿ç¨‹å®‰å…¨ç±»"><a href="#5-ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿä¸¾ä¾‹çº¿ç¨‹å®‰å…¨ç±»" class="headerlink" title="5. ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿä¸¾ä¾‹çº¿ç¨‹å®‰å…¨ç±»"></a><strong>5. ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿä¸¾ä¾‹çº¿ç¨‹å®‰å…¨ç±»</strong></h2><ul><li><strong>å®šä¹‰</strong>ï¼šå¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¸ä¼šç ´åå¯¹è±¡çš„çŠ¶æ€ï¼Œå¹¶ä¿è¯æ­£ç¡®æ€§</li><li><strong>çº¿ç¨‹å®‰å…¨ç±»ç¤ºä¾‹</strong>ï¼š<ul><li>é›†åˆç±»ï¼š<code>Vector</code>, <code>ConcurrentHashMap</code>, <code>CopyOnWriteArrayList</code></li><li>åŸå­ç±»ï¼š<code>AtomicInteger</code>, <code>AtomicReference</code></li><li>å·¥å…·ç±»ï¼š<code>ThreadLocal</code>, <code>BlockingQueue</code></li></ul></li></ul><hr><h2 id="6-ThreadLocal-çš„åº•å±‚åŸç†ä¸å†…å­˜æ³„æ¼é—®é¢˜"><a href="#6-ThreadLocal-çš„åº•å±‚åŸç†ä¸å†…å­˜æ³„æ¼é—®é¢˜" class="headerlink" title="6. ThreadLocal çš„åº•å±‚åŸç†ä¸å†…å­˜æ³„æ¼é—®é¢˜"></a><strong>6. ThreadLocal çš„åº•å±‚åŸç†ä¸å†…å­˜æ³„æ¼é—®é¢˜</strong></h2><ul><li><strong>åŸç†</strong>ï¼š<ul><li>æ¯ä¸ªçº¿ç¨‹ç»´æŠ¤ä¸€ä¸ª <code>ThreadLocalMap</code></li><li>key æ˜¯ <strong>ThreadLocal å¯¹è±¡</strong></li><li>value æ˜¯å¯¹åº”çš„å€¼</li></ul></li><li><strong>å†…å­˜æ³„æ¼åŸå› </strong>ï¼š<ul><li>ThreadLocalMap çš„ key æ˜¯ <strong>å¼±å¼•ç”¨</strong></li><li>å¦‚æœ ThreadLocal å¯¹è±¡è¢«å›æ”¶ï¼Œä½†çº¿ç¨‹ä»å­˜æ´»ï¼Œvalue ä»ç„¶å­˜åœ¨</li></ul></li><li><strong>è§£å†³æ–¹æ³•</strong>ï¼š<ul><li>ä½¿ç”¨ <code>remove()</code> æ–¹æ³•</li><li>é¿å…é•¿ç”Ÿå‘½å‘¨æœŸçº¿ç¨‹å­˜å‚¨å¤§é‡ ThreadLocal</li></ul></li></ul><hr><h2 id="7-çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°"><a href="#7-çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°" class="headerlink" title="7. çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°"></a><strong>7. çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°</strong></h2><table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>corePoolSize</td><td>æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå¸¸é©»çº¿ç¨‹</td></tr><tr><td>maximumPoolSize</td><td>æœ€å¤§çº¿ç¨‹æ•°</td></tr><tr><td>keepAliveTime</td><td>éæ ¸å¿ƒçº¿ç¨‹ç©ºé—²å­˜æ´»æ—¶é—´</td></tr><tr><td>workQueue</td><td>ç­‰å¾…é˜Ÿåˆ—ï¼Œç”¨äºå­˜æ”¾ä»»åŠ¡</td></tr><tr><td>threadFactory</td><td>çº¿ç¨‹åˆ›å»ºå·¥å‚</td></tr><tr><td>RejectedExecutionHandler</td><td>æ‹’ç»ç­–ç•¥</td></tr></tbody></table><hr><h2 id="8-ä»€ä¹ˆæ˜¯æ‹’ç»ç­–ç•¥"><a href="#8-ä»€ä¹ˆæ˜¯æ‹’ç»ç­–ç•¥" class="headerlink" title="8. ä»€ä¹ˆæ˜¯æ‹’ç»ç­–ç•¥"></a><strong>8. ä»€ä¹ˆæ˜¯æ‹’ç»ç­–ç•¥</strong></h2><ul><li><strong>è§¦å‘åœºæ™¯</strong>ï¼šçº¿ç¨‹æ± æ»¡äº†ï¼Œé˜Ÿåˆ—æ»¡äº†</li><li><strong>å¸¸è§ç­–ç•¥</strong>ï¼š<ol><li><strong>AbortPolicy</strong>ï¼šæŠ›å¼‚å¸¸ï¼Œé»˜è®¤</li><li><strong>CallerRunsPolicy</strong>ï¼šç”±è°ƒç”¨çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</li><li><strong>DiscardPolicy</strong>ï¼šç›´æ¥ä¸¢å¼ƒä»»åŠ¡</li><li><strong>DiscardOldestPolicy</strong>ï¼šä¸¢å¼ƒé˜Ÿåˆ—ä¸­æœ€æ—§ä»»åŠ¡</li></ol></li></ul><hr><h2 id="9-Executors-æä¾›çš„å¸¸è§çº¿ç¨‹æ± "><a href="#9-Executors-æä¾›çš„å¸¸è§çº¿ç¨‹æ± " class="headerlink" title="9. Executors æä¾›çš„å¸¸è§çº¿ç¨‹æ± "></a><strong>9. Executors æä¾›çš„å¸¸è§çº¿ç¨‹æ± </strong></h2><table><thead><tr><th>çº¿ç¨‹æ± ç±»å‹</th><th>ç‰¹ç‚¹</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>FixedThreadPool</td><td>å›ºå®šçº¿ç¨‹æ•°</td><td>CPUå¯†é›†å‹ä»»åŠ¡</td></tr><tr><td>CachedThreadPool</td><td>å¯æ‰©å®¹çº¿ç¨‹æ± </td><td>çŸ­ç”Ÿå‘½å‘¨æœŸä»»åŠ¡</td></tr><tr><td>SingleThreadExecutor</td><td>å•çº¿ç¨‹é¡ºåºæ‰§è¡Œ</td><td>é¡ºåºä»»åŠ¡</td></tr><tr><td>ScheduledThreadPool</td><td>æ”¯æŒå®šæ—¶&#x2F;å‘¨æœŸæ‰§è¡Œ</td><td>å®šæ—¶ä»»åŠ¡</td></tr></tbody></table><p><strong>é¢è¯•æ‹“å±•</strong>ï¼š</p><ul><li>Executors.newFixedThreadPool ä¼šä½¿ç”¨ <strong>LinkedBlockingQueue</strong></li><li>CachedThreadPool ä½¿ç”¨ <strong>SynchronousQueue</strong>ï¼Œä»»åŠ¡ç›´æ¥äº¤ç»™çº¿ç¨‹</li></ul><hr><h2 id="10-Future-å’Œ-CompletableFuture-åŒºåˆ«"><a href="#10-Future-å’Œ-CompletableFuture-åŒºåˆ«" class="headerlink" title="10. Future å’Œ CompletableFuture åŒºåˆ«"></a><strong>10. Future å’Œ CompletableFuture åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>Future</th><th>CompletableFuture</th></tr></thead><tbody><tr><td>å¼‚æ­¥</td><td>æäº¤ä»»åŠ¡åå¯é˜»å¡è·å–ç»“æœ</td><td>å¯é“¾å¼å¼‚æ­¥æ“ä½œ</td></tr><tr><td>API</td><td>get() é˜»å¡</td><td>thenApply, thenAccept ç­‰é“¾å¼</td></tr><tr><td>å¼‚å¸¸å¤„ç†</td><td>é˜»å¡å¼ï¼Œæ•è· ExecutionException</td><td>æ”¯æŒ exceptionally&#x2F;handle</td></tr><tr><td>ç»„åˆä»»åŠ¡</td><td>ç»„åˆå›°éš¾</td><td>æ”¯æŒ allOf &#x2F; anyOf &#x2F; thenCombine</td></tr></tbody></table><p><strong>é¢è¯•ç‚¹</strong>ï¼š</p><ul><li>CompletableFuture é€‚åˆå¤šå¼‚æ­¥ä»»åŠ¡ç»„åˆ</li><li>FutureTask å¯ä½œä¸º Future çš„å®ç°ç±»</li></ul><hr><h3 id="ä¸ƒã€ç¼–è¯‘-è¿è¡Œæ—¶"><a href="#ä¸ƒã€ç¼–è¯‘-è¿è¡Œæ—¶" class="headerlink" title="ä¸ƒã€ç¼–è¯‘ &amp; è¿è¡Œæ—¶"></a>ä¸ƒã€ç¼–è¯‘ &amp; è¿è¡Œæ—¶</h3><hr><h2 id="1-Java-çš„åå°„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿåº•å±‚åŸç†ï¼Ÿ"><a href="#1-Java-çš„åå°„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿåº•å±‚åŸç†ï¼Ÿ" class="headerlink" title="1. Java çš„åå°„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿåº•å±‚åŸç†ï¼Ÿ"></a><strong>1. Java çš„åå°„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿåº•å±‚åŸç†ï¼Ÿ</strong></h2><ul><li><p><strong>æ¦‚å¿µ</strong>ï¼š</p><ul><li>åå°„æœºåˆ¶å…è®¸åœ¨è¿è¡Œæ—¶ <strong>è·å–ç±»çš„ä¿¡æ¯ã€å®ä¾‹åŒ–å¯¹è±¡ã€è®¿é—®å­—æ®µå’Œæ–¹æ³•</strong>ï¼Œè€Œä¸éœ€è¦åœ¨ç¼–è¯‘æœŸçŸ¥é“å…·ä½“ç±»å‹</li></ul></li><li><p><strong>å¸¸ç”¨ API</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;com.example.User&quot;</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> clazz.newInstance();</span><br><span class="line"><span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;sayHello&quot;</span>, String.class);</span><br><span class="line">method.invoke(obj, <span class="string">&quot;world&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p><strong>åº•å±‚åŸç†</strong>ï¼š</p><ul><li>JVM ä¸­ç±»å¯¹è±¡ <code>Class</code> å¯¹åº”å†…å­˜ä¸­çš„å…ƒæ•°æ®ï¼ˆæ–¹æ³•è¡¨ã€å­—æ®µè¡¨ã€å¸¸é‡æ± ï¼‰</li><li>é€šè¿‡ <strong>Native æ–¹æ³•</strong> è°ƒç”¨ï¼Œè®¿é—®ç±»çš„å…ƒæ•°æ®å’Œå¯¹è±¡å®ä¾‹</li></ul></li><li><p><strong>é¢è¯•æ‹“å±•</strong>ï¼š</p><ul><li>åå°„å¯è®¿é—®ç§æœ‰å­—æ®µ&#x2F;æ–¹æ³•ï¼ˆ<code>setAccessible(true)</code>ï¼‰</li><li>åå°„é€‚ç”¨äºæ¡†æ¶ï¼ˆSpringã€MyBatisï¼‰</li></ul></li></ul><hr><h2 id="2-ä¸ºä»€ä¹ˆåå°„æ€§èƒ½å·®ï¼ŸJDK-9-ä¹‹åå¦‚ä½•ä¼˜åŒ–ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆåå°„æ€§èƒ½å·®ï¼ŸJDK-9-ä¹‹åå¦‚ä½•ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆåå°„æ€§èƒ½å·®ï¼ŸJDK 9 ä¹‹åå¦‚ä½•ä¼˜åŒ–ï¼Ÿ"></a><strong>2. ä¸ºä»€ä¹ˆåå°„æ€§èƒ½å·®ï¼ŸJDK 9 ä¹‹åå¦‚ä½•ä¼˜åŒ–ï¼Ÿ</strong></h2><ul><li><strong>æ€§èƒ½å·®åŸå› </strong>ï¼š<ol><li>æ¯æ¬¡è®¿é—®æ–¹æ³•&#x2F;å­—æ®µéƒ½è¦è¿›è¡ŒåŠ¨æ€è§£æ</li><li>JVM æ— æ³•åšå†…è”ä¼˜åŒ–ï¼ˆæ–¹æ³•è°ƒç”¨ä¸æ˜¯é™æ€ç»‘å®šï¼‰</li><li>éœ€è¦æ£€æŸ¥æƒé™ã€ç±»å‹è½¬æ¢</li></ol></li><li><strong>ä¼˜åŒ–æªæ–½</strong>ï¼š<ul><li><strong>JDK 7 åŠä»¥å</strong>ï¼š<code>MethodHandle</code> å’Œ <code>invokeDynamic</code></li><li><strong>JDK 9+</strong>ï¼šå¢å¼ºæ¨¡å—åŒ–ï¼ˆæ¨¡å—è¾¹ç•Œæ£€æŸ¥ä¼˜åŒ–ï¼‰</li><li><strong>çƒ­ç‚¹ç¼–è¯‘å™¨ JIT</strong> å¯ä»¥å¯¹åå°„è°ƒç”¨åšå†…è”</li></ul></li></ul><hr><h2 id="3-ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼ŸJDK-åŠ¨æ€ä»£ç†å’Œ-CGLIB-åŒºåˆ«ï¼Ÿ"><a href="#3-ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼ŸJDK-åŠ¨æ€ä»£ç†å’Œ-CGLIB-åŒºåˆ«ï¼Ÿ" class="headerlink" title="3. ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼ŸJDK åŠ¨æ€ä»£ç†å’Œ CGLIB åŒºåˆ«ï¼Ÿ"></a><strong>3. ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼ŸJDK åŠ¨æ€ä»£ç†å’Œ CGLIB åŒºåˆ«ï¼Ÿ</strong></h2><ul><li><p><strong>åŠ¨æ€ä»£ç†</strong>ï¼š</p><ul><li>åœ¨è¿è¡Œæ—¶ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œæ‹¦æˆªæ–¹æ³•è°ƒç”¨ï¼Œå¢å¼ºè¡Œä¸º</li></ul></li><li><p><strong>JDK åŠ¨æ€ä»£ç†</strong>ï¼š</p><ul><li>åŸºäºæ¥å£</li><li>ä½¿ç”¨ <code>Proxy.newProxyInstance</code></li><li>é€šè¿‡ <code>InvocationHandler.invoke</code> è°ƒç”¨</li></ul></li><li><p><strong>CGLIB</strong>ï¼š</p><ul><li>åŸºäºå­ç±»ç»§æ‰¿ï¼ˆæ— æ¥å£ä¹Ÿå¯ä»£ç†ï¼‰</li><li>ä½¿ç”¨ ASM å­—èŠ‚ç ç”Ÿæˆå­ç±»</li><li>æ³¨æ„ final ç±»&#x2F;æ–¹æ³•ä¸èƒ½è¢«ä»£ç†</li></ul></li><li><p><strong>å¯¹æ¯”</strong>ï¼š</p><table><thead><tr><th>ç‰¹æ€§</th><th>JDK åŠ¨æ€ä»£ç†</th><th>CGLIB</th></tr></thead><tbody><tr><td>æ˜¯å¦éœ€è¦æ¥å£</td><td>å¿…é¡»</td><td>ä¸éœ€è¦</td></tr><tr><td>åŸç†</td><td>Proxy + InvocationHandler</td><td>ASM å­—èŠ‚ç ç”Ÿæˆå­ç±»</td></tr><tr><td>æ€§èƒ½</td><td>ç•¥æ…¢</td><td>è¾ƒå¿«</td></tr><tr><td>å±€é™æ€§</td><td>æ— </td><td>final ç±»&#x2F;æ–¹æ³•ä¸å¯ä»£ç†</td></tr></tbody></table></li></ul><hr><h2 id="4-æ³¨è§£çš„åº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿè¿è¡Œæ—¶æ³¨è§£å¦‚ä½•å®ç°ï¼Ÿ"><a href="#4-æ³¨è§£çš„åº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿè¿è¡Œæ—¶æ³¨è§£å¦‚ä½•å®ç°ï¼Ÿ" class="headerlink" title="4. æ³¨è§£çš„åº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿè¿è¡Œæ—¶æ³¨è§£å¦‚ä½•å®ç°ï¼Ÿ"></a><strong>4. æ³¨è§£çš„åº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿè¿è¡Œæ—¶æ³¨è§£å¦‚ä½•å®ç°ï¼Ÿ</strong></h2><ul><li><strong>æ¦‚å¿µ</strong>ï¼š<ul><li>æ³¨è§£æ˜¯ä¸€ç§ <strong>å…ƒæ•°æ®</strong>ï¼Œç”¨äºç»™ç±»ã€æ–¹æ³•ã€å­—æ®µç­‰æä¾›ä¿¡æ¯</li></ul></li><li><strong>åº•å±‚åŸç†</strong>ï¼š<ul><li>ç¼–è¯‘æ—¶ç”Ÿæˆ <code>.class</code> æ–‡ä»¶ä¸­ <code>RuntimeVisibleAnnotations</code> å±æ€§</li><li>JVM é€šè¿‡ <code>java.lang.reflect.AnnotatedElement</code> è·å–</li></ul></li><li><strong>è¿è¡Œæ—¶æ³¨è§£</strong>ï¼š<ul><li><code>@Retention(RetentionPolicy.RUNTIME)</code></li><li>é€šè¿‡åå°„ API è¯»å–æ³¨è§£å¹¶æ‰§è¡Œé€»è¾‘</li></ul></li><li><strong>åº”ç”¨åœºæ™¯</strong>ï¼š<ul><li>Spring æ³¨è§£ï¼ˆ<code>@Autowired</code>ã€<code>@Service</code>ï¼‰</li><li>JPA æ³¨è§£ï¼ˆ<code>@Entity</code>ã€<code>@Column</code>ï¼‰</li></ul></li></ul><hr><h2 id="5-ClassLoader-çš„åŒäº²å§”æ´¾æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#5-ClassLoader-çš„åŒäº²å§”æ´¾æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="5. ClassLoader çš„åŒäº²å§”æ´¾æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>5. ClassLoader çš„åŒäº²å§”æ´¾æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><ul><li><p><strong>åŸç†</strong>ï¼š</p><ul><li>å½“ç±»åŠ è½½è¯·æ±‚åˆ°æ¥æ—¶ï¼Œ<strong>å…ˆå§”æ‰˜çˆ¶ ClassLoader åŠ è½½</strong></li><li>å¦‚æœçˆ¶ ClassLoader åŠ è½½å¤±è´¥ï¼Œå†ç”±å­ ClassLoader åŠ è½½</li></ul></li><li><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ol><li>é¿å…é‡å¤åŠ è½½</li><li>ä¿è¯æ ¸å¿ƒç±»ï¼ˆå¦‚ <code>java.lang.*</code>ï¼‰å”¯ä¸€æ€§</li></ol></li><li><p><strong>ç¤ºæ„</strong>ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Bootstrap -&gt; Extension -&gt; App -&gt; Custom</span><br></pre></td></tr></table></figure></li><li><p><strong>é¢è¯•æ‹“å±•</strong>ï¼š</p><ul><li>åŒäº²å§”æ´¾æ¨¡å‹æ˜¯ä¿è¯ JVM æ ¸å¿ƒç±»å®‰å…¨çš„é‡è¦æœºåˆ¶</li></ul></li></ul><hr><h2 id="6-å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾ï¼Ÿ"><a href="#6-å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾ï¼Ÿ" class="headerlink" title="6. å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾ï¼Ÿ"></a><strong>6. å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾ï¼Ÿ</strong></h2><ul><li>è‡ªå®šä¹‰ ClassLoader</li><li>åœ¨ <code>loadClass</code> ä¸­å…ˆåŠ è½½è‡ªå·±å®šä¹‰çš„ç±»ï¼Œå†å§”æ´¾çˆ¶ç±»ï¼ˆé€†å‘å§”æ´¾ï¼‰</li><li>æ³¨æ„ï¼šç ´ååŒäº²å§”æ´¾å¯èƒ½å¼•å‘ç±»å†²çªã€å†…å­˜æ³„æ¼</li></ul><hr><h2 id="7-ä»€ä¹ˆæ˜¯-SPIï¼ˆService-Provider-Interfaceï¼‰æœºåˆ¶ï¼Ÿ"><a href="#7-ä»€ä¹ˆæ˜¯-SPIï¼ˆService-Provider-Interfaceï¼‰æœºåˆ¶ï¼Ÿ" class="headerlink" title="7. ä»€ä¹ˆæ˜¯ SPIï¼ˆService Provider Interfaceï¼‰æœºåˆ¶ï¼Ÿ"></a><strong>7. ä»€ä¹ˆæ˜¯ SPIï¼ˆService Provider Interfaceï¼‰æœºåˆ¶ï¼Ÿ</strong></h2><ul><li><strong>æ¦‚å¿µ</strong>ï¼š<ul><li>Java æä¾›çš„ä¸€ç§æœåŠ¡å‘ç°æœºåˆ¶</li><li>é€šè¿‡æ¥å£ + é…ç½®æ–‡ä»¶ï¼ŒåŠ¨æ€åŠ è½½å®ç°ç±»</li></ul></li><li><strong>å®ç°</strong>ï¼š<ol><li>æ¥å£ <code>MyService</code></li><li>æ–‡ä»¶ <code>META-INF/services/com.example.MyService</code><ul><li>å†…å®¹ï¼šå®ç°ç±»å…¨é™å®šå</li></ul></li><li><code>ServiceLoader.load(MyService.class)</code> è‡ªåŠ¨åŠ è½½å®ç°ç±»</li></ol></li><li><strong>åº”ç”¨</strong>ï¼š<ul><li>JDBC é©±åŠ¨åŠ è½½</li><li>Logging æ¡†æ¶ï¼ˆSLF4Jï¼‰</li></ul></li></ul><hr><h2 id="8-Java-æ˜¯å¦‚ä½•å®ç°è·¨å¹³å°çš„ï¼Ÿ"><a href="#8-Java-æ˜¯å¦‚ä½•å®ç°è·¨å¹³å°çš„ï¼Ÿ" class="headerlink" title="8. Java æ˜¯å¦‚ä½•å®ç°è·¨å¹³å°çš„ï¼Ÿ"></a><strong>8. Java æ˜¯å¦‚ä½•å®ç°è·¨å¹³å°çš„ï¼Ÿ</strong></h2><ul><li><strong>åŸç†</strong>ï¼š<ol><li>Java ä»£ç  -&gt; ç¼–è¯‘æˆ <strong>å­—èŠ‚ç ï¼ˆ.classï¼‰</strong></li><li>JVM è´Ÿè´£å­—èŠ‚ç è§£é‡Šæˆ–å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰æ‰§è¡Œ</li><li>JVM å°†å­—èŠ‚ç æ˜ å°„åˆ°ä¸åŒæ“ä½œç³»ç»Ÿå’Œ CPU</li></ol></li><li><strong>é¢è¯•æ‹“å±•</strong>ï¼š<ul><li>å­—èŠ‚ç éªŒè¯æœºåˆ¶ç¡®ä¿å®‰å…¨æ€§</li><li>HotSpot JIT æä¾›æœ¬åœ°ä¼˜åŒ–</li></ul></li></ul><hr><h2 id="9-JITï¼ˆå³æ—¶ç¼–è¯‘å™¨ï¼‰ä¼˜åŒ–äº†å“ªäº›ä¸œè¥¿ï¼Ÿ"><a href="#9-JITï¼ˆå³æ—¶ç¼–è¯‘å™¨ï¼‰ä¼˜åŒ–äº†å“ªäº›ä¸œè¥¿ï¼Ÿ" class="headerlink" title="9. JITï¼ˆå³æ—¶ç¼–è¯‘å™¨ï¼‰ä¼˜åŒ–äº†å“ªäº›ä¸œè¥¿ï¼Ÿ"></a><strong>9. JITï¼ˆå³æ—¶ç¼–è¯‘å™¨ï¼‰ä¼˜åŒ–äº†å“ªäº›ä¸œè¥¿ï¼Ÿ</strong></h2><ul><li><strong>JITï¼ˆJust-In-Time Compilerï¼‰</strong>ï¼š<ul><li>å°†çƒ­ç‚¹å­—èŠ‚ç åŠ¨æ€ç¼–è¯‘æˆæœ¬åœ°æœºå™¨ç </li></ul></li><li><strong>ä¼˜åŒ–ç­–ç•¥</strong>ï¼š<ol><li><strong>æ–¹æ³•å†…è”</strong>ï¼šå‡å°‘æ–¹æ³•è°ƒç”¨å¼€é”€</li><li><strong>å¾ªç¯ä¼˜åŒ–</strong>ï¼šæ¶ˆé™¤å†—ä½™è®¡ç®—</li><li><strong>é€ƒé€¸åˆ†æ</strong>ï¼šæ ˆä¸Šåˆ†é…å¯¹è±¡</li><li><strong>é”æ¶ˆé™¤&#x2F;é”ç²—åŒ–</strong>ï¼šå‡å°‘é”å¼€é”€</li><li><strong>æŒ‡ä»¤é‡æ’åºä¼˜åŒ–</strong></li></ol></li></ul><hr><h2 id="10-ä»€ä¹ˆæ˜¯é€ƒé€¸åˆ†æï¼Ÿ"><a href="#10-ä»€ä¹ˆæ˜¯é€ƒé€¸åˆ†æï¼Ÿ" class="headerlink" title="10. ä»€ä¹ˆæ˜¯é€ƒé€¸åˆ†æï¼Ÿ"></a><strong>10. ä»€ä¹ˆæ˜¯é€ƒé€¸åˆ†æï¼Ÿ</strong></h2><ul><li><strong>æ¦‚å¿µ</strong>ï¼š<ul><li>åˆ†æå¯¹è±¡çš„å¼•ç”¨èŒƒå›´</li><li>åˆ¤æ–­å¯¹è±¡æ˜¯å¦â€œé€ƒé€¸â€å‡ºæ–¹æ³•æˆ–çº¿ç¨‹</li></ul></li><li><strong>ä¼˜åŒ–åº”ç”¨</strong>ï¼š<ol><li><strong>æ ˆä¸Šåˆ†é…</strong>ï¼šå¯¹è±¡ä¸é€ƒé€¸å¯ä»¥ç›´æ¥åˆ†é…åœ¨æ ˆä¸Š</li><li><strong>æ ‡é‡æ›¿æ¢</strong>ï¼šå°†å¯¹è±¡æ‹†è§£ä¸ºåŸºæœ¬ç±»å‹ï¼Œæé«˜ç¼“å­˜å‘½ä¸­</li><li><strong>é”æ¶ˆé™¤</strong>ï¼šå¯¹è±¡ä¸é€ƒé€¸ï¼Œsynchronized å¯è¢«æ¶ˆé™¤</li></ol></li><li><strong>é¢è¯•æ‹“å±•</strong>ï¼š<ul><li>JIT ç»“åˆé€ƒé€¸åˆ†æå¯æ˜¾è‘—æå‡æ€§èƒ½</li><li>é€‚ç”¨äºçŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡</li></ul></li></ul><hr><h3 id="å…«ã€å¸¸è§åœºæ™¯-è®¾è®¡"><a href="#å…«ã€å¸¸è§åœºæ™¯-è®¾è®¡" class="headerlink" title="å…«ã€å¸¸è§åœºæ™¯ &amp; è®¾è®¡"></a>å…«ã€å¸¸è§åœºæ™¯ &amp; è®¾è®¡</h3><hr><h2 id="1-å•ä¾‹æ¨¡å¼åœ¨-Java-ä¸­æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿå“ªç§æœ€ä¼˜ï¼Ÿ"><a href="#1-å•ä¾‹æ¨¡å¼åœ¨-Java-ä¸­æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿå“ªç§æœ€ä¼˜ï¼Ÿ" class="headerlink" title="1. å•ä¾‹æ¨¡å¼åœ¨ Java ä¸­æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿå“ªç§æœ€ä¼˜ï¼Ÿ"></a><strong>1. å•ä¾‹æ¨¡å¼åœ¨ Java ä¸­æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿå“ªç§æœ€ä¼˜ï¼Ÿ</strong></h2><ul><li><p><strong>å¸¸è§å®ç°æ–¹å¼</strong>ï¼š</p><ol><li><p><strong>é¥¿æ±‰å¼ï¼ˆé™æ€å¸¸é‡ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Singleton</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123; <span class="keyword">return</span> INSTANCE; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¼˜ç‚¹ï¼šçº¿ç¨‹å®‰å…¨ï¼Œç®€å•</li><li>ç¼ºç‚¹ï¼šç±»åŠ è½½å³åˆå§‹åŒ–ï¼Œä¸æ”¯æŒå»¶è¿ŸåŠ è½½</li></ul></li><li><p><strong>æ‡’æ±‰å¼ï¼ˆåŠ é”ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="literal">null</span>) instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¼˜ç‚¹ï¼šæ”¯æŒå»¶è¿ŸåŠ è½½</li><li>ç¼ºç‚¹ï¼šæ¯æ¬¡è®¿é—®éƒ½æœ‰åŒæ­¥å¼€é”€</li></ul></li><li><p><strong>åŒé‡æ£€æŸ¥é”ï¼ˆDouble-Checked Lockingï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(Singleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span>(instance == <span class="literal">null</span>) instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¼˜ç‚¹ï¼šçº¿ç¨‹å®‰å…¨ + å»¶è¿ŸåŠ è½½ + é«˜æ€§èƒ½</li><li><strong>æ¨è</strong></li></ul></li><li><p><strong>é™æ€å†…éƒ¨ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Holder</span> &#123; <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Singleton</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>(); &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123; <span class="keyword">return</span> Holder.INSTANCE; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åŸç†ï¼šJVM ä¿è¯ç±»åŠ è½½çº¿ç¨‹å®‰å…¨</li><li>ä¼˜ç‚¹ï¼šæ‡’åŠ è½½ + é«˜æ€§èƒ½</li><li><strong>æœ€ä½³å®è·µä¹‹ä¸€</strong></li></ul></li><li><p><strong>æšä¸¾å•ä¾‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Singleton</span> &#123; INSTANCE; &#125;</span><br></pre></td></tr></table></figure><ul><li>åŸç†ï¼šJVM ä¿è¯æšä¸¾ç±»å‹å•ä¾‹</li><li>ä¼˜ç‚¹ï¼šçº¿ç¨‹å®‰å…¨ã€é˜²æ­¢åå°„å’Œåºåˆ—åŒ–ç ´å</li><li><strong>æœ€ä½³å®è·µ</strong></li></ul></li></ol></li></ul><hr><h2 id="2-æ‡’æ±‰æ¨¡å¼å’Œé¥¿æ±‰æ¨¡å¼çš„åŒºåˆ«"><a href="#2-æ‡’æ±‰æ¨¡å¼å’Œé¥¿æ±‰æ¨¡å¼çš„åŒºåˆ«" class="headerlink" title="2. æ‡’æ±‰æ¨¡å¼å’Œé¥¿æ±‰æ¨¡å¼çš„åŒºåˆ«"></a><strong>2. æ‡’æ±‰æ¨¡å¼å’Œé¥¿æ±‰æ¨¡å¼çš„åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>æ‡’æ±‰æ¨¡å¼</th><th>é¥¿æ±‰æ¨¡å¼</th></tr></thead><tbody><tr><td>åŠ è½½æ—¶æœº</td><td>å»¶è¿ŸåŠ è½½ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨</td><td>ç±»åŠ è½½å³åˆå§‹åŒ–</td></tr><tr><td>çº¿ç¨‹å®‰å…¨</td><td>éœ€åŠ é”&#x2F;åŒé‡æ£€æŸ¥</td><td>å¤©ç„¶çº¿ç¨‹å®‰å…¨</td></tr><tr><td>æ€§èƒ½</td><td>å¤šçº¿ç¨‹åŒæ­¥æœ‰å¼€é”€</td><td>æ— é¢å¤–å¼€é”€</td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>æŒ‰éœ€åˆ†é…</td><td>ç±»åŠ è½½æ—¶åˆ†é…</td></tr></tbody></table><hr><h2 id="3-æšä¸¾å•ä¾‹ä¸ºä»€ä¹ˆæ˜¯æœ€ä½³å®è·µ"><a href="#3-æšä¸¾å•ä¾‹ä¸ºä»€ä¹ˆæ˜¯æœ€ä½³å®è·µ" class="headerlink" title="3. æšä¸¾å•ä¾‹ä¸ºä»€ä¹ˆæ˜¯æœ€ä½³å®è·µ"></a><strong>3. æšä¸¾å•ä¾‹ä¸ºä»€ä¹ˆæ˜¯æœ€ä½³å®è·µ</strong></h2><ul><li>JVM ä¿è¯æšä¸¾å®ä¾‹å”¯ä¸€æ€§</li><li><strong>é˜²æ­¢åå°„å’Œåºåˆ—åŒ–ç ´å</strong></li><li>å®ç°ç®€æ´ï¼Œæ— éœ€æ‰‹åŠ¨åŒæ­¥</li><li>é¢è¯•å¸¸è€ƒç‚¹ï¼šç›¸æ¯”åŒé‡æ£€æŸ¥é”æ›´å®‰å…¨</li></ul><hr><h2 id="4-ä¸ºä»€ä¹ˆè¦ç”¨å·¥å‚æ¨¡å¼ï¼Ÿ"><a href="#4-ä¸ºä»€ä¹ˆè¦ç”¨å·¥å‚æ¨¡å¼ï¼Ÿ" class="headerlink" title="4. ä¸ºä»€ä¹ˆè¦ç”¨å·¥å‚æ¨¡å¼ï¼Ÿ"></a><strong>4. ä¸ºä»€ä¹ˆè¦ç”¨å·¥å‚æ¨¡å¼ï¼Ÿ</strong></h2><ul><li><strong>ä½œç”¨</strong>ï¼š<ul><li>éšè—å¯¹è±¡åˆ›å»ºé€»è¾‘</li><li>è§£è€¦è°ƒç”¨æ–¹å’Œå®ç°ç±»</li></ul></li><li><strong>ç±»å‹</strong>ï¼š<ol><li><strong>ç®€å•å·¥å‚</strong>ï¼šé™æ€æ–¹æ³•è¿”å›å¯¹è±¡</li><li><strong>å·¥å‚æ–¹æ³•</strong>ï¼šå­ç±»å†³å®šåˆ›å»ºå“ªç§å¯¹è±¡</li><li><strong>æŠ½è±¡å·¥å‚</strong>ï¼šä¸€ç»„ç›¸å…³å¯¹è±¡çš„åˆ›å»º</li></ol></li><li><strong>ä¼˜åŠ¿</strong>ï¼š<ul><li>å¯æ‰©å±•æ€§é«˜</li><li>ç¬¦åˆå¼€é—­åŸåˆ™</li></ul></li></ul><hr><h2 id="5-è£…é¥°å™¨æ¨¡å¼å’Œä»£ç†æ¨¡å¼åŒºåˆ«"><a href="#5-è£…é¥°å™¨æ¨¡å¼å’Œä»£ç†æ¨¡å¼åŒºåˆ«" class="headerlink" title="5. è£…é¥°å™¨æ¨¡å¼å’Œä»£ç†æ¨¡å¼åŒºåˆ«"></a><strong>5. è£…é¥°å™¨æ¨¡å¼å’Œä»£ç†æ¨¡å¼åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>è£…é¥°å™¨æ¨¡å¼</th><th>ä»£ç†æ¨¡å¼</th></tr></thead><tbody><tr><td>ç›®çš„</td><td>åŠ¨æ€å¢å¼ºå¯¹è±¡åŠŸèƒ½</td><td>æ§åˆ¶å¯¹è±¡è®¿é—®</td></tr><tr><td>ç»“æ„</td><td>åŒ…è£…åŸå¯¹è±¡ï¼Œç»§æ‰¿æ¥å£</td><td>æŒæœ‰åŸå¯¹è±¡ï¼Œæ–¹æ³•å§”æ‰˜</td></tr><tr><td>åœºæ™¯</td><td>IO æµï¼ˆBufferedReaderï¼‰</td><td>è¿œç¨‹è°ƒç”¨ã€æƒé™æ§åˆ¶</td></tr><tr><td>åŠ¨æ€æ€§</td><td>é«˜</td><td>å¯ä»¥é€šè¿‡åŠ¨æ€ä»£ç†å®ç°</td></tr></tbody></table><hr><h2 id="6-Java-ä¸­çš„äº‹ä»¶ç›‘å¬æ¨¡å‹æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"><a href="#6-Java-ä¸­çš„äº‹ä»¶ç›‘å¬æ¨¡å‹æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ" class="headerlink" title="6. Java ä¸­çš„äº‹ä»¶ç›‘å¬æ¨¡å‹æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"></a><strong>6. Java ä¸­çš„äº‹ä»¶ç›‘å¬æ¨¡å‹æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</strong></h2><ul><li><strong>æœºåˆ¶</strong>ï¼š<ol><li><strong>äº‹ä»¶æºï¼ˆEvent Sourceï¼‰</strong>ï¼šäº§ç”Ÿäº‹ä»¶</li><li><strong>äº‹ä»¶ç›‘å¬å™¨ï¼ˆListenerï¼‰</strong>ï¼šæ¥å£ï¼Œå®šä¹‰å›è°ƒæ–¹æ³•</li><li><strong>æ³¨å†Œä¸è§¦å‘</strong>ï¼šæºå¯¹è±¡ç»´æŠ¤ç›‘å¬å™¨åˆ—è¡¨ï¼Œäº‹ä»¶å‘ç”Ÿæ—¶é€šçŸ¥ç›‘å¬å™¨</li></ol></li><li><strong>å…¸å‹åº”ç”¨</strong>ï¼š<ul><li>Swing&#x2F;AWT äº‹ä»¶</li><li>Spring ApplicationEvent</li></ul></li></ul><hr><h2 id="7-ä¸ºä»€ä¹ˆ-Java-ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿ"><a href="#7-ä¸ºä»€ä¹ˆ-Java-ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿ" class="headerlink" title="7. ä¸ºä»€ä¹ˆ Java ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿ"></a><strong>7. ä¸ºä»€ä¹ˆ Java ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿ</strong></h2><ul><li><strong>åŸå› </strong>ï¼š<ul><li>é¿å… <strong>é’»çŸ³é—®é¢˜</strong>ï¼ˆå¤šç»§æ‰¿äº§ç”Ÿæ–¹æ³•å†²çªï¼‰</li><li>ç®€åŒ–å¯¹è±¡æ¨¡å‹ï¼Œä¿è¯ JVM ç±»å‹å®‰å…¨</li></ul></li><li><strong>æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼š<ul><li>æ¥å£å¤šç»§æ‰¿ + é»˜è®¤æ–¹æ³•ï¼ˆJava 8+ï¼‰</li><li>ç»„åˆè®¾è®¡æ¨¡å¼ï¼ˆä¼˜å…ˆä½¿ç”¨ has-a è€Œä¸æ˜¯ is-aï¼‰</li></ul></li></ul><hr><h2 id="8-å¦‚ä½•ç”¨-Java-å®ç°å›è°ƒæœºåˆ¶ï¼Ÿ"><a href="#8-å¦‚ä½•ç”¨-Java-å®ç°å›è°ƒæœºåˆ¶ï¼Ÿ" class="headerlink" title="8. å¦‚ä½•ç”¨ Java å®ç°å›è°ƒæœºåˆ¶ï¼Ÿ"></a><strong>8. å¦‚ä½•ç”¨ Java å®ç°å›è°ƒæœºåˆ¶ï¼Ÿ</strong></h2><ul><li><p><strong>åŸç†</strong>ï¼š</p><ul><li>å°†å‡½æ•°å°è£…æˆå¯¹è±¡æˆ–æ¥å£ä¼ é€’ç»™å¦ä¸€ä¸ªå¯¹è±¡</li><li>ç”±è¢«è°ƒç”¨å¯¹è±¡åœ¨åˆé€‚æ—¶æœºè°ƒç”¨æ¥å£æ–¹æ³•</li></ul></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Callback</span> &#123; <span class="keyword">void</span> <span class="title function_">onDone</span><span class="params">(String result)</span>; &#125;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">asyncProcess</span><span class="params">(Callback callback)</span> &#123; <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; callback.onDone(<span class="string">&quot;ok&quot;</span>)).start(); &#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="9-Java-ä¸­å¦‚ä½•å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ"><a href="#9-Java-ä¸­å¦‚ä½•å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ" class="headerlink" title="9. Java ä¸­å¦‚ä½•å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ"></a><strong>9. Java ä¸­å¦‚ä½•å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ</strong></h2><ul><li><p><strong>æœºåˆ¶</strong>ï¼š</p><ol><li><strong>Subjectï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰</strong>ï¼šç»´æŠ¤è§‚å¯Ÿè€…åˆ—è¡¨ï¼Œæä¾›æ³¨å†Œ&#x2F;æ³¨é”€æ–¹æ³•</li><li><strong>Observerï¼ˆè§‚å¯Ÿè€…ï¼‰</strong>ï¼šæ¥å£ï¼Œå®šä¹‰ update æ–¹æ³•</li><li><strong>è§¦å‘äº‹ä»¶</strong>ï¼šSubject çŠ¶æ€å˜åŒ–æ—¶è°ƒç”¨æ‰€æœ‰ Observer çš„ update</li></ol></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Observer</span> &#123; <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(String msg)</span>; &#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">    List&lt;Observer&gt; observers = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">addObserver</span><span class="params">(Observer o)</span> &#123; observers.add(o); &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">notifyAllObservers</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        observers.forEach(o -&gt; o.update(msg));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="10-Optional-çš„è®¾è®¡åˆè¡·æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#10-Optional-çš„è®¾è®¡åˆè¡·æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="10. Optional çš„è®¾è®¡åˆè¡·æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>10. Optional çš„è®¾è®¡åˆè¡·æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><ul><li><p><strong>ç›®çš„</strong>ï¼š</p><ul><li>é¿å… null å€¼å¯¼è‡´çš„ <strong>NullPointerException</strong></li><li>æä¾›å‡½æ•°å¼ APIï¼Œæé«˜å¯è¯»æ€§</li></ul></li><li><p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; optional = Optional.ofNullable(getValue());</span><br><span class="line">optional.ifPresent(System.out::println);</span><br><span class="line"><span class="type">String</span> <span class="variable">val</span> <span class="operator">=</span> optional.orElse(<span class="string">&quot;default&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p><strong>ä¼˜åŠ¿</strong>ï¼š</p><ul><li>æ˜¾ç¤ºå¤„ç†ç¼ºå¤±å€¼</li><li>æ”¯æŒé“¾å¼è°ƒç”¨ã€å‡½æ•°å¼é£æ ¼</li></ul></li><li><p><strong>é¢è¯•æ‹“å±•</strong>ï¼š</p><ul><li>Optional ä¸é€‚åˆç”¨äºé›†åˆå±æ€§ï¼Œé¿å…æ»¥ç”¨</li></ul></li></ul><hr><h2 id="äºŒã€Java-å¹¶å‘ç¼–ç¨‹ï¼ˆ30é¢˜ï¼‰"><a href="#äºŒã€Java-å¹¶å‘ç¼–ç¨‹ï¼ˆ30é¢˜ï¼‰" class="headerlink" title="äºŒã€Java å¹¶å‘ç¼–ç¨‹ï¼ˆ30é¢˜ï¼‰"></a>äºŒã€Java å¹¶å‘ç¼–ç¨‹ï¼ˆ30é¢˜ï¼‰</h2><hr><h2 id="1-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#1-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1. çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"></a><strong>1. çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</strong></h2><ul><li><strong>çŠ¶æ€</strong>ï¼š<ol><li><strong>NEW</strong>ï¼šåˆ›å»ºåï¼Œæœªè°ƒç”¨ <code>start()</code></li><li><strong>RUNNABLE</strong>ï¼šè°ƒç”¨ <code>start()</code>ï¼Œå¯è¿è¡Œï¼ˆçº¿ç¨‹è°ƒåº¦å™¨å†³å®šä½•æ—¶æ‰§è¡Œï¼‰</li><li><strong>BLOCKED</strong>ï¼šç­‰å¾…é”</li><li><strong>WAITING</strong>ï¼šæ— é™æœŸç­‰å¾…ï¼ˆ<code>Object.wait()</code> &#x2F; <code>LockSupport.park()</code>ï¼‰</li><li><strong>TIMED_WAITING</strong>ï¼šè¶…æ—¶ç­‰å¾…ï¼ˆ<code>sleep()</code>, <code>join(timeout)</code>ï¼‰</li><li><strong>TERMINATED</strong>ï¼šæ‰§è¡Œå®Œæ¯•</li></ol></li></ul><hr><h2 id="2-åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼"><a href="#2-åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼" class="headerlink" title="2. åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼"></a><strong>2. åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼</strong></h2><ol><li><strong>ç»§æ‰¿ Thread ç±»</strong></li><li><strong>å®ç° Runnable æ¥å£</strong></li><li><strong>å®ç° Callable + FutureTask</strong></li><li><strong>çº¿ç¨‹æ± ï¼ˆæ¨èï¼‰</strong></li></ol><hr><h2 id="3-Runnable-å’Œ-Callable-åŒºåˆ«"><a href="#3-Runnable-å’Œ-Callable-åŒºåˆ«" class="headerlink" title="3. Runnable å’Œ Callable åŒºåˆ«"></a><strong>3. Runnable å’Œ Callable åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>Runnable</th><th>Callable</th></tr></thead><tbody><tr><td>è¿”å›å€¼</td><td>æ— </td><td>å¯ä»¥æœ‰è¿”å›å€¼</td></tr><tr><td>å¼‚å¸¸</td><td>ä¸å¯æŠ›å‡ºæ£€æŸ¥å¼‚å¸¸</td><td>å¯ä»¥æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td>æ‰§è¡Œæ–¹å¼</td><td>new Thread(runnable)</td><td>ExecutorService.submit(callable)</td></tr></tbody></table><hr><h2 id="4-Future-å’Œ-CompletableFuture-åŒºåˆ«"><a href="#4-Future-å’Œ-CompletableFuture-åŒºåˆ«" class="headerlink" title="4. Future å’Œ CompletableFuture åŒºåˆ«"></a><strong>4. Future å’Œ CompletableFuture åŒºåˆ«</strong></h2><ul><li><strong>Future</strong>ï¼š<ul><li>é˜»å¡å¼è·å–ç»“æœ</li><li>ä¸æ”¯æŒé“¾å¼å¼‚æ­¥å¤„ç†</li></ul></li><li><strong>CompletableFuture</strong>ï¼š<ul><li>æ”¯æŒé“¾å¼å¼‚æ­¥å¤„ç†ï¼ˆthenApply, thenCombine, exceptionallyï¼‰</li><li>å¯ç»„åˆå¤šä¸ªå¼‚æ­¥ä»»åŠ¡</li></ul></li></ul><hr><h2 id="5-ThreadLocal-åŸç†"><a href="#5-ThreadLocal-åŸç†" class="headerlink" title="5. ThreadLocal åŸç†"></a><strong>5. ThreadLocal åŸç†</strong></h2><ul><li>æ¯ä¸ªçº¿ç¨‹æŒæœ‰ä¸€ä¸ª <strong>ThreadLocalMap</strong></li><li>key æ˜¯ <strong>ThreadLocal å¯¹è±¡</strong>ï¼Œvalue æ˜¯çº¿ç¨‹ç§æœ‰å˜é‡</li><li>å†…å­˜æ³„æ¼é£é™©ï¼š<ul><li>ThreadLocal å¼±å¼•ç”¨è¢« GCï¼Œvalue æ²¡æœ‰è¢«å›æ”¶</li></ul></li><li>è§£å†³æ–¹æ³•ï¼š<ul><li>ä½¿ç”¨ <code>remove()</code> æ¸…ç†</li></ul></li></ul><hr><h2 id="6-synchronized-çš„é”ä¼˜åŒ–æœºåˆ¶"><a href="#6-synchronized-çš„é”ä¼˜åŒ–æœºåˆ¶" class="headerlink" title="6. synchronized çš„é”ä¼˜åŒ–æœºåˆ¶"></a><strong>6. synchronized çš„é”ä¼˜åŒ–æœºåˆ¶</strong></h2><ol><li><strong>åå‘é”</strong>ï¼šå‡å°‘æ— ç«äº‰å¼€é”€</li><li><strong>è½»é‡çº§é”</strong>ï¼šCAS + è‡ªæ—‹</li><li><strong>é‡é‡çº§é”</strong>ï¼šMonitor é˜»å¡çº¿ç¨‹</li><li><strong>é”æ¶ˆé™¤&#x2F;é”ç²—åŒ–</strong>ï¼šJIT ä¼˜åŒ–</li></ol><hr><h2 id="7-ReentrantLock-å®ç°åŸç†"><a href="#7-ReentrantLock-å®ç°åŸç†" class="headerlink" title="7. ReentrantLock å®ç°åŸç†"></a><strong>7. ReentrantLock å®ç°åŸç†</strong></h2><ul><li>åŸºäº <strong>AQSï¼ˆAbstractQueuedSynchronizerï¼‰</strong></li><li>å†…éƒ¨ç»´æŠ¤ä¸€ä¸ª <strong>state</strong> è¡¨ç¤ºé”çŠ¶æ€</li><li>é˜Ÿåˆ— FIFO ç®¡ç†ç­‰å¾…çº¿ç¨‹</li><li>æ”¯æŒå…¬å¹³é”&#x2F;éå…¬å¹³é”</li></ul><hr><h2 id="8-å…¬å¹³é”å’Œéå…¬å¹³é”åŒºåˆ«"><a href="#8-å…¬å¹³é”å’Œéå…¬å¹³é”åŒºåˆ«" class="headerlink" title="8. å…¬å¹³é”å’Œéå…¬å¹³é”åŒºåˆ«"></a><strong>8. å…¬å¹³é”å’Œéå…¬å¹³é”åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>å…¬å¹³é”</th><th>éå…¬å¹³é”</th></tr></thead><tbody><tr><td>åŠ é”é¡ºåº</td><td>FIFO</td><td>ä¸ä¿è¯</td></tr><tr><td>æ€§èƒ½</td><td>ä½</td><td>é«˜ï¼ˆçº¿ç¨‹äº‰æŠ¢ï¼‰</td></tr><tr><td>åœºæ™¯</td><td>é¿å…é¥¥é¥¿</td><td>é«˜æ€§èƒ½é”åœºæ™¯</td></tr></tbody></table><hr><h2 id="9-ä¹è§‚é”å’Œæ‚²è§‚é”åŒºåˆ«"><a href="#9-ä¹è§‚é”å’Œæ‚²è§‚é”åŒºåˆ«" class="headerlink" title="9. ä¹è§‚é”å’Œæ‚²è§‚é”åŒºåˆ«"></a><strong>9. ä¹è§‚é”å’Œæ‚²è§‚é”åŒºåˆ«</strong></h2><ul><li><strong>æ‚²è§‚é”</strong>ï¼šå‡è®¾ä¼šå‘ç”Ÿå†²çªï¼Œç›´æ¥åŠ é”ï¼ˆå¦‚ synchronized &#x2F; ReentrantLockï¼‰</li><li><strong>ä¹è§‚é”</strong>ï¼šå‡è®¾å†²çªå°‘ï¼Œä½¿ç”¨ CASï¼ˆå¦‚ Atomic ç±»ï¼‰</li></ul><hr><h2 id="10-AQS-åŸç†"><a href="#10-AQS-åŸç†" class="headerlink" title="10. AQS åŸç†"></a><strong>10. AQS åŸç†</strong></h2><ul><li><strong>æ ¸å¿ƒ</strong>ï¼šstate + CLH é˜Ÿåˆ—</li><li><strong>ç‰¹æ€§</strong>ï¼š<ul><li>ç‹¬å æ¨¡å¼ &#x2F; å…±äº«æ¨¡å¼</li><li>åŸºäº FIFO é˜Ÿåˆ—ç®¡ç†ç­‰å¾…çº¿ç¨‹</li></ul></li><li><strong>åº”ç”¨</strong>ï¼š<ul><li>ReentrantLockã€Semaphoreã€CountDownLatchã€FutureTask</li></ul></li></ul><hr><h2 id="11-CountDownLatch-å’Œ-CyclicBarrier-åŒºåˆ«"><a href="#11-CountDownLatch-å’Œ-CyclicBarrier-åŒºåˆ«" class="headerlink" title="11. CountDownLatch å’Œ CyclicBarrier åŒºåˆ«"></a><strong>11. CountDownLatch å’Œ CyclicBarrier åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>CountDownLatch</th><th>CyclicBarrier</th></tr></thead><tbody><tr><td>ä½¿ç”¨æ¬¡æ•°</td><td>ä¸€æ¬¡æ€§</td><td>å¯é‡å¤ä½¿ç”¨</td></tr><tr><td>åŠŸèƒ½</td><td>ç­‰å¾…çº¿ç¨‹å®Œæˆ</td><td>ç­‰å¾…çº¿ç¨‹åˆ°è¾¾åŒä¸€ç‚¹</td></tr><tr><td>åœºæ™¯</td><td>çº¿ç¨‹ç»“æŸåŒæ­¥</td><td>å¤šçº¿ç¨‹å¹¶è¡Œåˆ†æ®µ</td></tr></tbody></table><hr><h2 id="12-Semaphore-çš„å®ç°åŸç†"><a href="#12-Semaphore-çš„å®ç°åŸç†" class="headerlink" title="12. Semaphore çš„å®ç°åŸç†"></a><strong>12. Semaphore çš„å®ç°åŸç†</strong></h2><ul><li>æ§åˆ¶å¹¶å‘çº¿ç¨‹æ•°é‡</li><li>åŸºäº AQS çš„å…±äº«é”</li><li>acquire() è·å–è®¸å¯ï¼Œrelease() é‡Šæ”¾è®¸å¯</li></ul><hr><h2 id="13-Exchanger-çš„ä½¿ç”¨åœºæ™¯"><a href="#13-Exchanger-çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="13. Exchanger çš„ä½¿ç”¨åœºæ™¯"></a><strong>13. Exchanger çš„ä½¿ç”¨åœºæ™¯</strong></h2><ul><li>ä¸¤ä¸ªçº¿ç¨‹äº¤æ¢æ•°æ®</li><li>å…¸å‹åœºæ™¯ï¼šç”Ÿäº§è€…-æ¶ˆè´¹è€…çº¿ç¨‹äº¤æ¢ç¼“å†²åŒº</li></ul><hr><h2 id="14-ForkJoinPool-çš„åŸç†"><a href="#14-ForkJoinPool-çš„åŸç†" class="headerlink" title="14. ForkJoinPool çš„åŸç†"></a><strong>14. ForkJoinPool çš„åŸç†</strong></h2><ul><li><strong>å·¥ä½œçªƒå–ç®—æ³•</strong>ï¼š<ul><li>ç©ºé—²çº¿ç¨‹ä»å…¶ä»–çº¿ç¨‹é˜Ÿåˆ—ä¸­çªƒå–ä»»åŠ¡</li></ul></li><li>é€‚åˆ <strong>é€’å½’ä»»åŠ¡</strong></li><li>é€šè¿‡ <strong>ForkJoinTask</strong> é€’å½’æ‹†åˆ†è®¡ç®—</li></ul><hr><h2 id="15-CAS-æ“ä½œçš„åº•å±‚å®ç°"><a href="#15-CAS-æ“ä½œçš„åº•å±‚å®ç°" class="headerlink" title="15. CAS æ“ä½œçš„åº•å±‚å®ç°"></a><strong>15. CAS æ“ä½œçš„åº•å±‚å®ç°</strong></h2><ul><li>åŸºäº CPU <strong>åŸå­æŒ‡ä»¤ï¼ˆCMPXCHGï¼‰</strong></li><li>JVM <code>Unsafe</code> æä¾›æ”¯æŒ</li><li><strong>ä¼˜ç‚¹</strong>ï¼šæ— é”ã€çº¿ç¨‹å®‰å…¨</li><li><strong>ç¼ºç‚¹</strong>ï¼šABA é—®é¢˜</li></ul><hr><h2 id="16-ABA-é—®é¢˜åŠè§£å†³"><a href="#16-ABA-é—®é¢˜åŠè§£å†³" class="headerlink" title="16. ABA é—®é¢˜åŠè§£å†³"></a><strong>16. ABA é—®é¢˜åŠè§£å†³</strong></h2><ul><li><strong>é—®é¢˜</strong>ï¼šå€¼å…ˆ A â†’ B â†’ Aï¼ŒCAS æ— æ³•åˆ¤æ–­å˜åŒ–</li><li><strong>è§£å†³</strong>ï¼š<ul><li>ç‰ˆæœ¬å·æœºåˆ¶ï¼ˆAtomicStampedReferenceï¼‰</li><li>åŒé‡æ£€æŸ¥</li></ul></li></ul><hr><h2 id="17-Atomic-åŸå­ç±»åŸç†"><a href="#17-Atomic-åŸå­ç±»åŸç†" class="headerlink" title="17. Atomic åŸå­ç±»åŸç†"></a><strong>17. Atomic åŸå­ç±»åŸç†</strong></h2><ul><li>åŸºäº <strong>CAS + Unsafe + volatile</strong></li><li>å®ç°éé˜»å¡çº¿ç¨‹å®‰å…¨</li><li>ç¤ºä¾‹ï¼š<code>AtomicInteger</code> ä½¿ç”¨ <code>compareAndSwapInt</code></li></ul><hr><h2 id="18-BlockingQueue-å®ç°åŸç†"><a href="#18-BlockingQueue-å®ç°åŸç†" class="headerlink" title="18. BlockingQueue å®ç°åŸç†"></a><strong>18. BlockingQueue å®ç°åŸç†</strong></h2><ul><li>å†…éƒ¨ç»´æŠ¤ <strong>é” + æ¡ä»¶é˜Ÿåˆ—</strong></li><li>put é˜»å¡æ»¡é˜Ÿåˆ—ï¼Œtake é˜»å¡ç©ºé˜Ÿåˆ—</li><li>å¸¸ç”¨å®ç°ï¼š<ul><li>ArrayBlockingQueueï¼ˆæ•°ç»„ + ReentrantLockï¼‰</li><li>LinkedBlockingQueueï¼ˆé“¾è¡¨ + ReentrantLockï¼‰</li></ul></li></ul><hr><h2 id="19-ConcurrentHashMap-çš„åˆ†æ®µé”æœºåˆ¶"><a href="#19-ConcurrentHashMap-çš„åˆ†æ®µé”æœºåˆ¶" class="headerlink" title="19. ConcurrentHashMap çš„åˆ†æ®µé”æœºåˆ¶"></a><strong>19. ConcurrentHashMap çš„åˆ†æ®µé”æœºåˆ¶</strong></h2><ul><li>JDK 1.7ï¼š<ul><li><strong>Segment[] + synchronized</strong></li></ul></li><li>JDK 1.8ï¼š<ul><li><strong>CAS + synchronized é“¾è¡¨ + çº¢é»‘æ ‘ + Node</strong></li></ul></li><li>æ”¯æŒé«˜å¹¶å‘è¯»å†™</li></ul><hr><h2 id="20-ConcurrentHashMap-æ‰©å®¹æœºåˆ¶"><a href="#20-ConcurrentHashMap-æ‰©å®¹æœºåˆ¶" class="headerlink" title="20. ConcurrentHashMap æ‰©å®¹æœºåˆ¶"></a><strong>20. ConcurrentHashMap æ‰©å®¹æœºåˆ¶</strong></h2><ul><li>é‡‡ç”¨ <strong>åˆ†æ®µæ‰©å®¹ + CAS</strong></li><li>é“¾è¡¨è½¬çº¢é»‘æ ‘æé«˜æŸ¥æ‰¾æ€§èƒ½</li><li>æ‰©å®¹è¿‡ç¨‹ä¸­ä½¿ç”¨ <strong>è¿ç§»èŠ‚ç‚¹</strong></li></ul><hr><h2 id="21-CopyOnWriteArrayList-åŸç†"><a href="#21-CopyOnWriteArrayList-åŸç†" class="headerlink" title="21. CopyOnWriteArrayList åŸç†"></a><strong>21. CopyOnWriteArrayList åŸç†</strong></h2><ul><li>å†™æ—¶å¤åˆ¶ï¼š<ol><li>å†™æ“ä½œå¤åˆ¶æ•°ç»„</li><li>ä¿®æ”¹åæ›¿æ¢å¼•ç”¨</li></ol></li><li>é€‚åˆè¯»å¤šå†™å°‘åœºæ™¯</li></ul><hr><h2 id="22-çº¿ç¨‹æ± æ ¸å¿ƒå‚æ•°"><a href="#22-çº¿ç¨‹æ± æ ¸å¿ƒå‚æ•°" class="headerlink" title="22. çº¿ç¨‹æ± æ ¸å¿ƒå‚æ•°"></a><strong>22. çº¿ç¨‹æ± æ ¸å¿ƒå‚æ•°</strong></h2><table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>corePoolSize</td><td>æ ¸å¿ƒçº¿ç¨‹æ•°</td></tr><tr><td>maximumPoolSize</td><td>æœ€å¤§çº¿ç¨‹æ•°</td></tr><tr><td>keepAliveTime</td><td>éæ ¸å¿ƒçº¿ç¨‹å­˜æ´»æ—¶é—´</td></tr><tr><td>workQueue</td><td>ä»»åŠ¡é˜Ÿåˆ—</td></tr><tr><td>RejectedExecutionHandler</td><td>æ‹’ç»ç­–ç•¥</td></tr></tbody></table><hr><h2 id="23-çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥"><a href="#23-çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥" class="headerlink" title="23. çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥"></a><strong>23. çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥</strong></h2><ol><li>AbortPolicyï¼ˆé»˜è®¤ï¼ŒæŠ›å¼‚å¸¸ï¼‰</li><li>CallerRunsPolicyï¼ˆè°ƒç”¨çº¿ç¨‹æ‰§è¡Œï¼‰</li><li>DiscardPolicyï¼ˆä¸¢å¼ƒä»»åŠ¡ï¼‰</li><li>DiscardOldestPolicyï¼ˆä¸¢å¼ƒé˜Ÿåˆ—æœ€è€ä»»åŠ¡ï¼‰</li></ol><hr><h2 id="24-çº¿ç¨‹æ± å·¥ä½œæµç¨‹"><a href="#24-çº¿ç¨‹æ± å·¥ä½œæµç¨‹" class="headerlink" title="24. çº¿ç¨‹æ± å·¥ä½œæµç¨‹"></a><strong>24. çº¿ç¨‹æ± å·¥ä½œæµç¨‹</strong></h2><ol><li>æäº¤ä»»åŠ¡ â†’ æ”¾å…¥é˜Ÿåˆ—</li><li>æ ¸å¿ƒçº¿ç¨‹æœªæ»¡ â†’ åˆ›å»ºçº¿ç¨‹</li><li>é˜Ÿåˆ—æ»¡ â†’ åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹</li><li>è¾¾åˆ°æœ€å¤§çº¿ç¨‹ â†’ è§¦å‘æ‹’ç»ç­–ç•¥</li></ol><hr><h2 id="25-ThreadPoolExecutor-vs-ScheduledThreadPoolExecutor"><a href="#25-ThreadPoolExecutor-vs-ScheduledThreadPoolExecutor" class="headerlink" title="25. ThreadPoolExecutor vs ScheduledThreadPoolExecutor"></a><strong>25. ThreadPoolExecutor vs ScheduledThreadPoolExecutor</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>ThreadPoolExecutor</th><th>ScheduledThreadPoolExecutor</th></tr></thead><tbody><tr><td>åŠŸèƒ½</td><td>é€šç”¨çº¿ç¨‹æ± </td><td>æ”¯æŒå®šæ—¶ &#x2F; å‘¨æœŸä»»åŠ¡</td></tr><tr><td>é˜Ÿåˆ—</td><td>BlockingQueue</td><td>DelayQueue</td></tr><tr><td>åœºæ™¯</td><td>å¹¶å‘ä»»åŠ¡</td><td>å®šæ—¶ä»»åŠ¡</td></tr></tbody></table><hr><h2 id="26-ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨-Executors-åˆ›å»ºçº¿ç¨‹æ± "><a href="#26-ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨-Executors-åˆ›å»ºçº¿ç¨‹æ± " class="headerlink" title="26. ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨ Executors åˆ›å»ºçº¿ç¨‹æ± "></a><strong>26. ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨ Executors åˆ›å»ºçº¿ç¨‹æ± </strong></h2><ul><li>Executors ä¼šäº§ç”Ÿ <strong>æ— é™é˜Ÿåˆ—</strong>ï¼ˆå¦‚ newCachedThreadPoolï¼‰</li><li>å®¹æ˜“ <strong>OOM &#x2F; çº¿ç¨‹æ•°è¿‡å¤š</strong></li><li>æ¨èï¼šæ‰‹åŠ¨ä½¿ç”¨ <strong>ThreadPoolExecutor</strong> é…ç½®æ ¸å¿ƒå‚æ•°</li></ul><hr><h2 id="27-JMM-å†…å­˜å¯è§æ€§é—®é¢˜"><a href="#27-JMM-å†…å­˜å¯è§æ€§é—®é¢˜" class="headerlink" title="27. JMM å†…å­˜å¯è§æ€§é—®é¢˜"></a><strong>27. JMM å†…å­˜å¯è§æ€§é—®é¢˜</strong></h2><ul><li>å¤šçº¿ç¨‹è®¿é—®å…±äº«å˜é‡ï¼Œä¿®æ”¹ä¸ç«‹å³å¯è§</li><li><strong>è§£å†³æ–¹æ³•</strong>ï¼š<ul><li><code>volatile</code></li><li><code>synchronized</code> &#x2F; Lock</li></ul></li></ul><hr><h2 id="28-happens-before-è§„åˆ™"><a href="#28-happens-before-è§„åˆ™" class="headerlink" title="28. happens-before è§„åˆ™"></a><strong>28. happens-before è§„åˆ™</strong></h2><ul><li><strong>ä¿è¯æ“ä½œé¡ºåºä¸å¯è§æ€§</strong></li><li>å¸¸è§è§„åˆ™ï¼š<ol><li><strong>é”çš„è§£é” â†’ åŠ é”</strong></li><li><strong>volatile å†™ â†’ è¯»</strong></li><li><strong>çº¿ç¨‹ start() â†’ run()</strong></li><li><strong>çº¿ç¨‹ join() â†’ ç»“æŸ</strong></li></ol></li></ul><hr><h2 id="29-æ­»é”äº§ç”Ÿæ¡ä»¶åŠé¿å…"><a href="#29-æ­»é”äº§ç”Ÿæ¡ä»¶åŠé¿å…" class="headerlink" title="29. æ­»é”äº§ç”Ÿæ¡ä»¶åŠé¿å…"></a><strong>29. æ­»é”äº§ç”Ÿæ¡ä»¶åŠé¿å…</strong></h2><ul><li><strong>å››ä¸ªå¿…è¦æ¡ä»¶</strong>ï¼š<ol><li>äº’æ–¥</li><li>å æœ‰ä¸”ç­‰å¾…</li><li>ä¸å¯æŠ¢å </li><li>å¾ªç¯ç­‰å¾…</li></ol></li><li><strong>é¿å…æ–¹æ³•</strong>ï¼š<ul><li>é¿å…å¾ªç¯ç­‰å¾…ï¼ŒæŒ‰é¡ºåºåŠ é”</li><li>ä½¿ç”¨ tryLock + è¶…æ—¶</li><li>ä½¿ç”¨å•ä¸€é”</li></ul></li></ul><hr><h2 id="30-å¸¸è§å¹¶å‘å®¹å™¨åŠåŒºåˆ«"><a href="#30-å¸¸è§å¹¶å‘å®¹å™¨åŠåŒºåˆ«" class="headerlink" title="30. å¸¸è§å¹¶å‘å®¹å™¨åŠåŒºåˆ«"></a><strong>30. å¸¸è§å¹¶å‘å®¹å™¨åŠåŒºåˆ«</strong></h2><table><thead><tr><th>å®¹å™¨</th><th>ç‰¹æ€§</th></tr></thead><tbody><tr><td>ConcurrentHashMap</td><td>é«˜å¹¶å‘è¯»å†™ï¼Œåˆ†æ®µ&#x2F;é“¾è¡¨+çº¢é»‘æ ‘</td></tr><tr><td>CopyOnWriteArrayList</td><td>å†™æ—¶å¤åˆ¶ï¼Œè¯»å¤šå†™å°‘</td></tr><tr><td>ConcurrentLinkedQueue</td><td>éé˜»å¡</td></tr></tbody></table><p>é˜Ÿåˆ—ï¼ŒåŸºäº CAS |<br> | BlockingQueueï¼ˆArray&#x2F;Linkedï¼‰ | æ”¯æŒé˜»å¡ put&#x2F;take |<br> | ConcurrentSkipListMap | æœ‰åºï¼ŒåŸºäºè·³è¡¨ï¼Œçº¿ç¨‹å®‰å…¨ |</p><hr><h2 id="ä¸‰ã€JVM-ä¸æ€§èƒ½ä¼˜åŒ–ï¼ˆ30é¢˜ï¼‰"><a href="#ä¸‰ã€JVM-ä¸æ€§èƒ½ä¼˜åŒ–ï¼ˆ30é¢˜ï¼‰" class="headerlink" title="ä¸‰ã€JVM ä¸æ€§èƒ½ä¼˜åŒ–ï¼ˆ30é¢˜ï¼‰"></a>ä¸‰ã€JVM ä¸æ€§èƒ½ä¼˜åŒ–ï¼ˆ30é¢˜ï¼‰</h2><hr><h2 id="1-JVM-å†…å­˜ç»“æ„"><a href="#1-JVM-å†…å­˜ç»“æ„" class="headerlink" title="1. JVM å†…å­˜ç»“æ„"></a><strong>1. JVM å†…å­˜ç»“æ„</strong></h2><ul><li><strong>æ–¹æ³•åŒº &#x2F; å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰</strong>ï¼šå­˜æ”¾ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡</li><li><strong>å †ï¼ˆHeapï¼‰</strong>ï¼šå¯¹è±¡å®ä¾‹ã€GC ç®¡ç†åŒº</li><li><strong>æ ˆï¼ˆStackï¼‰</strong>ï¼šæ–¹æ³•è°ƒç”¨ã€å±€éƒ¨å˜é‡</li><li><strong>ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰</strong>ï¼šè®°å½•çº¿ç¨‹æ‰§è¡Œåœ°å€</li><li><strong>æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Stackï¼‰</strong>ï¼šæ‰§è¡Œ native æ–¹æ³•</li><li><strong>ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰</strong>ï¼šå †å¤–å†…å­˜ï¼Œç”¨äº NIO</li></ul><hr><h2 id="2-å †å’Œæ ˆçš„åŒºåˆ«"><a href="#2-å †å’Œæ ˆçš„åŒºåˆ«" class="headerlink" title="2. å †å’Œæ ˆçš„åŒºåˆ«"></a><strong>2. å †å’Œæ ˆçš„åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>å †</th><th>æ ˆ</th></tr></thead><tbody><tr><td>å­˜å‚¨å†…å®¹</td><td>å¯¹è±¡å®ä¾‹</td><td>æ–¹æ³•è°ƒç”¨å¸§ã€å±€éƒ¨å˜é‡</td></tr><tr><td>ç”Ÿå‘½å‘¨æœŸ</td><td>GC ç®¡ç†</td><td>éšæ–¹æ³•ç»“æŸé‡Šæ”¾</td></tr><tr><td>çº¿ç¨‹å…±äº«</td><td>æ˜¯</td><td>å¦ï¼ˆçº¿ç¨‹ç§æœ‰ï¼‰</td></tr><tr><td>è®¿é—®é€Ÿåº¦</td><td>è¾ƒæ…¢</td><td>å¿«</td></tr><tr><td>å†…å­˜å¤§å°</td><td>å¤§</td><td>å°</td></tr></tbody></table><hr><h2 id="3-æ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£ï¼ˆå…ƒç©ºé—´ï¼‰çš„åŒºåˆ«"><a href="#3-æ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£ï¼ˆå…ƒç©ºé—´ï¼‰çš„åŒºåˆ«" class="headerlink" title="3. æ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£ï¼ˆå…ƒç©ºé—´ï¼‰çš„åŒºåˆ«"></a><strong>3. æ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£ï¼ˆå…ƒç©ºé—´ï¼‰çš„åŒºåˆ«</strong></h2><ul><li><strong>æ–°ç”Ÿä»£</strong>ï¼ˆYoung Generationï¼‰ï¼š<ul><li>å­˜æ”¾æ–°åˆ›å»ºå¯¹è±¡</li><li>åˆ†ä¸º Eden + 2 ä¸ª Survivor åŒº</li><li>Minor GC ä¸»è¦å‘ç”Ÿåœ¨æ­¤</li></ul></li><li><strong>è€å¹´ä»£</strong>ï¼ˆOld&#x2F;Tenured Generationï¼‰ï¼š<ul><li>é•¿å¯¿å‘½å¯¹è±¡</li><li>Full GC ä¸»è¦ä½œç”¨åŒºåŸŸ</li></ul></li><li><strong>æ°¸ä¹…ä»£ &#x2F; å…ƒç©ºé—´</strong>ï¼š<ul><li>å­˜æ”¾ç±»å…ƒæ•°æ®</li><li>Java 8+ ä½¿ç”¨ Metaspaceï¼ˆNative å†…å­˜ï¼‰</li></ul></li></ul><hr><h2 id="4-å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹"><a href="#4-å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹" class="headerlink" title="4. å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹"></a><strong>4. å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹</strong></h2><ol><li><strong>ç±»åŠ è½½æ£€æŸ¥</strong></li><li><strong>åˆ†é…å†…å­˜</strong>ï¼š<ul><li>å †ä¸Šåˆ†é…å¯¹è±¡ç©ºé—´ï¼ˆTLAB&#x2F;å¤§å¯¹è±¡ç›´æ¥åˆ†é…ï¼‰</li></ul></li><li><strong>åˆå§‹åŒ–é›¶å€¼</strong></li><li><strong>æ„é€ å™¨åˆå§‹åŒ–</strong></li><li><strong>å¼•ç”¨èµ‹å€¼</strong></li></ol><hr><h2 id="5-å¯¹è±¡çš„å†…å­˜åˆ†é…ç­–ç•¥"><a href="#5-å¯¹è±¡çš„å†…å­˜åˆ†é…ç­–ç•¥" class="headerlink" title="5. å¯¹è±¡çš„å†…å­˜åˆ†é…ç­–ç•¥"></a><strong>5. å¯¹è±¡çš„å†…å­˜åˆ†é…ç­–ç•¥</strong></h2><ul><li><strong>å¹´è½»ä»£åˆ†é…</strong>ï¼šTLABï¼ˆThread Local Allocation Bufferï¼‰</li><li><strong>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</strong>ï¼ˆå¦‚æ•°ç»„ &gt; 1MBï¼‰</li><li><strong>é•¿æœŸå­˜æ´»å¯¹è±¡æ™‹å‡åˆ°è€å¹´ä»£</strong></li><li><strong>æ ˆä¸Šåˆ†é…</strong>ï¼šé€šè¿‡é€ƒé€¸åˆ†æä¼˜åŒ–</li></ul><hr><h2 id="6-GC-Roots"><a href="#6-GC-Roots" class="headerlink" title="6. GC Roots"></a><strong>6. GC Roots</strong></h2><ul><li><strong>å¸¸è§ç±»å‹</strong>ï¼š<ul><li>æ ˆå¸§ä¸­çš„å¼•ç”¨å˜é‡</li><li>æ–¹æ³•åŒºé™æ€å˜é‡</li><li>å¸¸é‡å¼•ç”¨</li><li>æœ¬åœ°æ–¹æ³•æ ˆå¼•ç”¨</li></ul></li></ul><hr><h2 id="7-åƒåœ¾å›æ”¶ç®—æ³•"><a href="#7-åƒåœ¾å›æ”¶ç®—æ³•" class="headerlink" title="7. åƒåœ¾å›æ”¶ç®—æ³•"></a><strong>7. åƒåœ¾å›æ”¶ç®—æ³•</strong></h2><ul><li><strong>å¼•ç”¨è®¡æ•°</strong>ï¼ˆä¸å¯è§£å†³å¾ªç¯å¼•ç”¨ï¼‰</li><li><strong>å¯è¾¾æ€§åˆ†æ</strong>ï¼ˆGC Rootsï¼‰</li><li><strong>å…·ä½“å›æ”¶ç®—æ³•</strong>ï¼š<ul><li>æ ‡è®°-æ¸…é™¤</li><li>æ ‡è®°-æ•´ç†</li><li>å¤åˆ¶ç®—æ³•</li><li>åˆ†ä»£å›æ”¶</li></ul></li></ul><hr><h2 id="8-CMS-åƒåœ¾å›æ”¶å™¨æµç¨‹"><a href="#8-CMS-åƒåœ¾å›æ”¶å™¨æµç¨‹" class="headerlink" title="8. CMS åƒåœ¾å›æ”¶å™¨æµç¨‹"></a><strong>8. CMS åƒåœ¾å›æ”¶å™¨æµç¨‹</strong></h2><ol><li>åˆå§‹æ ‡è®°ï¼ˆStop-The-Worldï¼‰</li><li>å¹¶å‘æ ‡è®°ï¼ˆæ ‡è®°å¯å›æ”¶å¯¹è±¡ï¼‰</li><li>å¹¶å‘é¢„æ¸…ç†</li><li>é‡æ–°æ ‡è®°ï¼ˆStop-The-Worldï¼‰</li><li>å¹¶å‘æ¸…ç†ï¼ˆå›æ”¶è€å¹´ä»£ï¼‰</li></ol><ul><li><strong>ç‰¹ç‚¹</strong>ï¼šä½åœé¡¿ï¼Œä½†æœ‰æµ®åŠ¨åƒåœ¾å’Œå†…å­˜ç¢ç‰‡é—®é¢˜</li></ul><hr><h2 id="9-G1-åƒåœ¾å›æ”¶å™¨åŸç†"><a href="#9-G1-åƒåœ¾å›æ”¶å™¨åŸç†" class="headerlink" title="9. G1 åƒåœ¾å›æ”¶å™¨åŸç†"></a><strong>9. G1 åƒåœ¾å›æ”¶å™¨åŸç†</strong></h2><ul><li><strong>Regionï¼ˆåˆ†åŒºï¼‰ç®¡ç†å †</strong></li><li><strong>åˆ†ä»£+å¹¶è¡Œ+å¢é‡æ”¶é›†</strong></li><li><strong>åƒåœ¾å›æ”¶ç­–ç•¥</strong>ï¼š<ul><li>ä¼˜å…ˆå›æ”¶å›æ”¶æˆæœ¬ä½çš„ Region</li><li>å¹¶å‘æ ‡è®° + å¹¶è¡Œæ¸…ç†</li></ul></li><li><strong>ç›®æ ‡</strong>ï¼šæ§åˆ¶åœé¡¿æ—¶é—´</li><li><strong>ä¼˜åŠ¿</strong>ï¼šæ— ç¢ç‰‡ã€å¯é¢„æµ‹åœé¡¿</li></ul><hr><h2 id="10-ZGC-å’Œ-Shenandoah-ç‰¹ç‚¹"><a href="#10-ZGC-å’Œ-Shenandoah-ç‰¹ç‚¹" class="headerlink" title="10. ZGC å’Œ Shenandoah ç‰¹ç‚¹"></a><strong>10. ZGC å’Œ Shenandoah ç‰¹ç‚¹</strong></h2><ul><li><strong>ä½å»¶è¿Ÿ GC</strong>ï¼Œåœé¡¿æ—¶é—´ &lt; 10ms</li><li><strong>å¹¶å‘æ ‡è®° + å¹¶å‘å‹ç¼©</strong></li><li><strong>å†…å­˜å¯æ‰©å±•æ€§å¥½</strong></li><li>æ”¯æŒå¤§å†…å­˜ (&gt;100GB)</li><li>é¢è¯•å¸¸é—®åŒºåˆ«ï¼šZGC ä½¿ç”¨ <strong>Load Barrier</strong>ï¼ŒShenandoah ä½¿ç”¨ <strong>Region Pinning</strong></li></ul><hr><h2 id="11-Minor-GC-ä¸-Full-GC-åŒºåˆ«"><a href="#11-Minor-GC-ä¸-Full-GC-åŒºåˆ«" class="headerlink" title="11. Minor GC ä¸ Full GC åŒºåˆ«"></a><strong>11. Minor GC ä¸ Full GC åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>Minor GC</th><th>Full GC</th></tr></thead><tbody><tr><td>è§¦å‘åŒºåŸŸ</td><td>æ–°ç”Ÿä»£</td><td>æ•´ä¸ªå †ï¼ˆåŒ…æ‹¬è€å¹´ä»£ï¼‰</td></tr><tr><td>åœé¡¿æ—¶é—´</td><td>çŸ­</td><td>é•¿</td></tr><tr><td>é¢‘ç‡</td><td>é«˜</td><td>ä½</td></tr><tr><td>GC ç±»å‹</td><td>å¤åˆ¶ç®—æ³•</td><td>æ ‡è®°-æ•´ç† &#x2F; CMS &#x2F; G1</td></tr></tbody></table><hr><h2 id="12-OOM-å¸¸è§ç±»å‹åŠæ’æŸ¥"><a href="#12-OOM-å¸¸è§ç±»å‹åŠæ’æŸ¥" class="headerlink" title="12. OOM å¸¸è§ç±»å‹åŠæ’æŸ¥"></a><strong>12. OOM å¸¸è§ç±»å‹åŠæ’æŸ¥</strong></h2><ul><li><strong>Java Heap Space</strong>ï¼šå †å†…å­˜ä¸è¶³</li><li><strong>GC Overhead Limit</strong>ï¼šGC èŠ±è´¹è¿‡å¤šæ—¶é—´</li><li><strong>Metaspace</strong>ï¼šç±»å…ƒä¿¡æ¯è¿‡å¤š</li><li><strong>Direct Memory</strong>ï¼šå †å¤–å†…å­˜æº¢å‡º</li><li><strong>æ’æŸ¥å·¥å…·</strong>ï¼š<ul><li>jmapã€jstackã€VisualVMã€MAT</li></ul></li></ul><hr><h2 id="13-ç±»åŠ è½½å™¨åˆ†ç±»"><a href="#13-ç±»åŠ è½½å™¨åˆ†ç±»" class="headerlink" title="13. ç±»åŠ è½½å™¨åˆ†ç±»"></a><strong>13. ç±»åŠ è½½å™¨åˆ†ç±»</strong></h2><ul><li>Bootstrapï¼ˆæ ¹ç±»åŠ è½½å™¨ï¼‰</li><li>Extensionï¼ˆæ‰©å±•ç±»åŠ è½½å™¨ï¼‰</li><li>Applicationï¼ˆç³»ç»Ÿç±»åŠ è½½å™¨ï¼‰</li><li>è‡ªå®šä¹‰ ClassLoader</li></ul><hr><h2 id="14-åŒäº²å§”æ´¾æ¨¡å‹ç ´ååœºæ™¯"><a href="#14-åŒäº²å§”æ´¾æ¨¡å‹ç ´ååœºæ™¯" class="headerlink" title="14. åŒäº²å§”æ´¾æ¨¡å‹ç ´ååœºæ™¯"></a><strong>14. åŒäº²å§”æ´¾æ¨¡å‹ç ´ååœºæ™¯</strong></h2><ul><li>åŠ¨æ€åŠ è½½ä¸åŒç‰ˆæœ¬ç±»</li><li>çƒ­éƒ¨ç½²ã€æ’ä»¶åŒ–æ¡†æ¶ï¼ˆTomcatã€OSGiï¼‰</li></ul><hr><h2 id="15-JVM-å¸¸è§å‚æ•°è°ƒä¼˜"><a href="#15-JVM-å¸¸è§å‚æ•°è°ƒä¼˜" class="headerlink" title="15. JVM å¸¸è§å‚æ•°è°ƒä¼˜"></a><strong>15. JVM å¸¸è§å‚æ•°è°ƒä¼˜</strong></h2><ul><li><strong>å †å¤§å°</strong>ï¼š<code>-Xms -Xmx</code></li><li><strong>æ–°ç”Ÿä»£æ¯”ä¾‹</strong>ï¼š<code>-XX:NewRatio</code></li><li><strong>GC ç±»å‹</strong>ï¼š<code>-XX:+UseG1GC</code></li><li><strong>çº¿ç¨‹æ ˆå¤§å°</strong>ï¼š<code>-Xss</code></li><li><strong>Metaspace</strong>ï¼š<code>-XX:MetaspaceSize</code></li></ul><hr><h2 id="16-å†…å­˜æ³„æ¼-vs-å†…å­˜æº¢å‡º"><a href="#16-å†…å­˜æ³„æ¼-vs-å†…å­˜æº¢å‡º" class="headerlink" title="16. å†…å­˜æ³„æ¼ vs å†…å­˜æº¢å‡º"></a><strong>16. å†…å­˜æ³„æ¼ vs å†…å­˜æº¢å‡º</strong></h2><ul><li><strong>å†…å­˜æ³„æ¼</strong>ï¼šå¯¹è±¡ä¸å†ä½¿ç”¨ï¼Œä½†ä»æœ‰å¼•ç”¨</li><li><strong>å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰</strong>ï¼šç”³è¯·å†…å­˜å¤±è´¥</li></ul><hr><h2 id="17-é€ƒé€¸åˆ†æ"><a href="#17-é€ƒé€¸åˆ†æ" class="headerlink" title="17. é€ƒé€¸åˆ†æ"></a><strong>17. é€ƒé€¸åˆ†æ</strong></h2><ul><li><strong>ä½œç”¨</strong>ï¼š<ul><li>åˆ†æå¯¹è±¡ä½œç”¨åŸŸ</li><li>æ ˆä¸Šåˆ†é…ã€é”æ¶ˆé™¤ã€åŒæ­¥ä¼˜åŒ–</li></ul></li><li><strong>JVM ä¼˜åŒ–</strong>ï¼š<ul><li>æ ˆä¸Šåˆ†é…ï¼ˆä¸å…¥å †ï¼‰</li><li>å»æ‰æ— ç”¨é”ï¼ˆé”æ¶ˆé™¤ï¼‰</li></ul></li></ul><hr><h2 id="18-æ–¹æ³•å†…è”"><a href="#18-æ–¹æ³•å†…è”" class="headerlink" title="18. æ–¹æ³•å†…è”"></a><strong>18. æ–¹æ³•å†…è”</strong></h2><ul><li>JIT ä¼˜åŒ–</li><li>å°æ–¹æ³•ç›´æ¥æ›¿æ¢è°ƒç”¨ï¼Œå‡å°‘æ–¹æ³•è°ƒç”¨å¼€é”€</li><li>å¢åŠ  CPU æŒ‡ä»¤å±€éƒ¨æ€§ï¼Œæé«˜æ€§èƒ½</li></ul><hr><h2 id="19-JIT-ç¼–è¯‘å™¨ä¼˜åŒ–"><a href="#19-JIT-ç¼–è¯‘å™¨ä¼˜åŒ–" class="headerlink" title="19. JIT ç¼–è¯‘å™¨ä¼˜åŒ–"></a><strong>19. JIT ç¼–è¯‘å™¨ä¼˜åŒ–</strong></h2><ul><li>æ–¹æ³•å†…è”</li><li>å¾ªç¯å±•å¼€</li><li>é€ƒé€¸åˆ†æ</li><li>å¸¸é‡æŠ˜å </li><li>é€ƒé€¸åˆ†æ + æ ˆä¸Šåˆ†é…</li></ul><hr><h2 id="20-Safepoint-æœºåˆ¶"><a href="#20-Safepoint-æœºåˆ¶" class="headerlink" title="20. Safepoint æœºåˆ¶"></a><strong>20. Safepoint æœºåˆ¶</strong></h2><ul><li>æ‰€æœ‰çº¿ç¨‹æš‚åœï¼Œè¿›è¡Œ GC æˆ–å…¶ä»–å…¨å±€æ“ä½œ</li><li>JVM å¯å®‰å…¨ä¿®æ”¹çº¿ç¨‹çŠ¶æ€</li></ul><hr><h2 id="21-Stop-The-World-STW"><a href="#21-Stop-The-World-STW" class="headerlink" title="21. Stop The World (STW)"></a><strong>21. Stop The World (STW)</strong></h2><ul><li><strong>å®šä¹‰</strong>ï¼šæš‚åœæ‰€æœ‰ç”¨æˆ·çº¿ç¨‹è¿›è¡Œ GC æˆ–å…¶ä»– JVM å†…éƒ¨æ“ä½œ</li><li><strong>å½±å“</strong>ï¼šåº”ç”¨åœé¡¿ï¼Œä½å»¶è¿Ÿåœºæ™¯éœ€æ§åˆ¶ STW æ—¶é—´</li></ul><hr><h2 id="22-Finalize-æ–¹æ³•é—®é¢˜"><a href="#22-Finalize-æ–¹æ³•é—®é¢˜" class="headerlink" title="22. Finalize æ–¹æ³•é—®é¢˜"></a><strong>22. Finalize æ–¹æ³•é—®é¢˜</strong></h2><ul><li>ä¸ç¡®å®šæ‰§è¡Œæ—¶é—´</li><li>æ€§èƒ½å¼€é”€å¤§</li><li>å¯å¯¼è‡´å¯¹è±¡â€œå¤æ´»â€ï¼Œå¢åŠ å†…å­˜å‹åŠ›</li><li><strong>æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼štry-with-resources &#x2F; Cleaner</li></ul><hr><h2 id="23-JVM-å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯å›æ”¶"><a href="#23-JVM-å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯å›æ”¶" class="headerlink" title="23. JVM å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯å›æ”¶"></a><strong>23. JVM å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯å›æ”¶</strong></h2><ul><li><strong>å¯è¾¾æ€§åˆ†æ</strong>ï¼šä» GC Roots å‡ºå‘ï¼Œæœªè¢«å¯è¾¾çš„å¯¹è±¡å¯å›æ”¶</li></ul><hr><h2 id="24-TLABï¼ˆThread-Local-Allocation-Bufferï¼‰ä½œç”¨"><a href="#24-TLABï¼ˆThread-Local-Allocation-Bufferï¼‰ä½œç”¨" class="headerlink" title="24. TLABï¼ˆThread Local Allocation Bufferï¼‰ä½œç”¨"></a><strong>24. TLABï¼ˆThread Local Allocation Bufferï¼‰ä½œç”¨</strong></h2><ul><li>æ¯ä¸ªçº¿ç¨‹ç‹¬äº«ä¸€å— Eden å†…å­˜</li><li><strong>ä½œç”¨</strong>ï¼š<ul><li>å‡å°‘å¤šçº¿ç¨‹ç«äº‰</li><li>æé«˜å¯¹è±¡åˆ†é…æ•ˆç‡</li></ul></li></ul><hr><h2 id="25-Direct-Memory-ä¸ºä»€ä¹ˆä¼š-OOM"><a href="#25-Direct-Memory-ä¸ºä»€ä¹ˆä¼š-OOM" class="headerlink" title="25. Direct Memory ä¸ºä»€ä¹ˆä¼š OOM"></a><strong>25. Direct Memory ä¸ºä»€ä¹ˆä¼š OOM</strong></h2><ul><li>å †å¤–å†…å­˜ä¸è¶³</li><li>NIO Buffer ä½¿ç”¨ <code>Unsafe</code> åˆ†é…</li><li>ä¸å—å †å†…å­˜é™åˆ¶ï¼Œä½† JVM æ— æ³•ç›´æ¥ç®¡ç†</li></ul><hr><h2 id="26-Metaspace-ä½œç”¨"><a href="#26-Metaspace-ä½œç”¨" class="headerlink" title="26. Metaspace ä½œç”¨"></a><strong>26. Metaspace ä½œç”¨</strong></h2><ul><li>å­˜æ”¾ç±»å…ƒæ•°æ®</li><li>Java 8+ æ›¿ä»£æ°¸ä¹…ä»£</li><li>å¯ä»¥é€šè¿‡ <code>-XX:MetaspaceSize</code> é™åˆ¶</li></ul><hr><h2 id="27-Full-GC-è§¦å‘æ¡ä»¶"><a href="#27-Full-GC-è§¦å‘æ¡ä»¶" class="headerlink" title="27. Full GC è§¦å‘æ¡ä»¶"></a><strong>27. Full GC è§¦å‘æ¡ä»¶</strong></h2><ul><li>è€å¹´ä»£ç©ºé—´ä¸è¶³</li><li>æ°¸ä¹…ä»£ &#x2F; å…ƒç©ºé—´ä¸è¶³</li><li>System.gc() è°ƒç”¨</li><li>å†…å­˜åˆ†é…å¤±è´¥</li></ul><hr><h2 id="28-æŸ¥çœ‹-JVM-å†…å­˜ä½¿ç”¨æƒ…å†µ"><a href="#28-æŸ¥çœ‹-JVM-å†…å­˜ä½¿ç”¨æƒ…å†µ" class="headerlink" title="28. æŸ¥çœ‹ JVM å†…å­˜ä½¿ç”¨æƒ…å†µ"></a><strong>28. æŸ¥çœ‹ JVM å†…å­˜ä½¿ç”¨æƒ…å†µ</strong></h2><ul><li><code>jstat -gc &lt;pid&gt;</code></li><li><code>jmap -heap &lt;pid&gt;</code></li><li><code>VisualVM</code> &#x2F; <code>JConsole</code></li><li><code>MAT</code> åˆ†æ heap dump</li></ul><hr><h2 id="29-Arthas-å¸¸ç”¨å‘½ä»¤"><a href="#29-Arthas-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="29. Arthas å¸¸ç”¨å‘½ä»¤"></a><strong>29. Arthas å¸¸ç”¨å‘½ä»¤</strong></h2><ul><li><code>dashboard</code>ï¼šç³»ç»ŸæŒ‡æ ‡</li><li><code>thread</code>ï¼šçº¿ç¨‹çŠ¶æ€</li><li><code>heapdump</code>ï¼šå †è½¬å‚¨</li><li><code>monitor</code>ï¼šæ–¹æ³•è€—æ—¶</li><li><code>watch</code>ï¼šæ–¹æ³•å‚æ•°&#x2F;è¿”å›å€¼</li><li><code>jad</code>ï¼šåç¼–è¯‘ç±»</li></ul><hr><h2 id="30-JVM-è°ƒä¼˜å¸¸è§é¢è¯•é¢˜"><a href="#30-JVM-è°ƒä¼˜å¸¸è§é¢è¯•é¢˜" class="headerlink" title="30. JVM è°ƒä¼˜å¸¸è§é¢è¯•é¢˜"></a><strong>30. JVM è°ƒä¼˜å¸¸è§é¢è¯•é¢˜</strong></h2><ul><li>å †å¤§å°è®¾ç½®ç­–ç•¥</li><li>æ–°ç”Ÿä»£&#x2F;è€å¹´ä»£æ¯”ä¾‹</li><li>GC é€‰æ‹©ï¼ˆG1 &#x2F; CMS &#x2F; Parallelï¼‰</li><li>TLAB ä¸å¯¹è±¡åˆ†é…ä¼˜åŒ–</li><li>Full GC è§¦å‘æ¡ä»¶</li><li>å†…å­˜æ³„æ¼æ’æŸ¥ä¸ MAT ä½¿ç”¨</li></ul><hr><h2 id="å››ã€Spring-Spring-Bootï¼ˆ30é¢˜ï¼‰"><a href="#å››ã€Spring-Spring-Bootï¼ˆ30é¢˜ï¼‰" class="headerlink" title="å››ã€Spring &amp; Spring Bootï¼ˆ30é¢˜ï¼‰"></a>å››ã€Spring &amp; Spring Bootï¼ˆ30é¢˜ï¼‰</h2><h3 id="1-Spring-çš„-IoC-å®¹å™¨åŸç†ï¼Ÿ"><a href="#1-Spring-çš„-IoC-å®¹å™¨åŸç†ï¼Ÿ" class="headerlink" title="1. Spring çš„ IoC å®¹å™¨åŸç†ï¼Ÿ"></a>1. Spring çš„ IoC å®¹å™¨åŸç†ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> IoCï¼ˆæ§åˆ¶åè½¬ï¼‰æ˜¯é€šè¿‡å®¹å™¨ç®¡ç†å¯¹è±¡åˆ›å»ºå’Œä¾èµ–æ³¨å…¥ï¼Œå¼€å‘è€…ä¸éœ€è¦æ‰‹åŠ¨ new å¯¹è±¡ï¼Œè€Œæ˜¯ç”± Spring å®¹å™¨ç»Ÿä¸€ç®¡ç†ã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>IoC å®¹å™¨çš„æ ¸å¿ƒæ˜¯ <strong>BeanFactory</strong> å’Œ <strong>ApplicationContext</strong>ã€‚</li><li>å·¥ä½œæµç¨‹ï¼š<ol><li><strong>é…ç½®è§£æ</strong>ï¼šè¯»å– XML &#x2F; æ³¨è§£ &#x2F; JavaConfigï¼›</li><li><strong>BeanDefinition</strong>ï¼šå°†é…ç½®è½¬æˆ BeanDefinitionï¼›</li><li><strong>Bean å®ä¾‹åŒ–</strong>ï¼šé€šè¿‡åå°„æˆ– CGLIB åˆ›å»ºå¯¹è±¡ï¼›</li><li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šæ ¹æ®æ„é€ æ–¹æ³• &#x2F; Setter &#x2F; @Autowired æ³¨å…¥ä¾èµ–ï¼›</li><li><strong>åˆå§‹åŒ–å›è°ƒ</strong>ï¼šæ‰§è¡Œ BeanPostProcessor &#x2F; InitializingBeanï¼›</li><li><strong>æ”¾å…¥å•ä¾‹æ± </strong>ï¼šå®¹å™¨ä¿å­˜å¯¹è±¡ä¾›å…¨å±€ä½¿ç”¨ã€‚</li></ol></li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>IoC æ˜¯ <strong>ä¾èµ–æŸ¥æ‰¾ï¼ˆDLï¼‰</strong> å’Œ <strong>ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</strong> çš„ç»“åˆã€‚</li><li>é¢è¯•å¯èƒ½è¿½é—®ï¼šSpring å¦‚ä½•å®ç°å»¶è¿ŸåŠ è½½ï¼Ÿï¼ˆ@Lazy + å•ä¾‹æ± ç®¡ç†ï¼‰</li><li>å®æˆ˜ï¼šé…ç½®æ–‡ä»¶å°‘æ—¶ç”¨ XMLï¼Œå¤§é¡¹ç›®æ¨è <strong>JavaConfig + æ³¨è§£</strong>ã€‚</li></ul><hr><h3 id="2-Bean-çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"><a href="#2-Bean-çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ" class="headerlink" title="2. Bean çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"></a>2. Bean çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> åˆ›å»º â†’ å±æ€§æ³¨å…¥ â†’ åˆå§‹åŒ– â†’ ä½¿ç”¨ â†’ é”€æ¯ã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ol><li><strong>å®ä¾‹åŒ–</strong>ï¼šé€šè¿‡åå°„åˆ›å»ºå¯¹è±¡ï¼›</li><li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šæ³¨å…¥å±æ€§ï¼›</li><li><strong>Aware æ¥å£å›è°ƒ</strong>ï¼šå¦‚ BeanNameAwareã€ApplicationContextAwareï¼›</li><li><strong>BeanPostProcessor å‰ç½®å¤„ç†</strong>ï¼šæ¯”å¦‚ @Autowired çš„å¤„ç†ï¼›</li><li><strong>åˆå§‹åŒ–æ–¹æ³•</strong>ï¼š@PostConstruct &#x2F; InitializingBean.afterPropertiesSet() &#x2F; init-methodï¼›</li><li><strong>BeanPostProcessor åç½®å¤„ç†</strong>ï¼›</li><li><strong>å°±ç»ªä½¿ç”¨</strong>ï¼›</li><li><strong>é”€æ¯å›è°ƒ</strong>ï¼š@PreDestroy &#x2F; DisposableBean.destroy() &#x2F; destroy-methodã€‚</li></ol><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•å¸¸è¿½é—®ï¼šSpring å®¹å™¨å…³é—­æ—¶ï¼Œå•ä¾‹ Bean ä¼šè¢«é”€æ¯å—ï¼Ÿï¼ˆä¼šï¼Œè°ƒç”¨ destroy å›è°ƒï¼‰ã€‚</li><li>åŸå‹ä½œç”¨åŸŸ Bean ä¸ä¼šè¢«é”€æ¯ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨ç®¡ç†ã€‚</li></ul><hr><h3 id="3-BeanFactory-å’Œ-ApplicationContext-çš„åŒºåˆ«ï¼Ÿ"><a href="#3-BeanFactory-å’Œ-ApplicationContext-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="3. BeanFactory å’Œ ApplicationContext çš„åŒºåˆ«ï¼Ÿ"></a>3. BeanFactory å’Œ ApplicationContext çš„åŒºåˆ«ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong></p><ul><li><strong>BeanFactory</strong>ï¼šæœ€åŸºç¡€ IoC å®¹å™¨ï¼Œæ‡’åŠ è½½ï¼Œè½»é‡çº§ï¼›</li><li><strong>ApplicationContext</strong>ï¼šç»§æ‰¿ BeanFactoryï¼Œæ”¯æŒ AOPã€å›½é™…åŒ–ã€äº‹ä»¶æœºåˆ¶ã€è‡ªåŠ¨è£…é…ï¼Œé»˜è®¤é¢„å®ä¾‹åŒ–ã€‚</li></ul><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>BeanFactoryï¼šé¢å‘ä½èµ„æºç¯å¢ƒï¼ŒåŠŸèƒ½æœ‰é™ï¼›</li><li>ApplicationContextï¼šå¸¸ç”¨å®ç°æœ‰ ClassPathXmlApplicationContextã€AnnotationConfigApplicationContextã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•å¸¸é—®ï¼šä¸ºä»€ä¹ˆ ApplicationContext é»˜è®¤æ˜¯é¢„åŠ è½½ï¼Ÿï¼ˆå‡å°‘è¿è¡Œæ—¶æ€§èƒ½å¼€é”€ï¼Œå¯åŠ¨æ—¶å®Œæˆä¾èµ–æ£€æŸ¥ï¼‰ã€‚</li></ul><hr><h3 id="4-å•ä¾‹-Bean-å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ"><a href="#4-å•ä¾‹-Bean-å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ" class="headerlink" title="4. å•ä¾‹ Bean å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ"></a>4. å•ä¾‹ Bean å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> Spring <strong>ä¸ä¿è¯å•ä¾‹ Bean çš„çº¿ç¨‹å®‰å…¨</strong>ï¼Œéœ€è¦å¼€å‘è€…åœ¨ä»£ç ä¸­ä¿è¯ã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>IoC å®¹å™¨ä¸­çš„å•ä¾‹ Bean æ˜¯ <strong>å¤šçº¿ç¨‹å…±äº«çš„</strong>ï¼›</li><li>å¸¸è§çš„çº¿ç¨‹å®‰å…¨æªæ–½ï¼š<ol><li><strong>æ— çŠ¶æ€è®¾è®¡</strong>ï¼ˆæ¨èï¼‰ï¼›</li><li><strong>ä½¿ç”¨ ThreadLocal ä¿å­˜çŠ¶æ€</strong>ï¼›</li><li><strong>æ–¹æ³•å†…éƒ¨ä½¿ç”¨å±€éƒ¨å˜é‡</strong>ï¼›</li><li><strong>å¿…è¦æ—¶åŠ é”ï¼ˆsynchronized &#x2F; Lockï¼‰</strong>ã€‚</li></ol></li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•é™·é˜±ï¼šSpring å•ä¾‹ Bean æ˜¯ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿç­”ï¼šä¸æ˜¯ã€‚</li><li>ä¾‹å­ï¼šControllerã€Service é€šå¸¸æ˜¯æ— çŠ¶æ€çš„ï¼Œå¯ä»¥å®‰å…¨å•ä¾‹ã€‚</li></ul><hr><h3 id="5-Spring-AOP-çš„å®ç°åŸç†ï¼Ÿ"><a href="#5-Spring-AOP-çš„å®ç°åŸç†ï¼Ÿ" class="headerlink" title="5. Spring AOP çš„å®ç°åŸç†ï¼Ÿ"></a>5. Spring AOP çš„å®ç°åŸç†ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰é€šè¿‡ <strong>åŠ¨æ€ä»£ç†</strong> å®ç°ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰åæ’å…¥å¢å¼ºé€»è¾‘ã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>å®ç°æ–¹å¼ï¼š<ol><li><strong>JDK åŠ¨æ€ä»£ç†</strong>ï¼šåŸºäºæ¥å£ï¼›</li><li><strong>CGLIB ä»£ç†</strong>ï¼šåŸºäºå­ç±»å­—èŠ‚ç å¢å¼ºã€‚</li></ol></li><li>AOP æ ¸å¿ƒç»„ä»¶ï¼š<ul><li>JoinPointï¼ˆè¿æ¥ç‚¹ï¼‰ã€Pointcutï¼ˆåˆ‡ç‚¹ï¼‰ã€Adviceï¼ˆé€šçŸ¥ï¼‰ã€Weavingï¼ˆç»‡å…¥ï¼‰ã€Proxyï¼ˆä»£ç†å¯¹è±¡ï¼‰ã€‚</li></ul></li><li>AOP æµç¨‹ï¼šè°ƒç”¨ç›®æ ‡æ–¹æ³• â†’ ä»£ç†å¯¹è±¡æ‹¦æˆª â†’ æ‰§è¡Œåˆ‡é¢é€»è¾‘ â†’ ç»§ç»­æ‰§è¡ŒåŸæ–¹æ³•ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•å®˜å¯èƒ½é—®ï¼šSpring é»˜è®¤ç”¨å“ªç§ä»£ç†ï¼Ÿ<ul><li>å¦‚æœæœ‰æ¥å£ â†’ JDK åŠ¨æ€ä»£ç†ï¼›</li><li>æ²¡æœ‰æ¥å£ â†’ CGLIBã€‚</li></ul></li><li>JDK ä»£ç†åªèƒ½åŸºäºæ¥å£ï¼ŒCGLIB å¯ä»¥åŸºäºç±»ã€‚</li></ul><hr><h3 id="6-JDK-åŠ¨æ€ä»£ç†å’Œ-CGLIB-çš„åŒºåˆ«ï¼Ÿ"><a href="#6-JDK-åŠ¨æ€ä»£ç†å’Œ-CGLIB-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="6. JDK åŠ¨æ€ä»£ç†å’Œ CGLIB çš„åŒºåˆ«ï¼Ÿ"></a>6. JDK åŠ¨æ€ä»£ç†å’Œ CGLIB çš„åŒºåˆ«ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong></p><ul><li>JDKï¼šåŸºäºæ¥å£ï¼Œç”Ÿæˆå®ç°ç±»ï¼›</li><li>CGLIBï¼šåŸºäºç»§æ‰¿ï¼Œç”Ÿæˆå­ç±»å­—èŠ‚ç ã€‚</li></ul><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>JDK åŠ¨æ€ä»£ç†ï¼šåˆ©ç”¨ <code>Proxy.newProxyInstance</code>ï¼Œæ€§èƒ½è¾ƒé«˜ï¼›</li><li>CGLIBï¼šåˆ©ç”¨ ASM å­—èŠ‚ç æ“ä½œç”Ÿæˆå­ç±»ï¼Œæ€§èƒ½ç¨æ…¢ï¼Œä½†æ”¯æŒç±»ä»£ç†ï¼›</li><li>Spring é»˜è®¤ä¼˜å…ˆä½¿ç”¨ JDKï¼Œå¦‚æœæ²¡æœ‰æ¥å£å†ç”¨ CGLIBã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é™åˆ¶ï¼šCGLIB æ— æ³•ä»£ç† <code>final</code> ç±» &#x2F; <code>final</code> æ–¹æ³•ï¼›</li><li>Spring Boot å¯é€šè¿‡ <code>spring.aop.proxy-target-class=true</code> å¼ºåˆ¶ä½¿ç”¨ CGLIBã€‚</li></ul><hr><h3 id="7-Spring-äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶ï¼Ÿ"><a href="#7-Spring-äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶ï¼Ÿ" class="headerlink" title="7. Spring äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶ï¼Ÿ"></a>7. Spring äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> äº‹åŠ¡ä¼ æ’­æœºåˆ¶å®šä¹‰äº†æ–¹æ³•åœ¨è°ƒç”¨æ—¶äº‹åŠ¡çš„è¾¹ç•Œï¼Œå¸¸è§ç±»å‹ï¼š</p><ul><li>REQUIREDï¼ˆé»˜è®¤ï¼‰ã€REQUIRES_NEWã€NESTEDã€SUPPORTSã€NOT_SUPPORTEDã€MANDATORYã€NEVERã€‚</li></ul><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li><strong>REQUIRED</strong>ï¼šæœ‰äº‹åŠ¡å°±åŠ å…¥ï¼Œæ²¡æœ‰å°±æ–°å»ºï¼›</li><li><strong>REQUIRES_NEW</strong>ï¼šæŒ‚èµ·å½“å‰äº‹åŠ¡ï¼Œæ–°å»ºä¸€ä¸ªï¼›</li><li><strong>NESTED</strong>ï¼šåµŒå¥—äº‹åŠ¡ï¼ˆä¾èµ–ä¿å­˜ç‚¹ rollbackï¼‰ï¼›</li><li><strong>SUPPORTS</strong>ï¼šæœ‰å°±ç”¨ï¼Œæ²¡æœ‰å°±ä¸ç”¨ï¼›</li><li><strong>NOT_SUPPORTED</strong>ï¼šæŒ‚èµ·äº‹åŠ¡ï¼Œä»¥éäº‹åŠ¡è¿è¡Œï¼›</li><li><strong>MANDATORY</strong>ï¼šå¿…é¡»åœ¨äº‹åŠ¡ä¸­è°ƒç”¨ï¼›</li><li><strong>NEVER</strong>ï¼šå¿…é¡»åœ¨éäº‹åŠ¡ä¸­è¿è¡Œã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•é™·é˜±ï¼šåµŒå¥—äº‹åŠ¡å’Œæ–°äº‹åŠ¡çš„åŒºåˆ«ï¼Ÿ<ul><li>åµŒå¥—äº‹åŠ¡ä¾èµ–å¤–å±‚äº‹åŠ¡å›æ»šï¼›</li><li>æ–°äº‹åŠ¡äº’ç›¸ç‹¬ç«‹ã€‚</li></ul></li></ul><hr><h3 id="8-Spring-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿ"><a href="#8-Spring-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿ" class="headerlink" title="8. Spring äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿ"></a>8. Spring äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> äº‹åŠ¡éš”ç¦»çº§åˆ«è§£å†³å¹¶å‘é—®é¢˜ï¼ŒSpring æ”¯æŒæ•°æ®åº“çš„ 5 ç§éš”ç¦»çº§åˆ«ï¼š</p><ul><li>DEFAULTï¼ˆæ•°æ®åº“é»˜è®¤ï¼‰</li><li>READ_UNCOMMITTEDï¼ˆå¯èƒ½è„è¯»ï¼‰</li><li>READ_COMMITTEDï¼ˆé˜²è„è¯»ï¼‰</li><li>REPEATABLE_READï¼ˆé˜²è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼‰</li><li>SERIALIZABLEï¼ˆé˜²è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰</li></ul><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>InnoDB é»˜è®¤æ˜¯ <strong>REPEATABLE_READ</strong>ï¼›</li><li>Oracle é»˜è®¤æ˜¯ <strong>READ_COMMITTED</strong>ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•å¯èƒ½è¿½é—®ï¼šMySQL çš„ REPEATABLE_READ å¦‚ä½•é¿å…å¹»è¯»ï¼Ÿï¼ˆMVCC + é—´éš™é”ï¼‰ã€‚</li></ul><hr><h3 id="9-Transactional-çš„å®ç°åŸç†ï¼Ÿ"><a href="#9-Transactional-çš„å®ç°åŸç†ï¼Ÿ" class="headerlink" title="9. @Transactional çš„å®ç°åŸç†ï¼Ÿ"></a>9. @Transactional çš„å®ç°åŸç†ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> @Transactional é€šè¿‡ <strong>AOP ä»£ç†</strong>ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰åæ§åˆ¶äº‹åŠ¡ã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>Spring å®¹å™¨è§£æ @Transactional â†’ ç”Ÿæˆä»£ç† â†’ åœ¨ä»£ç†æ–¹æ³•é‡Œæ‰§è¡Œäº‹åŠ¡å¢å¼ºé€»è¾‘ï¼š<ol><li>è·å–äº‹åŠ¡ç®¡ç†å™¨ï¼›</li><li>å¼€å¯äº‹åŠ¡ï¼›</li><li>æ‰§è¡Œç›®æ ‡æ–¹æ³•ï¼›</li><li>å¼‚å¸¸å›æ»š &#x2F; æ­£å¸¸æäº¤ï¼›</li><li>æ¸…ç†èµ„æºã€‚</li></ol></li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é»˜è®¤åªå›æ»š RuntimeException å’Œ Errorï¼Œæ£€æŸ¥å¼‚å¸¸éœ€è¦ <code>rollbackFor</code>ã€‚</li><li>é¢è¯•å¸¸é—®ï¼šä¸ºä»€ä¹ˆ @Transactional æ–¹æ³•ç”¨ <code>private</code> ä¿®é¥°æ— æ•ˆï¼Ÿ<br> â†’ å› ä¸º AOP ä»£ç†æ— æ³•æ‹¦æˆª private æ–¹æ³•ã€‚</li></ul><hr><h3 id="10-å¾ªç¯ä¾èµ–å¦‚ä½•è§£å†³ï¼Ÿ"><a href="#10-å¾ªç¯ä¾èµ–å¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="10. å¾ªç¯ä¾èµ–å¦‚ä½•è§£å†³ï¼Ÿ"></a>10. å¾ªç¯ä¾èµ–å¦‚ä½•è§£å†³ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> Spring é€šè¿‡ <strong>ä¸‰çº§ç¼“å­˜</strong> è§£å†³å•ä¾‹ Bean çš„å¾ªç¯ä¾èµ–ã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>ä¸‰çº§ç¼“å­˜ï¼š<ol><li>singletonObjectsï¼ˆæˆå“å¯¹è±¡ï¼‰</li><li>earlySingletonObjectsï¼ˆæå‰æš´éœ²çš„å¯¹è±¡ï¼ŒåŠæˆå“ï¼‰</li><li>singletonFactoriesï¼ˆå¯¹è±¡å·¥å‚ï¼Œæä¾›ä»£ç†å¯¹è±¡ï¼‰</li></ol></li><li>æµç¨‹ï¼šA â†’ ä¾èµ– B â†’ B ä¾èµ– A â†’ æå‰æš´éœ² A çš„å¼•ç”¨ç»™ B â†’ ä¾èµ–æ³¨å…¥æˆåŠŸã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>åªèƒ½è§£å†³ <strong>å•ä¾‹ + setter æ³¨å…¥</strong> çš„å¾ªç¯ä¾èµ–ï¼›</li><li><strong>æ„é€ å™¨æ³¨å…¥å¾ªç¯ä¾èµ–</strong> æ— æ³•è§£å†³ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li></ul><h3 id="11-Spring-çš„ä¸‰çº§ç¼“å­˜è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#11-Spring-çš„ä¸‰çº§ç¼“å­˜è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title="11. Spring çš„ä¸‰çº§ç¼“å­˜è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>11. Spring çš„ä¸‰çº§ç¼“å­˜è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> è§£å†³ <strong>å•ä¾‹ Bean çš„å¾ªç¯ä¾èµ–</strong>ï¼Œä¿è¯åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­èƒ½æå‰æš´éœ²ä»£ç†å¯¹è±¡ã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>Spring å•ä¾‹æ± ç»´æŠ¤äº† <strong>ä¸‰çº§ç¼“å­˜</strong>ï¼š<ol><li><code>singletonObjects</code> â†’ ä¸€çº§ç¼“å­˜ï¼ˆå®Œå…¨åˆå§‹åŒ–çš„å•ä¾‹ï¼‰ï¼›</li><li><code>earlySingletonObjects</code> â†’ äºŒçº§ç¼“å­˜ï¼ˆæå‰æš´éœ²çš„åŠæˆå“å¯¹è±¡ï¼‰ï¼›</li><li><code>singletonFactories</code> â†’ ä¸‰çº§ç¼“å­˜ï¼ˆå¯¹è±¡å·¥å‚ï¼Œé€šå¸¸ç”Ÿæˆä»£ç†å¯¹è±¡ï¼‰ã€‚</li></ol></li><li>æµç¨‹ï¼š<ul><li>å½“ A ä¾èµ– Bï¼ŒB åˆä¾èµ– A æ—¶ï¼š<ol><li>åˆ›å»º A â†’ æ”¾å…¥ä¸‰çº§ç¼“å­˜ï¼›</li><li>B ä¾èµ– A æ—¶ï¼Œå…ˆä»ä¸‰çº§ç¼“å­˜æ‹¿åˆ° A çš„å·¥å‚ï¼Œæš´éœ²æå‰ä»£ç†å¯¹è±¡ â†’ æ”¾å…¥äºŒçº§ç¼“å­˜ï¼›</li><li>ç­‰ A å®Œæˆåˆå§‹åŒ–åï¼Œæ›¿æ¢ä¸ºä¸€çº§ç¼“å­˜ã€‚</li></ol></li></ul></li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•å®˜å¯èƒ½è¿½é—®ï¼šä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼Œä¸æ˜¯äºŒçº§å°±å¤Ÿäº†å—ï¼Ÿ<br> â†’ å› ä¸º AOP ä»£ç†å¯¹è±¡éœ€è¦é€šè¿‡å·¥å‚æå‰æš´éœ²ï¼Œä¸èƒ½åªæ”¾åŠæˆå“å¯¹è±¡ã€‚</li><li>åªæ”¯æŒ <strong>setter æ³¨å…¥çš„å¾ªç¯ä¾èµ–</strong>ï¼Œä¸æ”¯æŒ <strong>æ„é€ å‡½æ•°å¾ªç¯ä¾èµ–</strong>ã€‚</li></ul><hr><h3 id="12-Spring-MVC-çš„å·¥ä½œæµç¨‹ï¼Ÿ"><a href="#12-Spring-MVC-çš„å·¥ä½œæµç¨‹ï¼Ÿ" class="headerlink" title="12. Spring MVC çš„å·¥ä½œæµç¨‹ï¼Ÿ"></a>12. Spring MVC çš„å·¥ä½œæµç¨‹ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> è¯·æ±‚ â†’ DispatcherServlet â†’ HandlerMapping â†’ HandlerAdapter â†’ Controller â†’ ViewResolver â†’ å“åº”ã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ol><li>ç”¨æˆ·è¯·æ±‚åˆ°è¾¾ DispatcherServletï¼›</li><li>DispatcherServlet è°ƒç”¨ HandlerMapping å¯»æ‰¾å¤„ç†å™¨ï¼›</li><li>é€šè¿‡ HandlerAdapter è°ƒç”¨å…·ä½“ Controllerï¼›</li><li>Controller æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œè¿”å› ModelAndViewï¼›</li><li>ViewResolver è§£æè§†å›¾ï¼›</li><li>DispatcherServlet æ¸²æŸ“å¹¶è¿”å›å“åº”ç»™å®¢æˆ·ç«¯ã€‚</li></ol><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•å®˜å¸¸é—®ï¼šDispatcherServlet æ˜¯å•ä¾‹è¿˜æ˜¯å¤šä¾‹ï¼Ÿï¼ˆå•ä¾‹ï¼Œçº¿ç¨‹å®‰å…¨ä¾èµ–äºæ— çŠ¶æ€è®¾è®¡ï¼‰ã€‚</li><li>å®æˆ˜ï¼šå¯ä»¥ç”¨ <code>@RestController</code> ç›´æ¥è¿”å› JSONï¼Œçœç•¥ ViewResolverã€‚</li></ul><hr><h3 id="13-DispatcherServlet-çš„ä½œç”¨ï¼Ÿ"><a href="#13-DispatcherServlet-çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="13. DispatcherServlet çš„ä½œç”¨ï¼Ÿ"></a>13. DispatcherServlet çš„ä½œç”¨ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> Spring MVC çš„ <strong>å‰ç«¯æ§åˆ¶å™¨</strong>ï¼Œè´Ÿè´£è¯·æ±‚åˆ†å‘å’Œå“åº”æ¸²æŸ“ã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>èŒè´£ï¼š<ol><li>æ‹¦æˆªè¯·æ±‚ï¼›</li><li>è°ƒç”¨ HandlerMapping æ‰¾åˆ° Controllerï¼›</li><li>è°ƒç”¨ HandlerAdapter æ‰§è¡Œ Controllerï¼›</li><li>è°ƒç”¨ ViewResolver æ¸²æŸ“è§†å›¾ï¼›</li><li>è¿”å›å“åº”ã€‚</li></ol></li><li>æ ¸å¿ƒæ€æƒ³ï¼š<strong>ç»Ÿä¸€å…¥å£ï¼Œé›†ä¸­æ§åˆ¶</strong>ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•è¿½é—®ï¼šDispatcherServlet åœ¨ Spring Boot ä¸­æ€ä¹ˆæ³¨å†Œçš„ï¼Ÿ<br> â†’ è‡ªåŠ¨é…ç½®ç±» <code>DispatcherServletAutoConfiguration</code> æ³¨å†Œã€‚</li></ul><hr><h3 id="14-Spring-Boot-çš„è‡ªåŠ¨è£…é…åŸç†ï¼Ÿ"><a href="#14-Spring-Boot-çš„è‡ªåŠ¨è£…é…åŸç†ï¼Ÿ" class="headerlink" title="14. Spring Boot çš„è‡ªåŠ¨è£…é…åŸç†ï¼Ÿ"></a>14. Spring Boot çš„è‡ªåŠ¨è£…é…åŸç†ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> åŸºäº <code>@EnableAutoConfiguration</code> + <code>SpringFactoriesLoader</code> å®ç°ï¼Œæ ¹æ® classpath æ¡ä»¶åŠ è½½é…ç½®ç±»ã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ol><li><code>@SpringBootApplication</code> â†’ å¯ç”¨ <code>@EnableAutoConfiguration</code>ï¼›</li><li><code>SpringFactoriesLoader</code> è¯»å– <code>META-INF/spring.factories</code> æ–‡ä»¶ï¼›</li><li>æ ¹æ® <code>@Conditional</code> æ³¨è§£åˆ¤æ–­æ˜¯å¦åŠ è½½ï¼›</li><li>æŠŠåŒ¹é…çš„ Bean æ³¨å†Œåˆ°å®¹å™¨ã€‚</li></ol><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•å®˜å¯èƒ½è¿½é—®ï¼šæ€ä¹ˆç¦ç”¨æŸä¸ªè‡ªåŠ¨é…ç½®ï¼Ÿ<br> â†’ <code>@SpringBootApplication(exclude = &#123;DataSourceAutoConfiguration.class&#125;)</code></li><li>æˆ–è€…åœ¨ <code>application.yml</code> ä¸­é…ç½® <code>spring.autoconfigure.exclude</code>ã€‚</li></ul><hr><h3 id="15-Spring-Boot-Starter-çš„æœºåˆ¶ï¼Ÿ"><a href="#15-Spring-Boot-Starter-çš„æœºåˆ¶ï¼Ÿ" class="headerlink" title="15. Spring Boot Starter çš„æœºåˆ¶ï¼Ÿ"></a>15. Spring Boot Starter çš„æœºåˆ¶ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> Starter æ˜¯ä¸€ç»„ <strong>ä¾èµ–å°è£… + è‡ªåŠ¨é…ç½®</strong>ï¼Œç®€åŒ–ç¬¬ä¸‰æ–¹åº“é›†æˆã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>å‘½åè§„èŒƒï¼š<code>spring-boot-starter-xxx</code>ï¼›</li><li>ä¾èµ– Starter â†’ è‡ªåŠ¨å¼•å…¥å¿…è¦ä¾èµ– + è‡ªåŠ¨è£…é…ç±»ï¼›</li><li>ä¾‹å­ï¼š<code>spring-boot-starter-web</code> â†’ å¼•å…¥ Spring MVC + Tomcat + Jacksonï¼Œå¹¶è‡ªåŠ¨é…ç½® DispatcherServletã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•å®˜å¸¸é—®ï¼šæ€ä¹ˆå†™ä¸€ä¸ªè‡ªå®šä¹‰ Starterï¼Ÿ<ol><li>æä¾› <code>AutoConfiguration</code> ç±»ï¼›</li><li>åœ¨ <code>META-INF/spring.factories</code> æ³¨å†Œï¼›</li><li>æ‰“åŒ…å‘å¸ƒã€‚</li></ol></li></ul><hr><h3 id="16-ConfigurationProperties-å’Œ-Value-çš„åŒºåˆ«ï¼Ÿ"><a href="#16-ConfigurationProperties-å’Œ-Value-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="16. @ConfigurationProperties å’Œ @Value çš„åŒºåˆ«ï¼Ÿ"></a>16. @ConfigurationProperties å’Œ @Value çš„åŒºåˆ«ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong></p><ul><li><code>@Value</code>ï¼šå•ä¸ªå±æ€§æ³¨å…¥ï¼›</li><li><code>@ConfigurationProperties</code>ï¼šæ‰¹é‡ç»‘å®šé…ç½®ï¼Œæ”¯æŒç±»å‹å®‰å…¨ã€‚</li></ul><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li><code>@Value(&quot;$&#123;key&#125;&quot;)</code>ï¼šåªèƒ½æ³¨å…¥å•ä¸ªå€¼ï¼›</li><li><code>@ConfigurationProperties(prefix = &quot;xxx&quot;)</code>ï¼šæŠŠé…ç½®æ–‡ä»¶ä¸­ <code>xxx.*</code> æ˜ å°„åˆ° JavaBeanã€‚</li><li><code>@ConfigurationProperties</code> æ›´é€‚åˆå¤æ‚é…ç½®å¯¹è±¡ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•å®˜å¯èƒ½è¿½é—®ï¼šæ¨èç”¨å“ªä¸ªï¼Ÿ<br> â†’ <code>@ConfigurationProperties</code>ï¼Œå› ä¸ºæ”¯æŒæ ¡éªŒï¼ˆ<code>@Validated</code>ï¼‰ã€IDE æç¤ºã€‚</li><li>å®æˆ˜ï¼šæ•°æ®åº“é…ç½®å¸¸ç”¨ <code>@ConfigurationProperties</code>ã€‚</li></ul><hr><h3 id="17-Spring-Boot-å¦‚ä½•å®ç°çƒ­éƒ¨ç½²ï¼Ÿ"><a href="#17-Spring-Boot-å¦‚ä½•å®ç°çƒ­éƒ¨ç½²ï¼Ÿ" class="headerlink" title="17. Spring Boot å¦‚ä½•å®ç°çƒ­éƒ¨ç½²ï¼Ÿ"></a>17. Spring Boot å¦‚ä½•å®ç°çƒ­éƒ¨ç½²ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> ä¸»è¦é€šè¿‡ <strong>Spring Boot DevTools</strong> æˆ– <strong>JRebel</strong>ã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>DevToolsï¼šç›‘æ§ classpath æ–‡ä»¶å˜åŒ–ï¼Œè§¦å‘ SpringContext é‡å¯ï¼›</li><li>JRebelï¼šå­—èŠ‚ç å¢å¼ºï¼Œåšåˆ°æ— æ„ŸçŸ¥çƒ­æ›¿æ¢ï¼›</li><li>IDEï¼ˆIntelliJ IDEA &#x2F; Eclipseï¼‰ä¹Ÿæ”¯æŒ Build è‡ªåŠ¨ reloadã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>DevTools é€‚åˆå¼€å‘ï¼ŒJRebel æ›´å¼ºå¤§ä½†æ”¶è´¹ã€‚</li><li>ç”Ÿäº§ç¯å¢ƒä¸å»ºè®®çƒ­éƒ¨ç½²ï¼Œè€Œæ˜¯ç°åº¦å‘å¸ƒ&#x2F;æ»šåŠ¨æ›´æ–°ã€‚</li></ul><hr><h3 id="18-Spring-Boot-å¦‚ä½•å¤„ç†é…ç½®æ–‡ä»¶ï¼Ÿ"><a href="#18-Spring-Boot-å¦‚ä½•å¤„ç†é…ç½®æ–‡ä»¶ï¼Ÿ" class="headerlink" title="18. Spring Boot å¦‚ä½•å¤„ç†é…ç½®æ–‡ä»¶ï¼Ÿ"></a>18. Spring Boot å¦‚ä½•å¤„ç†é…ç½®æ–‡ä»¶ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> Spring Boot è¯»å– <code>application.yml/properties</code>ï¼Œå¹¶æ”¯æŒå¤šç¯å¢ƒå’Œä¼˜å…ˆçº§åŠ è½½ã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>é»˜è®¤åŠ è½½é¡ºåºï¼š<ol><li>å‘½ä»¤è¡Œå‚æ•°ï¼›</li><li><code>application.properties</code> &#x2F; <code>application.yml</code>ï¼›</li><li>å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼ˆconfig ç›®å½•ï¼‰ï¼›</li><li>é»˜è®¤é…ç½®ã€‚</li></ol></li><li>æ”¯æŒå¤šç¯å¢ƒï¼š<code>application-dev.yml</code>ã€<code>application-prod.yml</code>ï¼Œé€šè¿‡ <code>spring.profiles.active=dev</code> åˆ‡æ¢ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•å®˜å¯èƒ½é—®ï¼šä¼˜å…ˆçº§è°æœ€é«˜ï¼Ÿ<br> â†’ å‘½ä»¤è¡Œå‚æ•°ã€‚</li><li>å®æˆ˜ï¼šç”Ÿäº§ç¯å¢ƒå¸¸ç”¨å¤–éƒ¨åŒ–é…ç½®ï¼ˆå¦‚ <code>--spring.config.location</code>ï¼‰ã€‚</li></ul><hr><h3 id="19-Conditional-æ³¨è§£çš„ä½œç”¨ï¼Ÿ"><a href="#19-Conditional-æ³¨è§£çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="19. @Conditional æ³¨è§£çš„ä½œç”¨ï¼Ÿ"></a>19. @Conditional æ³¨è§£çš„ä½œç”¨ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong><br> ç”¨äº <strong>æ¡ä»¶è£…é…</strong>ï¼Œæ ¹æ®ç¯å¢ƒ &#x2F; é…ç½® &#x2F; Bean æ˜¯å¦å­˜åœ¨å†³å®šæ˜¯å¦åŠ è½½ Beanã€‚</p><p><strong>æ·±å…¥è§£æï¼š</strong></p><ul><li>å¸¸è§å®ç°ï¼š<ul><li><code>@ConditionalOnClass</code>ï¼ˆç±»å­˜åœ¨æ—¶è£…é…ï¼‰ï¼›</li><li><code>@ConditionalOnMissingBean</code>ï¼ˆæ²¡æœ‰ Bean æ—¶è£…é…ï¼‰ï¼›</li><li><code>@ConditionalOnProperty</code>ï¼ˆé…ç½®é¡¹æ»¡è¶³æ¡ä»¶æ—¶è£…é…ï¼‰ï¼›</li><li><code>@ConditionalOnWebApplication</code>ã€‚</li></ul></li><li>å¹¿æ³›ç”¨äºè‡ªåŠ¨é…ç½®ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•è¿½é—®ï¼šæ€ä¹ˆå†™è‡ªå®šä¹‰æ¡ä»¶ï¼Ÿ<br> â†’ å®ç° <code>Condition</code> æ¥å£ï¼Œé‡å†™ <code>matches()</code> æ–¹æ³•ã€‚</li></ul><hr><h3 id="20-Spring-Boot-å¸¸è§çš„ä¼˜åŒ–ç‚¹ï¼Ÿ"><a href="#20-Spring-Boot-å¸¸è§çš„ä¼˜åŒ–ç‚¹ï¼Ÿ" class="headerlink" title="20. Spring Boot å¸¸è§çš„ä¼˜åŒ–ç‚¹ï¼Ÿ"></a>20. Spring Boot å¸¸è§çš„ä¼˜åŒ–ç‚¹ï¼Ÿ</h3><p><strong>æ ¸å¿ƒå›ç­”ï¼š</strong></p><ul><li>å¯åŠ¨ä¼˜åŒ–ï¼šæ‡’åŠ è½½ã€è£å‰ª Starterï¼›</li><li>å†…å­˜ä¼˜åŒ–ï¼šå‡å° Bean æ•°é‡ã€å¼•å…¥è½»é‡ç»„ä»¶ï¼›</li><li>æ•°æ®åº“ä¼˜åŒ–ï¼šè¿æ¥æ± ã€æ‰¹é‡æ“ä½œï¼›</li><li>ç”Ÿäº§ä¼˜åŒ–ï¼šActuator ç›‘æ§ã€å¤–éƒ¨åŒ–é…ç½®ã€‚</li></ul><p><strong>æ·±å…¥è§£æï¼š</strong></p><ol><li><strong>å¯åŠ¨æ€§èƒ½</strong>ï¼š<code>spring.main.lazy-initialization=true</code>ï¼›</li><li><strong>æ•°æ®åº“æ€§èƒ½</strong>ï¼šHikariCP è¿æ¥æ± ã€æ‰¹å¤„ç† SQLï¼›</li><li><strong>ç¼“å­˜ä¼˜åŒ–</strong>ï¼šæ•´åˆ Redisã€Caffeineï¼›</li><li><strong>æ—¥å¿—ä¼˜åŒ–</strong>ï¼šå¼‚æ­¥æ—¥å¿—ï¼ˆLogback AsyncAppenderï¼‰ï¼›</li><li><strong>éƒ¨ç½²ä¼˜åŒ–</strong>ï¼šåˆ†å±‚æ„å»ºï¼ˆLayered Jarï¼‰ã€Docker é•œåƒåŠ é€Ÿã€‚</li></ol><p><strong>å»¶ä¼¸æ€è€ƒï¼š</strong></p><ul><li>é¢è¯•å¸¸é—®ï¼šSpring Boot ä¸ºä»€ä¹ˆå¯åŠ¨æ¯” Spring æ…¢ï¼Ÿ<br> â†’ å› ä¸ºè¦åšè‡ªåŠ¨è£…é…å’Œç¯å¢ƒæ‰«æã€‚</li><li>å®æˆ˜ï¼šç”Ÿäº§ä¸­å¯ç”¨ <code>spring-context-indexer</code> åŠ å¿«å¯åŠ¨ã€‚</li></ul><hr><h3 id="21-Spring-Boot-çš„è‡ªåŠ¨é…ç½®åŸç†"><a href="#21-Spring-Boot-çš„è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="21. Spring Boot çš„è‡ªåŠ¨é…ç½®åŸç†"></a><strong>21. Spring Boot çš„è‡ªåŠ¨é…ç½®åŸç†</strong></h3><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Spring Boot çš„è‡ªåŠ¨é…ç½®åŸºäº <strong>SpringFactoriesLoader + @EnableAutoConfiguration + æ¡ä»¶æ³¨è§£ï¼ˆ@ConditionalXXXï¼‰</strong>ã€‚<br> å®ƒä¼šæ ¹æ® classpath ä¸­ä¾èµ–çš„ jar åŒ…å’Œå·²æœ‰ Bean è‡ªåŠ¨è£…é…æ‰€éœ€çš„é…ç½®ã€‚</p><p><strong>æ·±å…¥è§£æ</strong></p><ol><li><strong>å…³é”®å…¥å£</strong>ï¼š<ul><li><code>@SpringBootApplication</code> â†’ <code>@EnableAutoConfiguration</code> â†’ <code>AutoConfigurationImportSelector</code>ã€‚</li></ul></li><li><strong>é…ç½®æ¥æº</strong>ï¼š<ul><li><code>META-INF/spring.factories</code> æˆ– <code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>ã€‚</li></ul></li><li><strong>æ¡ä»¶è£…é…</strong>ï¼š<ul><li>é€šè¿‡ <code>@ConditionalOnClass</code>ã€<code>@ConditionalOnMissingBean</code> ç­‰æ¥é¿å…é‡å¤é…ç½®ã€‚</li></ul></li><li><strong>è¿è¡Œæ—¶æµç¨‹</strong>ï¼š<ul><li>å¯åŠ¨æ—¶åŠ è½½æ‰€æœ‰å€™é€‰é…ç½®ç±» â†’ æ ¹æ®æ¡ä»¶ç­›é€‰ â†’ æ³¨å†Œ BeanDefinition â†’ å®ä¾‹åŒ– Beanã€‚</li></ul></li></ol><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•è¿½é—®ï¼šå¦‚ä½•æ’æŸ¥â€œä¸ºä»€ä¹ˆæŸä¸ª Bean æ²¡æœ‰ç”Ÿæ•ˆâ€ï¼Ÿ<br> â†’ ä½¿ç”¨ <code>--debug</code> å‚æ•°æŸ¥çœ‹ <strong>è‡ªåŠ¨é…ç½®æŠ¥å‘Š</strong>ã€‚</li><li>å®æˆ˜ï¼šå¦‚æœä¸æƒ³åŠ è½½æŸä¸ªè‡ªåŠ¨é…ç½®ï¼Œå¯ä»¥ç”¨ <code>@SpringBootApplication(exclude=XXXAutoConfiguration.class)</code>ã€‚</li></ul><hr><h3 id="22-Spring-Boot-çš„å¯åŠ¨æµç¨‹"><a href="#22-Spring-Boot-çš„å¯åŠ¨æµç¨‹" class="headerlink" title="22. Spring Boot çš„å¯åŠ¨æµç¨‹"></a><strong>22. Spring Boot çš„å¯åŠ¨æµç¨‹</strong></h3><p><strong>æ ¸å¿ƒå›ç­”</strong><br> å¯åŠ¨æµç¨‹ï¼š</p><ol><li>åˆ›å»º <code>SpringApplication</code> å¯¹è±¡ã€‚</li><li>å‡†å¤‡ç¯å¢ƒï¼ˆEnvironmentï¼‰ã€‚</li><li>åŠ è½½ ApplicationContextã€‚</li><li>è°ƒç”¨è‡ªåŠ¨é…ç½®ã€‚</li><li>å¯åŠ¨å†…åµŒå®¹å™¨ï¼ˆTomcat&#x2F;Jetty&#x2F;Nettyï¼‰ã€‚</li><li>æ‰§è¡Œ <code>CommandLineRunner</code> å’Œ <code>ApplicationRunner</code>ã€‚</li></ol><p><strong>æ·±å…¥è§£æ</strong></p><ul><li><strong>æºç å…¥å£</strong>ï¼š<code>SpringApplication.run()</code>ã€‚</li><li><strong>äº‹ä»¶ç›‘å¬</strong>ï¼š<ul><li><code>ApplicationStartingEvent</code>ï¼ˆæœ€æ—©äº‹ä»¶ï¼‰ï¼Œ</li><li><code>ApplicationReadyEvent</code>ï¼ˆå¯åŠ¨å®Œæˆï¼‰ã€‚</li></ul></li><li><strong>Bean åŠ è½½</strong>ï¼š<ul><li>å…ˆåŠ è½½ä¸»ç±»æ‰€åœ¨åŒ…åŠå­åŒ…çš„ç»„ä»¶ï¼ˆ<code>@ComponentScan</code>ï¼‰ã€‚</li><li>å†ç»“åˆè‡ªåŠ¨é…ç½®ã€‚</li></ul></li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•å®˜å¯èƒ½é—®ï¼š<strong>Spring Boot å¦‚ä½•æ”¯æŒå¤–éƒ¨é…ç½®ï¼Ÿ</strong><br> â†’ é€šè¿‡ <code>ConfigFileApplicationListener</code> è§£æ <code>application.properties</code> &#x2F; <code>application.yml</code> å¹¶æ³¨å…¥ Environmentã€‚</li></ul><hr><h3 id="23-Spring-Boot-çš„é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº"><a href="#23-Spring-Boot-çš„é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº" class="headerlink" title="23. Spring Boot çš„é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº"></a><strong>23. Spring Boot çš„é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº</strong></h3><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Spring Boot çš„é…ç½®ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š</p><ol><li>å‘½ä»¤è¡Œå‚æ•°</li><li><code>application.properties/yml</code>ï¼ˆåœ¨ <code>config/</code> &gt; å½“å‰ç›®å½• &gt; classpath ä¸‹ï¼‰</li><li>å¤–éƒ¨ç³»ç»Ÿç¯å¢ƒå˜é‡</li><li>JNDIã€ç³»ç»Ÿå±æ€§</li><li>é»˜è®¤é…ç½®</li></ol><p><strong>æ·±å…¥è§£æ</strong></p><ul><li><strong>å¤š profile</strong>ï¼š<code>application-dev.yml</code> ä¼šåœ¨ <code>--spring.profiles.active=dev</code> æ—¶è¦†ç›–é»˜è®¤é…ç½®ã€‚</li><li><strong>ä¼˜å…ˆçº§æ§åˆ¶</strong>ï¼šåŒä¸€å±æ€§å¤šæ¬¡å®šä¹‰æ—¶ï¼Œé«˜ä¼˜å…ˆçº§è¦†ç›–ä½ä¼˜å…ˆçº§ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•è¿½é—®ï¼šå¦‚æœé…ç½®å†²çªï¼Œå¦‚ä½•å¿«é€Ÿå®šä½ï¼Ÿ<br> â†’ å¯åŠ¨æ—¶åŠ å‚æ•° <code>--debug</code>ï¼ŒæŸ¥çœ‹é…ç½®æºå’Œä¼˜å…ˆçº§ã€‚</li></ul><hr><h3 id="24-Spring-Boot-å¦‚ä½•å®ç°çƒ­éƒ¨ç½²"><a href="#24-Spring-Boot-å¦‚ä½•å®ç°çƒ­éƒ¨ç½²" class="headerlink" title="24. Spring Boot å¦‚ä½•å®ç°çƒ­éƒ¨ç½²"></a><strong>24. Spring Boot å¦‚ä½•å®ç°çƒ­éƒ¨ç½²</strong></h3><p><strong>æ ¸å¿ƒå›ç­”</strong><br> é€šè¿‡ <strong>Spring Boot DevTools</strong> æˆ– <strong>JRebel</strong> å®ç°çƒ­éƒ¨ç½²ã€‚</p><p><strong>æ·±å…¥è§£æ</strong></p><ul><li><strong>DevTools åŸç†</strong>ï¼š<ul><li>ä½¿ç”¨ä¸¤ä¸ª ClassLoaderï¼š<ul><li>Base ClassLoaderï¼ˆç¬¬ä¸‰æ–¹ä¾èµ–ä¸ä¼šå˜ï¼‰ï¼Œ</li><li>Restart ClassLoaderï¼ˆè‡ªå·±ä»£ç ï¼Œæ”¹åŠ¨ååªé‡æ–°åŠ è½½ï¼‰ã€‚</li></ul></li></ul></li><li><strong>å±€é™æ€§</strong>ï¼šä¿®æ”¹ä¾èµ–åº“ä¸ä¼šè§¦å‘çƒ­éƒ¨ç½²ï¼Œåªèƒ½é‡å¯ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>å®é™…å¼€å‘ä¸­æ¨èç”¨ <strong>DevTools + IDEA è‡ªåŠ¨æ„å»º</strong>ã€‚</li><li>é¢è¯•è¿½é—®ï¼šç”Ÿäº§ç¯å¢ƒå¦‚ä½•å®ç°çƒ­æ›´æ–°ï¼Ÿ<br> â†’ ä½¿ç”¨ Spring Cloud Config + åŠ¨æ€åˆ·æ–°ï¼ˆ<code>/actuator/refresh</code>ï¼‰ã€‚</li></ul><hr><h3 id="25-Spring-Boot-ä¸­çš„ç›‘æ§å’Œå¥åº·æ£€æŸ¥"><a href="#25-Spring-Boot-ä¸­çš„ç›‘æ§å’Œå¥åº·æ£€æŸ¥" class="headerlink" title="25. Spring Boot ä¸­çš„ç›‘æ§å’Œå¥åº·æ£€æŸ¥"></a><strong>25. Spring Boot ä¸­çš„ç›‘æ§å’Œå¥åº·æ£€æŸ¥</strong></h3><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Spring Boot æä¾› <strong>Actuator æ¨¡å—</strong>ï¼Œå¯ç›‘æ§åº”ç”¨è¿è¡ŒçŠ¶æ€ã€‚</p><p><strong>æ·±å…¥è§£æ</strong></p><ul><li>å¸¸è§ç«¯ç‚¹ï¼š<ul><li><code>/actuator/health</code>ï¼ˆå¥åº·æ£€æŸ¥ï¼‰</li><li><code>/actuator/metrics</code>ï¼ˆæ€§èƒ½æŒ‡æ ‡ï¼‰</li><li><code>/actuator/env</code>ï¼ˆç¯å¢ƒå˜é‡ï¼‰</li><li><code>/actuator/beans</code>ï¼ˆå·²åŠ è½½ Beanï¼‰</li></ul></li><li>å¥åº·æ£€æŸ¥å¯æ‰©å±•ï¼šå®ç° <code>HealthIndicator</code> æ¥å£ï¼Œè‡ªå®šä¹‰æ£€æŸ¥é€»è¾‘ï¼ˆå¦‚ Redisã€MQï¼‰ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•è¿½é—®ï¼šå¦‚ä½•åœ¨ Kubernetes ä¸­ç»“åˆå¥åº·æ£€æŸ¥ï¼Ÿ<br> â†’ é…ç½® <strong>livenessProbe</strong> å’Œ <strong>readinessProbe</strong> è°ƒç”¨ <code>/actuator/health</code>ã€‚</li></ul><hr><h3 id="26-Spring-Boot-å¦‚ä½•é›†æˆæ•°æ®åº“ï¼ˆJDBCã€JPAã€MyBatisï¼‰"><a href="#26-Spring-Boot-å¦‚ä½•é›†æˆæ•°æ®åº“ï¼ˆJDBCã€JPAã€MyBatisï¼‰" class="headerlink" title="26. Spring Boot å¦‚ä½•é›†æˆæ•°æ®åº“ï¼ˆJDBCã€JPAã€MyBatisï¼‰"></a><strong>26. Spring Boot å¦‚ä½•é›†æˆæ•°æ®åº“ï¼ˆJDBCã€JPAã€MyBatisï¼‰</strong></h3><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Spring Boot æä¾› <code>spring-boot-starter-jdbc</code>ã€<code>spring-boot-starter-data-jpa</code> ç­‰ starterï¼Œæ”¯æŒå¼€ç®±å³ç”¨ã€‚</p><p><strong>æ·±å…¥è§£æ</strong></p><ul><li><strong>JDBC</strong>ï¼šç›´æ¥æ“ä½œæ•°æ®åº“ï¼Œç»“åˆ <code>JdbcTemplate</code>ã€‚</li><li><strong>JPA</strong>ï¼šåŸºäº Hibernateï¼Œæ”¯æŒå£°æ˜å¼ ORMï¼ˆ<code>@Entity</code>ï¼‰ã€‚</li><li><strong>MyBatis</strong>ï¼šéœ€å¼•å…¥ç¬¬ä¸‰æ–¹ starterï¼ˆ<code>mybatis-spring-boot-starter</code>ï¼‰ï¼Œç”¨ <code>@MapperScan</code>ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•è¿½é—®ï¼š<strong>Spring Data JPA ä¸ MyBatis åŒºåˆ«ï¼Ÿ</strong><ul><li>JPA â†’ ORM è‡ªåŠ¨åŒ–ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘ã€‚</li><li>MyBatis â†’ SQL æ‰‹å†™ï¼Œçµæ´»å¯æ§ï¼Œé€‚åˆå¤æ‚ä¸šåŠ¡ã€‚</li></ul></li></ul><hr><h3 id="27-Spring-Boot-å¦‚ä½•å®ç°æ—¥å¿—ç®¡ç†"><a href="#27-Spring-Boot-å¦‚ä½•å®ç°æ—¥å¿—ç®¡ç†" class="headerlink" title="27. Spring Boot å¦‚ä½•å®ç°æ—¥å¿—ç®¡ç†"></a><strong>27. Spring Boot å¦‚ä½•å®ç°æ—¥å¿—ç®¡ç†</strong></h3><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Spring Boot é»˜è®¤ä½¿ç”¨ <strong>SLF4J + Logback</strong>ï¼Œå¯æ”¯æŒ Log4j2ã€‚</p><p><strong>æ·±å…¥è§£æ</strong></p><ul><li><strong>é…ç½®æ–¹å¼</strong>ï¼š<ul><li><code>application.yml</code> æˆ– <code>logback-spring.xml</code>ã€‚</li></ul></li><li><strong>æ—¥å¿—çº§åˆ«</strong>ï¼š<code>TRACE</code> &lt; <code>DEBUG</code> &lt; <code>INFO</code> &lt; <code>WARN</code> &lt; <code>ERROR</code>ã€‚</li><li><strong>å¤šç¯å¢ƒæ—¥å¿—</strong>ï¼š<ul><li><code>logback-spring.xml</code> + <code>springProfile</code> æ ‡ç­¾å¯åŒºåˆ† dev &#x2F; prodã€‚</li></ul></li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•è¿½é—®ï¼šå¦‚ä½•å°†æ—¥å¿—è¾“å‡ºåˆ° ELKï¼ˆElasticSearch + Logstash + Kibanaï¼‰ï¼Ÿ<br> â†’ ä½¿ç”¨ <code>logstash-logback-encoder</code>ã€‚</li></ul><hr><h3 id="28-Spring-Boot-å¦‚ä½•å¤„ç†è·¨åŸŸé—®é¢˜ï¼ˆCORSï¼‰"><a href="#28-Spring-Boot-å¦‚ä½•å¤„ç†è·¨åŸŸé—®é¢˜ï¼ˆCORSï¼‰" class="headerlink" title="28. Spring Boot å¦‚ä½•å¤„ç†è·¨åŸŸé—®é¢˜ï¼ˆCORSï¼‰"></a><strong>28. Spring Boot å¦‚ä½•å¤„ç†è·¨åŸŸé—®é¢˜ï¼ˆCORSï¼‰</strong></h3><p><strong>æ ¸å¿ƒå›ç­”</strong><br> é€šè¿‡ <strong>@CrossOrigin</strong> æˆ–å…¨å±€é…ç½® <code>CorsFilter</code>ã€‚</p><p><strong>æ·±å…¥è§£æ</strong></p><ul><li><p><strong>æ–¹å¼1ï¼šæ³¨è§£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin(origins=&quot;http://example.com&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/api/data&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getData</span><span class="params">()</span> &#123; ... &#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ–¹å¼2ï¼šå…¨å±€é…ç½®</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> WebMvcConfigurer <span class="title function_">corsConfigurer</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurer</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> &#123;</span><br><span class="line">            registry.addMapping(<span class="string">&quot;/**&quot;</span>).allowedOrigins(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•è¿½é—®ï¼šCORS å’Œ Nginx åå‘ä»£ç†è·¨åŸŸçš„åŒºåˆ«ï¼Ÿ<ul><li>CORS â†’ Spring Boot å¤„ç†ï¼Œé€‚åˆå•åº”ç”¨ã€‚</li><li>Nginx â†’ ç½‘å…³å±‚å¤„ç†ï¼Œé€‚åˆå¾®æœåŠ¡æ¶æ„ã€‚</li></ul></li></ul><hr><h3 id="29-Spring-Boot-ä¸­çš„å®‰å…¨æœºåˆ¶ï¼ˆSpring-Securityï¼‰"><a href="#29-Spring-Boot-ä¸­çš„å®‰å…¨æœºåˆ¶ï¼ˆSpring-Securityï¼‰" class="headerlink" title="29. Spring Boot ä¸­çš„å®‰å…¨æœºåˆ¶ï¼ˆSpring Securityï¼‰"></a><strong>29. Spring Boot ä¸­çš„å®‰å…¨æœºåˆ¶ï¼ˆSpring Securityï¼‰</strong></h3><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Spring Security æä¾›è®¤è¯ï¼ˆAuthenticationï¼‰+ æˆæƒï¼ˆAuthorizationï¼‰ã€‚</p><p><strong>æ·±å…¥è§£æ</strong></p><ol><li><strong>è®¤è¯æµç¨‹</strong>ï¼š<ul><li>ç”¨æˆ·è¯·æ±‚ â†’ <code>UsernamePasswordAuthenticationFilter</code> â†’ AuthenticationManager â†’ UserDetailsService â†’ è®¤è¯æˆåŠŸ â†’ SecurityContext ä¿å­˜ä¿¡æ¯ã€‚</li></ul></li><li><strong>æˆæƒæœºåˆ¶</strong>ï¼š<ul><li>åŸºäº URLï¼ˆæ‹¦æˆªè·¯å¾„ï¼‰ã€æ–¹æ³•çº§ï¼ˆ<code>@PreAuthorize</code>ï¼‰ã€è¡¨è¾¾å¼ã€‚</li></ul></li><li><strong>é»˜è®¤ç”¨æˆ·</strong>ï¼šSpring Boot 2.x é»˜è®¤ç”Ÿæˆéšæœºå¯†ç ï¼ˆæ—¥å¿—ä¸­è¾“å‡ºï¼‰ã€‚</li></ol><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•è¿½é—®ï¼šå¦‚ä½•åœ¨ Spring Security ä¸­é›†æˆ JWTï¼Ÿ<ul><li>è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Œè§£æ JWT å¹¶æ³¨å…¥ SecurityContextã€‚</li></ul></li></ul><hr><h3 id="30-å¦‚ä½•ä¼˜åŒ–-Spring-Boot-å¯åŠ¨é€Ÿåº¦"><a href="#30-å¦‚ä½•ä¼˜åŒ–-Spring-Boot-å¯åŠ¨é€Ÿåº¦" class="headerlink" title="30. å¦‚ä½•ä¼˜åŒ– Spring Boot å¯åŠ¨é€Ÿåº¦"></a><strong>30. å¦‚ä½•ä¼˜åŒ– Spring Boot å¯åŠ¨é€Ÿåº¦</strong></h3><p><strong>æ ¸å¿ƒå›ç­”</strong><br> ä¼˜åŒ–æ‰‹æ®µï¼šå‡å°‘è‡ªåŠ¨é…ç½®ã€å»¶è¿Ÿåˆå§‹åŒ–ã€å¼•å…¥è½»é‡ä¾èµ–ã€‚</p><p><strong>æ·±å…¥è§£æ</strong></p><ul><li><strong>å»¶è¿ŸåŠ è½½</strong>ï¼š<code>spring.main.lazy-initialization=true</code>ã€‚</li><li><strong>ç§»é™¤ä¸å¿…è¦çš„ starter</strong>ã€‚</li><li><strong>æœ¬åœ°è°ƒè¯•æ—¶è·³è¿‡å®‰å…¨&#x2F;ç›‘æ§é…ç½®</strong>ã€‚</li><li><strong>ä½¿ç”¨ GraalVM Native Image åŠ é€Ÿå¯åŠ¨</strong>ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•è¿½é—®ï¼šSpring Boot å¯åŠ¨æ…¢ï¼Œå¦‚ä½•æ’æŸ¥ï¼Ÿ<ul><li>ä½¿ç”¨ <code>--debug</code> å’Œ <code>ApplicationStartup</code> æŸ¥çœ‹ Bean åŠ è½½è€—æ—¶ã€‚</li></ul></li></ul><hr><h2 id="äº”ã€Spring-Cloudï¼ˆ30é¢˜ï¼‰"><a href="#äº”ã€Spring-Cloudï¼ˆ30é¢˜ï¼‰" class="headerlink" title="äº”ã€Spring Cloudï¼ˆ30é¢˜ï¼‰"></a>äº”ã€Spring Cloudï¼ˆ30é¢˜ï¼‰</h2><hr><h2 id="1-Spring-Cloud-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-Spring-Cloud-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. Spring Cloud æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>1. Spring Cloud æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Spring Cloud æ˜¯åŸºäº Spring Boot çš„å¾®æœåŠ¡æ²»ç†æ¡†æ¶ï¼Œæä¾›äº†åˆ†å¸ƒå¼ç³»ç»Ÿæ‰€éœ€çš„å…¨å¥—ç»„ä»¶ï¼šæœåŠ¡æ³¨å†Œå‘ç°ã€è´Ÿè½½å‡è¡¡ã€é…ç½®ä¸­å¿ƒã€ç½‘å…³ã€ç†”æ–­é™æµã€é“¾è·¯è¿½è¸ªç­‰ã€‚</p><p><strong>æ·±å…¥åŸç†</strong></p><ul><li><strong>å®šä½</strong>ï¼šå¾®æœåŠ¡çš„ â€œç”Ÿæ€æ•´åˆè€…â€ï¼Œä¸æ˜¯å•ä¸€æŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€å¥—è§£å†³æ–¹æ¡ˆã€‚</li><li><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼š<ul><li>Eurekaï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰</li><li>Ribbon &#x2F; LoadBalancerï¼ˆå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼‰</li><li>Feignï¼ˆå£°æ˜å¼è¿œç¨‹è°ƒç”¨ï¼‰</li><li>Hystrix &#x2F; Resilience4j &#x2F; Sentinelï¼ˆç†”æ–­é™æµï¼‰</li><li>Config Serverï¼ˆé…ç½®ä¸­å¿ƒï¼‰</li><li>Gatewayï¼ˆç½‘å…³ï¼‰</li><li>Sleuth + Zipkinï¼ˆé“¾è·¯è¿½è¸ªï¼‰</li></ul></li><li><strong>æœ¬è´¨</strong>ï¼šè§£å†³åˆ†å¸ƒå¼å¤æ‚æ€§ï¼Œé™ä½å¼€å‘é—¨æ§›ã€‚</li></ul><p><strong>é¢è¯•å»¶ä¼¸</strong></p><ul><li>Spring Cloud ä¸ Kubernetes Service Mesh çš„åŒºåˆ«ï¼šå‰è€… SDK æ¨¡å¼ï¼Œåè€… Sidecar æ¨¡å¼ã€‚</li></ul><hr><h2 id="2-Spring-Cloud-å’Œ-Dubbo-çš„åŒºåˆ«ï¼Ÿ"><a href="#2-Spring-Cloud-å’Œ-Dubbo-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="2. Spring Cloud å’Œ Dubbo çš„åŒºåˆ«ï¼Ÿ"></a><strong>2. Spring Cloud å’Œ Dubbo çš„åŒºåˆ«ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong></p><ul><li>Dubboï¼šé«˜æ€§èƒ½ RPC æ¡†æ¶ï¼Œæ ¸å¿ƒæ˜¯è¿œç¨‹è°ƒç”¨ã€‚</li><li>Spring Cloudï¼šå…¨å®¶æ¡¶å¼å¾®æœåŠ¡ç”Ÿæ€ï¼ŒåŠŸèƒ½æ›´å…¨é¢ã€‚</li></ul><p><strong>æ·±å…¥åŸç†</strong></p><ul><li>åè®®å±‚ï¼šDubbo ç”¨ TCP&#x2F;è‡ªå®šä¹‰åè®®ï¼Œæ€§èƒ½é«˜ï¼›Spring Cloud å¤šç”¨ REST&#x2F;HTTPã€‚</li><li>åŠŸèƒ½è¦†ç›–ï¼šDubbo ä¸»è¦åšæœåŠ¡è°ƒç”¨ï¼ŒSpring Cloud åŒ…å«æ³¨å†Œã€é…ç½®ã€ç†”æ–­ã€ç½‘å…³ç­‰ã€‚</li><li>æ¼”è¿›ï¼šDubbo3.0 å¼€å§‹æ”¯æŒ gRPC&#x2F;Triple åè®®ï¼Œä¸ Spring Cloud è¶Šæ¥è¶Šæ¥è¿‘ã€‚</li></ul><p><strong>é¢è¯•å»¶ä¼¸</strong></p><ul><li>å…¬å¸å†…ç½‘åœºæ™¯ï¼ˆè¿½æ±‚æ€§èƒ½ï¼‰ â†’ Dubboï¼›</li><li>å¤§è§„æ¨¡åˆ†å¸ƒå¼äº’è”ç½‘åœºæ™¯ï¼ˆè¿½æ±‚ç”Ÿæ€ï¼‰ â†’ Spring Cloudã€‚</li></ul><hr><h2 id="3-Eureka-çš„å·¥ä½œåŸç†ï¼Ÿ"><a href="#3-Eureka-çš„å·¥ä½œåŸç†ï¼Ÿ" class="headerlink" title="3. Eureka çš„å·¥ä½œåŸç†ï¼Ÿ"></a><strong>3. Eureka çš„å·¥ä½œåŸç†ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Eureka æ˜¯ Netflix å¼€æºçš„æ³¨å†Œä¸­å¿ƒï¼Œè´Ÿè´£ <strong>æœåŠ¡æ³¨å†Œä¸å‘ç°</strong>ï¼Œéµå¾ª <strong>AP</strong> åŸåˆ™ã€‚</p><p><strong>æ·±å…¥åŸç†</strong></p><ul><li><strong>æ³¨å†Œ</strong>ï¼šæœåŠ¡å¯åŠ¨åå°†è‡ªèº«ä¿¡æ¯ï¼ˆIPã€ç«¯å£ã€çŠ¶æ€ï¼‰æ³¨å†Œåˆ° Eureka Serverã€‚</li><li><strong>ç»­çº¦</strong>ï¼šæœåŠ¡å®šæœŸå‘é€å¿ƒè·³ï¼ˆé»˜è®¤ 30sï¼‰ã€‚</li><li><strong>ä¸‹çº¿</strong>ï¼šæœåŠ¡å…³é—­æ—¶å‘é€ä¸‹çº¿è¯·æ±‚ã€‚</li><li><strong>æ‹‰å–</strong>ï¼šå®¢æˆ·ç«¯å®šæœŸä» Server æ‹‰å–æ³¨å†Œè¡¨ï¼ˆé»˜è®¤ 30sï¼‰ï¼Œæœ¬åœ°ç¼“å­˜ï¼Œæé«˜å¯ç”¨æ€§ã€‚</li></ul><p><strong>é¢è¯•å»¶ä¼¸</strong></p><ul><li>é¢è¯•å®˜å¯èƒ½é—®ï¼šEureka ä¸ Zookeeper åŒºåˆ«ï¼Ÿ<ul><li>Eureka AP â†’ ä¿è¯å¯ç”¨æ€§ï¼ˆå³ä½¿éƒ¨åˆ†èŠ‚ç‚¹æŒ‚äº†ä»èƒ½æœåŠ¡ï¼‰ï¼›</li><li>Zookeeper CP â†’ å¼ºä¸€è‡´æ€§ï¼ˆé€‰ä¸¾å¯èƒ½å¯¼è‡´æœåŠ¡ä¸å¯ç”¨ï¼‰ã€‚</li></ul></li></ul><hr><h2 id="4-Eureka-çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Ÿ"><a href="#4-Eureka-çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Ÿ" class="headerlink" title="4. Eureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Ÿ"></a><strong>4. Eureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Eureka ä¼šåœ¨ç½‘ç»œåˆ†åŒºæˆ–å¿ƒè·³ä¸¢å¤±æ—¶ï¼Œ<strong>ä¸ç«‹å³ç§»é™¤æœåŠ¡å®ä¾‹</strong>ï¼Œä¿è¯å¯ç”¨æ€§ã€‚</p><p><strong>æ·±å…¥åŸç†</strong></p><ul><li>è§¦å‘æ¡ä»¶ï¼šåœ¨ 15 åˆ†é’Ÿå†…å¿ƒè·³å¤±è´¥æ¯”ä¾‹ &gt; 85%ã€‚</li><li>è¡Œä¸ºï¼š<ul><li>æš‚åœå‰”é™¤å¤±æ•ˆæœåŠ¡ã€‚</li><li>ä¿ç•™å·²æœ‰æ³¨å†Œè¡¨ï¼Œå…è®¸å®¢æˆ·ç«¯ç»§ç»­è·å–æœåŠ¡ã€‚</li></ul></li><li>å¥½å¤„ï¼šé˜²æ­¢å› ç½‘ç»œæŠ–åŠ¨å¯¼è‡´â€œæœåŠ¡é›ªå´©â€ã€‚</li></ul><p><strong>é¢è¯•å»¶ä¼¸</strong></p><ul><li>ç¼ºç‚¹ï¼šå¯èƒ½æŠŠå·²ç»å®•æœºçš„å®ä¾‹ç»§ç»­æš´éœ²å‡ºå»ã€‚</li><li>å¯é…ç½® <code>eureka.server.enable-self-preservation=false</code> æ¥å…³é—­ã€‚</li></ul><hr><h2 id="5-Ribbon-çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Ÿ"><a href="#5-Ribbon-çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Ÿ" class="headerlink" title="5. Ribbon çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Ÿ"></a><strong>5. Ribbon çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Ribbon æ˜¯å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ç»„ä»¶ï¼Œå¸¸è§ç­–ç•¥æœ‰ï¼š</p><ul><li>è½®è¯¢ï¼ˆRoundRobinï¼‰</li><li>éšæœºï¼ˆRandomï¼‰</li><li>æƒé‡ï¼ˆWeightedResponseTimeRuleï¼‰</li><li>æœ€å°å¹¶å‘ï¼ˆBestAvailableRuleï¼‰</li></ul><p><strong>æ·±å…¥åŸç†</strong><br> Ribbon åœ¨å®¢æˆ·ç«¯ç»´æŠ¤æœåŠ¡åˆ—è¡¨ï¼Œä»æ³¨å†Œä¸­å¿ƒæ‹‰å–åï¼Œæ ¹æ®ç­–ç•¥é€‰æ‹©ç›®æ ‡æœåŠ¡å‘èµ·è¯·æ±‚ã€‚</p><p><strong>é¢è¯•å»¶ä¼¸</strong></p><ul><li>ä¸ Nginx çš„åŒºåˆ«ï¼šRibbon æ˜¯ <strong>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡</strong>ï¼ˆè°ƒç”¨æ–¹å†³å®šï¼‰ï¼ŒNginx æ˜¯ <strong>æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡</strong>ï¼ˆè¯·æ±‚å…ˆåˆ°ä»£ç†ï¼‰ã€‚</li></ul><hr><h2 id="6-Ribbon-å’Œ-Nginx-çš„åŒºåˆ«ï¼Ÿ"><a href="#6-Ribbon-å’Œ-Nginx-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="6. Ribbon å’Œ Nginx çš„åŒºåˆ«ï¼Ÿ"></a><strong>6. Ribbon å’Œ Nginx çš„åŒºåˆ«ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong></p><ul><li>Ribbonï¼šå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼Œæœ¬åœ°å†³å®šè°ƒç”¨å“ªå°æœåŠ¡ã€‚</li><li>Nginxï¼šæœåŠ¡ç«¯è´Ÿè½½å‡è¡¡ï¼Œæ‰€æœ‰æµé‡å…ˆç»è¿‡ä»£ç†ã€‚</li></ul><p><strong>æ·±å…¥åŸç†</strong></p><ul><li><strong>éƒ¨ç½²ä½ç½®</strong>ï¼šRibbon åœ¨è°ƒç”¨æ–¹åº”ç”¨ä¸­ï¼ŒNginx ç‹¬ç«‹éƒ¨ç½²ã€‚</li><li><strong>æ‰©å±•æ€§</strong>ï¼šRibbon ä¸ Eureka é…åˆï¼Œæ”¯æŒåŠ¨æ€ä¸Šä¸‹çº¿ï¼›Nginx éœ€æ‰‹åŠ¨æ”¹é…ç½®æˆ–å€ŸåŠ© Consul&#x2F;Keepalivedã€‚</li></ul><p><strong>é¢è¯•å»¶ä¼¸</strong></p><ul><li>é¢è¯•å®˜è¿½é—®ï¼šä¸ºä»€ä¹ˆå¾®æœåŠ¡æ›´å€¾å‘äº Ribbonï¼Ÿ<ul><li>å› ä¸ºå®¢æˆ·ç«¯æ¨¡å¼æ›´çµæ´»ï¼Œå¯ä»¥æ— æ„ŸçŸ¥æ‰©å®¹&#x2F;ç¼©å®¹ã€‚</li></ul></li></ul><hr><h2 id="7-Feign-çš„å·¥ä½œåŸç†ï¼Ÿ"><a href="#7-Feign-çš„å·¥ä½œåŸç†ï¼Ÿ" class="headerlink" title="7. Feign çš„å·¥ä½œåŸç†ï¼Ÿ"></a><strong>7. Feign çš„å·¥ä½œåŸç†ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Feign æ˜¯å£°æ˜å¼ HTTP å®¢æˆ·ç«¯ï¼Œé€šè¿‡æ¥å£ + æ³¨è§£çš„æ–¹å¼è°ƒç”¨è¿œç¨‹æœåŠ¡ã€‚</p><p><strong>æ·±å…¥åŸç†</strong></p><ul><li>è¿è¡Œæ—¶åŸºäº <strong>åŠ¨æ€ä»£ç†</strong>ï¼ˆJDK Proxyï¼‰ã€‚</li><li>ç»“åˆ Ribbon è´Ÿè½½å‡è¡¡ï¼Œè‡ªåŠ¨é€‰æ‹©æœåŠ¡å®ä¾‹ã€‚</li><li>å¯é›†æˆ Hystrix&#x2F;Sentinelï¼Œæ”¯æŒç†”æ–­ã€‚</li></ul><p><strong>é¢è¯•å»¶ä¼¸</strong></p><ul><li>é¢è¯•å®˜é—®ï¼šFeign å’Œ RestTemplate çš„åŒºåˆ«ï¼Ÿ<ul><li>RestTemplate â†’ ä»£ç ä¾µå…¥æ€§å¼ºï¼Œéœ€è¦æ‰‹åŠ¨æ‹¼æ¥è¯·æ±‚ã€‚</li><li>Feign â†’ å£°æ˜å¼ï¼Œæ›´ä¼˜é›…ã€‚</li></ul></li></ul><hr><h2 id="8-Feign-å¦‚ä½•æ”¯æŒç†”æ–­ï¼Ÿ"><a href="#8-Feign-å¦‚ä½•æ”¯æŒç†”æ–­ï¼Ÿ" class="headerlink" title="8. Feign å¦‚ä½•æ”¯æŒç†”æ–­ï¼Ÿ"></a><strong>8. Feign å¦‚ä½•æ”¯æŒç†”æ–­ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Feign å¯é›†æˆ Hystrix æˆ– Sentinelï¼Œé€šè¿‡ <strong>Fallback</strong> æä¾›é™çº§é€»è¾‘ã€‚</p><p><strong>æ·±å…¥åŸç†</strong></p><ul><li>Hystrixï¼šåœ¨è¯·æ±‚å¤±è´¥&#x2F;è¶…æ—¶æ—¶è°ƒç”¨ fallback æ–¹æ³•ã€‚</li><li>Sentinelï¼šé€šè¿‡æ³¨è§£ @SentinelResource + fallback å®ç°ã€‚</li></ul><p><strong>é¢è¯•å»¶ä¼¸</strong></p><ul><li>é¢è¯•å®˜è¿½é—®ï¼šç†”æ–­å’Œé™çº§åŒºåˆ«ï¼Ÿ<ul><li>ç†”æ–­ï¼šä¿æŠ¤ç³»ç»Ÿä¸è¢«æ‹–å®ã€‚</li><li>é™çº§ï¼šæä¾›å…œåº•é€»è¾‘ï¼Œä¿è¯ç”¨æˆ·ä½“éªŒã€‚</li></ul></li></ul><hr><h2 id="9-Hystrix-çš„å·¥ä½œåŸç†ï¼Ÿ"><a href="#9-Hystrix-çš„å·¥ä½œåŸç†ï¼Ÿ" class="headerlink" title="9. Hystrix çš„å·¥ä½œåŸç†ï¼Ÿ"></a><strong>9. Hystrix çš„å·¥ä½œåŸç†ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong><br> Hystrix é€šè¿‡ <strong>çº¿ç¨‹æ± éš”ç¦» + ç†”æ–­å™¨æœºåˆ¶</strong> ä¿æŠ¤æœåŠ¡ï¼Œé˜²æ­¢é›ªå´©æ•ˆåº”ã€‚</p><p><strong>æ·±å…¥åŸç†</strong></p><ul><li><strong>çº¿ç¨‹æ± éš”ç¦»</strong>ï¼šä¸åŒæœåŠ¡è°ƒç”¨ç”¨ä¸åŒçº¿ç¨‹æ± ï¼Œé¿å…ç›¸äº’å½±å“ã€‚</li><li><strong>ç†”æ–­æœºåˆ¶</strong>ï¼š<ul><li>ç»Ÿè®¡è¯·æ±‚å¤±è´¥ç‡ã€‚</li><li>è¾¾åˆ°é˜ˆå€¼ â†’ ç†”æ–­æ‰“å¼€ï¼Œç›´æ¥èµ° fallbackã€‚</li><li>ä¸€æ®µæ—¶é—´å â†’ å°è¯•åŠå¼€ï¼ŒæˆåŠŸåˆ™æ¢å¤ã€‚</li></ul></li></ul><p><strong>é¢è¯•å»¶ä¼¸</strong></p><ul><li>Hystrix å·²åœæ­¢ç»´æŠ¤ï¼Œæ¨èç”¨ Resilience4j æˆ– Sentinelã€‚</li></ul><hr><h2 id="10-Hystrix-çš„çº¿ç¨‹æ± éš”ç¦»å’Œä¿¡å·é‡éš”ç¦»ï¼Ÿ"><a href="#10-Hystrix-çš„çº¿ç¨‹æ± éš”ç¦»å’Œä¿¡å·é‡éš”ç¦»ï¼Ÿ" class="headerlink" title="10. Hystrix çš„çº¿ç¨‹æ± éš”ç¦»å’Œä¿¡å·é‡éš”ç¦»ï¼Ÿ"></a><strong>10. Hystrix çš„çº¿ç¨‹æ± éš”ç¦»å’Œä¿¡å·é‡éš”ç¦»ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong></p><ul><li><strong>çº¿ç¨‹æ± éš”ç¦»</strong>ï¼šæ¯ä¸ªä¾èµ–ç”¨ç‹¬ç«‹çº¿ç¨‹æ± ï¼Œé€‚åˆè€—æ—¶æ“ä½œã€‚</li><li><strong>ä¿¡å·é‡éš”ç¦»</strong>ï¼šé™åˆ¶å¹¶å‘æ•°ï¼Œä¸å¼€çº¿ç¨‹æ± ï¼Œé€‚åˆä½å»¶è¿Ÿæ“ä½œã€‚</li></ul><p><strong>æ·±å…¥åŸç†</strong></p><ul><li>çº¿ç¨‹æ± éš”ç¦»ï¼šå¼€é”€å¤§ï¼Œä½†æœ€å®‰å…¨ã€‚</li><li>ä¿¡å·é‡éš”ç¦»ï¼šè½»é‡ï¼Œä½†ä¸èƒ½é˜²æ­¢è°ƒç”¨é˜»å¡çº¿ç¨‹ã€‚</li></ul><p><strong>é¢è¯•å»¶ä¼¸</strong></p><ul><li>å®æˆ˜ç»éªŒï¼šå¤§å¤šæ•° IO è°ƒç”¨ç”¨çº¿ç¨‹æ± éš”ç¦»ï¼Œæœ¬åœ°è®¡ç®—æˆ–è½»é‡è°ƒç”¨ç”¨ä¿¡å·é‡éš”ç¦»ã€‚</li></ul><hr><h2 id="11-Resilience4j-å’Œ-Hystrix-åŒºåˆ«ï¼Ÿ"><a href="#11-Resilience4j-å’Œ-Hystrix-åŒºåˆ«ï¼Ÿ" class="headerlink" title="11. Resilience4j å’Œ Hystrix åŒºåˆ«ï¼Ÿ"></a><strong>11. Resilience4j å’Œ Hystrix åŒºåˆ«ï¼Ÿ</strong></h2><ul><li>Resilience4j åŸºäº Java 8 å‡½æ•°å¼æ¥å£ï¼Œæ›´è½»é‡ï¼Œæ”¯æŒç†”æ–­ã€é™æµã€é‡è¯•ã€éš”ç¦»ç­‰ï¼›</li><li>Hystrix å·²åœæ­¢ç»´æŠ¤ï¼ŒåŠŸèƒ½å•ä¸€ï¼ˆç†”æ–­+çº¿ç¨‹éš”ç¦»ï¼‰ã€‚</li><li>Resilience4j æ¨¡å—åŒ–ï¼Œå¯æŒ‰éœ€å¼•å…¥ã€‚</li></ul><hr><h2 id="12-Gateway-çš„æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ"><a href="#12-Gateway-çš„æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ" class="headerlink" title="12. Gateway çš„æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ"></a><strong>12. Gateway çš„æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ</strong></h2><ul><li><strong>è·¯ç”±è½¬å‘</strong>ï¼ˆæ ¹æ®è·¯å¾„ã€Headerã€å‚æ•°è½¬å‘è¯·æ±‚ï¼‰ã€‚</li><li><strong>è¿‡æ»¤å™¨æœºåˆ¶</strong>ï¼ˆç»Ÿä¸€é‰´æƒã€æ—¥å¿—ã€é™æµï¼‰ã€‚</li><li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼ˆç»“åˆæ³¨å†Œä¸­å¿ƒï¼‰ã€‚</li><li><strong>åè®®æ”¯æŒ</strong>ï¼ˆWebSocketã€HTTPSï¼‰ã€‚</li></ul><hr><h2 id="13-Gateway-å’Œ-Zuul-çš„åŒºåˆ«ï¼Ÿ"><a href="#13-Gateway-å’Œ-Zuul-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="13. Gateway å’Œ Zuul çš„åŒºåˆ«ï¼Ÿ"></a><strong>13. Gateway å’Œ Zuul çš„åŒºåˆ«ï¼Ÿ</strong></h2><ul><li>Zuul1 åŸºäº Servletï¼Œé˜»å¡ IOï¼Œæ€§èƒ½å·®ã€‚</li><li>Gateway åŸºäº Netty + Reactorï¼Œæ”¯æŒå“åº”å¼ï¼Œæ€§èƒ½é«˜ã€‚</li><li>Zuul2 è™½ç„¶æ”¹ä¸ºå¼‚æ­¥ï¼Œä½†ç”Ÿæ€ä¸Š Gateway æ›´æ¨èã€‚</li></ul><hr><h2 id="14-Config-Server-çš„ä½œç”¨ï¼Ÿ"><a href="#14-Config-Server-çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="14. Config Server çš„ä½œç”¨ï¼Ÿ"></a><strong>14. Config Server çš„ä½œç”¨ï¼Ÿ</strong></h2><ul><li>ç»Ÿä¸€ç®¡ç†å¾®æœåŠ¡é…ç½®ï¼Œæ”¯æŒ Gitã€SVN ç­‰å­˜å‚¨ã€‚</li><li>åŠ¨æ€åˆ·æ–°é…ç½®ï¼Œä¿è¯ç¯å¢ƒä¸€è‡´æ€§ã€‚</li><li>ä¸ Bus ç»“åˆå¯å¹¿æ’­åˆ·æ–°ã€‚</li></ul><hr><h2 id="15-Config-Server-å¦‚ä½•ä¿è¯é…ç½®å®æ—¶åˆ·æ–°ï¼Ÿ"><a href="#15-Config-Server-å¦‚ä½•ä¿è¯é…ç½®å®æ—¶åˆ·æ–°ï¼Ÿ" class="headerlink" title="15. Config Server å¦‚ä½•ä¿è¯é…ç½®å®æ—¶åˆ·æ–°ï¼Ÿ"></a><strong>15. Config Server å¦‚ä½•ä¿è¯é…ç½®å®æ—¶åˆ·æ–°ï¼Ÿ</strong></h2><ul><li>å®¢æˆ·ç«¯é€šè¿‡ <code>@RefreshScope</code> å®ç°åŠ¨æ€åˆ·æ–°ã€‚</li><li>æ‰‹åŠ¨è§¦å‘ <code>/actuator/refresh</code>ã€‚</li><li>ç»“åˆ Spring Cloud Busï¼Œå¯ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¹¿æ’­åˆ·æ–°ã€‚</li></ul><hr><h2 id="16-Spring-Cloud-Bus-çš„åŸç†ï¼Ÿ"><a href="#16-Spring-Cloud-Bus-çš„åŸç†ï¼Ÿ" class="headerlink" title="16. Spring Cloud Bus çš„åŸç†ï¼Ÿ"></a><strong>16. Spring Cloud Bus çš„åŸç†ï¼Ÿ</strong></h2><ul><li>åº•å±‚åŸºäºæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆKafkaã€RabbitMQï¼‰ã€‚</li><li>å½“é…ç½®å˜æ›´æ—¶ï¼ŒBus å¹¿æ’­äº‹ä»¶ï¼Œæ‰€æœ‰æœåŠ¡æ¥æ”¶å¹¶åˆ·æ–°é…ç½®ã€‚</li></ul><hr><h2 id="17-Sleuth-çš„ä½œç”¨ï¼Ÿ"><a href="#17-Sleuth-çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="17. Sleuth çš„ä½œç”¨ï¼Ÿ"></a><strong>17. Sleuth çš„ä½œç”¨ï¼Ÿ</strong></h2><ul><li>åœ¨å¾®æœåŠ¡è°ƒç”¨é“¾è·¯ä¸­ï¼Œè‡ªåŠ¨ç”Ÿæˆ <strong>TraceId &#x2F; SpanId</strong>ã€‚</li><li>å®ç°è¯·æ±‚é“¾è·¯è¿½è¸ªï¼Œå®šä½æ€§èƒ½ç“¶é¢ˆã€‚</li></ul><hr><h2 id="18-Sleuth-ä¸-Zipkin-çš„å…³ç³»ï¼Ÿ"><a href="#18-Sleuth-ä¸-Zipkin-çš„å…³ç³»ï¼Ÿ" class="headerlink" title="18. Sleuth ä¸ Zipkin çš„å…³ç³»ï¼Ÿ"></a><strong>18. Sleuth ä¸ Zipkin çš„å…³ç³»ï¼Ÿ</strong></h2><ul><li>Sleuthï¼šè´Ÿè´£åŸ‹ç‚¹ã€ç”Ÿæˆæ—¥å¿—ã€‚</li><li>Zipkinï¼šè´Ÿè´£æ”¶é›†ã€å­˜å‚¨ã€å±•ç¤ºè°ƒç”¨é“¾æ•°æ®ã€‚</li></ul><hr><h2 id="19-åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„åŸç†ï¼Ÿ"><a href="#19-åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„åŸç†ï¼Ÿ" class="headerlink" title="19. åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„åŸç†ï¼Ÿ"></a><strong>19. åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„åŸç†ï¼Ÿ</strong></h2><ul><li>é€šè¿‡å”¯ä¸€ TraceId è´¯ç©¿æ•´ä¸ªè°ƒç”¨é“¾ã€‚</li><li>æ¯æ¬¡è¿œç¨‹è°ƒç”¨ç”Ÿæˆæ–°çš„ SpanIdã€‚</li><li>æ•°æ®ä¸ŠæŠ¥åˆ°é›†ä¸­å¼ç³»ç»Ÿï¼ˆZipkin&#x2F;Jaegerï¼‰ã€‚</li></ul><hr><h2 id="20-Spring-Cloud-Stream-çš„ä½œç”¨ï¼Ÿ"><a href="#20-Spring-Cloud-Stream-çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="20. Spring Cloud Stream çš„ä½œç”¨ï¼Ÿ"></a><strong>20. Spring Cloud Stream çš„ä½œç”¨ï¼Ÿ</strong></h2><ul><li>å°è£…æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆKafka&#x2F;RabbitMQï¼‰ã€‚</li><li>æä¾›ç»Ÿä¸€ç¼–ç¨‹æ¨¡å‹ï¼Œå±è”½åº•å±‚å·®å¼‚ã€‚</li><li>æ”¯æŒæ¶ˆæ¯é©±åŠ¨æ¶æ„ã€‚</li></ul><hr><h2 id="21-æ¶ˆæ¯é©±åŠ¨æ¨¡å‹å’Œäº‹ä»¶é©±åŠ¨æ¨¡å‹åŒºåˆ«ï¼Ÿ"><a href="#21-æ¶ˆæ¯é©±åŠ¨æ¨¡å‹å’Œäº‹ä»¶é©±åŠ¨æ¨¡å‹åŒºåˆ«ï¼Ÿ" class="headerlink" title="21. æ¶ˆæ¯é©±åŠ¨æ¨¡å‹å’Œäº‹ä»¶é©±åŠ¨æ¨¡å‹åŒºåˆ«ï¼Ÿ"></a><strong>21. æ¶ˆæ¯é©±åŠ¨æ¨¡å‹å’Œäº‹ä»¶é©±åŠ¨æ¨¡å‹åŒºåˆ«ï¼Ÿ</strong></h2><ul><li>æ¶ˆæ¯é©±åŠ¨ï¼šå¼ºè°ƒè§£è€¦ï¼Œæ¶ˆæ¯å¯é æŠ•é€’ã€‚</li><li>äº‹ä»¶é©±åŠ¨ï¼šå¼ºè°ƒç³»ç»Ÿå¯¹äº‹ä»¶çš„å“åº”ã€‚</li><li>Spring Cloud Stream æ›´åæ¶ˆæ¯é©±åŠ¨ï¼Œä½†ä¹Ÿæ”¯æŒäº‹ä»¶æ¨¡å¼ã€‚</li></ul><hr><h2 id="22-Nacos-å’Œ-Eureka-çš„åŒºåˆ«ï¼Ÿ"><a href="#22-Nacos-å’Œ-Eureka-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="22. Nacos å’Œ Eureka çš„åŒºåˆ«ï¼Ÿ"></a><strong>22. Nacos å’Œ Eureka çš„åŒºåˆ«ï¼Ÿ</strong></h2><ul><li>Nacos é™¤äº†æœåŠ¡æ³¨å†Œå‘ç°ï¼Œè¿˜æä¾›é…ç½®ä¸­å¿ƒåŠŸèƒ½ã€‚</li><li>Nacos æ”¯æŒ <strong>AP&#x2F;CP æ¨¡å¼åˆ‡æ¢</strong>ï¼›Eureka å›ºå®š APã€‚</li><li>Nacos æä¾› UIï¼Œæ›´æ˜“è¿ç»´ã€‚</li></ul><hr><h2 id="23-Nacos-é…ç½®ä¸­å¿ƒå’Œæ³¨å†Œä¸­å¿ƒçš„å®ç°åŸç†ï¼Ÿ"><a href="#23-Nacos-é…ç½®ä¸­å¿ƒå’Œæ³¨å†Œä¸­å¿ƒçš„å®ç°åŸç†ï¼Ÿ" class="headerlink" title="23. Nacos é…ç½®ä¸­å¿ƒå’Œæ³¨å†Œä¸­å¿ƒçš„å®ç°åŸç†ï¼Ÿ"></a><strong>23. Nacos é…ç½®ä¸­å¿ƒå’Œæ³¨å†Œä¸­å¿ƒçš„å®ç°åŸç†ï¼Ÿ</strong></h2><ul><li>é…ç½®ä¸­å¿ƒï¼šåŸºäºæ¨æ‹‰ç»“åˆï¼ˆé•¿è½®è¯¢ + Server æ¨é€ï¼‰ã€‚</li><li>æ³¨å†Œä¸­å¿ƒï¼šåŸºäºå¿ƒè·³æœºåˆ¶ç»´æŠ¤æœåŠ¡å¥åº·çŠ¶æ€ã€‚</li></ul><hr><h2 id="24-Sentinel-çš„å·¥ä½œåŸç†ï¼Ÿ"><a href="#24-Sentinel-çš„å·¥ä½œåŸç†ï¼Ÿ" class="headerlink" title="24. Sentinel çš„å·¥ä½œåŸç†ï¼Ÿ"></a><strong>24. Sentinel çš„å·¥ä½œåŸç†ï¼Ÿ</strong></h2><ul><li>åŸºäº <strong>æ»‘åŠ¨çª—å£ç»Ÿè®¡</strong> è¯·æ±‚ QPSã€å“åº”æ—¶é—´ã€‚</li><li>æ”¯æŒå¤šç§é™æµã€ç†”æ–­ã€é™çº§è§„åˆ™ã€‚</li><li>ä¸ Dubbo&#x2F;Spring Cloud&#x2F;Feign æ— ç¼é›†æˆã€‚</li></ul><hr><h2 id="25-é™æµçš„å¸¸è§ç®—æ³•ï¼ˆä»¤ç‰Œæ¡¶ã€æ¼æ¡¶ï¼‰ï¼Ÿ"><a href="#25-é™æµçš„å¸¸è§ç®—æ³•ï¼ˆä»¤ç‰Œæ¡¶ã€æ¼æ¡¶ï¼‰ï¼Ÿ" class="headerlink" title="25. é™æµçš„å¸¸è§ç®—æ³•ï¼ˆä»¤ç‰Œæ¡¶ã€æ¼æ¡¶ï¼‰ï¼Ÿ"></a><strong>25. é™æµçš„å¸¸è§ç®—æ³•ï¼ˆä»¤ç‰Œæ¡¶ã€æ¼æ¡¶ï¼‰ï¼Ÿ</strong></h2><ul><li><strong>ä»¤ç‰Œæ¡¶</strong>ï¼šç³»ç»Ÿä»¥å›ºå®šé€Ÿç‡ç”Ÿæˆä»¤ç‰Œï¼Œè¯·æ±‚éœ€æ‹¿åˆ°ä»¤ç‰Œæ‰æ‰§è¡Œã€‚</li><li><strong>æ¼æ¡¶</strong>ï¼šè¯·æ±‚å…ˆè¿›å…¥æ¡¶ï¼Œç³»ç»Ÿä»¥å›ºå®šé€Ÿç‡å¤„ç†ï¼Œè¶…å‡ºåˆ™ä¸¢å¼ƒã€‚</li><li>åŒºåˆ«ï¼šä»¤ç‰Œæ¡¶å…è®¸çªå‘æµé‡ï¼Œæ¼æ¡¶æ›´å¹³æ»‘ã€‚</li></ul><hr><h2 id="26-ç†”æ–­å’Œé™çº§çš„åŒºåˆ«ï¼Ÿ"><a href="#26-ç†”æ–­å’Œé™çº§çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="26. ç†”æ–­å’Œé™çº§çš„åŒºåˆ«ï¼Ÿ"></a><strong>26. ç†”æ–­å’Œé™çº§çš„åŒºåˆ«ï¼Ÿ</strong></h2><ul><li>ç†”æ–­ï¼šç³»ç»Ÿä¿æŠ¤æœºåˆ¶ï¼Œæ‹’ç»è°ƒç”¨ï¼Œé˜²æ­¢é›ªå´©ã€‚</li><li>é™çº§ï¼šä¸šåŠ¡å…œåº•æ–¹æ¡ˆï¼Œè¿”å›å¤‡ç”¨ç»“æœã€‚</li><li>ç†”æ–­æ˜¯â€œç¡¬é˜²æŠ¤â€ï¼Œé™çº§æ˜¯â€œè½¯å…œåº•â€ã€‚</li></ul><hr><h2 id="27-CAP-å®šç†å’Œ-Spring-Cloud-çš„å…³ç³»ï¼Ÿ"><a href="#27-CAP-å®šç†å’Œ-Spring-Cloud-çš„å…³ç³»ï¼Ÿ" class="headerlink" title="27. CAP å®šç†å’Œ Spring Cloud çš„å…³ç³»ï¼Ÿ"></a><strong>27. CAP å®šç†å’Œ Spring Cloud çš„å…³ç³»ï¼Ÿ</strong></h2><ul><li>CAPï¼šä¸€è‡´æ€§ï¼ˆCï¼‰ã€å¯ç”¨æ€§ï¼ˆAï¼‰ã€åˆ†åŒºå®¹é”™æ€§ï¼ˆPï¼‰ã€‚</li><li>Eureka â†’ APï¼›Consul â†’ CPï¼›Nacos â†’ AP&#x2F;CP åˆ‡æ¢ã€‚</li></ul><hr><h2 id="28-Spring-Cloud-ä¸-Kubernetes-çš„å…³ç³»ï¼Ÿ"><a href="#28-Spring-Cloud-ä¸-Kubernetes-çš„å…³ç³»ï¼Ÿ" class="headerlink" title="28. Spring Cloud ä¸ Kubernetes çš„å…³ç³»ï¼Ÿ"></a><strong>28. Spring Cloud ä¸ Kubernetes çš„å…³ç³»ï¼Ÿ</strong></h2><ul><li>Spring Cloudï¼šååº”ç”¨å±‚ï¼Œå¼€å‘æ¡†æ¶ã€‚</li><li>Kubernetesï¼šååŸºç¡€è®¾æ–½ï¼Œå®¹å™¨ç¼–æ’ã€‚</li><li>å¯ç»“åˆä½¿ç”¨ï¼šSpring Cloud è´Ÿè´£åº”ç”¨æ²»ç†ï¼ŒK8s è´Ÿè´£èµ„æºè°ƒåº¦ã€‚</li></ul><hr><h2 id="29-å¾®æœåŠ¡ä¸­çš„ç°åº¦å‘å¸ƒï¼Ÿ"><a href="#29-å¾®æœåŠ¡ä¸­çš„ç°åº¦å‘å¸ƒï¼Ÿ" class="headerlink" title="29. å¾®æœåŠ¡ä¸­çš„ç°åº¦å‘å¸ƒï¼Ÿ"></a><strong>29. å¾®æœåŠ¡ä¸­çš„ç°åº¦å‘å¸ƒï¼Ÿ</strong></h2><ul><li>æŒ‡æ–°ç‰ˆæœ¬åªå¯¹éƒ¨åˆ†ç”¨æˆ·å¼€æ”¾ã€‚</li><li>å®ç°æ–¹å¼ï¼š<ul><li>Nginx&#x2F;Gateway æŒ‰ç”¨æˆ· ID æˆ–æµé‡æ¯”ä¾‹è·¯ç”±ã€‚</li><li>Service Meshï¼ˆIstioï¼‰æ”¯æŒæ›´çµæ´»çš„æµé‡æ§åˆ¶ã€‚</li></ul></li></ul><hr><h2 id="30-Spring-Cloud-å¦‚ä½•å®ç°æœåŠ¡ç½‘æ ¼ï¼Ÿ"><a href="#30-Spring-Cloud-å¦‚ä½•å®ç°æœåŠ¡ç½‘æ ¼ï¼Ÿ" class="headerlink" title="30. Spring Cloud å¦‚ä½•å®ç°æœåŠ¡ç½‘æ ¼ï¼Ÿ"></a><strong>30. Spring Cloud å¦‚ä½•å®ç°æœåŠ¡ç½‘æ ¼ï¼Ÿ</strong></h2><ul><li>åŸç”Ÿ Spring Cloud å SDK æ¨¡å¼ï¼Œç¼ºä¹æœåŠ¡ç½‘æ ¼èƒ½åŠ›ã€‚</li><li>å¯ç»“åˆ <strong>Spring Cloud + Istio&#x2F;Envoy</strong>ï¼Œå®ç°æµé‡æ²»ç†ã€è§‚æµ‹ã€ç†”æ–­ã€ç°åº¦ã€‚</li><li>è¶Šæ¥è¶Šå¤šå›¢é˜Ÿé‡‡ç”¨ <strong>Spring Cloud Alibaba + Service Mesh</strong> çš„æ··åˆæ–¹æ¡ˆã€‚</li></ul><hr><h2 id="å…­ã€å¾®æœåŠ¡æ¶æ„-åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆ30é¢˜ï¼‰"><a href="#å…­ã€å¾®æœåŠ¡æ¶æ„-åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆ30é¢˜ï¼‰" class="headerlink" title="å…­ã€å¾®æœåŠ¡æ¶æ„ &amp; åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆ30é¢˜ï¼‰"></a>å…­ã€å¾®æœåŠ¡æ¶æ„ &amp; åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆ30é¢˜ï¼‰</h2><hr><h2 id="1-ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ"></a><strong>1. ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong><br> å¾®æœåŠ¡æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œå°†å•ä½“åº”ç”¨æ‹†åˆ†ä¸ºä¸€ç»„å°å‹ã€ç‹¬ç«‹éƒ¨ç½²çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡èšç„¦æŸä¸ªä¸šåŠ¡èƒ½åŠ›ï¼Œé€šè¿‡ APIï¼ˆHTTP&#x2F;gRPC&#x2F;MQï¼‰é€šä¿¡ã€‚</p><p><strong>æ·±å…¥åŸç†</strong></p><ul><li>æ¯ä¸ªæœåŠ¡ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²ã€æ‰©å®¹ã€‚</li><li>æœåŠ¡è‡ªæ²»ï¼šæœ‰è‡ªå·±çš„æ•°æ®åº“ã€ç¼“å­˜ã€é€»è¾‘ã€‚</li><li>é€šå¸¸ç»“åˆå®¹å™¨åŒ–ã€CI&#x2F;CDã€æœåŠ¡æ²»ç†æ¡†æ¶ï¼ˆå¦‚ Spring Cloudã€Dubboã€K8sï¼‰ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•è¿½é—®ï¼šå’Œå•ä½“åº”ç”¨åŒºåˆ«ï¼Ÿ â†’ å•ä½“è€¦åˆåº¦é«˜ï¼Œå¾®æœåŠ¡è§£è€¦ä½†æ›´å¤æ‚ã€‚</li></ul><hr><h2 id="2-å¾®æœåŠ¡ä¸-SOA-çš„åŒºåˆ«ï¼Ÿ"><a href="#2-å¾®æœåŠ¡ä¸-SOA-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="2. å¾®æœåŠ¡ä¸ SOA çš„åŒºåˆ«ï¼Ÿ"></a><strong>2. å¾®æœåŠ¡ä¸ SOA çš„åŒºåˆ«ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong></p><ul><li><strong>SOA</strong>ï¼šé¢å‘æœåŠ¡çš„æ¶æ„ï¼Œé€šå¸¸ä¾èµ– ESBï¼ˆä¼ä¸šæœåŠ¡æ€»çº¿ï¼‰ã€‚</li><li><strong>å¾®æœåŠ¡</strong>ï¼šè½»é‡çº§ã€å»ä¸­å¿ƒåŒ–ï¼Œå¼ºè°ƒå°è€Œç‹¬ç«‹ï¼Œå¸¸ç”¨ REST&#x2F;gRPCã€‚</li></ul><p><strong>æ·±å…¥åŸç†</strong></p><ul><li>SOA â†’ åä¼ä¸šå†…éƒ¨ï¼ŒæœåŠ¡è¾ƒå¤§ï¼Œä¾èµ–ç»Ÿä¸€ä¸­é—´ä»¶ï¼ˆå¦‚ ESBï¼‰ã€‚</li><li>å¾®æœåŠ¡ â†’ æœåŠ¡æ›´å°ï¼Œé¿å…å•ç‚¹ä¸­å¿ƒï¼Œå¼ºè°ƒå»ä¸­å¿ƒåŒ–è‡ªæ²»ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•è¿½é—®ï¼šä¸ºä»€ä¹ˆå¾®æœåŠ¡æ¯” SOA æ›´æµè¡Œï¼Ÿ â†’ äº‘åŸç”ŸèƒŒæ™¯ä¸‹ï¼Œå¾®æœåŠ¡æ›´é€‚åº”æ•æ·å¼€å‘å’Œå¿«é€Ÿè¿­ä»£ã€‚</li></ul><hr><h2 id="3-å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#3-å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="3. å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹ï¼Ÿ"></a><strong>3. å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong></p><ul><li>ä¼˜ç‚¹ï¼šç‹¬ç«‹éƒ¨ç½²ã€æŠ€æœ¯å¤šæ ·æ€§ã€å¼¹æ€§ä¼¸ç¼©ã€å¿«é€Ÿè¿­ä»£ã€‚</li><li>ç¼ºç‚¹ï¼šåˆ†å¸ƒå¼å¤æ‚æ€§ã€è¿ç»´éš¾åº¦é«˜ã€æ•°æ®ä¸€è‡´æ€§æŒ‘æˆ˜ã€æœåŠ¡æ²»ç†æˆæœ¬é«˜ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•å®˜å¸¸é—®ï¼šä»€ä¹ˆæ—¶å€™ä¸é€‚åˆå¾®æœåŠ¡ï¼Ÿ â†’ ä¸šåŠ¡å°ã€å›¢é˜Ÿå°ã€ç³»ç»Ÿç®€å•æ—¶ã€‚</li></ul><hr><h2 id="4-å¾®æœåŠ¡çš„æ‹†åˆ†åŸåˆ™ï¼Ÿ"><a href="#4-å¾®æœåŠ¡çš„æ‹†åˆ†åŸåˆ™ï¼Ÿ" class="headerlink" title="4. å¾®æœåŠ¡çš„æ‹†åˆ†åŸåˆ™ï¼Ÿ"></a><strong>4. å¾®æœåŠ¡çš„æ‹†åˆ†åŸåˆ™ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong></p><ul><li>æŒ‰ä¸šåŠ¡è¾¹ç•Œï¼ˆDDD çš„é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰ã€‚</li><li>é«˜å†…èšã€ä½è€¦åˆã€‚</li><li>ä¸€ä¸ªæœåŠ¡åªèšç„¦ä¸€ä¸ªæ ¸å¿ƒä¸šåŠ¡èƒ½åŠ›ã€‚</li></ul><p><strong>æ·±å…¥åŸç†</strong></p><ul><li>æ‹†åˆ†æ–¹å¼ï¼šæŒ‰ä¸šåŠ¡ï¼ˆè®¢å•ã€ç”¨æˆ·ã€æ”¯ä»˜ï¼‰ã€æŒ‰åœºæ™¯ï¼ˆæ ¸å¿ƒ vs è¾…åŠ©ï¼‰ã€æŒ‰éåŠŸèƒ½éœ€æ±‚ï¼ˆæ€§èƒ½ç“¶é¢ˆç‚¹ï¼‰ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>å¸¸è§é”™è¯¯ï¼šæŒ‰æ•°æ®åº“è¡¨æ‹†åˆ†ï¼Œå¯¼è‡´è¿‡åº¦ä¾èµ–è·¨æœåŠ¡è°ƒç”¨ã€‚</li></ul><hr><h2 id="5-å¦‚ä½•ä¿è¯å¾®æœåŠ¡ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§ï¼Ÿ"><a href="#5-å¦‚ä½•ä¿è¯å¾®æœåŠ¡ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§ï¼Ÿ" class="headerlink" title="5. å¦‚ä½•ä¿è¯å¾®æœåŠ¡ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§ï¼Ÿ"></a><strong>5. å¦‚ä½•ä¿è¯å¾®æœåŠ¡ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§ï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong></p><ul><li>é¿å…å¼ºä¸€è‡´ï¼Œé‡‡ç”¨ <strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ã€‚</li><li>æ–¹æ¡ˆï¼šåˆ†å¸ƒå¼äº‹åŠ¡ã€æ¶ˆæ¯é©±åŠ¨ã€è¡¥å¿æœºåˆ¶ã€‚</li></ul><p><strong>æ·±å…¥åŸç†</strong></p><ul><li>åŒæ­¥æ–¹æ¡ˆï¼šXAï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰ã€‚</li><li>å¼‚æ­¥æ–¹æ¡ˆï¼šTCCã€SAGAã€å¯é æ¶ˆæ¯ã€‚</li></ul><p><strong>å»¶ä¼¸æ€è€ƒ</strong></p><ul><li>é¢è¯•å®˜è¿½é—®ï¼šä½ åœ¨é¡¹ç›®ä¸­æ€ä¹ˆåšï¼Ÿ â†’ æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆäº‹åŠ¡æ¶ˆæ¯&#x2F;æœ¬åœ°æ¶ˆæ¯è¡¨ï¼‰ã€‚</li></ul><hr><h2 id="6-åˆ†å¸ƒå¼äº‹åŠ¡æœ‰å“ªäº›è§£å†³æ–¹æ¡ˆï¼Ÿ"><a href="#6-åˆ†å¸ƒå¼äº‹åŠ¡æœ‰å“ªäº›è§£å†³æ–¹æ¡ˆï¼Ÿ" class="headerlink" title="6. åˆ†å¸ƒå¼äº‹åŠ¡æœ‰å“ªäº›è§£å†³æ–¹æ¡ˆï¼Ÿ"></a><strong>6. åˆ†å¸ƒå¼äº‹åŠ¡æœ‰å“ªäº›è§£å†³æ–¹æ¡ˆï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒå›ç­”</strong></p><ul><li>XAï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰</li><li>TCCï¼ˆTry-Confirm-Cancelï¼‰</li><li>SAGAï¼ˆé•¿äº‹åŠ¡è¡¥å¿ï¼‰</li><li>æœ¬åœ°æ¶ˆæ¯è¡¨ &#x2F; äº‹åŠ¡æ¶ˆæ¯</li></ul><p><strong>æ·±å…¥åŸç†</strong></p><ul><li>XAï¼šå¼ºä¸€è‡´æ€§ï¼Œä½†æ€§èƒ½å·®ã€‚</li><li>TCCï¼šä¸šåŠ¡å…¥ä¾µé«˜ï¼Œä½†çµæ´»ã€‚</li><li>SAGAï¼šé•¿äº‹åŠ¡åœºæ™¯ï¼Œå¤±è´¥æ—¶ç”¨è¡¥å¿ã€‚</li><li>æœ¬åœ°æ¶ˆæ¯è¡¨ï¼šä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</li></ul><hr><h2 id="7-TCCã€SAGAã€XA-çš„åŒºåˆ«ï¼Ÿ"><a href="#7-TCCã€SAGAã€XA-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="7. TCCã€SAGAã€XA çš„åŒºåˆ«ï¼Ÿ"></a><strong>7. TCCã€SAGAã€XA çš„åŒºåˆ«ï¼Ÿ</strong></h2><ul><li><strong>XA</strong>ï¼šæ•°æ®åº“å±‚ä¸¤é˜¶æ®µæäº¤ï¼Œå¼ºä¸€è‡´ï¼Œæ€§èƒ½å·®ã€‚</li><li><strong>TCC</strong>ï¼šåº”ç”¨å±‚ä¸‰æ­¥ï¼ˆé¢„ç•™èµ„æºã€ç¡®è®¤ã€å›æ»šï¼‰ï¼Œä¾µå…¥æ€§é«˜ã€‚</li><li><strong>SAGA</strong>ï¼šé•¿äº‹åŠ¡ï¼Œæ¯æ­¥éƒ½æœ‰è¡¥å¿åŠ¨ä½œï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</li></ul><hr><h2 id="8-æœ¬åœ°æ¶ˆæ¯è¡¨å’Œå¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§ï¼Ÿ"><a href="#8-æœ¬åœ°æ¶ˆæ¯è¡¨å’Œå¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§ï¼Ÿ" class="headerlink" title="8. æœ¬åœ°æ¶ˆæ¯è¡¨å’Œå¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§ï¼Ÿ"></a><strong>8. æœ¬åœ°æ¶ˆæ¯è¡¨å’Œå¯é æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§ï¼Ÿ</strong></h2><ul><li>æœ¬åœ°æ¶ˆæ¯è¡¨ï¼šåœ¨æœ¬åœ°äº‹åŠ¡ä¸­å†™ä¸šåŠ¡è¡¨ + æ¶ˆæ¯è¡¨ â†’ MQ å¼‚æ­¥æŠ•é€’ â†’ æ¶ˆè´¹ç«¯ç¡®è®¤ã€‚</li><li>å¯é æ¶ˆæ¯ï¼šMQ æ”¯æŒäº‹åŠ¡ï¼ˆå¦‚ RocketMQ åŠæ¶ˆæ¯ï¼‰ï¼Œç¡®ä¿æ¶ˆæ¯å¿…è¾¾ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</li></ul><hr><h2 id="9-åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼ï¼Ÿ"><a href="#9-åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼ï¼Ÿ" class="headerlink" title="9. åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼ï¼Ÿ"></a><strong>9. åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼ï¼Ÿ</strong></h2><ul><li>æ•°æ®åº“é”ï¼ˆæ‚²è§‚é”&#x2F;å”¯ä¸€ç´¢å¼•ï¼‰ã€‚</li><li>Redis åˆ†å¸ƒå¼é”ï¼ˆsetnx + expireï¼‰ã€‚</li><li>Zookeeper åˆ†å¸ƒå¼é”ï¼ˆä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼‰ã€‚</li></ul><hr><h2 id="10-Redis-åˆ†å¸ƒå¼é”çš„ç¼ºé™·ï¼Ÿ"><a href="#10-Redis-åˆ†å¸ƒå¼é”çš„ç¼ºé™·ï¼Ÿ" class="headerlink" title="10. Redis åˆ†å¸ƒå¼é”çš„ç¼ºé™·ï¼Ÿ"></a><strong>10. Redis åˆ†å¸ƒå¼é”çš„ç¼ºé™·ï¼Ÿ</strong></h2><ul><li>å•ç‚¹é—®é¢˜ï¼ˆéœ€ Redis Cluster æˆ– Redlockï¼‰ã€‚</li><li>é”è¿‡æœŸå¯èƒ½å¯¼è‡´è¯¯é‡Šæ”¾ã€‚</li><li>ä¸èƒ½ä¿è¯ä¸¥æ ¼å…¬å¹³ã€‚</li></ul><hr><h2 id="11-Zookeeper-åˆ†å¸ƒå¼é”çš„å®ç°ï¼Ÿ"><a href="#11-Zookeeper-åˆ†å¸ƒå¼é”çš„å®ç°ï¼Ÿ" class="headerlink" title="11. Zookeeper åˆ†å¸ƒå¼é”çš„å®ç°ï¼Ÿ"></a><strong>11. Zookeeper åˆ†å¸ƒå¼é”çš„å®ç°ï¼Ÿ</strong></h2><ul><li>åˆ©ç”¨ <strong>ä¸´æ—¶é¡ºåºèŠ‚ç‚¹</strong>ï¼š<ul><li>å®¢æˆ·ç«¯åˆ›å»ºé¡ºåºèŠ‚ç‚¹ã€‚</li><li>åˆ¤æ–­è‡ªå·±æ˜¯å¦æ˜¯æœ€å°èŠ‚ç‚¹ â†’ è·å–é”ã€‚</li><li>ä¸æ˜¯åˆ™ç›‘å¬å‰ä¸€ä¸ªèŠ‚ç‚¹çš„åˆ é™¤äº‹ä»¶ã€‚</li></ul></li></ul><hr><h2 id="12-æ•°æ®åº“åˆ†åº“åˆ†è¡¨ç­–ç•¥ï¼Ÿ"><a href="#12-æ•°æ®åº“åˆ†åº“åˆ†è¡¨ç­–ç•¥ï¼Ÿ" class="headerlink" title="12. æ•°æ®åº“åˆ†åº“åˆ†è¡¨ç­–ç•¥ï¼Ÿ"></a><strong>12. æ•°æ®åº“åˆ†åº“åˆ†è¡¨ç­–ç•¥ï¼Ÿ</strong></h2><ul><li>å‚ç›´åˆ†åº“ï¼ˆæŒ‰ä¸šåŠ¡æ‹†åˆ†ï¼‰ã€‚</li><li>æ°´å¹³åˆ†è¡¨ï¼ˆæŒ‰ç”¨æˆ· IDã€æ—¶é—´åšåˆ†ç‰‡ï¼‰ã€‚</li><li>å¸¸è§è·¯ç”±æ–¹å¼ï¼šå“ˆå¸Œå–æ¨¡ã€èŒƒå›´ã€æ—¶é—´ã€‚</li></ul><hr><h2 id="13-æ°´å¹³æ‹†åˆ†ä¸å‚ç›´æ‹†åˆ†åŒºåˆ«ï¼Ÿ"><a href="#13-æ°´å¹³æ‹†åˆ†ä¸å‚ç›´æ‹†åˆ†åŒºåˆ«ï¼Ÿ" class="headerlink" title="13. æ°´å¹³æ‹†åˆ†ä¸å‚ç›´æ‹†åˆ†åŒºåˆ«ï¼Ÿ"></a><strong>13. æ°´å¹³æ‹†åˆ†ä¸å‚ç›´æ‹†åˆ†åŒºåˆ«ï¼Ÿ</strong></h2><ul><li><strong>æ°´å¹³æ‹†åˆ†</strong>ï¼šåŒä¸€å¼ è¡¨çš„æ•°æ®åˆ†åˆ°å¤šä¸ªåº“è¡¨ï¼ˆæŒ‰èŒƒå›´&#x2F;å“ˆå¸Œï¼‰ã€‚</li><li><strong>å‚ç›´æ‹†åˆ†</strong>ï¼šä¸åŒä¸šåŠ¡è¡¨æ”¾åˆ°ä¸åŒåº“ï¼ˆç”¨æˆ·åº“ã€è®¢å•åº“ï¼‰ã€‚</li></ul><hr><h2 id="14-åˆ†å¸ƒå¼-ID-ç”Ÿæˆæ–¹æ¡ˆï¼Ÿ"><a href="#14-åˆ†å¸ƒå¼-ID-ç”Ÿæˆæ–¹æ¡ˆï¼Ÿ" class="headerlink" title="14. åˆ†å¸ƒå¼ ID ç”Ÿæˆæ–¹æ¡ˆï¼Ÿ"></a><strong>14. åˆ†å¸ƒå¼ ID ç”Ÿæˆæ–¹æ¡ˆï¼Ÿ</strong></h2><ul><li>UUIDï¼ˆæ— åºï¼Œä¸é€‚åˆæ•°æ®åº“ï¼‰ã€‚</li><li>æ•°æ®åº“è‡ªå¢ IDï¼ˆå•ç‚¹ç“¶é¢ˆï¼‰ã€‚</li><li>Redis è‡ªå¢ã€‚</li><li>é›ªèŠ±ç®—æ³•ï¼ˆSnowflakeï¼‰ã€‚</li><li>Leafï¼ˆç¾å›¢å¼€æºï¼‰ã€‚</li></ul><hr><h2 id="15-é›ªèŠ±ç®—æ³•çš„åŸç†ï¼Ÿ"><a href="#15-é›ªèŠ±ç®—æ³•çš„åŸç†ï¼Ÿ" class="headerlink" title="15. é›ªèŠ±ç®—æ³•çš„åŸç†ï¼Ÿ"></a><strong>15. é›ªèŠ±ç®—æ³•çš„åŸç†ï¼Ÿ</strong></h2><ul><li>64 ä½é•¿æ•´å‹ï¼š<ul><li>æ—¶é—´æˆ³ï¼ˆ41 ä½ï¼‰</li><li>æœºå™¨ IDï¼ˆ10 ä½ï¼‰</li><li>åºåˆ—å·ï¼ˆ12 ä½ï¼‰</li></ul></li><li>ä¿è¯å…¨å±€å”¯ä¸€ã€æœ‰åºã€‚</li></ul><hr><h2 id="16-API-ç½‘å…³çš„ä½œç”¨ï¼Ÿ"><a href="#16-API-ç½‘å…³çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="16. API ç½‘å…³çš„ä½œç”¨ï¼Ÿ"></a><strong>16. API ç½‘å…³çš„ä½œç”¨ï¼Ÿ</strong></h2><ul><li>ç»Ÿä¸€å…¥å£ï¼Œåšè·¯ç”±è½¬å‘ã€‚</li><li>é‰´æƒã€å®‰å…¨æ§åˆ¶ã€‚</li><li>æµé‡æ§åˆ¶ã€ç†”æ–­ã€é™çº§ã€‚</li><li>æ—¥å¿—ç›‘æ§ã€‚</li></ul><hr><h2 id="17-æœåŠ¡æ³¨å†Œä¸å‘ç°æœºåˆ¶ï¼Ÿ"><a href="#17-æœåŠ¡æ³¨å†Œä¸å‘ç°æœºåˆ¶ï¼Ÿ" class="headerlink" title="17. æœåŠ¡æ³¨å†Œä¸å‘ç°æœºåˆ¶ï¼Ÿ"></a><strong>17. æœåŠ¡æ³¨å†Œä¸å‘ç°æœºåˆ¶ï¼Ÿ</strong></h2><ul><li>æœåŠ¡å¯åŠ¨ â†’ æ³¨å†Œä¸­å¿ƒæ³¨å†Œï¼ˆIP&#x2F;ç«¯å£&#x2F;çŠ¶æ€ï¼‰ã€‚</li><li>è°ƒç”¨æ–¹ â†’ ä»æ³¨å†Œä¸­å¿ƒè·å–åœ°å€åˆ—è¡¨ã€‚</li><li>æ³¨å†Œä¸­å¿ƒ â†’ é€šè¿‡å¿ƒè·³ç»´æŒå¥åº·çŠ¶æ€ã€‚</li></ul><hr><h2 id="18-å¾®æœåŠ¡å¦‚ä½•ä¿è¯é«˜å¯ç”¨ï¼Ÿ"><a href="#18-å¾®æœåŠ¡å¦‚ä½•ä¿è¯é«˜å¯ç”¨ï¼Ÿ" class="headerlink" title="18. å¾®æœåŠ¡å¦‚ä½•ä¿è¯é«˜å¯ç”¨ï¼Ÿ"></a><strong>18. å¾®æœåŠ¡å¦‚ä½•ä¿è¯é«˜å¯ç”¨ï¼Ÿ</strong></h2><ul><li>æœåŠ¡å†—ä½™ï¼ˆå¤šå®ä¾‹éƒ¨ç½²ï¼‰ã€‚</li><li>è´Ÿè½½å‡è¡¡ã€‚</li><li>ç†”æ–­ã€é™çº§ã€é™æµã€‚</li><li>è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼ˆK8s + æœåŠ¡æ²»ç†æ¡†æ¶ï¼‰ã€‚</li></ul><hr><h2 id="19-å¾®æœåŠ¡ä¸­çš„é™æµå’Œç†”æ–­ï¼Ÿ"><a href="#19-å¾®æœåŠ¡ä¸­çš„é™æµå’Œç†”æ–­ï¼Ÿ" class="headerlink" title="19. å¾®æœåŠ¡ä¸­çš„é™æµå’Œç†”æ–­ï¼Ÿ"></a><strong>19. å¾®æœåŠ¡ä¸­çš„é™æµå’Œç†”æ–­ï¼Ÿ</strong></h2><ul><li>é™æµï¼šæ§åˆ¶æµé‡ï¼Œä¿æŠ¤ç³»ç»Ÿï¼ˆä»¤ç‰Œæ¡¶&#x2F;æ¼æ¡¶ï¼‰ã€‚</li><li>ç†”æ–­ï¼šå½“ä¸‹æ¸¸æœåŠ¡å¼‚å¸¸æ—¶ï¼Œç›´æ¥å¤±è´¥å¹¶å¿«é€Ÿè¿”å›ã€‚</li></ul><hr><h2 id="20-å¾®æœåŠ¡å¦‚ä½•ä¿è¯å®‰å…¨æ€§ï¼Ÿ"><a href="#20-å¾®æœåŠ¡å¦‚ä½•ä¿è¯å®‰å…¨æ€§ï¼Ÿ" class="headerlink" title="20. å¾®æœåŠ¡å¦‚ä½•ä¿è¯å®‰å…¨æ€§ï¼Ÿ"></a><strong>20. å¾®æœåŠ¡å¦‚ä½•ä¿è¯å®‰å…¨æ€§ï¼Ÿ</strong></h2><ul><li>è®¤è¯æˆæƒï¼ˆOAuth2ã€JWTï¼‰ã€‚</li><li>HTTPSã€åŠ å¯†é€šä¿¡ã€‚</li><li>API ç½‘å…³ç»Ÿä¸€é‰´æƒã€‚</li><li>æ•°æ®è„±æ•ã€‚</li></ul><hr><h2 id="21-OAuth2-çš„åŸç†ï¼Ÿ"><a href="#21-OAuth2-çš„åŸç†ï¼Ÿ" class="headerlink" title="21. OAuth2 çš„åŸç†ï¼Ÿ"></a><strong>21. OAuth2 çš„åŸç†ï¼Ÿ</strong></h2><ul><li>åŸºäºä»¤ç‰Œçš„è®¤è¯æˆæƒåè®®ã€‚</li><li>å››ç§æ¨¡å¼ï¼šæˆæƒç ã€å¯†ç ã€å®¢æˆ·ç«¯å‡­è¯ã€ç®€åŒ–æ¨¡å¼ã€‚</li><li>å…¸å‹æµç¨‹ï¼šç”¨æˆ· â†’ æˆæƒæœåŠ¡å™¨ â†’ è·å– Token â†’ è°ƒç”¨èµ„æºæœåŠ¡å™¨ã€‚</li></ul><hr><h2 id="22-JWT-çš„ä½œç”¨ï¼Ÿ"><a href="#22-JWT-çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="22. JWT çš„ä½œç”¨ï¼Ÿ"></a><strong>22. JWT çš„ä½œç”¨ï¼Ÿ</strong></h2><ul><li>JSON Web Tokenï¼Œä¸€ç§æ— çŠ¶æ€ä»¤ç‰Œã€‚</li><li>å†…å®¹åŒ…å«ä¸‰éƒ¨åˆ†ï¼šHeaderã€Payloadã€Signatureã€‚</li><li>é€‚åˆåˆ†å¸ƒå¼ç³»ç»Ÿåšè®¤è¯ï¼Œæ— éœ€å­˜å‚¨ Sessionã€‚</li></ul><hr><h2 id="23-å•ç‚¹ç™»å½•-SSO-çš„å®ç°ï¼Ÿ"><a href="#23-å•ç‚¹ç™»å½•-SSO-çš„å®ç°ï¼Ÿ" class="headerlink" title="23. å•ç‚¹ç™»å½• SSO çš„å®ç°ï¼Ÿ"></a><strong>23. å•ç‚¹ç™»å½• SSO çš„å®ç°ï¼Ÿ</strong></h2><ul><li>ç”¨æˆ·åªéœ€ç™»å½•ä¸€æ¬¡ï¼Œè·å–å…¨å±€ Token&#x2F;Sessionã€‚</li><li>å¸¸è§å®ç°ï¼šCASã€OAuth2ã€JWTã€‚</li><li>æ ¸å¿ƒï¼šç»Ÿä¸€è®¤è¯ä¸­å¿ƒã€‚</li></ul><hr><h2 id="24-é…ç½®ä¸­å¿ƒçš„ä½œç”¨ï¼Ÿ"><a href="#24-é…ç½®ä¸­å¿ƒçš„ä½œç”¨ï¼Ÿ" class="headerlink" title="24. é…ç½®ä¸­å¿ƒçš„ä½œç”¨ï¼Ÿ"></a><strong>24. é…ç½®ä¸­å¿ƒçš„ä½œç”¨ï¼Ÿ</strong></h2><ul><li>é›†ä¸­åŒ–é…ç½®ç®¡ç†ã€‚</li><li>æ”¯æŒåŠ¨æ€åˆ·æ–°ã€‚</li><li>ç¯å¢ƒéš”ç¦»ï¼ˆdev&#x2F;test&#x2F;prodï¼‰ã€‚</li></ul><hr><h2 id="25-å¾®æœåŠ¡ä¸­çš„ç›‘æ§ä½“ç³»ï¼Ÿ"><a href="#25-å¾®æœåŠ¡ä¸­çš„ç›‘æ§ä½“ç³»ï¼Ÿ" class="headerlink" title="25. å¾®æœåŠ¡ä¸­çš„ç›‘æ§ä½“ç³»ï¼Ÿ"></a><strong>25. å¾®æœåŠ¡ä¸­çš„ç›‘æ§ä½“ç³»ï¼Ÿ</strong></h2><ul><li>æŒ‡æ ‡ç›‘æ§ï¼šPrometheus + Grafanaã€‚</li><li>æ—¥å¿—ç›‘æ§ï¼šELKï¼ˆElasticsearch + Logstash + Kibanaï¼‰ã€‚</li><li>é“¾è·¯è¿½è¸ªï¼šSleuth + Zipkin&#x2F;Jaegerã€‚</li></ul><hr><h2 id="26-Prometheus-çš„åŸç†ï¼Ÿ"><a href="#26-Prometheus-çš„åŸç†ï¼Ÿ" class="headerlink" title="26. Prometheus çš„åŸç†ï¼Ÿ"></a><strong>26. Prometheus çš„åŸç†ï¼Ÿ</strong></h2><ul><li>åŸºäº Pull æ¨¡å‹ï¼Œå®šæœŸä»åº”ç”¨&#x2F;Exporter æ‹‰å–æŒ‡æ ‡ã€‚</li><li>TSDBï¼ˆæ—¶é—´åºåˆ—æ•°æ®åº“ï¼‰å­˜å‚¨æ•°æ®ã€‚</li><li>ç»“åˆ Grafana åšå¯è§†åŒ–ã€‚</li></ul><hr><h2 id="27-ELK-åœ¨å¾®æœåŠ¡ä¸­çš„åº”ç”¨ï¼Ÿ"><a href="#27-ELK-åœ¨å¾®æœåŠ¡ä¸­çš„åº”ç”¨ï¼Ÿ" class="headerlink" title="27. ELK åœ¨å¾®æœåŠ¡ä¸­çš„åº”ç”¨ï¼Ÿ"></a><strong>27. ELK åœ¨å¾®æœåŠ¡ä¸­çš„åº”ç”¨ï¼Ÿ</strong></h2><ul><li>Logstashï¼šæ—¥å¿—é‡‡é›†ã€‚</li><li>Elasticsearchï¼šæ—¥å¿—å­˜å‚¨ã€æœç´¢ã€‚</li><li>Kibanaï¼šæ—¥å¿—åˆ†æã€å¯è§†åŒ–ã€‚</li><li>ç”¨äºç»Ÿä¸€æ—¥å¿—å¹³å°ã€‚</li></ul><hr><h2 id="28-æœåŠ¡è°ƒç”¨é“¾è·¯è¿½è¸ªçš„æ„ä¹‰ï¼Ÿ"><a href="#28-æœåŠ¡è°ƒç”¨é“¾è·¯è¿½è¸ªçš„æ„ä¹‰ï¼Ÿ" class="headerlink" title="28. æœåŠ¡è°ƒç”¨é“¾è·¯è¿½è¸ªçš„æ„ä¹‰ï¼Ÿ"></a><strong>28. æœåŠ¡è°ƒç”¨é“¾è·¯è¿½è¸ªçš„æ„ä¹‰ï¼Ÿ</strong></h2><ul><li>è§£å†³â€œè°ƒç”¨é“¾ä¸æ¸…æ¥šâ€çš„é—®é¢˜ã€‚</li><li>å¿«é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆã€é”™è¯¯ä½ç½®ã€‚</li><li>æå‡è¿ç»´å¯è§‚æµ‹æ€§ã€‚</li></ul><hr><h2 id="29-æœåŠ¡é›ªå´©æ•ˆåº”æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#29-æœåŠ¡é›ªå´©æ•ˆåº”æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="29. æœåŠ¡é›ªå´©æ•ˆåº”æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>29. æœåŠ¡é›ªå´©æ•ˆåº”æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><ul><li>ä¸€ä¸ªæœåŠ¡æ•…éšœ â†’ å¼•å‘è°ƒç”¨å®ƒçš„æœåŠ¡æ•…éšœ â†’ æœ€ç»ˆå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚</li><li>åŸå› ï¼šä¾èµ–è°ƒç”¨æ— ä¿æŠ¤ï¼ˆæ— ç†”æ–­&#x2F;é™æµï¼‰ã€‚</li></ul><hr><h2 id="30-å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘çš„å¾®æœåŠ¡ç³»ç»Ÿï¼Ÿ"><a href="#30-å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘çš„å¾®æœåŠ¡ç³»ç»Ÿï¼Ÿ" class="headerlink" title="30. å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘çš„å¾®æœåŠ¡ç³»ç»Ÿï¼Ÿ"></a><strong>30. å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘çš„å¾®æœåŠ¡ç³»ç»Ÿï¼Ÿ</strong></h2><p><strong>æ ¸å¿ƒæ€è·¯</strong></p><ul><li>æ¶æ„ï¼šå¾®æœåŠ¡ + API ç½‘å…³ + æœåŠ¡æ²»ç†ã€‚</li><li>é«˜å¯ç”¨ï¼šè´Ÿè½½å‡è¡¡ã€å¤šå‰¯æœ¬ã€è‡ªåŠ¨æ•…éšœè½¬ç§»ã€‚</li><li>é«˜æ€§èƒ½ï¼šç¼“å­˜ï¼ˆRedisï¼‰ã€å¼‚æ­¥åŒ–ã€é™æµã€é™çº§ã€‚</li><li>æ•°æ®å±‚ï¼šåˆ†åº“åˆ†è¡¨ã€è¯»å†™åˆ†ç¦»ã€‚</li><li>å®‰å…¨ï¼šOAuth2&#x2F;JWTã€‚</li><li>å¯è§‚æµ‹æ€§ï¼šç›‘æ§ + æ—¥å¿— + é“¾è·¯è¿½è¸ªã€‚</li></ul><hr><h2 id="ä¸ƒã€æ•°æ®åº“-ç¼“å­˜ï¼ˆ30é¢˜ï¼‰"><a href="#ä¸ƒã€æ•°æ®åº“-ç¼“å­˜ï¼ˆ30é¢˜ï¼‰" class="headerlink" title="ä¸ƒã€æ•°æ®åº“ &amp; ç¼“å­˜ï¼ˆ30é¢˜ï¼‰"></a>ä¸ƒã€æ•°æ®åº“ &amp; ç¼“å­˜ï¼ˆ30é¢˜ï¼‰</h2><hr><h2 id="1-MySQL-çš„å­˜å‚¨å¼•æ“åŒºåˆ«"><a href="#1-MySQL-çš„å­˜å‚¨å¼•æ“åŒºåˆ«" class="headerlink" title="1. MySQL çš„å­˜å‚¨å¼•æ“åŒºåˆ«"></a><strong>1. MySQL çš„å­˜å‚¨å¼•æ“åŒºåˆ«</strong></h2><ul><li><strong>å­˜å‚¨å¼•æ“</strong>æ˜¯ MySQL ç®¡ç†æ•°æ®çš„åº•å±‚ç»„ä»¶ï¼Œå†³å®šäº†æ•°æ®å­˜å‚¨æ–¹å¼ã€äº‹åŠ¡æ”¯æŒã€é”æœºåˆ¶ã€ç´¢å¼•æ”¯æŒç­‰ã€‚</li><li><strong>ä¸»è¦å­˜å‚¨å¼•æ“</strong>ï¼š<ul><li><strong>InnoDB</strong>ï¼šäº‹åŠ¡å‹ï¼Œæ”¯æŒè¡Œçº§é”ã€å¤–é”®ã€MVCCã€å´©æºƒæ¢å¤ã€‚é€‚åˆé«˜å¹¶å‘ã€äº‹åŠ¡è¦æ±‚é«˜çš„åœºæ™¯ã€‚</li><li><strong>MyISAM</strong>ï¼šéäº‹åŠ¡å‹ï¼Œè¡¨çº§é”ï¼Œæ”¯æŒå…¨æ–‡ç´¢å¼•ã€‚é€‚åˆè¯»å¤šå†™å°‘ã€æ—¥å¿—æˆ–ç»Ÿè®¡ç±»è¡¨ã€‚</li><li><strong>Memory</strong>ï¼šæ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè®¿é—®é€Ÿåº¦å¿«ï¼Œä½†æ–­ç”µæ•°æ®ä¸¢å¤±ã€‚é€‚åˆä¸´æ—¶è¡¨ã€‚</li><li><strong>Archive</strong>ï¼šå½’æ¡£å¼•æ“ï¼Œåªæ”¯æŒæ’å…¥å’ŒæŸ¥è¯¢ï¼Œä¸æ”¯æŒæ›´æ–°ï¼Œå‹ç¼©å­˜å‚¨ã€‚</li></ul></li><li><strong>é¢è¯•é‡ç‚¹</strong>ï¼š<ul><li>é€‰æ‹©å­˜å‚¨å¼•æ“éœ€æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼šäº‹åŠ¡è¦æ±‚ã€å¹¶å‘é‡ã€æ•°æ®é‡å’Œæ¢å¤ç­–ç•¥ã€‚</li></ul></li></ul><hr><h2 id="2-InnoDB-å’Œ-MyISAM-çš„åŒºåˆ«"><a href="#2-InnoDB-å’Œ-MyISAM-çš„åŒºåˆ«" class="headerlink" title="2. InnoDB å’Œ MyISAM çš„åŒºåˆ«"></a><strong>2. InnoDB å’Œ MyISAM çš„åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>InnoDB</th><th>MyISAM</th></tr></thead><tbody><tr><td>äº‹åŠ¡</td><td>æ”¯æŒ ACID</td><td>ä¸æ”¯æŒ</td></tr><tr><td>é”ç±»å‹</td><td>è¡Œçº§é”+è¡¨é”</td><td>è¡¨çº§é”</td></tr><tr><td>å¤–é”®</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>å´©æºƒæ¢å¤</td><td>è‡ªåŠ¨æ¢å¤</td><td>éœ€æ‰‹åŠ¨ä¿®å¤</td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>5.6+ æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>å¹¶å‘åœºæ™¯</td><td>é«˜å¹¶å‘å†™+è¯»</td><td>è¯»å¤šå†™å°‘</td></tr><tr><td>é€‚ç”¨æ¡ˆä¾‹</td><td>é‡‘èã€ç”µå•†è®¢å•</td><td>æ—¥å¿—åˆ†æã€ç»Ÿè®¡è¡¨</td></tr></tbody></table><hr><h2 id="3-MySQL-äº‹åŠ¡ç‰¹æ€§"><a href="#3-MySQL-äº‹åŠ¡ç‰¹æ€§" class="headerlink" title="3. MySQL äº‹åŠ¡ç‰¹æ€§"></a><strong>3. MySQL äº‹åŠ¡ç‰¹æ€§</strong></h2><ul><li><strong>ACID åŸåˆ™</strong>ï¼š<ol><li><strong>åŸå­æ€§ï¼ˆAtomicï¼‰</strong>ï¼šäº‹åŠ¡å…¨éƒ¨æ‰§è¡Œæˆ–å…¨éƒ¨å›æ»šã€‚</li><li><strong>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</strong>ï¼šäº‹åŠ¡æ‰§è¡Œå‰åæ•°æ®åº“çŠ¶æ€åˆæ³•ã€‚</li><li><strong>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</strong>ï¼šäº‹åŠ¡äº’ä¸å¹²æ‰°ã€‚</li><li><strong>æŒä¹…æ€§ï¼ˆDurabilityï¼‰</strong>ï¼šæäº¤åæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚</li></ol></li><li><strong>éš”ç¦»çº§åˆ«</strong>ï¼š<ul><li><strong>Read Uncommitted</strong>ï¼šå…è®¸è„è¯»ã€‚</li><li><strong>Read Committed</strong>ï¼šé˜²æ­¢è„è¯»ï¼Œä½†å¯èƒ½ä¸å¯é‡å¤è¯»ã€‚</li><li><strong>Repeatable Readï¼ˆé»˜è®¤ InnoDBï¼‰</strong>ï¼šé˜²æ­¢ä¸å¯é‡å¤è¯»ï¼Œé—´éš™é”è§£å†³å¹»è¯»ã€‚</li><li><strong>Serializable</strong>ï¼šå®Œå…¨ä¸²è¡Œæ‰§è¡Œï¼Œæ€§èƒ½æœ€ä½ï¼Œä½†å®Œå…¨éš”ç¦»ã€‚</li></ul></li><li><strong>é¢è¯•è¿½é—®</strong>ï¼šéš”ç¦»çº§åˆ«ä¸æ­»é”ã€æ€§èƒ½çš„æƒè¡¡ã€‚</li></ul><hr><h2 id="4-MVCC-çš„å®ç°åŸç†"><a href="#4-MVCC-çš„å®ç°åŸç†" class="headerlink" title="4. MVCC çš„å®ç°åŸç†"></a><strong>4. MVCC çš„å®ç°åŸç†</strong></h2><ul><li><strong>åŸç†</strong>ï¼š<ul><li>InnoDB ä¸ºæ¯è¡Œå¢åŠ éšè—åˆ— <code>trx_id</code> å’Œ <code>roll_pointer</code>ã€‚</li><li>æŸ¥è¯¢æ—¶æ ¹æ®äº‹åŠ¡ ID åˆ¤æ–­å“ªä¸€ç‰ˆæœ¬å¯è§ã€‚</li><li>è¯»æ“ä½œä¸é˜»å¡å†™æ“ä½œï¼Œå®ç° <strong>éé˜»å¡è¯»</strong>ã€‚</li></ul></li><li><strong>åº”ç”¨</strong>ï¼šæé«˜å¹¶å‘æ€§èƒ½ï¼Œé¿å…è¯»å†™äº’ç›¸é˜»å¡ã€‚</li><li><strong>é¢è¯•è¿½é—®</strong>ï¼šMVCC å¦‚ä½•å®ç° Repeatable Readï¼Œä¸ºä»€ä¹ˆä¸é”è¡¨ã€‚</li></ul><hr><h2 id="5-MySQL-çš„ç´¢å¼•ç±»å‹"><a href="#5-MySQL-çš„ç´¢å¼•ç±»å‹" class="headerlink" title="5. MySQL çš„ç´¢å¼•ç±»å‹"></a><strong>5. MySQL çš„ç´¢å¼•ç±»å‹</strong></h2><ul><li><strong>B+ æ ‘ç´¢å¼•</strong>ï¼šèŒƒå›´æŸ¥è¯¢ã€æ’åºï¼Œå¶å­èŠ‚ç‚¹æŒ‰é¡ºåºè¿æ¥ã€‚</li><li><strong>å“ˆå¸Œç´¢å¼•</strong>ï¼šç²¾ç¡®æŸ¥æ‰¾å¿«ï¼ˆMemory å¼•æ“ï¼‰ã€‚</li><li><strong>å…¨æ–‡ç´¢å¼•</strong>ï¼šæ–‡æœ¬æœç´¢ã€‚</li><li><strong>ç©ºé—´ç´¢å¼•</strong>ï¼šåœ°ç†ä¿¡æ¯æŸ¥è¯¢ï¼ˆR-Treeï¼‰ã€‚</li><li><strong>é¢è¯•è¿½é—®</strong>ï¼šä»€ä¹ˆæ—¶å€™é€‰æ‹©ç»„åˆç´¢å¼•ï¼Œè¦†ç›–ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢ã€‚</li></ul><hr><h2 id="6-èšç°‡ç´¢å¼•-vs-éèšç°‡ç´¢å¼•"><a href="#6-èšç°‡ç´¢å¼•-vs-éèšç°‡ç´¢å¼•" class="headerlink" title="6. èšç°‡ç´¢å¼• vs éèšç°‡ç´¢å¼•"></a><strong>6. èšç°‡ç´¢å¼• vs éèšç°‡ç´¢å¼•</strong></h2><ul><li><strong>èšç°‡ç´¢å¼•</strong>ï¼š<ul><li>æ•°æ®è¡Œå­˜å‚¨é¡ºåºä¸ä¸»é”®é¡ºåºä¸€è‡´ã€‚</li><li>æŸ¥è¯¢èŒƒå›´ã€æ’åºæ•ˆç‡é«˜ã€‚</li></ul></li><li><strong>éèšç°‡ç´¢å¼•</strong>ï¼š<ul><li>ç´¢å¼•å­˜ key + ä¸»é”®ï¼Œå›è¡¨è·å–å…¶ä»–å­—æ®µã€‚</li></ul></li><li><strong>é¢è¯•è¿½é—®</strong>ï¼šèšç°‡ç´¢å¼•æ’å…¥é¡ºåºå¯¹æ€§èƒ½å½±å“ï¼Œå›è¡¨æˆæœ¬ã€‚</li></ul><hr><h2 id="7-B-æ ‘ç´¢å¼•åŸç†"><a href="#7-B-æ ‘ç´¢å¼•åŸç†" class="headerlink" title="7. B+ æ ‘ç´¢å¼•åŸç†"></a><strong>7. B+ æ ‘ç´¢å¼•åŸç†</strong></h2><ul><li>å†…èŠ‚ç‚¹ï¼šå­˜ key + å­èŠ‚ç‚¹æŒ‡é’ˆ</li><li>å¶å­èŠ‚ç‚¹ï¼šå­˜å®Œæ•´è®°å½•æˆ–æŒ‡é’ˆï¼Œå¹¶é“¾è¡¨è¿æ¥</li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>æ”¯æŒèŒƒå›´æŸ¥è¯¢</li><li>ç£ç›˜ IO é«˜æ•ˆ</li></ul></li><li><strong>é¢è¯•è¿½é—®</strong>ï¼šä¸ºä»€ä¹ˆ MySQL é€‰æ‹© B+ æ ‘è€Œä¸æ˜¯ B æ ‘æˆ– Hashã€‚</li></ul><hr><h2 id="8-è¦†ç›–ç´¢å¼•-vs-å›è¡¨"><a href="#8-è¦†ç›–ç´¢å¼•-vs-å›è¡¨" class="headerlink" title="8. è¦†ç›–ç´¢å¼• vs å›è¡¨"></a><strong>8. è¦†ç›–ç´¢å¼• vs å›è¡¨</strong></h2><ul><li><strong>è¦†ç›–ç´¢å¼•</strong>ï¼šç´¢å¼•åŒ…å«æ‰€æœ‰æŸ¥è¯¢å­—æ®µï¼Œæ— éœ€è®¿é—®è¡¨ã€‚</li><li><strong>å›è¡¨</strong>ï¼šç´¢å¼•åªåŒ…å«éƒ¨åˆ†å­—æ®µï¼Œéœ€è¦é€šè¿‡ä¸»é”®æŸ¥è¡¨ã€‚</li><li><strong>ä¼˜åŒ–æ–¹æ³•</strong>ï¼šå°½é‡è®©çƒ­ç‚¹æŸ¥è¯¢ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼Œå‡å°‘ IOã€‚</li></ul><hr><h2 id="9-ç´¢å¼•ä¸‹æ¨ä¼˜åŒ–"><a href="#9-ç´¢å¼•ä¸‹æ¨ä¼˜åŒ–" class="headerlink" title="9. ç´¢å¼•ä¸‹æ¨ä¼˜åŒ–"></a><strong>9. ç´¢å¼•ä¸‹æ¨ä¼˜åŒ–</strong></h2><ul><li>WHERE æ¡ä»¶åœ¨å­˜å‚¨å¼•æ“å±‚è¿‡æ»¤ï¼Œå‡å°‘è¿”å›ä¸Šå±‚çš„æ•°æ®é‡ã€‚</li><li>ç‰¹åˆ«åœ¨ç»„åˆç´¢å¼•æˆ–å‡½æ•°æŸ¥è¯¢æ—¶æœ‰æ•ˆã€‚</li><li><strong>é¢è¯•è¿½é—®</strong>ï¼šç´¢å¼•ä¸‹æ¨èƒ½å¦åº”ç”¨äºé InnoDB å­˜å‚¨å¼•æ“ã€‚</li></ul><hr><h2 id="10-MySQL-é”æœºåˆ¶"><a href="#10-MySQL-é”æœºåˆ¶" class="headerlink" title="10. MySQL é”æœºåˆ¶"></a><strong>10. MySQL é”æœºåˆ¶</strong></h2><ul><li><strong>è¡¨é”</strong>ï¼šé”æ•´å¼ è¡¨ï¼Œä½å¹¶å‘ã€‚</li><li><strong>è¡Œé”</strong>ï¼šé”å•è¡Œï¼ŒInnoDB é»˜è®¤ã€‚</li><li><strong>æ„å‘é”</strong>ï¼šè¡¨çº§é”æ„å›¾ï¼Œé¿å…æ­»é”ã€‚</li><li><strong>é—´éš™é”</strong>ï¼šé˜²æ­¢å¹»è¯»ã€‚</li><li><strong>é¢è¯•è¿½é—®</strong>ï¼šè¡Œé”ã€è¡¨é”çš„å®ç°åŸç†ï¼Œé”å†²çªå¦‚ä½•å¤„ç†ã€‚</li></ul><hr><h2 id="11-è¡Œé”-vs-è¡¨é”"><a href="#11-è¡Œé”-vs-è¡¨é”" class="headerlink" title="11. è¡Œé” vs è¡¨é”"></a><strong>11. è¡Œé” vs è¡¨é”</strong></h2><ul><li>è¡Œé”ï¼šç²’åº¦å°ï¼Œé«˜å¹¶å‘ï¼Œäº‹åŠ¡å®‰å…¨ã€‚</li><li>è¡¨é”ï¼šç²’åº¦å¤§ï¼Œé€‚åˆæ‰¹é‡æ“ä½œã€‚</li><li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šé«˜å¹¶å‘å†™ç”¨è¡Œé”ï¼Œæ‰¹é‡æ›´æ–°å¯ç”¨è¡¨é”ã€‚</li></ul><hr><h2 id="12-é—´éš™é”"><a href="#12-é—´éš™é”" class="headerlink" title="12. é—´éš™é”"></a><strong>12. é—´éš™é”</strong></h2><ul><li>é”å®šç´¢å¼•é—´éš™ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡æ’å…¥å¹»è¯»ã€‚</li><li>ä¸è®°å½•é”ç»“åˆå½¢æˆ <strong>Next-Key Lock</strong>ã€‚</li><li>é»˜è®¤åœ¨ Repeatable Read ä¸‹ä½¿ç”¨ã€‚</li></ul><hr><h2 id="13-æ­»é”æ’æŸ¥"><a href="#13-æ­»é”æ’æŸ¥" class="headerlink" title="13. æ­»é”æ’æŸ¥"></a><strong>13. æ­»é”æ’æŸ¥</strong></h2><ul><li><code>SHOW ENGINE INNODB STATUS\G</code> æŸ¥çœ‹æœ€æ–°æ­»é”ã€‚</li><li>ä¼˜åŒ–ï¼š<ol><li>ç»Ÿä¸€è®¿é—®è¡¨é¡ºåºã€‚</li><li>å°½é‡ç¼©çŸ­äº‹åŠ¡æ—¶é—´ã€‚</li><li>åŠ ç´¢å¼•å‡å°‘æ‰«æè¡Œæ•°ã€‚</li></ol></li></ul><hr><h2 id="14-SQL-æ‰§è¡Œè®¡åˆ’"><a href="#14-SQL-æ‰§è¡Œè®¡åˆ’" class="headerlink" title="14. SQL æ‰§è¡Œè®¡åˆ’"></a><strong>14. SQL æ‰§è¡Œè®¡åˆ’</strong></h2><ul><li>ä½¿ç”¨ <code>EXPLAIN</code> åˆ†æï¼š<ul><li>typeï¼šè®¿é—®ç±»å‹ï¼ˆALL &lt; INDEX &lt; REF &lt; CONSTï¼‰</li><li>keyï¼šä½¿ç”¨çš„ç´¢å¼•</li><li>rowsï¼šæ‰«æè¡Œæ•°</li><li>Extraï¼šå¦‚ Using index, Using temporary</li></ul></li></ul><hr><h2 id="15-æ…¢æŸ¥è¯¢ä¼˜åŒ–"><a href="#15-æ…¢æŸ¥è¯¢ä¼˜åŒ–" class="headerlink" title="15. æ…¢æŸ¥è¯¢ä¼˜åŒ–"></a><strong>15. æ…¢æŸ¥è¯¢ä¼˜åŒ–</strong></h2><ul><li>å»ºç´¢å¼•ï¼ˆè¦†ç›–ç´¢å¼•ã€ç»„åˆç´¢å¼•ï¼‰</li><li>é¿å… SELECT *</li><li>é¿å…åœ¨åˆ—ä¸Šå‡½æ•°æ“ä½œ</li><li>åˆ†åº“åˆ†è¡¨</li><li>ç¼“å­˜ï¼ˆRedis&#x2F;Caffeineï¼‰</li></ul><hr><h2 id="16-åˆ†åº“åˆ†è¡¨éš¾ç‚¹"><a href="#16-åˆ†åº“åˆ†è¡¨éš¾ç‚¹" class="headerlink" title="16. åˆ†åº“åˆ†è¡¨éš¾ç‚¹"></a><strong>16. åˆ†åº“åˆ†è¡¨éš¾ç‚¹</strong></h2><ul><li>è·¨åº“ joinã€åˆ†é¡µ</li><li>åˆ†å¸ƒå¼äº‹åŠ¡</li><li>å…¨å±€å”¯ä¸€ ID</li><li>æ•°æ®è·¯ç”±ã€è¿ç§»</li></ul><hr><h2 id="17-åˆ†å¸ƒå¼äº‹åŠ¡"><a href="#17-åˆ†å¸ƒå¼äº‹åŠ¡" class="headerlink" title="17. åˆ†å¸ƒå¼äº‹åŠ¡"></a><strong>17. åˆ†å¸ƒå¼äº‹åŠ¡</strong></h2><ul><li><strong>XA</strong>ï¼šä¸¤é˜¶æ®µæäº¤ï¼Œä¿è¯å¼ºä¸€è‡´æ€§ã€‚</li><li><strong>TCC</strong>ï¼šTry â†’ Confirm â†’ Cancelï¼Œä¸šåŠ¡è¡¥å¿æ“ä½œã€‚</li><li><strong>SAGA</strong>ï¼šé•¿äº‹åŠ¡è¡¥å¿ã€‚</li><li><strong>æœ¬åœ°æ¶ˆæ¯è¡¨ + MQ</strong>ï¼šæœ€ç»ˆä¸€è‡´æ€§ã€‚</li></ul><hr><h2 id="18-Redis-æ•°æ®ç»“æ„"><a href="#18-Redis-æ•°æ®ç»“æ„" class="headerlink" title="18. Redis æ•°æ®ç»“æ„"></a><strong>18. Redis æ•°æ®ç»“æ„</strong></h2><ul><li><strong>String</strong>ã€<strong>Hash</strong>ã€<strong>List</strong>ã€<strong>Set</strong>ã€<strong>Sorted Set</strong></li><li>Bitmapã€HyperLogLogã€Geo</li><li>åº”ç”¨ï¼šæ’è¡Œæ¦œã€è®¡æ•°ã€é›†åˆæ“ä½œã€åœ°ç†ä½ç½®ã€å¸ƒéš†è¿‡æ»¤å™¨</li></ul><hr><h2 id="19-Redis-ä¸ºä»€ä¹ˆå¿«"><a href="#19-Redis-ä¸ºä»€ä¹ˆå¿«" class="headerlink" title="19. Redis ä¸ºä»€ä¹ˆå¿«"></a><strong>19. Redis ä¸ºä»€ä¹ˆå¿«</strong></h2><ul><li>å…¨å†…å­˜å­˜å‚¨</li><li>å•çº¿ç¨‹ + epoll</li><li>é«˜æ•ˆæ•°æ®ç»“æ„</li><li>é¿å…é”ç«äº‰</li></ul><hr><h2 id="20-Redis-æŒä¹…åŒ–"><a href="#20-Redis-æŒä¹…åŒ–" class="headerlink" title="20. Redis æŒä¹…åŒ–"></a><strong>20. Redis æŒä¹…åŒ–</strong></h2><ul><li><strong>RDB</strong>ï¼šå®šæœŸå¿«ç…§</li><li><strong>AOF</strong>ï¼šå†™å‘½ä»¤æ—¥å¿—ï¼Œappend only</li><li><strong>æ··åˆæŒä¹…åŒ–</strong>ï¼šRDB + AOFï¼Œæé«˜å®‰å…¨æ€§ä¸æ•ˆç‡</li></ul><hr><h2 id="21-Redis-è¿‡æœŸç­–ç•¥"><a href="#21-Redis-è¿‡æœŸç­–ç•¥" class="headerlink" title="21. Redis è¿‡æœŸç­–ç•¥"></a><strong>21. Redis è¿‡æœŸç­–ç•¥</strong></h2><ul><li><strong>æƒ°æ€§åˆ é™¤</strong>ï¼šè®¿é—®æ—¶æ£€æŸ¥ TTL</li><li><strong>å®šæœŸåˆ é™¤</strong>ï¼šå‘¨æœŸæ€§æ‰«æ</li><li><strong>å®šæ—¶åˆ é™¤</strong>ï¼šæ¯ä¸ª key å•ç‹¬å®šæ—¶å™¨</li></ul><hr><h2 id="22-Redis-å†…å­˜æ·˜æ±°ç­–ç•¥"><a href="#22-Redis-å†…å­˜æ·˜æ±°ç­–ç•¥" class="headerlink" title="22. Redis å†…å­˜æ·˜æ±°ç­–ç•¥"></a><strong>22. Redis å†…å­˜æ·˜æ±°ç­–ç•¥</strong></h2><ul><li>noevictionã€allkeys-lruã€volatile-lruã€allkeys-lfuã€volatile-ttl</li><li>LRUï¼šæœ€è¿‘æœ€å°‘ä½¿ç”¨</li><li>LFUï¼šä½¿ç”¨é¢‘ç‡æœ€ä½</li><li>TTLï¼šä¸´æœŸä¼˜å…ˆæ·˜æ±°</li></ul><hr><h2 id="23-Redis-ä¸»ä»å¤åˆ¶"><a href="#23-Redis-ä¸»ä»å¤åˆ¶" class="headerlink" title="23. Redis ä¸»ä»å¤åˆ¶"></a><strong>23. Redis ä¸»ä»å¤åˆ¶</strong></h2><ul><li>å¼‚æ­¥å¤åˆ¶</li><li>å…¨é‡å¤åˆ¶ + å¢é‡å¤åˆ¶</li><li>è¯»å†™åˆ†ç¦»ï¼Œæå‡æ‰©å±•æ€§</li></ul><hr><h2 id="24-Redis-å“¨å…µæœºåˆ¶"><a href="#24-Redis-å“¨å…µæœºåˆ¶" class="headerlink" title="24. Redis å“¨å…µæœºåˆ¶"></a><strong>24. Redis å“¨å…µæœºåˆ¶</strong></h2><ul><li>ç›‘æ§ã€é€šçŸ¥ã€æ•…éšœè½¬ç§»</li><li>Sentinel æŠ•ç¥¨æœºåˆ¶åˆ‡æ¢ä¸»èŠ‚ç‚¹</li><li>é«˜å¯ç”¨æ¶æ„æ ¸å¿ƒç»„ä»¶</li></ul><hr><h2 id="25-Redis-é›†ç¾¤æ¨¡å¼"><a href="#25-Redis-é›†ç¾¤æ¨¡å¼" class="headerlink" title="25. Redis é›†ç¾¤æ¨¡å¼"></a><strong>25. Redis é›†ç¾¤æ¨¡å¼</strong></h2><ul><li>16384 ä¸ªå“ˆå¸Œæ§½åˆ†ç‰‡</li><li>Master + Slave</li><li>è·¨æ§½æ“ä½œæœ‰é™åˆ¶</li><li>é«˜å¯ç”¨ + æ°´å¹³æ‰©å±•</li></ul><hr><h2 id="26-Redis-åˆ†å¸ƒå¼é”"><a href="#26-Redis-åˆ†å¸ƒå¼é”" class="headerlink" title="26. Redis åˆ†å¸ƒå¼é”"></a><strong>26. Redis åˆ†å¸ƒå¼é”</strong></h2><ul><li><strong>å•æœº</strong>ï¼šSETNX + EXPIRE</li><li><strong>Redisson</strong>ï¼š<ul><li>è‡ªåŠ¨ç»­æœŸï¼ˆçœ‹é—¨ç‹—æœºåˆ¶ï¼‰</li><li>å¯é‡å…¥é”</li><li>å…¬å¹³é”</li></ul></li><li><strong>RedLock</strong>ï¼šå¤šèŠ‚ç‚¹å¼ºä¸€è‡´æ€§</li></ul><hr><h2 id="27-Redis-å¸¸è§é—®é¢˜"><a href="#27-Redis-å¸¸è§é—®é¢˜" class="headerlink" title="27. Redis å¸¸è§é—®é¢˜"></a><strong>27. Redis å¸¸è§é—®é¢˜</strong></h2><ul><li>å†…å­˜ä¸è¶³ &#x2F; OOM</li><li>çƒ­ç‚¹ key</li><li>bigkey å¯¼è‡´é˜»å¡</li><li>RDB fork é˜»å¡</li><li>ä¸»ä»å»¶è¿Ÿ</li></ul><hr><h2 id="28-ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©"><a href="#28-ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©" class="headerlink" title="28. ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©"></a><strong>28. ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©</strong></h2><ul><li><strong>ç©¿é€</strong>ï¼šä¸å­˜åœ¨æ•°æ®é¢‘ç¹è®¿é—® â†’ å¸ƒéš†è¿‡æ»¤å™¨</li><li><strong>å‡»ç©¿</strong>ï¼šçƒ­ç‚¹ key ç¬é—´å¤±æ•ˆ â†’ äº’æ–¥é”&#x2F;æ°¸ä¸è¿‡æœŸç¼“å­˜</li><li><strong>é›ªå´©</strong>ï¼šå¤§é‡ key åŒæ—¶è¿‡æœŸ â†’ TTL + éšæœºå€¼</li></ul><hr><h2 id="29-ç¼“å­˜ä¸æ•°æ®åº“ä¸€è‡´æ€§"><a href="#29-ç¼“å­˜ä¸æ•°æ®åº“ä¸€è‡´æ€§" class="headerlink" title="29. ç¼“å­˜ä¸æ•°æ®åº“ä¸€è‡´æ€§"></a><strong>29. ç¼“å­˜ä¸æ•°æ®åº“ä¸€è‡´æ€§</strong></h2><ul><li><strong>Cache Aside</strong>ï¼šå…ˆ DBï¼Œå†åˆ ç¼“å­˜</li><li><strong>åŒå†™</strong>ï¼šDB + ç¼“å­˜åŒæ­¥æ›´æ–°</li><li><strong>å¼‚æ­¥æ¶ˆæ¯</strong>ï¼šMQ + å»¶æ—¶é˜Ÿåˆ—ï¼Œå®ç°æœ€ç»ˆä¸€è‡´æ€§</li></ul><hr><h2 id="30-Redis-vs-Caffeine"><a href="#30-Redis-vs-Caffeine" class="headerlink" title="30. Redis vs Caffeine"></a><strong>30. Redis vs Caffeine</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>Redis</th><th>Caffeine</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>åˆ†å¸ƒå¼ç¼“å­˜</td><td>æœ¬åœ°ç¼“å­˜</td></tr><tr><td>æŒä¹…åŒ–</td><td>RDB &#x2F; AOF</td><td>ä¸æ”¯æŒ</td></tr><tr><td>é›†ç¾¤</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>è®¿é—®é€Ÿåº¦</td><td>æ¯«ç§’çº§</td><td>çº³ç§’çº§</td></tr><tr><td>åœºæ™¯</td><td>åˆ†å¸ƒå¼å…±äº«ï¼Œé«˜å¹¶å‘</td><td>æœ¬åœ°çƒ­ç‚¹ç¼“å­˜</td></tr></tbody></table><p><strong>æœ€ä½³å®è·µ</strong>ï¼šCaffeineï¼ˆæœ¬åœ°ç¼“å­˜ï¼‰+ Redisï¼ˆåˆ†å¸ƒå¼ç¼“å­˜ï¼‰+ DB â†’ å¤šçº§ç¼“å­˜ç»“æ„ã€‚</p><hr><h2 id="å…«ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆ30é¢˜ï¼‰"><a href="#å…«ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆ30é¢˜ï¼‰" class="headerlink" title="å…«ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆ30é¢˜ï¼‰"></a>å…«ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆ30é¢˜ï¼‰</h2><hr><h2 id="1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ" class="headerlink" title="1. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ"></a><strong>1. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ</strong></h2><ul><li><strong>è§£è€¦ç³»ç»Ÿ</strong>ï¼šç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ä¸ç›´æ¥è°ƒç”¨ï¼Œé€šè¿‡é˜Ÿåˆ—ä¼ é€’æ¶ˆæ¯ã€‚</li><li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šç”¨æˆ·è¯·æ±‚ä¸ç­‰å¾…åç«¯ä¸šåŠ¡å®Œæˆï¼Œæé«˜å“åº”é€Ÿåº¦ã€‚</li><li><strong>å‰Šå³°å¡«è°·</strong>ï¼šç¼“å†²é«˜å³°æµé‡ï¼Œé¿å…æ•°æ®åº“æˆ–æœåŠ¡å‹åŠ›è¿‡å¤§ã€‚</li><li><strong>å¯é ä¼ è¾“</strong>ï¼šé€šè¿‡æŒä¹…åŒ–ã€ACK æœºåˆ¶ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚</li><li><strong>å¯æ‰©å±•æ€§</strong>ï¼šå¢åŠ æ¶ˆè´¹è€…å¯æ°´å¹³æ‰©å±•ï¼Œæé«˜ç³»ç»Ÿååé‡ã€‚</li><li><strong>é¢è¯•è¿½é—®</strong>ï¼šä¸ºä»€ä¹ˆ MQ å¯ä»¥è§£å†³å¾®æœåŠ¡é—´è€¦åˆé—®é¢˜ï¼Ÿ</li></ul><hr><h2 id="2-æ¶ˆæ¯é˜Ÿåˆ—çš„ä¼˜ç¼ºç‚¹"><a href="#2-æ¶ˆæ¯é˜Ÿåˆ—çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="2. æ¶ˆæ¯é˜Ÿåˆ—çš„ä¼˜ç¼ºç‚¹"></a><strong>2. æ¶ˆæ¯é˜Ÿåˆ—çš„ä¼˜ç¼ºç‚¹</strong></h2><ul><li><strong>ä¼˜ç‚¹</strong>ï¼š<ul><li>å¼‚æ­¥å¤„ç†æå‡ååé‡</li><li>ç³»ç»Ÿè§£è€¦</li><li>æ”¯æŒå‰Šå³°å¡«è°·</li><li>æ¶ˆæ¯å¯é æ€§å¯æ§</li></ul></li><li><strong>ç¼ºç‚¹</strong>ï¼š<ul><li>ç³»ç»Ÿå¤æ‚åº¦å¢åŠ </li><li>æ¶ˆæ¯å»¶è¿Ÿ</li><li>é¡ºåºå’Œé‡å¤æ¶ˆè´¹éœ€è¦é¢å¤–å¤„ç†</li></ul></li><li><strong>ä¼˜åŒ–ç‚¹</strong>ï¼šç»“åˆå¹‚ç­‰è®¾è®¡ã€å»¶è¿Ÿé˜Ÿåˆ—å’Œæ‰¹é‡å¤„ç†</li></ul><hr><h2 id="3-RabbitMQ-æ ¸å¿ƒç»„ä»¶"><a href="#3-RabbitMQ-æ ¸å¿ƒç»„ä»¶" class="headerlink" title="3. RabbitMQ æ ¸å¿ƒç»„ä»¶"></a><strong>3. RabbitMQ æ ¸å¿ƒç»„ä»¶</strong></h2><ul><li><strong>Producer</strong>ï¼šå‘é€æ¶ˆæ¯</li><li><strong>Exchange</strong>ï¼šè·¯ç”±æ¶ˆæ¯ï¼ˆDirectã€Fanoutã€Topicã€Headersï¼‰</li><li><strong>Queue</strong>ï¼šå­˜å‚¨æ¶ˆæ¯</li><li><strong>Binding</strong>ï¼šç»‘å®š Exchange å’Œ Queue</li><li><strong>Consumer</strong>ï¼šæ¥æ”¶æ¶ˆæ¯</li><li><strong>åŸç†</strong>ï¼šExchange å†³å®šè·¯ç”±è§„åˆ™ï¼ŒQueue è´Ÿè´£ç¼“å†²å’ŒæŠ•é€’</li></ul><hr><h2 id="4-RabbitMQ-æ¶ˆæ¯ç¡®è®¤æœºåˆ¶"><a href="#4-RabbitMQ-æ¶ˆæ¯ç¡®è®¤æœºåˆ¶" class="headerlink" title="4. RabbitMQ æ¶ˆæ¯ç¡®è®¤æœºåˆ¶"></a><strong>4. RabbitMQ æ¶ˆæ¯ç¡®è®¤æœºåˆ¶</strong></h2><ul><li><strong>ç”Ÿäº§è€…ç«¯</strong>ï¼š<ul><li>Publisher Confirmï¼Œç¡®ä¿æ¶ˆæ¯å†™å…¥ Broker</li></ul></li><li><strong>æ¶ˆè´¹è€…ç«¯</strong>ï¼š<ul><li>è‡ªåŠ¨ ackï¼šæ¶ˆè´¹å³ç¡®è®¤</li><li>æ‰‹åŠ¨ ackï¼šæˆåŠŸå¤„ç†åç¡®è®¤</li></ul></li><li><strong>åº”ç”¨å®è·µ</strong>ï¼šæ‰‹åŠ¨ ack å¯å¤„ç†å¼‚å¸¸é‡è¯•ï¼Œä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±</li></ul><hr><h2 id="5-Kafka-æ ¸å¿ƒæ¦‚å¿µ"><a href="#5-Kafka-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="5. Kafka æ ¸å¿ƒæ¦‚å¿µ"></a><strong>5. Kafka æ ¸å¿ƒæ¦‚å¿µ</strong></h2><ul><li><strong>Producer&#x2F;Consumer</strong>ï¼šæ¶ˆæ¯å‘é€å’Œæ¥æ”¶</li><li><strong>Topic&#x2F;Partition</strong>ï¼šä¸»é¢˜å’Œåˆ†åŒº</li><li><strong>Broker&#x2F;Cluster</strong>ï¼šèŠ‚ç‚¹å’Œé›†ç¾¤</li><li><strong>Consumer Group</strong>ï¼šæ¶ˆè´¹ç»„å®ç°è´Ÿè½½å‡è¡¡</li><li><strong>Offset</strong>ï¼šè®°å½•æ¶ˆè´¹ä½ç½®</li><li><strong>åŸç†</strong>ï¼šç”Ÿäº§è€…å†™å…¥ Partitionï¼Œæ¶ˆè´¹è€…æ ¹æ® Offset æ¶ˆè´¹</li></ul><hr><h2 id="6-Kafka-åˆ†åŒºæœºåˆ¶"><a href="#6-Kafka-åˆ†åŒºæœºåˆ¶" class="headerlink" title="6. Kafka åˆ†åŒºæœºåˆ¶"></a><strong>6. Kafka åˆ†åŒºæœºåˆ¶</strong></h2><ul><li><strong>Partition æé«˜å¹¶è¡Œ</strong></li><li><strong>åˆ†åŒºå†…é¡ºåºä¿è¯</strong></li><li><strong>è·¯ç”±ç­–ç•¥</strong>ï¼šé»˜è®¤è½®è¯¢ï¼Œæˆ– Key å“ˆå¸Œåˆ†åŒº</li><li><strong>é¢è¯•ç‚¹</strong>ï¼šå¦‚ä½•ä¿è¯å…¨å±€é¡ºåºï¼Ÿåªèƒ½ä¿è¯åˆ†åŒºå†…é¡ºåº</li></ul><hr><h2 id="7-Kafka-å‰¯æœ¬æœºåˆ¶"><a href="#7-Kafka-å‰¯æœ¬æœºåˆ¶" class="headerlink" title="7. Kafka å‰¯æœ¬æœºåˆ¶"></a><strong>7. Kafka å‰¯æœ¬æœºåˆ¶</strong></h2><ul><li><strong>Leader&#x2F;Follower ç»“æ„</strong></li><li><strong>åŒæ­¥æœºåˆ¶</strong>ï¼šISR åˆ—è¡¨è·Ÿéš Leader</li><li><strong>é«˜å¯ç”¨</strong>ï¼šLeader å¼‚å¸¸è‡ªåŠ¨åˆ‡æ¢</li><li><strong>é¢è¯•æ‹“å±•</strong>ï¼šå‰¯æœ¬åŒæ­¥æ¨¡å¼å¯¹æ€§èƒ½çš„å½±å“</li></ul><hr><h2 id="8-Kafka-ISR-åŸç†"><a href="#8-Kafka-ISR-åŸç†" class="headerlink" title="8. Kafka ISR åŸç†"></a><strong>8. Kafka ISR åŸç†</strong></h2><ul><li><strong>ISRï¼ˆIn-Sync Replicasï¼‰</strong>ï¼šè·Ÿä¸Š Leader çš„å‰¯æœ¬é›†åˆ</li><li><strong>æ¶ˆæ¯æäº¤è§„åˆ™</strong>ï¼šåªè¦ ISR å†…å‰¯æœ¬å†™å…¥æ‰ç®—æˆåŠŸ</li><li><strong>ä¼˜åŒ–</strong>ï¼šå‰¯æœ¬æ•°é‡ä¸ ACK ç­–ç•¥å¯è°ƒèŠ‚å¯é æ€§ä¸ååé‡</li></ul><hr><h2 id="9-Kafka-æ¶ˆè´¹ç»„åŸç†"><a href="#9-Kafka-æ¶ˆè´¹ç»„åŸç†" class="headerlink" title="9. Kafka æ¶ˆè´¹ç»„åŸç†"></a><strong>9. Kafka æ¶ˆè´¹ç»„åŸç†</strong></h2><ul><li>åŒä¸€ç»„å†…çš„æ¯ä¸ª Partition åªè¢«ä¸€ä¸ª Consumer æ¶ˆè´¹</li><li>å¤šç»„å¯é‡å¤æ¶ˆè´¹ï¼Œå®ç°å¹¿æ’­</li><li>æé«˜å¹¶è¡Œæ¶ˆè´¹ï¼Œå‡å°‘é‡å¤æ¶ˆè´¹</li><li><strong>æ‹“å±•</strong>ï¼šæ¶ˆè´¹ç»„é‡å¹³è¡¡ã€å†å‡è¡¡æœºåˆ¶</li></ul><hr><h2 id="10-Kafka-Offset-æäº¤æ–¹å¼"><a href="#10-Kafka-Offset-æäº¤æ–¹å¼" class="headerlink" title="10. Kafka Offset æäº¤æ–¹å¼"></a><strong>10. Kafka Offset æäº¤æ–¹å¼</strong></h2><ul><li>è‡ªåŠ¨æäº¤ï¼šæ¶ˆè´¹å®Œæˆåè‡ªåŠ¨æäº¤ Offset</li><li>æ‰‹åŠ¨æäº¤ï¼š<ul><li>åŒæ­¥æäº¤ï¼šé˜»å¡ç­‰å¾…</li><li>å¼‚æ­¥æäº¤ï¼šæ€§èƒ½é«˜ï¼Œå¯èƒ½ä¸¢å°‘é‡æ¶ˆæ¯</li></ul></li><li><strong>å®è·µ</strong>ï¼šç»“åˆäº‹åŠ¡å®ç° Exactly Once</li></ul><hr><h2 id="11-Kafka-é«˜ååé‡åŸç†"><a href="#11-Kafka-é«˜ååé‡åŸç†" class="headerlink" title="11. Kafka é«˜ååé‡åŸç†"></a><strong>11. Kafka é«˜ååé‡åŸç†</strong></h2><ul><li>é¡ºåºå†™ç£ç›˜ï¼Œé¿å…éšæœº IO</li><li>æ‰¹é‡å‘é€æ¶ˆæ¯ï¼Œå‡å°‘ç½‘ç»œå¼€é”€</li><li>é›¶æ‹·è´æœºåˆ¶ï¼Œå‡å°‘ CPU æ¶ˆè€—</li><li><strong>é¢è¯•æ‹“å±•</strong>ï¼šå¦‚ä½•è°ƒæ•´æ‰¹é‡å¤§å°æé«˜ååé‡</li></ul><hr><h2 id="12-Kafka-é›¶æ‹·è´æœºåˆ¶"><a href="#12-Kafka-é›¶æ‹·è´æœºåˆ¶" class="headerlink" title="12. Kafka é›¶æ‹·è´æœºåˆ¶"></a><strong>12. Kafka é›¶æ‹·è´æœºåˆ¶</strong></h2><ul><li>ç›´æ¥ä»ç£ç›˜ buffer ä¼ åˆ°ç½‘ç»œ bufferï¼Œæ— ç”¨æˆ·æ€å¤åˆ¶</li><li>åˆ©ç”¨ sendfile() æå‡å¤§æµé‡ä¼ è¾“æ•ˆç‡</li></ul><hr><h2 id="13-RocketMQ-æ ¸å¿ƒç‰¹ç‚¹"><a href="#13-RocketMQ-æ ¸å¿ƒç‰¹ç‚¹" class="headerlink" title="13. RocketMQ æ ¸å¿ƒç‰¹ç‚¹"></a><strong>13. RocketMQ æ ¸å¿ƒç‰¹ç‚¹</strong></h2><ul><li>é«˜å¯é ï¼Œé«˜æ€§èƒ½</li><li>é¡ºåºæ¶ˆæ¯ã€äº‹åŠ¡æ¶ˆæ¯åŸç”Ÿæ”¯æŒ</li><li>Broker æ— çŠ¶æ€ï¼Œæ˜“æ°´å¹³æ‰©å±•</li><li>æ”¯æŒå¤šè¯­è¨€å®¢æˆ·ç«¯</li><li>æ¶ˆæ¯å­˜å‚¨ï¼šCommitLog + ConsumeQueue + IndexFile</li></ul><hr><h2 id="14-RocketMQ-é¡ºåºæ¶ˆæ¯"><a href="#14-RocketMQ-é¡ºåºæ¶ˆæ¯" class="headerlink" title="14. RocketMQ é¡ºåºæ¶ˆæ¯"></a><strong>14. RocketMQ é¡ºåºæ¶ˆæ¯</strong></h2><ul><li>é€šè¿‡ Key å“ˆå¸Œæ˜ å°„åˆ°é˜Ÿåˆ—</li><li>é˜Ÿåˆ—å†…é¡ºåºä¸¥æ ¼ä¿è¯</li><li>åº”ç”¨åœºæ™¯ï¼šè®¢å•æ”¯ä»˜ã€æµæ°´å¤„ç†</li></ul><hr><h2 id="15-RocketMQ-äº‹åŠ¡æ¶ˆæ¯"><a href="#15-RocketMQ-äº‹åŠ¡æ¶ˆæ¯" class="headerlink" title="15. RocketMQ äº‹åŠ¡æ¶ˆæ¯"></a><strong>15. RocketMQ äº‹åŠ¡æ¶ˆæ¯</strong></h2><ul><li><strong>åŠæ¶ˆæ¯æœºåˆ¶</strong>ï¼š<ol><li>å‘é€åŠæ¶ˆæ¯åˆ° Broker</li><li>æ‰§è¡Œæœ¬åœ°äº‹åŠ¡</li><li>æäº¤æˆ–å›æ»šæ¶ˆæ¯</li></ol></li><li>ä¿è¯åˆ†å¸ƒå¼äº‹åŠ¡æœ€ç»ˆä¸€è‡´æ€§</li></ul><hr><h2 id="16-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±"><a href="#16-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±" class="headerlink" title="16. å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±"></a><strong>16. å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±</strong></h2><ul><li><strong>ç”Ÿäº§è€…ç«¯</strong>ï¼šç¡®è®¤æœºåˆ¶</li><li><strong>Brokerç«¯</strong>ï¼šæ¶ˆæ¯æŒä¹…åŒ–</li><li><strong>æ¶ˆè´¹è€…ç«¯</strong>ï¼šæ‰‹åŠ¨ ack + å¹‚ç­‰æ¶ˆè´¹</li></ul><hr><h2 id="17-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸é‡å¤æ¶ˆè´¹"><a href="#17-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸é‡å¤æ¶ˆè´¹" class="headerlink" title="17. å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸é‡å¤æ¶ˆè´¹"></a><strong>17. å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸é‡å¤æ¶ˆè´¹</strong></h2><ul><li>æ¶ˆæ¯å¹‚ç­‰ï¼šå”¯ä¸€ ID + æ•°æ®åº“å”¯ä¸€çº¦æŸ + Redis å»é‡</li><li>Kafka Exactly Once + äº‹åŠ¡å¤„ç†</li></ul><hr><h2 id="18-å¦‚ä½•ä¿è¯æ¶ˆæ¯æœ‰åº"><a href="#18-å¦‚ä½•ä¿è¯æ¶ˆæ¯æœ‰åº" class="headerlink" title="18. å¦‚ä½•ä¿è¯æ¶ˆæ¯æœ‰åº"></a><strong>18. å¦‚ä½•ä¿è¯æ¶ˆæ¯æœ‰åº</strong></h2><ul><li><strong>Kafka</strong>ï¼šPartition å†…é¡ºåº</li><li><strong>RocketMQ</strong>ï¼šé˜Ÿåˆ—å†…é¡ºåº</li><li><strong>æ³¨æ„</strong>ï¼šå¤š Partition å¹¶è¡Œå¯èƒ½å¯¼è‡´æ•´ä½“æ— åº</li></ul><hr><h2 id="19-æ¶ˆæ¯å †ç§¯è§£å†³åŠæ³•"><a href="#19-æ¶ˆæ¯å †ç§¯è§£å†³åŠæ³•" class="headerlink" title="19. æ¶ˆæ¯å †ç§¯è§£å†³åŠæ³•"></a><strong>19. æ¶ˆæ¯å †ç§¯è§£å†³åŠæ³•</strong></h2><ul><li>å¢åŠ æ¶ˆè´¹è€…æ•°é‡</li><li>æ‰©å±•é˜Ÿåˆ—åˆ†åŒº</li><li>æµé‡å‰Šå³°</li><li>æ¶ˆè´¹ç«¯æ‰¹é‡å¤„ç†ï¼Œæé«˜ååé‡</li></ul><hr><h2 id="20-å¦‚ä½•è®¾è®¡å»¶è¿Ÿé˜Ÿåˆ—"><a href="#20-å¦‚ä½•è®¾è®¡å»¶è¿Ÿé˜Ÿåˆ—" class="headerlink" title="20. å¦‚ä½•è®¾è®¡å»¶è¿Ÿé˜Ÿåˆ—"></a><strong>20. å¦‚ä½•è®¾è®¡å»¶è¿Ÿé˜Ÿåˆ—</strong></h2><ul><li><strong>RabbitMQ</strong>ï¼šTTL + Dead Letter Queue</li><li><strong>Kafka</strong>ï¼šå»¶è¿Ÿæ¶ˆæ¯æ’ä»¶ &#x2F; æ—¶é—´è½®</li><li><strong>Redis</strong>ï¼šSortedSet + è½®è¯¢</li><li><strong>åœºæ™¯</strong>ï¼šè®¢å•è¶…æ—¶ã€çŸ­ä¿¡å»¶è¿Ÿå‘é€</li></ul><hr><h2 id="21-æ­»ä¿¡é˜Ÿåˆ—ä½œç”¨"><a href="#21-æ­»ä¿¡é˜Ÿåˆ—ä½œç”¨" class="headerlink" title="21. æ­»ä¿¡é˜Ÿåˆ—ä½œç”¨"></a><strong>21. æ­»ä¿¡é˜Ÿåˆ—ä½œç”¨</strong></h2><ul><li>æ¶ˆè´¹å¤±è´¥æ¶ˆæ¯æ”¶é›†åˆ°æ­»ä¿¡é˜Ÿåˆ—</li><li>æ”¯æŒé‡è¯•ã€å‘Šè­¦å’Œé—®é¢˜æ’æŸ¥</li><li>æé«˜ç³»ç»Ÿå¯é æ€§</li></ul><hr><h2 id="22-å¹‚ç­‰å®ç°æ–¹å¼"><a href="#22-å¹‚ç­‰å®ç°æ–¹å¼" class="headerlink" title="22. å¹‚ç­‰å®ç°æ–¹å¼"></a><strong>22. å¹‚ç­‰å®ç°æ–¹å¼</strong></h2><ul><li>æ¶ˆæ¯å”¯ä¸€ ID</li><li>æ•°æ®åº“å”¯ä¸€çº¦æŸ</li><li>Redis å»é‡ç¼“å­˜</li><li>æœ¬åœ°äº‹åŠ¡ç»“åˆ MQ ä¿è¯å¹‚ç­‰</li></ul><hr><h2 id="23-æ¶ˆæ¯é˜Ÿåˆ—é™æµæ–¹å¼"><a href="#23-æ¶ˆæ¯é˜Ÿåˆ—é™æµæ–¹å¼" class="headerlink" title="23. æ¶ˆæ¯é˜Ÿåˆ—é™æµæ–¹å¼"></a><strong>23. æ¶ˆæ¯é˜Ÿåˆ—é™æµæ–¹å¼</strong></h2><ul><li>æ¶ˆè´¹è€…é™æµï¼šå¤„ç†é€Ÿç‡é™åˆ¶</li><li>ç”Ÿäº§è€…é™æµï¼šä»¤ç‰Œæ¡¶&#x2F;æ¼æ¡¶</li><li>Broker é˜Ÿåˆ—å®¹é‡é™åˆ¶ + æ‹’ç»ç­–ç•¥</li></ul><hr><h2 id="24-æ¶ˆæ¯é˜Ÿåˆ—ç›‘æ§"><a href="#24-æ¶ˆæ¯é˜Ÿåˆ—ç›‘æ§" class="headerlink" title="24. æ¶ˆæ¯é˜Ÿåˆ—ç›‘æ§"></a><strong>24. æ¶ˆæ¯é˜Ÿåˆ—ç›‘æ§</strong></h2><ul><li>æ¶ˆæ¯å †ç§¯é‡</li><li>æ¶ˆè´¹é€Ÿç‡</li><li>Broker å¥åº·çŠ¶æ€</li><li>å»¶è¿Ÿæ—¶é—´</li><li>å·¥å…·ï¼šPrometheus + Grafanaã€Kafka Managerã€RocketMQ Consoleã€RabbitMQ Management</li></ul><hr><h2 id="25-Kafka-vs-RabbitMQ"><a href="#25-Kafka-vs-RabbitMQ" class="headerlink" title="25. Kafka vs RabbitMQ"></a><strong>25. Kafka vs RabbitMQ</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>Kafka</th><th>RabbitMQ</th></tr></thead><tbody><tr><td>æ¨¡å‹</td><td>Pub&#x2F;Sub + Queue</td><td>AMQP</td></tr><tr><td>æ¶ˆæ¯å­˜å‚¨</td><td>æŒä¹…åŒ–æ—¥å¿—</td><td>é˜Ÿåˆ—å­˜å‚¨</td></tr><tr><td>é¡ºåºä¿è¯</td><td>Partition å†…é¡ºåº</td><td>é˜Ÿåˆ—é¡ºåº</td></tr><tr><td>é«˜åå</td><td>é«˜ï¼ˆæ‰¹é‡ + é›¶æ‹·è´ï¼‰</td><td>ä¸­ç­‰</td></tr><tr><td>æ¶ˆè´¹æ¨¡å¼</td><td>Pull &#x2F; Push</td><td>Push</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>å¤§æ•°æ®æµã€æ—¥å¿—ã€äº‹ä»¶é©±åŠ¨</td><td>ä»»åŠ¡é˜Ÿåˆ—ã€å¼‚æ­¥å¤„ç†ã€å¯é æŠ•é€’</td></tr></tbody></table><hr><h2 id="26-Kafka-vs-RocketMQ"><a href="#26-Kafka-vs-RocketMQ" class="headerlink" title="26. Kafka vs RocketMQ"></a><strong>26. Kafka vs RocketMQ</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>Kafka</th><th>RocketMQ</th></tr></thead><tbody><tr><td>é¡ºåºæ¶ˆæ¯</td><td>Partition å†…é¡ºåº</td><td>é˜Ÿåˆ—å†…é¡ºåºå…¨å±€å¯æ§</td></tr><tr><td>äº‹åŠ¡æ¶ˆæ¯</td><td>é™åˆ¶è¾ƒå¤š</td><td>åŸç”Ÿæ”¯æŒ</td></tr><tr><td>å­˜å‚¨æ–¹å¼</td><td>CommitLog</td><td>CommitLog + ConsumeQueue + IndexFile</td></tr><tr><td>é«˜å¯ç”¨</td><td>ISR + å‰¯æœ¬</td><td>Master-Slave + HA</td></tr><tr><td>ç”Ÿæ€</td><td>Flinkã€Spark é›†æˆ</td><td>åˆ†å¸ƒå¼äº‹åŠ¡ã€æ”¯ä»˜ç³»ç»Ÿåº”ç”¨</td></tr></tbody></table><hr><h2 id="27-Pulsar-ç‰¹ç‚¹"><a href="#27-Pulsar-ç‰¹ç‚¹" class="headerlink" title="27. Pulsar ç‰¹ç‚¹"></a><strong>27. Pulsar ç‰¹ç‚¹</strong></h2><ul><li>å¤šç§Ÿæˆ·æ”¯æŒ</li><li>æŒä¹…åŒ–ä½¿ç”¨ BookKeeper</li><li>Topic å¯åˆ† Partition</li><li>æ”¯æŒäº‹åŠ¡ã€å»¶è¿Ÿæ¶ˆæ¯</li><li>Push&#x2F;Pull æ¶ˆè´¹æ¨¡å¼çµæ´»</li></ul><hr><h2 id="28-æ¶ˆæ¯ä¸­é—´ä»¶å¦‚ä½•ä¿è¯é«˜å¯ç”¨"><a href="#28-æ¶ˆæ¯ä¸­é—´ä»¶å¦‚ä½•ä¿è¯é«˜å¯ç”¨" class="headerlink" title="28. æ¶ˆæ¯ä¸­é—´ä»¶å¦‚ä½•ä¿è¯é«˜å¯ç”¨"></a><strong>28. æ¶ˆæ¯ä¸­é—´ä»¶å¦‚ä½•ä¿è¯é«˜å¯ç”¨</strong></h2><ul><li>å¤šå‰¯æœ¬ + è‡ªåŠ¨åˆ‡æ¢</li><li>Broker é›†ç¾¤</li><li>æ¶ˆæ¯æŒä¹…åŒ–</li><li>å®¢æˆ·ç«¯é‡è¯•</li><li>Zookeeper&#x2F;Controller ç®¡ç†å…ƒæ•°æ®</li></ul><hr><h2 id="29-æ¶ˆæ¯é˜Ÿåˆ—æ°´å¹³æ‰©å±•"><a href="#29-æ¶ˆæ¯é˜Ÿåˆ—æ°´å¹³æ‰©å±•" class="headerlink" title="29. æ¶ˆæ¯é˜Ÿåˆ—æ°´å¹³æ‰©å±•"></a><strong>29. æ¶ˆæ¯é˜Ÿåˆ—æ°´å¹³æ‰©å±•</strong></h2><ul><li>Kafkaï¼šå¢åŠ  Partition &#x2F; Broker</li><li>RabbitMQï¼šé›†ç¾¤ + Shovel&#x2F;Federation</li><li>RocketMQï¼šå¢åŠ  Broker + Topic åˆ†åŒº</li><li><strong>æ³¨æ„</strong>ï¼šåˆ†åŒºæ‰©å±•å¯èƒ½å½±å“é¡ºåºï¼Œéœ€è¦ Key è·¯ç”±</li></ul><hr><h2 id="30-æ¶ˆæ¯é˜Ÿåˆ—-vs-äº‹ä»¶æ€»çº¿"><a href="#30-æ¶ˆæ¯é˜Ÿåˆ—-vs-äº‹ä»¶æ€»çº¿" class="headerlink" title="30. æ¶ˆæ¯é˜Ÿåˆ— vs äº‹ä»¶æ€»çº¿"></a><strong>30. æ¶ˆæ¯é˜Ÿåˆ— vs äº‹ä»¶æ€»çº¿</strong></h2><ul><li>MQï¼šå…³æ³¨æ¶ˆæ¯å¯é æ€§ã€é¡ºåºã€ç¡®è®¤</li><li>EventBusï¼šå…³æ³¨è§£è€¦ã€å¹¿æ’­ã€è½»é‡çº§</li><li>MQ åå‘å¯é æŒä¹…åŒ–ï¼ŒEventBus åå‘ç³»ç»Ÿå†…éƒ¨äº‹ä»¶è§¦å‘</li></ul><hr><h2 id="ä¹ã€DevOps-å®¹å™¨åŒ–ï¼ˆ30é¢˜ï¼‰"><a href="#ä¹ã€DevOps-å®¹å™¨åŒ–ï¼ˆ30é¢˜ï¼‰" class="headerlink" title="ä¹ã€DevOps &amp; å®¹å™¨åŒ–ï¼ˆ30é¢˜ï¼‰"></a>ä¹ã€DevOps &amp; å®¹å™¨åŒ–ï¼ˆ30é¢˜ï¼‰</h2><hr><h2 id="1-CI-CD-çš„æµç¨‹"><a href="#1-CI-CD-çš„æµç¨‹" class="headerlink" title="1. CI&#x2F;CD çš„æµç¨‹"></a><strong>1. CI&#x2F;CD çš„æµç¨‹</strong></h2><ul><li><strong>CIï¼ˆContinuous Integrationï¼ŒæŒç»­é›†æˆï¼‰</strong>ï¼š<ul><li>å¼€å‘è€…æäº¤ä»£ç  â†’ è‡ªåŠ¨æ„å»º â†’ è‡ªåŠ¨å•å…ƒæµ‹è¯• â†’ è‡ªåŠ¨ç”Ÿæˆæ„å»ºäº§ç‰©</li></ul></li><li><strong>CDï¼ˆContinuous Delivery&#x2F;Deploymentï¼ŒæŒç»­äº¤ä»˜&#x2F;éƒ¨ç½²ï¼‰</strong>ï¼š<ul><li>è‡ªåŠ¨éƒ¨ç½²åˆ°æµ‹è¯•&#x2F;ç”Ÿäº§ç¯å¢ƒ â†’ è‡ªåŠ¨åŒ–éªŒè¯ â†’ ç”Ÿäº§å‘å¸ƒ</li></ul></li><li><strong>å·¥å…·é“¾</strong>ï¼š<ul><li>Jenkinsã€GitLab CIã€Argo CD</li></ul></li><li><strong>å®è·µè¦ç‚¹</strong>ï¼š<ul><li>æµç¨‹è‡ªåŠ¨åŒ–</li><li>ä¿è¯æ„å»ºäº§ç‰©å¯å›æ»š</li></ul></li><li><strong>é¢è¯•æ‹“å±•</strong>ï¼šCI&#x2F;CD ä¸ DevOps çš„å…³ç³»</li></ul><hr><h2 id="2-Jenkins-çš„ä½œç”¨"><a href="#2-Jenkins-çš„ä½œç”¨" class="headerlink" title="2. Jenkins çš„ä½œç”¨"></a><strong>2. Jenkins çš„ä½œç”¨</strong></h2><ul><li>è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²å·¥å…·</li><li><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š<ul><li>æ”¯æŒå¤šç§ SCMï¼ˆGitã€SVNï¼‰</li><li>Pipeline ç®¡ç†</li><li>æ’ä»¶ç”Ÿæ€ä¸°å¯Œï¼ˆDockerã€K8s é›†æˆï¼‰</li></ul></li><li><strong>é¢è¯•è¿½é—®</strong>ï¼šPipeline å¦‚ä½•ä¿è¯æ„å»ºå¯é‡å¤ã€å¯å›æ»š</li></ul><hr><h2 id="3-Docker-æ ¸å¿ƒåŸç†"><a href="#3-Docker-æ ¸å¿ƒåŸç†" class="headerlink" title="3. Docker æ ¸å¿ƒåŸç†"></a><strong>3. Docker æ ¸å¿ƒåŸç†</strong></h2><ul><li><strong>å®¹å™¨åŒ–æŠ€æœ¯</strong>ï¼š<ul><li>Linux <strong>namespace</strong> éš”ç¦»ï¼ˆè¿›ç¨‹ã€ç½‘ç»œã€æ–‡ä»¶ç³»ç»Ÿï¼‰</li><li>Linux <strong>cgroups</strong> é™åˆ¶èµ„æºï¼ˆCPUã€å†…å­˜ï¼‰</li><li>**è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰**å®ç°é•œåƒåˆ†å±‚</li></ul></li><li><strong>å®¹å™¨ â‰ˆ è½»é‡çº§è™šæ‹Ÿæœº</strong>ï¼Œå…±äº«å®¿ä¸» OS å†…æ ¸</li></ul><hr><h2 id="4-Docker-é•œåƒ-vs-å®¹å™¨"><a href="#4-Docker-é•œåƒ-vs-å®¹å™¨" class="headerlink" title="4. Docker é•œåƒ vs å®¹å™¨"></a><strong>4. Docker é•œåƒ vs å®¹å™¨</strong></h2><table><thead><tr><th>åŒºåˆ«</th><th>é•œåƒ</th><th>å®¹å™¨</th></tr></thead><tbody><tr><td>å®šä¹‰</td><td>åªè¯»æ¨¡æ¿</td><td>é•œåƒè¿è¡Œå®ä¾‹</td></tr><tr><td>å­˜å‚¨</td><td>åˆ†å±‚åªè¯»æ–‡ä»¶ç³»ç»Ÿ</td><td>è¯»å†™å±‚ + é•œåƒ</td></tr><tr><td>ç”Ÿå‘½å‘¨æœŸ</td><td>æ°¸ä¹…</td><td>ä¸´æ—¶ï¼Œå¯åœæ­¢&#x2F;åˆ é™¤</td></tr><tr><td>ç”¨é€”</td><td>æ„å»ºåº”ç”¨</td><td>è¿è¡Œåº”ç”¨</td></tr></tbody></table><hr><h2 id="5-Dockerfile-å¸¸ç”¨æŒ‡ä»¤"><a href="#5-Dockerfile-å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="5. Dockerfile å¸¸ç”¨æŒ‡ä»¤"></a><strong>5. Dockerfile å¸¸ç”¨æŒ‡ä»¤</strong></h2><ul><li><code>FROM</code>ï¼šåŸºç¡€é•œåƒ</li><li><code>RUN</code>ï¼šæ‰§è¡Œå‘½ä»¤æ„å»ºé•œåƒ</li><li><code>COPY</code>&#x2F;<code>ADD</code>ï¼šå¤åˆ¶æ–‡ä»¶åˆ°é•œåƒ</li><li><code>CMD</code>&#x2F;<code>ENTRYPOINT</code>ï¼šå®¹å™¨å¯åŠ¨å‘½ä»¤</li><li><code>EXPOSE</code>ï¼šå£°æ˜ç«¯å£</li><li><code>ENV</code>ï¼šç¯å¢ƒå˜é‡</li><li><strong>ä¼˜åŒ–</strong>ï¼šå‡å°‘é•œåƒå±‚ï¼Œé¡ºåºåˆç†ç¼“å­˜</li></ul><hr><h2 id="6-é•œåƒåˆ†å±‚æœºåˆ¶"><a href="#6-é•œåƒåˆ†å±‚æœºåˆ¶" class="headerlink" title="6. é•œåƒåˆ†å±‚æœºåˆ¶"></a><strong>6. é•œåƒåˆ†å±‚æœºåˆ¶</strong></h2><ul><li>é•œåƒæ¯æ¡æŒ‡ä»¤ç”Ÿæˆä¸€ä¸ªåªè¯»å±‚</li><li>è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰å åŠ è¿™äº›å±‚</li><li>å®¹å™¨å¯åŠ¨æ—¶å¢åŠ è¯»å†™å±‚</li><li><strong>ä¼˜åŠ¿</strong>ï¼š<ul><li>å…±äº«å…¬å…±å±‚ï¼ŒèŠ‚çœç©ºé—´</li><li>æ”¯æŒå¢é‡æ„å»º</li></ul></li></ul><hr><h2 id="7-å®¹å™¨-vs-è™šæ‹Ÿæœº"><a href="#7-å®¹å™¨-vs-è™šæ‹Ÿæœº" class="headerlink" title="7. å®¹å™¨ vs è™šæ‹Ÿæœº"></a><strong>7. å®¹å™¨ vs è™šæ‹Ÿæœº</strong></h2><table><thead><tr><th>åŒºåˆ«</th><th>å®¹å™¨</th><th>è™šæ‹Ÿæœº</th></tr></thead><tbody><tr><td>å†…æ ¸</td><td>å…±äº«å®¿ä¸» OS å†…æ ¸</td><td>ç‹¬ç«‹ OS</td></tr><tr><td>å¯åŠ¨é€Ÿåº¦</td><td>ç§’çº§</td><td>åˆ†é’Ÿçº§</td></tr><tr><td>èµ„æºå ç”¨</td><td>è½»é‡</td><td>é‡é‡</td></tr><tr><td>éš”ç¦»</td><td>è¿›ç¨‹çº§</td><td>ç¡¬ä»¶çº§</td></tr></tbody></table><hr><h2 id="8-Kubernetes-æ ¸å¿ƒç»„ä»¶"><a href="#8-Kubernetes-æ ¸å¿ƒç»„ä»¶" class="headerlink" title="8. Kubernetes æ ¸å¿ƒç»„ä»¶"></a><strong>8. Kubernetes æ ¸å¿ƒç»„ä»¶</strong></h2><ul><li><strong>Master</strong>ï¼š<ul><li>API Serverï¼šæ¥æ”¶ç”¨æˆ·è¯·æ±‚</li><li>Schedulerï¼šPod è°ƒåº¦</li><li>Controller Managerï¼šçŠ¶æ€ç®¡ç†</li><li>etcdï¼šåˆ†å¸ƒå¼é…ç½®å­˜å‚¨</li></ul></li><li><strong>Node</strong>ï¼š<ul><li>Kubeletï¼šPod ç”Ÿå‘½å‘¨æœŸç®¡ç†</li><li>Kube-proxyï¼šæœåŠ¡ç½‘ç»œä»£ç†</li><li>Container Runtimeï¼ˆDocker&#x2F;CRI-Oï¼‰</li></ul></li></ul><hr><h2 id="9-Pod-ç”Ÿå‘½å‘¨æœŸ"><a href="#9-Pod-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="9. Pod ç”Ÿå‘½å‘¨æœŸ"></a><strong>9. Pod ç”Ÿå‘½å‘¨æœŸ</strong></h2><ul><li><strong>Pending</strong> â†’ <strong>Running</strong> â†’ <strong>Succeeded&#x2F;Failed</strong></li><li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼š<ul><li>initContainer â†’ main container â†’ postStop Hook</li></ul></li><li><strong>é¢è¯•ç‚¹</strong>ï¼šPod é‡å¯ç­–ç•¥ï¼ˆAlways&#x2F;OnFailure&#x2F;Neverï¼‰</li></ul><hr><h2 id="10-Deployment-vs-StatefulSet"><a href="#10-Deployment-vs-StatefulSet" class="headerlink" title="10. Deployment vs StatefulSet"></a><strong>10. Deployment vs StatefulSet</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>Deployment</th><th>StatefulSet</th></tr></thead><tbody><tr><td>Pod æ ‡è¯†</td><td>æ— å›ºå®šåå­—</td><td>æœ‰å›ºå®šåå­—</td></tr><tr><td>é¡ºåºæ›´æ–°</td><td>å¯å¹¶è¡Œæ›´æ–°</td><td>ä¸¥æ ¼é¡ºåºæ›´æ–°</td></tr><tr><td>æŒä¹…åŒ–å­˜å‚¨</td><td>å…±äº«å·</td><td>ç‹¬ç«‹æŒä¹…å·</td></tr><tr><td>åº”ç”¨åœºæ™¯</td><td>æ— çŠ¶æ€æœåŠ¡</td><td>æ•°æ®åº“ã€Kafka Broker ç­‰çŠ¶æ€æœåŠ¡</td></tr></tbody></table><hr><h2 id="11-K8s-æœåŠ¡å‘ç°æœºåˆ¶"><a href="#11-K8s-æœåŠ¡å‘ç°æœºåˆ¶" class="headerlink" title="11. K8s æœåŠ¡å‘ç°æœºåˆ¶"></a><strong>11. K8s æœåŠ¡å‘ç°æœºåˆ¶</strong></h2><ul><li><strong>ClusterIP</strong>ï¼šé›†ç¾¤å†…éƒ¨è®¿é—®</li><li><strong>NodePort</strong>ï¼šèŠ‚ç‚¹ç«¯å£è®¿é—®</li><li><strong>LoadBalancer</strong>ï¼šå¤–éƒ¨è®¿é—®</li><li><strong>DNS + kube-proxy</strong>ï¼šPod åç§°è§£æ + iptables è½¬å‘</li></ul><hr><h2 id="12-ConfigMap-å’Œ-Secret"><a href="#12-ConfigMap-å’Œ-Secret" class="headerlink" title="12. ConfigMap å’Œ Secret"></a><strong>12. ConfigMap å’Œ Secret</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th>ConfigMap</th><th>Secret</th></tr></thead><tbody><tr><td>æ•°æ®ç±»å‹</td><td>æ˜æ–‡é…ç½®</td><td>Base64 ç¼–ç æ•æ„Ÿä¿¡æ¯</td></tr><tr><td>ä½¿ç”¨æ–¹å¼</td><td>Env&#x2F;Volume</td><td>Env&#x2F;Volume</td></tr><tr><td>å®‰å…¨æ€§</td><td>ä¸åŠ å¯†</td><td>åŠ å¯†å¯é›†æˆ KMS</td></tr></tbody></table><hr><h2 id="13-Ingress-çš„ä½œç”¨"><a href="#13-Ingress-çš„ä½œç”¨" class="headerlink" title="13. Ingress çš„ä½œç”¨"></a><strong>13. Ingress çš„ä½œç”¨</strong></h2><ul><li>é›†ç¾¤å¤–éƒ¨è®¿é—® Pod çš„å…¥å£</li><li>åŠŸèƒ½ï¼š<ul><li>è·¯ç”±åˆ°ä¸åŒæœåŠ¡</li><li>TLS ç»ˆç«¯</li><li>è´Ÿè½½å‡è¡¡</li></ul></li><li><strong>é¢è¯•ç‚¹</strong>ï¼šIngress Controller vs Service LB</li></ul><hr><h2 id="14-K8s-æ°´å¹³æ‰©ç¼©å®¹æœºåˆ¶"><a href="#14-K8s-æ°´å¹³æ‰©ç¼©å®¹æœºåˆ¶" class="headerlink" title="14. K8s æ°´å¹³æ‰©ç¼©å®¹æœºåˆ¶"></a><strong>14. K8s æ°´å¹³æ‰©ç¼©å®¹æœºåˆ¶</strong></h2><ul><li><strong>HPAï¼ˆHorizontal Pod Autoscalerï¼‰</strong>ï¼šæ ¹æ® CPUã€å†…å­˜æˆ–è‡ªå®šä¹‰æŒ‡æ ‡è°ƒæ•´ Pod æ•°é‡</li><li><strong>VPAï¼ˆVertical Pod Autoscalerï¼‰</strong>ï¼šè‡ªåŠ¨è°ƒæ•´ Pod èµ„æºé…ç½®</li><li><strong>Cluster Autoscaler</strong>ï¼šèŠ‚ç‚¹è‡ªåŠ¨æ‰©ç¼©å®¹</li></ul><hr><h2 id="15-K8s-æ»šåŠ¨æ›´æ–°æœºåˆ¶"><a href="#15-K8s-æ»šåŠ¨æ›´æ–°æœºåˆ¶" class="headerlink" title="15. K8s æ»šåŠ¨æ›´æ–°æœºåˆ¶"></a><strong>15. K8s æ»šåŠ¨æ›´æ–°æœºåˆ¶</strong></h2><ul><li><strong>Deployment</strong> æ»šåŠ¨æ›´æ–°ç­–ç•¥ï¼š<ul><li><code>maxUnavailable</code>ï¼šæœ€å¤§ä¸å¯ç”¨ Pod</li><li><code>maxSurge</code>ï¼šæœ€å¤§æ–°å¢ Pod</li></ul></li><li><strong>ä¿è¯æ— ä¸­æ–­å‡çº§</strong></li></ul><hr><h2 id="16-K8s-ç°åº¦å‘å¸ƒ"><a href="#16-K8s-ç°åº¦å‘å¸ƒ" class="headerlink" title="16. K8s ç°åº¦å‘å¸ƒ"></a><strong>16. K8s ç°åº¦å‘å¸ƒ</strong></h2><ul><li><strong>æ–¹æ³•</strong>ï¼š<ul><li>åˆ†æµæµé‡ï¼ˆIngress&#x2F;Service Meshï¼‰</li><li>å¤šç‰ˆæœ¬ Deployment</li><li>Canary Pod + è·¯ç”±æƒé‡</li></ul></li></ul><hr><h2 id="17-K8s-è°ƒåº¦ç­–ç•¥"><a href="#17-K8s-è°ƒåº¦ç­–ç•¥" class="headerlink" title="17. K8s è°ƒåº¦ç­–ç•¥"></a><strong>17. K8s è°ƒåº¦ç­–ç•¥</strong></h2><ul><li><strong>é»˜è®¤è°ƒåº¦</strong>ï¼šåŸºäºèµ„æºï¼ˆCPU&#x2F;Memoryï¼‰</li><li><strong>äº²å’Œæ€§&#x2F;åäº²å’Œæ€§</strong>ï¼š<ul><li>NodeAffinity</li><li>PodAffinity &#x2F; PodAntiAffinity</li></ul></li><li><strong>Taints &amp; Tolerations</strong>ï¼šèŠ‚ç‚¹æ±¡ç‚¹æ§åˆ¶ Pod è°ƒåº¦</li></ul><hr><h2 id="18-K8s-ç½‘ç»œæ¨¡å‹"><a href="#18-K8s-ç½‘ç»œæ¨¡å‹" class="headerlink" title="18. K8s ç½‘ç»œæ¨¡å‹"></a><strong>18. K8s ç½‘ç»œæ¨¡å‹</strong></h2><ul><li><strong>è¦æ±‚</strong>ï¼š<ul><li>Pod å¯ä»¥ç›´æ¥äº’ç›¸é€šä¿¡</li><li>Pod ä¸ Node é€šä¿¡</li></ul></li><li><strong>æ–¹æ¡ˆ</strong>ï¼š<ul><li>Flannelã€Calicoã€Cilium ç­‰</li></ul></li><li><strong>é¢è¯•ç‚¹</strong>ï¼šOverlay ç½‘ç»œ vs Underlay ç½‘ç»œ</li></ul><hr><h2 id="19-Service-Mesh-ä½œç”¨"><a href="#19-Service-Mesh-ä½œç”¨" class="headerlink" title="19. Service Mesh ä½œç”¨"></a><strong>19. Service Mesh ä½œç”¨</strong></h2><ul><li>é€æ˜é€šä¿¡ç®¡ç†</li><li>æµé‡æ§åˆ¶ã€ç†”æ–­ã€é™æµ</li><li>å¯è§‚å¯Ÿæ€§ï¼ˆTracingã€Metricsï¼‰</li><li>å®‰å…¨ï¼ˆmTLSï¼‰</li></ul><hr><h2 id="20-Istio-å·¥ä½œåŸç†"><a href="#20-Istio-å·¥ä½œåŸç†" class="headerlink" title="20. Istio å·¥ä½œåŸç†"></a><strong>20. Istio å·¥ä½œåŸç†</strong></h2><ul><li><strong>Sidecar Proxy</strong>ï¼šæ¯ä¸ª Pod æ³¨å…¥ Envoy</li><li><strong>æ§åˆ¶å¹³é¢ï¼ˆPilotï¼‰</strong>ï¼šä¸‹å‘è·¯ç”±è§„åˆ™</li><li><strong>Mixer &#x2F; Telemetry</strong>ï¼šé‡‡é›†æŒ‡æ ‡å’Œæ—¥å¿—</li><li><strong>åº”ç”¨</strong>ï¼š<ul><li>ç°åº¦å‘å¸ƒã€æµé‡é•œåƒã€æ•…éšœæ³¨å…¥ã€æœåŠ¡é—´å®‰å…¨é€šä¿¡</li></ul></li></ul><hr><h2 id="21-Helm-çš„ä½œç”¨"><a href="#21-Helm-çš„ä½œç”¨" class="headerlink" title="21. Helm çš„ä½œç”¨"></a><strong>21. Helm çš„ä½œç”¨</strong></h2><ul><li>Kubernetes åŒ…ç®¡ç†å·¥å…·</li><li><strong>åŠŸèƒ½</strong>ï¼š<ul><li>Chart æ¨¡æ¿åŒ–éƒ¨ç½²</li><li>ç‰ˆæœ¬ç®¡ç†</li><li>ä¸€é”®å‡çº§&#x2F;å›æ»š</li></ul></li><li><strong>é¢è¯•æ‹“å±•</strong>ï¼šHelm ä¸ Kustomize åŒºåˆ«</li></ul><hr><h2 id="22-K8s-å­˜å‚¨æ–¹æ¡ˆ"><a href="#22-K8s-å­˜å‚¨æ–¹æ¡ˆ" class="headerlink" title="22. K8s å­˜å‚¨æ–¹æ¡ˆ"></a><strong>22. K8s å­˜å‚¨æ–¹æ¡ˆ</strong></h2><ul><li><strong>ä¸´æ—¶å­˜å‚¨</strong>ï¼šemptyDir</li><li><strong>æŒä¹…å·</strong>ï¼šPersistentVolume + PersistentVolumeClaim</li><li><strong>å­˜å‚¨ç±»å‹</strong>ï¼š<ul><li>æœ¬åœ°å­˜å‚¨</li><li>NFS</li><li>Ceph &#x2F; GlusterFS</li><li>äº‘å­˜å‚¨ï¼ˆEBSã€OSSï¼‰</li></ul></li></ul><hr><h2 id="23-Prometheus-ç›‘æ§ä½“ç³»"><a href="#23-Prometheus-ç›‘æ§ä½“ç³»" class="headerlink" title="23. Prometheus ç›‘æ§ä½“ç³»"></a><strong>23. Prometheus ç›‘æ§ä½“ç³»</strong></h2><ul><li>Pull æ¨¡å‹é‡‡é›†æŒ‡æ ‡</li><li>TSDB å­˜å‚¨æ—¶é—´åºåˆ—æ•°æ®</li><li>AlertManager å‘Šè­¦</li><li>å¯ç›‘æ§ K8s ç»„ä»¶ã€Podã€åº”ç”¨æŒ‡æ ‡</li></ul><hr><h2 id="24-Grafana-çš„ä½œç”¨"><a href="#24-Grafana-çš„ä½œç”¨" class="headerlink" title="24. Grafana çš„ä½œç”¨"></a><strong>24. Grafana çš„ä½œç”¨</strong></h2><ul><li>å¯è§†åŒ– Prometheus æ•°æ®</li><li>ä»ªè¡¨ç›˜å®šåˆ¶</li><li>æ”¯æŒå¤šæ•°æ®æºï¼ˆInfluxDBã€ElasticSearchï¼‰</li><li>é¢è¯•ç‚¹ï¼šæŠ¥è­¦å¯è§†åŒ–å’Œå¤šç§Ÿæˆ·æ”¯æŒ</li></ul><hr><h2 id="25-K8s-å®‰å…¨æœºåˆ¶"><a href="#25-K8s-å®‰å…¨æœºåˆ¶" class="headerlink" title="25. K8s å®‰å…¨æœºåˆ¶"></a><strong>25. K8s å®‰å…¨æœºåˆ¶</strong></h2><ul><li><strong>è®¤è¯ï¼ˆAuthenticationï¼‰</strong>ï¼šToken &#x2F; X.509 &#x2F; OIDC</li><li><strong>æˆæƒï¼ˆAuthorizationï¼‰</strong>ï¼šRBAC</li><li><strong>ç½‘ç»œç­–ç•¥ï¼ˆNetworkPolicyï¼‰</strong></li><li><strong>Secret åŠ å¯†</strong></li></ul><hr><h2 id="26-å®¹å™¨èµ„æºé™åˆ¶"><a href="#26-å®¹å™¨èµ„æºé™åˆ¶" class="headerlink" title="26. å®¹å™¨èµ„æºé™åˆ¶"></a><strong>26. å®¹å™¨èµ„æºé™åˆ¶</strong></h2><ul><li><strong>CPU &#x2F; Memory</strong>ï¼šrequests &#x2F; limits</li><li><strong>QoS åˆ†ç±»</strong>ï¼š<ul><li>Guaranteedã€Burstableã€BestEffort</li></ul></li><li><strong>é¢è¯•ç‚¹</strong>ï¼šå®¹å™¨ OOM åŠé™æµç­–ç•¥</li></ul><hr><h2 id="27-Docker-Compose-ä½œç”¨"><a href="#27-Docker-Compose-ä½œç”¨" class="headerlink" title="27. Docker Compose ä½œç”¨"></a><strong>27. Docker Compose ä½œç”¨</strong></h2><ul><li>å¤šå®¹å™¨åº”ç”¨ç®¡ç†</li><li>æœ¬åœ°å¼€å‘ã€æµ‹è¯•</li><li>å£°æ˜å¼é…ç½®ç½‘ç»œã€ä¾èµ–å…³ç³»</li></ul><hr><h2 id="28-DevOps-æœ€ä½³å®è·µ"><a href="#28-DevOps-æœ€ä½³å®è·µ" class="headerlink" title="28. DevOps æœ€ä½³å®è·µ"></a><strong>28. DevOps æœ€ä½³å®è·µ</strong></h2><ul><li>æŒç»­é›†æˆ&#x2F;æŒç»­äº¤ä»˜</li><li>åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰</li><li>è‡ªåŠ¨åŒ–æµ‹è¯•ä¸éƒ¨ç½²</li><li>å¾®æœåŠ¡ + å®¹å™¨åŒ– + äº‘åŸç”Ÿ</li></ul><hr><h2 id="29-GitOps-ç†å¿µ"><a href="#29-GitOps-ç†å¿µ" class="headerlink" title="29. GitOps ç†å¿µ"></a><strong>29. GitOps ç†å¿µ</strong></h2><ul><li>å°† Git ä½œä¸ºå•ä¸€çœŸæº</li><li>K8s è‡ªåŠ¨åŒæ­¥ Git çŠ¶æ€</li><li>ä¼˜ç‚¹ï¼š<ul><li>å¯è¿½è¸ªã€å¯å›æ»š</li><li>æµç¨‹ç»Ÿä¸€ã€å¯å®¡è®¡</li></ul></li></ul><hr><h2 id="30-K8s-å¦‚ä½•ä¿è¯é«˜å¯ç”¨"><a href="#30-K8s-å¦‚ä½•ä¿è¯é«˜å¯ç”¨" class="headerlink" title="30. K8s å¦‚ä½•ä¿è¯é«˜å¯ç”¨"></a><strong>30. K8s å¦‚ä½•ä¿è¯é«˜å¯ç”¨</strong></h2><ul><li>Master èŠ‚ç‚¹å¤šå‰¯æœ¬ï¼ˆHAï¼‰</li><li>ETCD é›†ç¾¤å­˜å‚¨</li><li>Pod å¤šå‰¯æœ¬ + Deployment&#x2F;StatefulSet</li><li>Service + LoadBalancer æä¾›ç¨³å®šè®¿é—®</li><li>Cluster Autoscaler æ”¯æŒèŠ‚ç‚¹å¼¹æ€§æ‰©å±•</li></ul><hr><h2 id="åã€åœºæ™¯è®¾è®¡é¢˜ï¼ˆ30é¢˜ï¼‰"><a href="#åã€åœºæ™¯è®¾è®¡é¢˜ï¼ˆ30é¢˜ï¼‰" class="headerlink" title="åã€åœºæ™¯è®¾è®¡é¢˜ï¼ˆ30é¢˜ï¼‰"></a>åã€åœºæ™¯è®¾è®¡é¢˜ï¼ˆ30é¢˜ï¼‰</h2><ol><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªçŸ­é“¾ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼ ID ç”Ÿæˆç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¯ç”¨ç¼“å­˜ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªè®¢å•ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ”¯ä»˜ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ¶ˆæ¯æ¨é€ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ—¥å¿—æ”¶é›†ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªæœç´¢å¼•æ“ï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ¨èç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªç»Ÿä¸€é‰´æƒç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªé™æµç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªç°åº¦å‘å¸ƒç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªç”µå•†è´­ç‰©è½¦ï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªåº“å­˜ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¾®æœåŠ¡ç½‘å…³ï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªç›‘æ§æŠ¥è­¦ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘èŠå¤©å®¤ï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ’è¡Œæ¦œç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªè¯„è®ºç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¯ç”¨æ³¨å†Œä¸­å¿ƒï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ•°æ®åŒæ­¥ç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ª API é™é€Ÿç³»ç»Ÿï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¯ç”¨çš„æ”¯ä»˜ç½‘å…³ï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªè·¨å¢ƒç”µå•†æ¶æ„ï¼Ÿ</li><li>å¦‚ä½•è®¾è®¡ä¸€ä¸ªé‡‘èçº§åˆ«çš„å¾®æœåŠ¡ç³»ç»Ÿï¼Ÿ</li></ol><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€Java-åŸºç¡€è¯­æ³•-å…³é”®å­—&quot;&gt;&lt;a href=&quot;#ä¸€ã€Java-åŸºç¡€è¯­æ³•-å…³é”®å­—&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€Java åŸºç¡€è¯­æ³• &amp;amp; å…³é”®å­—&quot;&gt;&lt;/a&gt;ä¸€ã€Java åŸºç¡€è¯­æ³• &amp;amp; å…³é”®å­—&lt;/h2&gt;&lt;h2 id=&quot;1</summary>
      
    
    
    
    <category term="java" scheme="http://example.com/categories/java/"/>
    
    
    <category term="java" scheme="http://example.com/tags/java/"/>
    
    <category term="é¢è¯•" scheme="http://example.com/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="é¢˜ç›®" scheme="http://example.com/tags/%E9%A2%98%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://example.com/2025/09/11/hello-world/"/>
    <id>http://example.com/2025/09/11/hello-world/</id>
    <published>2025-09-11T10:19:47.428Z</published>
    <updated>2025-09-11T10:19:47.428Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
