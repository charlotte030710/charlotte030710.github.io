<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>æ¡†æ¶å¸¸ç”¨æ³¨è§£ | æµ®ç”Ÿè‹¥æ¢¦</title><meta name="author" content="Charlotte"><meta name="copyright" content="Charlotte"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ğŸ§© ä¸€ã€Spring å¸¸ç”¨æ³¨è§£ï¼ˆIOC &#x2F; AOP æ ¸å¿ƒï¼‰ğŸ’  1. IOC ç›¸å…³ï¼ˆæ§åˆ¶åè½¬ï¼‰   æ³¨è§£ ä½œç”¨ åœºæ™¯    @Component æ ‡è¯†ä¸€ä¸ªæ™®é€šç»„ä»¶ï¼Œäº¤ç»™ Spring å®¹å™¨ç®¡ç† æ™®é€šç±»   @Controller è¡¨ç¤ºæ§åˆ¶å±‚ç»„ä»¶ Web æ§åˆ¶å™¨   @Service è¡¨ç¤ºæœåŠ¡å±‚ç»„ä»¶ ä¸šåŠ¡é€»è¾‘å±‚   @Repository è¡¨ç¤º DAO å±‚ç»„ä»¶ æ•°æ®è®¿é—®å±‚   @Aut">
<meta property="og:type" content="article">
<meta property="og:title" content="æ¡†æ¶å¸¸ç”¨æ³¨è§£">
<meta property="og:url" content="https://charlotte030710.github.io/2025/10/01/%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3/index.html">
<meta property="og:site_name" content="æµ®ç”Ÿè‹¥æ¢¦">
<meta property="og:description" content="ğŸ§© ä¸€ã€Spring å¸¸ç”¨æ³¨è§£ï¼ˆIOC &#x2F; AOP æ ¸å¿ƒï¼‰ğŸ’  1. IOC ç›¸å…³ï¼ˆæ§åˆ¶åè½¬ï¼‰   æ³¨è§£ ä½œç”¨ åœºæ™¯    @Component æ ‡è¯†ä¸€ä¸ªæ™®é€šç»„ä»¶ï¼Œäº¤ç»™ Spring å®¹å™¨ç®¡ç† æ™®é€šç±»   @Controller è¡¨ç¤ºæ§åˆ¶å±‚ç»„ä»¶ Web æ§åˆ¶å™¨   @Service è¡¨ç¤ºæœåŠ¡å±‚ç»„ä»¶ ä¸šåŠ¡é€»è¾‘å±‚   @Repository è¡¨ç¤º DAO å±‚ç»„ä»¶ æ•°æ®è®¿é—®å±‚   @Aut">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://charlotte030710.github.io/img/title.jpg">
<meta property="article:published_time" content="2025-09-30T16:00:00.000Z">
<meta property="article:modified_time" content="2025-10-05T10:52:17.248Z">
<meta property="article:author" content="Charlotte">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://charlotte030710.github.io/img/title.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "æ¡†æ¶å¸¸ç”¨æ³¨è§£",
  "url": "https://charlotte030710.github.io/2025/10/01/%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3/",
  "image": "https://charlotte030710.github.io/img/title.jpg",
  "datePublished": "2025-09-30T16:00:00.000Z",
  "dateModified": "2025-10-05T10:52:17.248Z",
  "author": [
    {
      "@type": "Person",
      "name": "Charlotte",
      "url": "https://charlotte030710.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.svg"><link rel="canonical" href="https://charlotte030710.github.io/2025/10/01/%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'æ¡†æ¶å¸¸ç”¨æ³¨è§£',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="æµ®ç”Ÿè‹¥æ¢¦" type="application/atom+xml">
</head><body><div id="web_bg" style="background-image: url(/img/bg.jpg);"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/bg.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/title.jpg" alt="Logo"><span class="site-name">æµ®ç”Ÿè‹¥æ¢¦</span></a><a class="nav-page-title" href="/"><span class="site-name">æ¡†æ¶å¸¸ç”¨æ³¨è§£</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">æ¡†æ¶å¸¸ç”¨æ³¨è§£</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2025-09-30T16:00:00.000Z" title="å‘è¡¨äº 2025-10-01 00:00:00">2025-10-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-10-05T10:52:17.248Z" title="æ›´æ–°äº 2025-10-05 18:52:17">2025-10-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/">java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><hr>
<h1 id="ğŸ§©-ä¸€ã€Spring-å¸¸ç”¨æ³¨è§£ï¼ˆIOC-AOP-æ ¸å¿ƒï¼‰"><a href="#ğŸ§©-ä¸€ã€Spring-å¸¸ç”¨æ³¨è§£ï¼ˆIOC-AOP-æ ¸å¿ƒï¼‰" class="headerlink" title="ğŸ§© ä¸€ã€Spring å¸¸ç”¨æ³¨è§£ï¼ˆIOC &#x2F; AOP æ ¸å¿ƒï¼‰"></a>ğŸ§© ä¸€ã€Spring å¸¸ç”¨æ³¨è§£ï¼ˆIOC &#x2F; AOP æ ¸å¿ƒï¼‰</h1><h3 id="ğŸ’ -1-IOC-ç›¸å…³ï¼ˆæ§åˆ¶åè½¬ï¼‰"><a href="#ğŸ’ -1-IOC-ç›¸å…³ï¼ˆæ§åˆ¶åè½¬ï¼‰" class="headerlink" title="ğŸ’  1. IOC ç›¸å…³ï¼ˆæ§åˆ¶åè½¬ï¼‰"></a>ğŸ’  1. IOC ç›¸å…³ï¼ˆæ§åˆ¶åè½¬ï¼‰</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><code>@Component</code></td>
<td>æ ‡è¯†ä¸€ä¸ªæ™®é€šç»„ä»¶ï¼Œäº¤ç»™ Spring å®¹å™¨ç®¡ç†</td>
<td>æ™®é€šç±»</td>
</tr>
<tr>
<td><code>@Controller</code></td>
<td>è¡¨ç¤ºæ§åˆ¶å±‚ç»„ä»¶</td>
<td>Web æ§åˆ¶å™¨</td>
</tr>
<tr>
<td><code>@Service</code></td>
<td>è¡¨ç¤ºæœåŠ¡å±‚ç»„ä»¶</td>
<td>ä¸šåŠ¡é€»è¾‘å±‚</td>
</tr>
<tr>
<td><code>@Repository</code></td>
<td>è¡¨ç¤º DAO å±‚ç»„ä»¶</td>
<td>æ•°æ®è®¿é—®å±‚</td>
</tr>
<tr>
<td><code>@Autowired</code></td>
<td>æŒ‰ç±»å‹è‡ªåŠ¨æ³¨å…¥</td>
<td>å­—æ®µã€æ„é€ å™¨ã€setter</td>
</tr>
<tr>
<td><code>@Qualifier</code></td>
<td>ä¸ <code>@Autowired</code> è”åˆä½¿ç”¨ï¼ŒæŒ‰åç§°æ³¨å…¥</td>
<td>è§£å†³å¤šä¸ª Bean åŒç±»å‹å†²çª</td>
</tr>
<tr>
<td><code>@Resource</code></td>
<td>JSR-250 æ ‡å‡†æ³¨å…¥ï¼ŒæŒ‰åç§°ä¼˜å…ˆ</td>
<td>åŒä¸Š</td>
</tr>
<tr>
<td><code>@Value</code></td>
<td>æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§å€¼</td>
<td>å¸¸é‡ã€é…ç½®å­—æ®µ</td>
</tr>
<tr>
<td><code>@Primary</code></td>
<td>æŒ‡å®šä¼˜å…ˆæ³¨å…¥çš„ Bean</td>
<td>åŒç±»å‹ Bean å¤šä¸ªæ—¶</td>
</tr>
<tr>
<td><code>@Lazy</code></td>
<td>å»¶è¿ŸåŠ è½½ Bean</td>
<td>ä¼˜åŒ–å¯åŠ¨æ€§èƒ½</td>
</tr>
</tbody></table>
<hr>
<h3 id="ğŸ’ -2-AOP-ç›¸å…³ï¼ˆåˆ‡é¢ç¼–ç¨‹ï¼‰"><a href="#ğŸ’ -2-AOP-ç›¸å…³ï¼ˆåˆ‡é¢ç¼–ç¨‹ï¼‰" class="headerlink" title="ğŸ’  2. AOP ç›¸å…³ï¼ˆåˆ‡é¢ç¼–ç¨‹ï¼‰"></a>ğŸ’  2. AOP ç›¸å…³ï¼ˆåˆ‡é¢ç¼–ç¨‹ï¼‰</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><code>@Aspect</code></td>
<td>å£°æ˜ä¸€ä¸ªåˆ‡é¢ç±»</td>
<td>AOP åˆ‡é¢å®šä¹‰</td>
</tr>
<tr>
<td><code>@Before</code></td>
<td>æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œé€šçŸ¥</td>
<td>å‰ç½®é€šçŸ¥</td>
</tr>
<tr>
<td><code>@After</code></td>
<td>æ–¹æ³•æ‰§è¡Œåæ‰§è¡Œé€šçŸ¥</td>
<td>åç½®é€šçŸ¥ï¼ˆæ— è®ºå¼‚å¸¸ï¼‰</td>
</tr>
<tr>
<td><code>@AfterReturning</code></td>
<td>æ–¹æ³•æˆåŠŸè¿”å›åæ‰§è¡Œ</td>
<td>è¿”å›é€šçŸ¥</td>
</tr>
<tr>
<td><code>@AfterThrowing</code></td>
<td>æ–¹æ³•å¼‚å¸¸æ—¶æ‰§è¡Œ</td>
<td>å¼‚å¸¸é€šçŸ¥</td>
</tr>
<tr>
<td><code>@Around</code></td>
<td>åŒ…è£¹æ•´ä¸ªæ–¹æ³•ï¼ˆå¯æ§åˆ¶æ‰§è¡Œæ—¶æœºï¼‰</td>
<td>æ€§èƒ½ç›‘æ§ã€äº‹åŠ¡æ§åˆ¶</td>
</tr>
<tr>
<td><code>@Pointcut</code></td>
<td>å®šä¹‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</td>
<td>ç»Ÿä¸€å¤ç”¨è¡¨è¾¾å¼</td>
</tr>
</tbody></table>
<hr>
<h3 id="ğŸ’ -3-é…ç½®ç›¸å…³"><a href="#ğŸ’ -3-é…ç½®ç›¸å…³" class="headerlink" title="ğŸ’  3. é…ç½®ç›¸å…³"></a>ğŸ’  3. é…ç½®ç›¸å…³</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><code>@Configuration</code></td>
<td>å£°æ˜é…ç½®ç±»ï¼ˆä»£æ›¿ XMLï¼‰</td>
<td>JavaConfig</td>
</tr>
<tr>
<td><code>@Bean</code></td>
<td>æ³¨å†Œä¸€ä¸ª Bean åˆ°å®¹å™¨</td>
<td>é…åˆ <code>@Configuration</code></td>
</tr>
<tr>
<td><code>@Import</code></td>
<td>å¯¼å…¥é¢å¤–é…ç½®ç±»</td>
<td>ç»„åˆé…ç½®</td>
</tr>
<tr>
<td><code>@PropertySource</code></td>
<td>åŠ è½½å¤–éƒ¨ properties æ–‡ä»¶</td>
<td>è¯»å–é…ç½®</td>
</tr>
<tr>
<td><code>@ComponentScan</code></td>
<td>æ‰«ææŒ‡å®šåŒ…</td>
<td>æ³¨å†Œç»„ä»¶</td>
</tr>
<tr>
<td><code>@Conditional</code></td>
<td>æ¡ä»¶åŠ è½½ Bean</td>
<td>åŠ¨æ€é…ç½®</td>
</tr>
</tbody></table>
<hr>
<h1 id="ğŸŒ-äºŒã€Spring-MVC-å¸¸ç”¨æ³¨è§£"><a href="#ğŸŒ-äºŒã€Spring-MVC-å¸¸ç”¨æ³¨è§£" class="headerlink" title="ğŸŒ äºŒã€Spring MVC å¸¸ç”¨æ³¨è§£"></a>ğŸŒ äºŒã€Spring MVC å¸¸ç”¨æ³¨è§£</h1><h3 id="ğŸ’ -1-æ§åˆ¶å±‚æ˜ å°„"><a href="#ğŸ’ -1-æ§åˆ¶å±‚æ˜ å°„" class="headerlink" title="ğŸ’  1. æ§åˆ¶å±‚æ˜ å°„"></a>ğŸ’  1. æ§åˆ¶å±‚æ˜ å°„</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><code>@Controller</code></td>
<td>å®šä¹‰æ§åˆ¶å™¨ç±»</td>
<td>Web å±‚</td>
</tr>
<tr>
<td><code>@RestController</code></td>
<td>ç­‰ä»·äº <code>@Controller + @ResponseBody</code></td>
<td>REST æ¥å£</td>
</tr>
<tr>
<td><code>@RequestMapping</code></td>
<td>å®šä¹‰è¯·æ±‚è·¯å¾„ã€æ–¹æ³•</td>
<td>ç±»æˆ–æ–¹æ³•çº§åˆ«</td>
</tr>
<tr>
<td><code>@GetMapping</code> &#x2F; <code>@PostMapping</code> &#x2F; <code>@PutMapping</code> &#x2F; <code>@DeleteMapping</code></td>
<td>ç®€åŒ–ç‰ˆè¯·æ±‚æ˜ å°„</td>
<td>REST é£æ ¼æ¥å£</td>
</tr>
<tr>
<td><code>@RequestParam</code></td>
<td>è·å–è¯·æ±‚å‚æ•°</td>
<td><code>?name=xxx</code></td>
</tr>
<tr>
<td><code>@PathVariable</code></td>
<td>è·å–è·¯å¾„å‚æ•°</td>
<td><code>/user/&#123;id&#125;</code></td>
</tr>
<tr>
<td><code>@RequestBody</code></td>
<td>å°† JSON è¯·æ±‚ä½“æ˜ å°„ä¸ºå¯¹è±¡</td>
<td>POST JSON è¯·æ±‚</td>
</tr>
<tr>
<td><code>@ResponseBody</code></td>
<td>å°†è¿”å›å€¼åºåˆ—åŒ–ä¸º JSON</td>
<td>REST è¿”å›</td>
</tr>
<tr>
<td><code>@ModelAttribute</code></td>
<td>ç»‘å®šæ¨¡å‹æ•°æ®æˆ–æ–¹æ³•å‚æ•°</td>
<td>è¡¨å•æäº¤</td>
</tr>
<tr>
<td><code>@SessionAttributes</code></td>
<td>å°†æ•°æ®ä¿å­˜åˆ° session</td>
<td>ç™»å½•çŠ¶æ€å­˜å‚¨</td>
</tr>
</tbody></table>
<h3 id="ğŸ’ -2-å¼‚å¸¸-è¿”å›å¤„ç†"><a href="#ğŸ’ -2-å¼‚å¸¸-è¿”å›å¤„ç†" class="headerlink" title="ğŸ’  2. å¼‚å¸¸ &amp; è¿”å›å¤„ç†"></a>ğŸ’  2. å¼‚å¸¸ &amp; è¿”å›å¤„ç†</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><code>@ControllerAdvice</code></td>
<td>å…¨å±€å¼‚å¸¸å¤„ç†ç±»</td>
<td>å…¨å±€æ§åˆ¶å™¨æ‹¦æˆª</td>
</tr>
<tr>
<td><code>@ExceptionHandler</code></td>
<td>æŒ‡å®šå¼‚å¸¸å¤„ç†æ–¹æ³•</td>
<td>æ•è·å¼‚å¸¸</td>
</tr>
<tr>
<td><code>@ResponseStatus</code></td>
<td>è®¾ç½®å“åº”çŠ¶æ€ç </td>
<td>è¿”å›çŠ¶æ€æ§åˆ¶</td>
</tr>
<tr>
<td><code>@InitBinder</code></td>
<td>åˆå§‹åŒ–æ•°æ®ç»‘å®šå™¨</td>
<td>å‚æ•°è½¬æ¢</td>
</tr>
</tbody></table>
<hr>
<h1 id="ğŸ’¾-ä¸‰ã€MyBatis-å¸¸ç”¨æ³¨è§£"><a href="#ğŸ’¾-ä¸‰ã€MyBatis-å¸¸ç”¨æ³¨è§£" class="headerlink" title="ğŸ’¾ ä¸‰ã€MyBatis å¸¸ç”¨æ³¨è§£"></a>ğŸ’¾ ä¸‰ã€MyBatis å¸¸ç”¨æ³¨è§£</h1><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><code>@Mapper</code></td>
<td>æ ‡è¯†ä¸º MyBatis æ˜ å°„æ¥å£</td>
<td>DAO å±‚æ¥å£</td>
</tr>
<tr>
<td><code>@Select</code> &#x2F; <code>@Insert</code> &#x2F; <code>@Update</code> &#x2F; <code>@Delete</code></td>
<td>ç¼–å†™ SQL è¯­å¥</td>
<td>ç®€å•æŸ¥è¯¢æˆ–æ›´æ–°</td>
</tr>
<tr>
<td><code>@Results</code> &#x2F; <code>@Result</code></td>
<td>å­—æ®µæ˜ å°„</td>
<td>æ•°æ®åº“å­—æ®µä¸å®ä½“å­—æ®µåä¸åŒ</td>
</tr>
<tr>
<td><code>@Param</code></td>
<td>æŒ‡å®š SQL å‚æ•°å</td>
<td>å¤šå‚æ•°æ–¹æ³•</td>
</tr>
<tr>
<td><code>@Options</code></td>
<td>è®¾ç½®ä¸»é”®å›å¡«ã€äº‹åŠ¡è¡Œä¸ºç­‰</td>
<td>æ’å…¥æ—¶ä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</td>
</tr>
<tr>
<td><code>@MapKey</code></td>
<td>æŒ‡å®šè¿”å› Map çš„ key</td>
<td>æŸ¥è¯¢ç»“æœ Map åŒ–</td>
</tr>
</tbody></table>
<hr>
<h1 id="ğŸš€-å››ã€Spring-Boot-å¸¸ç”¨æ³¨è§£"><a href="#ğŸš€-å››ã€Spring-Boot-å¸¸ç”¨æ³¨è§£" class="headerlink" title="ğŸš€ å››ã€Spring Boot å¸¸ç”¨æ³¨è§£"></a>ğŸš€ å››ã€Spring Boot å¸¸ç”¨æ³¨è§£</h1><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><code>@SpringBootApplication</code></td>
<td>æ ¸å¿ƒå…¥å£ï¼ˆå« <code>@Configuration</code>, <code>@EnableAutoConfiguration</code>, <code>@ComponentScan</code>ï¼‰</td>
<td>å¯åŠ¨ç±»</td>
</tr>
<tr>
<td><code>@EnableAutoConfiguration</code></td>
<td>å¯ç”¨è‡ªåŠ¨é…ç½®</td>
<td>åº•å±‚è‡ªåŠ¨è£…é…</td>
</tr>
<tr>
<td><code>@ConfigurationProperties</code></td>
<td>å°†é…ç½®æ–‡ä»¶æ˜ å°„ä¸ºå¯¹è±¡</td>
<td>å°è£…é…ç½®ç±»</td>
</tr>
<tr>
<td><code>@EnableConfigurationProperties</code></td>
<td>å¼€å¯ä¸Šé¢æ˜ å°„åŠŸèƒ½</td>
<td>é…ç½®ç±»å¯ç”¨</td>
</tr>
<tr>
<td><code>@ConditionalOnProperty</code></td>
<td>å½“æŸé…ç½®æ»¡è¶³æ—¶åŠ è½½ Bean</td>
<td>æ¡ä»¶åŒ–é…ç½®</td>
</tr>
<tr>
<td><code>@ConditionalOnMissingBean</code></td>
<td>Bean ä¸å­˜åœ¨æ—¶åŠ è½½</td>
<td>è‡ªåŠ¨é…ç½®</td>
</tr>
<tr>
<td><code>@SpringBootTest</code></td>
<td>å¯åŠ¨å®Œæ•´ Spring Boot æµ‹è¯•ç¯å¢ƒ</td>
<td>å•å…ƒæµ‹è¯•</td>
</tr>
<tr>
<td><code>@TestConfiguration</code></td>
<td>æµ‹è¯•ä¸“ç”¨é…ç½®</td>
<td>éš”ç¦»æµ‹è¯• Bean</td>
</tr>
<tr>
<td><code>@RestControllerAdvice</code></td>
<td>å…¨å±€å¼‚å¸¸ + REST æ¥å£</td>
<td>ç»Ÿä¸€å¼‚å¸¸è¿”å› JSON</td>
</tr>
</tbody></table>
<hr>
<h1 id="ğŸ”-äº”ã€Spring-Security-å¸¸ç”¨æ³¨è§£"><a href="#ğŸ”-äº”ã€Spring-Security-å¸¸ç”¨æ³¨è§£" class="headerlink" title="ğŸ” äº”ã€Spring Security å¸¸ç”¨æ³¨è§£"></a>ğŸ” äº”ã€Spring Security å¸¸ç”¨æ³¨è§£</h1><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><code>@EnableWebSecurity</code></td>
<td>å¼€å¯ Web å®‰å…¨é…ç½®</td>
<td>Security é…ç½®ç±»</td>
</tr>
<tr>
<td><code>@Configuration</code></td>
<td>æ ‡è¯†é…ç½®ç±»</td>
<td></td>
</tr>
<tr>
<td><code>@PreAuthorize</code></td>
<td>æ–¹æ³•æ‰§è¡Œå‰éªŒè¯æƒé™</td>
<td>ç»†ç²’åº¦æ§åˆ¶ï¼ˆSpEL è¡¨è¾¾å¼ï¼‰</td>
</tr>
<tr>
<td><code>@PostAuthorize</code></td>
<td>æ–¹æ³•æ‰§è¡Œåå†éªŒè¯æƒé™</td>
<td>è¿”å›åæ£€æŸ¥</td>
</tr>
<tr>
<td><code>@Secured</code></td>
<td>æŒ‡å®šè§’è‰²è®¿é—®æƒé™</td>
<td>ç®€å•æƒé™æ§åˆ¶</td>
</tr>
<tr>
<td><code>@RolesAllowed</code></td>
<td>ä¸ <code>@Secured</code> ç±»ä¼¼ï¼ˆJSR-250ï¼‰</td>
<td>æŒ‡å®šè§’è‰²</td>
</tr>
<tr>
<td><code>@WithMockUser</code></td>
<td>æµ‹è¯•æ—¶æ¨¡æ‹Ÿç™»å½•ç”¨æˆ·</td>
<td>å•å…ƒæµ‹è¯•</td>
</tr>
<tr>
<td><code>@AuthenticationPrincipal</code></td>
<td>è·å–å½“å‰ç™»å½•ç”¨æˆ·</td>
<td>Controller å±‚</td>
</tr>
</tbody></table>
<hr>
<h1 id="â˜ï¸-å…­ã€Spring-Cloud-å¸¸ç”¨æ³¨è§£ï¼ˆå¾®æœåŠ¡ä½“ç³»ï¼‰"><a href="#â˜ï¸-å…­ã€Spring-Cloud-å¸¸ç”¨æ³¨è§£ï¼ˆå¾®æœåŠ¡ä½“ç³»ï¼‰" class="headerlink" title="â˜ï¸ å…­ã€Spring Cloud å¸¸ç”¨æ³¨è§£ï¼ˆå¾®æœåŠ¡ä½“ç³»ï¼‰"></a>â˜ï¸ å…­ã€Spring Cloud å¸¸ç”¨æ³¨è§£ï¼ˆå¾®æœåŠ¡ä½“ç³»ï¼‰</h1><h3 id="ğŸ’ -1-æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆEureka-Nacosï¼‰"><a href="#ğŸ’ -1-æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆEureka-Nacosï¼‰" class="headerlink" title="ğŸ’  1. æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆEureka &#x2F; Nacosï¼‰"></a>ğŸ’  1. æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆEureka &#x2F; Nacosï¼‰</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>@EnableEurekaClient</code> &#x2F; <code>@EnableDiscoveryClient</code></td>
<td>å¯ç”¨æœåŠ¡æ³¨å†Œä¸å‘ç°</td>
</tr>
<tr>
<td><code>@LoadBalanced</code></td>
<td>å¯ç”¨ Ribbon è´Ÿè½½å‡è¡¡</td>
</tr>
<tr>
<td><code>@Value</code> &#x2F; <code>@RefreshScope</code></td>
<td>åŠ¨æ€åˆ·æ–°é…ç½®ï¼ˆä¸ Config ä¸€èµ·ï¼‰</td>
</tr>
</tbody></table>
<h3 id="ğŸ’ -2-æœåŠ¡è°ƒç”¨ï¼ˆOpenFeignï¼‰"><a href="#ğŸ’ -2-æœåŠ¡è°ƒç”¨ï¼ˆOpenFeignï¼‰" class="headerlink" title="ğŸ’  2. æœåŠ¡è°ƒç”¨ï¼ˆOpenFeignï¼‰"></a>ğŸ’  2. æœåŠ¡è°ƒç”¨ï¼ˆOpenFeignï¼‰</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>@EnableFeignClients</code></td>
<td>å¼€å¯ Feign å®¢æˆ·ç«¯</td>
</tr>
<tr>
<td><code>@FeignClient(name=&quot;service-name&quot;)</code></td>
<td>å®šä¹‰æœåŠ¡è°ƒç”¨æ¥å£</td>
</tr>
<tr>
<td><code>@RequestMapping</code> &#x2F; <code>@GetMapping</code></td>
<td>æ˜ å°„è¿œç¨‹æ¥å£è·¯å¾„</td>
</tr>
</tbody></table>
<h3 id="ğŸ’ -3-æœåŠ¡ç½‘å…³ï¼ˆGatewayï¼‰"><a href="#ğŸ’ -3-æœåŠ¡ç½‘å…³ï¼ˆGatewayï¼‰" class="headerlink" title="ğŸ’  3. æœåŠ¡ç½‘å…³ï¼ˆGatewayï¼‰"></a>ğŸ’  3. æœåŠ¡ç½‘å…³ï¼ˆGatewayï¼‰</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>@EnableGateway</code> <em>(éƒ¨åˆ†ç‰ˆæœ¬è‡ªå¸¦)</em></td>
<td>å¯ç”¨ç½‘å…³æœåŠ¡</td>
</tr>
<tr>
<td><code>@RequestRateLimiter</code></td>
<td>é™æµæ§åˆ¶</td>
</tr>
<tr>
<td><code>@EnableDiscoveryClient</code></td>
<td>æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ</td>
</tr>
</tbody></table>
<h3 id="ğŸ’ -4-ç†”æ–­-é™æµï¼ˆHystrix-Sentinelï¼‰"><a href="#ğŸ’ -4-ç†”æ–­-é™æµï¼ˆHystrix-Sentinelï¼‰" class="headerlink" title="ğŸ’  4. ç†”æ–­ &amp; é™æµï¼ˆHystrix &#x2F; Sentinelï¼‰"></a>ğŸ’  4. ç†”æ–­ &amp; é™æµï¼ˆHystrix &#x2F; Sentinelï¼‰</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>@EnableHystrix</code> &#x2F; <code>@EnableCircuitBreaker</code></td>
<td>å¼€å¯ç†”æ–­æœºåˆ¶</td>
</tr>
<tr>
<td><code>@HystrixCommand(fallbackMethod=&quot;...&quot;)</code></td>
<td>å®šä¹‰é™çº§é€»è¾‘</td>
</tr>
<tr>
<td><code>@SentinelResource(value=&quot;resourceName&quot;, blockHandler=&quot;blockHandler&quot;)</code></td>
<td>Sentinel æ§åˆ¶é™æµç†”æ–­</td>
</tr>
</tbody></table>
<hr>
<h1 id="ğŸ“˜-ä¸ƒã€é¢è¯•è®°å¿†å°æŠ€å·§"><a href="#ğŸ“˜-ä¸ƒã€é¢è¯•è®°å¿†å°æŠ€å·§" class="headerlink" title="ğŸ“˜ ä¸ƒã€é¢è¯•è®°å¿†å°æŠ€å·§"></a>ğŸ“˜ ä¸ƒã€é¢è¯•è®°å¿†å°æŠ€å·§</h1><table>
<thead>
<tr>
<th>æ¨¡å—</th>
<th>å…³é”®æ³¨è§£è®°å¿†ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Spring æ ¸å¿ƒ</strong></td>
<td><code>@Component</code> ç³»åˆ— + <code>@Autowired</code> + <code>@Configuration</code></td>
</tr>
<tr>
<td><strong>Spring MVC</strong></td>
<td><code>@RestController</code> + <code>@RequestMapping</code> + <code>@RequestBody</code></td>
</tr>
<tr>
<td><strong>MyBatis</strong></td>
<td><code>@Mapper</code> + <code>@Select</code> + <code>@Param</code></td>
</tr>
<tr>
<td><strong>Spring Boot</strong></td>
<td><code>@SpringBootApplication</code> + <code>@ConfigurationProperties</code></td>
</tr>
<tr>
<td><strong>Security</strong></td>
<td><code>@EnableWebSecurity</code> + <code>@PreAuthorize</code></td>
</tr>
<tr>
<td><strong>Spring Cloud</strong></td>
<td><code>@EnableDiscoveryClient</code> + <code>@FeignClient</code> + <code>@HystrixCommand</code></td>
</tr>
</tbody></table>
<hr>
<h1 id="ğŸŒ±-ä¸€ã€Spring-æ ¸å¿ƒæ³¨è§£è¿è¡Œæœºåˆ¶ï¼ˆIOC-AOPï¼‰"><a href="#ğŸŒ±-ä¸€ã€Spring-æ ¸å¿ƒæ³¨è§£è¿è¡Œæœºåˆ¶ï¼ˆIOC-AOPï¼‰" class="headerlink" title="ğŸŒ± ä¸€ã€Spring æ ¸å¿ƒæ³¨è§£è¿è¡Œæœºåˆ¶ï¼ˆIOC &#x2F; AOPï¼‰"></a>ğŸŒ± ä¸€ã€Spring æ ¸å¿ƒæ³¨è§£è¿è¡Œæœºåˆ¶ï¼ˆIOC &#x2F; AOPï¼‰</h1><h3 id="1ï¸âƒ£-Component-ç³»åˆ—æ³¨è§£ï¼ˆBean-æ‰«ææ³¨å†Œæµç¨‹ï¼‰"><a href="#1ï¸âƒ£-Component-ç³»åˆ—æ³¨è§£ï¼ˆBean-æ‰«ææ³¨å†Œæµç¨‹ï¼‰" class="headerlink" title="1ï¸âƒ£ @Component ç³»åˆ—æ³¨è§£ï¼ˆBean æ‰«ææ³¨å†Œæµç¨‹ï¼‰"></a>1ï¸âƒ£ <code>@Component</code> ç³»åˆ—æ³¨è§£ï¼ˆBean æ‰«ææ³¨å†Œæµç¨‹ï¼‰</h3><p><strong>æµç¨‹å›¾ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Spring å¯åŠ¨</span><br><span class="line">  â†“</span><br><span class="line">AnnotationConfigApplicationContext.refresh()</span><br><span class="line">  â†“</span><br><span class="line">ConfigurationClassPostProcessor è§£æé…ç½®ç±»</span><br><span class="line">  â†“</span><br><span class="line">ComponentScanAnnotationParser è§£æ @ComponentScan</span><br><span class="line">  â†“</span><br><span class="line">ClassPathBeanDefinitionScanner æ‰«æåŒ…è·¯å¾„</span><br><span class="line">  â†“</span><br><span class="line">å‘ç°å¸¦ @Component / @Service / @Repository çš„ç±»</span><br><span class="line">  â†“</span><br><span class="line">å°è£…æˆ BeanDefinition</span><br><span class="line">  â†“</span><br><span class="line">æ³¨å†Œåˆ° BeanDefinitionRegistry</span><br><span class="line">  â†“</span><br><span class="line">å®ä¾‹åŒ– Bean â†’ æ”¾å…¥ BeanFactory å®¹å™¨</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç±»ï¼š</strong></p>
<ul>
<li><code>ClassPathBeanDefinitionScanner</code></li>
<li><code>ScannedGenericBeanDefinition</code></li>
<li><code>DefaultListableBeanFactory</code></li>
</ul>
<p><strong>æ—¶æœºï¼š</strong></p>
<blockquote>
<p>BeanDefinition é˜¶æ®µï¼ˆå®¹å™¨åˆ·æ–° refresh() æ—¶ï¼‰</p>
</blockquote>
<hr>
<h3 id="2ï¸âƒ£-Autowired-æ³¨å…¥æµç¨‹"><a href="#2ï¸âƒ£-Autowired-æ³¨å…¥æµç¨‹" class="headerlink" title="2ï¸âƒ£ @Autowired æ³¨å…¥æµç¨‹"></a>2ï¸âƒ£ <code>@Autowired</code> æ³¨å…¥æµç¨‹</h3><p><strong>æµç¨‹å›¾ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å®ä¾‹åŒ– Bean</span><br><span class="line">  â†“</span><br><span class="line">æ‰§è¡Œ populateBean()</span><br><span class="line">  â†“</span><br><span class="line">AutowiredAnnotationBeanPostProcessor å¤„ç† @Autowired</span><br><span class="line">  â†“</span><br><span class="line">åå°„è·å–ä¾èµ–å­—æ®µ</span><br><span class="line">  â†“</span><br><span class="line">ä» BeanFactory ä¸­æŸ¥æ‰¾åŒ¹é…ç±»å‹ Bean</span><br><span class="line">  â†“</span><br><span class="line">é€šè¿‡ ReflectionUtils.setField() æ³¨å…¥å­—æ®µå€¼</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç±»ï¼š</strong></p>
<ul>
<li><code>AutowiredAnnotationBeanPostProcessor</code></li>
<li><code>DefaultListableBeanFactory.resolveDependency()</code></li>
</ul>
<p><strong>æ—¶æœºï¼š</strong></p>
<blockquote>
<p>Bean åˆå§‹åŒ–é˜¶æ®µï¼ˆæ„é€ å®Œæˆåï¼Œinit å‰ï¼‰</p>
</blockquote>
<hr>
<h3 id="3ï¸âƒ£-Configuration-Bean"><a href="#3ï¸âƒ£-Configuration-Bean" class="headerlink" title="3ï¸âƒ£ @Configuration + @Bean"></a>3ï¸âƒ£ <code>@Configuration</code> + <code>@Bean</code></h3><p><strong>æµç¨‹å›¾ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨é˜¶æ®µ</span><br><span class="line">  â†“</span><br><span class="line">ConfigurationClassPostProcessor æ‰«æ @Configuration ç±»</span><br><span class="line">  â†“</span><br><span class="line">è§£æ @Bean æ–¹æ³•</span><br><span class="line">  â†“</span><br><span class="line">ä¸ºé…ç½®ç±»ç”Ÿæˆ CGLIB ä»£ç†</span><br><span class="line">  â†“</span><br><span class="line">è°ƒç”¨ @Bean æ–¹æ³•æ—¶ï¼Œä»å®¹å™¨è¿”å›å•ä¾‹å¯¹è±¡</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç±»ï¼š</strong></p>
<ul>
<li><code>ConfigurationClassPostProcessor</code></li>
<li><code>Enhancer</code>ï¼ˆCGLIBï¼‰</li>
<li><code>BeanDefinitionRegistry</code></li>
</ul>
<p><strong>æ—¶æœºï¼š</strong></p>
<blockquote>
<p>æ³¨å†Œ BeanDefinition é˜¶æ®µï¼ˆå¯åŠ¨æ—¶ï¼‰</p>
</blockquote>
<hr>
<h3 id="4ï¸âƒ£-AOP-æ³¨è§£ï¼ˆ-Aspect-Around-ç­‰ï¼‰"><a href="#4ï¸âƒ£-AOP-æ³¨è§£ï¼ˆ-Aspect-Around-ç­‰ï¼‰" class="headerlink" title="4ï¸âƒ£ AOP æ³¨è§£ï¼ˆ@Aspect, @Around ç­‰ï¼‰"></a>4ï¸âƒ£ AOP æ³¨è§£ï¼ˆ<code>@Aspect</code>, <code>@Around</code> ç­‰ï¼‰</h3><p><strong>æµç¨‹å›¾ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨æ—¶</span><br><span class="line">  â†“</span><br><span class="line">AnnotationAwareAspectJAutoProxyCreator æ³¨å†Œåˆ‡é¢</span><br><span class="line">  â†“</span><br><span class="line">è§£æ @Aspect ç±» â†’ æå–åˆ‡ç‚¹è¡¨è¾¾å¼</span><br><span class="line">  â†“</span><br><span class="line">ä¸ºç›®æ ‡ç±»åˆ›å»ºä»£ç†å¯¹è±¡ï¼ˆJDK / CGLIBï¼‰</span><br><span class="line">  â†“</span><br><span class="line">æ–¹æ³•è°ƒç”¨æ—¶è¿›å…¥ä»£ç†é€»è¾‘</span><br><span class="line">  â†“</span><br><span class="line">æ‰§è¡Œ Interceptor é“¾ï¼ˆBefore â†’ Around â†’ Afterï¼‰</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç±»ï¼š</strong></p>
<ul>
<li><code>AnnotationAwareAspectJAutoProxyCreator</code></li>
<li><code>AspectJExpressionPointcut</code></li>
<li><code>ProxyFactory</code></li>
</ul>
<p><strong>æ—¶æœºï¼š</strong></p>
<blockquote>
<p>Bean åˆå§‹åŒ–ç»“æŸååˆ›å»ºä»£ç†å¯¹è±¡é˜¶æ®µ</p>
</blockquote>
<hr>
<h1 id="ğŸŒ-äºŒã€Spring-MVC-æ³¨è§£è¿è¡Œæœºåˆ¶"><a href="#ğŸŒ-äºŒã€Spring-MVC-æ³¨è§£è¿è¡Œæœºåˆ¶" class="headerlink" title="ğŸŒ äºŒã€Spring MVC æ³¨è§£è¿è¡Œæœºåˆ¶"></a>ğŸŒ äºŒã€Spring MVC æ³¨è§£è¿è¡Œæœºåˆ¶</h1><h3 id="1ï¸âƒ£-RequestMappingã€-GetMapping"><a href="#1ï¸âƒ£-RequestMappingã€-GetMapping" class="headerlink" title="1ï¸âƒ£ @RequestMappingã€@GetMapping"></a>1ï¸âƒ£ <code>@RequestMapping</code>ã€<code>@GetMapping</code></h3><p><strong>æµç¨‹å›¾ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SpringMVC å¯åŠ¨</span><br><span class="line">  â†“</span><br><span class="line">DispatcherServlet åˆå§‹åŒ–</span><br><span class="line">  â†“</span><br><span class="line">RequestMappingHandlerMapping æ‰«æ @Controller ç±»</span><br><span class="line">  â†“</span><br><span class="line">è§£ææ¯ä¸ªæ–¹æ³•çš„ @RequestMapping è·¯å¾„</span><br><span class="line">  â†“</span><br><span class="line">å»ºç«‹ URL -&gt; HandlerMethod æ˜ å°„è¡¨</span><br><span class="line">  â†“</span><br><span class="line">è¯·æ±‚åˆ°è¾¾æ—¶é€šè¿‡ HandlerMapping åŒ¹é…</span><br><span class="line">  â†“</span><br><span class="line">è°ƒç”¨ HandlerAdapter æ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç±»ï¼š</strong></p>
<ul>
<li><code>RequestMappingHandlerMapping</code></li>
<li><code>HandlerMethod</code></li>
<li><code>DispatcherServlet</code></li>
</ul>
<p><strong>æ—¶æœºï¼š</strong></p>
<blockquote>
<p>åˆå§‹åŒ–é˜¶æ®µæ³¨å†Œæ˜ å°„ï¼›è¯·æ±‚é˜¶æ®µåŒ¹é…è°ƒç”¨ã€‚</p>
</blockquote>
<hr>
<h3 id="2ï¸âƒ£-RequestBody-ResponseBody"><a href="#2ï¸âƒ£-RequestBody-ResponseBody" class="headerlink" title="2ï¸âƒ£ @RequestBody &#x2F; @ResponseBody"></a>2ï¸âƒ£ <code>@RequestBody</code> &#x2F; <code>@ResponseBody</code></h3><p><strong>æµç¨‹å›¾ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">è¯·æ±‚è¿›å…¥ DispatcherServlet</span><br><span class="line">  â†“</span><br><span class="line">HandlerAdapter è°ƒç”¨ç›®æ ‡æ–¹æ³•</span><br><span class="line">  â†“</span><br><span class="line">æ£€æµ‹å‚æ•°æ˜¯å¦æœ‰ @RequestBody</span><br><span class="line">  â†“</span><br><span class="line">ä½¿ç”¨ HttpMessageConverter ååºåˆ—åŒ– JSON â†’ Java å¯¹è±¡</span><br><span class="line">  â†“</span><br><span class="line">æ–¹æ³•æ‰§è¡Œå®Œæˆåæ£€æµ‹ @ResponseBody</span><br><span class="line">  â†“</span><br><span class="line">å†æ¬¡é€šè¿‡ HttpMessageConverter åºåˆ—åŒ–è¿”å›å¯¹è±¡ â†’ JSON</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç±»ï¼š</strong></p>
<ul>
<li><code>RequestResponseBodyMethodProcessor</code></li>
<li><code>MappingJackson2HttpMessageConverter</code></li>
</ul>
<p><strong>æ—¶æœºï¼š</strong></p>
<blockquote>
<p>è¯·æ±‚å¤„ç†é˜¶æ®µï¼ˆæ–¹æ³•è°ƒç”¨å‰åï¼‰</p>
</blockquote>
<hr>
<h1 id="ğŸ’¾-ä¸‰ã€MyBatis-æ³¨è§£è¿è¡Œæœºåˆ¶"><a href="#ğŸ’¾-ä¸‰ã€MyBatis-æ³¨è§£è¿è¡Œæœºåˆ¶" class="headerlink" title="ğŸ’¾ ä¸‰ã€MyBatis æ³¨è§£è¿è¡Œæœºåˆ¶"></a>ğŸ’¾ ä¸‰ã€MyBatis æ³¨è§£è¿è¡Œæœºåˆ¶</h1><p><strong>æµç¨‹å›¾ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Spring å¯åŠ¨æ—¶</span><br><span class="line">  â†“</span><br><span class="line">MapperScannerConfigurer æ‰«æ @Mapper æ¥å£</span><br><span class="line">  â†“</span><br><span class="line">ä¸ºæ¯ä¸ª Mapper ç”Ÿæˆ MapperFactoryBean</span><br><span class="line">  â†“</span><br><span class="line">è°ƒç”¨æ—¶ç”± MapperProxy æ‹¦æˆª</span><br><span class="line">  â†“</span><br><span class="line">ä» MapperMethod è·å–å¯¹åº” SQLï¼ˆæ³¨è§£æˆ– XMLï¼‰</span><br><span class="line">  â†“</span><br><span class="line">é€šè¿‡ SqlSessionTemplate æ‰§è¡Œ SQL</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç±»ï¼š</strong></p>
<ul>
<li><code>MapperScannerConfigurer</code></li>
<li><code>MapperProxy</code></li>
<li><code>SqlSessionTemplate</code></li>
</ul>
<p><strong>æ—¶æœºï¼š</strong></p>
<blockquote>
<p>Mapper ä»£ç†å¯¹è±¡åˆ›å»ºé˜¶æ®µ + è°ƒç”¨æ—¶åŠ¨æ€æ‰§è¡Œ SQL</p>
</blockquote>
<hr>
<h1 id="ğŸš€-å››ã€Spring-Boot-æ³¨è§£è¿è¡Œæœºåˆ¶"><a href="#ğŸš€-å››ã€Spring-Boot-æ³¨è§£è¿è¡Œæœºåˆ¶" class="headerlink" title="ğŸš€ å››ã€Spring Boot æ³¨è§£è¿è¡Œæœºåˆ¶"></a>ğŸš€ å››ã€Spring Boot æ³¨è§£è¿è¡Œæœºåˆ¶</h1><h3 id="1ï¸âƒ£-SpringBootApplication-è‡ªåŠ¨è£…é…æµç¨‹"><a href="#1ï¸âƒ£-SpringBootApplication-è‡ªåŠ¨è£…é…æµç¨‹" class="headerlink" title="1ï¸âƒ£ @SpringBootApplication è‡ªåŠ¨è£…é…æµç¨‹"></a>1ï¸âƒ£ <code>@SpringBootApplication</code> è‡ªåŠ¨è£…é…æµç¨‹</h3><p><strong>æµç¨‹å›¾ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨ç±» @SpringBootApplication</span><br><span class="line">  â†“</span><br><span class="line">@SpringBootApplication = @EnableAutoConfiguration + @ComponentScan + @Configuration</span><br><span class="line">  â†“</span><br><span class="line">@EnableAutoConfiguration å¯¼å…¥ AutoConfigurationImportSelector</span><br><span class="line">  â†“</span><br><span class="line">ä» META-INF/spring.factories è¯»å–æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»</span><br><span class="line">  â†“</span><br><span class="line">åˆ¤æ–­æ¡ä»¶æ³¨è§£ï¼ˆ@ConditionalOnClass, @ConditionalOnMissingBean...ï¼‰</span><br><span class="line">  â†“</span><br><span class="line">ç¬¦åˆæ¡ä»¶çš„è‡ªåŠ¨é…ç½®ç±»æ³¨å†Œåˆ°å®¹å™¨</span><br><span class="line">  â†“</span><br><span class="line">å®Œæˆ Bean è£…é…</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç±»ï¼š</strong></p>
<ul>
<li><code>SpringApplication</code></li>
<li><code>AutoConfigurationImportSelector</code></li>
<li><code>SpringFactoriesLoader</code></li>
</ul>
<p><strong>æ—¶æœºï¼š</strong></p>
<blockquote>
<p>å¯åŠ¨é˜¶æ®µï¼ˆå®¹å™¨åˆ·æ–°å‰ï¼‰</p>
</blockquote>
<hr>
<h1 id="ğŸ”-äº”ã€Spring-Security-æ³¨è§£è¿è¡Œæœºåˆ¶"><a href="#ğŸ”-äº”ã€Spring-Security-æ³¨è§£è¿è¡Œæœºåˆ¶" class="headerlink" title="ğŸ” äº”ã€Spring Security æ³¨è§£è¿è¡Œæœºåˆ¶"></a>ğŸ” äº”ã€Spring Security æ³¨è§£è¿è¡Œæœºåˆ¶</h1><p><strong>æµç¨‹å›¾ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@EnableWebSecurity</span><br><span class="line">  â†“</span><br><span class="line">æ³¨å†Œ DelegatingFilterProxy â†’ springSecurityFilterChain</span><br><span class="line">  â†“</span><br><span class="line">åŠ è½½ WebSecurityConfigurerAdapter</span><br><span class="line">  â†“</span><br><span class="line">é…ç½®è¿‡æ»¤å™¨é“¾ï¼ˆè®¤è¯ã€æˆæƒï¼‰</span><br><span class="line">  â†“</span><br><span class="line">æ‰§è¡Œ Controller æ–¹æ³•å‰ï¼ŒMethodSecurityInterceptor æ£€æŸ¥ @PreAuthorize / @Secured</span><br><span class="line">  â†“</span><br><span class="line">è§£æ SpEL è¡¨è¾¾å¼æ ¡éªŒå½“å‰ç”¨æˆ·æƒé™</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç±»ï¼š</strong></p>
<ul>
<li><code>MethodSecurityInterceptor</code></li>
<li><code>SecurityFilterChain</code></li>
<li><code>AccessDecisionManager</code></li>
</ul>
<p><strong>æ—¶æœºï¼š</strong></p>
<blockquote>
<p>è¯·æ±‚è¿›å…¥ Security Filter é˜¶æ®µ &amp; æ–¹æ³•è°ƒç”¨å‰</p>
</blockquote>
<hr>
<h1 id="â˜ï¸-å…­ã€Spring-Cloud-æ³¨è§£è¿è¡Œæœºåˆ¶"><a href="#â˜ï¸-å…­ã€Spring-Cloud-æ³¨è§£è¿è¡Œæœºåˆ¶" class="headerlink" title="â˜ï¸ å…­ã€Spring Cloud æ³¨è§£è¿è¡Œæœºåˆ¶"></a>â˜ï¸ å…­ã€Spring Cloud æ³¨è§£è¿è¡Œæœºåˆ¶</h1><h3 id="1ï¸âƒ£-EnableDiscoveryClient"><a href="#1ï¸âƒ£-EnableDiscoveryClient" class="headerlink" title="1ï¸âƒ£ @EnableDiscoveryClient"></a>1ï¸âƒ£ <code>@EnableDiscoveryClient</code></h3><p><strong>æµç¨‹å›¾ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨é˜¶æ®µ</span><br><span class="line">  â†“</span><br><span class="line">é€šè¿‡ ImportSelector å¯¼å…¥ DiscoveryClientAutoConfiguration</span><br><span class="line">  â†“</span><br><span class="line">åˆå§‹åŒ– DiscoveryClient (Eureka / Nacos)</span><br><span class="line">  â†“</span><br><span class="line">å°†å½“å‰æœåŠ¡ä¿¡æ¯æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ</span><br></pre></td></tr></table></figure>

<h3 id="2ï¸âƒ£-FeignClient"><a href="#2ï¸âƒ£-FeignClient" class="headerlink" title="2ï¸âƒ£ @FeignClient"></a>2ï¸âƒ£ <code>@FeignClient</code></h3><p><strong>æµç¨‹å›¾ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@EnableFeignClients å¯åŠ¨</span><br><span class="line">  â†“</span><br><span class="line">FeignClientsRegistrar æ³¨å†Œ FeignClientFactoryBean</span><br><span class="line">  â†“</span><br><span class="line">åˆ›å»º Feign åŠ¨æ€ä»£ç†å¯¹è±¡</span><br><span class="line">  â†“</span><br><span class="line">æ–¹æ³•è°ƒç”¨ â†’ FeignInvocationHandler æ‹¦æˆª</span><br><span class="line">  â†“</span><br><span class="line">æ„é€  HTTP è¯·æ±‚ â†’ Ribbon è´Ÿè½½å‡è¡¡ â†’ RestTemplate è°ƒç”¨è¿œç¨‹æ¥å£</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç±»ï¼š</strong></p>
<ul>
<li><code>FeignClientsRegistrar</code></li>
<li><code>FeignClientFactoryBean</code></li>
<li><code>FeignInvocationHandler</code></li>
</ul>
<hr>
<h2 id="ğŸš¨-ä¸ƒã€æ‰€æœ‰æ¡†æ¶è°ƒç”¨æ—¶æœºæ€»è§ˆè¡¨"><a href="#ğŸš¨-ä¸ƒã€æ‰€æœ‰æ¡†æ¶è°ƒç”¨æ—¶æœºæ€»è§ˆè¡¨" class="headerlink" title="ğŸš¨ ä¸ƒã€æ‰€æœ‰æ¡†æ¶è°ƒç”¨æ—¶æœºæ€»è§ˆè¡¨"></a>ğŸš¨ ä¸ƒã€æ‰€æœ‰æ¡†æ¶è°ƒç”¨æ—¶æœºæ€»è§ˆè¡¨</h2><table>
<thead>
<tr>
<th>é˜¶æ®µ</th>
<th>æ³¨è§£ç±»å‹</th>
<th>æ ¸å¿ƒæ‰§è¡Œå™¨</th>
<th>æ—¶æœº</th>
</tr>
</thead>
<tbody><tr>
<td>Bean æ‰«ææ³¨å†Œ</td>
<td><code>@Component</code> ç³»åˆ—</td>
<td><code>ClassPathBeanDefinitionScanner</code></td>
<td>å®¹å™¨å¯åŠ¨</td>
</tr>
<tr>
<td>ä¾èµ–æ³¨å…¥</td>
<td><code>@Autowired</code></td>
<td><code>AutowiredAnnotationBeanPostProcessor</code></td>
<td>Bean åˆå§‹åŒ–é˜¶æ®µ</td>
</tr>
<tr>
<td>é…ç½®è§£æ</td>
<td><code>@Configuration</code>ã€<code>@Bean</code></td>
<td><code>ConfigurationClassPostProcessor</code></td>
<td>å®¹å™¨åˆ·æ–°å‰</td>
</tr>
<tr>
<td>AOP åˆ›å»ºä»£ç†</td>
<td><code>@Aspect</code></td>
<td><code>AnnotationAwareAspectJAutoProxyCreator</code></td>
<td>Bean åˆå§‹åŒ–å</td>
</tr>
<tr>
<td>MVC æ˜ å°„æ³¨å†Œ</td>
<td><code>@Controller</code>ã€<code>@RequestMapping</code></td>
<td><code>RequestMappingHandlerMapping</code></td>
<td>Web å®¹å™¨å¯åŠ¨</td>
</tr>
<tr>
<td>JSON è½¬æ¢</td>
<td><code>@RequestBody</code>ã€<code>@ResponseBody</code></td>
<td><code>HttpMessageConverter</code></td>
<td>è¯·æ±‚è°ƒç”¨æ—¶</td>
</tr>
<tr>
<td>MyBatis ä»£ç†</td>
<td><code>@Mapper</code></td>
<td><code>MapperProxy</code></td>
<td>è¿è¡Œæ—¶è°ƒç”¨æ¥å£æ–¹æ³•</td>
</tr>
<tr>
<td>è‡ªåŠ¨è£…é…</td>
<td><code>@EnableAutoConfiguration</code></td>
<td><code>AutoConfigurationImportSelector</code></td>
<td>å¯åŠ¨é˜¶æ®µ</td>
</tr>
<tr>
<td>æƒé™æ§åˆ¶</td>
<td><code>@PreAuthorize</code></td>
<td><code>MethodSecurityInterceptor</code></td>
<td>æ–¹æ³•è°ƒç”¨å‰</td>
</tr>
<tr>
<td>æœåŠ¡æ³¨å†Œ</td>
<td><code>@EnableDiscoveryClient</code></td>
<td><code>DiscoveryClientAutoConfiguration</code></td>
<td>å¯åŠ¨é˜¶æ®µ</td>
</tr>
<tr>
<td>è¿œç¨‹è°ƒç”¨</td>
<td><code>@FeignClient</code></td>
<td><code>FeignClientFactoryBean</code></td>
<td>è°ƒç”¨æ¥å£æ—¶</td>
</tr>
</tbody></table>
<hr>
<h2 id="ğŸ§ -å…«ã€é¢è¯•å»¶ä¼¸é€»è¾‘ï¼ˆé«˜é¢‘é—®æ³•ï¼‰"><a href="#ğŸ§ -å…«ã€é¢è¯•å»¶ä¼¸é€»è¾‘ï¼ˆé«˜é¢‘é—®æ³•ï¼‰" class="headerlink" title="ğŸ§  å…«ã€é¢è¯•å»¶ä¼¸é€»è¾‘ï¼ˆé«˜é¢‘é—®æ³•ï¼‰"></a>ğŸ§  å…«ã€é¢è¯•å»¶ä¼¸é€»è¾‘ï¼ˆé«˜é¢‘é—®æ³•ï¼‰</h2><table>
<thead>
<tr>
<th>å…¸å‹é—®é¢˜</th>
<th>æ ¸å¿ƒå›ç­”é€»è¾‘</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>@Autowired</code> æ³¨å…¥æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</strong></td>
<td>é€šè¿‡ <code>AutowiredAnnotationBeanPostProcessor</code> åœ¨ Bean åˆå§‹åŒ–é˜¶æ®µç”¨åå°„æ³¨å…¥ä¾èµ–ã€‚</td>
</tr>
<tr>
<td><strong><code>@Configuration</code> ä¸ºä»€ä¹ˆä¼šç”Ÿæˆä»£ç†ç±»ï¼Ÿ</strong></td>
<td>ç¡®ä¿ <code>@Bean</code> æ–¹æ³•å¤šæ¬¡è°ƒç”¨è¿”å›åŒä¸€å•ä¾‹ Beanã€‚</td>
</tr>
<tr>
<td><strong>Spring Boot è‡ªåŠ¨è£…é…çš„åŸç†ï¼Ÿ</strong></td>
<td><code>@EnableAutoConfiguration</code> â†’ <code>AutoConfigurationImportSelector</code> â†’ è¯»å– <code>spring.factories</code>ã€‚</td>
</tr>
<tr>
<td><strong>Spring AOP å¦‚ä½•ç»‡å…¥ï¼Ÿ</strong></td>
<td>ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼ˆJDK&#x2F;CGLIBï¼‰ï¼Œç”± <code>AnnotationAwareAspectJAutoProxyCreator</code> åˆ›å»ºä»£ç†å¯¹è±¡ã€‚</td>
</tr>
<tr>
<td><strong>Spring MVC æ˜¯å¦‚ä½•æ‰¾åˆ° Controller çš„ï¼Ÿ</strong></td>
<td><code>RequestMappingHandlerMapping</code> æ‰«æ <code>@Controller</code> å¹¶å»ºç«‹ URL æ˜ å°„è¡¨ã€‚</td>
</tr>
<tr>
<td><strong>Feign æ˜¯æ€ä¹ˆå®ç°è¿œç¨‹è°ƒç”¨çš„ï¼Ÿ</strong></td>
<td>é€šè¿‡åŠ¨æ€ä»£ç†ç”Ÿæˆæ¥å£å®ç°ç±»ï¼Œè°ƒç”¨æ—¶å°è£… HTTP è¯·æ±‚å‘å¾€ç›®æ ‡æœåŠ¡ã€‚</td>
</tr>
</tbody></table>
<hr>
<p>å¤ªå¥½äº† ğŸ‘<br> é‚£æˆ‘ä»¬å°±è¿›å…¥<strong>ç¬¬äºŒé˜¶æ®µï¼šå…­å¤§æ¡†æ¶çš„æ·±å…¥æœºåˆ¶è®²è§£ç‰ˆ</strong>ï¼ŒæŠŠæ¯ä¸ªæ¡†æ¶çš„æ³¨è§£ä»â€œä¼šç”¨â€æå‡åˆ°â€œæ‡‚åŸç†ã€èƒ½è®²æºç é€»è¾‘â€ã€‚</p>
<p>æˆ‘ä¼šæŒ‰é¡ºåºè®²ï¼Œæ¯ä¸ªæ¨¡å—åŒ…å«ï¼š<br> 1ï¸âƒ£ å¸¸ç”¨æ³¨è§£<br> 2ï¸âƒ£ è¿è¡Œæœºåˆ¶ï¼ˆæºç &#x2F;åŸç†ï¼‰<br> 3ï¸âƒ£ å®æˆ˜&#x2F;åœºæ™¯<br> 4ï¸âƒ£ é¢è¯•è¿½é—®ç‚¹ï¼ˆèƒ½æ‹¿é«˜åˆ†çš„æ·±ç­”æ³•ï¼‰</p>
<hr>
<h1 id="ğŸŒ±-ä¸€ã€Spring-æ ¸å¿ƒæ³¨è§£-æ·±å…¥è§£æï¼ˆIOC-AOPï¼‰"><a href="#ğŸŒ±-ä¸€ã€Spring-æ ¸å¿ƒæ³¨è§£-æ·±å…¥è§£æï¼ˆIOC-AOPï¼‰" class="headerlink" title="ğŸŒ± ä¸€ã€Spring æ ¸å¿ƒæ³¨è§£ æ·±å…¥è§£æï¼ˆIOC + AOPï¼‰"></a>ğŸŒ± ä¸€ã€Spring æ ¸å¿ƒæ³¨è§£ æ·±å…¥è§£æï¼ˆIOC + AOPï¼‰</h1><p>Spring æ˜¯ä¸€åˆ‡çš„æ ¹ã€‚åªè¦ç†è§£å®ƒçš„ IOC å®¹å™¨å’Œ AOP åŸç†ï¼Œåé¢æ‰€æœ‰æ¡†æ¶çš„æ³¨è§£ä½ éƒ½ä¼šç§’æ‡‚ã€‚</p>
<hr>
<h2 id="1ï¸âƒ£-IOC-æ ¸å¿ƒæ³¨è§£æœºåˆ¶"><a href="#1ï¸âƒ£-IOC-æ ¸å¿ƒæ³¨è§£æœºåˆ¶" class="headerlink" title="1ï¸âƒ£ IOC æ ¸å¿ƒæ³¨è§£æœºåˆ¶"></a>1ï¸âƒ£ IOC æ ¸å¿ƒæ³¨è§£æœºåˆ¶</h2><p><strong>æ ¸å¿ƒæ³¨è§£</strong>ï¼š<br> <code>@Component</code>, <code>@Service</code>, <code>@Repository</code>, <code>@Controller</code>, <code>@Configuration</code>, <code>@Bean</code>, <code>@Scope</code></p>
<hr>
<h3 id="ğŸ”-1-åŸç†"><a href="#ğŸ”-1-åŸç†" class="headerlink" title="ğŸ” 1. åŸç†"></a>ğŸ” 1. åŸç†</h3><h4 id="ğŸ§©-IOCï¼ˆInversion-of-Controlï¼‰â€”â€”æ§åˆ¶åè½¬"><a href="#ğŸ§©-IOCï¼ˆInversion-of-Controlï¼‰â€”â€”æ§åˆ¶åè½¬" class="headerlink" title="ğŸ§© IOCï¼ˆInversion of Controlï¼‰â€”â€”æ§åˆ¶åè½¬"></a>ğŸ§© IOCï¼ˆInversion of Controlï¼‰â€”â€”æ§åˆ¶åè½¬</h4><ul>
<li>æ ¸å¿ƒæ€æƒ³ï¼š<strong>å¯¹è±¡ä¸ç”±è‡ªå·±åˆ›å»ºï¼Œè€Œæ˜¯äº¤ç»™å®¹å™¨ç®¡ç†</strong>ã€‚</li>
<li>Spring å®¹å™¨æœ¬è´¨æ˜¯ä¸€ä¸ª <strong>BeanFactory &#x2F; ApplicationContext</strong>ã€‚</li>
<li>å®ƒå¯åŠ¨æ—¶ä¼šæ‰§è¡Œï¼š<ol>
<li>æ‰«æåŒ…ï¼ˆ<code>@ComponentScan</code>ï¼‰</li>
<li>æ‰¾åˆ°å¸¦ <code>@Component</code> ç³»çš„ç±»</li>
<li>å®ä¾‹åŒ–æˆ Beanï¼Œæ”¾å…¥ IOC å®¹å™¨</li>
<li>æ‰§è¡Œä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</li>
</ol>
</li>
</ul>
<h4 id="ğŸ§ -åº•å±‚å…³é”®ç±»ï¼š"><a href="#ğŸ§ -åº•å±‚å…³é”®ç±»ï¼š" class="headerlink" title="ğŸ§  åº•å±‚å…³é”®ç±»ï¼š"></a>ğŸ§  åº•å±‚å…³é”®ç±»ï¼š</h4><ul>
<li><code>ClassPathScanningCandidateComponentProvider</code>ï¼šæ‰«ææ‰€æœ‰ç±»</li>
<li><code>AnnotationConfigApplicationContext</code>ï¼šåŸºäºæ³¨è§£çš„å®¹å™¨å…¥å£</li>
<li><code>DefaultListableBeanFactory</code>ï¼šBean å­˜å‚¨ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
</ul>
<hr>
<h3 id="âš™ï¸-2-Component-ä¸æ´¾ç”Ÿæ³¨è§£"><a href="#âš™ï¸-2-Component-ä¸æ´¾ç”Ÿæ³¨è§£" class="headerlink" title="âš™ï¸ 2. @Component ä¸æ´¾ç”Ÿæ³¨è§£"></a>âš™ï¸ 2. @Component ä¸æ´¾ç”Ÿæ³¨è§£</h3><p>Spring åœ¨æ‰«ææ—¶ä¼šåˆ¤æ–­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (clazz.isAnnotationPresent(Component.class) </span><br><span class="line">    || clazz.isAnnotationPresent(Controller.class) </span><br><span class="line">    || clazz.isAnnotationPresent(Service.class)</span><br><span class="line">    || clazz.isAnnotationPresent(Repository.class)) &#123;</span><br><span class="line">    <span class="comment">// æ³¨å†Œ BeanDefinition</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‰ æ‰€ä»¥ <code>@Controller</code>, <code>@Service</code>, <code>@Repository</code> éƒ½æ˜¯ <code>@Component</code> çš„è¯­ä¹‰æ‰©å±•ï¼Œåªæ˜¯æ–¹ä¾¿åˆ†å±‚ã€‚</p>
<hr>
<h3 id="âš™ï¸-3-Configuration-Bean-åŸç†"><a href="#âš™ï¸-3-Configuration-Bean-åŸç†" class="headerlink" title="âš™ï¸ 3. @Configuration + @Bean åŸç†"></a>âš™ï¸ 3. @Configuration + @Bean åŸç†</h3><ul>
<li><code>@Configuration</code> æ ‡è¯†é…ç½®ç±»ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¸¦ CGLIB ä»£ç†çš„ Beanã€‚</li>
<li>ä»£ç†çš„ç›®çš„æ˜¯é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–åŒä¸€ä¸ª Beanã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> UserService <span class="title function_">userService</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åº•å±‚ Spring ä¼šï¼š</p>
<ol>
<li>è§£æ <code>@Configuration</code></li>
<li>ç”Ÿæˆ CGLIB ä»£ç†å­ç±»</li>
<li>æ‹¦æˆªå¯¹ <code>@Bean</code> æ–¹æ³•çš„è°ƒç”¨</li>
<li>è‹¥ Bean å·²å­˜åœ¨ï¼Œä¸é‡æ–°åˆ›å»º</li>
</ol>
<hr>
<h3 id="âš™ï¸-4-ä¾èµ–æ³¨å…¥æ³¨è§£æœºåˆ¶"><a href="#âš™ï¸-4-ä¾èµ–æ³¨å…¥æ³¨è§£æœºåˆ¶" class="headerlink" title="âš™ï¸ 4. ä¾èµ–æ³¨å…¥æ³¨è§£æœºåˆ¶"></a>âš™ï¸ 4. ä¾èµ–æ³¨å…¥æ³¨è§£æœºåˆ¶</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>æœºåˆ¶</th>
</tr>
</thead>
<tbody><tr>
<td><strong>@Autowired</strong></td>
<td>åå°„æ³¨å…¥ã€‚å…ˆæŒ‰ç±»å‹åŒ¹é…ï¼Œå†æŒ‰åç§°ã€‚</td>
</tr>
<tr>
<td><strong>@Qualifier</strong></td>
<td>æŒ‡å®šæ³¨å…¥ Bean åç§°ã€‚</td>
</tr>
<tr>
<td><strong>@Resource</strong></td>
<td>JSR-250 æ ‡å‡†ï¼Œå…ˆæŒ‰åç§°ï¼Œå†æŒ‰ç±»å‹ã€‚</td>
</tr>
<tr>
<td><strong>@Value</strong></td>
<td>ä» <code>Environment</code> ä¸­å–å€¼ï¼ˆæ”¯æŒ <code>$&#123;&#125;</code>ï¼‰ã€‚</td>
</tr>
</tbody></table>
<p>åº•å±‚ç±»ï¼š</p>
<ul>
<li><code>AutowiredAnnotationBeanPostProcessor</code></li>
<li><code>CommonAnnotationBeanPostProcessor</code></li>
<li><code>ValueAnnotationBeanPostProcessor</code></li>
</ul>
<p>è¿™äº›éƒ½æ˜¯åœ¨ Bean åˆå§‹åŒ–é˜¶æ®µæ‰§è¡Œçš„ <strong>BeanPostProcessor</strong>ã€‚</p>
<hr>
<h2 id="2ï¸âƒ£-AOP-æ ¸å¿ƒæ³¨è§£æœºåˆ¶"><a href="#2ï¸âƒ£-AOP-æ ¸å¿ƒæ³¨è§£æœºåˆ¶" class="headerlink" title="2ï¸âƒ£ AOP æ ¸å¿ƒæ³¨è§£æœºåˆ¶"></a>2ï¸âƒ£ AOP æ ¸å¿ƒæ³¨è§£æœºåˆ¶</h2><p><strong>æ ¸å¿ƒæ³¨è§£</strong>ï¼š<code>@Aspect</code>, <code>@Before</code>, <code>@After</code>, <code>@Around</code>, <code>@Pointcut</code></p>
<h3 id="ğŸ§©-1-åŸç†ï¼šåŠ¨æ€ä»£ç†-é€šçŸ¥ç»‡å…¥"><a href="#ğŸ§©-1-åŸç†ï¼šåŠ¨æ€ä»£ç†-é€šçŸ¥ç»‡å…¥" class="headerlink" title="ğŸ§© 1. åŸç†ï¼šåŠ¨æ€ä»£ç† + é€šçŸ¥ç»‡å…¥"></a>ğŸ§© 1. åŸç†ï¼šåŠ¨æ€ä»£ç† + é€šçŸ¥ç»‡å…¥</h3><p>Spring å¯åŠ¨æ—¶ï¼š</p>
<ol>
<li>æ‰«æ <code>@Aspect</code> ç±»ï¼›</li>
<li>è§£æé€šçŸ¥æ–¹æ³•ï¼ˆ<code>@Before</code>, <code>@Around</code>â€¦ï¼‰ï¼›</li>
<li>ç”Ÿæˆä»£ç†å¯¹è±¡ï¼ˆJDK Proxy æˆ– CGLIBï¼‰ï¼›</li>
<li>æ–¹æ³•æ‰§è¡Œæ—¶ç”±ä»£ç†æ‹¦æˆªï¼Œæ‰§è¡Œé€šçŸ¥é€»è¾‘ã€‚</li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogAspect</span> &#123;</span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.demo.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å‰ç½®é€šçŸ¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“è°ƒç”¨ <code>service</code> æ–¹æ³•æ—¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JDK åŠ¨æ€ä»£ç† â†’ è¿›å…¥ AOP ä»£ç†ç±» â†’ æ‰§è¡Œ before() â†’ è°ƒç”¨åŸæ–¹æ³• â†’ after()</span><br></pre></td></tr></table></figure>

<p>åº•å±‚å…³é”®ç±»ï¼š</p>
<ul>
<li><code>AspectJExpressionPointcut</code></li>
<li><code>JdkDynamicAopProxy</code></li>
<li><code>CglibAopProxy</code></li>
</ul>
<hr>
<h2 id="ğŸ§ -é¢è¯•æ·±é—®ç‚¹ï¼ˆå¯ç›´æ¥è¯´å‡ºåŸç†ï¼‰"><a href="#ğŸ§ -é¢è¯•æ·±é—®ç‚¹ï¼ˆå¯ç›´æ¥è¯´å‡ºåŸç†ï¼‰" class="headerlink" title="ğŸ§  é¢è¯•æ·±é—®ç‚¹ï¼ˆå¯ç›´æ¥è¯´å‡ºåŸç†ï¼‰"></a>ğŸ§  é¢è¯•æ·±é—®ç‚¹ï¼ˆå¯ç›´æ¥è¯´å‡ºåŸç†ï¼‰</h2><table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>ç­”æ¡ˆè¦ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td>@Component å’Œ @Bean åŒºåˆ«ï¼Ÿ</td>
<td>@Component è‡ªåŠ¨æ‰«æï¼Œ@Bean æ‰‹åŠ¨æ³¨å†Œï¼›å‰è€…ç±»çº§åˆ«ï¼Œåè€…æ–¹æ³•çº§åˆ«ã€‚</td>
</tr>
<tr>
<td>@Configuration ä¸ºä»€ä¹ˆè¦ä»£ç†ï¼Ÿ</td>
<td>ä¸ºäº†ä¿è¯ @Bean è¿”å›çš„å•ä¾‹ä¸ä¼šé‡å¤åˆ›å»ºã€‚</td>
</tr>
<tr>
<td>AOP æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</td>
<td>åŸºäº JDK&#x2F;CGLIB åŠ¨æ€ä»£ç†ï¼Œé€šè¿‡ ProxyFactory åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œæ‰§è¡Œé€šçŸ¥é“¾ã€‚</td>
</tr>
<tr>
<td>@Autowired ä»€ä¹ˆæ—¶å€™æ³¨å…¥ï¼Ÿ</td>
<td>åœ¨ BeanPostProcessor é˜¶æ®µçš„ <code>postProcessPropertyValues()</code> é‡Œæ³¨å…¥ã€‚</td>
</tr>
</tbody></table>
<hr>
<h1 id="ğŸŒ-äºŒã€SpringMVC-å¸¸ç”¨æ³¨è§£æ·±åº¦è§£æï¼ˆè¯·æ±‚åˆ†å‘-å‚æ•°ç»‘å®š-æ¶ˆæ¯è½¬æ¢ï¼‰"><a href="#ğŸŒ-äºŒã€SpringMVC-å¸¸ç”¨æ³¨è§£æ·±åº¦è§£æï¼ˆè¯·æ±‚åˆ†å‘-å‚æ•°ç»‘å®š-æ¶ˆæ¯è½¬æ¢ï¼‰" class="headerlink" title="ğŸŒ äºŒã€SpringMVC å¸¸ç”¨æ³¨è§£æ·±åº¦è§£æï¼ˆè¯·æ±‚åˆ†å‘ + å‚æ•°ç»‘å®š + æ¶ˆæ¯è½¬æ¢ï¼‰"></a>ğŸŒ äºŒã€SpringMVC å¸¸ç”¨æ³¨è§£æ·±åº¦è§£æï¼ˆè¯·æ±‚åˆ†å‘ + å‚æ•°ç»‘å®š + æ¶ˆæ¯è½¬æ¢ï¼‰</h1><p>SpringMVC æ˜¯ Spring çš„ Web å±‚æ¡†æ¶ï¼Œå®ƒçš„æ³¨è§£ä½“ç³»å›´ç»• <strong>è¯·æ±‚æ˜ å°„ã€å‚æ•°ç»‘å®šã€è¿”å›å“åº”</strong> ä¸‰å¤§æ ¸å¿ƒå±•å¼€ã€‚</p>
<hr>
<h2 id="1ï¸âƒ£-SpringMVC-çš„æ•´ä½“æ¶æ„ä¸æ‰§è¡Œæµç¨‹"><a href="#1ï¸âƒ£-SpringMVC-çš„æ•´ä½“æ¶æ„ä¸æ‰§è¡Œæµç¨‹" class="headerlink" title="1ï¸âƒ£ SpringMVC çš„æ•´ä½“æ¶æ„ä¸æ‰§è¡Œæµç¨‹"></a>1ï¸âƒ£ SpringMVC çš„æ•´ä½“æ¶æ„ä¸æ‰§è¡Œæµç¨‹</h2><blockquote>
<p>ğŸŒŠ é¢è¯•å¸¸é—®ï¼š<strong>â€œSpringMVC è¯·æ±‚æ˜¯æ€ä¹ˆä» URL åˆ° Controller æ–¹æ³•æ‰§è¡Œçš„ï¼Ÿâ€</strong></p>
</blockquote>
<p>ğŸ§© æ ¸å¿ƒæœºåˆ¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DispatcherServletï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼‰</span><br><span class="line">   â†“</span><br><span class="line">HandlerMappingï¼ˆæ˜ å°„å¤„ç†å™¨ï¼‰  â† è§£æ @RequestMapping</span><br><span class="line">   â†“</span><br><span class="line">HandlerAdapterï¼ˆé€‚é…å™¨ï¼‰      â† è§£æ @RequestBodyã€@ModelAttribute ç­‰å‚æ•°</span><br><span class="line">   â†“</span><br><span class="line">Controller æ–¹æ³•æ‰§è¡Œ</span><br><span class="line">   â†“</span><br><span class="line">ViewResolverï¼ˆè§†å›¾è§£æï¼‰ / HttpMessageConverterï¼ˆJSON è½¬æ¢ï¼‰</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç‚¹</strong>ï¼šSpringMVC åˆå§‹åŒ–æ—¶ï¼Œä¼šæ‰«ææ‰€æœ‰å¸¦æœ‰ <code>@Controller</code>ã€<code>@RestController</code>ã€<code>@RequestMapping</code> çš„ç±»å’Œæ–¹æ³•ï¼Œå¹¶å»ºç«‹æ˜ å°„è¡¨ï¼ˆHandlerMappingï¼‰ã€‚</p>
<hr>
<h2 id="2ï¸âƒ£-æ§åˆ¶å±‚æ ¸å¿ƒæ³¨è§£ï¼ˆController-ä½“ç³»ï¼‰"><a href="#2ï¸âƒ£-æ§åˆ¶å±‚æ ¸å¿ƒæ³¨è§£ï¼ˆController-ä½“ç³»ï¼‰" class="headerlink" title="2ï¸âƒ£ æ§åˆ¶å±‚æ ¸å¿ƒæ³¨è§£ï¼ˆController ä½“ç³»ï¼‰"></a>2ï¸âƒ£ æ§åˆ¶å±‚æ ¸å¿ƒæ³¨è§£ï¼ˆController ä½“ç³»ï¼‰</h2><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>@Controller</strong></td>
<td>å£°æ˜æ§åˆ¶å±‚ç»„ä»¶</td>
<td>è¿”å›è§†å›¾ï¼ˆå¦‚ JSPã€Thymeleafï¼‰</td>
</tr>
<tr>
<td><strong>@RestController</strong></td>
<td>&#x3D; @Controller + @ResponseBody</td>
<td>è¿”å› JSON æ•°æ®</td>
</tr>
<tr>
<td><strong>@RequestMapping</strong></td>
<td>å®šä¹‰è¯·æ±‚è·¯å¾„ã€æ–¹æ³•ã€å‚æ•°è§„åˆ™</td>
<td>å¯æ ‡æ³¨åœ¨ç±»æˆ–æ–¹æ³•ä¸Š</td>
</tr>
<tr>
<td><strong>@GetMapping &#x2F; @PostMapping &#x2F; @PutMapping &#x2F; @DeleteMapping</strong></td>
<td>@RequestMapping çš„å¿«æ·å½¢å¼</td>
<td>ä»…é™åˆ¶ HTTP Method</td>
</tr>
<tr>
<td><strong>@ResponseBody</strong></td>
<td>å°†è¿”å›å¯¹è±¡åºåˆ—åŒ–ä¸º JSON</td>
<td>ç”± HttpMessageConverter å®ç°</td>
</tr>
<tr>
<td><strong>@RequestBody</strong></td>
<td>å°†è¯·æ±‚ä½“ JSON ååºåˆ—åŒ–ä¸ºå¯¹è±¡</td>
<td>ç”± HttpMessageConverter å®ç°</td>
</tr>
</tbody></table>
<hr>
<h3 id="ğŸ’¡-å®æˆ˜ç¤ºä¾‹"><a href="#ğŸ’¡-å®æˆ˜ç¤ºä¾‹" class="headerlink" title="ğŸ’¡ å®æˆ˜ç¤ºä¾‹"></a>ğŸ’¡ å®æˆ˜ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userService.getUser(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">create</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        userService.save(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ”¹ <code>/user/&#123;id&#125;</code> â†’ <code>getUser()</code><br> ğŸ”¹ è¯·æ±‚ä½“ JSON â†’ é€šè¿‡ <code>@RequestBody</code> è‡ªåŠ¨æ˜ å°„åˆ° <code>User</code> å¯¹è±¡</p>
<hr>
<h2 id="3ï¸âƒ£-è¯·æ±‚æ˜ å°„æœºåˆ¶ï¼ˆHandlerMappingï¼‰"><a href="#3ï¸âƒ£-è¯·æ±‚æ˜ å°„æœºåˆ¶ï¼ˆHandlerMappingï¼‰" class="headerlink" title="3ï¸âƒ£ è¯·æ±‚æ˜ å°„æœºåˆ¶ï¼ˆHandlerMappingï¼‰"></a>3ï¸âƒ£ è¯·æ±‚æ˜ å°„æœºåˆ¶ï¼ˆHandlerMappingï¼‰</h2><p>Spring å¯åŠ¨æ—¶ä¼šæ³¨å†Œå¤šä¸ª HandlerMapping å®ç°ç±»ï¼Œå…¶ä¸­æœ€å…³é”®çš„æ˜¯ï¼š</p>
<ul>
<li><code>RequestMappingHandlerMapping</code></li>
</ul>
<p>å®ƒè´Ÿè´£æ‰«ææ‰€æœ‰ Controller ç±»çš„æ–¹æ³•å¹¶å»ºç«‹ URL æ˜ å°„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> RequestMappingHandlerMapping <span class="title function_">requestMappingHandlerMapping</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RequestMappingHandlerMapping</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åº•å±‚é€»è¾‘ï¼ˆæºç ç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Method method : controllerClass.getMethods()) &#123;</span><br><span class="line">    <span class="type">RequestMappingInfo</span> <span class="variable">info</span> <span class="operator">=</span> createRequestMappingInfo(method);</span><br><span class="line">    handlerMapping.registerMapping(info, controller, method);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ§  æ‰€ä»¥ï¼š</p>
<ul>
<li>ç±»ä¸Šçš„ <code>@RequestMapping(&quot;/user&quot;)</code></li>
<li>æ–¹æ³•ä¸Šçš„ <code>@GetMapping(&quot;/&#123;id&#125;&quot;)</code></li>
</ul>
<p>ä¼šæ‹¼æ¥æˆå®Œæ•´è·¯å¾„ <code>/user/&#123;id&#125;</code> æ³¨å†Œåˆ°æ˜ å°„è¡¨ä¸­ã€‚</p>
<hr>
<h2 id="4ï¸âƒ£-å‚æ•°ç»‘å®šæ³¨è§£ï¼ˆHandlerMethodArgumentResolverï¼‰"><a href="#4ï¸âƒ£-å‚æ•°ç»‘å®šæ³¨è§£ï¼ˆHandlerMethodArgumentResolverï¼‰" class="headerlink" title="4ï¸âƒ£ å‚æ•°ç»‘å®šæ³¨è§£ï¼ˆHandlerMethodArgumentResolverï¼‰"></a>4ï¸âƒ£ å‚æ•°ç»‘å®šæ³¨è§£ï¼ˆHandlerMethodArgumentResolverï¼‰</h2><p>SpringMVC çš„å‚æ•°è§£ææ˜¯ç”± <code>HandlerMethodArgumentResolver</code> å®ç°çš„ã€‚<br> å®ƒé€šè¿‡ä¸€ç³»åˆ—è§£æå™¨è§£ææ³¨è§£å‚æ•°ã€‚</p>
<table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>å¯¹åº”è§£æå™¨</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><strong>@RequestParam</strong></td>
<td><code>RequestParamMethodArgumentResolver</code></td>
<td>è§£æ URL æŸ¥è¯¢å‚æ•°</td>
</tr>
<tr>
<td><strong>@PathVariable</strong></td>
<td><code>PathVariableMethodArgumentResolver</code></td>
<td>è§£æè·¯å¾„å‚æ•°</td>
</tr>
<tr>
<td><strong>@RequestBody</strong></td>
<td><code>RequestResponseBodyMethodProcessor</code></td>
<td>JSON â†’ å¯¹è±¡</td>
</tr>
<tr>
<td><strong>@RequestHeader</strong></td>
<td><code>RequestHeaderMethodArgumentResolver</code></td>
<td>è·å–è¯·æ±‚å¤´</td>
</tr>
<tr>
<td><strong>@CookieValue</strong></td>
<td><code>CookieValueMethodArgumentResolver</code></td>
<td>è·å– Cookie å€¼</td>
</tr>
<tr>
<td><strong>@ModelAttribute</strong></td>
<td><code>ModelAttributeMethodProcessor</code></td>
<td>è¡¨å•å¯¹è±¡ç»‘å®š</td>
</tr>
<tr>
<td><strong>@SessionAttributes</strong></td>
<td><code>SessionAttributesHandler</code></td>
<td>ä¿ç•™ Session æ•°æ®</td>
</tr>
</tbody></table>
<hr>
<h3 id="ğŸ’¡-å‚æ•°ç»‘å®šç¤ºä¾‹"><a href="#ğŸ’¡-å‚æ•°ç»‘å®šç¤ºä¾‹" class="headerlink" title="ğŸ’¡ å‚æ•°ç»‘å®šç¤ºä¾‹"></a>ğŸ’¡ å‚æ•°ç»‘å®šç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/query&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">query</span><span class="params">(<span class="meta">@RequestParam</span> String name, <span class="meta">@RequestParam(defaultValue=&quot;1&quot;)</span> <span class="type">int</span> page)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">detail</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/save&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@ModelAttribute</span> User user)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> LoginDTO dto)</span> &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ§  åº•å±‚é€»è¾‘ï¼š</p>
<ul>
<li>SpringMVC è°ƒç”¨æ¯ä¸ª <code>HandlerMethodArgumentResolver</code>ï¼›</li>
<li>æ‰¾åˆ°èƒ½å¤„ç†å¯¹åº”æ³¨è§£çš„è§£æå™¨ï¼›</li>
<li>æŠŠè¯·æ±‚å†…å®¹è½¬æ¢æˆå‚æ•°ã€‚</li>
</ul>
<hr>
<h2 id="5ï¸âƒ£-å“åº”è¿”å›æ³¨è§£ï¼ˆHttpMessageConverterï¼‰"><a href="#5ï¸âƒ£-å“åº”è¿”å›æ³¨è§£ï¼ˆHttpMessageConverterï¼‰" class="headerlink" title="5ï¸âƒ£ å“åº”è¿”å›æ³¨è§£ï¼ˆHttpMessageConverterï¼‰"></a>5ï¸âƒ£ å“åº”è¿”å›æ³¨è§£ï¼ˆHttpMessageConverterï¼‰</h2><p>SpringMVC çš„è¿”å›å€¼ä¹Ÿé€šè¿‡ä¸€ç³»åˆ— <strong>HandlerMethodReturnValueHandler</strong> å¤„ç†ã€‚</p>
<table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>å¯¹åº”æœºåˆ¶</th>
</tr>
</thead>
<tbody><tr>
<td><strong>@ResponseBody</strong></td>
<td>è°ƒç”¨ <code>HttpMessageConverter</code> åºåˆ—åŒ–è¿”å›å¯¹è±¡ä¸º JSON</td>
</tr>
<tr>
<td><strong>@RestController</strong></td>
<td>ç›¸å½“äºå…¨ç±»çº§åˆ« <code>@ResponseBody</code></td>
</tr>
<tr>
<td><strong>@ResponseStatus(HttpStatus.XXX)</strong></td>
<td>è®¾ç½® HTTP çŠ¶æ€ç </td>
</tr>
<tr>
<td><strong>@ControllerAdvice + @ExceptionHandler</strong></td>
<td>å…¨å±€å¼‚å¸¸æ•è·å’Œç»Ÿä¸€å“åº”</td>
</tr>
</tbody></table>
<hr>
<h3 id="ğŸ’¡-JSON-è½¬æ¢è¿‡ç¨‹åŸç†"><a href="#ğŸ’¡-JSON-è½¬æ¢è¿‡ç¨‹åŸç†" class="headerlink" title="ğŸ’¡ JSON è½¬æ¢è¿‡ç¨‹åŸç†"></a>ğŸ’¡ JSON è½¬æ¢è¿‡ç¨‹åŸç†</h3><p>å½“æ–¹æ³•æ ‡æ³¨äº† <code>@ResponseBody</code>ï¼š</p>
<ol>
<li>SpringMVC ä½¿ç”¨ <code>RequestResponseBodyMethodProcessor</code> å¤„ç†ï¼›</li>
<li>è°ƒç”¨åˆé€‚çš„ <code>HttpMessageConverter</code>ï¼›</li>
<li>å¸¸è§å®ç°ï¼š<ul>
<li><code>MappingJackson2HttpMessageConverter</code> â†’ ä½¿ç”¨ Jackson è½¬ JSONï¼›</li>
<li><code>StringHttpMessageConverter</code> â†’ è¿”å›å­—ç¬¦ä¸²ã€‚</li>
</ul>
</li>
</ol>
<p>åè¿‡æ¥ï¼š</p>
<ul>
<li><code>@RequestBody</code> ä¹Ÿæ˜¯é€šè¿‡åŒæ ·çš„ <code>HttpMessageConverter</code> å°† JSON è½¬æˆ Java å¯¹è±¡ã€‚</li>
</ul>
<hr>
<h2 id="6ï¸âƒ£-å¼‚å¸¸å¤„ç†ä¸å…¨å±€æ§åˆ¶"><a href="#6ï¸âƒ£-å¼‚å¸¸å¤„ç†ä¸å…¨å±€æ§åˆ¶" class="headerlink" title="6ï¸âƒ£ å¼‚å¸¸å¤„ç†ä¸å…¨å±€æ§åˆ¶"></a>6ï¸âƒ£ å¼‚å¸¸å¤„ç†ä¸å…¨å±€æ§åˆ¶</h2><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><strong>@ExceptionHandler(Exception.class)</strong></td>
<td>æ•è·ç‰¹å®šå¼‚å¸¸</td>
</tr>
<tr>
<td><strong>@ControllerAdvice</strong></td>
<td>å…¨å±€å¼‚å¸¸&#x2F;æ•°æ®ç»‘å®šå¤„ç†</td>
</tr>
<tr>
<td><strong>@InitBinder</strong></td>
<td>æ•°æ®ç»‘å®šæ ¼å¼åŒ–ï¼ˆå¦‚æ—¶é—´ï¼‰</td>
</tr>
</tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">handle</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(<span class="number">500</span>).body(e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ§ -é¢è¯•è¿½é—®ç‚¹ä¸é«˜åˆ†ç­”æ³•"><a href="#ğŸ§ -é¢è¯•è¿½é—®ç‚¹ä¸é«˜åˆ†ç­”æ³•" class="headerlink" title="ğŸ§  é¢è¯•è¿½é—®ç‚¹ä¸é«˜åˆ†ç­”æ³•"></a>ğŸ§  é¢è¯•è¿½é—®ç‚¹ä¸é«˜åˆ†ç­”æ³•</h2><table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>æ·±åº¦ç­”æ³•</th>
</tr>
</thead>
<tbody><tr>
<td>SpringMVC å¦‚ä½•å°† JSON è½¬æ¢ä¸ºå¯¹è±¡ï¼Ÿ</td>
<td>é€šè¿‡ <code>@RequestBody</code> â†’ <code>RequestResponseBodyMethodProcessor</code> â†’ <code>HttpMessageConverter</code>ï¼ˆé»˜è®¤ Jacksonï¼‰ã€‚</td>
</tr>
<tr>
<td>@Controller ä¸ @RestController åŒºåˆ«ï¼Ÿ</td>
<td>@RestController &#x3D; @Controller + @ResponseBodyï¼Œç”¨äº RESTful API è¿”å› JSONã€‚</td>
</tr>
<tr>
<td>å‚æ•°ç»‘å®šæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</td>
<td>æ¯ä¸ªæ³¨è§£å¯¹åº”ä¸€ä¸ª <code>HandlerMethodArgumentResolver</code>ï¼Œé€ä¸ªåŒ¹é…æ‰§è¡Œã€‚</td>
</tr>
<tr>
<td>DispatcherServlet åšäº†ä»€ä¹ˆï¼Ÿ</td>
<td>å®ƒæ˜¯å‰ç«¯æ§åˆ¶å™¨ï¼Œè´Ÿè´£è¯·æ±‚åˆ†å‘ã€å‚æ•°è§£æã€è°ƒç”¨ Controllerã€è¿”å›è§†å›¾æˆ– JSONã€‚</td>
</tr>
<tr>
<td>@ControllerAdvice æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</td>
<td>ç»Ÿä¸€å¼‚å¸¸å¤„ç†ã€æ•°æ®ç»‘å®šã€å…¨å±€é…ç½®ã€‚</td>
</tr>
</tbody></table>
<hr>
<h1 id="ğŸ’¾-ä¸‰ã€MyBatis-å¸¸ç”¨æ³¨è§£-åº•å±‚æ˜ å°„åŸç†ï¼ˆMapper-åŠ¨æ€ä»£ç†æœºåˆ¶ï¼‰"><a href="#ğŸ’¾-ä¸‰ã€MyBatis-å¸¸ç”¨æ³¨è§£-åº•å±‚æ˜ å°„åŸç†ï¼ˆMapper-åŠ¨æ€ä»£ç†æœºåˆ¶ï¼‰" class="headerlink" title="ğŸ’¾ ä¸‰ã€MyBatis å¸¸ç”¨æ³¨è§£ + åº•å±‚æ˜ å°„åŸç†ï¼ˆMapper åŠ¨æ€ä»£ç†æœºåˆ¶ï¼‰"></a>ğŸ’¾ ä¸‰ã€MyBatis å¸¸ç”¨æ³¨è§£ + åº•å±‚æ˜ å°„åŸç†ï¼ˆMapper åŠ¨æ€ä»£ç†æœºåˆ¶ï¼‰</h1><p>MyBatis æ˜¯ Spring ä½“ç³»ä¸­è¿æ¥æ•°æ®åº“çš„æ ¸å¿ƒ ORM æ¡†æ¶ã€‚<br> ä¸ JPA ä¸åŒï¼Œå®ƒæ›´è½»é‡ã€å¯æ§ï¼Œå¸¸é€šè¿‡ <strong>æ¥å£ + æ³¨è§£ &#x2F; XML æ˜ å°„</strong> å®ç° SQL æ“ä½œã€‚</p>
<hr>
<h2 id="ä¸€ã€MyBatis-å¸¸ç”¨æ³¨è§£æ€»è§ˆ"><a href="#ä¸€ã€MyBatis-å¸¸ç”¨æ³¨è§£æ€»è§ˆ" class="headerlink" title="ä¸€ã€MyBatis å¸¸ç”¨æ³¨è§£æ€»è§ˆ"></a>ä¸€ã€MyBatis å¸¸ç”¨æ³¨è§£æ€»è§ˆ</h2><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>ä½¿ç”¨ä½ç½®</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>@Mapper</strong></td>
<td>æ ‡è®° Mapper æ¥å£</td>
<td>æ¥å£</td>
<td>å‘Šè¯‰ Spring è¿™æ˜¯ä¸€ä¸ª MyBatis Mapper</td>
</tr>
<tr>
<td><strong>@MapperScan</strong></td>
<td>æ‰¹é‡æ‰«æ Mapper åŒ…</td>
<td>å¯åŠ¨ç±»æˆ–é…ç½®ç±»</td>
<td>æ›¿ä»£é€ä¸ªå†™ @Mapper</td>
</tr>
<tr>
<td><strong>@Select &#x2F; @Insert &#x2F; @Update &#x2F; @Delete</strong></td>
<td>å£°æ˜ SQL è¯­å¥</td>
<td>æ–¹æ³•</td>
<td>æ³¨è§£å¼ SQL</td>
</tr>
<tr>
<td><strong>@Results &#x2F; @Result</strong></td>
<td>å­—æ®µä¸å±æ€§æ˜ å°„</td>
<td>æ–¹æ³•</td>
<td>è§£å†³æ•°æ®åº“å­—æ®µä¸å®ä½“å±æ€§ä¸ä¸€è‡´</td>
</tr>
<tr>
<td><strong>@Param</strong></td>
<td>æ˜ å°„æ–¹æ³•å‚æ•°å</td>
<td>æ–¹æ³•å‚æ•°</td>
<td>SQL ä¸­ä½¿ç”¨ #{å‚æ•°å}</td>
</tr>
<tr>
<td><strong>@Options</strong></td>
<td>è®¾ç½® SQL æ‰§è¡Œé€‰é¡¹</td>
<td>æ–¹æ³•</td>
<td>ä¾‹å¦‚è‡ªåŠ¨ä¸»é”®å›å¡«</td>
</tr>
<tr>
<td><strong>@SelectProvider &#x2F; @UpdateProvider â€¦</strong></td>
<td>åŠ¨æ€ SQL ç”Ÿæˆ</td>
<td>æ–¹æ³•</td>
<td>æŒ‡å®š SQL ç”±æŸç±»åŠ¨æ€ç”Ÿæˆ</td>
</tr>
</tbody></table>
<hr>
<h2 id="äºŒã€Mapper-æ³¨å†Œæœºåˆ¶ä¸åŠ¨æ€ä»£ç†åŸç†"><a href="#äºŒã€Mapper-æ³¨å†Œæœºåˆ¶ä¸åŠ¨æ€ä»£ç†åŸç†" class="headerlink" title="äºŒã€Mapper æ³¨å†Œæœºåˆ¶ä¸åŠ¨æ€ä»£ç†åŸç†"></a>äºŒã€Mapper æ³¨å†Œæœºåˆ¶ä¸åŠ¨æ€ä»£ç†åŸç†</h2><p>ğŸ§  é¢è¯•å¸¸é—®ï¼šâ€œ@Mapper æ˜¯å¦‚ä½•è®©æ¥å£ä¸å†™å®ç°ç±»è¿˜èƒ½æ‰§è¡Œ SQL çš„ï¼Ÿâ€</p>
<p>æ ¸å¿ƒç­”æ¡ˆï¼š<br> ğŸ‘‰ MyBatis ä½¿ç”¨ <strong>åŠ¨æ€ä»£ç†ï¼ˆMapperProxyï¼‰</strong> ä¸ºæ¥å£åˆ›å»ºå®ç°ç±»ã€‚</p>
<h3 id="ğŸ’¡-æ‰§è¡Œæµç¨‹ç¤ºæ„"><a href="#ğŸ’¡-æ‰§è¡Œæµç¨‹ç¤ºæ„" class="headerlink" title="ğŸ’¡ æ‰§è¡Œæµç¨‹ç¤ºæ„"></a>ğŸ’¡ æ‰§è¡Œæµç¨‹ç¤ºæ„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¥å£è°ƒç”¨ â†’ MapperProxy.invoke() â†’ SqlSession â†’ æ‰§è¡Œ SQL â†’ æ˜ å°„ç»“æœ â†’ è¿”å›å¯¹è±¡</span><br></pre></td></tr></table></figure>

<p>è¯¦ç»†æ­¥éª¤ï¼š</p>
<p>1ï¸âƒ£ Spring å¯åŠ¨æ—¶ï¼Œ<code>@MapperScan</code> æ‰«æåŒ…è·¯å¾„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.example.mapper&quot;)</span></span><br></pre></td></tr></table></figure>

<p>2ï¸âƒ£ Spring ä¼šä¸ºæ¯ä¸ªæ¥å£åˆ›å»º <strong>MapperFactoryBean</strong>ï¼Œäº¤ç»™ IOC å®¹å™¨ç®¡ç†ã€‚</p>
<p>3ï¸âƒ£ å½“æ³¨å…¥ Mapper æ—¶ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br></pre></td></tr></table></figure>

<p>å…¶å®æ³¨å…¥çš„æ˜¯ä¸€ä¸ªç”± MyBatis åˆ›å»ºçš„ä»£ç†å¯¹è±¡ã€‚</p>
<p>4ï¸âƒ£ ä»£ç†å¯¹è±¡çš„æ ¸å¿ƒç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapperProxy</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> &#123;</span><br><span class="line">        <span class="type">MapperMethod</span> <span class="variable">mapperMethod</span> <span class="operator">=</span> cachedMapperMethod(method);</span><br><span class="line">        <span class="keyword">return</span> mapperMethod.execute(sqlSession, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ï¸âƒ£ æœ€ç»ˆæ‰§è¡Œ SQLï¼š</p>
<ul>
<li>ä»æ³¨è§£æˆ– XML è¯»å– SQLï¼›</li>
<li>æ›¿æ¢å‚æ•°ï¼›</li>
<li>æ‰§è¡Œ JDBCï¼›</li>
<li>ä½¿ç”¨ <code>ResultSetHandler</code> å°†ç»“æœæ˜ å°„æˆå¯¹è±¡ã€‚</li>
</ul>
<hr>
<h2 id="ä¸‰ã€æ³¨è§£å¼-SQL-ç¤ºä¾‹"><a href="#ä¸‰ã€æ³¨è§£å¼-SQL-ç¤ºä¾‹" class="headerlink" title="ä¸‰ã€æ³¨è§£å¼ SQL ç¤ºä¾‹"></a>ä¸‰ã€æ³¨è§£å¼ SQL ç¤ºä¾‹</h2><h3 id="1ï¸âƒ£-åŸºæœ¬-CRUD-æ³¨è§£"><a href="#1ï¸âƒ£-åŸºæœ¬-CRUD-æ³¨è§£" class="headerlink" title="1ï¸âƒ£ åŸºæœ¬ CRUD æ³¨è§£"></a>1ï¸âƒ£ åŸºæœ¬ CRUD æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;SELECT * FROM user WHERE id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;INSERT INTO user(name, age) VALUES(#&#123;name&#125;, #&#123;age&#125;)&quot;)</span></span><br><span class="line">    <span class="meta">@Options(useGeneratedKeys = true, keyProperty = &quot;id&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;UPDATE user SET name=#&#123;name&#125;, age=#&#123;age&#125; WHERE id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;DELETE FROM user WHERE id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ§© <strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>#&#123;&#125;</code> ä¼šè¢« MyBatis è§£æä¸º <code>?</code> å ä½ç¬¦ï¼›</li>
<li><code>@Options(useGeneratedKeys=true)</code> å¯è‡ªåŠ¨å›å¡«ä¸»é”®ï¼›</li>
<li><code>@Param</code> æ˜¾å¼æŒ‡å®šå‚æ•°åï¼Œé˜²æ­¢å‚æ•°æ··ä¹±ã€‚</li>
</ul>
<hr>
<h3 id="2ï¸âƒ£-ç»“æœæ˜ å°„æ³¨è§£ï¼ˆè§£å†³å­—æ®µåä¸åŒ¹é…ï¼‰"><a href="#2ï¸âƒ£-ç»“æœæ˜ å°„æ³¨è§£ï¼ˆè§£å†³å­—æ®µåä¸åŒ¹é…ï¼‰" class="headerlink" title="2ï¸âƒ£ ç»“æœæ˜ å°„æ³¨è§£ï¼ˆè§£å†³å­—æ®µåä¸åŒ¹é…ï¼‰"></a>2ï¸âƒ£ ç»“æœæ˜ å°„æ³¨è§£ï¼ˆè§£å†³å­—æ®µåä¸åŒ¹é…ï¼‰</h3><p>æ•°æ®åº“å­—æ®µ â†’ Java å±æ€§ä¸ä¸€è‡´æ—¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;SELECT user_id, user_name FROM user WHERE user_id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">    @Result(column=&quot;user_id&quot;, property=&quot;id&quot;),</span></span><br><span class="line"><span class="meta">    @Result(column=&quot;user_name&quot;, property=&quot;name&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line">User <span class="title function_">getUser</span><span class="params">(Long id)</span>;</span><br></pre></td></tr></table></figure>

<p>åº•å±‚ä½¿ç”¨ <code>ResultSetHandler</code> å°†åˆ—å€¼ä¸å±æ€§å¯¹åº”ã€‚</p>
<hr>
<h3 id="3ï¸âƒ£-åŠ¨æ€-SQL-æ³¨è§£"><a href="#3ï¸âƒ£-åŠ¨æ€-SQL-æ³¨è§£" class="headerlink" title="3ï¸âƒ£ åŠ¨æ€ SQL æ³¨è§£"></a>3ï¸âƒ£ åŠ¨æ€ SQL æ³¨è§£</h3><p>ç”¨äºå¤æ‚ SQLï¼ˆå¯æ¡ä»¶æ‹¼æ¥ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SelectProvider(type = UserSqlProvider.class, method = &quot;buildSelect&quot;)</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">selectByCondition</span><span class="params">(User user)</span>;</span><br></pre></td></tr></table></figure>

<p>SQL åŠ¨æ€ç”Ÿæˆç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserSqlProvider</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">buildSelect</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;SELECT * FROM user WHERE 1=1&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (user.getName() != <span class="literal">null</span>) sql.append(<span class="string">&quot; AND name = #&#123;name&#125;&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (user.getAge() != <span class="literal">null</span>) sql.append(<span class="string">&quot; AND age = #&#123;age&#125;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> sql.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å››ã€-Mapper-ä¸-MapperScan-çš„å…³ç³»"><a href="#å››ã€-Mapper-ä¸-MapperScan-çš„å…³ç³»" class="headerlink" title="å››ã€@Mapper ä¸ @MapperScan çš„å…³ç³»"></a>å››ã€@Mapper ä¸ @MapperScan çš„å…³ç³»</h2><table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>ç”¨æ³•</th>
</tr>
</thead>
<tbody><tr>
<td>å°‘é‡ Mapper</td>
<td>æ¯ä¸ªæ¥å£åŠ  @Mapper</td>
</tr>
<tr>
<td>å¤šä¸ª Mapper</td>
<td>åœ¨é…ç½®ç±»åŠ  @MapperScan(â€œcom.example.mapperâ€)</td>
</tr>
</tbody></table>
<p>ğŸ“¦ Spring Boot ä¸­é€šå¸¸åªéœ€ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.example.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="äº”ã€åº•å±‚å…³é”®ç»„ä»¶è§£æï¼ˆæºç è§’åº¦ï¼‰"><a href="#äº”ã€åº•å±‚å…³é”®ç»„ä»¶è§£æï¼ˆæºç è§’åº¦ï¼‰" class="headerlink" title="äº”ã€åº•å±‚å…³é”®ç»„ä»¶è§£æï¼ˆæºç è§’åº¦ï¼‰"></a>äº”ã€åº•å±‚å…³é”®ç»„ä»¶è§£æï¼ˆæºç è§’åº¦ï¼‰</h2><table>
<thead>
<tr>
<th>ç»„ä»¶</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><strong>SqlSessionFactoryBean</strong></td>
<td>ç”Ÿæˆ SqlSession å·¥å‚</td>
</tr>
<tr>
<td><strong>MapperFactoryBean</strong></td>
<td>æ¯ä¸ª Mapper çš„ä»£ç†å·¥å‚</td>
</tr>
<tr>
<td><strong>MapperProxy</strong></td>
<td>åŠ¨æ€ä»£ç†æ ¸å¿ƒ</td>
</tr>
<tr>
<td><strong>Executor</strong></td>
<td>æ‰§è¡Œ SQL çš„åº•å±‚æ‰§è¡Œå™¨</td>
</tr>
<tr>
<td><strong>ResultSetHandler</strong></td>
<td>ç»“æœé›†æ˜ å°„</td>
</tr>
<tr>
<td><strong>StatementHandler</strong></td>
<td>è´Ÿè´£é¢„ç¼–è¯‘å’Œæ‰§è¡Œ SQL</td>
</tr>
</tbody></table>
<p>ğŸ§© æ‰§è¡Œé“¾ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MapperProxy.invoke()</span><br><span class="line">    â†“</span><br><span class="line">MapperMethod.execute()</span><br><span class="line">    â†“</span><br><span class="line">SqlSession.select / insert / update</span><br><span class="line">    â†“</span><br><span class="line">Executor.query()</span><br><span class="line">    â†“</span><br><span class="line">StatementHandler.prepare()</span><br><span class="line">    â†“</span><br><span class="line">ResultSetHandler.handleResultSets()</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å…­ã€MyBatis-Spring-çš„æ•´åˆæœºåˆ¶"><a href="#å…­ã€MyBatis-Spring-çš„æ•´åˆæœºåˆ¶" class="headerlink" title="å…­ã€MyBatis + Spring çš„æ•´åˆæœºåˆ¶"></a>å…­ã€MyBatis + Spring çš„æ•´åˆæœºåˆ¶</h2><p>Spring Boot æ•´åˆæ—¶ï¼Œæ ¸å¿ƒæ˜¯ï¼š</p>
<ul>
<li><code>MyBatisAutoConfiguration</code></li>
<li>è‡ªåŠ¨æ³¨å†Œ <code>SqlSessionFactory</code> å’Œ <code>MapperScannerConfigurer</code></li>
<li>è‡ªåŠ¨æ‰«æå¸¦ @Mapper çš„æ¥å£</li>
</ul>
<p>é…ç½®ç®€åŒ–åˆ°åªéœ€ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.url=...</span><br><span class="line">mybatis.mapper-locations=classpath:mappers<span class="comment">/*.xml</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ä¸ƒã€é¢è¯•è¿½é—®ç‚¹ï¼ˆé«˜åˆ†å›ç­”ï¼‰"><a href="#ä¸ƒã€é¢è¯•è¿½é—®ç‚¹ï¼ˆé«˜åˆ†å›ç­”ï¼‰" class="headerlink" title="ä¸ƒã€é¢è¯•è¿½é—®ç‚¹ï¼ˆé«˜åˆ†å›ç­”ï¼‰"></a>ä¸ƒã€é¢è¯•è¿½é—®ç‚¹ï¼ˆé«˜åˆ†å›ç­”ï¼‰</h2><table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>æ·±åº¦ç­”æ³•</th>
</tr>
</thead>
<tbody><tr>
<td>@Mapper ä¸ @MapperScan åŒºåˆ«ï¼Ÿ</td>
<td>@Mapper ä½œç”¨äºæ¥å£ï¼›@MapperScan ä½œç”¨äºåŒ…ï¼›åº•å±‚éƒ½æ³¨å†Œ MapperFactoryBeanã€‚</td>
</tr>
<tr>
<td>MyBatis æ˜¯å¦‚ä½•æ‰§è¡Œ SQL çš„ï¼Ÿ</td>
<td>MapperProxy æ‹¦æˆªæ–¹æ³• â†’ SqlSession â†’ Executor â†’ StatementHandler â†’ JDBC æ‰§è¡Œã€‚</td>
</tr>
<tr>
<td>æ³¨è§£ä¸ XML æ˜ å°„çš„åŒºåˆ«ï¼Ÿ</td>
<td>æ³¨è§£è½»é‡ã€ä¾¿äºç»´æŠ¤å° SQLï¼›XML æ›´çµæ´»ï¼Œæ”¯æŒåŠ¨æ€æ ‡ç­¾ã€æ¡ä»¶åˆ¤æ–­ã€‚</td>
</tr>
<tr>
<td>MyBatis å¦‚ä½•å®ç°å‚æ•°å’Œç»“æœæ˜ å°„ï¼Ÿ</td>
<td>å‚æ•°ï¼šé€šè¿‡ ParameterHandler æ›¿æ¢å ä½ç¬¦ï¼›ç»“æœï¼šResultSetHandler æ ¹æ® ResultMap æ˜ å°„ã€‚</td>
</tr>
<tr>
<td>@SelectProvider æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</td>
<td>ç”¨äºåŠ¨æ€ç”Ÿæˆ SQLï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢é€»è¾‘ã€‚</td>
</tr>
</tbody></table>
<h1 id="ğŸŒ¸-å››ã€Spring-Boot-å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆè‡ªåŠ¨è£…é…-æ¡ä»¶åŠ è½½ï¼‰"><a href="#ğŸŒ¸-å››ã€Spring-Boot-å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆè‡ªåŠ¨è£…é…-æ¡ä»¶åŠ è½½ï¼‰" class="headerlink" title="ğŸŒ¸ å››ã€Spring Boot å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆè‡ªåŠ¨è£…é… + æ¡ä»¶åŠ è½½ï¼‰"></a>ğŸŒ¸ å››ã€Spring Boot å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆè‡ªåŠ¨è£…é… + æ¡ä»¶åŠ è½½ï¼‰</h1><p>è¿™ä¸€éƒ¨åˆ†æ˜¯é¢è¯•é«˜é¢‘ + å®æˆ˜å¿…æ‡‚çš„æ ¸å¿ƒã€‚<br> é‡ç‚¹æ˜¯ç†è§£ <strong>Spring Boot ä¸ºä»€ä¹ˆèƒ½â€œè‡ªåŠ¨è£…é…â€</strong>ï¼Œä»¥åŠè¿™äº›æ³¨è§£åœ¨åº•å±‚æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p>
<hr>
<h2 id="ä¸€ã€Spring-Boot-æ ¸å¿ƒæ³¨è§£å…¨å›¾"><a href="#ä¸€ã€Spring-Boot-æ ¸å¿ƒæ³¨è§£å…¨å›¾" class="headerlink" title="ä¸€ã€Spring Boot æ ¸å¿ƒæ³¨è§£å…¨å›¾"></a>ä¸€ã€Spring Boot æ ¸å¿ƒæ³¨è§£å…¨å›¾</h2><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>æ ¸å¿ƒåŸç†</th>
</tr>
</thead>
<tbody><tr>
<td><code>@SpringBootApplication</code></td>
<td>æ ¸å¿ƒå…¥å£æ³¨è§£ï¼ˆæ•´åˆ 3 ä¸ªæ³¨è§£ï¼‰</td>
<td>å¯åŠ¨è‡ªåŠ¨é…ç½®ä¸ç»„ä»¶æ‰«æ</td>
</tr>
<tr>
<td><code>@SpringBootConfiguration</code></td>
<td>æ ‡è¯†é…ç½®ç±»</td>
<td>ç»§æ‰¿è‡ª <code>@Configuration</code></td>
</tr>
<tr>
<td><code>@EnableAutoConfiguration</code></td>
<td>è‡ªåŠ¨è£…é…æ ¸å¿ƒ</td>
<td>ä» <code>META-INF/spring.factories</code> åŠ è½½é…ç½®ç±»</td>
</tr>
<tr>
<td><code>@ComponentScan</code></td>
<td>åŒ…æ‰«æ</td>
<td>æ‰«æé¡¹ç›®åŒ…è·¯å¾„ä¸‹çš„ç»„ä»¶</td>
</tr>
<tr>
<td><code>@ConfigurationProperties</code></td>
<td>ç»‘å®šé…ç½®æ–‡ä»¶å±æ€§</td>
<td>ä» <code>application.yml</code> ç»‘å®šå±æ€§åˆ° Bean</td>
</tr>
<tr>
<td><code>@Conditional</code> ç³»åˆ—</td>
<td>æ¡ä»¶è£…é…</td>
<td>æ§åˆ¶ Bean æ˜¯å¦åŠ è½½</td>
</tr>
<tr>
<td><code>@Import</code></td>
<td>å¯¼å…¥é…ç½®ç±»</td>
<td>æ”¯æŒå¤šç§å¯¼å…¥æ–¹å¼ï¼ˆç±»ã€Selectorã€Registrarï¼‰</td>
</tr>
<tr>
<td><code>@Value</code></td>
<td>æ³¨å…¥å•ä¸ªé…ç½®å€¼</td>
<td>è¯»å– Environment ä¸­çš„é…ç½®</td>
</tr>
<tr>
<td><code>@RestController</code></td>
<td>&#x3D; <code>@Controller</code> + <code>@ResponseBody</code></td>
<td>å¿«é€Ÿåˆ›å»º REST API</td>
</tr>
<tr>
<td><code>@SpringBootTest</code></td>
<td>æµ‹è¯•å¯åŠ¨</td>
<td>å¯åŠ¨å®Œæ•´ SpringBoot ç¯å¢ƒè¿›è¡Œå•å…ƒæµ‹è¯•</td>
</tr>
</tbody></table>
<hr>
<h2 id="äºŒã€æ ¸å¿ƒæ³¨è§£å‰–æ"><a href="#äºŒã€æ ¸å¿ƒæ³¨è§£å‰–æ" class="headerlink" title="äºŒã€æ ¸å¿ƒæ³¨è§£å‰–æ"></a>äºŒã€æ ¸å¿ƒæ³¨è§£å‰–æ</h2><h3 id="âš™ï¸-1ï¸âƒ£-SpringBootApplicationï¼ˆå…¥å£æ³¨è§£ï¼‰"><a href="#âš™ï¸-1ï¸âƒ£-SpringBootApplicationï¼ˆå…¥å£æ³¨è§£ï¼‰" class="headerlink" title="âš™ï¸ 1ï¸âƒ£ @SpringBootApplicationï¼ˆå…¥å£æ³¨è§£ï¼‰"></a>âš™ï¸ 1ï¸âƒ£ @SpringBootApplicationï¼ˆå…¥å£æ³¨è§£ï¼‰</h3><p>è¿™æ˜¯ Spring Boot åº”ç”¨çš„å…¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoApp</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DemoApp.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç»„æˆç»“æ„"><a href="#ç»„æˆç»“æ„" class="headerlink" title="ç»„æˆç»“æ„"></a>ç»„æˆç»“æ„</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootApplication &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‰ æ‰€ä»¥å®ƒæœ¬è´¨ä¸Šæ˜¯ï¼š</p>
<ol>
<li>å£°æ˜ä¸€ä¸ªé…ç½®ç±»</li>
<li>å¯åŠ¨è‡ªåŠ¨è£…é…</li>
<li>å¼€å¯ç»„ä»¶æ‰«æ</li>
</ol>
<hr>
<h3 id="âš™ï¸-2ï¸âƒ£-EnableAutoConfigurationï¼ˆè‡ªåŠ¨è£…é…æ ¸å¿ƒï¼‰"><a href="#âš™ï¸-2ï¸âƒ£-EnableAutoConfigurationï¼ˆè‡ªåŠ¨è£…é…æ ¸å¿ƒï¼‰" class="headerlink" title="âš™ï¸ 2ï¸âƒ£ @EnableAutoConfigurationï¼ˆè‡ªåŠ¨è£…é…æ ¸å¿ƒï¼‰"></a>âš™ï¸ 2ï¸âƒ£ @EnableAutoConfigurationï¼ˆè‡ªåŠ¨è£…é…æ ¸å¿ƒï¼‰</h3><blockquote>
<p>è¿™æ˜¯ Spring Boot æœ€é‡è¦çš„æ³¨è§£ï¼</p>
</blockquote>
<p>åº•å±‚é€»è¾‘ï¼š</p>
<ol>
<li>é€šè¿‡ <code>SpringFactoriesLoader</code> è¯»å–æ‰€æœ‰ <code>META-INF/spring.factories</code> æ–‡ä»¶ï¼›</li>
<li>æ‰¾åˆ° key ä¸º <code>org.springframework.boot.autoconfigure.EnableAutoConfiguration</code> çš„ç±»ï¼›</li>
<li>æŠŠè¿™äº›ç±»åŠ è½½è¿›å®¹å™¨ï¼›</li>
<li>æ ¹æ® <code>@Conditional</code> ç³»åˆ—åˆ¤æ–­æ˜¯å¦ç”Ÿæ•ˆã€‚</li>
</ol>
<p>è¿™äº›ç±»é€šå¸¸æ˜¯ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DataSourceAutoConfiguration</span><br><span class="line">WebMvcAutoConfiguration</span><br><span class="line">RedisAutoConfiguration</span><br><span class="line">SecurityAutoConfiguration</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>è¿™äº›å°±æ˜¯æ‰€è°“çš„â€œè‡ªåŠ¨è£…é…ç±»â€ã€‚</p>
<hr>
<h4 id="ğŸ”-è‡ªåŠ¨è£…é…æ ¸å¿ƒæºç é€»è¾‘"><a href="#ğŸ”-è‡ªåŠ¨è£…é…æ ¸å¿ƒæºç é€»è¾‘" class="headerlink" title="ğŸ” è‡ªåŠ¨è£…é…æ ¸å¿ƒæºç é€»è¾‘"></a>ğŸ” è‡ªåŠ¨è£…é…æ ¸å¿ƒæºç é€»è¾‘</h4><p>åœ¨ <code>AutoConfigurationImportSelector</code> ç±»ä¸­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(</span><br><span class="line">        EnableAutoConfiguration.class, classLoader);</span><br></pre></td></tr></table></figure>

<p>æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»éƒ½åƒè¿™æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(DataSource.class)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(DataSourceProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataSourceAutoConfiguration</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ï¼š<br> âœ… <strong>æœ‰ DataSource ç±»å­˜åœ¨æ—¶æ‰åŠ è½½</strong><br> âœ… <strong>ä¼šè‡ªåŠ¨ä» application.yml ç»‘å®šå±æ€§</strong></p>
<hr>
<h3 id="âš™ï¸-3ï¸âƒ£-æ¡ä»¶è£…é…æ³¨è§£ï¼ˆConditional-ç³»åˆ—ï¼‰"><a href="#âš™ï¸-3ï¸âƒ£-æ¡ä»¶è£…é…æ³¨è§£ï¼ˆConditional-ç³»åˆ—ï¼‰" class="headerlink" title="âš™ï¸ 3ï¸âƒ£ æ¡ä»¶è£…é…æ³¨è§£ï¼ˆConditional ç³»åˆ—ï¼‰"></a>âš™ï¸ 3ï¸âƒ£ æ¡ä»¶è£…é…æ³¨è§£ï¼ˆConditional ç³»åˆ—ï¼‰</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td><code>@ConditionalOnClass</code></td>
<td>ç±»å­˜åœ¨æ—¶åŠ è½½</td>
</tr>
<tr>
<td><code>@ConditionalOnMissingBean</code></td>
<td>Bean ä¸å­˜åœ¨æ—¶åŠ è½½</td>
</tr>
<tr>
<td><code>@ConditionalOnProperty</code></td>
<td>æŒ‡å®šé…ç½®é¡¹æ»¡è¶³æ¡ä»¶æ—¶åŠ è½½</td>
</tr>
<tr>
<td><code>@ConditionalOnMissingClass</code></td>
<td>ç±»ä¸å­˜åœ¨æ—¶åŠ è½½</td>
</tr>
<tr>
<td><code>@ConditionalOnWebApplication</code></td>
<td>å½“å‰ä¸º Web ç¯å¢ƒæ—¶åŠ è½½</td>
</tr>
<tr>
<td><code>@ConditionalOnExpression</code></td>
<td>æ»¡è¶³ SpEL è¡¨è¾¾å¼æ—¶åŠ è½½</td>
</tr>
</tbody></table>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(name = &quot;app.feature.enabled&quot;, havingValue = &quot;true&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FeatureConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> FeatureService <span class="title function_">featureService</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FeatureService</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‰ åªæœ‰å½“é…ç½®æ–‡ä»¶é‡Œæœ‰ <code>app.feature.enabled=true</code> æ—¶æ‰åŠ è½½ã€‚</p>
<hr>
<h3 id="âš™ï¸-4ï¸âƒ£-ConfigurationPropertiesï¼ˆé…ç½®ç»‘å®šï¼‰"><a href="#âš™ï¸-4ï¸âƒ£-ConfigurationPropertiesï¼ˆé…ç½®ç»‘å®šï¼‰" class="headerlink" title="âš™ï¸ 4ï¸âƒ£ @ConfigurationPropertiesï¼ˆé…ç½®ç»‘å®šï¼‰"></a>âš™ï¸ 4ï¸âƒ£ @ConfigurationPropertiesï¼ˆé…ç½®ç»‘å®šï¼‰</h3><p>è‡ªåŠ¨ç»‘å®šé…ç½®æ–‡ä»¶ä¸­çš„å±æ€§ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line">  <span class="attr">address:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line"><span class="string">@Component</span></span><br><span class="line"><span class="string">@ConfigurationProperties(prefix</span> <span class="string">=</span> <span class="string">&quot;server&quot;</span><span class="string">)</span></span><br><span class="line"><span class="string">public</span> <span class="string">class</span> <span class="string">ServerConfig</span> &#123;</span><br><span class="line">    <span class="string">private</span> <span class="string">int</span> <span class="string">port;</span></span><br><span class="line">    <span class="string">private</span> <span class="string">String</span> <span class="string">address;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åº•å±‚æœºåˆ¶ï¼š</p>
<ul>
<li>é€šè¿‡ <code>Binder</code> ç»‘å®š Environment ä¸­çš„å±æ€§ï¼›</li>
<li>åˆ©ç”¨ <code>RelaxedDataBinder</code> æ”¯æŒæ¾æ•£åŒ¹é…ï¼›</li>
<li>å¯ä»¥ç”¨ <code>@EnableConfigurationProperties</code> æ˜¾å¼å¯ç”¨ã€‚</li>
</ul>
<hr>
<h3 id="âš™ï¸-5ï¸âƒ£-Importï¼ˆæ‰‹åŠ¨æ‰©å±•è£…é…ï¼‰"><a href="#âš™ï¸-5ï¸âƒ£-Importï¼ˆæ‰‹åŠ¨æ‰©å±•è£…é…ï¼‰" class="headerlink" title="âš™ï¸ 5ï¸âƒ£ @Importï¼ˆæ‰‹åŠ¨æ‰©å±•è£…é…ï¼‰"></a>âš™ï¸ 5ï¸âƒ£ @Importï¼ˆæ‰‹åŠ¨æ‰©å±•è£…é…ï¼‰</h3><p>å››ç§å¯¼å…¥æ–¹å¼ï¼š</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>ç¤ºä¾‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>å¯¼å…¥ç±»</td>
<td><code>@Import(MyConfig.class)</code></td>
<td>å¯¼å…¥é…ç½®ç±»</td>
</tr>
<tr>
<td>å¯¼å…¥ ImportSelector</td>
<td><code>@Import(MyImportSelector.class)</code></td>
<td>æ‰¹é‡å¯¼å…¥é…ç½®ç±»</td>
</tr>
<tr>
<td>å¯¼å…¥ ImportBeanDefinitionRegistrar</td>
<td><code>@Import(MyRegistrar.class)</code></td>
<td>åŠ¨æ€æ³¨å†Œ Bean</td>
</tr>
<tr>
<td>å¯¼å…¥æ™®é€š Bean</td>
<td><code>@Import(&#123;A.class, B.class&#125;)</code></td>
<td>å¤šç±»å¯¼å…¥</td>
</tr>
</tbody></table>
<p>é¢è¯•å¸¸é—®ï¼š</p>
<blockquote>
<p>â€œSpring Boot è‡ªåŠ¨è£…é…ç”¨çš„æ˜¯å“ªç§æ–¹å¼ï¼Ÿâ€<br> ç­”ï¼š<strong>ImportSelectorï¼ˆAutoConfigurationImportSelectorï¼‰</strong></p>
</blockquote>
<hr>
<h2 id="ä¸‰ã€Spring-Boot-å¯åŠ¨æµç¨‹ï¼ˆé‡ç‚¹ï¼‰"><a href="#ä¸‰ã€Spring-Boot-å¯åŠ¨æµç¨‹ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="ä¸‰ã€Spring Boot å¯åŠ¨æµç¨‹ï¼ˆé‡ç‚¹ï¼‰"></a>ä¸‰ã€Spring Boot å¯åŠ¨æµç¨‹ï¼ˆé‡ç‚¹ï¼‰</h2><p>å½“ä½ æ‰§è¡Œ <code>SpringApplication.run()</code> æ—¶ï¼Œå®é™…å‘ç”Ÿäº†ï¼š</p>
<p>1ï¸âƒ£ åˆ›å»º <code>SpringApplication</code> å®ä¾‹<br> 2ï¸âƒ£ æ¨æ–­åº”ç”¨ç±»å‹ï¼ˆWeb&#x2F;Reactive&#x2F;Noneï¼‰<br> 3ï¸âƒ£ åŠ è½½ ApplicationContext<br> 4ï¸âƒ£ æ‰«æä¸»ç±»æ‰€åœ¨åŒ…<br> 5ï¸âƒ£ åŠ è½½è‡ªåŠ¨é…ç½®ç±»ï¼ˆEnableAutoConfigurationï¼‰<br> 6ï¸âƒ£ å®ä¾‹åŒ– Bean + ä¾èµ–æ³¨å…¥<br> 7ï¸âƒ£ å¯åŠ¨å†…åµŒæœåŠ¡å™¨ï¼ˆTomcat&#x2F;Jetty&#x2F;Undertowï¼‰</p>
<hr>
<h2 id="å››ã€é¢è¯•æ·±é—®ç‚¹ï¼ˆé«˜åˆ†ç­”æ³•ï¼‰"><a href="#å››ã€é¢è¯•æ·±é—®ç‚¹ï¼ˆé«˜åˆ†ç­”æ³•ï¼‰" class="headerlink" title="å››ã€é¢è¯•æ·±é—®ç‚¹ï¼ˆé«˜åˆ†ç­”æ³•ï¼‰"></a>å››ã€é¢è¯•æ·±é—®ç‚¹ï¼ˆé«˜åˆ†ç­”æ³•ï¼‰</h2><table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>é«˜åˆ†ç­”æ³•</th>
</tr>
</thead>
<tbody><tr>
<td>Spring Boot ä¸ºä»€ä¹ˆèƒ½è‡ªåŠ¨è£…é…ï¼Ÿ</td>
<td>å› ä¸º @EnableAutoConfiguration é€šè¿‡ SpringFactoriesLoader ä» META-INF&#x2F;spring.factories åŠ è½½è‡ªåŠ¨é…ç½®ç±»ï¼Œå¹¶ç»“åˆ @Conditional ç³»åˆ—æŒ‰æ¡ä»¶æ³¨å†Œ Beanã€‚</td>
</tr>
<tr>
<td>@SpringBootApplication é‡Œé¢åŒ…å«äº†ä»€ä¹ˆï¼Ÿ</td>
<td>å®ƒæ•´åˆäº† @Configurationã€@EnableAutoConfigurationã€@ComponentScanã€‚</td>
</tr>
<tr>
<td>@ConfigurationProperties å’Œ @Value åŒºåˆ«ï¼Ÿ</td>
<td>å‰è€…ç”¨äºæ‰¹é‡å±æ€§ç»‘å®šï¼ˆå¯¹è±¡æ˜ å°„ï¼‰ï¼Œåè€…ç”¨äºå•å€¼æ³¨å…¥ã€‚</td>
</tr>
<tr>
<td>Spring Boot å¯åŠ¨æµç¨‹ï¼Ÿ</td>
<td>run â†’ åˆ›å»º ApplicationContext â†’ æ‰«æç»„ä»¶ â†’ è‡ªåŠ¨è£…é… â†’ å¯åŠ¨å®¹å™¨ï¼ˆTomcatï¼‰ã€‚</td>
</tr>
<tr>
<td>è‡ªåŠ¨è£…é…å¤±æ•ˆçš„åŸå› æœ‰å“ªäº›ï¼Ÿ</td>
<td>ç±»ç¼ºå¤±ã€æ¡ä»¶ä¸æ»¡è¶³ï¼ˆ@Conditionalï¼‰ã€é…ç½®å…³é—­ï¼ˆspring.autoconfigure.excludeï¼‰ã€‚</td>
</tr>
</tbody></table>
<h1 id="ğŸ›¡ï¸-äº”ã€Spring-Security-å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆè®¤è¯ä¸æˆæƒï¼‰"><a href="#ğŸ›¡ï¸-äº”ã€Spring-Security-å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆè®¤è¯ä¸æˆæƒï¼‰" class="headerlink" title="ğŸ›¡ï¸ äº”ã€Spring Security å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆè®¤è¯ä¸æˆæƒï¼‰"></a>ğŸ›¡ï¸ äº”ã€Spring Security å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆè®¤è¯ä¸æˆæƒï¼‰</h1><p>Spring Security æ˜¯ä¼ä¸šçº§å®‰å…¨æ¡†æ¶ï¼Œæ ¸å¿ƒåœ¨äº <strong>è®¤è¯ï¼ˆAuthenticationï¼‰</strong> å’Œ <strong>æˆæƒï¼ˆAuthorizationï¼‰</strong>ã€‚<br> æ³¨è§£åªæ˜¯æš´éœ²ç»™å¼€å‘è€…çš„å¿«æ·å…¥å£ï¼Œåº•å±‚ä¾é  <strong>è¿‡æ»¤å™¨é“¾ + è®¿é—®å†³ç­–ç®¡ç†å™¨</strong> å®ç°å®‰å…¨æ§åˆ¶ã€‚</p>
<hr>
<h2 id="ä¸€ã€æ ¸å¿ƒæ³¨è§£æ€»è§ˆ"><a href="#ä¸€ã€æ ¸å¿ƒæ³¨è§£æ€»è§ˆ" class="headerlink" title="ä¸€ã€æ ¸å¿ƒæ³¨è§£æ€»è§ˆ"></a>ä¸€ã€æ ¸å¿ƒæ³¨è§£æ€»è§ˆ</h2><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>ä½¿ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><strong>@EnableWebSecurity</strong></td>
<td>å¯ç”¨ Spring Security</td>
<td>é…ç½®ç±»ä¸Š</td>
</tr>
<tr>
<td><strong>@Configuration</strong></td>
<td>é…ç½®ç±»</td>
<td>é…åˆ@EnableWebSecurity</td>
</tr>
<tr>
<td><strong>@Secured</strong></td>
<td>æ–¹æ³•çº§æƒé™</td>
<td>é™åˆ¶è§’è‰²è®¿é—®ï¼Œè€ç‰ˆæœ¬</td>
</tr>
<tr>
<td><strong>@PreAuthorize</strong></td>
<td>æ–¹æ³•å‰è¡¨è¾¾å¼æˆæƒ</td>
<td>æ”¯æŒ SpEL è¡¨è¾¾å¼ï¼Œæ¨è</td>
</tr>
<tr>
<td><strong>@PostAuthorize</strong></td>
<td>æ–¹æ³•åè¡¨è¾¾å¼æˆæƒ</td>
<td>å¯åŸºäºè¿”å›å€¼åšæˆæƒåˆ¤æ–­</td>
</tr>
<tr>
<td><strong>@RolesAllowed</strong></td>
<td>JSR-250 æ ‡å‡†</td>
<td>é™åˆ¶è§’è‰²è®¿é—®</td>
</tr>
<tr>
<td><strong>@WithMockUser</strong></td>
<td>æµ‹è¯•æ¨¡æ‹Ÿç”¨æˆ·</td>
<td>å•å…ƒæµ‹è¯•</td>
</tr>
<tr>
<td><strong>@AuthenticationPrincipal</strong></td>
<td>è·å–å½“å‰è®¤è¯ç”¨æˆ·</td>
<td>Controller æ–¹æ³•å‚æ•°æ³¨å…¥</td>
</tr>
</tbody></table>
<hr>
<h2 id="äºŒã€æ ¸å¿ƒæœºåˆ¶è§£æ"><a href="#äºŒã€æ ¸å¿ƒæœºåˆ¶è§£æ" class="headerlink" title="äºŒã€æ ¸å¿ƒæœºåˆ¶è§£æ"></a>äºŒã€æ ¸å¿ƒæœºåˆ¶è§£æ</h2><h3 id="1ï¸âƒ£-FilterChainProxyï¼ˆå®‰å…¨è¿‡æ»¤å™¨é“¾ï¼‰"><a href="#1ï¸âƒ£-FilterChainProxyï¼ˆå®‰å…¨è¿‡æ»¤å™¨é“¾ï¼‰" class="headerlink" title="1ï¸âƒ£ FilterChainProxyï¼ˆå®‰å…¨è¿‡æ»¤å™¨é“¾ï¼‰"></a>1ï¸âƒ£ FilterChainProxyï¼ˆå®‰å…¨è¿‡æ»¤å™¨é“¾ï¼‰</h3><p>Spring Security åŸºäº <strong>Servlet Filter</strong> å®ç°ï¼Œæ ¸å¿ƒæµç¨‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¯·æ±‚ â†’ FilterChainProxy â†’ SecurityFiltersï¼ˆå¤šä¸ªï¼‰ â†’ DispatcherServlet</span><br></pre></td></tr></table></figure>

<ul>
<li>å¸¸ç”¨ Filterï¼š<ul>
<li><code>UsernamePasswordAuthenticationFilter</code>ï¼šè¡¨å•ç™»å½•</li>
<li><code>BasicAuthenticationFilter</code>ï¼šHTTP Basic</li>
<li><code>ExceptionTranslationFilter</code>ï¼šå¼‚å¸¸å¤„ç†</li>
<li><code>FilterSecurityInterceptor</code>ï¼šæœ€ç»ˆæˆæƒå†³ç­–</li>
</ul>
</li>
</ul>
<p>ğŸ’¡ é¢è¯•é«˜é¢‘ï¼š</p>
<blockquote>
<p>â€œSpring Security å¦‚ä½•æ‹¦æˆªè¯·æ±‚ï¼Ÿâ€<br> ç­”ï¼šé€šè¿‡ <code>FilterChainProxy</code>ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œè¿‡æ»¤å™¨é“¾ï¼Œæ¯ä¸ª Filter è´Ÿè´£ä¸åŒå®‰å…¨åŠŸèƒ½ã€‚</p>
</blockquote>
<hr>
<h3 id="2ï¸âƒ£-EnableWebSecurity"><a href="#2ï¸âƒ£-EnableWebSecurity" class="headerlink" title="2ï¸âƒ£ @EnableWebSecurity"></a>2ï¸âƒ£ @EnableWebSecurity</h3><ul>
<li>æ¿€æ´» Web å®‰å…¨é…ç½®ï¼›</li>
<li>å†…éƒ¨é€šè¿‡ <code>@Import(WebSecurityConfiguration.class)</code> æ³¨å…¥ï¼š<ul>
<li><code>FilterChainProxy</code></li>
<li><code>AuthenticationManager</code></li>
<li><code>AccessDecisionManager</code></li>
</ul>
</li>
</ul>
<hr>
<h3 id="3ï¸âƒ£-æ–¹æ³•çº§æƒé™æ³¨è§£"><a href="#3ï¸âƒ£-æ–¹æ³•çº§æƒé™æ³¨è§£" class="headerlink" title="3ï¸âƒ£ æ–¹æ³•çº§æƒé™æ³¨è§£"></a>3ï¸âƒ£ æ–¹æ³•çº§æƒé™æ³¨è§£</h3><h4 id="a-Secured"><a href="#a-Secured" class="headerlink" title="a. @Secured"></a>a. @Secured</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Secured(&quot;ROLE_ADMIN&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">()</span> &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä»…æ”¯æŒè§’è‰²ï¼ˆROLE_ å‰ç¼€ï¼‰</li>
<li>æ ¸å¿ƒç±»ï¼š<code>SecuredAnnotationSecurityMetadataSource</code></li>
</ul>
<h4 id="b-PreAuthorize-PostAuthorize"><a href="#b-PreAuthorize-PostAuthorize" class="headerlink" title="b. @PreAuthorize &#x2F; @PostAuthorize"></a>b. @PreAuthorize &#x2F; @PostAuthorize</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PreAuthorize(&quot;hasRole(&#x27;ADMIN&#x27;) and #id == authentication.principal.id&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateUser</span><span class="params">(Long id)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostAuthorize(&quot;returnObject.owner == authentication.name&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(Long id)</span> &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ”¯æŒ SpEL è¡¨è¾¾å¼ï¼Œå¯åŸºäºæ–¹æ³•å‚æ•°ã€è¿”å›å€¼ã€è®¤è¯å¯¹è±¡æˆæƒ</li>
<li>æ ¸å¿ƒç±»ï¼š<ul>
<li><code>ExpressionBasedAnnotationAttributeFactory</code></li>
<li><code>PreInvocationAuthorizationAdviceVoter</code></li>
</ul>
</li>
</ul>
<h4 id="c-RolesAllowed"><a href="#c-RolesAllowed" class="headerlink" title="c. @RolesAllowed"></a>c. @RolesAllowed</h4><ul>
<li>JSR-250 æ ‡å‡†ï¼Œåº•å±‚æ˜ å°„åˆ° <code>Jsr250MethodSecurityMetadataSource</code></li>
</ul>
<hr>
<h3 id="4ï¸âƒ£-è·å–å½“å‰ç”¨æˆ·æ³¨è§£"><a href="#4ï¸âƒ£-è·å–å½“å‰ç”¨æˆ·æ³¨è§£" class="headerlink" title="4ï¸âƒ£ è·å–å½“å‰ç”¨æˆ·æ³¨è§£"></a>4ï¸âƒ£ è·å–å½“å‰ç”¨æˆ·æ³¨è§£</h3><h4 id="AuthenticationPrincipal"><a href="#AuthenticationPrincipal" class="headerlink" title="@AuthenticationPrincipal"></a>@AuthenticationPrincipal</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/me&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">me</span><span class="params">(<span class="meta">@AuthenticationPrincipal</span> User user)</span> &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ³¨å…¥å½“å‰è®¤è¯å¯¹è±¡</li>
<li>åº•å±‚é€šè¿‡ <code>SecurityContextHolder.getContext().getAuthentication().getPrincipal()</code></li>
</ul>
<hr>
<h3 id="5ï¸âƒ£-æµ‹è¯•æ”¯æŒ"><a href="#5ï¸âƒ£-æµ‹è¯•æ”¯æŒ" class="headerlink" title="5ï¸âƒ£ æµ‹è¯•æ”¯æŒ"></a>5ï¸âƒ£ æµ‹è¯•æ”¯æŒ</h3><h4 id="WithMockUser"><a href="#WithMockUser" class="headerlink" title="@WithMockUser"></a>@WithMockUser</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@WithMockUser(username=&quot;admin&quot;, roles=&#123;&quot;ADMIN&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAdminAccess</span><span class="params">()</span> &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¨¡æ‹Ÿç™»å½•ç”¨æˆ·ï¼Œæ–¹ä¾¿æ–¹æ³•çº§å®‰å…¨æµ‹è¯•</li>
</ul>
<hr>
<h3 id="6ï¸âƒ£-èº«ä»½è®¤è¯æµç¨‹ï¼ˆæ ¸å¿ƒé“¾æ¡ï¼‰"><a href="#6ï¸âƒ£-èº«ä»½è®¤è¯æµç¨‹ï¼ˆæ ¸å¿ƒé“¾æ¡ï¼‰" class="headerlink" title="6ï¸âƒ£ èº«ä»½è®¤è¯æµç¨‹ï¼ˆæ ¸å¿ƒé“¾æ¡ï¼‰"></a>6ï¸âƒ£ èº«ä»½è®¤è¯æµç¨‹ï¼ˆæ ¸å¿ƒé“¾æ¡ï¼‰</h3><ol>
<li>ç”¨æˆ·è¯·æ±‚ç™»å½• <code>/login</code></li>
<li><code>UsernamePasswordAuthenticationFilter</code> æ‹¦æˆªè¯·æ±‚</li>
<li>è°ƒç”¨ <code>AuthenticationManager</code> â†’ <code>ProviderManager</code></li>
<li>æ‰§è¡Œ <code>UserDetailsService.loadUserByUsername</code> è·å–ç”¨æˆ·ä¿¡æ¯</li>
<li>éªŒè¯å¯†ç  â†’ ç”Ÿæˆ <code>Authentication</code> â†’ å­˜å…¥ <code>SecurityContextHolder</code></li>
<li>åç»­è¯·æ±‚é€šè¿‡è¿‡æ»¤å™¨é“¾è¿›è¡Œæˆæƒæ£€æŸ¥</li>
</ol>
<hr>
<h3 id="7ï¸âƒ£-æˆæƒå†³ç­–"><a href="#7ï¸âƒ£-æˆæƒå†³ç­–" class="headerlink" title="7ï¸âƒ£ æˆæƒå†³ç­–"></a>7ï¸âƒ£ æˆæƒå†³ç­–</h3><ul>
<li>æ ¸å¿ƒç±»ï¼š<code>AccessDecisionManager</code></li>
<li>æ ¸å¿ƒé€»è¾‘ï¼š<ol>
<li>è·å–è¯·æ±‚ URL &#x2F; æ–¹æ³•çš„æƒé™å…ƒä¿¡æ¯ï¼ˆMetadataSourceï¼‰</li>
<li>é€šè¿‡ <code>Voter</code> æŠ•ç¥¨æœºåˆ¶åˆ¤å®šå…è®¸æˆ–æ‹’ç»</li>
<li>å¸¸ç”¨ Voterï¼š<ul>
<li><code>RoleVoter</code></li>
<li><code>AuthenticatedVoter</code></li>
<li><code>ExpressionVoter</code>ï¼ˆç”¨äº @PreAuthorize &#x2F; @PostAuthorizeï¼‰</li>
</ul>
</li>
</ol>
</li>
</ul>
<hr>
<h2 id="ä¸‰ã€é¢è¯•è¿½é—®ç‚¹ï¼ˆé«˜åˆ†å›ç­”ï¼‰"><a href="#ä¸‰ã€é¢è¯•è¿½é—®ç‚¹ï¼ˆé«˜åˆ†å›ç­”ï¼‰" class="headerlink" title="ä¸‰ã€é¢è¯•è¿½é—®ç‚¹ï¼ˆé«˜åˆ†å›ç­”ï¼‰"></a>ä¸‰ã€é¢è¯•è¿½é—®ç‚¹ï¼ˆé«˜åˆ†å›ç­”ï¼‰</h2><table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>é«˜åˆ†ç­”æ³•</th>
</tr>
</thead>
<tbody><tr>
<td>Spring Security å¦‚ä½•æ‹¦æˆªè¯·æ±‚ï¼Ÿ</td>
<td>é€šè¿‡ <code>FilterChainProxy</code> æ‰§è¡Œå¤šä¸ª Filterï¼Œæ¯ä¸ª Filter å®Œæˆè®¤è¯æˆ–æˆæƒé€»è¾‘ã€‚</td>
</tr>
<tr>
<td>@PreAuthorize ä¸ @Secured åŒºåˆ«ï¼Ÿ</td>
<td>@Secured ä»…æ”¯æŒè§’è‰²ï¼Œ@PreAuthorize æ”¯æŒ SpEL è¡¨è¾¾å¼ï¼Œå¯åŸºäºæ–¹æ³•å‚æ•°&#x2F;è¿”å›å€¼æˆæƒã€‚</td>
</tr>
<tr>
<td>å½“å‰ç”¨æˆ·æ€ä¹ˆè·å–ï¼Ÿ</td>
<td><code>SecurityContextHolder.getContext().getAuthentication().getPrincipal()</code> æˆ– <code>@AuthenticationPrincipal</code> æ³¨å…¥ã€‚</td>
</tr>
<tr>
<td>FilterChain æ‰§è¡Œé¡ºåºï¼Ÿ</td>
<td>ç™»å½•è®¤è¯ â†’ å¼‚å¸¸å¤„ç† â†’ æˆæƒ â†’ ä¸šåŠ¡ Controller â†’ å“åº”å¤„ç†ã€‚</td>
</tr>
<tr>
<td>å¦‚ä½•æµ‹è¯•æ–¹æ³•çº§å®‰å…¨ï¼Ÿ</td>
<td>ä½¿ç”¨ <code>@WithMockUser</code> æ³¨è§£æ¨¡æ‹Ÿç”¨æˆ·èº«ä»½ã€‚</td>
</tr>
</tbody></table>
<h1 id="â˜ï¸-å…­ã€Spring-Cloud-å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆæœåŠ¡æ³¨å†Œã€å‘ç°ã€è´Ÿè½½å‡è¡¡ã€è¿œç¨‹è°ƒç”¨ï¼‰"><a href="#â˜ï¸-å…­ã€Spring-Cloud-å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆæœåŠ¡æ³¨å†Œã€å‘ç°ã€è´Ÿè½½å‡è¡¡ã€è¿œç¨‹è°ƒç”¨ï¼‰" class="headerlink" title="â˜ï¸ å…­ã€Spring Cloud å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆæœåŠ¡æ³¨å†Œã€å‘ç°ã€è´Ÿè½½å‡è¡¡ã€è¿œç¨‹è°ƒç”¨ï¼‰"></a>â˜ï¸ å…­ã€Spring Cloud å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆæœåŠ¡æ³¨å†Œã€å‘ç°ã€è´Ÿè½½å‡è¡¡ã€è¿œç¨‹è°ƒç”¨ï¼‰</h1><p>Spring Cloud æ˜¯å¾®æœåŠ¡æ¶æ„æ ¸å¿ƒæ¡†æ¶ï¼Œå®ƒæä¾›äº† <strong>æœåŠ¡æ²»ç†ã€é…ç½®ä¸­å¿ƒã€æœåŠ¡è°ƒç”¨ã€ç†”æ–­é™çº§</strong> ç­‰åŠŸèƒ½ã€‚<br> æˆ‘ä»¬é‡ç‚¹åˆ†æ <strong>å¸¸ç”¨æ³¨è§£ + åº•å±‚åŸç† + é¢è¯•è¿½é—®ç‚¹</strong>ã€‚</p>
<hr>
<h2 id="ä¸€ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆEureka-Nacosï¼‰"><a href="#ä¸€ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆEureka-Nacosï¼‰" class="headerlink" title="ä¸€ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆEureka &#x2F; Nacosï¼‰"></a>ä¸€ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆEureka &#x2F; Nacosï¼‰</h2><h3 id="1ï¸âƒ£-æ ¸å¿ƒæ³¨è§£"><a href="#1ï¸âƒ£-æ ¸å¿ƒæ³¨è§£" class="headerlink" title="1ï¸âƒ£ æ ¸å¿ƒæ³¨è§£"></a>1ï¸âƒ£ æ ¸å¿ƒæ³¨è§£</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>@EnableEurekaClient</code></td>
<td>å¯ç”¨ Eureka å®¢æˆ·ç«¯ï¼Œè‡ªåŠ¨æ³¨å†ŒæœåŠ¡</td>
</tr>
<tr>
<td><code>@EnableDiscoveryClient</code></td>
<td>é€šç”¨æœåŠ¡å‘ç°æ³¨è§£ï¼ˆEurekaã€Consulã€Nacosï¼‰</td>
</tr>
<tr>
<td><code>@LoadBalanced</code></td>
<td>é…ç½® RestTemplate æˆ– WebClient æ”¯æŒå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡</td>
</tr>
<tr>
<td><code>@RefreshScope</code></td>
<td>é…ç½®çƒ­åˆ·æ–°ï¼Œç”¨äºé…ç½®ä¸­å¿ƒåŠ¨æ€åˆ·æ–°</td>
</tr>
</tbody></table>
<hr>
<h3 id="2ï¸âƒ£-æœåŠ¡æ³¨å†Œæµç¨‹ï¼ˆEureka-ç¤ºä¾‹ï¼‰"><a href="#2ï¸âƒ£-æœåŠ¡æ³¨å†Œæµç¨‹ï¼ˆEureka-ç¤ºä¾‹ï¼‰" class="headerlink" title="2ï¸âƒ£ æœåŠ¡æ³¨å†Œæµç¨‹ï¼ˆEureka ç¤ºä¾‹ï¼‰"></a>2ï¸âƒ£ æœåŠ¡æ³¨å†Œæµç¨‹ï¼ˆEureka ç¤ºä¾‹ï¼‰</h3><ol>
<li>å¯åŠ¨å¾®æœåŠ¡ â†’ <code>EurekaClient</code> åˆå§‹åŒ–</li>
<li>å‘é€å¿ƒè·³ <code>POST /eureka/apps/&#123;serviceName&#125;</code></li>
<li>Eureka Server æ¥æ”¶å¹¶æ³¨å†Œå®ä¾‹</li>
<li>å…¶ä»–å¾®æœåŠ¡é€šè¿‡ <code>/eureka/apps</code> è·å–æœåŠ¡åˆ—è¡¨</li>
<li>å†…éƒ¨ç¼“å­˜ä¸€ä»½æœåŠ¡åˆ—è¡¨ï¼Œæé«˜è®¿é—®æ•ˆç‡</li>
</ol>
<blockquote>
<p>ğŸ”¥ é¢è¯•ç‚¹ï¼šEureka é»˜è®¤ <strong>å¿ƒè·³ 30s</strong>ï¼Œä¸‹çº¿å»¶è¿Ÿ 90sï¼Œå¯èƒ½å­˜åœ¨çŸ­æš‚ä¸å¯ç”¨ã€‚</p>
</blockquote>
<hr>
<h2 id="äºŒã€è´Ÿè½½å‡è¡¡ï¼ˆRibbon-Spring-Cloud-LoadBalancerï¼‰"><a href="#äºŒã€è´Ÿè½½å‡è¡¡ï¼ˆRibbon-Spring-Cloud-LoadBalancerï¼‰" class="headerlink" title="äºŒã€è´Ÿè½½å‡è¡¡ï¼ˆRibbon &#x2F; Spring Cloud LoadBalancerï¼‰"></a>äºŒã€è´Ÿè½½å‡è¡¡ï¼ˆRibbon &#x2F; Spring Cloud LoadBalancerï¼‰</h2><h3 id="1ï¸âƒ£-æ ¸å¿ƒæ³¨è§£-1"><a href="#1ï¸âƒ£-æ ¸å¿ƒæ³¨è§£-1" class="headerlink" title="1ï¸âƒ£ æ ¸å¿ƒæ³¨è§£"></a>1ï¸âƒ£ æ ¸å¿ƒæ³¨è§£</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>@LoadBalanced</code></td>
<td>é…ç½® RestTemplate æˆ– WebClient æ”¯æŒ Ribbon æˆ– Spring Cloud LoadBalancer</td>
</tr>
<tr>
<td><code>@FeignClient</code></td>
<td>å£°æ˜å¼è¿œç¨‹è°ƒç”¨ï¼Œé›†æˆè´Ÿè½½å‡è¡¡å’Œç†”æ–­</td>
</tr>
</tbody></table>
<hr>
<h3 id="2ï¸âƒ£-å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡åŸç†"><a href="#2ï¸âƒ£-å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡åŸç†" class="headerlink" title="2ï¸âƒ£ å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡åŸç†"></a>2ï¸âƒ£ å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡åŸç†</h3><ul>
<li><strong>Ribbonï¼ˆè€ç‰ˆï¼‰</strong>ï¼š<ul>
<li>ä»æœåŠ¡å‘ç°è·å–æœåŠ¡åˆ—è¡¨</li>
<li>ä½¿ç”¨è´Ÿè½½ç­–ç•¥ï¼ˆè½®è¯¢ã€éšæœºã€æƒé‡ï¼‰é€‰æ‹©å®ä¾‹</li>
<li>å‘èµ·è¯·æ±‚</li>
</ul>
</li>
<li><strong>Spring Cloud LoadBalancerï¼ˆæ–°æ–¹æ¡ˆï¼‰</strong>ï¼š<ul>
<li>é»˜è®¤è½®è¯¢ç®—æ³•</li>
<li>æ”¯æŒè‡ªå®šä¹‰ç­–ç•¥</li>
<li>é€šè¿‡ <code>LoadBalancerClient</code> æˆ– <code>ReactiveLoadBalancer</code> é€‰æ‹©å®ä¾‹</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ä¸‰ã€å£°æ˜å¼è¿œç¨‹è°ƒç”¨ï¼ˆFeignï¼‰"><a href="#ä¸‰ã€å£°æ˜å¼è¿œç¨‹è°ƒç”¨ï¼ˆFeignï¼‰" class="headerlink" title="ä¸‰ã€å£°æ˜å¼è¿œç¨‹è°ƒç”¨ï¼ˆFeignï¼‰"></a>ä¸‰ã€å£°æ˜å¼è¿œç¨‹è°ƒç”¨ï¼ˆFeignï¼‰</h2><h3 id="1ï¸âƒ£-æ ¸å¿ƒæ³¨è§£-2"><a href="#1ï¸âƒ£-æ ¸å¿ƒæ³¨è§£-2" class="headerlink" title="1ï¸âƒ£ æ ¸å¿ƒæ³¨è§£"></a>1ï¸âƒ£ æ ¸å¿ƒæ³¨è§£</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>@EnableFeignClients</code></td>
<td>å¯ç”¨ Feign å®¢æˆ·ç«¯æ‰«æ</td>
</tr>
<tr>
<td><code>@FeignClient(name=&quot;service-name&quot;, path=&quot;/api&quot;)</code></td>
<td>å£°æ˜è¿œç¨‹æœåŠ¡æ¥å£</td>
</tr>
<tr>
<td><code>@RequestMapping / @GetMapping / @PostMapping</code></td>
<td>å®šä¹‰è¿œç¨‹è°ƒç”¨æ¥å£æ–¹æ³•</td>
</tr>
</tbody></table>
<hr>
<h3 id="2ï¸âƒ£-Feign-è°ƒç”¨åŸç†"><a href="#2ï¸âƒ£-Feign-è°ƒç”¨åŸç†" class="headerlink" title="2ï¸âƒ£ Feign è°ƒç”¨åŸç†"></a>2ï¸âƒ£ Feign è°ƒç”¨åŸç†</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FeignClient Proxyï¼ˆåŠ¨æ€ä»£ç†ï¼‰</span><br><span class="line">    â†“</span><br><span class="line">Spring Cloud LoadBalancerï¼ˆé€‰æ‹©å®ä¾‹ï¼‰</span><br><span class="line">    â†“</span><br><span class="line">Ribbon æˆ– RestTemplate æ‰§è¡Œ HTTP è¯·æ±‚</span><br><span class="line">    â†“</span><br><span class="line">è¿”å›ç»“æœ â†’ JSON è½¬å¯¹è±¡</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="3ï¸âƒ£-ç¤ºä¾‹"><a href="#3ï¸âƒ£-ç¤ºä¾‹" class="headerlink" title="3ï¸âƒ£ ç¤ºä¾‹"></a>3ï¸âƒ£ ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(name=&quot;user-service&quot;, path=&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserClient</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">getUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è°ƒç”¨ <code>userClient.getUser(1L)</code> æ—¶ï¼š</p>
<ol>
<li>Feign åˆ›å»ºåŠ¨æ€ä»£ç†å¯¹è±¡</li>
<li>ä½¿ç”¨æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–å¯ç”¨å®ä¾‹</li>
<li>é€šè¿‡ HTTP å‘èµ·è¯·æ±‚</li>
<li>è¿”å› JSON è½¬å¯¹è±¡</li>
</ol>
</blockquote>
<hr>
<h2 id="å››ã€ç½‘å…³ï¼ˆSpring-Cloud-Gatewayï¼‰"><a href="#å››ã€ç½‘å…³ï¼ˆSpring-Cloud-Gatewayï¼‰" class="headerlink" title="å››ã€ç½‘å…³ï¼ˆSpring Cloud Gatewayï¼‰"></a>å››ã€ç½‘å…³ï¼ˆSpring Cloud Gatewayï¼‰</h2><h3 id="æ ¸å¿ƒæ³¨è§£"><a href="#æ ¸å¿ƒæ³¨è§£" class="headerlink" title="æ ¸å¿ƒæ³¨è§£"></a>æ ¸å¿ƒæ³¨è§£</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>@EnableGateway</code></td>
<td>å¯ç”¨ç½‘å…³ï¼ˆSpring Boot è‡ªåŠ¨è£…é…å³å¯ï¼‰</td>
</tr>
<tr>
<td><code>@Bean RouteLocator</code></td>
<td>é…ç½®è·¯ç”±è§„åˆ™</td>
</tr>
<tr>
<td><code>@Configuration</code></td>
<td>é…ç½®ç±»ï¼Œå®šä¹‰è‡ªå®šä¹‰è¿‡æ»¤å™¨</td>
</tr>
</tbody></table>
<h3 id="æ ¸å¿ƒåŸç†"><a href="#æ ¸å¿ƒåŸç†" class="headerlink" title="æ ¸å¿ƒåŸç†"></a>æ ¸å¿ƒåŸç†</h3><ul>
<li>åŸºäº <strong>WebFlux &#x2F; Netty</strong> å®ç°å¼‚æ­¥éé˜»å¡ç½‘å…³</li>
<li>è¯·æ±‚ â†’ GlobalFilter â†’ RouteLocator åŒ¹é… â†’ ç›®æ ‡æœåŠ¡</li>
<li>æ”¯æŒé™æµã€ç†”æ–­ã€é‡è¯•ã€è®¤è¯ç­‰åŠŸèƒ½</li>
</ul>
<hr>
<h2 id="äº”ã€ç†”æ–­ä¸é™çº§ï¼ˆResilience4j-Spring-Cloud-CircuitBreakerï¼‰"><a href="#äº”ã€ç†”æ–­ä¸é™çº§ï¼ˆResilience4j-Spring-Cloud-CircuitBreakerï¼‰" class="headerlink" title="äº”ã€ç†”æ–­ä¸é™çº§ï¼ˆResilience4j &#x2F; Spring Cloud CircuitBreakerï¼‰"></a>äº”ã€ç†”æ–­ä¸é™çº§ï¼ˆResilience4j &#x2F; Spring Cloud CircuitBreakerï¼‰</h2><h3 id="æ ¸å¿ƒæ³¨è§£-1"><a href="#æ ¸å¿ƒæ³¨è§£-1" class="headerlink" title="æ ¸å¿ƒæ³¨è§£"></a>æ ¸å¿ƒæ³¨è§£</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>@EnableCircuitBreaker</code></td>
<td>å¯ç”¨ç†”æ–­å™¨</td>
</tr>
<tr>
<td><code>@CircuitBreaker(name=&quot;backend&quot;, fallbackMethod=&quot;fallback&quot;)</code></td>
<td>æ–¹æ³•çº§ç†”æ–­</td>
</tr>
<tr>
<td><code>@Retryable</code></td>
<td>æ–¹æ³•é‡è¯•</td>
</tr>
<tr>
<td><code>@TimeLimiter</code></td>
<td>å¼‚æ­¥æ–¹æ³•è¶…æ—¶æ§åˆ¶</td>
</tr>
</tbody></table>
<hr>
<h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><ol>
<li>è°ƒç”¨è¢«ç›‘æ§æ–¹æ³•</li>
<li>å‡ºç°å¼‚å¸¸æˆ–è¶…æ—¶ï¼Œç†”æ–­å™¨è®¡æ•°å™¨ç´¯åŠ </li>
<li>è¾¾åˆ°é˜ˆå€¼ â†’ æ‰“å¼€ç†”æ–­ï¼Œç›´æ¥è°ƒç”¨ fallback</li>
<li>è¶…è¿‡æ—¶é—´æˆ–æ¡ä»¶æ¢å¤ â†’ å…³é—­ç†”æ–­å™¨</li>
</ol>
<hr>
<h2 id="å…­ã€é¢è¯•é«˜é¢‘é—®ç‚¹"><a href="#å…­ã€é¢è¯•é«˜é¢‘é—®ç‚¹" class="headerlink" title="å…­ã€é¢è¯•é«˜é¢‘é—®ç‚¹"></a>å…­ã€é¢è¯•é«˜é¢‘é—®ç‚¹</h2><table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>é«˜åˆ†å›ç­”</th>
</tr>
</thead>
<tbody><tr>
<td>Spring Cloud å¦‚ä½•å®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼Ÿ</td>
<td>å¾®æœåŠ¡å¯åŠ¨æ³¨å†Œåˆ° Eureka&#x2F;Nacosï¼Œé€šè¿‡å®¢æˆ·ç«¯ç¼“å­˜è·å–å¯ç”¨æœåŠ¡åˆ—è¡¨ï¼Œå®ç°æœåŠ¡è°ƒç”¨ã€‚</td>
</tr>
<tr>
<td>@FeignClient å¦‚ä½•è´Ÿè½½å‡è¡¡ï¼Ÿ</td>
<td>ç»“åˆ Ribbon æˆ– Spring Cloud LoadBalancerï¼Œé€šè¿‡æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–å®ä¾‹åˆ—è¡¨ï¼Œå¹¶æŒ‰ç­–ç•¥é€‰æ‹©ã€‚</td>
</tr>
<tr>
<td>ç½‘å…³è·¯ç”±åŸç†ï¼Ÿ</td>
<td>è¯·æ±‚ç»è¿‡ GlobalFilter â†’ RouteLocator åŒ¹é… â†’ Forward åˆ°ç›®æ ‡æœåŠ¡ï¼Œæ”¯æŒé™æµã€è®¤è¯ã€ç†”æ–­ã€‚</td>
</tr>
<tr>
<td>ç†”æ–­å™¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</td>
<td>é€šè¿‡ CircuitBreaker ç›‘æ§æ–¹æ³•è°ƒç”¨ï¼Œè¾¾åˆ°é˜ˆå€¼æ—¶æ‰“å¼€ç†”æ–­ï¼Œè°ƒç”¨ fallback æ–¹æ³•ã€‚</td>
</tr>
<tr>
<td>@RefreshScope ä½œç”¨ï¼Ÿ</td>
<td>å…è®¸ Bean åœ¨é…ç½®ä¸­å¿ƒæ›´æ–°æ—¶çƒ­åˆ·æ–°ï¼Œä¸é‡å¯åº”ç”¨å³å¯ç”Ÿæ•ˆã€‚</td>
</tr>
</tbody></table>
<hr>
<p>å®Œå…¨å¯ä»¥ ğŸ˜ï¼æˆ‘å¸®ä½ æ•´ç†ä¸€ä»½ <strong>å…­å¤§æ¡†æ¶è¶…çº§é€Ÿè®°å¡ &#x2F; å¯æ‰“å°ç‰ˆçŸ¥è¯†å›¾è°±</strong>ï¼Œå…¼é¡¾ï¼š</p>
<ul>
<li><strong>ç»“æ„å›¾</strong>ï¼šæ¨¡å— + æ ¸å¿ƒæ³¨è§£åˆ†ç±»</li>
<li><strong>æµç¨‹é“¾</strong>ï¼šåº•å±‚æ‰§è¡Œé¡ºåºï¼ˆè¯·æ±‚ â†’ æ‰§è¡Œ â†’ è¿”å›ï¼‰</li>
<li><strong>æ—¶æœºè¡¨</strong>ï¼šå„æ³¨è§£è§¦å‘æ—¶æœº &#x2F; ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
<p>æˆ‘è®¾è®¡æˆä¸€é¡µ A4 å¯æ‰“å°çš„é¢è¯•é€Ÿè®°å¡é£æ ¼ï¼Œæ¯ä¸ªæ¡†æ¶é‡ç‚¹çªå‡ºé«˜é¢‘é¢è¯•ç‚¹ã€‚</p>
<hr>
<h3 id="æ ·ä¾‹ç»“æ„ï¼ˆå…­å¤§æ¡†æ¶é€ŸæŸ¥å¡ï¼‰"><a href="#æ ·ä¾‹ç»“æ„ï¼ˆå…­å¤§æ¡†æ¶é€ŸæŸ¥å¡ï¼‰" class="headerlink" title="æ ·ä¾‹ç»“æ„ï¼ˆå…­å¤§æ¡†æ¶é€ŸæŸ¥å¡ï¼‰"></a>æ ·ä¾‹ç»“æ„ï¼ˆå…­å¤§æ¡†æ¶é€ŸæŸ¥å¡ï¼‰</h3><hr>
<h2 id="1ï¸âƒ£-Spring-æ ¸å¿ƒæ³¨è§£-ç”Ÿå‘½å‘¨æœŸ"><a href="#1ï¸âƒ£-Spring-æ ¸å¿ƒæ³¨è§£-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1ï¸âƒ£ Spring æ ¸å¿ƒæ³¨è§£ &amp; ç”Ÿå‘½å‘¨æœŸ"></a>1ï¸âƒ£ Spring æ ¸å¿ƒæ³¨è§£ &amp; ç”Ÿå‘½å‘¨æœŸ</h2><p><strong>æ¨¡å—ç»“æ„å›¾</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Component / @Service / @Repository / @Controller</span><br><span class="line">         â†“</span><br><span class="line">@Autowired / @Qualifier â†’ ä¾èµ–æ³¨å…¥</span><br><span class="line">@PostConstruct / @PreDestroy â†’ ç”Ÿå‘½å‘¨æœŸå›è°ƒ</span><br><span class="line">@Scope â†’ Bean èŒƒå›´ï¼ˆSingleton / Prototype / Request / Sessionï¼‰</span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œé“¾</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Bean å®šä¹‰åŠ è½½ â†’ BeanPostProcessor â†’ åˆå§‹åŒ–ï¼ˆ@PostConstructï¼‰ â†’ ä¾èµ–æ³¨å…¥å®Œæˆ â†’ Bean å¯ç”¨</span><br></pre></td></tr></table></figure>

<p><strong>æ—¶æœºè¡¨</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>è§¦å‘æ—¶æœº</th>
</tr>
</thead>
<tbody><tr>
<td>@Component&#x2F;@Service</td>
<td>å®¹å™¨å¯åŠ¨æ‰«ææ³¨å†Œ</td>
</tr>
<tr>
<td>@Autowired</td>
<td>Bean åˆå§‹åŒ–é˜¶æ®µæ³¨å…¥</td>
</tr>
<tr>
<td>@PostConstruct</td>
<td>Bean åˆå§‹åŒ–åç«‹å³è°ƒç”¨</td>
</tr>
<tr>
<td>@PreDestroy</td>
<td>å®¹å™¨å…³é—­å‰è°ƒç”¨</td>
</tr>
</tbody></table>
<hr>
<h2 id="2ï¸âƒ£-SpringMVC-æ³¨è§£-è¯·æ±‚å¤„ç†"><a href="#2ï¸âƒ£-SpringMVC-æ³¨è§£-è¯·æ±‚å¤„ç†" class="headerlink" title="2ï¸âƒ£ SpringMVC æ³¨è§£ &amp; è¯·æ±‚å¤„ç†"></a>2ï¸âƒ£ SpringMVC æ³¨è§£ &amp; è¯·æ±‚å¤„ç†</h2><p><strong>ç»“æ„å›¾</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Controller / @RestController</span><br><span class="line">        â†“</span><br><span class="line">@RequestMapping / @GetMapping / @PostMapping</span><br><span class="line">        â†“</span><br><span class="line">@PathVariable / @RequestParam / @RequestBody / @ResponseBody</span><br><span class="line">        â†“</span><br><span class="line">@ExceptionHandler / @ControllerAdvice</span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œé“¾</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP è¯·æ±‚ â†’ DispatcherServlet â†’ HandlerMapping â†’ HandlerAdapter â†’ Controller â†’ ViewResolver â†’ Response</span><br></pre></td></tr></table></figure>

<p><strong>æ—¶æœºè¡¨</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>è§¦å‘æ—¶æœº</th>
</tr>
</thead>
<tbody><tr>
<td>@ControllerAdvice</td>
<td>Controller å¼‚å¸¸è§¦å‘</td>
</tr>
<tr>
<td>@InitBinder</td>
<td>Controller æ–¹æ³•è°ƒç”¨å‰ç»‘å®šå‚æ•°</td>
</tr>
<tr>
<td>@RequestBody &#x2F; @ResponseBody</td>
<td>æ–¹æ³•è°ƒç”¨åºåˆ—ä¸­è¯·æ±‚è§£æ &amp; å“åº”åºåˆ—åŒ–</td>
</tr>
</tbody></table>
<hr>
<h2 id="3ï¸âƒ£-MyBatis-æ³¨è§£-SQL-æ‰§è¡Œ"><a href="#3ï¸âƒ£-MyBatis-æ³¨è§£-SQL-æ‰§è¡Œ" class="headerlink" title="3ï¸âƒ£ MyBatis æ³¨è§£ &amp; SQL æ‰§è¡Œ"></a>3ï¸âƒ£ MyBatis æ³¨è§£ &amp; SQL æ‰§è¡Œ</h2><p><strong>ç»“æ„å›¾</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Mapper / @MapperScan</span><br><span class="line">        â†“</span><br><span class="line">MapperProxy â†’ SqlSession â†’ Executor â†’ StatementHandler â†’ ResultSetHandler â†’ è¿”å›å¯¹è±¡</span><br><span class="line">@Select / @Insert / @Update / @Delete</span><br><span class="line">@Param â†’ å‚æ•°ç»‘å®š</span><br><span class="line">@Results / @Result â†’ å­—æ®µæ˜ å°„</span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œé“¾</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¥å£æ–¹æ³•è°ƒç”¨ â†’ MapperProxy.invoke() â†’ SqlSession.select() â†’ Executor â†’ JDBC â†’ ResultSet â†’ æ˜ å°„åˆ°å¯¹è±¡</span><br></pre></td></tr></table></figure>

<p><strong>æ—¶æœºè¡¨</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>è§¦å‘æ—¶æœº</th>
</tr>
</thead>
<tbody><tr>
<td>@MapperScan</td>
<td>å®¹å™¨å¯åŠ¨æ—¶æ‰«æ Mapper</td>
</tr>
<tr>
<td>@Select &#x2F; @Insert</td>
<td>æ–¹æ³•è°ƒç”¨æ—¶è§£æ SQL</td>
</tr>
<tr>
<td>@Param</td>
<td>æ–¹æ³•è°ƒç”¨è§£æå‚æ•°</td>
</tr>
<tr>
<td>@Results</td>
<td>æ‰§è¡Œ SQL è¿”å›ç»“æœæ˜ å°„</td>
</tr>
</tbody></table>
<hr>
<h2 id="4ï¸âƒ£-Spring-Boot-æ³¨è§£-è‡ªåŠ¨è£…é…"><a href="#4ï¸âƒ£-Spring-Boot-æ³¨è§£-è‡ªåŠ¨è£…é…" class="headerlink" title="4ï¸âƒ£ Spring Boot æ³¨è§£ &amp; è‡ªåŠ¨è£…é…"></a>4ï¸âƒ£ Spring Boot æ³¨è§£ &amp; è‡ªåŠ¨è£…é…</h2><p><strong>ç»“æ„å›¾</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">        â†“</span><br><span class="line">@SpringBootConfiguration / @EnableAutoConfiguration / @ComponentScan</span><br><span class="line">        â†“</span><br><span class="line">@ConfigurationProperties â†’ é…ç½®ç»‘å®š</span><br><span class="line">@Conditional ç³»åˆ— â†’ æ¡ä»¶åŠ è½½</span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œé“¾</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SpringApplication.run() â†’ ApplicationContext åˆ›å»º â†’ è‡ªåŠ¨é…ç½®åŠ è½½ â†’ Bean å®ä¾‹åŒ– â†’ è‡ªåŠ¨è£…é… â†’ å®¹å™¨å¯åŠ¨</span><br></pre></td></tr></table></figure>

<p><strong>æ—¶æœºè¡¨</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>è§¦å‘æ—¶æœº</th>
</tr>
</thead>
<tbody><tr>
<td>@EnableAutoConfiguration</td>
<td>ApplicationContext åˆ›å»ºé˜¶æ®µ</td>
</tr>
<tr>
<td>@ConditionalOnClass &#x2F; OnMissingBean</td>
<td>Bean å®ä¾‹åŒ–å‰æ¡ä»¶åˆ¤æ–­</td>
</tr>
<tr>
<td>@ConfigurationProperties</td>
<td>Bean å®ä¾‹åŒ–ç»‘å®šå±æ€§</td>
</tr>
<tr>
<td>@Value</td>
<td>Bean åˆå§‹åŒ–æ³¨å…¥å±æ€§</td>
</tr>
</tbody></table>
<hr>
<h2 id="5ï¸âƒ£-Spring-Security-æ³¨è§£-æƒé™æ§åˆ¶"><a href="#5ï¸âƒ£-Spring-Security-æ³¨è§£-æƒé™æ§åˆ¶" class="headerlink" title="5ï¸âƒ£ Spring Security æ³¨è§£ &amp; æƒé™æ§åˆ¶"></a>5ï¸âƒ£ Spring Security æ³¨è§£ &amp; æƒé™æ§åˆ¶</h2><p><strong>ç»“æ„å›¾</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@EnableWebSecurity</span><br><span class="line">        â†“</span><br><span class="line">FilterChainProxy â†’ å„ç±» Filterï¼ˆè®¤è¯/æˆæƒï¼‰</span><br><span class="line">@Secured / @PreAuthorize / @PostAuthorize / @RolesAllowed</span><br><span class="line">@AuthenticationPrincipal â†’ æ³¨å…¥ç”¨æˆ·</span><br><span class="line">@WithMockUser â†’ æµ‹è¯•</span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œé“¾</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¯·æ±‚ â†’ FilterChainProxy â†’ AuthenticationManager â†’ UserDetailsService â†’ éªŒè¯ â†’ SecurityContextHolder â†’ æˆæƒ â†’ Controller</span><br></pre></td></tr></table></figure>

<p><strong>æ—¶æœºè¡¨</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>è§¦å‘æ—¶æœº</th>
</tr>
</thead>
<tbody><tr>
<td>@EnableWebSecurity</td>
<td>å®¹å™¨å¯åŠ¨é…ç½®å®‰å…¨è¿‡æ»¤å™¨é“¾</td>
</tr>
<tr>
<td>@PreAuthorize &#x2F; @Secured</td>
<td>æ–¹æ³•è°ƒç”¨å‰åˆ¤æ–­æƒé™</td>
</tr>
<tr>
<td>@PostAuthorize</td>
<td>æ–¹æ³•æ‰§è¡ŒååŸºäºè¿”å›å€¼åˆ¤æ–­</td>
</tr>
<tr>
<td>@AuthenticationPrincipal</td>
<td>Controller æ–¹æ³•å‚æ•°æ³¨å…¥å½“å‰ç”¨æˆ·</td>
</tr>
</tbody></table>
<hr>
<h2 id="6ï¸âƒ£-Spring-Cloud-æ³¨è§£-å¾®æœåŠ¡è°ƒç”¨"><a href="#6ï¸âƒ£-Spring-Cloud-æ³¨è§£-å¾®æœåŠ¡è°ƒç”¨" class="headerlink" title="6ï¸âƒ£ Spring Cloud æ³¨è§£ &amp; å¾®æœåŠ¡è°ƒç”¨"></a>6ï¸âƒ£ Spring Cloud æ³¨è§£ &amp; å¾®æœåŠ¡è°ƒç”¨</h2><p><strong>ç»“æ„å›¾</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@EnableEurekaClient / @EnableDiscoveryClient</span><br><span class="line">        â†“</span><br><span class="line">æœåŠ¡æ³¨å†Œ â†’ Eureka / Nacos</span><br><span class="line">@LoadBalanced â†’ RestTemplate / WebClient</span><br><span class="line">@FeignClient â†’ å£°æ˜å¼è¿œç¨‹è°ƒç”¨</span><br><span class="line">@CircuitBreaker / @Retryable â†’ ç†”æ–­ä¸é‡è¯•</span><br><span class="line">@RefreshScope â†’ é…ç½®çƒ­åˆ·æ–°</span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œé“¾</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å®¢æˆ·ç«¯è¯·æ±‚ â†’ æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–å®ä¾‹ â†’ è´Ÿè½½å‡è¡¡é€‰æ‹© â†’ è¿œç¨‹è°ƒç”¨ â†’ è¿”å› â†’ ç†”æ–­/é™çº§å¤„ç†</span><br></pre></td></tr></table></figure>

<p><strong>æ—¶æœºè¡¨</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>è§¦å‘æ—¶æœº</th>
</tr>
</thead>
<tbody><tr>
<td>@EnableEurekaClient</td>
<td>å¯åŠ¨æ—¶æ³¨å†ŒæœåŠ¡</td>
</tr>
<tr>
<td>@FeignClient</td>
<td>æ¥å£æ–¹æ³•è°ƒç”¨æ—¶ç”ŸæˆåŠ¨æ€ä»£ç†å‘ HTTP</td>
</tr>
<tr>
<td>@LoadBalanced</td>
<td>RestTemplate è°ƒç”¨å‰é€‰æ‹©æœåŠ¡å®ä¾‹</td>
</tr>
<tr>
<td>@CircuitBreaker</td>
<td>æ–¹æ³•æ‰§è¡Œå¼‚å¸¸æˆ–è¶…æ—¶è§¦å‘</td>
</tr>
</tbody></table>
<hr>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://charlotte030710.github.io">Charlotte</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://charlotte030710.github.io/2025/10/01/%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3/">https://charlotte030710.github.io/2025/10/01/%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://charlotte030710.github.io" target="_blank">æµ®ç”Ÿè‹¥æ¢¦</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a></div><div class="post-share"><div class="social-share" data-image="/img/title.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/10/01/%E7%89%9B%E5%AE%A2%E5%85%AB%E8%82%A1/" title="ç‰›å®¢é¢è¯•é¢˜"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">ç‰›å®¢é¢è¯•é¢˜</div></div><div class="info-2"><div class="info-item-1"> Spring-ç‰›å®¢é¢ç»å…«è‚¡ 1. è¯´è¯´ Spring Boot å¸¸ç”¨çš„æ³¨è§£ @SpringBootApplicationï¼šç»„åˆæ³¨è§£ï¼ˆ@Configuration + @EnableAutoConfiguration + @ComponentScanï¼‰ï¼Œåº”ç”¨å…¥å£å¸¸æ”¾åœ¨ä¸»ç±»ä¸Šã€‚ @Configuration &#x2F; @Beanï¼šå®šä¹‰é…ç½®ç±»å’Œæ˜¾å¼åˆ›å»º Beanã€‚ @Component &#x2F; @Service &#x2F; @Repository &#x2F; @Controller &#x2F; @RestControllerï¼šç»„ä»¶æ‰«æç®¡ç†ç±»ï¼›@RestController = @Controller + @ResponseBodyã€‚ @Autowired &#x2F; @Qualifier &#x2F; @Value &#x2F; @Resourceï¼šä¾èµ–æ³¨å…¥ã€æŒ‰ç±»å‹&#x2F;æŒ‰åç§°æ³¨å…¥ã€è¯»å–é…ç½®ã€‚ @ConfigurationPropertiesï¼šå°†ä¸€ç»„é…ç½®ç»‘å®šåˆ° POJOï¼ˆæ¨èç”¨äºå¤æ‚é…ç½®ï¼‰ã€‚ @EnableAutoConfigurationï¼ˆéšå«åœ¨ @Spri...</div></div></div></a><a class="pagination-related" href="/2025/09/23/%E7%AE%80%E6%98%93%E7%89%88%E9%A2%98%E7%9B%AE/" title="ç®€æ˜“ç‰ˆé¢˜ç›®"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">ç®€æ˜“ç‰ˆé¢˜ç›®</div></div><div class="info-2"><div class="info-item-1">ğŸ“š æ•°æ®åº“é¢˜åº“ç­”æ¡ˆ1ã€OSI ä¸ƒå±‚æ¨¡å‹ ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚ã€‚ åŠŸèƒ½ï¼šè‡ªä¸‹è€Œä¸Šåˆ†åˆ«è´Ÿè´£ä¼ è¾“ä»‹è´¨ã€é“¾è·¯æ§åˆ¶ã€è·¯ç”±è½¬å‘ã€ç«¯åˆ°ç«¯ä¼ è¾“ã€ä¼šè¯ç®¡ç†ã€æ•°æ®æ ¼å¼è½¬æ¢ã€åº”ç”¨æœåŠ¡ã€‚   2ã€TCP çš„ä¸‰æ¬¡æ¡æ‰‹ å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯ï¼šSYN&#x3D;1ï¼ˆè¯·æ±‚å»ºç«‹è¿æ¥ï¼‰ã€‚ æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯ï¼šSYN&#x3D;1, ACK&#x3D;1ï¼ˆç¡®è®¤å¹¶åŒæ„å»ºç«‹ï¼‰ã€‚ å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯ï¼šACK&#x3D;1ï¼ˆç¡®è®¤ï¼‰ã€‚ ğŸ‘‰ ä½œç”¨ï¼šç¡®ä¿åŒæ–¹å…·å¤‡æ”¶å‘èƒ½åŠ›ï¼Œå¹¶åŒæ­¥åˆå§‹åºåˆ—å·ã€‚   3ã€TCP çš„å››æ¬¡æŒ¥æ‰‹ å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯ï¼šFIN&#x3D;1ï¼ˆæˆ‘æ²¡æ•°æ®äº†ï¼‰ã€‚ æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯ï¼šACK&#x3D;1ï¼ˆæ”¶åˆ°ï¼‰ã€‚ æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯ï¼šFIN&#x3D;1ï¼ˆæˆ‘ä¹Ÿæ²¡æ•°æ®äº†ï¼‰ã€‚ å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯ï¼šACK&#x3D;1ï¼ˆæ”¶åˆ°ï¼‰ã€‚ ğŸ‘‰ åŒæ–¹å„è‡ªç‹¬ç«‹å…³é—­ã€‚   4ã€SQL è¯­è¨€å’Œæ–¹è¨€çš„åŒºåˆ« SQL è¯­è¨€ï¼šæ ‡å‡† SQLï¼ˆANSI&#x2F;ISO å®šä¹‰ï¼‰ï¼Œå¦‚ SELECT * FROM table;ã€‚ SQL æ–¹è¨€ï¼šä¸åŒæ•°æ®åº“å‚å•†åœ¨æ ‡å‡† SQL åŸºç¡€ä¸Šæ‰©å±•çš„ç‰¹æ€§ï¼Œå¦‚ MySQL çš„ LIM...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/10/01/%E7%89%9B%E5%AE%A2%E5%85%AB%E8%82%A1/" title="ç‰›å®¢é¢è¯•é¢˜"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-01</div><div class="info-item-2">ç‰›å®¢é¢è¯•é¢˜</div></div><div class="info-2"><div class="info-item-1"> Spring-ç‰›å®¢é¢ç»å…«è‚¡ 1. è¯´è¯´ Spring Boot å¸¸ç”¨çš„æ³¨è§£ @SpringBootApplicationï¼šç»„åˆæ³¨è§£ï¼ˆ@Configuration + @EnableAutoConfiguration + @ComponentScanï¼‰ï¼Œåº”ç”¨å…¥å£å¸¸æ”¾åœ¨ä¸»ç±»ä¸Šã€‚ @Configuration &#x2F; @Beanï¼šå®šä¹‰é…ç½®ç±»å’Œæ˜¾å¼åˆ›å»º Beanã€‚ @Component &#x2F; @Service &#x2F; @Repository &#x2F; @Controller &#x2F; @RestControllerï¼šç»„ä»¶æ‰«æç®¡ç†ç±»ï¼›@RestController = @Controller + @ResponseBodyã€‚ @Autowired &#x2F; @Qualifier &#x2F; @Value &#x2F; @Resourceï¼šä¾èµ–æ³¨å…¥ã€æŒ‰ç±»å‹&#x2F;æŒ‰åç§°æ³¨å…¥ã€è¯»å–é…ç½®ã€‚ @ConfigurationPropertiesï¼šå°†ä¸€ç»„é…ç½®ç»‘å®šåˆ° POJOï¼ˆæ¨èç”¨äºå¤æ‚é…ç½®ï¼‰ã€‚ @EnableAutoConfigurationï¼ˆéšå«åœ¨ @Spri...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/title.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Charlotte</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">17</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/charlotte030710"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">Das Leben schwingt wie ein Pendel, hin und her, zwischen dem Schmerz und der Langeweile.</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%A7%A9-%E4%B8%80%E3%80%81Spring-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%EF%BC%88IOC-AOP-%E6%A0%B8%E5%BF%83%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">ğŸ§© ä¸€ã€Spring å¸¸ç”¨æ³¨è§£ï¼ˆIOC &#x2F; AOP æ ¸å¿ƒï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A0-1-IOC-%E7%9B%B8%E5%85%B3%EF%BC%88%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%EF%BC%89"><span class="toc-number">1.0.1.</span> <span class="toc-text">ğŸ’  1. IOC ç›¸å…³ï¼ˆæ§åˆ¶åè½¬ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A0-2-AOP-%E7%9B%B8%E5%85%B3%EF%BC%88%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B%EF%BC%89"><span class="toc-number">1.0.2.</span> <span class="toc-text">ğŸ’  2. AOP ç›¸å…³ï¼ˆåˆ‡é¢ç¼–ç¨‹ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A0-3-%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%85%B3"><span class="toc-number">1.0.3.</span> <span class="toc-text">ğŸ’  3. é…ç½®ç›¸å…³</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8C%90-%E4%BA%8C%E3%80%81Spring-MVC-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.</span> <span class="toc-text">ğŸŒ äºŒã€Spring MVC å¸¸ç”¨æ³¨è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A0-1-%E6%8E%A7%E5%88%B6%E5%B1%82%E6%98%A0%E5%B0%84"><span class="toc-number">2.0.1.</span> <span class="toc-text">ğŸ’  1. æ§åˆ¶å±‚æ˜ å°„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A0-2-%E5%BC%82%E5%B8%B8-%E8%BF%94%E5%9B%9E%E5%A4%84%E7%90%86"><span class="toc-number">2.0.2.</span> <span class="toc-text">ğŸ’  2. å¼‚å¸¸ &amp; è¿”å›å¤„ç†</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%92%BE-%E4%B8%89%E3%80%81MyBatis-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">3.</span> <span class="toc-text">ğŸ’¾ ä¸‰ã€MyBatis å¸¸ç”¨æ³¨è§£</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%9A%80-%E5%9B%9B%E3%80%81Spring-Boot-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">4.</span> <span class="toc-text">ğŸš€ å››ã€Spring Boot å¸¸ç”¨æ³¨è§£</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%94%90-%E4%BA%94%E3%80%81Spring-Security-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">5.</span> <span class="toc-text">ğŸ” äº”ã€Spring Security å¸¸ç”¨æ³¨è§£</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%98%81%EF%B8%8F-%E5%85%AD%E3%80%81Spring-Cloud-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%EF%BC%88%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BD%93%E7%B3%BB%EF%BC%89"><span class="toc-number">6.</span> <span class="toc-text">â˜ï¸ å…­ã€Spring Cloud å¸¸ç”¨æ³¨è§£ï¼ˆå¾®æœåŠ¡ä½“ç³»ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A0-1-%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0%EF%BC%88Eureka-Nacos%EF%BC%89"><span class="toc-number">6.0.1.</span> <span class="toc-text">ğŸ’  1. æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆEureka &#x2F; Nacosï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A0-2-%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%EF%BC%88OpenFeign%EF%BC%89"><span class="toc-number">6.0.2.</span> <span class="toc-text">ğŸ’  2. æœåŠ¡è°ƒç”¨ï¼ˆOpenFeignï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A0-3-%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3%EF%BC%88Gateway%EF%BC%89"><span class="toc-number">6.0.3.</span> <span class="toc-text">ğŸ’  3. æœåŠ¡ç½‘å…³ï¼ˆGatewayï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A0-4-%E7%86%94%E6%96%AD-%E9%99%90%E6%B5%81%EF%BC%88Hystrix-Sentinel%EF%BC%89"><span class="toc-number">6.0.4.</span> <span class="toc-text">ğŸ’  4. ç†”æ–­ &amp; é™æµï¼ˆHystrix &#x2F; Sentinelï¼‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%93%98-%E4%B8%83%E3%80%81%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BF%86%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="toc-number">7.</span> <span class="toc-text">ğŸ“˜ ä¸ƒã€é¢è¯•è®°å¿†å°æŠ€å·§</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8C%B1-%E4%B8%80%E3%80%81Spring-%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%EF%BC%88IOC-AOP%EF%BC%89"><span class="toc-number">8.</span> <span class="toc-text">ğŸŒ± ä¸€ã€Spring æ ¸å¿ƒæ³¨è§£è¿è¡Œæœºåˆ¶ï¼ˆIOC &#x2F; AOPï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-Component-%E7%B3%BB%E5%88%97%E6%B3%A8%E8%A7%A3%EF%BC%88Bean-%E6%89%AB%E6%8F%8F%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B%EF%BC%89"><span class="toc-number">8.0.1.</span> <span class="toc-text">1ï¸âƒ£ @Component ç³»åˆ—æ³¨è§£ï¼ˆBean æ‰«ææ³¨å†Œæµç¨‹ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-Autowired-%E6%B3%A8%E5%85%A5%E6%B5%81%E7%A8%8B"><span class="toc-number">8.0.2.</span> <span class="toc-text">2ï¸âƒ£ @Autowired æ³¨å…¥æµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3-Configuration-Bean"><span class="toc-number">8.0.3.</span> <span class="toc-text">3ï¸âƒ£ @Configuration + @Bean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%B8%8F%E2%83%A3-AOP-%E6%B3%A8%E8%A7%A3%EF%BC%88-Aspect-Around-%E7%AD%89%EF%BC%89"><span class="toc-number">8.0.4.</span> <span class="toc-text">4ï¸âƒ£ AOP æ³¨è§£ï¼ˆ@Aspect, @Around ç­‰ï¼‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8C%90-%E4%BA%8C%E3%80%81Spring-MVC-%E6%B3%A8%E8%A7%A3%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-number">9.</span> <span class="toc-text">ğŸŒ äºŒã€Spring MVC æ³¨è§£è¿è¡Œæœºåˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-RequestMapping%E3%80%81-GetMapping"><span class="toc-number">9.0.1.</span> <span class="toc-text">1ï¸âƒ£ @RequestMappingã€@GetMapping</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-RequestBody-ResponseBody"><span class="toc-number">9.0.2.</span> <span class="toc-text">2ï¸âƒ£ @RequestBody &#x2F; @ResponseBody</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%92%BE-%E4%B8%89%E3%80%81MyBatis-%E6%B3%A8%E8%A7%A3%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-number">10.</span> <span class="toc-text">ğŸ’¾ ä¸‰ã€MyBatis æ³¨è§£è¿è¡Œæœºåˆ¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%9A%80-%E5%9B%9B%E3%80%81Spring-Boot-%E6%B3%A8%E8%A7%A3%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-number">11.</span> <span class="toc-text">ğŸš€ å››ã€Spring Boot æ³¨è§£è¿è¡Œæœºåˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-SpringBootApplication-%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E6%B5%81%E7%A8%8B"><span class="toc-number">11.0.1.</span> <span class="toc-text">1ï¸âƒ£ @SpringBootApplication è‡ªåŠ¨è£…é…æµç¨‹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%94%90-%E4%BA%94%E3%80%81Spring-Security-%E6%B3%A8%E8%A7%A3%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-number">12.</span> <span class="toc-text">ğŸ” äº”ã€Spring Security æ³¨è§£è¿è¡Œæœºåˆ¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%98%81%EF%B8%8F-%E5%85%AD%E3%80%81Spring-Cloud-%E6%B3%A8%E8%A7%A3%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-number">13.</span> <span class="toc-text">â˜ï¸ å…­ã€Spring Cloud æ³¨è§£è¿è¡Œæœºåˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-EnableDiscoveryClient"><span class="toc-number">13.0.1.</span> <span class="toc-text">1ï¸âƒ£ @EnableDiscoveryClient</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-FeignClient"><span class="toc-number">13.0.2.</span> <span class="toc-text">2ï¸âƒ£ @FeignClient</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%9A%A8-%E4%B8%83%E3%80%81%E6%89%80%E6%9C%89%E6%A1%86%E6%9E%B6%E8%B0%83%E7%94%A8%E6%97%B6%E6%9C%BA%E6%80%BB%E8%A7%88%E8%A1%A8"><span class="toc-number">13.1.</span> <span class="toc-text">ğŸš¨ ä¸ƒã€æ‰€æœ‰æ¡†æ¶è°ƒç”¨æ—¶æœºæ€»è§ˆè¡¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A7%A0-%E5%85%AB%E3%80%81%E9%9D%A2%E8%AF%95%E5%BB%B6%E4%BC%B8%E9%80%BB%E8%BE%91%EF%BC%88%E9%AB%98%E9%A2%91%E9%97%AE%E6%B3%95%EF%BC%89"><span class="toc-number">13.2.</span> <span class="toc-text">ğŸ§  å…«ã€é¢è¯•å»¶ä¼¸é€»è¾‘ï¼ˆé«˜é¢‘é—®æ³•ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8C%B1-%E4%B8%80%E3%80%81Spring-%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3-%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90%EF%BC%88IOC-AOP%EF%BC%89"><span class="toc-number">14.</span> <span class="toc-text">ğŸŒ± ä¸€ã€Spring æ ¸å¿ƒæ³¨è§£ æ·±å…¥è§£æï¼ˆIOC + AOPï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-IOC-%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3%E6%9C%BA%E5%88%B6"><span class="toc-number">14.1.</span> <span class="toc-text">1ï¸âƒ£ IOC æ ¸å¿ƒæ³¨è§£æœºåˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-1-%E5%8E%9F%E7%90%86"><span class="toc-number">14.1.1.</span> <span class="toc-text">ğŸ” 1. åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%A7%A9-IOC%EF%BC%88Inversion-of-Control%EF%BC%89%E2%80%94%E2%80%94%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC"><span class="toc-number">14.1.1.1.</span> <span class="toc-text">ğŸ§© IOCï¼ˆInversion of Controlï¼‰â€”â€”æ§åˆ¶åè½¬</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%A7%A0-%E5%BA%95%E5%B1%82%E5%85%B3%E9%94%AE%E7%B1%BB%EF%BC%9A"><span class="toc-number">14.1.1.2.</span> <span class="toc-text">ğŸ§  åº•å±‚å…³é”®ç±»ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%99%EF%B8%8F-2-Component-%E4%B8%8E%E6%B4%BE%E7%94%9F%E6%B3%A8%E8%A7%A3"><span class="toc-number">14.1.2.</span> <span class="toc-text">âš™ï¸ 2. @Component ä¸æ´¾ç”Ÿæ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%99%EF%B8%8F-3-Configuration-Bean-%E5%8E%9F%E7%90%86"><span class="toc-number">14.1.3.</span> <span class="toc-text">âš™ï¸ 3. @Configuration + @Bean åŸç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%99%EF%B8%8F-4-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E6%B3%A8%E8%A7%A3%E6%9C%BA%E5%88%B6"><span class="toc-number">14.1.4.</span> <span class="toc-text">âš™ï¸ 4. ä¾èµ–æ³¨å…¥æ³¨è§£æœºåˆ¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-AOP-%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3%E6%9C%BA%E5%88%B6"><span class="toc-number">14.2.</span> <span class="toc-text">2ï¸âƒ£ AOP æ ¸å¿ƒæ³¨è§£æœºåˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%A7%A9-1-%E5%8E%9F%E7%90%86%EF%BC%9A%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86-%E9%80%9A%E7%9F%A5%E7%BB%87%E5%85%A5"><span class="toc-number">14.2.1.</span> <span class="toc-text">ğŸ§© 1. åŸç†ï¼šåŠ¨æ€ä»£ç† + é€šçŸ¥ç»‡å…¥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A7%A0-%E9%9D%A2%E8%AF%95%E6%B7%B1%E9%97%AE%E7%82%B9%EF%BC%88%E5%8F%AF%E7%9B%B4%E6%8E%A5%E8%AF%B4%E5%87%BA%E5%8E%9F%E7%90%86%EF%BC%89"><span class="toc-number">14.3.</span> <span class="toc-text">ğŸ§  é¢è¯•æ·±é—®ç‚¹ï¼ˆå¯ç›´æ¥è¯´å‡ºåŸç†ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8C%90-%E4%BA%8C%E3%80%81SpringMVC-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90%EF%BC%88%E8%AF%B7%E6%B1%82%E5%88%86%E5%8F%91-%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A-%E6%B6%88%E6%81%AF%E8%BD%AC%E6%8D%A2%EF%BC%89"><span class="toc-number">15.</span> <span class="toc-text">ğŸŒ äºŒã€SpringMVC å¸¸ç”¨æ³¨è§£æ·±åº¦è§£æï¼ˆè¯·æ±‚åˆ†å‘ + å‚æ•°ç»‘å®š + æ¶ˆæ¯è½¬æ¢ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-SpringMVC-%E7%9A%84%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%E4%B8%8E%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">15.1.</span> <span class="toc-text">1ï¸âƒ£ SpringMVC çš„æ•´ä½“æ¶æ„ä¸æ‰§è¡Œæµç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-%E6%8E%A7%E5%88%B6%E5%B1%82%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3%EF%BC%88Controller-%E4%BD%93%E7%B3%BB%EF%BC%89"><span class="toc-number">15.2.</span> <span class="toc-text">2ï¸âƒ£ æ§åˆ¶å±‚æ ¸å¿ƒæ³¨è§£ï¼ˆController ä½“ç³»ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A1-%E5%AE%9E%E6%88%98%E7%A4%BA%E4%BE%8B"><span class="toc-number">15.2.1.</span> <span class="toc-text">ğŸ’¡ å®æˆ˜ç¤ºä¾‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3-%E8%AF%B7%E6%B1%82%E6%98%A0%E5%B0%84%E6%9C%BA%E5%88%B6%EF%BC%88HandlerMapping%EF%BC%89"><span class="toc-number">15.3.</span> <span class="toc-text">3ï¸âƒ£ è¯·æ±‚æ˜ å°„æœºåˆ¶ï¼ˆHandlerMappingï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%EF%B8%8F%E2%83%A3-%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A%E6%B3%A8%E8%A7%A3%EF%BC%88HandlerMethodArgumentResolver%EF%BC%89"><span class="toc-number">15.4.</span> <span class="toc-text">4ï¸âƒ£ å‚æ•°ç»‘å®šæ³¨è§£ï¼ˆHandlerMethodArgumentResolverï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A1-%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A%E7%A4%BA%E4%BE%8B"><span class="toc-number">15.4.1.</span> <span class="toc-text">ğŸ’¡ å‚æ•°ç»‘å®šç¤ºä¾‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%EF%B8%8F%E2%83%A3-%E5%93%8D%E5%BA%94%E8%BF%94%E5%9B%9E%E6%B3%A8%E8%A7%A3%EF%BC%88HttpMessageConverter%EF%BC%89"><span class="toc-number">15.5.</span> <span class="toc-text">5ï¸âƒ£ å“åº”è¿”å›æ³¨è§£ï¼ˆHttpMessageConverterï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A1-JSON-%E8%BD%AC%E6%8D%A2%E8%BF%87%E7%A8%8B%E5%8E%9F%E7%90%86"><span class="toc-number">15.5.1.</span> <span class="toc-text">ğŸ’¡ JSON è½¬æ¢è¿‡ç¨‹åŸç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%EF%B8%8F%E2%83%A3-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E4%B8%8E%E5%85%A8%E5%B1%80%E6%8E%A7%E5%88%B6"><span class="toc-number">15.6.</span> <span class="toc-text">6ï¸âƒ£ å¼‚å¸¸å¤„ç†ä¸å…¨å±€æ§åˆ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A7%A0-%E9%9D%A2%E8%AF%95%E8%BF%BD%E9%97%AE%E7%82%B9%E4%B8%8E%E9%AB%98%E5%88%86%E7%AD%94%E6%B3%95"><span class="toc-number">15.7.</span> <span class="toc-text">ğŸ§  é¢è¯•è¿½é—®ç‚¹ä¸é«˜åˆ†ç­”æ³•</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%92%BE-%E4%B8%89%E3%80%81MyBatis-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3-%E5%BA%95%E5%B1%82%E6%98%A0%E5%B0%84%E5%8E%9F%E7%90%86%EF%BC%88Mapper-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%9C%BA%E5%88%B6%EF%BC%89"><span class="toc-number">16.</span> <span class="toc-text">ğŸ’¾ ä¸‰ã€MyBatis å¸¸ç”¨æ³¨è§£ + åº•å±‚æ˜ å°„åŸç†ï¼ˆMapper åŠ¨æ€ä»£ç†æœºåˆ¶ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81MyBatis-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%80%BB%E8%A7%88"><span class="toc-number">16.1.</span> <span class="toc-text">ä¸€ã€MyBatis å¸¸ç”¨æ³¨è§£æ€»è§ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Mapper-%E6%B3%A8%E5%86%8C%E6%9C%BA%E5%88%B6%E4%B8%8E%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%8E%9F%E7%90%86"><span class="toc-number">16.2.</span> <span class="toc-text">äºŒã€Mapper æ³¨å†Œæœºåˆ¶ä¸åŠ¨æ€ä»£ç†åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%A1-%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E7%A4%BA%E6%84%8F"><span class="toc-number">16.2.1.</span> <span class="toc-text">ğŸ’¡ æ‰§è¡Œæµç¨‹ç¤ºæ„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%B3%A8%E8%A7%A3%E5%BC%8F-SQL-%E7%A4%BA%E4%BE%8B"><span class="toc-number">16.3.</span> <span class="toc-text">ä¸‰ã€æ³¨è§£å¼ SQL ç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-%E5%9F%BA%E6%9C%AC-CRUD-%E6%B3%A8%E8%A7%A3"><span class="toc-number">16.3.1.</span> <span class="toc-text">1ï¸âƒ£ åŸºæœ¬ CRUD æ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-%E7%BB%93%E6%9E%9C%E6%98%A0%E5%B0%84%E6%B3%A8%E8%A7%A3%EF%BC%88%E8%A7%A3%E5%86%B3%E5%AD%97%E6%AE%B5%E5%90%8D%E4%B8%8D%E5%8C%B9%E9%85%8D%EF%BC%89"><span class="toc-number">16.3.2.</span> <span class="toc-text">2ï¸âƒ£ ç»“æœæ˜ å°„æ³¨è§£ï¼ˆè§£å†³å­—æ®µåä¸åŒ¹é…ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3-%E5%8A%A8%E6%80%81-SQL-%E6%B3%A8%E8%A7%A3"><span class="toc-number">16.3.3.</span> <span class="toc-text">3ï¸âƒ£ åŠ¨æ€ SQL æ³¨è§£</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81-Mapper-%E4%B8%8E-MapperScan-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">16.4.</span> <span class="toc-text">å››ã€@Mapper ä¸ @MapperScan çš„å…³ç³»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%BA%95%E5%B1%82%E5%85%B3%E9%94%AE%E7%BB%84%E4%BB%B6%E8%A7%A3%E6%9E%90%EF%BC%88%E6%BA%90%E7%A0%81%E8%A7%92%E5%BA%A6%EF%BC%89"><span class="toc-number">16.5.</span> <span class="toc-text">äº”ã€åº•å±‚å…³é”®ç»„ä»¶è§£æï¼ˆæºç è§’åº¦ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81MyBatis-Spring-%E7%9A%84%E6%95%B4%E5%90%88%E6%9C%BA%E5%88%B6"><span class="toc-number">16.6.</span> <span class="toc-text">å…­ã€MyBatis + Spring çš„æ•´åˆæœºåˆ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E9%9D%A2%E8%AF%95%E8%BF%BD%E9%97%AE%E7%82%B9%EF%BC%88%E9%AB%98%E5%88%86%E5%9B%9E%E7%AD%94%EF%BC%89"><span class="toc-number">16.7.</span> <span class="toc-text">ä¸ƒã€é¢è¯•è¿½é—®ç‚¹ï¼ˆé«˜åˆ†å›ç­”ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8C%B8-%E5%9B%9B%E3%80%81Spring-Boot-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%BA%95%E5%B1%82%E6%9C%BA%E5%88%B6%EF%BC%88%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D-%E6%9D%A1%E4%BB%B6%E5%8A%A0%E8%BD%BD%EF%BC%89"><span class="toc-number">17.</span> <span class="toc-text">ğŸŒ¸ å››ã€Spring Boot å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆè‡ªåŠ¨è£…é… + æ¡ä»¶åŠ è½½ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Spring-Boot-%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3%E5%85%A8%E5%9B%BE"><span class="toc-number">17.1.</span> <span class="toc-text">ä¸€ã€Spring Boot æ ¸å¿ƒæ³¨è§£å…¨å›¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3%E5%89%96%E6%9E%90"><span class="toc-number">17.2.</span> <span class="toc-text">äºŒã€æ ¸å¿ƒæ³¨è§£å‰–æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%99%EF%B8%8F-1%EF%B8%8F%E2%83%A3-SpringBootApplication%EF%BC%88%E5%85%A5%E5%8F%A3%E6%B3%A8%E8%A7%A3%EF%BC%89"><span class="toc-number">17.2.1.</span> <span class="toc-text">âš™ï¸ 1ï¸âƒ£ @SpringBootApplicationï¼ˆå…¥å£æ³¨è§£ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E6%88%90%E7%BB%93%E6%9E%84"><span class="toc-number">17.2.1.1.</span> <span class="toc-text">ç»„æˆç»“æ„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%99%EF%B8%8F-2%EF%B8%8F%E2%83%A3-EnableAutoConfiguration%EF%BC%88%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E6%A0%B8%E5%BF%83%EF%BC%89"><span class="toc-number">17.2.2.</span> <span class="toc-text">âš™ï¸ 2ï¸âƒ£ @EnableAutoConfigurationï¼ˆè‡ªåŠ¨è£…é…æ ¸å¿ƒï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%8D-%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E6%A0%B8%E5%BF%83%E6%BA%90%E7%A0%81%E9%80%BB%E8%BE%91"><span class="toc-number">17.2.2.1.</span> <span class="toc-text">ğŸ” è‡ªåŠ¨è£…é…æ ¸å¿ƒæºç é€»è¾‘</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%99%EF%B8%8F-3%EF%B8%8F%E2%83%A3-%E6%9D%A1%E4%BB%B6%E8%A3%85%E9%85%8D%E6%B3%A8%E8%A7%A3%EF%BC%88Conditional-%E7%B3%BB%E5%88%97%EF%BC%89"><span class="toc-number">17.2.3.</span> <span class="toc-text">âš™ï¸ 3ï¸âƒ£ æ¡ä»¶è£…é…æ³¨è§£ï¼ˆConditional ç³»åˆ—ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%99%EF%B8%8F-4%EF%B8%8F%E2%83%A3-ConfigurationProperties%EF%BC%88%E9%85%8D%E7%BD%AE%E7%BB%91%E5%AE%9A%EF%BC%89"><span class="toc-number">17.2.4.</span> <span class="toc-text">âš™ï¸ 4ï¸âƒ£ @ConfigurationPropertiesï¼ˆé…ç½®ç»‘å®šï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%99%EF%B8%8F-5%EF%B8%8F%E2%83%A3-Import%EF%BC%88%E6%89%8B%E5%8A%A8%E6%89%A9%E5%B1%95%E8%A3%85%E9%85%8D%EF%BC%89"><span class="toc-number">17.2.5.</span> <span class="toc-text">âš™ï¸ 5ï¸âƒ£ @Importï¼ˆæ‰‹åŠ¨æ‰©å±•è£…é…ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Spring-Boot-%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">17.3.</span> <span class="toc-text">ä¸‰ã€Spring Boot å¯åŠ¨æµç¨‹ï¼ˆé‡ç‚¹ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E9%9D%A2%E8%AF%95%E6%B7%B1%E9%97%AE%E7%82%B9%EF%BC%88%E9%AB%98%E5%88%86%E7%AD%94%E6%B3%95%EF%BC%89"><span class="toc-number">17.4.</span> <span class="toc-text">å››ã€é¢è¯•æ·±é—®ç‚¹ï¼ˆé«˜åˆ†ç­”æ³•ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%9B%A1%EF%B8%8F-%E4%BA%94%E3%80%81Spring-Security-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%BA%95%E5%B1%82%E6%9C%BA%E5%88%B6%EF%BC%88%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83%EF%BC%89"><span class="toc-number">18.</span> <span class="toc-text">ğŸ›¡ï¸ äº”ã€Spring Security å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆè®¤è¯ä¸æˆæƒï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3%E6%80%BB%E8%A7%88"><span class="toc-number">18.1.</span> <span class="toc-text">ä¸€ã€æ ¸å¿ƒæ³¨è§£æ€»è§ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%A0%B8%E5%BF%83%E6%9C%BA%E5%88%B6%E8%A7%A3%E6%9E%90"><span class="toc-number">18.2.</span> <span class="toc-text">äºŒã€æ ¸å¿ƒæœºåˆ¶è§£æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-FilterChainProxy%EF%BC%88%E5%AE%89%E5%85%A8%E8%BF%87%E6%BB%A4%E5%99%A8%E9%93%BE%EF%BC%89"><span class="toc-number">18.2.1.</span> <span class="toc-text">1ï¸âƒ£ FilterChainProxyï¼ˆå®‰å…¨è¿‡æ»¤å™¨é“¾ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-EnableWebSecurity"><span class="toc-number">18.2.2.</span> <span class="toc-text">2ï¸âƒ£ @EnableWebSecurity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3-%E6%96%B9%E6%B3%95%E7%BA%A7%E6%9D%83%E9%99%90%E6%B3%A8%E8%A7%A3"><span class="toc-number">18.2.3.</span> <span class="toc-text">3ï¸âƒ£ æ–¹æ³•çº§æƒé™æ³¨è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-Secured"><span class="toc-number">18.2.3.1.</span> <span class="toc-text">a. @Secured</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-PreAuthorize-PostAuthorize"><span class="toc-number">18.2.3.2.</span> <span class="toc-text">b. @PreAuthorize &#x2F; @PostAuthorize</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-RolesAllowed"><span class="toc-number">18.2.3.3.</span> <span class="toc-text">c. @RolesAllowed</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%B8%8F%E2%83%A3-%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E6%B3%A8%E8%A7%A3"><span class="toc-number">18.2.4.</span> <span class="toc-text">4ï¸âƒ£ è·å–å½“å‰ç”¨æˆ·æ³¨è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AuthenticationPrincipal"><span class="toc-number">18.2.4.1.</span> <span class="toc-text">@AuthenticationPrincipal</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%EF%B8%8F%E2%83%A3-%E6%B5%8B%E8%AF%95%E6%94%AF%E6%8C%81"><span class="toc-number">18.2.5.</span> <span class="toc-text">5ï¸âƒ£ æµ‹è¯•æ”¯æŒ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#WithMockUser"><span class="toc-number">18.2.5.1.</span> <span class="toc-text">@WithMockUser</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%EF%B8%8F%E2%83%A3-%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E6%B5%81%E7%A8%8B%EF%BC%88%E6%A0%B8%E5%BF%83%E9%93%BE%E6%9D%A1%EF%BC%89"><span class="toc-number">18.2.6.</span> <span class="toc-text">6ï¸âƒ£ èº«ä»½è®¤è¯æµç¨‹ï¼ˆæ ¸å¿ƒé“¾æ¡ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%EF%B8%8F%E2%83%A3-%E6%8E%88%E6%9D%83%E5%86%B3%E7%AD%96"><span class="toc-number">18.2.7.</span> <span class="toc-text">7ï¸âƒ£ æˆæƒå†³ç­–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E9%9D%A2%E8%AF%95%E8%BF%BD%E9%97%AE%E7%82%B9%EF%BC%88%E9%AB%98%E5%88%86%E5%9B%9E%E7%AD%94%EF%BC%89"><span class="toc-number">18.3.</span> <span class="toc-text">ä¸‰ã€é¢è¯•è¿½é—®ç‚¹ï¼ˆé«˜åˆ†å›ç­”ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%98%81%EF%B8%8F-%E5%85%AD%E3%80%81Spring-Cloud-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%BA%95%E5%B1%82%E6%9C%BA%E5%88%B6%EF%BC%88%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E3%80%81%E5%8F%91%E7%8E%B0%E3%80%81%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E3%80%81%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8%EF%BC%89"><span class="toc-number">19.</span> <span class="toc-text">â˜ï¸ å…­ã€Spring Cloud å¸¸ç”¨æ³¨è§£ä¸åº•å±‚æœºåˆ¶ï¼ˆæœåŠ¡æ³¨å†Œã€å‘ç°ã€è´Ÿè½½å‡è¡¡ã€è¿œç¨‹è°ƒç”¨ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0%EF%BC%88Eureka-Nacos%EF%BC%89"><span class="toc-number">19.1.</span> <span class="toc-text">ä¸€ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆEureka &#x2F; Nacosï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3"><span class="toc-number">19.1.1.</span> <span class="toc-text">1ï¸âƒ£ æ ¸å¿ƒæ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B%EF%BC%88Eureka-%E7%A4%BA%E4%BE%8B%EF%BC%89"><span class="toc-number">19.1.2.</span> <span class="toc-text">2ï¸âƒ£ æœåŠ¡æ³¨å†Œæµç¨‹ï¼ˆEureka ç¤ºä¾‹ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%88Ribbon-Spring-Cloud-LoadBalancer%EF%BC%89"><span class="toc-number">19.2.</span> <span class="toc-text">äºŒã€è´Ÿè½½å‡è¡¡ï¼ˆRibbon &#x2F; Spring Cloud LoadBalancerï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3-1"><span class="toc-number">19.2.1.</span> <span class="toc-text">1ï¸âƒ£ æ ¸å¿ƒæ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%8E%9F%E7%90%86"><span class="toc-number">19.2.2.</span> <span class="toc-text">2ï¸âƒ£ å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡åŸç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%A3%B0%E6%98%8E%E5%BC%8F%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8%EF%BC%88Feign%EF%BC%89"><span class="toc-number">19.3.</span> <span class="toc-text">ä¸‰ã€å£°æ˜å¼è¿œç¨‹è°ƒç”¨ï¼ˆFeignï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3-2"><span class="toc-number">19.3.1.</span> <span class="toc-text">1ï¸âƒ£ æ ¸å¿ƒæ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-Feign-%E8%B0%83%E7%94%A8%E5%8E%9F%E7%90%86"><span class="toc-number">19.3.2.</span> <span class="toc-text">2ï¸âƒ£ Feign è°ƒç”¨åŸç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3-%E7%A4%BA%E4%BE%8B"><span class="toc-number">19.3.3.</span> <span class="toc-text">3ï¸âƒ£ ç¤ºä¾‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E7%BD%91%E5%85%B3%EF%BC%88Spring-Cloud-Gateway%EF%BC%89"><span class="toc-number">19.4.</span> <span class="toc-text">å››ã€ç½‘å…³ï¼ˆSpring Cloud Gatewayï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3"><span class="toc-number">19.4.1.</span> <span class="toc-text">æ ¸å¿ƒæ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86"><span class="toc-number">19.4.2.</span> <span class="toc-text">æ ¸å¿ƒåŸç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E7%86%94%E6%96%AD%E4%B8%8E%E9%99%8D%E7%BA%A7%EF%BC%88Resilience4j-Spring-Cloud-CircuitBreaker%EF%BC%89"><span class="toc-number">19.5.</span> <span class="toc-text">äº”ã€ç†”æ–­ä¸é™çº§ï¼ˆResilience4j &#x2F; Spring Cloud CircuitBreakerï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3-1"><span class="toc-number">19.5.1.</span> <span class="toc-text">æ ¸å¿ƒæ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-number">19.5.2.</span> <span class="toc-text">åŸç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E9%9D%A2%E8%AF%95%E9%AB%98%E9%A2%91%E9%97%AE%E7%82%B9"><span class="toc-number">19.6.</span> <span class="toc-text">å…­ã€é¢è¯•é«˜é¢‘é—®ç‚¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B7%E4%BE%8B%E7%BB%93%E6%9E%84%EF%BC%88%E5%85%AD%E5%A4%A7%E6%A1%86%E6%9E%B6%E9%80%9F%E6%9F%A5%E5%8D%A1%EF%BC%89"><span class="toc-number">19.6.1.</span> <span class="toc-text">æ ·ä¾‹ç»“æ„ï¼ˆå…­å¤§æ¡†æ¶é€ŸæŸ¥å¡ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-Spring-%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">19.7.</span> <span class="toc-text">1ï¸âƒ£ Spring æ ¸å¿ƒæ³¨è§£ &amp; ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-SpringMVC-%E6%B3%A8%E8%A7%A3-%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86"><span class="toc-number">19.8.</span> <span class="toc-text">2ï¸âƒ£ SpringMVC æ³¨è§£ &amp; è¯·æ±‚å¤„ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3-MyBatis-%E6%B3%A8%E8%A7%A3-SQL-%E6%89%A7%E8%A1%8C"><span class="toc-number">19.9.</span> <span class="toc-text">3ï¸âƒ£ MyBatis æ³¨è§£ &amp; SQL æ‰§è¡Œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%EF%B8%8F%E2%83%A3-Spring-Boot-%E6%B3%A8%E8%A7%A3-%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">19.10.</span> <span class="toc-text">4ï¸âƒ£ Spring Boot æ³¨è§£ &amp; è‡ªåŠ¨è£…é…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%EF%B8%8F%E2%83%A3-Spring-Security-%E6%B3%A8%E8%A7%A3-%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-number">19.11.</span> <span class="toc-text">5ï¸âƒ£ Spring Security æ³¨è§£ &amp; æƒé™æ§åˆ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%EF%B8%8F%E2%83%A3-Spring-Cloud-%E6%B3%A8%E8%A7%A3-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8"><span class="toc-number">19.12.</span> <span class="toc-text">6ï¸âƒ£ Spring Cloud æ³¨è§£ &amp; å¾®æœåŠ¡è°ƒç”¨</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/01/%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3/" title="æ¡†æ¶å¸¸ç”¨æ³¨è§£">æ¡†æ¶å¸¸ç”¨æ³¨è§£</a><time datetime="2025-09-30T16:00:00.000Z" title="å‘è¡¨äº 2025-10-01 00:00:00">2025-10-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/01/%E7%89%9B%E5%AE%A2%E5%85%AB%E8%82%A1/" title="ç‰›å®¢é¢è¯•é¢˜">ç‰›å®¢é¢è¯•é¢˜</a><time datetime="2025-09-30T16:00:00.000Z" title="å‘è¡¨äº 2025-10-01 00:00:00">2025-10-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/23/%E7%AE%80%E6%98%93%E7%89%88%E9%A2%98%E7%9B%AE/" title="ç®€æ˜“ç‰ˆé¢˜ç›®">ç®€æ˜“ç‰ˆé¢˜ç›®</a><time datetime="2025-09-22T16:00:00.000Z" title="å‘è¡¨äº 2025-09-23 00:00:00">2025-09-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/22/go/" title="go">go</a><time datetime="2025-09-21T16:00:00.000Z" title="å‘è¡¨äº 2025-09-22 00:00:00">2025-09-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/22/%E6%80%BB%E7%BB%93/" title="è¦ç‚¹æçº²">è¦ç‚¹æçº²</a><time datetime="2025-09-21T16:00:00.000Z" title="å‘è¡¨äº 2025-09-22 00:00:00">2025-09-22</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/bg.jpg);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Charlotte</span><span class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.0</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script src="/js/custom.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>